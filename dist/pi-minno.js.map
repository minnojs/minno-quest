{"version":3,"file":"pi-minno.js","sources":["../src/APIs/APIConstructor.js","../src/APIs/PIAPIdecorator.js","../src/APIs/PImanagerAPI.js","../../pip/src/polyfills.js","../../pip/src/app/global.js","../../pip/src/app/task/sequencer/sequenceGoto.js","../../pip/src/app/task/sequencer/createDB.js","../../pip/src/app/task/canvas/getSize.js","../../pip/src/app/task/canvas/adjust_canvas.js","../../pip/src/app/task/canvas/applyCanvasStyles.js","../../pip/node_modules/minno-css/css.js","../../pip/src/app/task/canvas/canvasSetup.js","../../pip/src/app/setup.js","../../pip/src/app/task/sequencer/preloader.js","../../pip/src/app/task/sequencer/buildUrl.js","../../pip/src/app/task/sequencer/scriptPreloader.js","../../pip/src/app/preloadPhase.js","../../pip/src/app/trial/input/bindings/mouseEvents.js","../../pip/src/app/trial/input/bindings/keypressed.js","../../pip/src/app/trial/input/bindings/keyup.js","../../pip/src/app/trial/input/bindings/simpleRandomize.js","../../pip/src/app/trial/input/bindings/timeout.js","../../pip/src/app/trial/input/binder.js","../../pip/src/app/trial/input/createListener.js","../../pip/src/app/trial/input/input.js","../../pip/src/app/trial/stimulus/getMedia.js","../../pip/src/app/trial/stimulus/setSize.js","../../pip/src/app/trial/stimulus/setPlace.js","../../pip/src/app/trial/stimulus/Stimulus.js","../../pip/src/app/trial/stimulus/stimulusCollection.js","../../pip/src/app/trial/interactions/getConditionFn.js","../../pip/src/app/trial/interactions/conditionsEvaluate.js","../../pip/src/app/trial/interactions/action.js","../../pip/src/app/trial/interactions/interactions.js","../../pip/src/app/trial/Trial.js","../../pip/src/app/task/sequencer/nextTrial.js","../../pip/src/app/task/logger/post.js","../../pip/src/app/task/logger/poster.js","../../pip/src/app/task/logger/createLogStream.js","../../pip/src/app/task/logger/defaultLogMap.js","../../pip/src/app/playPhase.js","../../pip/src/index.js","../src/APIs/PItimeAPI.js","../src/APIs/PIquestAPI.js","../node_modules/utils/logger/LoggerProvider.js","../node_modules/utils/console/consoleProvider.js","../node_modules/utils/console/consolePrototypeProvider.js","../node_modules/utils/console/consoleDirective.js","../node_modules/utils/console/consoleModule.js","../node_modules/minno-sequencer/src/mixer/mixer.js","../node_modules/minno-sequencer/src/mixer/mixerSequential.js","../node_modules/minno-sequencer/src/mixer/mixerRecursive.js","../node_modules/minno-sequencer/src/mixer/mixerSequenceProvider.js","../node_modules/minno-sequencer/src/mixer/branching/dotNotation.js","../node_modules/minno-sequencer/src/mixer/branching/mixerDotNotationProvider.js","../node_modules/minno-sequencer/src/mixer/branching/mixerConditionProvider.js","../node_modules/minno-sequencer/src/mixer/branching/mixerBranchingDecorator.js","../node_modules/minno-sequencer/src/mixer/branching/mixerEvaluateProvider.js","../node_modules/minno-sequencer/src/template/templateFilter.js","../node_modules/minno-sequencer/src/template/templateObjProvider.js","../node_modules/minno-sequencer/src/console/consolePrototypeProvider.js","../node_modules/minno-sequencer/src/console/consoleProvider.js","../node_modules/minno-sequencer/src/console/consoleDirective.js","../node_modules/minno-sequencer/src/console/consoleModule.js","../node_modules/minno-sequencer/src/randomizer/randomizerProvider.js","../node_modules/minno-sequencer/src/collection/collectionProvider.js","../node_modules/minno-sequencer/src/inflateProvider.js","../node_modules/minno-sequencer/src/queryProvider.js","../node_modules/minno-sequencer/src/databaseProvider.js","../node_modules/minno-sequencer/src/store/storeProvider.js","../node_modules/minno-sequencer/src/databaseSequenceProvider.js","../src/quest/task/questSequenceProvider.js","../src/quest/task/questTaskProvider.js","../src/quest/task/parseProvider.js","../src/quest/task/logger/dfltQuestLogger.js","../src/quest/task/logger/post.js","../src/quest/task/logger/poster.js","../src/quest/task/logger/createLogStream.js","../node_modules/utils/timer/timerStopper.js","../node_modules/utils/timer/timerDirective.js","../node_modules/utils/utils/preloadImages.js","../node_modules/utils/modal/modalService.js","../src/quest/directives/questController.js","../src/quest/directives/guid.js","../src/quest/directives/piQuest/piQuest-directive.js","../src/quest/directives/piQuest/piqPage-directive.js","../src/quest/directives/wrapper/wrapper-directive.js","../src/quest/directives/text/textDirective.js","../src/quest/directives/select/selectMixerProvider.js","../src/quest/directives/select/dropdownDirective.js","../src/quest/directives/select/selectOneDirective.js","../src/quest/directives/select/selectMultiDirective.js","../node_modules/custom-event/index.js","../node_modules/crossvent/src/crossvent.js","../node_modules/dragula/classes.js","../node_modules/dragula/dragula.js","../src/quest/directives/rank/rankDirective.js","../src/quest/directives/grid/gridDirective.js","../src/quest/directives/grid/gridRowDirective.js","../src/quest/directives/multiGrid/multiGridDirective.js","../src/quest/directives/multiGrid/multiGridRowDirective.js","../src/quest/directives/slider/sliderDirective.js","../src/quest/directives/slider/piPointerdown.js","../src/quest/directives/toRegexFilter.js","../src/quest/directives/dfltUnitsFilter.js","../src/message/messageDirective.js","../src/message/messageDoneDirective.js","../src/taskManager/task/taskActivateProvider.js","../src/taskManager/task/taskDirective.js","../src/taskManager/canvas/canvasConstructor.js","../src/taskManager/canvas/managerCanvasService.js","../node_modules/utils/helperDirectives/piSwap/piSwapDirective.js","../node_modules/utils/helperDirectives/piSpinner/piSpinnerDirective.js","../src/taskManager/managerToCsv.js","../src/taskManager/managerService.js","../src/taskManager/managerSequence.js","../src/taskManager/managerLoadService.js","../src/taskManager/managerGetScriptService.js","../src/taskManager/managerTaskLoadService.js","../src/taskManager/beforeUnloadFactory.js","../src/taskManager/injectStyle.js","../src/taskManager/managerDirective.js","../src/taskManager/managerTaskDirective.js","../src/taskManager/piLinkDirective.js","../src/utils/animations/dropInAnimation.js","../src/utils/animations/fadeAnimation.js","../src/utils/animations/slideAnimation.js","../src/utils/console/consoleProvider.js","../src/utils/console/consolePrototypeProvider.js","../src/utils/console/consoleDirective.js","../src/utils/console/consoleModule.js","../src/pi-index.js","../node_modules/lodash/index.js","../src/APIs/managerAPI.js","../src/APIs/timeAPI.js","../../pip/node_modules/lodash/index.js","../../pip/node_modules/minno-sequencer/minno-sequencer.js","../../pip/node_modules/mithril-stream/stream.js","../../pip/node_modules/fastdom/fastdom.js","../../pip/src/app/trial/input/now.js","../../pip/src/app/trial/interactions/actionList.js","../src/APIs/questAPI.js","../node_modules/utils/logger/logger-module.js","../node_modules/minno-sequencer/src/randomize/randomizeModule.js","../node_modules/minno-sequencer/src/mixer/mixerModule.js","../node_modules/minno-sequencer/src/template/templateModule.js","../node_modules/minno-sequencer/src/databaseModule.js","../node_modules/mithril-stream/stream.js","../src/quest/task/questTaskModule.js","../node_modules/utils/timer/timerNow.js","../node_modules/utils/timer/timer-module.js","../node_modules/utils/utils/utilsModule.js","../src/quest/directives/buttons/buttons.js","../node_modules/utils/modal/modalModule.js","../src/quest/directives/text/text-number-directive.js","../node_modules/atoa/atoa.js","../node_modules/ticky/ticky.js","../node_modules/contra/debounce.js","../node_modules/contra/emitter.js","../node_modules/crossvent/src/eventmap.js","../src/quest/directives/slider/slider.js","../src/quest/directives/questDirectivesModule.js","../src/quest/questModule.js","../src/message/messageModule.js","../src/taskManager/task/taskModule.js","../src/taskManager/canvas/canvasModule.js","../node_modules/utils/helperDirectives/helperDirectivesModule.js","../src/taskManager/managerModule.js","../src/utils/animations/rafPolyfill.js","../src/utils/animations/animationModule.js","../src/app.js"],"sourcesContent":["window.piGlobal || (window.piGlobal = {});\n\nimport _ from 'lodash';\nimport angular from 'angular';\n\nexport default APIconstructor;\n\nvar global = window.piGlobal;\n\n/**\n * Create a new API\n * @param {Object} options\n * {\n * \t\ttype: 'PIP',\n * \t\tsets: ['trial', 'stimulus', 'media']\n * }\n */\nfunction APIconstructor(options){\n\n    function API(){\n        var script = this.script = {\n            type: options.type,\n            name: 'anonymous ' + options.type,\n            settings: {},\n            current: {}, // this is the actual namespace for this PIP\n            sequence: []\n        };\n\n        this.settings = script.settings;\n\n        // create set arrays\n        _.forEach(options.sets, function(set){\n            script[set + 'Sets'] = [];\n        });\n    }\n\n    _.forEach(options.sets, function(set){\n        API.prototype[_.camelCase('add-' + set + '-set')] = add_set(set);\n    });\n\n    _.extend(API.prototype, options.static, {\n\n        setName: function(name){\n            this.script.name = name;\n        },\n\n        // settings\n        addSettings: function(name, settingsObj){\n            var settings;\n\n\n\n            if (_.isPlainObject(settingsObj)){\n                settings = this.settings[name] = this.settings[name] || {};\n                _.extend(settings, settingsObj);\n            } else {\n                this.settings[name] = settingsObj;\n            }\n\n            return this;\n        },\n\n        addSequence: function(sequence){\n            var script = this.script;\n            _.isArray(sequence) || (sequence = [sequence]);\n\n            script.sequence = script.sequence.concat(sequence);\n\n            return this;\n        },\n\n        addGlobal: function(obj){\n            if (!_.isPlainObject(obj)){\n                throw new Error('global must be an object');\n            }\n            return _.merge(global, obj);\n        },\n\n        getGlobal: function(){\n            return global;\n        },\n\n        addCurrent: function(obj){\n            if (!_.isPlainObject(obj)){\n                throw new Error('current must be an object');\n            }\n            return _.merge(this.script.current, obj);\n        },\n\n        getCurrent: function(){\n            return this.script.current;\n        },\n\n        // push a whole script\n        addScript: function(obj){\n            return _.merge(this.script,obj);\n        },\n\n        // returns script (for debuging probably)\n        getScript: function(){\n            return this.script;\n        },\n\n        // name, response, taskName, taskNumber\n        post: function(url, obj){\n            // just so we can use this in standalone PIP\n            var $injector = angular.injector(['ng']);\n\n            return $injector.invoke(['$http', function($http){\n                return $http.post(url, obj);\n            }]);\n        },\n\n        shuffle: function(collection){\n            return _.shuffle(collection);\n        }\n    });\n\n    return API;\n}\n\n\n/**\n * Create a function that adds sets of a scpecific type\n * @param {String} type  \tThe type of set setter to create\n * @returns {Function} \tA setter object\n */\nfunction add_set(type){\n\n    /**\n     * Adds a set to the targetSet\n     * @param {String, Object} set    \tEither full set object, or the name of this setArr\n     * @param {Array} setArr \t\t\tAn array of objects for this set\n     * @returns {Object} The API object\n     *\n     * use examples:\n     * fn({\n     *   intro: [intro1, intro2],\n     *   Default: [defaultTrial]\n     * })\n     * fn('intro',[intro1, intro2])\n     * fn('Default',defaultTrial)\n     *\n     */\n    function setSetter(set, setArr){\n\n        // get the sets we want to extend (or create them)\n        var targetSets = this.script[type + 'Sets'] || (this.script[type + 'Sets'] = []);\n        var list;\n\n        if (_.isPlainObject(set)) {\n            list = _(set)\n                // for each set of elements\n                .map(function(value, key){\n                    // add the set name to each key\n                    _.each(value, function(v){v.set = key;});\n                    return value; // return the set\n                })\n                .flatten() // flatten all sets to a single array\n                .value();\n        }\n\n        if (_.isArray(set)){\n            list = set;\n        }\n\n        if (_.isString(set)){\n            list = _.isArray(setArr) ? setArr : [setArr];\n            list = _.map(list, function(value){\n                value.set = set;\n                return value;\n            });\n\n        }\n\n        // merge the list into the targetSet\n        targetSets.push.apply(targetSets, list);\n    }\n\n    return setSetter;\n}\n\n","import _ from 'lodash';\n\nexport default APIdecorator;\n\nvar counter = 1000;\n\nfunction APIdecorator(constructor){\n    constructor.prototype.save = save;\n}\n\nfunction save(obj){\n    var script = this.script;\n    if (!_.isPlainObject(obj)){\n        throw new Error('API.save can send only objects.');\n    }\n\n    var globalMeta = (window.piGlobal && window.piGlobal.$meta) || {};\n\n    var meta = {\n        taskName: script.name,\n        taskNumber: script.serial || 0\n    };\n\n    var arr = _.map(obj, function(value, key){\n        return _.extend({\n            name: key,\n            response: value,\n            serial: ++counter\n        }, meta, globalMeta);\n    });\n\n    return this.post('/implicit/PiQuest', arr);\n}\n","import Constructor from './managerAPI';\nimport _ from 'lodash';\nimport decorator from './PIAPIdecorator';\n\nimport messageTemplate from './pi/messageTemplate.jst';\nimport messageTemplateDebrief from './pi/messageTemplateDebrief.jst';\nimport messageTemplatePanel from './pi/messageTemplatePanel.jst';\n\nexport default API;\n\n/**\n * Constructor for PIPlayer script creator\n * @return {Object}\t\tScript creator\n */\nfunction API(){\n    Constructor.call(this);\n    this.settings.onPreTask = onPreTask;\n}\n\ndecorator(API);\n\n// create API functions\n_.extend(API.prototype, Constructor.prototype);\n\n// annotate onPreTask\nonPreTask.$inject = ['currentTask', '$http','$rootScope','managerBeforeUnload','templateDefaultContext', 'managerSettings'];\n\n/**\n * Before each task,\n * \t\tpost to /implicit/PiManager\n * \t\tin case this is a quest/pip added logging meta\n *\n * @param  {Object} currentTask The task Object\n * @param  {Object} $http       The $http service\n * @return {Promise}            Resolved when server responds\n */\nfunction onPreTask(currentTask, $http, $rootScope, beforeUnload, templateDefaultContext,managerSettings){\n    var global = $rootScope.global;\n    var context = {};\n    var data = _.assign({}, global.$meta, {taskName: currentTask.name || 'namelessTask', taskNumber: currentTask.$meta.number, taskURL:currentTask.scriptUrl || currentTask.templateUrl});\n\n    // set last task flag\n    if (currentTask.last){\n        data.sessionStatus = 'C';\n        beforeUnload.deactivate();\n    }\n\n    // add logging meta\n    if (currentTask.type == 'quest' || currentTask.type == 'pip'){\n        currentTask.$script.serial = currentTask.$meta.number;\n        _.set(currentTask, '$script.settings.logger.meta', _.assign({}, data, _.get(currentTask, '$script.settings.logger.meta', {})));\n        _.set(currentTask, '$script.settings.logger.error', error);\n    }\n\n    // add feedback functions to the default template context\n    _.extend(templateDefaultContext,{\n        showFeedback: _.bind(showFeedback,null,global),\n        showPanel: showPanel\n    });\n\n    if (currentTask.type == 'message' && currentTask.piTemplate){\n        _.assign(context, templateDefaultContext, {\n            global: global,\n            current: global.current,\n            task: currentTask,\n            tasksData: _.get(currentTask,'data',{})\n        });\n\n        // compile template here so that we have all the addtional functions available\n        // event when the template is loaded from a file.\n        context.content = currentTask.$template = _.template(currentTask.$template)(context);\n\n        if (currentTask.piTemplate == 'debrief'){\n            currentTask.$template = _.template(messageTemplateDebrief)(context); // insert into meta template\n            currentTask.$template = _.template(currentTask.$template)(context); // render secondary template with extended context\n        } else {\n            currentTask.$template = _.template(messageTemplate)(context); // insert into meta template\n        }\n    }\n\n\n    if (currentTask.last && global.$mTurk){\n        var $mTurk = global.$mTurk;\n        var mturkUrl = $mTurk.isProduction ?  'http://www.mturk.com/mturk/externalSubmit' : 'https://workersandbox.mturk.com/mturk/externalSubmit';\n        var onPost = currentTask.post || _.noop;\n\n\n        if (!_.every(['assignmentId','hitId','workerId'], function(prop){return _.has($mTurk, prop);})){\n            throw new Error ('$mTurk is missing a crucial property (assignmentId,hitId,workerId)');\n        }\n\n        currentTask.post = function(){\n            onPost.apply(this, arguments);\n            postRedirect(mturkUrl,_.omit($mTurk,'isProduction'));\n        };\n    }\n\n    if (window._err && window._err.meta){\n        var meta = window._err.meta;\n        meta.subtaskName = currentTask.name;\n        meta.subtaskURL = currentTask.scriptUrl || currentTask.templateUrl;\n    }\n\n    var posturl = _.get(managerSettings, 'logger.url', '/implicit/PiManager');\n\n    return $http.post(posturl, data)['catch'](error);\n\n    function error(){\n        var reportNoConnection = currentTask.reportNoConnection;\n        if (reportNoConnection){\n            var message = document.createElement('div');\n            message.className = 'crash-message';\n            message.innerHTML = reportNoConnection;\n            document.body.insertBefore(message, document.body.firstChild);\n        }\n\n        throw new Error('Failed to update server');\n    }\n}\n\nfunction postRedirect(path, params, method) {\n    method = method || 'post'; // Set method to post by default if not specified.\n\n    // The rest of this code assumes you are not using a library.\n    // It can be made less wordy if you use one.\n    var form = document.createElement('form');\n    form.setAttribute('method', method);\n    form.setAttribute('action', path);\n\n    for(var key in params) {\n        if(params.hasOwnProperty(key)) {\n            var hiddenField = document.createElement('input');\n            hiddenField.setAttribute('type', 'hidden');\n            hiddenField.setAttribute('name', key);\n            hiddenField.setAttribute('value', params[key]);\n\n            form.appendChild(hiddenField);\n        }\n    }\n\n    document.body.appendChild(form);\n    form.submit();\n}\n\nfunction showPanel(content, header, footer){\n    return _.template(messageTemplatePanel)({\n        content: content,\n        header: header,\n        footer: footer\n    });\n}\n\nfunction showFeedback(global, options){\n    _.isPlainObject(options) || (options = {});\n\n    _.defaults(options,{\n        pre: '<p>',\n        post: '</p>',\n        wrap: true,\n        header: '',\n        noFeedback: '<p>No feedback was found</p>',\n        property: 'feedback',\n        exclude: []\n    });\n\n    if (!_.isArray(options.exclude)) { throw Error('showFeedback: Exclude must be an array'); }\n\n    var feedback = _(global)\n        .filter(function(task,taskName){\n            var hasProperty =  _.isPlainObject(task) && !_.isUndefined(task[options.property]);\n            var notExcluded = (_.indexOf(options.exclude,taskName) === -1) && (taskName !== 'current');\n            return hasProperty && notExcluded;\n        })\n        .mapValues(function(task){\n            return options.pre + task[options.property] + options.post;\n        })\n        .reduce(function(result, feedback){\n            return result + feedback;\n        },'') || options.noFeedback;\n\n    return options.wrap ? showPanel(feedback,options.header,options.footer) : feedback;\n}\n","if (!Date.now) Date.now = function() { return new Date().getTime(); };\n\nfunction log(){ console.log.apply(console, arguments); }\nif (!console.group) console.group = log;\nif (!console.groupCollapsed) console.groupCollapsed = log;\nif (!console.groupEnd) console.groupEnd = log;\nif (!console.table) console.table = log;\n\n\n(function() {\n    'use strict';\n\n    var vendors = ['webkit', 'moz'];\n    for (var i = 0; i < vendors.length && !window.requestAnimationFrame; ++i) {\n        var vp = vendors[i];\n        window.requestAnimationFrame = window[vp+'RequestAnimationFrame'];\n        window.cancelAnimationFrame = (window[vp+'CancelAnimationFrame']\n            || window[vp+'CancelRequestAnimationFrame']);\n    }\n    // iOS6 is buggy\n    if (/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent) || !window.requestAnimationFrame || !window.cancelAnimationFrame) {\n        var lastTime = 0;\n        window.requestAnimationFrame = function(callback) {\n            var now = Date.now();\n            var nextTime = Math.max(lastTime + 16, now);\n            return setTimeout(function() { callback(lastTime = nextTime); },\n                              nextTime - now);\n        };\n        window.cancelAnimationFrame = clearTimeout;\n    }\n}());\n\n// Promise polyfill from https://github.com/MithrilJS/mithril.js/blob/next/promise/promise.js \n\"use strict\"\n/** @constructor */\nvar PromisePolyfill = function(executor) {\n    if (!(this instanceof PromisePolyfill)) throw new Error(\"Promise must be called with `new`\")\n        if (typeof executor !== \"function\") throw new TypeError(\"executor must be a function\")\n\n            var self = this, resolvers = [], rejectors = [], resolveCurrent = handler(resolvers, true), rejectCurrent = handler(rejectors, false)\n            var instance = self._instance = {resolvers: resolvers, rejectors: rejectors}\n            var callAsync = typeof setImmediate === \"function\" ? setImmediate : setTimeout\n            function handler(list, shouldAbsorb) {\n                return function execute(value) {\n                    var then\n                    try {\n                        if (shouldAbsorb && value != null && (typeof value === \"object\" || typeof value === \"function\") && typeof (then = value.then) === \"function\") {\n                            if (value === self) throw new TypeError(\"Promise can't be resolved w/ itself\")\n                                executeOnce(then.bind(value))\n                        }\n                        else {\n                            callAsync(function() {\n                                if (!shouldAbsorb && list.length === 0) console.error(\"Possible unhandled promise rejection:\", value)\n                                    for (var i = 0; i < list.length; i++) list[i](value)\n                                        resolvers.length = 0, rejectors.length = 0\n                                instance.state = shouldAbsorb\n                                instance.retry = function() {execute(value)}\n                            })\n                        }\n                    }\n                    catch (e) {\n                        rejectCurrent(e)\n                    }\n                }\n            }\n            function executeOnce(then) {\n                var runs = 0\n                function run(fn) {\n                    return function(value) {\n                        if (runs++ > 0) return\n                        fn(value)\n                    }\n                }\n                var onerror = run(rejectCurrent)\n                try {then(run(resolveCurrent), onerror)} catch (e) {onerror(e)}\n            }\n\n            executeOnce(executor)\n}\nPromisePolyfill.prototype.then = function(onFulfilled, onRejection) {\n    var self = this, instance = self._instance\n    function handle(callback, list, next, state) {\n        list.push(function(value) {\n            if (typeof callback !== \"function\") next(value)\n                else try {resolveNext(callback(value))} catch (e) {if (rejectNext) rejectNext(e)}\n        })\n        if (typeof instance.retry === \"function\" && state === instance.state) instance.retry()\n    }\nvar resolveNext, rejectNext\nvar promise = new PromisePolyfill(function(resolve, reject) {resolveNext = resolve, rejectNext = reject})\nhandle(onFulfilled, instance.resolvers, resolveNext, true), handle(onRejection, instance.rejectors, rejectNext, false)\nreturn promise\n}\nPromisePolyfill.prototype.catch = function(onRejection) {\n    return this.then(null, onRejection)\n}\nPromisePolyfill.resolve = function(value) {\n    if (value instanceof PromisePolyfill) return value\n    return new PromisePolyfill(function(resolve) {resolve(value)})\n}\nPromisePolyfill.reject = function(value) {\n    return new PromisePolyfill(function(resolve, reject) {reject(value)})\n}\nPromisePolyfill.all = function(list) {\n    return new PromisePolyfill(function(resolve, reject) {\n        var total = list.length, count = 0, values = []\n        if (list.length === 0) resolve([])\n            else for (var i = 0; i < list.length; i++) {\n                (function(i) {\n                    function consume(value) {\n                        count++\n                            values[i] = value\n                            if (count === total) resolve(values)\n                    }\n                if (list[i] != null && (typeof list[i] === \"object\" || typeof list[i] === \"function\") && typeof list[i].then === \"function\") {\n                    list[i].then(consume, reject)\n                }\n                else consume(list[i])\n                })(i)\n            }\n    })\n}\nPromisePolyfill.race = function(list) {\n    return new PromisePolyfill(function(resolve, reject) {\n        for (var i = 0; i < list.length; i++) {\n            list[i].then(resolve, reject)\n        }\n    })\n}\n\nif (typeof window.Promise === \"undefined\") window.Promise = PromisePolyfill\n","export default global;\n\n// initiate piGloabl\nvar glob = window.piGlobal || (window.piGlobal = {});\n\nfunction global(){\n    return glob;\n}\n\n","/**\n * Go to a destination within the sequence (must be a property of a sequence)\n * @param  {String} target destination type\n * @param  {Object} properties destination options\n * @return {Object}        result element\n */\n\nimport _ from 'lodash';\nexport default go;\n\nfunction go(destination, properties, context){\n    var mixerSequence = this.mixerSequence;\n\n    switch (destination){\n        case 'nextWhere':\n            where('next', properties, context, mixerSequence);\n            break;\n        case 'previousWhere':\n            where('next', properties, context, mixerSequence);\n            break;\n        case 'current':\n            // don't need to do anything...\n            break;\n        case 'first':\n            do {mixerSequence.prev(context);} while (mixerSequence.current(context));\n            break;\n        case 'last':\n            do {mixerSequence.next(context);} while (mixerSequence.current(context));\n            mixerSequence.prev();\n            break;\n        case 'end':\n            do {mixerSequence.next(context);} while (mixerSequence.current(context));\n            break;\n        case 'next' :\n            mixerSequence.next(context); // get the next trial, in case there are no more trials, returns undefined\n            break;\n        default:\n            throw new Error('Unknow destination \"' + destination + '\" for goto.');\n    }\n\n    return this;\n}\n\nfunction where(direction, properties, context, sequence){\n    var curr;\n\n    do {\n        sequence[direction]();\n        curr = sequence.current(context);\n    } while (curr && !_.callback(properties)(curr.data));\n}\n","/*\n * this file is resposible for taking the experiment script (json) and parsing it\n */\n\n// load dependancies\nimport _ from 'lodash';\nimport Database from 'minno-sequencer';\nimport go from './sequenceGoto';\n\nexport default createDB;\n\nfunction createDB(script){\n    var db = new Database();\n    db.createColl('trial');\n    db.createColl('stimulus');\n    db.createColl('media');\n\n    db.add('trial', script.trialSets || []);\n    db.add('stimulus', script.stimulusSets || []);\n    db.add('media', script.mediaSets || []);\n\n    if (!_.isArray(script.sequence)) throw new Error('You must set a sequence array.');\n\n    var sequence = db.sequence('trial', script.sequence);\n    sequence.go = go; // see sequence/goto.js to understand why we are doing this\n    db.currentSequence = sequence;\n    return db;\n}\n","export default getSize;\n\n// helper function: returns sizes of element;\nfunction getSize(el){\n    var computedStyle = window.getComputedStyle(el);\n    return {\n        height    : parse(el.offsetHeight) - parse(computedStyle.borderTopWidth) - parse(computedStyle.borderBottomWidth),\n        width    : parse(el.offsetWidth) - parse(computedStyle.borderLeftWidth) - parse(computedStyle.borderRightWidth)\n    };\n}\n\nfunction parse(num){ return parseFloat(num, 10) || 0;}\n","/*\n * adjust canvas according to window size and settings\n * this module is built to be part of the main view\n */\n\nimport _ from 'lodash';\nimport getSize from './getSize';\n\nexport default adjust_canvas;\n\n// the function to be used by the main view\nfunction adjust_canvas(canvas, settings){\n\n    return _.throttle(eventListener, 16);\n\n    function eventListener(event){\n        // we put this in a time out because of a latency of orientation change on android devices\n        if (event.type == 'orientationchange') setTimeout(resize, 500);\n        else resize();\n    }\n\n    function resize(){\n        var targetSize = getTargetSize(settings, canvas);\n\n        // remove border width and top margin from calculated width (can't depend on cool box styles yet...)\n        // we compute only margin-top because of a difference calculating margins between chrome + IE and firefox + mobile\n        var computedStyle = window.getComputedStyle(canvas);\n        targetSize.height -= parse(computedStyle.borderTopWidth) + parse(computedStyle.borderBottomWidth) + parse(computedStyle.marginTop);\n        targetSize.width -= parse(computedStyle.borderLeftWidth) + parse(computedStyle.borderRightWidth);\n\n        // reset canvas size\n        canvas.style.width = targetSize.width + 'px';\n        canvas.style.height = targetSize.height + 'px';\n        canvas.style.fontSize = targetSize.height*(settings.textSize || 3)/100 + 'px';\n\n        // scroll to top of window (hides some of the mess on the top of mobile devices)\n        window.scrollTo(0, 1);\n    }\n}\n\nfunction getProportions(settings){\n    // if proportions are an object they should include width and height\n    if (_.isPlainObject(settings.proportions)) {\n        if (typeof settings.proportions.height !== 'number' || typeof settings.proportions.width !== 'number'){\n            throw new Error('The canvas proportions object`s height and a width properties must be numeric');\n        }\n        return settings.proportions.height/settings.proportions.width; \n    } \n    return settings.proportions || 0.8; // by default proportions are 0.8\n}\n\nfunction getTargetSize(settings, canvas){\n    // calculate proportions (as height/width)\n    var proportions = getProportions(settings);\n\n    // static canvas size\n    // ------------------\n    if (settings.width) return {\n        width: settings.width,\n        height: settings.width*proportions\n    };\n\n    // dynamic canvas size\n    // -------------------\n\n    var docElement = window.document.documentElement; // used to get client view size\n\n    var maxHeight = docElement.clientHeight;\n    var maxWidth = Math.min(settings.maxWidth, docElement.clientWidth, getSize(canvas.parentNode).width);\n\n    // calculate the correct size for this screen size\n    if (maxHeight > proportions * maxWidth) return { height: maxWidth*proportions, width: maxWidth };\n    else return { height: maxHeight, width: maxHeight/proportions};\n}\n\nfunction parse(num){ return parseFloat(num, 10) || 0;}\n","/**\n *\n * This whole module taken from piManager\n *\n */\n\nimport _ from 'lodash';\nexport default canvasContructor;\n\n/**\n * Takes a map of css rules and applies them.\n * Returns a function that returns the page to its former condition.\n *\n * The rule map is an object of ruleName -> ruleObject.\n *\n * var ruleObject = {\n * \telement : wrapped element to affect\n * \tproperty: css property to modify\n * }\n *\n * @param  {Object} map      A hash of rules.\n * @param  {Object} settings A hash of ruleName -> value\n * @return {Function}        A function that undoes all the previous changes\n */\nfunction canvasContructor(map, settings){\n    var offArr;\n\n    if (!_.isPlainObject(map)) throw new Error('canvas(map): You must set a rule map for canvas to work properly');\n\n    // if settings is undefined return a function that doesn't do anything\n    // just so we don't need to make sure that the user modifies the canvas\n    if (_.isUndefined(settings)) return _.noop;\n    if (!_.isPlainObject(settings)) throw new Error('canvas(settings): canvas settings must be an object');\n\n    // create an array of off functions to undo any changes by this action\n    offArr = _.map(settings, function(value,key){\n        var rule = map[key];\n        if (rule) return on(rule.element, rule.property, value);\n        throw new Error('canvas('+ key +'): unknow key in canvas object.');\n    });\n\n    return function off(){\n        _.forEach(offArr, function(fn){fn.call();});\n    };\n}\n\nfunction on(el, property, value){\n    var old = el.style[property]; // save old value\n    el.style[property] = value; // set new value\n    return function(){el.style[property] = old;};  // create off function\n}\n\n","module.exports = css;\n\n/**\n * @arg el DOMElement any dom element\n * @arg obj Object a hash of styleName:value, where the style name may be either css-style or jsStyle (camelCase)\n * @returns void\n *\n * The function applies the styles set in obj to the el\n **/\n\nfunction css(el, obj){\n    var style = el.style;\n\n    if (!obj) return;\n\n    for (var key in obj) style[camelCase(key)] = obj[key];\n\n    function camelCase(str){ \n        return  str.replace(/-([a-z])/g, function (g) { return g[1].toUpperCase(); }); \n    }\n}\n","import _ from 'lodash';\nimport adjustCanvas from './adjust_canvas';\nimport applyCanvasStyles from './applyCanvasStyles';\nimport stream from 'mithril-stream';\nimport css from 'minno-css';\n\nexport default setupCanvas;\n\nfunction setupCanvas(canvas, canvasSettings){\n    canvasSettings || (canvasSettings = {});\n    var $resize = stream();\n\n    if (!_.isElement(canvas)) throw new Error('Minno-time: canvas is not a DOM element');\n\n    canvas.classList.add('minno-canvas');\n\n    // apply canvas styles\n    var map = {\n        background \t\t\t: {element: document.body, property: 'backgroundColor'},\n        canvasBackground\t: {element: canvas, property:'backgroundColor'},\n        borderColor\t\t\t: {element: canvas, property:'borderColor'},\n        borderWidth\t\t\t: {element: canvas, property:'borderWidth'}\n    };\n\n    var off = applyCanvasStyles(map, _.pick(canvasSettings,['background','canvasBackground','borderColor','borderWidth']));\n\n    canvasSettings.css && css(canvas, canvasSettings.css);\n\n    // setup canvas resize\n    $resize.map(adjustCanvas(canvas, canvasSettings));\n    $resize({});\n\n    window.addEventListener('orientationchange', $resize);\n    window.addEventListener('resize', $resize);\n\n    $resize.end\n        .map(function(){canvas.classList.remove('minno-canvas');})\n        .map(function removeListeners(){\n            window.removeEventListener('orientationchange',$resize);\n            window.removeEventListener('resize', $resize);\n        })\n        .map(off);\n\n\n\n    return $resize;\n\n}\n","import _ from 'lodash';\nimport global from './global';\nimport createDB from './task/sequencer/createDB';\nimport canvasSetup from './task/canvas/canvasSetup';\n\nexport default setup;\n\nfunction setup(canvas, script){\n    var $resize = canvasSetup(canvas, _.get(script, 'settings.canvas', {}));\n    var db = createDB(script);\n    setupVars(script);\n\n    return {\n        db:db, \n        $resize:$resize,\n        canvas: canvas,\n        script: script,\n        settings: script.settings || {}\n    };\n}\n\nfunction setupVars(script){\n    // init global\n    var glob = global(global());\n    var name = script.name || 'anonymous minno-time';\n    var current = script.current ? script.current : {};\n\n    current.logs || (current.logs = []); // init logs object\n    glob[name] = glob.current = current; // create local namespace\n}\n","\n/*\n * media preloader\n * TODO: turn into factory, possibly make progress into a stream.\n */\nexport default loader;\n\nvar srcStack = [];\t\t\t\t// an array holding all our sources\nvar defStack = [];\t\t\t\t// an array holding all the deferreds\nvar stackDone = 0;\t\t\t\t// the number of sources we have completed downloading\nvar images = {};\n\nvar loader = {\n    // loads a single source\n    load: load,\n\n    all: function(){\n        return Promise.all(defStack);\n    },\n\n    progress: function(){\n        return defStack.length ? stackDone/defStack.length : 1;\n    }\n};\n\n// load a single source\nfunction load(src, type){\n    var promise;\n    type = type || 'image';\n    // the source was already loaded\n    if (srcStack.indexOf(src) !== -1) return false;\n\n    // if we haven't loaded this yet\n    switch (type) {\n        case 'template':\n            promise = new Promise(function(resolve, reject){\n                // @TODO: get rid of requirejs dependency\n                requirejs(['text!' + src], resolve, function(){\n                    reject(new Error('Template not found: ' + src));\n                });\n            });\n            break;\n        case 'image':\n            /* falls through */\n        default :\n            promise = new Promise(function(resolve, reject){\n                var el = document.createElement('img');\n                el.onload = function(){resolve(el);};\n                el.onerror = function(){reject(new Error('Image not found: ' + el.src ));};\n                el.src = src;\n                images[src] = el;\n            });\n            break;\n    }\n\n    promise\n        .then(function(){stackDone++;})\n        .then(function(){\n            loader.onload && loader.onload();\n        });\n\n    // keep defered and source for later.\n    defStack.push(promise);\n    srcStack.push(src);\n\n    return promise;\n}\n","/*\n * build the url for this src (add the generic baseUrl)\n * @Todo: pass in the baseUrl (drop global settings, pass them through the sink).\n */\n\nimport _ from 'lodash';\n\n/**\n * @param baseUrl {String|Object} the base url to prepend\n * @param url {String} the url we are dealing with\n * @param type {String} the type of resource we are dealing with (image or tempmlate) in case we have multiple base urls\n *\n * @returns String built url\n **/\nexport default function buildUrl(baseUrl, url, type){\n    // it this is a dataUrl type of image, we don't need to append the baseurl\n    if (type == 'image' && /^data:image/.test(url)) return url;\n\n    // the base url setting may be either a string, or an object with the type as a field\n    if (_.isObject(baseUrl)) baseUrl = baseUrl[type];\n\n    // make sure base url is set, and add trailing slash if needed\n    if (!baseUrl) baseUrl = '';\n    else if (baseUrl[baseUrl.length-1] != '/') baseUrl += '/';\n\n    return baseUrl + url;\n}\n","/*\n * gets all media that needs preloading and preloads it\n */\n\nimport _ from 'lodash';\nimport preloader from './preloader';\nimport buildUrl from './buildUrl';\n\nexport default preloadScript;\n\nfunction preloadScript(script, baseUrl){\n    getScriptMedia(script).forEach(loadMedia);\n    return preloader;\n\n    function loadMedia(media){\n        if (!_.isUndefined(media.image)) preloader.load(buildUrl(baseUrl, media.image, 'image'),'image');\n        if (!_.isUndefined(media.template)) preloader.load(buildUrl(baseUrl, media.template,'template'),'template');\n    }\n}\n\n/**\n * Iterates over a script and gathers all media\n **/\nexport function getScriptMedia(script){\n    var mediaSets = script.mediaSets;\n    var stimulusSets = _.map(script.stimulusSets, getStimMedia);\n    var trialSets = _.map(script.trialSets, getTrialMedia);\n    var sequence = _.filter(script.sequence,notMixer).map(getTrialMedia);\n\n    return _.flattenDeep([mediaSets, stimulusSets, trialSets, sequence]).filter(notUndefined);\n} \n\nfunction getTrialMedia(trial){\n    return [\n        _.map(trial.input, function(input){ return input.element; }),\n        _.map(trial.stimuli, getStimMedia),\n        _.map(trial.layout, getStimMedia)\n    ];\n}\n\nfunction getStimMedia(stim){ return stim.media; }\nfunction notMixer(trial){ return !trial.mixer; }\nfunction notUndefined(val){ return !_.isUndefined(val); }\n","import scriptPreloader from './task/sequencer/scriptPreloader';\nimport fastdom from 'fastdom';\n\nexport default preloadPhase;\n\nfunction preloadPhase(canvas, script){\n    var preloader = scriptPreloader(script, script.base_url);\n\n    if (preloader.progress() == 1) return Promise.resolve().then(emptyCanvas);\n\n    canvas.innerHTML = '<div class=\"minno-progress\"><div class=\"minno-progress-bar\"></div></div>';\n\n    var barStyle = canvas.getElementsByClassName('minno-progress-bar')[0].style;\n    barStyle.width = preloader.progress() + '%';\n    preloader.onload = function(){\n        fastdom.mutate(function(){\n            barStyle.width = preloader.progress()*100 + '%';\n        });\n    };\n\n    return preloader.all()\n        .then(emptyCanvas)['catch'](function(src){\n            throw new Error('loading resource failed, do something about it! (you can start by checking the error log, you are probably reffering to the wrong url - ' + src +')');\n        });\n\n    function emptyCanvas(){\n        while (canvas.firstChild) canvas.removeChild(canvas.firstChild);\n    }\n}\n\n","import css from 'minno-css';\nimport fastdom from 'fastdom';\nimport stream from 'mithril-stream';\n\nexport default mouseEvents;\n\nfunction mouseEvents(eventName,inputObj, canvas){\n    var $listener = stream();\n    var element = inputObj.element;\n\n    if (element){\n        css(element, inputObj.css);\n        fastdom.mutate(function(){\n            canvas.appendChild(element);\n        });\n    }\n\n    canvas.addEventListener(eventName, clickListener);\n\n    $listener.end.map(removeClickListener);\n    return $listener;\n\n    function clickListener(e){\n        var target = e.target;\n        if (element && target === element) return $listener(e);\n        if (!element && target.getAttribute('data-handle') === inputObj.stimHandle) return $listener(e);\n        return;\n    }\n\n    function removeClickListener(){\n        if (element) canvas.removeChild(element);\n        canvas.removeEventListener(eventName, $listener);\n    }\n}\n","/*\n* key pressed listener\n* reqires key\n*\n* key can be either charCode or string.\n* or an array of charCode/strings.\n*/\n\n// we monitor all key up events so that we trigger only once per key down\nimport stream from 'mithril-stream';\nexport default keypressed;\n\nvar keyDownArr = [];\n\ndocument.addEventListener('keyup',function(e){ keyDownArr[e.which] = false; });// unset flag to prevent multi pressing of a key \n\nfunction keypressed(inputObj){\n    var $listener = stream();\n\n    // make sure key is an array\n    var keys = Array.isArray(inputObj.key) ? inputObj.key : [inputObj.key];\n\n    // map keys to keyCodes\n    var target = keys.map(function(value){ \n        return typeof value == 'string' ? value.toUpperCase().charCodeAt(0) : value; \n    });\n\n    document.addEventListener('keydown', keypressListener);\n\n    $listener.end.map(removeKeypressListener);\n    return $listener;\n\n    function keypressListener(e){\n        if (keyDownArr[e.which] || (target.indexOf(e.which) === -1)) return;\n        e.preventDefault(); // prevent FF from wasting about 10ms in browser-content.js (and fast search)\n        keyDownArr[e.which] = true; // set flag to prevent multi pressing of a key\n        $listener(e);\n    }\n\n    function removeKeypressListener(){\n        document.removeEventListener('keydown', keypressListener);\n    }\n}\n","import stream from 'mithril-stream';\nexport default keyup; \n\nfunction keyup(inputObj){\n    var $listener = stream();\n    // make sure key is array\n    var keys = Array.isArray(inputObj.key) ? inputObj.key : [inputObj.key];\n\n    // map keys to keyCodes\n    var target = keys.map(function(value){ \n        return typeof value == 'string' ? value.toUpperCase().charCodeAt(0) : value; \n    });\n\n    document.addEventListener('keyup', keypressListener);\n\n    $listener.end.map(removeKeypressListener);\n    return $listener;\n\n    function keypressListener(e){\n        if (target.indexOf(e.which) === -1) return;\n        e.preventDefault();\n        return $listener(e);\n    }\n\n    function removeKeypressListener(){\n        document.removeEventListener('keyup', $listener);\n    }\n}\n","/**\n *\tTakes a properties objects and returns the result of a randomization:\n *\tIf it is an array - pick a random member\n *\tIf it is an object pick from within a range\n *\tIf it is a function return its result using the context\n *\tOtherwise simply return the properties\n */\nimport _ from 'lodash';\n\nexport default simpleRandomize;\n\nfunction simpleRandomize(properties, context){\n\n    if (_.isArray(properties)) {\n        var index = Math.floor(Math.random()*properties.length);\n        return properties[index];\n    }\n\n    if (_.isFunction(properties)) {\n        return properties.call(context);\n    }\n\n    // this must be after the test for arrays and functions, because they are considered objects too\n    if (_.isPlainObject(properties)) {\n        if (!_.isNumber(properties.min) || !_.isNumber(properties.max) || properties.min > properties.max) {\n            throw new Error('randomization objects need both a max and a minimum property, also max has to be larger than min');\n        }\n        return properties.min + (properties.max - properties.min) * Math.random();\n    }\n\n    // if this is not a randomization object simply return\n    return properties;\n}\n\n","import randomize from './simpleRandomize';\nimport stream from 'mithril-stream';\n\nexport default timeout;\n\nfunction timeout(inputObj){\n    var $listener = stream();\n    var timeoutID;\n    var duration = randomize(inputObj.duration) || 0;\n\n    $listener.end.map(cancel);\n\n    if (duration) setTimeout($listener.bind(null, {}), duration);\n    else $listener({}); // listener is already registered with $events so this should be immidiate\n\n    return $listener;\n\n    function cancel(){\n        clearTimeout(timeoutID);\n    }\n}\n","\nimport _ from 'lodash';\nimport mouseEvents from './bindings/mouseEvents';\nimport keypressed from './bindings/keypressed';\nimport keyup from './bindings/keyup';\nimport timeout from './bindings/timeout';\nimport css from 'minno-css';\n\nexport default inputBinder;\n\n/**\n * The input binder is a hash of default input types\n * It returns a stream of events\n **/\nfunction inputBinder(inputObj, canvas){\n    var on = inputObj.on; // what type of binding is this?\n\n    switch (on){\n\n        case 'keypressed'\t: return keypressed(inputObj);\n\n        case 'keyup'\t\t: return keyup(inputObj);\n\n        case 'click'\t\t:\n        case 'mousedown'    :\n            return mouseEvents('mousedown', inputObj, canvas);\n\n        case 'mouseup'\t    : return mouseEvents('mouseup', inputObj, canvas);\n\n        case 'mouseenter'\t: return mouseEvents('mouseenter', inputObj, canvas);\n\n        case 'mouseleave'\t: return mouseEvents('mouseleave', inputObj, canvas);\n\n        case 'timeout'\t\t: return timeout(inputObj);\n\n        /*\n         * Shortcuts\n         */\n\n        case 'enter'\t: return keypressed(_.assign({key:13},inputObj));\n\n        case 'space'\t: return keypressed(_.assign({key:32},inputObj));\n\n        case 'esc'\t    : return keypressed(_.assign({key:27},inputObj));\n\n        case 'leftTouch'\t:\n            inputObj.element = createElement(inputObj.css, {\n                position: 'absolute',\n                left: 0,\n                width: '30%',\n                height: '100%',\n                background: '#00FF00',\n                opacity: 0.3\n            });\n\n            return mouseEvents('mousedown', inputObj);\n\n        case 'rightTouch'\t:\n            inputObj.element = createElement(inputObj.css, {\n                position: 'absolute',\n                right: 0,\n                width: '30%',\n                height: '100%',\n                background: '#00FF00',\n                opacity: 0.3\n            });\n\n            return mouseEvents('mousedown', inputObj);\n\n        case 'topTouch'\t:\n            inputObj.element = createElement(inputObj.css, {\n                position: 'absolute',\n                top: 0,\n                width: '100%',\n                height: '30%',\n                background: '#00FF00',\n                opacity: 0.3\n            });\n\n            return mouseEvents('mousedown', inputObj);\n\n        case 'bottomTouch'\t:\n            inputObj.element = createElement(inputObj.css, {\n                position: 'absolute',\n                bottom: 0,\n                width: '100%',\n                height: '30%',\n                background: '#00FF00',\n                opacity: 0.3\n            });\n\n            return mouseEvents('mousedown', inputObj);\n\n        default:\n            throw new Error('You have an input element with an unrecognized \"on\" property: ' + on);\n\n    }\n\n\n    function createElement(css2, css1){\n        var el = document.createElement('div');\n        css(el, css1);\n        css(el, css2);\n        return el;\n    }\n}\n","import binder from './binder';\nimport stream from 'mithril-stream';\nimport _ from 'lodash';\n\nexport default createListener;\n\nfunction createListener(inputObj,canvas){\n    var $listener = getListener(inputObj, canvas);\n\n    if (!isStream($listener)) throw new Error('Input functions must return valid streams: ' + logObj(inputObj));\n    if ('handle' in inputObj) $listener.handle = inputObj.handle;\n\n    return $listener;\n}\n\nfunction getListener(inputObj, canvas){\n    var $listener;\n\n    if (_.isFunction(inputObj)) return inputObj(inputObj, canvas, stream);\n\n    if (_.isPlainObject(inputObj)) {\n        if (_.isString(inputObj.on)) return binder(inputObj,canvas,stream);\n\n        if (_.isFunction(inputObj.on )) $listener = inputObj.on(inputObj,canvas,stream);\n        if (_.isFunction(inputObj.off)) $listener.end.map(inputObj.off);\n    }\n        \n    throw new Error('Input must only contain objects and functions, do you have an undefined value?');\n}\n\nfunction logObj(obj){\n    return _.isFunction(obj) ? obj.toString() : JSON.stringify(obj);\n}\n\n\nfunction isStream(stream) {return stream._state; }\n","import createListener from './createListener';\nimport now from './now';\n\nexport default interfaceFn;\n\n// @TODO: remove dependency on trial. only canvas is essential, and adding trial can be exported\nfunction interfaceFn($events, canvas){\n    var listenerStack = []; // holds all active listeners\n    var baseTime = 0;\n\n    return { add:add,remove:remove,removeAll:removeAll,resetTimer:resetTimer };\n\n    function add(inputObj){\n        if (!inputObj) throw new Error('Missing input element. Could not add input listener');\n        var $listener = createListener(inputObj, canvas);\n        $listener.map(addDetails).map($events); // pipe events to $events\n        listenerStack.push($listener);\n\n        function addDetails(event){\n            return {\n                handle      : $listener.handle,\n                event       : event,\n                timestamp\t: +new Date(),\n                latency\t\t: now() - baseTime\n            };\n        }\n    }\n\n    function remove(handle){\n        // go through the listener stack and remove any listeners that fit the handle\n        // note that we do this in reverse so that the index does not change\n        for (var i = listenerStack.length - 1; i >= 0 ; i--){\n            var $listener = listenerStack[i];\n            if ($listener.handle === handle){\n                $listener.end(true);\n                listenerStack.splice(i,1);\n            }\n        }\n    }\n\n    function removeAll(){\n        listenerStack.forEach(function($listener){\n            $listener.end(true);\n        });\n        listenerStack.length = 0;\n    }\n\n    function resetTimer(){ baseTime = now(); }\n}\n","export default getMedia;\n\nfunction getMedia(media){\n    // all templateing is done within the inflate trial function and the sequencer\n    var template = media.html || media.inlineTemplate || media.template; // give inline template precedence over template, because tempaltes are loaded into inlinetemplate\n    var el;\n\n    if (media.word) {\n        el = document.createElement('div');\n        el.textContent = media.word;\n        return Promise.resolve(el);\n    }\n\n    if (media.image) {\n        // at this time, we count on the preloader to throw for errors\n        // the reject option isn't really being used here...\n        return new Promise(function(resolve, reject){\n            el = document.createElement('img');\n            el.onload = function(){resolve(el);};\n            el.onerror = function(){reject(new Error('Image not found: ' + el.src ));};\n            el.src = media.image;\n        });\n    }\n\n    if (media.jquery) Promise.reject(new Error('Jquery is no longer supported in minno-time'));\n\n    if (template) { // html | template | inlineTemplate\n        el = document.createElement('div');\n        el.innerHTML = template;\n        return Promise.resolve(el);\n    } \n\n    return Promise.reject(new Error('Unrecognized media type')); // this is not a supported html type\n}\n","export default setSize;\n\nfunction setSize(el, stimulus){\n    var style = el.style;\n    var size = stimulus.size || {};\n\n    if (size.font_size) style.fontSize = size.font_size;\n\n    // if this is a word, we don't want to set height (it breaks centering)\n    if (isSet('height', size) && !stimulus.media.word) style.height = size.height + '%';\n\n    if (isSet('width', size)) style.width = size.width + '%';\n\n    return el;\n}\n\nfunction isSet(prop, obj){return prop in obj;}\n","import fastdom from 'fastdom';\n\nexport default setPlace;\n\nvar YCLASS = 'minno-stimulus-center-y';\nvar XCLASS = 'minno-stimulus-center-x';\n\nfunction setPlace(el,stimulus){\n    var location = stimulus.location || {};\n\n    // set offsets:\n    if (location.top == 'center' || location.bottom == 'center' || (location.top === undefined && location.bottom === undefined)) el.classList.add(YCLASS);\n    if (location.left == 'center' || location.right == 'center' || (location.left === undefined && location.right === undefined)) el.classList.add(XCLASS);\n\n    ['top','bottom','left','right'].forEach(setNumericLocation);\n\n    function isNumeric(val) {return !isNaN(+val);}\n    function setNumericLocation(attr){ if (isNumeric(location[attr])) el.style[attr] = location[attr] + '%'; }\n}\n\nexport function fixIE(el, resolve){\n    var style = el.style;\n\n    // count on setplace to findout when we need to center\n    var xCenter = el.classList.contains(XCLASS);\n    var yCenter = el.classList.contains(YCLASS);\n\n    if (!xCenter && !yCenter) return resolve(el);\n\n    fastdom.measure(function(){\n        var computedStyle = window.getComputedStyle(el);\n        var width = parseFloat(computedStyle.width);\n        var height = parseFloat(computedStyle.height);\n\n        fastdom.mutate(function(){\n            // location (left/top) is set to 50% within the center class\n            // we're adding the margin on IE where the transform does not work well\n            // we need to cancel the transform set within the class though...\n            style.transform = 'none';\n            if (xCenter) style.marginLeft = '-' + (width/2) + 'px';\n            if (yCenter) style.marginTop = '-' + (height/2) + 'px';\n        });\n\n    });\n}\n","import fastdom from 'fastdom';\nimport getMedia from './getMedia';\nimport setSize from './setSize';\nimport setPlace, {fixIE} from './setPlace';\nimport css from 'minno-css';\n\nexport default Stimulus;\n\nfunction Stimulus(stimulus, trial, canvas){\n    var self = {\n        el: null, // is set within init, some methods will break if not called before init...\n        source: stimulus,\n        trial: trial,\n        canvas: canvas,\n        init: init,\n        show: show,\n        hide: hide,\n        name: name,\n        mediaName: mediaName,\n        destroy: destroy\n    };\n\n    // make sure we have a data object\n    self.data = stimulus.data || {};\n\n    // set the handle\n    self.handle = self.data.handle = self.data.handle || stimulus.handle || stimulus.set;\n\n    return self;\n}\n\n\nfunction init(){\n    if (!this.source.media) throw new Error('Media object not defined for ' + this.name());\n\n    return getMedia(this.source.media)\n        .then(setupElement.bind(this, this.canvas));\n}\n\nfunction setupElement(canvas, el){\n    var self = this;\n    this.el = el;\n    return new Promise(function(resolve){\n        fastdom.mutate(function initStim(){\n            // setup element\n            el.classList.add('minno-stimulus');\n            el.setAttribute('data-handle', self.handle); // data-handle for handeling of mouse/touch interactions\n            setSize(el, self.source);\n            setPlace(el, self.source);\n            css(el, self.source.css || {});\n\n            if (self.source.isLayout) el.classList.add('minno-stimulus-visible');\n\n            // append to canvas\n            canvas.appendChild(el);\n\n            if (document.documentMode) fixIE(el, resolve);\n            else resolve(el);\n        });\n    });\n}\n\nfunction show(){\n    var el = this.el;\n    if (!el) throw new Error('A stimulus can not be shown before init is called');\n\n    fastdom.mutate(function showStim(){\n        el.classList.add('minno-stimulus-visible');\n    });\n}\n\nfunction hide(){\n    var el = this.el;\n    if (!el) throw new Error('A stimulus can not be hidden before init is called');\n\n    fastdom.mutate(function hideStim(){\n        el.classList.remove('minno-stimulus-visible');\n    });\n}\n\nfunction destroy(){\n    var el = this.el;\n    var canvas = this.canvas;\n    fastdom.mutate(function removeStim(){\n        canvas.removeChild(el);\n    });\n}\n\nfunction name(){\n    var source = this.source;\n    // if we have an alias ues it\n    if (source.alias) {return source.alias;}\n    if (this.data.alias) {return this.data.alias;} // if we have an alias ues it\n\n    if (source.inherit && source.inherit.set) {return source.inherit.set;} // otherwise try using the set we inherited from\n    if (this.handle) {return this.handle;} // otherwise use handle\n\n    // if no individual name is given, we set a default at the collection level\n}\n\nfunction mediaName(options){\n    var media = this.source.media;\n    var fullpath = options && options.fullpath; // as set within settings\n\n    if (media.alias) {return media.alias;} // if we have an alias ues it\n\n    for (var prop in media) {\n        if (contains(['image','template'],prop)) return fullpath ? media[prop] : media[prop].replace(/^.*[\\\\/]/, '');\n\n        // sometimes we have an empty value (this happens when we load a template and then translate it into an inline template)\n        if (contains(['word','html','inlineTemplate'],prop) && media[prop]) return media[prop];\n    }\n\n    // if no individual name is given, we set a default at the collection level\n}\n\nfunction contains(arr, val){ return arr.indexOf(val) != -1;}\n","import Stimulus from './Stimulus';\n\nexport default stimCollection;\n\nfunction stimCollection(trial, canvas){\n    var source = trial._source;\n    var stimuli = source.stimuli.map(toStim);\n    var layout = source.layout.map(toLayout).map(toStim);\n    var ready = Promise.all(stimuli.concat(layout).map(function(stim){return stim.init();}));\n    var self = {\n        canvas: canvas,\n        stimuli: stimuli,\n        layout: layout,\n        ready: ready,\n        getStimlist: getStimlist,\n        getMedialist: getMedialist,\n        destroy: destroy\n    };\n\n    return self;\n\n    function toStim(stim){ return Stimulus(stim, trial, canvas); }\n    function toLayout(stim){ stim.isLayout = true; return stim;}\n}\n\nfunction getStimlist(){\n    return this.stimuli\n        .filter(function(stim){return !stim.source.nolog;})\n        .map(function(stim, index){return stim.name() || ('stim' + index);});\n}\n\nfunction getMedialist(options){\n    return this.stimuli\n        .filter(function(stim){return !stim.source.nolog;})\n        .map(function(stim, index){return stim.mediaName(options) || ('media' + index);});\n}\n\nfunction destroy(){\n    this.stimuli.concat(this.layout).forEach(function(stim){stim.destroy();});\n}\n","import _ from 'lodash';\nimport globalGetter from '../../global';\n\nvar global = globalGetter();\nvar conditionHash = {\n    begin:begin,\n    inputEquals:inputEquals,\n    inputEqualsTrial:inputEqualsTrial,\n    inputEqualsStim:inputEqualsStim,\n    trialEquals:trialEquals,\n    inputEqualsGlobal:inputEqualsGlobal,\n    globalEquals:globalEquals,\n    globalEqualsTrial:globalEqualsTrial,\n    globalEqualsStim:globalEqualsStim,\n    currentEquals:currentEquals,\n    currentEqualsTrial:currentEqualsTrial,\n    currentEqualsStim:currentEqualsStim,\n    inputEqualsCurrent:inputEqualsCurrent,\n    fn:fn,\n    custom:custom,\n\n};\n\nexport default function getConditonFn(condition){\n    if (_.isFunction(condition)) return condition;\n    if (_.isFunction(conditionHash[condition.type])) return conditionHash[condition.type];\n    throw new Error('Unknown condition type: ' + JSON.stringify(condition));\n}\n\nfunction begin(inputData){ return inputData.type === 'begin'; }\n\nfunction inputEquals(inputData, condition){\n    var values = Array.isArray(condition.value) ? condition.value : [condition.value];\n    return values.indexOf(inputData.handle) !== -1;\n}\n\nfunction inputEqualsTrial(inputData, condition, trial){ return inputData.handle === trial.data[condition.property]; }\n\nfunction inputEqualsStim(inputData, condition, trial){\n    // create search object\n    var searchObj = {};\n    if (condition.handle) searchObj['handle'] = condition.handle;\n    searchObj[condition.property] = inputData.handle;\n\n    // are there stimuli answering this descriptions?\n    return hasData(searchObj,trial);\n}\n\nfunction trialEquals(inputData, condition, trial){\n    if (typeof condition.property == 'undefined' || typeof condition.value == 'undefined') throw new Error('trialEquals requires both \"property\" and \"value\" to be defined');\n    return condition.value === trial.data[condition.property];\n}\n\nfunction inputEqualsGlobal(inputData, condition){\n    if (typeof condition.property == 'undefined') throw new Error('inputEqualsGlobal requires \"property\" to be defined');\n    return inputData.handle === global[condition.property];\n}\n\nfunction globalEquals(inputData, condition){\n    if (typeof condition.property == 'undefined' || typeof condition.value == 'undefined') throw new Error('globalEquals requires both \"property\" and \"value\" to be defined');\n    return condition.value === global[condition.property];\n}\n\nfunction globalEqualsTrial(inputData, condition, trial){\n    if (typeof condition.globalProp == 'undefined' || typeof condition.trialProp == 'undefined') throw new Error('globalEqualsTrial requires both \"globalProp\" and \"trialProp\" to be defined');\n    return global[condition.globalProp] !== trial.data[condition.trialProp];\n}\n\nfunction globalEqualsStim(inputData, condition, trial){\n    if (typeof condition.globalProp == 'undefined' || typeof condition.stimProp == 'undefined') throw new Error('globalEqualsStim requires both \"globalProp\" and \"stimProp\" to be defined');\n\n    // create search object\n    var searchObj = {};\n    if (condition.handle) searchObj['handle'] = condition.handle;\n    searchObj[condition.stimProp] = global[condition.globalProp];\n\n    // are there stimuli answering this descriptions?\n    return hasData(searchObj,trial);\n}\n\nfunction inputEqualsCurrent(inputData, condition){\n    var current = global.current;\n    if (typeof condition.property == 'undefined') throw new Error('inputEqualsCurrent requires \"property\" to be defined');\n    return inputData.handle === current[condition.property];\n}\nfunction currentEquals(inputData, condition){\n    var current = global.current;\n    if (typeof condition.property == 'undefined' || typeof condition.value == 'undefined') throw new Error('currentEquals requires both \"property\" and \"value\" to be defined');\n    return condition.value !== current[condition.property];\n}\n\nfunction currentEqualsTrial(inputData, condition, trial){\n    var current = global.current;\n    if (typeof condition.currentProp == 'undefined' || typeof condition.trialProp == 'undefined') throw new Error('currentEqualsTrial requires both \"currentProp\" and \"trialProp\" to be defined');\n    return current[condition.currentProp] === trial.data[condition.trialProp];\n}\n\nfunction currentEqualsStim(inputData, condition, trial){\n    var current = global.current;\n    if (typeof condition.currentProp == 'undefined' || typeof condition.stimProp == 'undefined') throw new Error('currentEqualsStim requires both \"currentProp\" and \"stimProp\" to be defined');\n\n    // create search object\n    var searchObj = {};\n    if (condition.handle) searchObj['handle'] = condition.handle;\n    searchObj[condition.stimProp] = current[condition.currentProp];\n\n    // are there stimuli answering this descriptions?\n    return hasData(searchObj, trial);\n}\n\nfunction fn(inputData, condition, trial){\n    return condition.value.apply(trial,[condition,inputData, trial]);\n}\n\nfunction custom(inputData, condition, trial){\n    return condition.fn.apply(null, [condition, inputData, trial]);\n}\n\nfunction hasData(searchObj, trial){\n    return trial.stimulusCollection.stimuli.some(function(stim){\n        var data = stim.data;\n        for (var key in searchObj) {\n            if (searchObj[key] !== data[key]) return false;\n        }\n        return true;\n    });\n}\n","/*\n * gets a condition array (or a single condition) and evaluates it\n * returns true if all statements are true, false otherwise\n *\n * a single condition looks like this:\n *\n *\tcondition = {\n *\t\ttype : 'begin/inputEquals/inputEqualsTrial/inputEqualsStim/function',\n *\t\tvalue: 'right/trialAttribute/stimAttribute/customFunction',\n *\t\thandle: 'stim handle' (optional in case we're targeting a stimulus)\n *\t}\n *\n */\n\nimport getConditionFn from './getConditionFn';\n\nexport default conditionsEvaluate;\n\nfunction conditionsEvaluate(conditions, inputData, trial){\n    if (!conditions) throw new Error('There is an interaction without conditions!!');\n\n    // make sure conditions is an array\n    conditions = Array.isArray(conditions) ? conditions : [conditions];\n\n    // if this is a begin event, make sure we only run conditions that have begin in them\n    if (inputData.type == 'begin' && conditions.every(function(condition){return condition.type != 'begin';})) return false;\n\n    return conditions.every(checkCondition);\n\n\n    function checkCondition(condition){\n        return getConditionFn(condition)(condition, inputData, trial);\n    }\n}\n","/*\n * accepts an array of actions (or a single action)\n * and applies them\n *\n * actions = [\n *\t\t{type:actionName,more:options},\n *\t\t{actionName:options}\n * ]\n * @param actions: single action object or array of action objects\n * @param eventData: eventData object\n * @returns Boolean continueActions: whether this action stops further action activations\n */\n\nimport _ from 'lodash';\nimport actionList from './actionList';\n\nexport default applyActions;\n\nfunction applyActions(actions, eventData, trial){\n    // marks whether this is the final action to take\n    var continueActions = true;\n\n    if (!actions) throw new Error('There is an interaction without actions!!');\n\n    actions = _.isArray(actions) ? actions : [actions];\n\n    _.forEach(actions,function(action){\n        var actionFn = actionList[action.type];\n        if (!actionFn) throw new Error('unknown action: ' + action.type);\n\n        // the only reason to halt action activation is the endTrial command\n        if (action.type === 'endTrial') continueActions = false;\n        actionFn(action, eventData, trial);\n    });\n\n    return continueActions;\n}\n","/*\n* Organizer for the interaction function\n*/\n\nimport evaluate from './conditionsEvaluate';\nimport activate from './action';\n\nexport default interactions;\n\n/*\n * Trial -> Event -> Event\n * \n * Can use trial to produce side efects\n **/\nfunction interactions(trial){\n    var interactions = trial._source.interactions;\n    var isDebug = trial._source.DEBUG && window.DEBUG;\n\n    // @TODO: validate interactions (isArray[Object], Object has conditions, Object has actions\n    \n    return eventMap;\n    function eventMap(event){\n        var i, interaction, conditionTrue;\n\n\n        // eslint-disable-next-line no-console\n        if (isDebug) console.groupCollapsed('Event: ' + (event.handle || event.type), event);\n\n        // use an explicit for loop because we need to be able to break\n        for (i=0; i<interactions.length; i++){\n            interaction = interactions[i];\n            conditionTrue = evaluate(interaction.conditions, event, trial);\n\n            // eslint-disable-next-line no-console\n            if (isDebug) console.log(conditionTrue, interaction.conditions);\n\n            // if this action includes endTrial we want to stop evalutation\n            // otherwise we might evaluate using data from the next trial by accident...\n            if (conditionTrue) if ( !activate(interaction.actions, event, trial) ) break;\n        }\n\n        // eslint-disable-next-line no-console\n        if (isDebug) console.groupEnd('Event: ' + (event.handle || event.type));\n\n        return event;\n    }\n}\n","import _ from 'lodash';\nimport input from './input/input';\nimport stimulusCollection from './stimulus/stimulusCollection';\nimport interactions from './interactions/interactions';\nimport stream from 'mithril-stream';\n\nexport default Trial;\n\nvar gid = 0;\n\n// data is already fully inflated\nfunction Trial(source, canvas, settings){\n    // make sure we have all our stuff :)\n    if (!source.interactions) throw new Error('Interactions not defined');\n\n    this.canvas = canvas;\n    this.settings = settings;\n    this._source = source;\n\n    this.$logs = stream();\n    this.$events = stream();\n    this.$end = this.$events.end;\n\n    // make sure we always have a data container\n    this.data = source.data || {};\n\n    // create a uniqueId for this trial\n    this._id = _.uniqueId('trial_');\n    this.counter = gid++;\n\n    this.input = input(this.$events, canvas);\n    this.stimulusCollection = stimulusCollection(this, canvas);\n\n    // the next trial we want to play\n    // by default this is simply the next trial, this can be changed using the goto action\n    // the syntax is [destination, properties]\n    this._next = ['next',{}];\n\n}\n\n_.extend(Trial.prototype,{\n    start: function(){\n        var trial = this;\n\n        if (this._source.DEBUG && window.DEBUG) {\n            console.group('Trial: ' + this.counter); // eslint-disable-line no-console\n            this.$end.map(function(){\n                console.groupEnd('Trial: ' + this.counter); // eslint-disable-line no-console\n            });\n        }\n\n        // wait until all simuli are loaded\n        return trial.stimulusCollection.ready.then(function(){\n            // listen for interactions\n            trial.$events\n                .map(addTrialDetails(trial))\n                .map(interactions(trial));\n\n            // activate input\n            arrayWrap(trial._source.input).forEach(trial.input.add); // add each input\n            trial.input.resetTimer(); // reset the interface timer so that event latencies are relative to now.\n\n            // start running\n            trial.$events({type:'begin',latency:0});\n        });\n    },\n\n    end: function(){\n        // remove all listeners\n        this.input.removeAll();\n        this.$end(true);\n    },\n\n    name: function(){\n        // if we have an alias ues it\n        if (this.alias) { return this.alias; }\n        if (this.data.alias) { return this.data.alias; }\n\n        // otherwise try using the set we inherited from\n        if (_.isString(this._source.inherit)) return this._source.inherit;\n        if (_.isPlainObject(this._source.inherit)) return this._source.inherit.set;\n\n        // we're out of options here\n    }\n});\n\nfunction addTrialDetails(trial){\n    return function(event){\n        return _.assign(event, {\n            trialId     : trial._id,\n            counter     : trial.counter\n        });\n    };\n}\n\nfunction arrayWrap(arr){\n    if (!arr){return [];}\n    return _.isArray(arr) ? arr : [arr];\n}\n","import _ from 'lodash';\nimport globalGetter from '../../global';\nimport buildUrl from './buildUrl';\n\nexport default nextTrial;\n\nfunction nextTrial(db, settings, goto){\n    var destination = goto[0], properties = goto[1];\n    var sequence = db.currentSequence;\n    var global = globalGetter();\n    var context = {global: global, current: global.current};\n    var source;\n\n    sequence.go(destination, properties, context);\n    source = sequence.current(context, {skip:['layout','stimuli']});\n\n    if (!source) return {done:true};\n\n    source.stimuli = _.map(source.stimuli || [], buildStim, context);\n    source.layout = _.map(source.layout || [], buildStim, context);\n\n    context.trialData = null;\n\n    return {value:source};\n\n    function buildMedia(stim, prop, context){\n        var val = stim[prop];\n\n        if (_.isUndefined(val)) return false;\n        if (_.isString(val)) val = {word: val};\n\n        val = db.inflate('media', val, context);\n\n        // note that the base url is added to the media object during the sequence preload\n        // if needed, build url\n        if (val.image) val.image = buildUrl(settings.base_url, val.image, 'image');\n\n        if (val.template){\n            // @TODO: remove dependency on requirejs\n            val.inlineTemplate = requirejs('text!' + buildUrl(settings.base_url, val.template, 'template'));\n            val.inlineTemplate = _.template(val.inlineTemplate)(context);\n        }\n\n        stim[prop] = val;\n\n        context.mediaData = null;\n        context.mediaMeta = null;\n    }\n\n    function buildStim(stim){\n        var context = this;\n\n        stim = db.inflate('stimulus', stim, context, {skip:['media','touchMedia']});\n        buildMedia(stim, 'media', context);\n        buildMedia(stim, 'touchMedia', context);\n        context.stimulusData = null;\n        context.stimulusMeta = null;\n        return stim;\n    }\n}\n","export default post;\n\nfunction post(url, data){\n    return new Promise(function(resolve, reject){\n        var request = new XMLHttpRequest();\n        request.open('POST',url, true);\n        request.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');\n\n        request.onreadystatechange = function() {\n            if (this.readyState === 4) {\n                if (this.status >= 200 && this.status < 400) resolve(this.responseText);\n                else reject(new Error('Failed posting to: ' + url));\n            }\n        };\n\n        request.send(serialize(data));\n    });\n}\n\nfunction serialize(data) {\n    if (typeof data == 'string') return data;\n    return JSON.stringify(data);\n}\n","import _ from 'lodash';\nimport post from './post';\n\nexport default poster;\n\nfunction poster($logs, settings){\n    var cache = [];\n    var url = settings.url;\n\n    if (!url) return; // if we have no url, we can't log anything anyway\n\n    $logs.map(eachLog);\n    $logs.end.map(finalizefLogs);\n\n    function eachLog(log){\n        cache.push(log);\n        if (!settings.pulse) return;\n        if (cache.length >= settings.pulse) {\n            send(cache);\n            cache.length = 0;\n        }\n    }\n\n    function finalizefLogs(){\n        if (cache.length) send(cache);\n    }\n\n    function send(logs){\n        var serialize = settings.serialize || (settings.newServelet ? buildPost : buildPostOld);\n        var serializedPost = serialize(logs, settings.metaData);\n\n        return post(url,serializedPost)\n            .catch(function retry(){ return post(url, serializedPost); })\n            .catch(settings.error || _.noop);\n    }\n\n}\n\nexport function buildPost(logs, metaData){\n    var data = _.assign({ data:logs }, metaData);\n    return JSON.stringify(data);\n}\n\nexport function buildPostOld(logs, metaData){\n    var data = 'json=' + JSON.stringify(logs); // do not re-encode json\n    var meta = serialize(metaData);\n    return data + (meta ? '&'+meta : '');\n}\n\n\nfunction serialize(data){\n    var key, r = [];\n    for (key in data) r.push(encodeURIComponent(key) + '=' + encodeURIComponent(data[key]));\n    return r.join('&').replace(/%20/g, '+');\n}\n","import poster from './poster';\n\nexport default createLogs;\n\nfunction createLogs($sourceLogs, settings, defaultLogMap){\n    var $logs = $sourceLogs.map(applyMap(settings.logger || settings.logMap || defaultLogMap));\n\n    if (settings.poster) settings.poster($logs, settings, poster);\n    else poster($logs, settings);\n\n    return $logs;\n\n    // $logs is a stream of array, we want to apply them as args to the transform function\n    function applyMap(fn){\n        return function(args){ return fn.apply(null,args); };\n    }\n}\n","import _ from 'lodash';\n\nexport default transformLogs;\n\nfunction transformLogs(action,eventData,trial){\n    var global = window.piGlobal;\n    var trialData = trial.data, inputData = eventData, logStack = global.current.logs;\n    var fullpath = _.get(trial, 'settings.logger.fullpath', false);\n\n    var stimList = trial.stimulusCollection.getStimlist();\n    var mediaList = trial.stimulusCollection.getMedialist({fullpath:fullpath});\n\n    return {\n        log_serial : logStack.length,\n        trial_id: trial.counter,\n        name: trial.name(),\n        responseHandle: inputData.handle,\n        latency: Math.floor(inputData.latency),\n        stimuli: stimList,\n        media: mediaList,\n        data: trialData\n    };\n}\n","import _ from 'lodash';\nimport stream from 'mithril-stream';\nimport fastdom from 'fastdom';\n\nimport Trial from './trial/Trial';\nimport nextTrial from './task/sequencer/nextTrial';\nimport createLogs from './task/logger/createLogStream';\nimport defaultLogMap from './task/logger/defaultLogMap';\nimport global from './global';\n\nexport default playerPhase;\n\n/**\n * run the task\n * Essentialy wiring up all the play phase stuff\n * @TODO: document this function, its super complicated\n **/\n\nfunction playerPhase(sink){\n    var canvas = sink.canvas;\n    var db = sink.db;\n    var settings = sink.settings;\n\n    var $source = stream();\n    var $trial = $source.map(activateTrial());\n    var $sourceLogs = stream();\n    var $logs = createLogs($sourceLogs, composeLoggerSettings(sink.script, global()), defaultLogMap);\n\n    $logs.map(function(log){\n        global().current.logs.push(log);\n    });\n\n    var onDone = _.get(settings, 'hooks.endTask', settings.onEnd || _.noop);\n\n    $source.end\n        .map(clearCanvas)\n        .map(onDone);\n\n    return _.extend({\n        $trial:$trial, \n        end: $source.end.bind(null,true), \n        $logs: $logs,\n        start: play.bind(null, ['next', {}])\n    }, sink);\n\n    function clearCanvas(){\n        var trial = $trial();\n        if (trial) trial.stimulusCollection.destroy();\n    }\n\n    function play(goto){\n        var next = nextTrial(db, settings, goto);\n        if (next.done) $source.end(true);\n        else $source(next.value);\n    }\n\n    function activateTrial(cache){\n        return activate;\n        function activate(source){\n            var oldTrial = cache;\n            var trial = cache = new Trial(source, canvas, settings);\n            trial.$logs.map($sourceLogs); \n            trial.$end\n                .map(function(){\n                    play(trial._next); // when we're done try to play the next one\n                });\n\n            trial.start();\n\n            if (oldTrial) {\n                // we leave the old stimuli until the current ones are visiblie to maintain the continuity between trials\n                // This mutate waits until the first mutation in order to schedudual the removal of the old stimuli\n                fastdom.mutate(function oldtrial(){\n                    oldTrial.stimulusCollection.destroy();\n                });\n            }\n\n            return trial;\n        }\n    }\n}\n\n// create metaDeta to add to post\nexport function composeLoggerSettings(script, global){\n    var loggerSettings = _.assign({}, _.get(script, 'settings.logger'));\n    var metaData = _.assign({taskName:script.name}, global.$meta, loggerSettings.metaData);\n    loggerSettings.metaData = metaData;\n    return loggerSettings;\n}\n","import './polyfills';\n\nimport setup from './app/setup';\nimport preloadPhase from './app/preloadPhase';\nimport playPhase from './app/playPhase';\n\nexport default activate;\n\n/**\n * activate : (HTMLelement, timeScript) -> Sink\n *\n * timeScript : {settings, sequence, trialSets, stimulusSets, mediaSets, current}\n * Sink: {$trial, $logs, play, end}\n **/\nfunction activate(canvas, script){\n    var sink = setup(canvas, script);\n    var playSink = playPhase(sink);\n\n    playSink.$trial.end.map(playSink.$resize.end.bind(null, true)); // end resize stream\n\n    // preload Images, then start \"playPhase\"\n    preloadPhase(canvas, script).then(playSink.start);\n\n    return playSink;\n}\n\n","import Constructor from './timeAPI';\nimport _ from 'lodash';\nimport decorator from './PIAPIdecorator';\nimport time from 'minno-time';\n\nexport default API;\n\nvar isDev = /^(localhost|127.0.0.1)/.test(location.host);\n\n/**\n * Constructor for PIPlayer script creator\n * @return {Object}\t\tScript creator\n */\nfunction API(name){\n    Constructor.call(this, name);\n\n    var settings = this.settings;\n    var script = this.script;\n\n    settings.logger = {\n        pulse: 20,\n        url : '/implicit/PiPlayerApplet'\n    };\n\n    // the activation function\n    script.play = play;\n\n    // the url builder for play\n    script.buildBaseUrl = buildBaseUrl;\n\n    if (isDev && !script.version) script.version = 999;\n}\n\ndecorator(API);\n\n// create API functions\n_.extend(API.prototype, Constructor.prototype);\nAPI.prototype.setVersion = function setVersion(ver){this.script.version = ver;};\n\n// annotate the play function\nplay.$inject = ['done', '$element', 'script', 'task'];\n\n\n/**\n * The activator function for pip\n * (anotated up in the main code)\n */\nfunction play(done, $canvas, script, task){\n    var $el, req, baseUrl ,version = task.version || this.version;\n    var pipSink, newVersion = version > 0.3;\n\n    if (task.type === 'time') {\n        // update script name\n        task.name && (script.name = task.name);\n\n        $canvas.append('<div pi-player></div>');\n        $el = $canvas.contents();\n\n        pipSink = time($el[0], script);\n        pipSink.end.map(done);\n\n        return function destroyPIP(){\n            $el.remove();\n            pipSink.end(true);\n        };\n    }\n\n    if (!version) throw new Error('Version not defined for pip task: ' + (task.name || script.name));\n\n    baseUrl = this.buildBaseUrl(version);\n\n    // load PIP\n    req = requirejs.config({\n        context: _.uniqueId(),\n        baseUrl: baseUrl+ (isDev ? 'src/js' : '/dist/js/'), // can't use packages yet as urls in pip aren't relative...\n        paths: {\n            //plugins\n            text: ['//cdnjs.cloudflare.com/ajax/libs/require-text/2.0.3/text.min', baseUrl+'/bower_components/requirejs-text/text'],\n\n            // Core Libraries\n            jquery: ['//cdnjs.cloudflare.com/ajax/libs/jquery/1.10.2/jquery.min',baseUrl+'/bower_components/jquery/dist/jquery.min'],\n            underscore: ['//cdnjs.cloudflare.com/ajax/libs/lodash.js/3.10.1/lodash.min',baseUrl+'/bower_components/lodash-compat/lodash.min'],\n            backbone: ['//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min', baseUrl+'/bower_components/backbone/backbone']\n        },\n\n        deps: newVersion ? ['underscore'] : ['jquery', 'backbone', 'underscore']\n    });\n\n    // update script name\n    task.name && (script.name = task.name);\n\n    $canvas.append('<div pi-player></div>');\n    $el = $canvas.contents();\n    $el.addClass('pi-spinner');\n\n\n    req(['activatePIP'], function(activate){\n        $el.removeClass('pi-spinner');\n        if (newVersion) {\n            pipSink = activate($el[0], script);\n            pipSink.end.map(done);\n        }\n        else activate(script, done);\n    });\n\n    return function destroyPIP(){\n        $el.remove();\n        if (newVersion) pipSink.end(true);\n        else req(['app/task/main_view'], function(main){\n            main.deferred.resolve();\n            main.destroy();\n        });\n    };\n}\n\n/**\n * Build BaseUrl from version\n * @param  {string} version pip version\n * @return {string}         baseUrl\n */\nfunction buildBaseUrl(version){\n    return isDev ? '/pip/' : '/implicit/common/all/js/pip/'+version;\n}\n\n","import Constructor from './questAPI';\nimport decorator from './PIAPIdecorator';\nimport _ from 'lodash';\n\nexport default API;\n\n/**\n * Constructor for PIPlayer script creator\n * @return {Object}\t\tScript creator\n */\nfunction API(){\n    Constructor.call(this);\n    _.set(this, 'settings.logger.url', '/implicit/PiQuest');\n}\n\ndecorator(API);\n\n// create API functions\n_.extend(API.prototype, Constructor.prototype);\n","/*\n *\tThe logger Object\n *\tLogger(settings)\n *\t@param settings: the settings for this logger (defaults to the settings defined on loggerProvider.settings)\n *\tsettings = {\n *\t\tpulse: 34, // after how many objects should we post\n *\t\turl: '/my/url', // where should we post to\n *\t\tmeta: an object that extends each log\n *\t}\n *\n *\tmethods:\n *\n *\tlog(obj) - add an object to the log stack\n *\t@param obj: any object that we want to log (as long as it is defined)\n *\n *\tsend() - send any remaining objects to the server\n *\n */\n\nimport _ from 'lodash';\n\nloggerProvider.$inject = ['$http','$q', 'piConsole','$rootScope'];\nfunction loggerProvider($http, $q, piConsole,$rootScope){\n    var self = this;\n    var global = $rootScope.global;\n    var logs = [];\n    _.set(global, 'current.logs', logs);\n\n    function Logger(dfltLogFn){\n        this.pending = [];\n        this.sent = [];\n        this.settings = {};\n        this.meta = {};\n        this.suppress = false; // don't suppress send\n        this.dfltLogFn = dfltLogFn || function(a){return a;};\n    }\n\n    _.extend(Logger.prototype, {\n        log: function(){\n            var settings = this.settings;\n            var logObj = (settings.logFn || this.dfltLogFn).apply(settings, arguments);\n\n            if (!_.isEmpty(this.meta) && !_.isPlainObject(logObj)){\n                piConsole(['logger']).debug(logObj);\n                throw new Error('Logger: in order to use \"meta\" the log must be an object.');\n            }\n            _.extend(logObj, this.meta);\n\n            logs.push(logObj);\n\n            // if debug, then log this object\n            piConsole(['logger']).debug('Logged: ', logObj);\n\n            this.pending.push(logObj);\n            self.logCounter++;\n            if (settings.pulse && !this.suppress && this.pending.length >= settings.pulse) this.send();\n        },\n\n        send: function(){\n            var i;\n            var settings = this.settings;\n            var sendData = this.pending;\n            var def = $q.defer();\n\n            // if there are no records to send...\n            if (sendData.length === 0){\n                def.resolve();\n                return def.promise;\n            }\n\n            // is undefined or null\n            if (settings.url == null){\n                def.resolve();\n                return def.promise;\n            }\n\n            // empty the pending stack\n            this.pending = [];\n\n            $http.post(settings.url, sendData).then(success, error);\n\n            // move everything pending to the sent stack\n            for (i = 0; i<sendData.length; i++){\n                this.sent.push(sendData[i]);\n            }\n\n            return def.promise;\n\n            function success(){\n                return def.resolve();\n            }\n\n            function error(){\n                // try again\n                return $http.post(settings.url, sendData).then(success, function(){\n                    piConsole(['logger']).error('Failed to send data, it seems the backend is not responding. (sending to: \"' + settings.url +'\")');\n                    var promise = _.result(settings, 'error');\n                    if (promise && _.isFunction(promise.then)) {\n                        return promise.then(def.resolve, def.reject);\n                    } else {\n                        return def.reject();\n                    }\n                });\n            }\n        },\n\n        /**\n         * suppress pulse\n         * sets suppress to `suppress`, or to true by default.\n         */\n        suppressPulse: function (suppress) {\n            this.suppress = _.isUndefined(suppress) ? true : suppress;\n        },\n\n        getCount: function(){\n            return self.logCounter;\n        },\n\n        setSettings: function(settings){\n            if (arguments.length === 0) return this.settings;\n\n            // inherit settings both from settings obj, and the global settings\n            this.settings = _.defaults({}, settings, self.settings);\n\n            if (!_.isUndefined(settings.meta) && !_.isPlainObject(settings.meta)){\n                throw new Error('Logger: \"meta\" must be an object.');\n            }\n\n            // inherit meta settings\n            this.meta = _.defaults({}, settings.meta, self.meta);\n        }\n    });\n\n    return Logger;\n}\n\nexport default function(){\n    this.$get = loggerProvider;\n    this.settings = {};\n    this.meta = {};\n    this.logCounter = 0;\n}\n","/**\n * A factory for $console\n *\n * each $console is prototyped on `consolePrototype`\n */\n\nimport _ from 'lodash';\n\nconsoleProvider.$inject = ['piConsolePrototype'];\n\nfunction consoleProvider(consolePrototype){\n\n    // decorate Console with a simple settings manager\n    Console.setSettings = consoleSetSettings;\n\n    return Console;\n\n    function Console(tags, force){\n        var $console = _.create(consolePrototype);\n\n        _.extend($console, {\n            tags: _.isArray(tags) ? tags : [tags], // make sure tags is an array\n            force: !!force\n        });\n\n        return $console;\n    }\n\n    // a mehtod of console\n    function consoleSetSettings (settings) {\n        consolePrototype.settings = settings;\n    }\n\n}\n\nexport default consoleProvider;\n","/**\n * This is our $console object.\n * It is a bit weird as it is supposed to work in concert with the consoleProvider.\n *\n * it depends on `tags` {Array} and `force` {Boolean} to be set externaly.\n *\n * {\n * \t\tlog: logFn\n * \t\tinfo: infoFn\n * \t\tshouldLog: fn that test whether as specific level should be logged\n * \t\tsettings: settingsObj ==> to be set from piConsole\n * \t\ttags: ['tag1'] // to be compared to settings.tags ==> to be set from piConsole\n * \t\tforce: false // ignore tags and level ==> to be set from piConsole\n * }\n */\n\n\nimport _ from 'lodash';\nvar LOGFUNCTIONS = ['log', 'info', 'warn', 'error', 'debug'];\nvar LEVELS = {none:9, error:1, warn:2, info:3, log:4, debug:4};\n\nconsolePrototypeProvider.$inject = ['$log', '$rootScope'];\nfunction consolePrototypeProvider ($log, $rootScope) {\n    /**\n     * Create the prototype for the instances of piConsole\n     */\n    var consolePrototype = {};\n\n    // add logging function\n    _.each(LOGFUNCTIONS, function(level){\n        consolePrototype[level] = createLog(level);\n    });\n\n    // default settings\n    consolePrototype.settings = {};\n\n    // the function that checks if this instance\n    consolePrototype.shouldLog = shouldLog;\n\n    // if we want the individual functions to be seperable sometime...\n    //_.bindAll(consolePrototype);\n\n    return consolePrototype;\n\n    /**\n     * This function is a method of the consolePrototype.\n     * It accesses the global settings, and the definitions set by Console and returns whether we should log\n     *\n     * @param  {String} level \tThe level of logging we are testing\n     * @return {Boolean}\t\tWhether to log this or not\n     */\n    function shouldLog(level){\n        var targetLevel = this.settings.level || 'warn'; // levels set to show\n        var targetTags = this.settings.tags || 'all'; // tags set to show\n        var tags = this.tags;\n        var force = this.force;\n\n        if (force){\n            return true;\n        }\n\n        // check if this level should *not* be logged\n        if (!~_.indexOf(LOGFUNCTIONS, targetLevel)){\n            this.settings.level = 'error';\n            this.error('Unknow DEBUG level: \"' + targetLevel + '\". The valid levels are debug>info>warn>error>none');\n            return false;\n        }\n\n        if (LEVELS[level] > LEVELS[targetLevel]){\n            return false;\n        }\n\n        // check if these tags should be logged (fit targetTags)\n        if (targetTags !== 'all' && !_.intersection(tags, _.isArray(targetTags) ? targetTags : [targetTags]).length){\n            return false;\n        }\n\n        // if we were not regected, this should be logged\n        return true;\n    }\n\n    /**\n     * Builds the log functions for consolePrototype\n     * @param  {String} level \tLevel name\n     * @return {Function}       A logging function\n     */\n    function createLog (level) {\n        return function(){\n            var settings = this.settings;\n            var i, args = [];\n\n            if (this.shouldLog(level)){\n                // get arguments (so that we don't leak the arguments object)\n                for (i=0; i < arguments.length; i++){args[i] = arguments[i];}\n\n                // do the actual logging\n                $log[level].apply(null, args);\n\n                if (settings.hideConsole){return;}\n\n                // broadcast to the piConsole directive\n                $rootScope.$emit('console:log',{\n                    time: new Date(),\n                    type: level,\n                    args: args,\n                    tags: this.tags\n                });\n\n            }\n        };\n    }\n}\n\nexport default consolePrototypeProvider;\n","\n// This is the only way to get a non js file relatively\nimport template from './console.html';\nimport _ from 'lodash';\n\ndirective.$inject = ['$rootScope'];\nfunction directive($rootScope){\n    return {\n        replace: true,\n        template:template,\n        link: function(scope) {\n            var logs = scope.logs = [];\n\n            scope.remove = remove;\n            scope.reverse = true;\n\n            $rootScope.$on('console:log', function(scope, log){\n                logs.push(log);\n            });\n\n            function remove(log){\n                var index = _.indexOf(logs, log);\n                if (index > -1) {\n                    logs.splice(index, 1);\n                }\n            }\n        }\n    };\n}\n\nexport default directive;\n","import angular from 'angular';\nimport consoleProvider from './consoleProvider';\nimport consolePrototypeProvider from './consolePrototypeProvider';\nimport consoleDirective from './consoleDirective';\n\nexport default module;\n\nvar module = angular.module('piConsole',[]);\n\nmodule.service('piConsole', consoleProvider);\nmodule.service('piConsolePrototype', consolePrototypeProvider);\nmodule.directive('piConsole', consoleDirective);\n\nmodule.filter('stringify', function(){\n    return stringify;\n});\n\nfunction stringify(value, pretty) {\n    if (value == null) { // null || undefined\n        return '<i class=\"text-muted\">undefined</i>';\n    }\n    if (value === '') {\n        return '<i class=\"text-muted\">an empty string</i>';\n    }\n\n    switch (typeof value) {\n        case 'string':\n            break;\n        case 'number':\n            value = '' + value;\n            break;\n        case 'object':\n            // display the error message not the full thing...\n            if (value instanceof Error){\n                value = value.message;\n                break;\n            }\n            /* fall through */\n        default:\n            // @TODO: implement this: http://stackoverflow.com/questions/4810841/how-can-i-pretty-print-json-using-javascript\n            value = '<a href=\"javascript:void(0)\">' + angular.toJson(value, !!pretty) + '</a>';\n    }\n\n    return value;\n}\n","import _ from 'lodash';\nexport default mixProvider;\n\n/**\n * A function that maps a mixer object into a sequence.\n *\n * The basic structure of such an obect is:\n * {\n *\t\tmixer: 'functionType',\n *\t\tremix : false,\n *\t\tdata: [task1, task2]\n *\t}\n *\n * The results of the mix are set into `$parsed` within the original mixer object.\n * if remix is true $parsed is returned instead of recomputing\n *\n * @param {Object} [obj] [a mixer object]\n * @returns {Array} [An array of mixed objects]\n */\n\nmixProvider.$inject = ['randomizeShuffle', 'randomizeRandom'];\nfunction mixProvider(shuffle, random){\n\n    function mix(obj){\n        var mixerName = obj.mixer;\n\n        // if this isn't a mixer\n        // make sure we catch mixers that are set with undefined by accident...\n        if (!(_.isPlainObject(obj) && 'mixer' in obj)){\n            return [obj];\n        }\n\n        if (_.isUndefined(mix.mixers[mixerName])){\n            throw new Error('Mixer: unknow mixer type = ' + mixerName);\n        }\n\n        if (!obj.remix && obj.$parsed) {\n            return obj.$parsed;\n        }\n\n        obj.$parsed = mix.mixers[mixerName].apply(null, arguments);\n\n        if (!_.isArray(obj.$parsed)) {\n            throw new Error('Mixer: mixers must return an array (mixer: ' + mixerName + ')');\n        }\n\n        return obj.$parsed;\n    }\n\n    function deepMixer(sequence, context){\n        return _.reduce(sequence, function(arr,value){\n\n            if (_.isPlainObject(value) && 'mixer' in value && value.mixer != 'wrapper' && !value.wrapper){\n                var seq = deepMixer(mix(value, context), context);\n                return arr.concat(seq);\n            } else {\n                return arr.concat([value]);\n            }\n        }, []);\n    }\n\n\n    mix.mixers = {\n        wrapper : function(obj){\n            return obj.data;\n        },\n\n        repeat: function(obj){\n            var sequence = obj.data || [];\n            var result = [], i;\n            for (i=0; i < obj.times; i++){\n                result = result.concat(_.clone(sequence,true));\n            }\n            return result;\n        },\n\n        // randomize any elements\n        random: function(obj, context){\n            var sequence = obj.data ? deepMixer(obj.data, context) : [];\n            return shuffle(sequence);\n        },\n\n        choose: function(obj, context){\n            var sequence = obj.data ? deepMixer(obj.data, context) : [];\n            return _.take(shuffle(sequence), obj.n ? obj.n : 1);\n        },\n\n        custom: function(obj, context){\n            return _.isFunction(obj.fn) ? obj.fn(obj, context) : [];\n        },\n\n        weightedRandom: weightedChoose,\n        weightedChoose: weightedChoose\n\n    };\n\n\n    return mix;\n\n    function weightedChoose(obj, context){\n        var sequence = obj.data ? deepMixer(obj.data, context) : [];\n        var i;\n        var n = obj.n || 1;\n        var result = [];\n        var total_weight = _.reduce(obj.weights,function (prev, cur) {\n            return prev + cur;\n        });\n\n        for (i = 0; i < n; i++){\n            result.push(generate());\n        }\n\n        return result;\n\n        function generate(){\n            var i;\n            var random_num = random() * total_weight; // cutoff - when we reach this sum - we've reached the desired weight\n            var weight_sum = 0;\n\n            for (i = 0; i < sequence.length; i++) {\n                weight_sum += obj.weights[i];\n                weight_sum = +weight_sum.toFixed(3);\n\n                if (random_num <= weight_sum) {\n                    return obj.data[i];\n                }\n            }\n\n            throw new Error('Mixer: something went wrong with weightedRandom');\n        }\n    }\n\n}\n","import _ from 'lodash';\nexport default mixerSequentialProvider;\n\nmixerSequentialProvider.$inject = ['mixer'];\nfunction mixerSequentialProvider(mix){\n    function mixerSequential(sequence, context, depth){\n        var mixed;\n        var obj = sequence[0];\n\n        depth = depth || 0;\n        if (depth++ >= 10){\n            throw new Error('Mixer: the mixer allows a maximum depth of 10');\n        }\n\n        if (_.isUndefined(obj.mixer)){\n            return sequence;\n        }\n\n        // mix obj\n        mixed = mix(obj, context);\n\n        // remove obj from sequence\n        sequence.shift();\n\n        // concat mixed and sequence\n        mixed = mixed.concat(sequence);\n\n        return _.isUndefined(mixed[0]) || _.isUndefined(mixed[0].mixer) ? mixed : mixerSequential(mixed, context, depth);\n    }\n\n    return mixerSequential;\n}\n","import _ from 'lodash';\nexport default mixerRecursiveProvider;\n\nmixerRecursiveProvider.$inject = ['mixer'];\nfunction mixerRecursiveProvider(mix){\n    function mixerRecursive(sequence, context, depth){\n        var mixed = [];\n\n        depth = depth || 0;\n        if (depth++ >= 10){\n            throw new Error('Mixer: the mixer allows a maximum depth of 10');\n        }\n\n        mixed = _(sequence)\n            .map(function(obj){\n\n                if (_.isUndefined(obj.mixer)){\n                    return obj;\n                }\n\n                // mix object, and recursively mix the result\n                return mixerRecursive(mix(obj, context), context, depth);\n            })\n            .flatten()\n            .value();\n\n        return mixed;\n    }\n\n    return mixerRecursive;\n}\n\n","import _ from 'lodash';\nexport default mixerSequenceProvider;\n\nmixerSequenceProvider.$inject = ['mixer'];\nfunction mixerSequenceProvider(mix){\n\n    /**\n     * MixerSequence takes an mixer array and allows browsing back and forth within it\n     * @param {Array} arr [a mixer array]\n     */\n    function MixerSequence(arr){\n        this.sequence = arr;\n        this.stack = [];\n        this.add(arr);\n        this.pointer = 0;\n    }\n\n    _.extend(MixerSequence.prototype, {\n        /**\n         * Add sequence to mixer\n         * @param {[type]} arr     Sequence\n         * @param {[type]} reverse Whether to start from begining or end\n         */\n        add: function(arr, reverse){\n            this.stack.push({pointer:reverse ? arr.length : -1,sequence:arr});\n        },\n\n        proceed: function(direction, context){\n            // get last subSequence\n            var subSequence = this.stack[this.stack.length-1];\n            var isNext = (direction === 'next');\n\n            // if we ran out of sequence\n            // add the original sequence back in\n            if (!subSequence) {\n                throw new Error ('mixerSequence: subSequence not found');\n            }\n\n            subSequence.pointer += isNext ? 1 : -1;\n\n            var el = subSequence.sequence[subSequence.pointer];\n\n            // if we ran out of elements, go to previous level (unless we are on the root sequence)\n            if (_.isUndefined(el) && this.stack.length > 1){\n                this.stack.pop();\n                return this.proceed.call(this,direction,context);\n            }\n\n            // if element is a mixer, mix it\n            if (el && el.mixer){\n                this.add(mix(el,context), !isNext);\n                return this.proceed.call(this,direction,context);\n            }\n\n            // regular element or undefined (end of sequence)\n            return this;\n        },\n\n        next: function(context){\n            this.pointer++;\n            return this.proceed.call(this, 'next',context);\n        },\n\n        prev: function(context){\n            this.pointer--;\n            return this.proceed.call(this, 'prev',context);\n        },\n\n        /**\n         * Return current element\n         * should **never** return a mixer - supposed to abstract them away\n         * @return {[type]} undefined or element\n         */\n        current:function(){\n            // get last subSequence\n            var subSequence = this.stack[this.stack.length-1];\n\n            if (!subSequence) {\n                throw new Error ('mixerSequence: subSequence not found');\n            }\n\n            var el = subSequence.sequence[subSequence.pointer];\n\n            if (!el){\n                return undefined;\n            }\n\n            // extend element with meta data\n            el.$meta = this.meta();\n\n            return el;\n        },\n\n        meta: function(){\n            return {\n                number: this.pointer,\n\n                // sum of sequence length, minus one (the mixer) for each level of stack except the last\n                outOf:  _.reduce(this.stack, function(memo,sub){return memo + sub.sequence.length-1;},0)+1\n            };\n        }\n\n    });\n\n    return MixerSequence;\n}\n","import _ from 'lodash';\nexport default dotNotation;\n\nfunction dotNotation(chain, obj){\n\n    if (_.isUndefined(chain)) return;\n    if (_.isString(chain)) chain = chain.split('.');\n\n    // @TODO maybe lodash _.get?\n    return chain.reduce(function(result, link){\n\n        if (_.isPlainObject(result) || _.isArray(result)){\n            return result[link];\n        }\n\n        return undefined;\n\n    }, obj);\n}\n","import _ from 'lodash';\nexport default mixerDotNotationProvider;\n\nmixerDotNotationProvider.$inject = ['dotNotation'];\nfunction mixerDotNotationProvider(dotNotation){\n\n    function mixerDotNotation(chain, obj){\n\n        var escapeSeparatorRegex= /[^/]\\./;\n\n        if (!_.isString(chain)) return chain;\n\n        // We do not have a non escaped dot: we treat this as a string\n        if (!escapeSeparatorRegex.test(chain)) return chain.replace('/.','.');\n\n        return dotNotation(chain, obj);\n    }\n\n    return mixerDotNotation;\n}\n","import _ from 'lodash';\n\nexport default mixerConditionProvider;\n\nmixerConditionProvider.$inject = ['mixerDotNotation'];\nfunction mixerConditionProvider(dotNotation){\n    var operatorHash = {\n        gt: forceNumeric(_.gt),\n        greaterThan: forceNumeric(_.gt),\n        gte: forceNumeric(_.gte),\n        greaterThanOrEqual: forceNumeric(_.gte),\n        equals: _.eq,\n        'in': _.rearg(_.contains,1,0), // effectively reverse\n        contains: _.rearg(_.contains,1,0), // effectively reverse\n        exactly: exactly,\n        isTruthy: isTruthy\n    };\n\n    function mixerCondition(condition, context){\n        var operator = getOperator(condition);\n        var left = dotNotation(condition.compare,context);\n        var right = dotNotation(condition.to,context);\n\n        if (condition.DEBUG && console) console.info('Condition: ', left, condition.operator || 'equals', right, condition); // eslint-disable-line no-console \n\n        return condition.negate\n            ? !operator.apply(context,[left, right, context])\n            : operator.apply(context,[left, right, context]);\n    }\n\n    return mixerCondition;\n\n\n    // extract the operator function from the condition\n    function getOperator(condition){\n        var operator = condition.operator;\n        if (_.isFunction(condition)) return condition;\n        if (!_.has(condition, 'operator')) return _.has(condition,'to') ? _.eq : isTruthy;\n        if (_.isFunction(operator)) return operator;\n        return operatorHash[operator];\n    }\n\n    function isTruthy(left){ return !!left; }\n    function exactly(left,right){ return left === right;}\n    function forceNumeric(cb){ return function(left,right){ return [left,right].every(_.isNumber) ? cb(left,right) : false; }; } \n\n}\n","/**\n * Registers the branching mixers with the mixer\n * @return {function}         [mixer decorator]\n */\n\nimport _ from 'lodash';\n\nexport default mixerBranchingDecorator;\n\nmixerBranchingDecorator.$inject = ['$delegate','mixerEvaluate','mixerDefaultContext'];\nfunction mixerBranchingDecorator(mix, evaluate, mixerDefaultContext){\n\n    mix.mixers.branch = branch;\n    mix.mixers.multiBranch = multiBranch;\n\n    return mix;\n\n    /**\n     * Branching mixer\n     * @return {Array}         [A data array with objects to continue with]\n     */\n    function branch(obj, context){\n        context = _.extend(context || {}, mixerDefaultContext);\n        return evaluate(obj.conditions, context) ? obj.data || [] : obj.elseData || [];\n    }\n\n    /**\n     * multiBranch mixer\n     * @return {Array}         [A data array with objects to continue with]\n     */\n    function multiBranch(obj, context){\n        context = _.extend(context || {}, mixerDefaultContext);\n        var row;\n\n        row = _.find(obj.branches, function(branch){\n            return evaluate(branch.conditions, context);\n        });\n\n        if (row) {\n            return row.data || [];\n        }\n\n        return obj.elseData || [];\n    }\n}\n","import _ from 'lodash';\nexport default evaluateProvider;\n\nevaluateProvider.$inject = ['mixerCondition'];\nfunction evaluateProvider(condition){\n    /**\n     * Checks if a conditions set is true\n     * @param  {Array} conditions [an array of conditions]\n     * @param  {Object} context   [A context for the condition checker]\n     * @return {Boolean}          [Are these conditions true]\n     */\n\n    function evaluate(conditions,context){\n        // make && the default\n        _.isArray(conditions) && (conditions = {and:conditions});\n\n        function test(cond){return evaluate(cond,context);}\n\n        // && objects\n        if (conditions.and){\n            return _.every(conditions.and, test);\n        }\n        if (conditions.nand){\n            return !_.every(conditions.nand, test);\n        }\n\n        // || objects\n        if (conditions.or){\n            return _.some(conditions.or, test);\n        }\n        if (conditions.nor){\n            return !_.some(conditions.nor, test);\n        }\n\n        return condition(conditions, context);\n    }\n\n    return evaluate;\n}\n","import _ from 'lodash';\nexport default templateFilter;\n\ntemplateFilter.$inject = ['$log','templateDefaultContext'];\nfunction templateFilter($log, defaultContext){\n\n    function template(input, context){\n\n        // if there is no template just return the string\n        if (!~input.indexOf('<%')){\n            return input;\n        }\n\n        // build context (extend it with the default context)\n        context = _.extend(context || {}, defaultContext);\n\n        // filters don't throw errors when used from within templates\n        // therefore we need catch any errors here... (we may decide to drop this if it hits performance too mutch...)\n        try{\n            return _.template(input)(context);\n        } catch(e){\n            $log.error('ERROR: \"' + e.message + '\" in the following template: ', input);\n            return '';\n        }\n\n    }\n\n    return template;\n\n}\n","import _ from 'lodash';\nexport default templateObjProvider;\n\ntemplateObjProvider.$inject = ['templateDefaultContext'];\nfunction templateObjProvider(templateDefaultContext){\n\n    function templateObj(obj, context, options){\n        var skip = _.get(options, 'skip', []);\n        var result = {};\n        var key;\n        var ctx = _.assign({}, context, templateDefaultContext);\n\n        for (key in obj){\n            result[key] = (skip.indexOf(key) == -1) ? expand(obj[key]) : obj[key];\n        }\n\n        return result;\n\n        function expand(value){\n            if (_.isString(value)) return template(value);\n            if (_.isArray(value)) return value.map(expand);\n            if (_.isPlainObject(value)) return _.mapValues(value, expand);\n            return value;\n        }\n\n        function template(input){\n            // if there is no template just return the string\n            if (!~input.indexOf('<%')) return input;\n            return _.template(input)(ctx);\n        }\n    }\n\n    return templateObj;\n}\n","/**\n * This is our $console object.\n * It is a bit weird as it is supposed to work in concert with the consoleProvider.\n *\n * it depends on `tags` {Array} and `force` {Boolean} to be set externaly.\n *\n * {\n * \t\tlog: logFn\n * \t\tinfo: infoFn\n * \t\tshouldLog: fn that test whether as specific level should be logged\n * \t\tsettings: settingsObj ==> to be set from piConsole\n * \t\ttags: ['tag1'] // to be compared to settings.tags ==> to be set from piConsole\n * \t\tforce: false // ignore tags and level ==> to be set from piConsole\n * }\n */\n\n\nimport _ from 'lodash';\nexport default consolePrototypeProvider;\nvar LOGFUNCTIONS = ['log', 'info', 'warn', 'error', 'debug'];\nvar LEVELS = {none:9, error:1, warn:2, info:3, log:4, debug:4};\n\nconsolePrototypeProvider.$inject = ['$log', '$rootScope'];\nfunction consolePrototypeProvider ($log, $rootScope) {\n    /**\n     * Create the prototype for the instances of piConsole\n     */\n    var consolePrototype = {};\n\n    // add logging function\n    _.each(LOGFUNCTIONS, function(level){\n        consolePrototype[level] = createLog(level);\n    });\n\n    // default settings\n    consolePrototype.settings = {};\n\n    // the function that checks if this instance\n    consolePrototype.shouldLog = shouldLog;\n\n    // if we want the individual functions to be seperable sometime...\n    //_.bindAll(consolePrototype);\n\n    return consolePrototype;\n\n    /**\n     * This function is a method of the consolePrototype.\n     * It accesses the global settings, and the definitions set by Console and returns whether we should log\n     *\n     * @param  {String} level \tThe level of logging we are testing\n     * @return {Boolean}\t\tWhether to log this or not\n     */\n    function shouldLog(level){\n        var targetLevel = this.settings.level || 'warn'; // levels set to show\n        var targetTags = this.settings.tags || 'all'; // tags set to show\n        var tags = this.tags;\n        var force = this.force;\n\n        if (force){\n            return true;\n        }\n\n        // check if this level should *not* be logged\n        if (!~_.indexOf(LOGFUNCTIONS, targetLevel)){\n            this.settings.level = 'error';\n            this.error('Unknow DEBUG level: \"' + targetLevel + '\". The valid levels are debug>info>warn>error>none');\n            return false;\n        }\n\n        if (LEVELS[level] > LEVELS[targetLevel]){\n            return false;\n        }\n\n        // check if these tags should be logged (fit targetTags)\n        if (targetTags !== 'all' && !_.intersection(tags, _.isArray(targetTags) ? targetTags : [targetTags]).length){\n            return false;\n        }\n\n        // if we were not regected, this should be logged\n        return true;\n    }\n\n    /**\n     * Builds the log functions for consolePrototype\n     * @param  {String} level \tLevel name\n     * @return {Function}       A logging function\n     */\n    function createLog (level) {\n        return function(){\n            var settings = this.settings;\n            var i, args = [];\n\n            if (this.shouldLog(level)){\n                // get arguments (so that we don't leak the arguments object)\n                for (i=0; i < arguments.length; i++){args[i] = arguments[i];}\n\n                // do the actual logging\n                $log[level].apply(null, args);\n\n                if (settings.hideConsole){return;}\n\n                // broadcast to the piConsole directive\n                $rootScope.$emit('console:log',{\n                    time: new Date(),\n                    type: level,\n                    args: args,\n                    tags: this.tags\n                });\n\n            }\n        };\n    }\n}\n","/**\n * A factory for $console\n *\n * each $console is prototyped on `consolePrototype`\n */\n\nimport _ from 'lodash';\nexport default consoleProvider;\n\nconsoleProvider.$inject = ['piConsolePrototype'];\n\nfunction consoleProvider(consolePrototype){\n\n    // decorate Console with a simple settings manager\n    Console.setSettings = consoleSetSettings;\n\n    return Console;\n\n    function Console(tags, force){\n        var $console = _.create(consolePrototype);\n\n        _.extend($console, {\n            tags: _.isArray(tags) ? tags : [tags], // make sure tags is an array\n            force: !!force\n        });\n\n        return $console;\n    }\n\n    // a mehtod of console\n    function consoleSetSettings (settings) {\n        consolePrototype.settings = settings;\n    }\n\n}\n","// This is the only way to get a non js file relatively\nimport template from './console.html';\nimport _ from 'lodash';\n\nexport default directive;\n\ndirective.$inject = ['$rootScope'];\nfunction directive($rootScope){\n    return {\n        replace: true,\n        template:template,\n        link: function(scope) {\n            var logs = scope.logs = [];\n\n            scope.remove = remove;\n            scope.reverse = true;\n\n            $rootScope.$on('console:log', function(scope, log){\n                logs.push(log);\n            });\n\n            function remove(log){\n                var index = _.indexOf(logs, log);\n                if (index > -1) {\n                    logs.splice(index, 1);\n                }\n            }\n        }\n    };\n}\n","import angular from 'angular';\nimport consolePrototypeProvider from './consolePrototypeProvider';\nimport consoleProvider from './consoleProvider';\nimport consoleDirective from './consoleDirective';\n\nexport default module;\n\nvar module = angular.module('piConsole',[]);\n\nmodule.service('piConsole', consoleProvider);\nmodule.service('piConsolePrototype', consolePrototypeProvider);\nmodule.directive('piConsole', consoleDirective);\n\nmodule.filter('stringify', function(){\n    return stringify;\n});\n\n\nfunction stringify(value, pretty) {\n    if (value == null) { // null || undefined\n        return '<i class=\"text-muted\">undefined</i>';\n    }\n    if (value === '') {\n        return '<i class=\"text-muted\">an empty string</i>';\n    }\n\n    switch (typeof value) {\n        case 'string':\n            break;\n        case 'number':\n            value = '' + value;\n            break;\n        case 'object':\n            // display the error message not the full thing...\n            if (value instanceof Error){\n                value = value.message;\n                break;\n            }\n            /* fall through */\n        default:\n            // @TODO: implement this: http://stackoverflow.com/questions/4810841/how-can-i-pretty-print-json-using-javascript\n            value = '<a href=\"javascript:void(0)\">' + angular.toJson(value, !!pretty) + '</a>';\n    }\n\n    return value;\n}\n","import _ from 'lodash';\nexport default RandomizerProvider;\n\n// @TODO: repeat currently repeats only the last element, we need repeat = 'set' or something in order to prevent re-randomizing of exRandom...\n\nRandomizerProvider.$inject = ['randomizeInt', 'randomizeRange', 'Collection'];\nfunction RandomizerProvider(randomizeInt, randomizeRange, Collection){\n\n    function Randomizer(){\n        this._cache = {\n            random : {},\n            exRandom : {},\n            sequential : {}\n        };\n    }\n\n    _.extend(Randomizer.prototype, {\n        random: random,\n        exRandom: exRandom,\n        sequential: sequential\n    });\n\n    return Randomizer;\n\n    function random(length, seed, repeat){\n        var cache  = this._cache.random;\n\n        if (repeat && !_.isUndefined(cache[seed])) {\n            return cache[seed];\n        }\n\n        // save result in cache\n        cache[seed] = randomizeInt(length);\n\n        return cache[seed];\n    }\n\n    function sequential(length, seed, repeat){\n        var cache = this._cache.sequential;\n        var coll = cache[seed];\n        var result;\n\n        // if needed create collection and set it in seed\n        if (_.isUndefined(coll)){\n            coll = cache[seed] = new Collection(_.range(length));\n            return coll.first();\n        }\n\n        if (coll.length !== length){\n            throw new Error('This seed  ('+ seed +') points to a collection with the wrong length, you can only use a seed for sets of the same length');\n        }\n\n        // if this is a repeated element:\n        if (repeat) {\n            return coll.current();\n        }\n\n        // if we've reached the end\n        result = coll.next();\n\n        // if we've reached the end of the collection (next)\n        if (_.isUndefined(result)){\n            return coll.first();\n        } else {\n            return result;\n        }\n    }\n\n    function exRandom(length, seed, repeat){\n        var cache = this._cache.exRandom;\n        var coll = cache[seed];\n        var result;\n\n        // if needed create collection and set it in seed\n        if (_.isUndefined(coll)){\n            coll = cache[seed] = new Collection(randomizeRange(length));\n            return coll.first();\n        }\n\n        if (coll.length !== length){\n            throw new Error('This seed  ('+ seed +') points to a collection with the wrong length, you can only use a seed for sets of the same length');\n        }\n\n        // if this is a repeated element:\n        if (repeat) {\n            return coll.current();\n        }\n\n        // if we've reached the end\n        result = coll.next();\n\n        // if we've reached the end of the collection (next)\n        // we should re-randomize\n        if (_.isUndefined(result)){\n            coll = cache[seed] = new Collection(randomizeRange(length));\n            return coll.first();\n        } else {\n            return result;\n        }\n    }\n\n}\n","import _ from 'lodash';\nexport default collectionService;\n/*\n * The constructor for an Array wrapper\n */\n\nfunction collectionService(){\n\n    function Collection (arr) {\n        if (arr instanceof Collection) {\n            return arr;\n        }\n\n        // Make sure we are creating this array out of a valid argument\n        if (!_.isUndefined(arr) && !_.isArray(arr) && !(arr instanceof Collection)) {\n            throw new Error('Collections can only be constructed from arrays');\n        }\n\n        this.collection = arr || [];\n        this.length = this.collection.length;\n\n        // pointer to the current location within the array\n        // we start with -1 so that the initial next points to the begining of the array\n        this.pointer = -1;\n    }\n\n    _.extend(Collection.prototype,{\n\n        first : function first(){\n            this.pointer = 0;\n            return this.collection[this.pointer];\n        },\n\n        last : function last(){\n            this.pointer = this.collection.length - 1;\n            return this.collection[this.pointer];\n        },\n\n        end : function end(){\n            this.pointer = this.collection.length;\n            return undefined;\n        },\n\n        current : function(){\n            return this.collection[this.pointer];\n        },\n\n        next : function(){\n            return this.collection[++this.pointer];\n        },\n\n        previous : function(){\n            return this.collection[--this.pointer];\n        },\n\n        // add list of items to the collection\n        add : function(list){\n            // dont allow adding nothing\n            if (!arguments.length) {\n                return this;\n            }\n\n            // make sure list is as an array\n            list = _.isArray(list) ? list : [list];\n            this.collection = this.collection.concat(list);\n\n            this.length = this.collection.length;\n\n            return this;\n        },\n\n        // return the item at index\n        at: function(index){\n            return this.collection[index];\n        }\n    });\n\n\n    // Stuff we took out of bootstrap that can augment the collection\n    // **************************************************************\n    var methods = ['where','filter'];\n    var slice = Array.prototype.slice;\n\n    // Mix in each Underscore method as a proxy to `Collection#models`.\n    _.each(methods, function(method) {\n        Collection.prototype[method] = function() {\n            var args = slice.call(arguments);\n            args.unshift(this.collection);\n            var coll = _[method].apply(_,args);\n            return new Collection(coll);\n        };\n    });\n\n    return Collection;\n}\n","/*\n * inflates an object\n * this function is responsible for inheritance\n *\n * function inflate(source,coll, randomizer, recursive, counter)\n * @param source: the object to inflate\n * @param coll: a collection to inherit from\n * @param randomizer: a randomizer object for the query\n * @param recursive: private use only, is this inside the recursion (true) or top level (false)\n * @param depth: private use only, a counter for the depth of the recursion\n */\nimport _ from 'lodash';\nexport default inflateProvider;\n\ninflateProvider.$inject = ['databaseQuery','$rootScope'];\nfunction inflateProvider(query, $rootScope){\n\n    function customize(source){\n        // check for a custom function and run it if it exists\n        if (_.isFunction(source.customize)){\n            source.customize.apply(source, [source, $rootScope.global]);\n        }\n        return source;\n    }\n\n    // @param source - object to inflate\n    // @param type - trial stimulus or media\n    // @param recursive - whether this is a recursive call or not\n    function inflate(source, coll, randomizer, recursive, depth){\n\n        // protection against infinte loops\n        // ***********************************\n        depth = recursive ? --depth : 10;\n\n        if (!depth) throw new Error('Inheritance loop too deep, you can only inherit up to 10 levels down');\n\n        if (!_.isPlainObject(source)) throw new Error('You are trying to inflate a non object (' + JSON.stringify(source) + ')');\n\n        var parent;\n        var child = _.cloneDeep(source);\n        var inheritObj = child.inherit;\n\n        /*\n         * no inheritance\n         */\n\n        if (!child.inherit) {\n            if (!recursive) customize(child); // customize only on the last call (non recursive)\n            return child;\n        }\n\n        /*\n         * get parent\n         */\n        parent = query(inheritObj, coll, randomizer);\n\n        // if inherit target was not found\n        if (!parent) throw new Error('Query failed, object (' + JSON.stringify(inheritObj) +\t') not found.');\n\n        // inflate parent (recursively)\n        parent = inflate(\n            parent,\n            coll,\n            randomizer,\n            true,\n            depth\n        );\n\n        // extending the child\n        // ***********************************\n        if (inheritObj.merge && !_.isArray(inheritObj.merge)){\n            throw new Error('Inheritance error: inherit.merge must be an array.');\n        }\n\n        // start inflating child (we have to extend selectively...)\n        _.each(parent, function(value, key){\n            var childProp, parentProp;\n            // if this key is not set yet, copy it out of the parent\n            if (!(key in child)){\n                child[key] = _.isFunction(value) ? value : _.cloneDeep(value);\n                return;\n            }\n\n            // if we have a merge array,\n            if (_.indexOf(inheritObj.merge, key) != -1){\n                childProp = child[key];\n                parentProp = value;\n\n                if (_.isArray(childProp)){\n                    if (!_.isArray(parentProp)){\n                        throw new Error('Inheritance error: You tried merging an array with an non array (for \"' + key + '\")');\n                    }\n                    child[key] = childProp.concat(parentProp);\n                }\n\n                if (_.isPlainObject(childProp)){\n                    if (!_.isPlainObject(parentProp)){\n                        throw new Error('Inheritance error: You tried merging an object with an non object (for \"' + key + '\")');\n                    }\n                    child[key] = _.extend({},parentProp,childProp);\n                }\n\n            }\n        });\n\n        // we want to extend the childs data even if it already exists\n        // its ok to shallow extend here (because by definition parent was created for this inflation)\n        if (parent.data){\n            child.data = _.extend(parent.data, child.data || {});\n        }\n\n        // Personal customization functions - only if this is the last iteration of inflate\n        // This way the customize function gets called only once.\n        !recursive && customize(child);\n\n        // return inflated trial\n        return child;\n    }\n\n    return inflate;\n}\n","import _ from 'lodash';\nexport default queryProvider;\n\nqueryProvider.$inject = ['Collection'];\nfunction queryProvider(Collection){\n\n    function queryFn(query, collection, randomizer){\n        var coll = new Collection(collection);\n\n        // shortcuts:\n        // ****************************\n\n        if (_.isFunction(query)) return query(collection);\n\n        if (_.isString(query) || _.isNumber(query)) query = {set:query, type:'random'};\n\n        // filter by set\n        // ****************************\n        if (query.set) coll = coll.where({set:query.set});\n\n        // filter by data\n        // ****************************\n        if (_.isString(query.data)){\n            coll = coll.filter(function(q){\n                return q.handle === query.data || (q.data && q.data.handle === query.data);\n            });\n        }\n\n        if (_.isPlainObject(query.data)) coll = coll.where({data:query.data});\n\n        if (_.isFunction(query.data)) coll = coll.filter(query.data);\n\n        // pick by type\n        // ****************************\n\n        // the default seed is namespace specific just to minimize the situations where seeds clash across namespaces\n        var seed = query.seed || ('$' + collection.namespace + query.set);\n        var length = coll.length;\n        var repeat = query.repeat;\n        var at;\n\n        switch (query.type){\n            case undefined:\n            case 'byData':\n            case 'random':\n                at = randomizer.random(length,seed,repeat);\n                break;\n            case 'exRandom':\n                at = randomizer.exRandom(length,seed,repeat);\n                break;\n            case 'sequential':\n                at = randomizer.sequential(length,seed,repeat);\n                break;\n            case 'first':\n                at = 0;\n                break;\n            case 'last':\n                at = length-1;\n                break;\n            default:\n                throw new Error('Unknow query type: ' + query.type);\n        }\n\n        if (_.isUndefined(coll.at(at))) throw new Error('Query failed, object (' + JSON.stringify(query) +\t') not found. If you are trying to apply a template, you should know that they are not supported for inheritance.');\n\n        return coll.at(at);\n    }\n\n    return queryFn;\n}\n","import _ from 'lodash';\nexport default DatabaseProvider;\n\nDatabaseProvider.$inject = ['DatabaseStore', 'DatabaseRandomizer', 'databaseInflate', 'templateObj', 'databaseSequence'];\nfunction DatabaseProvider(Store, Randomizer, inflate, templateObj, DatabaseSequence){\n\n    function Database(){\n        this.store = new Store();\n        this.randomizer = new Randomizer();\n    }\n\n    _.extend(Database.prototype, {\n        createColl: function(namespace){\n            this.store.create(namespace);\n        },\n\n        getColl: function(namespace){\n            return this.store.read(namespace);\n        },\n\n        add: function(namespace, query){\n            var coll = this.store.read(namespace);\n            coll.add(query);\n        },\n\n        inflate: function(namespace, query, context, options){\n            var coll = this.getColl(namespace);\n            var result;\n\n            try {\n                // inherit\n                if (!query.$inflated || query.reinflate) {\n                    query.$inflated = inflate(query, coll, this.randomizer);\n                    query.$templated = null; // we have to retemplate after querying, who know what new templates we got here...\n                }\n\n                // template\n                if (!query.$templated || query.$inflated.regenerateTemplate){\n                    context[namespace + 'Meta'] = query.$meta;\n                    context[namespace + 'Data'] = templateObj(query.$inflated.data || {}, context, options); // make sure we support\n                    query.$templated = templateObj(query.$inflated, context, options);\n                }\n\n                result = query.$templated;\n            } catch(err) {\n                if (this.onError) this.onError(err);\n                throw err;\n            }\n\n            // set flags\n            if (context.global && result.addGlobal) _.extend(context.global, result.addGlobal);\n\n            if (context.current && result.addCurrent) _.extend(context.current, result.addCurrent);\n\n            return query.$templated;\n        },\n\n        sequence: function(namespace, arr){\n            if (!_.isArray(arr)){\n                throw new Error('Sequence must be an array.');\n            }\n            return new DatabaseSequence(namespace, arr, this);\n        }\n    });\n\n    return Database;\n}\n","/*\n *\tThe store is a collection of collection devided into namespaces.\n *\tYou can think of every namespace/collection as a table.\n */\nimport _ from 'lodash';\nexport default storeProvider;\n\nstoreProvider.$inject = ['Collection'];\nfunction storeProvider(Collection){\n\n    function Store(){\n        this.store = {};\n    }\n\n    _.extend(Store.prototype, {\n        create: function create(nameSpace){\n            if (this.store[nameSpace]){\n                throw new Error('The name space ' + nameSpace + ' already exists');\n            }\n            this.store[nameSpace] = new Collection();\n            this.store[nameSpace].namespace = nameSpace;\n        },\n\n        read: function read(nameSpace){\n            if (!this.store[nameSpace]){\n                throw new Error('The name space ' + nameSpace + ' does not exist');\n            }\n            return this.store[nameSpace];\n        },\n\n        update: function update(nameSpace, data){\n            var coll = this.read(nameSpace);\n            coll.add(data);\n        },\n\n        del: function del(nameSpace){\n            this.store[nameSpace] = undefined;\n        }\n    });\n\n    return Store;\n}\n","import _ from 'lodash';\nexport default SequenceProvider;\n\nSequenceProvider.$inject = ['MixerSequence'];\nfunction SequenceProvider(MixerSequence){\n\n    /**\n     * Sequence Constructor:\n     * Manage the progression of a sequence, including parsing (mixing, inheritance and templating).\n     * @param  {String  } namespace [pages or questions (the type of db.Store)]\n     * @param  {Array   } arr       [a sequence to manage]\n     * @param  {Database} db        [the db itself]\n     */\n\n    function Sequence(namespace, arr,db){\n        this.namespace = namespace;\n        this.mixerSequence = new MixerSequence(arr);\n        this.db = db;\n    }\n\n    _.extend(Sequence.prototype, {\n        // only mix\n        next: function(context){\n            this.mixerSequence.next(context);\n            return this;\n        },\n\n        // anti mix\n        prev: function(context){\n            this.mixerSequence.prev(context);\n            return this;\n        },\n\n        /**\n         * Return the element currently in focus.\n         * It always returns either an element or undefined (mixers are abstrcted away)\n         * @param  {[type]} context [description]\n         * @return {[type]}         [description]\n         */\n        current: function(context, options){\n            context || (context = {});\n            // must returned an element or undefined\n            var obj = this.mixerSequence.current(context);\n\n            // in case this is the end of the sequence\n            if (!obj){\n                return obj;\n            }\n\n            return this.db.inflate(this.namespace, obj, context, options);\n        },\n\n        /**\n         * Returns an array of elements, created by proceeding through the whole sequence.\n         * @return {[type]} [description]\n         */\n        all: function(context, options){\n            var sequence = [];\n\n            var el = this.next().current(context, options);\n            while (el){\n                sequence.push(el);\n                el = this.next().current(context, options);\n            }\n\n            return sequence;\n        }\n    });\n\n    return Sequence;\n}\n","\nimport _ from 'lodash';\n\nfunction SequenceProvider(){\n\n    function Sequence(arr, db){\n        if (!db){\n            throw new Error('Sequences need to take a db as the second argument');\n        }\n\n        this.sequence = db.sequence('pages', arr);\n        this.db = db;\n    }\n\n    _.extend(Sequence.prototype, {\n        next: function(context){\n            this.sequence.next(context);\n            return this;\n        },\n\n        prev: function(context){\n            this.sequence.prev(context);\n            return this;\n        },\n\n        current: function(context){\n            var questionsArr,\n                page = this.sequence.current(context, {skip:['questions']}); // don't template the questions array\n\n            if (!page){\n                return page;\n            }\n\n            if (page.questions){\n                questionsArr = _.isArray(page.questions) ? page.questions : [page.questions];\n            } else {\n                questionsArr = [];\n            }\n\n            var questions = this.db.sequence('questions', questionsArr).all({\n                pagesData: page.data,\n                pagesMeta: page.$meta\n            });\n\n            // make sure we don't lose any thing in the orginal page\n            // @TODO: this seems extremely expensive. Is this really neccesary?\n            page = _.clone(page, true);\n            page.questions = questions;\n\n            return page;\n        }\n    });\n\n    return Sequence;\n}\n\nexport default SequenceProvider;\n","import angular from 'angular';\nimport stream from 'mithril-stream';\nimport _ from 'lodash';\n\nTaskProvider.$inject = ['$q','Database','Logger','QuestSequence','taskParse', 'dfltQuestLogger', '$rootScope'];\nfunction TaskProvider($q, Database, Logger, QuestSequence, parse, dfltQuestLogger,$rootScope){\n    function Task(script){\n        var self = this;\n        var settings = script.settings || {};\n        var global = $rootScope.global;\n\n        // save script for later use...\n        this.script = script;\n        this.db = new Database();\n        this.$logSource = stream();\n        this.logger = new Logger(this.$logSource, composeLoggerSettings(script, global), dfltQuestLogger);\n        this.q = $q.defer();\n\n        if (!_.isArray(script.sequence)) throw new Error('Task: no sequence was defined');\n\n        this.sequence = new QuestSequence(script.sequence, this.db);\n\n        this.promise = this.q.promise\n            .then(function(){\n                // check if there are unlogged questions and log them\n                _.each($rootScope.current.questions, function(quest){\n                    if(quest.$logged){ return true; }\n                    self.log(quest, {}, global);\n                    quest.$logged = true;\n                });\n                self.logger.end(true);\n            })['finally'](settings.onEnd || angular.noop); // end only after logging has finished (regardless of success)\n\n        parse(script, this.db);\n    }\n\n    // create metaDeta to add to post\n    function composeLoggerSettings(script, global){\n        var loggerSettings = _.assign({}, _.get(script, 'settings.logger'));\n        var metaData = _.assign({taskName:script.name}, global.$meta, loggerSettings.metaData);\n        loggerSettings.metaData = metaData;\n        return loggerSettings;\n    }\n\n    _.extend(Task.prototype, {\n        log: function(){\n            this.$logSource.call(null, [].slice.call(arguments));\n        },\n        current: function(){\n            var nextObj = this.sequence.current();\n\n            if (!nextObj){\n                this.end();\n            }\n\n            return nextObj;\n        },\n        next: function(){\n            return this.sequence.next();\n        },\n        prev: function(){\n            return this.sequence.prev();\n        },\n\n        end: function(){\n            this.q.resolve();\n        }\n    });\n\n    return Task;\n}\n\nexport default TaskProvider;\n","parseProvider.$inject = ['piConsole'];\nfunction parseProvider(piConsole){\n    function parse(script, db){\n        db.createColl('pages');\n        db.createColl('questions');\n\n        db.add('pages', script.pagesSets || []);\n        db.add('questions', script.questionsSets || []);\n\n        script.settings || (script.settings = {});\n\n        piConsole.setSettings(script.settings.DEBUG || {});\n    }\n\n    return parse;\n}\n\nexport default parseProvider;\n","import _ from 'lodash';\n\nfunction dfltQuestLogger(log, pageData, global){\n    global;\n    var logObj = _.extend({},pageData,log);\n    if (logObj.declined) {\n        logObj.response = log.responseObj = undefined;\n    }\n    return logObj;\n}\n\nexport default dfltQuestLogger;\n","export default post;\n\nfunction post(url, data){\n    return new Promise(function(resolve, reject){\n        var request = new XMLHttpRequest();\n        request.open('POST',url, true);\n        request.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');\n\n        request.onreadystatechange = function() {\n            if (this.readyState === 4) {\n                if (this.status >= 200 && this.status < 400) resolve(this.responseText);\n                else reject(new Error('Failed posting to: ' + url));\n            }\n        };\n\n        request.send(serialize(data));\n    });\n}\n\nfunction serialize(data) {\n    if (typeof data == 'string') return data;\n    return JSON.stringify(data);\n}\n","import _ from 'lodash';\nimport post from './post';\n\nexport default poster;\n\nfunction poster($logs, settings){\n    var cache = [];\n    var url = settings.url;\n\n    if (!url) return; // if we have no url, we can't log anything anyway\n\n    $logs.map(eachLog);\n    $logs.end.map(finalizefLogs);\n\n    function eachLog(log){\n        cache.push(log);\n        if (!settings.pulse) return;\n        if (cache.length >= settings.pulse) {\n            send(cache);\n            cache.length = 0;\n        }\n    }\n\n    function finalizefLogs(){\n        if (cache.length) send(cache);\n    }\n\n    function send(logs){\n        var serialize = settings.serialize || (settings.newServelet ? buildPost : buildPostOld);\n        var serializedPost = serialize(logs, settings.metaData);\n\n        return post(url,serializedPost)\n            .catch(function retry(){ return post(url, serializedPost); })\n            .catch(settings.error || _.noop);\n    }\n\n}\n\nexport function buildPost(logs, metaData){\n    var data = _.assign({ data:logs }, metaData);\n    return JSON.stringify(data);\n}\n\nexport function buildPostOld(logs, metaData){\n    var data = 'json=' + JSON.stringify(logs); // do not re-encode json\n    var meta = serialize(metaData);\n    return data + (meta ? '&'+meta : '');\n}\n\n\nfunction serialize(data){\n    var key, r = [];\n    for (key in data) r.push(encodeURIComponent(key) + '=' + encodeURIComponent(data[key]));\n    return r.join('&').replace(/%20/g, '+');\n}\n","import poster from './poster';\n\nexport default createLogs;\n\nfunction createLogs($sourceLogs, settings, defaultLogMap){\n    var $logs = $sourceLogs.map(applyMap(settings.logger || settings.logMap || defaultLogMap));\n\n    if (settings.poster) settings.poster($logs, settings, poster);\n    else poster($logs, settings);\n\n    return $logs;\n\n    // $logs is a stream of array, we want to apply them as args to the transform function\n    function applyMap(fn){\n        return function(args){ return fn.apply(null,args); };\n    }\n}\n","/**\n * a stopper\n */\n\nstopperProvider.$inject = ['timerNow'];\nfunction stopperProvider(now){\n    function Stopper(){\n        this.startTime = now();\n    }\n\n    Stopper.prototype.now = function(){\n        return now() - this.startTime;\n    };\n\n    return Stopper;\n}\n\nexport default stopperProvider;\n","/**\n * The piTimer directive lies dormant on its parent element\n * When \"start(options)\" is called it starts a timer\n *\n * options:\n * direction: up/down (default)\n * show: display counter\n * remove: remove counter when timer ends\n * duration: how long...\n *\n */\n\n\nimport _ from 'lodash';\nimport angular from 'angular';\n\ntimerController.$inject = ['$timeout','timerStopper'];\nfunction timerController($timeout, TimerStopper){\n    var ctrl = this;\n    var $scope = {}; // the local scope that we created (fake object for case we attempt to access scope before we set it...)\n    ctrl.start = timerStart;\n    ctrl.stop = timerStop;\n\n    function timerStart(options){\n        if (!_.isPlainObject(options)){\n            throw new Error('Timer options must be an object');\n        }\n\n        $scope = ctrl.getScope(); // get the local scope that we created\n\n        $scope.options = _.defaults(options, {\n            direction : 'down',\n            template : 'normal',\n            show : true,\n            removeOnEnd : true,\n            duration : 0 // in seconds\n        });\n\n        // translate duratio to ms\n        ctrl.stopper = new TimerStopper();\n        ctrl.targetTime = $scope.options.duration * 1000;\n\n        $scope.options.show && ctrl.show();\n\n        // activate the timer\n        tick();\n    }\n\n    function timerStop(){\n        var options = $scope.options || {};\n        $scope = ctrl.getScope(); // get the local scope that we created\n        $timeout.cancel(ctrl.timeoutId);\n        options.removeOnEnd && ctrl.remove();\n    }\n\n    function tick(){\n        // update scope\n        var INTERVAL = 100;\n        var options = $scope.options;\n        var now = ctrl.stopper.now();\n        var timeLeft = ctrl.targetTime - now;\n\n\n        if (now >= ctrl.targetTime){\n            $scope.$emit('timer-end');\n            options.removeOnEnd && ctrl.remove();\n            return;\n        }\n\n        // time to show and parse\n        var currentTime = options.direction === 'up' ? now : timeLeft;\n\n        // update scope with times\n        _.extend($scope, milisToTime(currentTime));\n        ctrl.timeoutId = $timeout(tick, Math.min(INTERVAL,timeLeft));\n        $scope.$emit('timer-tick');\n    }\n\n    function milisToTime(time){\n        var secs = Math.floor(time/1000);\n        var hours = Math.floor(secs / (60 * 60));\n\n        var divisor_for_minutes = secs % (60 * 60);\n        var minutes = Math.floor(divisor_for_minutes / 60);\n\n        var divisor_for_seconds = divisor_for_minutes % 60;\n        var seconds = Math.ceil(divisor_for_seconds);\n\n        var obj = {\n            current: time,\n            hours: hours,\n            minutes: minutes,\n            seconds: seconds,\n            milis: time % 1000\n        };\n        return obj;\n    }\n}\n\ntimerDirective.$inject = ['$compile'];\nfunction timerDirective($compile){\n    return {\n        controller: timerController,\n        priority: 400,\n        link: function($scope, $element,$attr,ctrl){\n            var template = '<div class=\"pi-timer well well-sm text-center\" style=\"font-family: monospace;\">{{minutes}}:{{zeroPad(seconds)}}</div>';\n            var $timerElement;\n            var localScope = $scope.$new();\n\n            ctrl.show = show;\n            ctrl.remove = remove;\n            ctrl.getScope = function(){return localScope;};\n\n            localScope.zeroPad = function pad(n){return n<10 ? '0'+n : n;};\n            $scope.$on('$destroy',remove);\n\n            function show(){\n                $timerElement = angular.element(template);\n                $element.prepend($timerElement);\n                $compile($timerElement.contents())(localScope);\n            }\n\n            function remove(){\n                $timerElement && $timerElement.remove();\n                $timerElement = null;\n            }\n        }\n    };\n}\n\nexport default timerDirective;\n","export default preload.bind(null, preloadImg);\n\n/**\n * preloadFn :: (data, cb) => SideEffect\n * images :: [url]\n **/\nfunction preload(preloadFn, images){\n    var current = 0;\n    // start four load recursions so that we have max 4 preloaded in parralel\n    next();\n    next();\n    next();\n    next();\n\n    function next(){ if (current < images.length) preloadFn(images[current++], next); }\n}\n\nfunction preloadImg(url, cb){\n    var img = new Image();\t// create img object\n    img.onload = cb;\n    img.onerror = cb;\n    img.src = url;\n}\n","\n\nimport _ from 'lodash';\nimport template from './modal.html';\n\nimport angular from 'angular';\n\nmodalConstructor.$inject = ['$rootScope', '$rootElement', '$compile', '$q', '$document'];\nfunction modalConstructor($rootScope, $rootElement, $compile, $q, $document){\n    var $element, $scope, deferred;\n    var $backDrop = angular.element('<div class=\"modal-backdrop in\"/>');\n\n    this.open = modalOpener;\n    this.close = modalCleanup;\n\n    function modalCleanup(){\n        if ($element){\n            $element.remove();\n        }\n\n        if ($scope){\n            $scope.$destroy();\n        }\n\n        if (deferred){\n            deferred.resolve();\n        }\n\n        $backDrop.remove();\n        $document.off('keydown', modalCleanup);\n        $rootElement.removeClass('modal-open');\n    }\n\n    function modalOpener(options){\n        var context = options.context || {};\n\n        // close any existing modals\n        modalCleanup();\n\n        // create deferred\n        deferred = $q.defer();\n\n        // create new scope\n        $scope = (options.$scope || $rootScope).$new();\n\n        // set up scope methods\n        $scope.close = modalCleanup;\n        $document.on('keydown', modalCleanup);\n\n\n        // set scope texts + template\n        $scope.header = _.template(options.header)(context);\n        $scope.body = _.template(options.body)(context);\n        $scope.button = _.template(options.button)(context);\n\n        // create new element\n        $element = angular.element(template);\n        $rootElement.addClass('modal-open');\n\n        // compile and activate\n        $rootElement.prepend($backDrop);\n        $rootElement.prepend($element);\n        $compile($element.contents())($scope);\n        $scope.$digest();\n\n        return deferred.promise;\n    }\n}\n\nexport default modalConstructor;","/**\n * This is the default controller for all questions.\n * It exposes the local scope, and a `value` method that the harvester can use.\n */\n\n\nimport _ from 'lodash';\n\nexport default questController;\n\nquestController.$inject = ['$scope', 'timerStopper', '$parse', '$attrs','piConsole', 'piInvoke', '$rootScope','questGuid'];\nfunction questController($scope, Stopper, $parse, $attr, piConsole, invoke, $rootScope,guid){\n    var self = this;\n    var log;\n    var data;\n    var defaults = {\n        dflt: NaN,\n        data: $scope.data\n    };\n\n    this.scope = $scope;\n    this.stopper = new Stopper();\n\n\n    this.registerModel = registerModel;\n\n    /**\n     * Listen for quest events\n     */\n    $scope.$on('quest:submit', function(event){\n        event.preventDefault();\n        log.declined = undefined;\n        log.submitLatency = self.stopper.now();\n        invoke(data.onSubmit, {log:log});\n    });\n\n    $scope.$on('quest:decline', function(event){\n        event.preventDefault();\n        log.declined = true;\n        log.submitLatency = self.stopper.now();\n        invoke(data.onDecline, {log:log});\n    });\n\n    $scope.$on('quest:timeout', function(event){\n        event.preventDefault();\n        log.timeout = true;\n        invoke(data.onTimeout, {log:log});\n    });\n\n\n    /**\n     * Get the model and options from the directive\n     * @param  {Object} ngModel\n     * @param  {Object} options\n     */\n    function registerModel(ngModel, options){\n        options = _.defaults(options || {}, defaults);\n        data = options.data;\n\n        var ngModelGet = $parse($attr.ngModel);\n        var dfltValue = data.hasOwnProperty('dflt') ? data.dflt : options.dflt;\n\n        // make model accesable from within scope\n        $scope.model = ngModel;\n\n        // has to be evaluated in the context of the parent scope because we're assuming that the quest directives have an isolated scope\n        log = ngModelGet($scope.$parent);\n\n        // init log\n        // ********\n        // create log if it doesn't exist yet\n        if (_.isUndefined(log)){\n            log = {};\n            ngModelGet.assign($scope.$parent, log);\n        } else {\n            piConsole(['question']).warn('This question has already been in use: \"' + log.name + '\"');\n        }\n\n        if (!data.name){\n            piConsole(['question']).warn('There is a question without a name! I\\'d tell you what it is, but it has no name!');\n        }\n\n        // expose all the stuff...\n        self.log = ngModel.$modelValue = log;\n\n        _.defaults(log,{\n            name: data.name,\n            response: dfltValue,\n            serial: guid()\n        });\n\n        $scope.response = ngModel.$viewValue = log.response;\n\n        // model --> view\n        // should probably never be called (since our model is an object and not a primitive)\n        ngModel.$formatters.push(function(modelValue) {\n            return modelValue.response;\n        });\n\n        // view --> model\n        ngModel.$parsers.push(function(viewValue){\n            var latency = self.stopper.now();\n\n            log.response = viewValue;\n            log.latency = latency;\n\n            // if this is the first change\n            if (!log.pristineLatency){\n                log.pristineLatency = latency;\n            }\n\n            return log;\n        });\n\n        $scope.$watch('response',function(newValue, oldValue /*, scope*/){\n            if (!_.isEqual(newValue, oldValue)){\n                ngModel.$setViewValue(newValue);\n                invoke(data.onChange, {log:log});\n            }\n        });\n\n        $scope.$on('$destroy', function(){\n            invoke(data.onDestroy, {log:log});\n        });\n\n        if (data.correct) {\n            ngModel.$parsers.push(correctValidator);\n            data.response = correctValidator(this.log);\n        }\n\n        invoke(data.onCreate, {log:log});\n\n        function correctValidator(value) {\n            var response = value.response;\n            var correctValue = data.correctValue;\n\n            // make sure numbers are always treated as strings\n            _.isNumber(correctValue) && (correctValue+='');\n            _.isNumber(response) && (response+='');\n\n            if (_.isEqual(correctValue, response)) {\n                ngModel.$setValidity('correct', true);\n            } else {\n                ngModel.$setValidity('correct', false);\n            }\n\n            return value;\n        }\n\n    }\n}\n","export default guidFactory;\n\nfunction guidFactory(){\n    var id = 0;\n    return function guid(){ return id++; };\n}\n","/**\n * Main tag for piQuest component.\n * All you need in order to use it is set a script in the $rootScope and insert the tag.\n *\n * This directive is responsible for:\n *\t\t1. Creating the task object.\n *\t\t2. Relaying pages from the sequence to piqPage.\n *\t\t3. For now, deal with the end of a task (redirect, callback, broadcast etc. - later this should move into the task)\n *\n * @name piQuest\n */\nimport _ from 'lodash';\nimport angular from 'angular';\nimport template from './piQuest.html';\n\nexport default directive;\n\nvar jqLite = angular.element;\n\npiQuestCtrl.$inject = ['$scope','$rootScope','QuestTask','templateDefaultContext', 'mixerDefaultContext', 'piModal'];\nfunction piQuestCtrl($scope, $rootScope, QuestTask, templateDefaultContext, mixerDefaultContext, piModal){\n    var task = new QuestTask($scope.script);\n    var defaultContext; // for templates and the mixer\n    var global = $rootScope.global; // setup in app.run\n    var current = $rootScope.current || {}; // setup in taskDirective\n\n    this.task = task;\n    this.timerSetup = timerSetup;\n\n    current.questions || (current.questions = {});\n\n    // create default context\n    defaultContext = {\n        global: global,\n        current: current,\n        questions: current.questions\n    };\n\n    // set default contexts\n    _.extend(templateDefaultContext,defaultContext);\n    _.extend(mixerDefaultContext,defaultContext);\n\n    // setup the first page\n    task.next();\n\n    $scope.$on('quest:next', next);\n    $scope.$on('quest:prev', prev);\n\n    $scope.$on('quest:log', function(event, log, pageData){\n        task.log(log, pageData, $scope.global);\n    });\n\n    function next(event, target){\n        task.next(target);\n        $scope.$emit('quest:newPage');\n    }\n\n    function prev(event, target){\n        task.prev(target);\n        $scope.$emit('quest:newPage');\n    }\n\n    function timerSetup (timerCtrl) {\n        var settings = _.get($scope, 'script.settings.timer');\n        if (!settings){\n            return;\n        }\n\n        timerCtrl.start(settings);\n        timerCtrl.getScope().$on('timer-end', function(){\n            var message = settings.message;\n\n            // proceed\n            if (message){\n                // create message object out of string\n                _.isString(message) && (message = {body: message});\n\n                // extend message object with scope and context\n                _.defaults(message, {\n                    header: 'Timer Done',\n                    $context: defaultContext\n                });\n\n                // activate message and only then proceed\n                piModal.open(message).then(timerProceed);\n            } else {\n                // if there is no messgae proceed imidiately\n                timerProceed();\n            }\n\n            function timerProceed() {\n                task.end();\n            }\n\n        });\n\n        $scope.$on('$destroy', _.bind(timerCtrl.stop, timerCtrl));\n    }\n\n}\n\ndirective.$inject = ['$compile', '$animate','$injector','piConsole'];\nfunction directive($compile, $animate, $injector, piConsole){\n    return {\n        controller: piQuestCtrl,\n        terminal:true,\n        replace:true,\n        template: '<div pi-timer></div>',\n        require: ['piQuest','piTimer'],\n        link: function(scope, parentElement, attr, ctrls) {\n            var ctrl = ctrls[0];\n            var task = ctrl.task;\n            var piTimer = ctrls[1];\n            var currentScope;\n            var currentElement;\n            var previousElement;\n\n            ctrl.timerSetup(piTimer);\n\n            scope.$on('quest:refresh', refresh); // just refresh the object\n            scope.$on('quest:newPage', newPage); // new element, new object and animation\n            newPage();\n\n            function cleanupLastPage() {\n                if(previousElement) {\n                    previousElement.remove();\n                    previousElement = null;\n                }\n                if(currentScope) {\n                    currentScope.$destroy();\n                    currentScope = null;\n                }\n                if(currentElement) {\n                    $animate.leave(currentElement, function() {\n                        previousElement = null;\n                    });\n                    previousElement = currentElement;\n                    currentElement = null;\n                }\n            }\n\n            function newPage(){\n                var page = task.current();\n\n                if (page){\n                    var newScope = scope.$new();\n                    var tempElm = jqLite(template); // create a new element here so we can add the animation classes before linking\n\n                    newScope.page = page;\n                    addAnimations(tempElm, page.animate);\n\n                    // first send away the previous element (if it exists)\n                    cleanupLastPage();\n\n                    // enter: new element\n                    currentElement = $compile(tempElm)(newScope);\n\n                    $animate.enter(currentElement, parentElement);\n\n                    currentScope = newScope;\n                    currentScope.$emit('quest:updated');\n                } else {\n                    cleanupLastPage();\n                }\n            }\n\n            function refresh(){\n                currentScope.page = task.current();\n            }\n\n            function addAnimations(element, animationsStr){\n                if (!animationsStr){\n                    return;\n                }\n\n                var animations = animationsStr.split(' ');\n\n                _.each(animations, function(animation){\n                    // Make sure that this animation exists\n                    if (!$injector.has('.' + animation + '-animation')){\n                        piConsole(['page','animation']).error('Unknown animation type: \"' + animation + '\"');\n                    }\n\n                });\n\n                element.addClass(animationsStr);\n            }\n        }\n    };\n}\n","/**\n * Main tag for piqPage component.\n * Used automaticaly from within the piQuest directive.\n *\n * This directive is responsible for:\n * 1. Displaying page questions.\n * 2. Detecting the end of a page (submit, TO).\n * 3. Harvesting information from the questions.\n * 4. Suplying information to the logger.\n *\n * @name piqPage\n  */\nimport template from './piqPage.html';\nimport _ from 'lodash';\nimport angular from 'angular';\n\nexport default directive;\n\npiqPageCtrl.$inject = ['$scope','$timeout', '$rootScope', 'piModal'];\nfunction piqPageCtrl($scope,$timeout, $rootScope, piModal){\n    var self = this;\n\n    $scope.global = $rootScope.global;\n    $scope.current = $rootScope.current;\n\n    /**\n     * Harvest piqPage questions, and log them.\n     * by default logging is deferred to the end (so that we can go back to questions...)\n     * This can be changed by setting lognow to true (page.lognow)\n     */\n    this.harvest = function(lognow){\n        var questions = $scope.current.questions;\n\n        _.each($scope.page.questions, function(q){\n            // don't log if we don't have a name or if lognow is'nt true\n            if (!q.name || !(lognow || q.lognow)){return;}\n\n            // get the appropriate log object\n            var log = questions[q.name];\n\n            // don't log if this has already been logged\n            if (log.$logged){return;}\n\n            // emit to quest directive\n            $scope.$emit('quest:log', log, self.log);\n            log.$logged = true;\n        });\n    };\n\n    /**\n     * Proceed to next page.\n     *\n     * @name submit\n     * @param  {Boolean} skipValidation [Should skip validation of the form before submitting?]\n     */\n    $scope.submit = function(skipValidation){\n\n        var valid = $scope.pageForm.$valid;\n\n        // mark this attempt for submitting\n        // useful for validation...\n        $scope.submitAttempt = true;\n\n        if (!valid && skipValidation !== true){\n            return true;\n        }\n\n        // broadcast to the quest controller\n        // so that it can set submit latency\n        $scope.$broadcast('quest:submit');\n\n        self.proceed();\n\n        // emit to the piQuest directive so that it knows to advance to the next page\n        $scope.$emit('quest:next');\n    };\n\n    /**\n     * Decline to answer. mark all questions on this page as declined\n     */\n    $scope.decline = function($event){\n        var $el = angular.element($event.target);\n        var notDoubleClick = (this.page.decline !== 'double');\n\n        // decline and proceed to next page\n        // unless this is a double style decline and then simply set \"active\".\n        if (notDoubleClick || $el.hasClass('active')){\n            // broadcast to the quest controller (so that it marks logs as declined and marks decline time)\n            $scope.$broadcast('quest:decline');\n            self.proceed();\n            $scope.$emit('quest:next');\n        } else {\n            $el.addClass('active');\n        }\n    };\n\n    /**\n     * Go back to previous page.\n     */\n    $scope.prev = function(){\n        // broadcast to the quest controller\n        self.proceed();\n        $scope.$emit('quest:prev');\n    };\n\n\n    /**\n     * Wraps up page setup\n     * Closes timer stuff.\n     * Harvests if needed.\n     */\n    this.proceed = function(){\n\n        // remove timeout if needed\n        self.timer.stop();\n\n        // by default, harvest after every page..\n        self.harvest($scope.page.lognow);\n    };\n\n    this.setup = pageSetup;\n\n    // refresh page on question change (deep watch)\n    // should refresh this directive without animating the whole page in...\n    $scope.$watch('current.questions', pageRefresh, true);\n\n    // listen for auto submit calls (from textDirective etc.)\n    $scope.$on('quest:submit:now', function(){\n        $scope.submit();\n    });\n\n    // refresh $scope.page\n    // indirectly triggers pageSetup\n    function pageRefresh(){\n        $scope.$emit('quest:refresh');\n    }\n\n    function pageSetup(timer){\n        var newPage = $scope.page;\n        self.timer = timer;\n\n        // set the page log object\n        self.log = {\n            name: newPage.name,\n            startTime: +new Date()\n        };\n\n        // If there is a timeout set, submit when it runs out.\n        if (newPage.timer){\n            timer.start(newPage.timer);\n            timer.getScope().$on('timer-end', timerEnd);\n        }\n\n        function timerEnd(){\n            var message = newPage.timer.message; // timer must be defined to get here...\n            var context;\n            // mark logs as timeout\n            self.log.timeout = true;\n            $scope.$broadcast('quest:timeout');\n\n            // proceed\n            if (message){\n                // create context for message tempates\n                context = {\n                    pagesMeta: newPage.$meta,\n                    pagesData: newPage.data,\n                    global: $rootScope.global,\n                    current: $rootScope.current\n                };\n\n                // create message object out of string\n                _.isString(message) && (message = {body: message});\n\n                // extend message object with scope and context\n                _.defaults(message, {\n                    header: 'Timer Done',\n                    $context: context,\n                    $scope: $scope\n                });\n\n                // activate message and only then proceed\n                piModal.open(message).then(timerProceed);\n            } else {\n                // if there is no messgae proceed imidiately\n                timerProceed();\n            }\n        }\n\n        function timerProceed(){\n            var submit = newPage.timer.submitOnEnd || _.isUndefined(newPage.timer.submitOnEnd);\n            submit && $scope.submit(true);\n        }\n    }\n}\n\ndirective.$inject = ['$window'];\nfunction directive($window){\n    return {\n        replace: true,\n        controller: piqPageCtrl,\n        template:template,\n        require: ['piqPage','piTimer'],\n        link: function($scope, $el, $attr, $ctrl){\n            var page = $scope.page;\n            $window.scrollTo(0,0);\n            // setup timer\n            $ctrl[0].setup($ctrl[1]); \n\n            // setup page validation\n            if (_.isFunction(page.pageValidation)){\n                $scope.$watch(function(){\n                    $scope.pageForm.$setValidity('pageValidation', page.pageValidation(page, $scope.current));\n                });\n            }\n        }\n    };\n}\n","/*\n * The directive for creating the generic question layout (stub, surrounding etc.).\n */\n\n\nvar PREFIX = 'quest';\nimport template from './wrapper.html';\nimport _ from 'lodash';\n\nfunction capitaliseFirstLetter(string){\n    return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\ndirective.$inject = ['$compile', '$injector'];\nfunction directive($compile, $injector){\n    return {\n        replace: true,\n        template:template,\n        priority: 5, // Allows the wrapper to use the same scope as the questions\n        scope:{\n            data: '=questData',\n            current: '=questCurrent'\n        },\n        link: function(scope,element) {\n            var type = scope.data.type || 'text';\n            var questElement = element.children().eq(2);\n            var attrName = PREFIX + capitaliseFirstLetter(type);\n\n            // Make sure that this directive exists\n            if (!$injector.has(attrName + 'Directive')){\n                throw new Error ('Unknown question type: \"' + type + '\"');\n            }\n\n            // snake case the attr name\n            attrName = _.kebabCase(attrName);\n\n            // add the appropriate attribute to the directive and compile it\n            questElement.attr(attrName,true);\n            $compile(questElement)(scope);\n        }\n\n    };\n}\n\nexport default directive;\n","/*\n * The directive for creating text inputs.\n */\n\n// This is the only way to get a non js file relatively\nimport textTemplate from './text.html';\nimport textareaTemplate from './textarea.html';\nimport angular from 'angular';\n\nfunction textDirective(){\n    return {\n        replace: true,\n        template: function(el,attr){\n            return 'questText' in attr ? textTemplate : textareaTemplate;\n        },\n        require: ['form', 'ngModel'],\n        controller: 'questController',\n        controllerAs: 'ctrl',\n        scope:{\n            data: '=questData'\n        },\n        link: function(scope, element, attr, ctrls) {\n            var form = ctrls[0];\n            var ngModel = ctrls[1];\n            var ctrl = scope.ctrl;\n            var data = scope.data;\n\n            scope.form = form;\n            scope.maxlengthLimit = maxlengthLimit;\n\n            ctrl.registerModel(ngModel, {\n                dflt: ''\n            });\n\n            data.autoSubmit && element.bind('keydown keypress', function (event) {\n                if(event.which === 13) {\n                    scope.$apply(function(){\n                        scope.$emit('quest:submit:now');\n                    });\n                    event.preventDefault();\n                }\n            });\n\n            // limit the length of the input string\n            // essentially a formatter for the input ngModel\n            function maxlengthLimit($event){\n                var $input = angular.element($event.target);\n                var response = $input.val();\n                var limit = data.maxlength || response.length; // in case maxlength isn't defined...\n                // update the scope\n                scope.response = response.slice(0,limit);\n            }\n        }\n    };\n}\n\nexport default textDirective;\n","import _ from 'lodash';\n\nselectMixerProvider.$inject = ['randomizeShuffle', 'mixerRecursive'];\nfunction selectMixerProvider(shuffle, mixer){\n\n    function selectMixer(answersArr, options){\n        var answers = mixer(answersArr);\n\n        // inject values\n        answers = _.map(answers, function(answer, index){\n\n            if (!_.isPlainObject(answer)){\n                answer = {text:answer};\n            }\n\n            if (_.isUndefined(answer.value)){\n                answer.value = options.numericValues ? index + 1 : answer.text;\n            }\n            return answer;\n        });\n\n        if (options.reverse){\n            answers = _(answers).reverse().value();\n        }\n\n        if (options.randomize){\n            answers = shuffle(answers);\n        }\n\n        _.each(answers, function(answer,index){\n            answer.order = index;\n        });\n\n        return answers;\n    }\n\n    return selectMixer;\n}\n\nexport default selectMixerProvider;\n","/*\n * The directive for creating dropdown inputs.\n * scope.response is the value of the chosen response\n */\n\nimport template from './dropdown.html';\n\ndirective.$inject = ['questSelectMixer','$timeout'];\nfunction directive(mixer,$timeout){\n    return {\n        replace: true,\n        template:template,\n        require: ['ngModel','form'],\n        controller: 'questController',\n        controllerAs: 'ctrl',\n        scope:{\n            data: '=questData'\n        },\n        link: function(scope, element, attr, ctrls) {\n            var ngModel = ctrls[0];\n            var ctrl = scope.ctrl;\n\n            scope.form = ctrls[1];\n\n            ctrl.registerModel(ngModel, {\n                dflt: NaN\n            });\n\n            // render quest if needed\n            scope.quest = {\n                answers: mixer(scope.data.answers || [], scope.data)\n            };\n\n            // createChooseText\n            scope.chooseText = 'chooseText' in scope.data && scope.data.chooseText;\n\n            /**\n             * Manage auto submit\n             */\n            scope.autoSubmit = function(){\n                $timeout(function(){\n                    scope.$emit('quest:submit:now');\n                });\n            };\n        }\n    };\n}\n\nexport default directive;\n","/*\n * The directive for creating selectOne inputs.\n *\n * scope.response is the value of the chosen response\n * scope.responseObj is the full answer object or undefined\n */\n\n\nimport angular from 'angular';\nimport template from './selectOne.html';\n\ndirective.$inject = ['questSelectMixer', 'buttonConfig', '$compile'];\nfunction directive(mixer, buttonConfig, $compile){\n    return {\n        replace: true,\n        require: ['ngModel'],\n        controller: 'questController',\n        controllerAs: 'ctrl',\n        scope:{\n            data: '=questData'\n        },\n        link: function(scope, element, attr, ctrls) {\n            var ngModel = ctrls[0];\n            var ctrl = scope.ctrl;\n            var data = scope.data;\n\n            // compile the template (this is currently the only way to use a scope dependent template)\n            element.html(template);\n            $compile(element.contents())(scope);\n\n            ctrl.registerModel(ngModel, {\n                dflt: NaN\n            });\n\n            // render quest if needed\n            scope.quest = {\n                answers: mixer(scope.data.answers || [], scope.data)\n            };\n\n            // update controller with the response\n            scope.$watch('responseObj',function(newValue, oldValue){\n                if (newValue === oldValue){\n                    return;\n                }\n\n                scope.response = newValue && newValue.value;\n            });\n\n            /**\n             * Required\n             * Since we don't control the ngModel element any more we need to manually create a required validation\n             * we don't implement $observe since in our case required is static\n             */\n\n            if (scope.data.required){\n                ngModel.$formatters.push(requiredValidator);\n                ngModel.$parsers.unshift(requiredValidator);\n                requiredValidator(scope.response); // check validity at the begining - without need for change...\n            }\n\n            /**\n             * Compute list styles\n             */\n\n            // back support for \"buttons\"\n            // @DEPRICATED\n            if (scope.data.buttons){\n                scope.data.style = 'horizontal';\n            } else {\n                scope.data.style == 'horizontal' && (scope.data.buttons = true);\n            }\n\n            // some specific css added to the list\n            scope.listCss = {};\n            scope.listItemCss = {};\n\n            switch (data.style){\n                case 'horizontal' :\n                    scope.listClass = 'btn-group btn-group-justified btn-group-lg';\n                    scope.listItemClass = 'btn btn-select';\n                    break;\n                case 'multiButtons':\n                    scope.listClass = 'btn-toolbar';\n                    scope.listItemClass = 'btn  btn-select';\n                    scope.listCss.lineHeight = 2.8;\n                    break;\n                case 'list':\n                    /* fall through */\n                default:\n                    scope.listClass = 'list-group';\n                    scope.listItemClass = 'list-group-item';\n            }\n\n            data.minWidth && (scope.listItemCss.minWidth = data.minWidth);\n\n            /**\n             * Manage auto submit\n             * @param  {event} e [description]\n             */\n            scope.autoSubmit = function(e){\n                if (!scope.data.autoSubmit){\n                    return;\n                }\n\n                var isActive = angular.element(e.currentTarget).hasClass(buttonConfig.activeClass);\n\n                if (isActive){\n                    // this whole function happens within a digest cycle, so we don't need to $apply\n                    scope.$emit('quest:submit:now');\n                }\n            };\n\n            function requiredValidator(value){\n                var ctrl = ngModel;\n                if (ctrl.$isEmpty(value)) {\n                    ctrl.$setValidity('required', false);\n                    return;\n                } else {\n                    ctrl.$setValidity('required', true);\n                    return value;\n                }\n            }\n        }\n    };\n}\n\nexport default directive;\n","/*\n * The directive for creating selectMulti inputs.\n */\n\nimport _ from 'lodash';\n\n// This is the only way to get a non js file relatively\nimport template from './selectMulti.html';\n\ndirective.$inject = ['questSelectMixer'];\nfunction directive(mixer){\n    return {\n        replace: true,\n        template:template,\n        require: ['^?piqPage', 'ngModel'],\n        controller: 'questController',\n        controllerAs: 'ctrl',\n        scope:{\n            data: '=questData'\n        },\n        link: function(scope, element, attr, ctrls) {\n            var ctrl = scope.ctrl;\n            var ngModel = ctrls[1];\n            var data = scope.data;\n\n            ctrl.registerModel(ngModel, {\n                dflt: []\n            });\n\n            ngModel.$isEmpty = function(){\n                return _.isEmpty(ngModel.$viewValue);\n            };\n\n            // render questions\n            scope.quest = {\n                answers: mixer(scope.data.answers || [], scope.data)\n            };\n\n            // mark the chosen questions\n            _.each(scope.quest.answers, function(answer){\n                // mark it chosen if\n                if (~_.indexOf(scope.response, answer.value)){\n                    answer.chosen = true;\n                }\n            });\n\n            /**\n             * Compute list styles\n             */\n\n            // back support for \"buttons\"\n            // @DEPRICATED\n            if (scope.data.buttons){\n                scope.data.style = 'horizontal';\n            } else {\n                scope.data.style == 'horizontal' && (scope.data.buttons = true);\n            }\n\n            // some specific css added to the list\n            scope.listCss = {};\n            scope.listItemCss = {};\n\n            switch (data.style){\n                case 'horizontal' :\n                    scope.listClass = 'btn-group btn-group-justified btn-group-lg';\n                    scope.listItemClass = 'btn btn-select';\n                    break;\n                case 'multiButtons':\n                    scope.listClass = 'btn-toolbar';\n                    scope.listItemClass = 'btn  btn-select';\n                    scope.listCss.lineHeight = 2.8;\n                    break;\n                case 'list':\n                    /* fall through */\n                default:\n                    scope.listClass = 'list-group';\n                    scope.listItemClass = 'list-group-item';\n            }\n\n            data.minWidth && (scope.listItemCss.minWidth = data.minWidth);\n\n            // we need to implement this manually as ngRequired returns undefined instead of an array\n            if (data.required){\n                ngModel.$parsers.unshift(requiredValidator);\n                requiredValidator(ngModel.$viewValue);\n            }\n\n\n            // update controller with the response\n            scope.$watch('quest.answers',function(newValue, oldValue){\n                if (newValue === oldValue){\n                    return;\n                }\n\n                // get chosen answers\n                scope.response = _(newValue)\n                    .filter(function(answer){return answer.chosen;})\n                    .pluck('value')\n                    .value();\n            },true); // deep watch\n\n            function requiredValidator(value){\n                ngModel.$setValidity('required', !ngModel.$isEmpty(value));\n                return value;\n            }\n        }\n    };\n}\n\nexport default directive;\n","\nvar NativeCustomEvent = global.CustomEvent;\n\nfunction useNative () {\n  try {\n    var p = new NativeCustomEvent('cat', { detail: { foo: 'bar' } });\n    return  'cat' === p.type && 'bar' === p.detail.foo;\n  } catch (e) {\n  }\n  return false;\n}\n\n/**\n * Cross-browser `CustomEvent` constructor.\n *\n * https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent.CustomEvent\n *\n * @public\n */\n\nmodule.exports = useNative() ? NativeCustomEvent :\n\n// IE >= 9\n'function' === typeof document.createEvent ? function CustomEvent (type, params) {\n  var e = document.createEvent('CustomEvent');\n  if (params) {\n    e.initCustomEvent(type, params.bubbles, params.cancelable, params.detail);\n  } else {\n    e.initCustomEvent(type, false, false, void 0);\n  }\n  return e;\n} :\n\n// IE <= 8\nfunction CustomEvent (type, params) {\n  var e = document.createEventObject();\n  e.type = type;\n  if (params) {\n    e.bubbles = Boolean(params.bubbles);\n    e.cancelable = Boolean(params.cancelable);\n    e.detail = params.detail;\n  } else {\n    e.bubbles = false;\n    e.cancelable = false;\n    e.detail = void 0;\n  }\n  return e;\n}\n","'use strict';\n\nvar customEvent = require('custom-event');\nvar eventmap = require('./eventmap');\nvar doc = global.document;\nvar addEvent = addEventEasy;\nvar removeEvent = removeEventEasy;\nvar hardCache = [];\n\nif (!global.addEventListener) {\n  addEvent = addEventHard;\n  removeEvent = removeEventHard;\n}\n\nmodule.exports = {\n  add: addEvent,\n  remove: removeEvent,\n  fabricate: fabricateEvent\n};\n\nfunction addEventEasy (el, type, fn, capturing) {\n  return el.addEventListener(type, fn, capturing);\n}\n\nfunction addEventHard (el, type, fn) {\n  return el.attachEvent('on' + type, wrap(el, type, fn));\n}\n\nfunction removeEventEasy (el, type, fn, capturing) {\n  return el.removeEventListener(type, fn, capturing);\n}\n\nfunction removeEventHard (el, type, fn) {\n  var listener = unwrap(el, type, fn);\n  if (listener) {\n    return el.detachEvent('on' + type, listener);\n  }\n}\n\nfunction fabricateEvent (el, type, model) {\n  var e = eventmap.indexOf(type) === -1 ? makeCustomEvent() : makeClassicEvent();\n  if (el.dispatchEvent) {\n    el.dispatchEvent(e);\n  } else {\n    el.fireEvent('on' + type, e);\n  }\n  function makeClassicEvent () {\n    var e;\n    if (doc.createEvent) {\n      e = doc.createEvent('Event');\n      e.initEvent(type, true, true);\n    } else if (doc.createEventObject) {\n      e = doc.createEventObject();\n    }\n    return e;\n  }\n  function makeCustomEvent () {\n    return new customEvent(type, { detail: model });\n  }\n}\n\nfunction wrapperFactory (el, type, fn) {\n  return function wrapper (originalEvent) {\n    var e = originalEvent || global.event;\n    e.target = e.target || e.srcElement;\n    e.preventDefault = e.preventDefault || function preventDefault () { e.returnValue = false; };\n    e.stopPropagation = e.stopPropagation || function stopPropagation () { e.cancelBubble = true; };\n    e.which = e.which || e.keyCode;\n    fn.call(el, e);\n  };\n}\n\nfunction wrap (el, type, fn) {\n  var wrapper = unwrap(el, type, fn) || wrapperFactory(el, type, fn);\n  hardCache.push({\n    wrapper: wrapper,\n    element: el,\n    type: type,\n    fn: fn\n  });\n  return wrapper;\n}\n\nfunction unwrap (el, type, fn) {\n  var i = find(el, type, fn);\n  if (i) {\n    var wrapper = hardCache[i].wrapper;\n    hardCache.splice(i, 1); // free up a tad of memory\n    return wrapper;\n  }\n}\n\nfunction find (el, type, fn) {\n  var i, item;\n  for (i = 0; i < hardCache.length; i++) {\n    item = hardCache[i];\n    if (item.element === el && item.type === type && item.fn === fn) {\n      return i;\n    }\n  }\n}\n","'use strict';\n\nvar cache = {};\nvar start = '(?:^|\\\\s)';\nvar end = '(?:\\\\s|$)';\n\nfunction lookupClass (className) {\n  var cached = cache[className];\n  if (cached) {\n    cached.lastIndex = 0;\n  } else {\n    cache[className] = cached = new RegExp(start + className + end, 'g');\n  }\n  return cached;\n}\n\nfunction addClass (el, className) {\n  var current = el.className;\n  if (!current.length) {\n    el.className = className;\n  } else if (!lookupClass(className).test(current)) {\n    el.className += ' ' + className;\n  }\n}\n\nfunction rmClass (el, className) {\n  el.className = el.className.replace(lookupClass(className), ' ').trim();\n}\n\nmodule.exports = {\n  add: addClass,\n  rm: rmClass\n};\n","'use strict';\n\nvar emitter = require('contra/emitter');\nvar crossvent = require('crossvent');\nvar classes = require('./classes');\nvar doc = document;\nvar documentElement = doc.documentElement;\n\nfunction dragula (initialContainers, options) {\n  var len = arguments.length;\n  if (len === 1 && Array.isArray(initialContainers) === false) {\n    options = initialContainers;\n    initialContainers = [];\n  }\n  var _mirror; // mirror image\n  var _source; // source container\n  var _item; // item being dragged\n  var _offsetX; // reference x\n  var _offsetY; // reference y\n  var _moveX; // reference move x\n  var _moveY; // reference move y\n  var _initialSibling; // reference sibling when grabbed\n  var _currentSibling; // reference sibling now\n  var _copy; // item used for copying\n  var _renderTimer; // timer for setTimeout renderMirrorImage\n  var _lastDropTarget = null; // last container item was over\n  var _grabbed; // holds mousedown context until first mousemove\n\n  var o = options || {};\n  if (o.moves === void 0) { o.moves = always; }\n  if (o.accepts === void 0) { o.accepts = always; }\n  if (o.invalid === void 0) { o.invalid = invalidTarget; }\n  if (o.containers === void 0) { o.containers = initialContainers || []; }\n  if (o.isContainer === void 0) { o.isContainer = never; }\n  if (o.copy === void 0) { o.copy = false; }\n  if (o.copySortSource === void 0) { o.copySortSource = false; }\n  if (o.revertOnSpill === void 0) { o.revertOnSpill = false; }\n  if (o.removeOnSpill === void 0) { o.removeOnSpill = false; }\n  if (o.direction === void 0) { o.direction = 'vertical'; }\n  if (o.ignoreInputTextSelection === void 0) { o.ignoreInputTextSelection = true; }\n  if (o.mirrorContainer === void 0) { o.mirrorContainer = doc.body; }\n\n  var drake = emitter({\n    containers: o.containers,\n    start: manualStart,\n    end: end,\n    cancel: cancel,\n    remove: remove,\n    destroy: destroy,\n    canMove: canMove,\n    dragging: false\n  });\n\n  if (o.removeOnSpill === true) {\n    drake.on('over', spillOver).on('out', spillOut);\n  }\n\n  events();\n\n  return drake;\n\n  function isContainer (el) {\n    return drake.containers.indexOf(el) !== -1 || o.isContainer(el);\n  }\n\n  function events (remove) {\n    var op = remove ? 'remove' : 'add';\n    touchy(documentElement, op, 'mousedown', grab);\n    touchy(documentElement, op, 'mouseup', release);\n  }\n\n  function eventualMovements (remove) {\n    var op = remove ? 'remove' : 'add';\n    touchy(documentElement, op, 'mousemove', startBecauseMouseMoved);\n  }\n\n  function movements (remove) {\n    var op = remove ? 'remove' : 'add';\n    crossvent[op](documentElement, 'selectstart', preventGrabbed); // IE8\n    crossvent[op](documentElement, 'click', preventGrabbed);\n  }\n\n  function destroy () {\n    events(true);\n    release({});\n  }\n\n  function preventGrabbed (e) {\n    if (_grabbed) {\n      e.preventDefault();\n    }\n  }\n\n  function grab (e) {\n    _moveX = e.clientX;\n    _moveY = e.clientY;\n\n    var ignore = whichMouseButton(e) !== 1 || e.metaKey || e.ctrlKey;\n    if (ignore) {\n      return; // we only care about honest-to-god left clicks and touch events\n    }\n    var item = e.target;\n    var context = canStart(item);\n    if (!context) {\n      return;\n    }\n    _grabbed = context;\n    eventualMovements();\n    if (e.type === 'mousedown') {\n      if (isInput(item)) { // see also: https://github.com/bevacqua/dragula/issues/208\n        item.focus(); // fixes https://github.com/bevacqua/dragula/issues/176\n      } else {\n        e.preventDefault(); // fixes https://github.com/bevacqua/dragula/issues/155\n      }\n    }\n  }\n\n  function startBecauseMouseMoved (e) {\n    if (!_grabbed) {\n      return;\n    }\n    if (whichMouseButton(e) === 0) {\n      release({});\n      return; // when text is selected on an input and then dragged, mouseup doesn't fire. this is our only hope\n    }\n    // truthy check fixes #239, equality fixes #207\n    if (e.clientX !== void 0 && e.clientX === _moveX && e.clientY !== void 0 && e.clientY === _moveY) {\n      return;\n    }\n    if (o.ignoreInputTextSelection) {\n      var clientX = getCoord('clientX', e);\n      var clientY = getCoord('clientY', e);\n      var elementBehindCursor = doc.elementFromPoint(clientX, clientY);\n      if (isInput(elementBehindCursor)) {\n        return;\n      }\n    }\n\n    var grabbed = _grabbed; // call to end() unsets _grabbed\n    eventualMovements(true);\n    movements();\n    end();\n    start(grabbed);\n\n    var offset = getOffset(_item);\n    _offsetX = getCoord('pageX', e) - offset.left;\n    _offsetY = getCoord('pageY', e) - offset.top;\n\n    classes.add(_copy || _item, 'gu-transit');\n    renderMirrorImage();\n    drag(e);\n  }\n\n  function canStart (item) {\n    if (drake.dragging && _mirror) {\n      return;\n    }\n    if (isContainer(item)) {\n      return; // don't drag container itself\n    }\n    var handle = item;\n    while (getParent(item) && isContainer(getParent(item)) === false) {\n      if (o.invalid(item, handle)) {\n        return;\n      }\n      item = getParent(item); // drag target should be a top element\n      if (!item) {\n        return;\n      }\n    }\n    var source = getParent(item);\n    if (!source) {\n      return;\n    }\n    if (o.invalid(item, handle)) {\n      return;\n    }\n\n    var movable = o.moves(item, source, handle, nextEl(item));\n    if (!movable) {\n      return;\n    }\n\n    return {\n      item: item,\n      source: source\n    };\n  }\n\n  function canMove (item) {\n    return !!canStart(item);\n  }\n\n  function manualStart (item) {\n    var context = canStart(item);\n    if (context) {\n      start(context);\n    }\n  }\n\n  function start (context) {\n    if (isCopy(context.item, context.source)) {\n      _copy = context.item.cloneNode(true);\n      drake.emit('cloned', _copy, context.item, 'copy');\n    }\n\n    _source = context.source;\n    _item = context.item;\n    _initialSibling = _currentSibling = nextEl(context.item);\n\n    drake.dragging = true;\n    drake.emit('drag', _item, _source);\n  }\n\n  function invalidTarget () {\n    return false;\n  }\n\n  function end () {\n    if (!drake.dragging) {\n      return;\n    }\n    var item = _copy || _item;\n    drop(item, getParent(item));\n  }\n\n  function ungrab () {\n    _grabbed = false;\n    eventualMovements(true);\n    movements(true);\n  }\n\n  function release (e) {\n    ungrab();\n\n    if (!drake.dragging) {\n      return;\n    }\n    var item = _copy || _item;\n    var clientX = getCoord('clientX', e);\n    var clientY = getCoord('clientY', e);\n    var elementBehindCursor = getElementBehindPoint(_mirror, clientX, clientY);\n    var dropTarget = findDropTarget(elementBehindCursor, clientX, clientY);\n    if (dropTarget && ((_copy && o.copySortSource) || (!_copy || dropTarget !== _source))) {\n      drop(item, dropTarget);\n    } else if (o.removeOnSpill) {\n      remove();\n    } else {\n      cancel();\n    }\n  }\n\n  function drop (item, target) {\n    var parent = getParent(item);\n    if (_copy && o.copySortSource && target === _source) {\n      parent.removeChild(_item);\n    }\n    if (isInitialPlacement(target)) {\n      drake.emit('cancel', item, _source, _source);\n    } else {\n      drake.emit('drop', item, target, _source, _currentSibling);\n    }\n    cleanup();\n  }\n\n  function remove () {\n    if (!drake.dragging) {\n      return;\n    }\n    var item = _copy || _item;\n    var parent = getParent(item);\n    if (parent) {\n      parent.removeChild(item);\n    }\n    drake.emit(_copy ? 'cancel' : 'remove', item, parent, _source);\n    cleanup();\n  }\n\n  function cancel (revert) {\n    if (!drake.dragging) {\n      return;\n    }\n    var reverts = arguments.length > 0 ? revert : o.revertOnSpill;\n    var item = _copy || _item;\n    var parent = getParent(item);\n    var initial = isInitialPlacement(parent);\n    if (initial === false && reverts) {\n      if (_copy) {\n        if (parent) {\n          parent.removeChild(_copy);\n        }\n      } else {\n        _source.insertBefore(item, _initialSibling);\n      }\n    }\n    if (initial || reverts) {\n      drake.emit('cancel', item, _source, _source);\n    } else {\n      drake.emit('drop', item, parent, _source, _currentSibling);\n    }\n    cleanup();\n  }\n\n  function cleanup () {\n    var item = _copy || _item;\n    ungrab();\n    removeMirrorImage();\n    if (item) {\n      classes.rm(item, 'gu-transit');\n    }\n    if (_renderTimer) {\n      clearTimeout(_renderTimer);\n    }\n    drake.dragging = false;\n    if (_lastDropTarget) {\n      drake.emit('out', item, _lastDropTarget, _source);\n    }\n    drake.emit('dragend', item);\n    _source = _item = _copy = _initialSibling = _currentSibling = _renderTimer = _lastDropTarget = null;\n  }\n\n  function isInitialPlacement (target, s) {\n    var sibling;\n    if (s !== void 0) {\n      sibling = s;\n    } else if (_mirror) {\n      sibling = _currentSibling;\n    } else {\n      sibling = nextEl(_copy || _item);\n    }\n    return target === _source && sibling === _initialSibling;\n  }\n\n  function findDropTarget (elementBehindCursor, clientX, clientY) {\n    var target = elementBehindCursor;\n    while (target && !accepted()) {\n      target = getParent(target);\n    }\n    return target;\n\n    function accepted () {\n      var droppable = isContainer(target);\n      if (droppable === false) {\n        return false;\n      }\n\n      var immediate = getImmediateChild(target, elementBehindCursor);\n      var reference = getReference(target, immediate, clientX, clientY);\n      var initial = isInitialPlacement(target, reference);\n      if (initial) {\n        return true; // should always be able to drop it right back where it was\n      }\n      return o.accepts(_item, target, _source, reference);\n    }\n  }\n\n  function drag (e) {\n    if (!_mirror) {\n      return;\n    }\n    e.preventDefault();\n\n    var clientX = getCoord('clientX', e);\n    var clientY = getCoord('clientY', e);\n    var x = clientX - _offsetX;\n    var y = clientY - _offsetY;\n\n    _mirror.style.left = x + 'px';\n    _mirror.style.top = y + 'px';\n\n    var item = _copy || _item;\n    var elementBehindCursor = getElementBehindPoint(_mirror, clientX, clientY);\n    var dropTarget = findDropTarget(elementBehindCursor, clientX, clientY);\n    var changed = dropTarget !== null && dropTarget !== _lastDropTarget;\n    if (changed || dropTarget === null) {\n      out();\n      _lastDropTarget = dropTarget;\n      over();\n    }\n    var parent = getParent(item);\n    if (dropTarget === _source && _copy && !o.copySortSource) {\n      if (parent) {\n        parent.removeChild(item);\n      }\n      return;\n    }\n    var reference;\n    var immediate = getImmediateChild(dropTarget, elementBehindCursor);\n    if (immediate !== null) {\n      reference = getReference(dropTarget, immediate, clientX, clientY);\n    } else if (o.revertOnSpill === true && !_copy) {\n      reference = _initialSibling;\n      dropTarget = _source;\n    } else {\n      if (_copy && parent) {\n        parent.removeChild(item);\n      }\n      return;\n    }\n    if (\n      (reference === null && changed) ||\n      reference !== item &&\n      reference !== nextEl(item)\n    ) {\n      _currentSibling = reference;\n      dropTarget.insertBefore(item, reference);\n      drake.emit('shadow', item, dropTarget, _source);\n    }\n    function moved (type) { drake.emit(type, item, _lastDropTarget, _source); }\n    function over () { if (changed) { moved('over'); } }\n    function out () { if (_lastDropTarget) { moved('out'); } }\n  }\n\n  function spillOver (el) {\n    classes.rm(el, 'gu-hide');\n  }\n\n  function spillOut (el) {\n    if (drake.dragging) { classes.add(el, 'gu-hide'); }\n  }\n\n  function renderMirrorImage () {\n    if (_mirror) {\n      return;\n    }\n    var rect = _item.getBoundingClientRect();\n    _mirror = _item.cloneNode(true);\n    _mirror.style.width = getRectWidth(rect) + 'px';\n    _mirror.style.height = getRectHeight(rect) + 'px';\n    classes.rm(_mirror, 'gu-transit');\n    classes.add(_mirror, 'gu-mirror');\n    o.mirrorContainer.appendChild(_mirror);\n    touchy(documentElement, 'add', 'mousemove', drag);\n    classes.add(o.mirrorContainer, 'gu-unselectable');\n    drake.emit('cloned', _mirror, _item, 'mirror');\n  }\n\n  function removeMirrorImage () {\n    if (_mirror) {\n      classes.rm(o.mirrorContainer, 'gu-unselectable');\n      touchy(documentElement, 'remove', 'mousemove', drag);\n      getParent(_mirror).removeChild(_mirror);\n      _mirror = null;\n    }\n  }\n\n  function getImmediateChild (dropTarget, target) {\n    var immediate = target;\n    while (immediate !== dropTarget && getParent(immediate) !== dropTarget) {\n      immediate = getParent(immediate);\n    }\n    if (immediate === documentElement) {\n      return null;\n    }\n    return immediate;\n  }\n\n  function getReference (dropTarget, target, x, y) {\n    var horizontal = o.direction === 'horizontal';\n    var reference = target !== dropTarget ? inside() : outside();\n    return reference;\n\n    function outside () { // slower, but able to figure out any position\n      var len = dropTarget.children.length;\n      var i;\n      var el;\n      var rect;\n      for (i = 0; i < len; i++) {\n        el = dropTarget.children[i];\n        rect = el.getBoundingClientRect();\n        if (horizontal && (rect.left + rect.width / 2) > x) { return el; }\n        if (!horizontal && (rect.top + rect.height / 2) > y) { return el; }\n      }\n      return null;\n    }\n\n    function inside () { // faster, but only available if dropped inside a child element\n      var rect = target.getBoundingClientRect();\n      if (horizontal) {\n        return resolve(x > rect.left + getRectWidth(rect) / 2);\n      }\n      return resolve(y > rect.top + getRectHeight(rect) / 2);\n    }\n\n    function resolve (after) {\n      return after ? nextEl(target) : target;\n    }\n  }\n\n  function isCopy (item, container) {\n    return typeof o.copy === 'boolean' ? o.copy : o.copy(item, container);\n  }\n}\n\nfunction touchy (el, op, type, fn) {\n  var touch = {\n    mouseup: 'touchend',\n    mousedown: 'touchstart',\n    mousemove: 'touchmove'\n  };\n  var pointers = {\n    mouseup: 'pointerup',\n    mousedown: 'pointerdown',\n    mousemove: 'pointermove'\n  };\n  var microsoft = {\n    mouseup: 'MSPointerUp',\n    mousedown: 'MSPointerDown',\n    mousemove: 'MSPointerMove'\n  };\n  if (global.navigator.pointerEnabled) {\n    crossvent[op](el, pointers[type], fn);\n  } else if (global.navigator.msPointerEnabled) {\n    crossvent[op](el, microsoft[type], fn);\n  } else {\n    crossvent[op](el, touch[type], fn);\n    crossvent[op](el, type, fn);\n  }\n}\n\nfunction whichMouseButton (e) {\n  if (e.touches !== void 0) { return e.touches.length; }\n  if (e.which !== void 0 && e.which !== 0) { return e.which; } // see https://github.com/bevacqua/dragula/issues/261\n  if (e.buttons !== void 0) { return e.buttons; }\n  var button = e.button;\n  if (button !== void 0) { // see https://github.com/jquery/jquery/blob/99e8ff1baa7ae341e94bb89c3e84570c7c3ad9ea/src/event.js#L573-L575\n    return button & 1 ? 1 : button & 2 ? 3 : (button & 4 ? 2 : 0);\n  }\n}\n\nfunction getOffset (el) {\n  var rect = el.getBoundingClientRect();\n  return {\n    left: rect.left + getScroll('scrollLeft', 'pageXOffset'),\n    top: rect.top + getScroll('scrollTop', 'pageYOffset')\n  };\n}\n\nfunction getScroll (scrollProp, offsetProp) {\n  if (typeof global[offsetProp] !== 'undefined') {\n    return global[offsetProp];\n  }\n  if (documentElement.clientHeight) {\n    return documentElement[scrollProp];\n  }\n  return doc.body[scrollProp];\n}\n\nfunction getElementBehindPoint (point, x, y) {\n  var p = point || {};\n  var state = p.className;\n  var el;\n  p.className += ' gu-hide';\n  el = doc.elementFromPoint(x, y);\n  p.className = state;\n  return el;\n}\n\nfunction never () { return false; }\nfunction always () { return true; }\nfunction getRectWidth (rect) { return rect.width || (rect.right - rect.left); }\nfunction getRectHeight (rect) { return rect.height || (rect.bottom - rect.top); }\nfunction getParent (el) { return el.parentNode === doc ? null : el.parentNode; }\nfunction isInput (el) { return el.tagName === 'INPUT' || el.tagName === 'TEXTAREA' || el.tagName === 'SELECT' || isEditable(el); }\nfunction isEditable (el) {\n  if (!el) { return false; } // no parents were editable\n  if (el.contentEditable === 'false') { return false; } // stop the lookup\n  if (el.contentEditable === 'true') { return true; } // found a contentEditable element in the chain\n  return isEditable(getParent(el)); // contentEditable is set to 'inherit'\n}\n\nfunction nextEl (el) {\n  return el.nextElementSibling || manually();\n  function manually () {\n    var sibling = el;\n    do {\n      sibling = sibling.nextSibling;\n    } while (sibling && sibling.nodeType !== 1);\n    return sibling;\n  }\n}\n\nfunction getEventHost (e) {\n  // on touchend event, we have to use `e.changedTouches`\n  // see http://stackoverflow.com/questions/7192563/touchend-event-properties\n  // see https://github.com/bevacqua/dragula/issues/34\n  if (e.targetTouches && e.targetTouches.length) {\n    return e.targetTouches[0];\n  }\n  if (e.changedTouches && e.changedTouches.length) {\n    return e.changedTouches[0];\n  }\n  return e;\n}\n\nfunction getCoord (coord, e) {\n  var host = getEventHost(e);\n  var missMap = {\n    pageX: 'clientX', // IE8\n    pageY: 'clientY' // IE8\n  };\n  if (coord in missMap && !(coord in host) && missMap[coord] in host) {\n    coord = missMap[coord];\n  }\n  return host[coord];\n}\n\nmodule.exports = dragula;\n","import _ from 'lodash';\nimport angular from 'angular';\nimport dragula from 'dragula';\nimport template from './rank.html';\n\nexport default directive;\n\ndirective.$inject = ['$compile'];\nfunction directive(){\n    return {\n        replace: true,\n        require: ['ngModel'],\n        controller: 'questController',\n        controllerAs: 'ctrl',\n        template: template,\n        scope:{\n            data: '=questData'\n        },\n        link: function(scope, element, attr, ctrls) {\n            var ngModel = ctrls[0];\n            var ctrl = scope.ctrl;\n            var data = scope.data;\n            var range = _.isArray(data.list) && data.list.length ? _.range(1, data.list.length +1) : [];\n\n            // Setup the model\n            // ***************\n            ctrl.registerModel(ngModel, {\n                dflt: _.get(data,'randomize', true) ? _.shuffle(range) : range\n            });\n\n            ngModel.$isEmpty = function(value){\n                return _.isEqual(value, _.range(1, list.length +1));\n            };\n\n            // Expose the list\n            // ***************\n\n            // model --> view\n            // map the existing response into a full fledged list\n            // existign response is either from a previous response or from the default\n            var list = scope.list = ctrl.log.response.map(function(value, index){\n                return {order: index, id: value, text: data.list[value-1]};\n            });\n\n            // view --> model\n            scope.$watchCollection('list', function(){\n                scope.response = _.pluck(list, 'id');\n            });\n\n            // We need to update the model for the dropdowns manually\n            // this needs to be async in order for the select box to catch up with the model\n            scope.setupWatch = function(scope){\n                scope.$watch('$parent.response', function(){\n                    scope.$evalAsync('selected = row.order');\n                });\n            };\n\n            // Actions\n            // *******\n            scope.reset = function(){\n                list = scope.list = _.sortBy(list, 'id');\n            };\n\n            scope.move = function(fromIndex, toIndex){\n                arraymove(list, fromIndex, toIndex);\n                updateOrder(list);\n            };\n\n            /**\n             * Drag and drop\n             **/\n\n            var dragIndex, dropIndex;\n            var drake = dragula({\n                // a container needs the dragula-container attr and to be in the current question\n                isContainer: function(el){\n                    return el.hasAttribute('dragula-container') && element[0].contains(el);\n                }\n            });\n\n            drake.on('drag', function(dragElm, source){\n                dragIndex = domIndexOf(dragElm, source);\n            });\n\n            drake.on('drop', function(dropElm, target){\n                dropIndex = domIndexOf(dropElm, target);\n                scope.move(dragIndex, dropIndex);\n                scope.$digest();\n            });\n\n            scope.$on('$destroy',drake.destroy);\n\n            function domIndexOf(child, parent) {\n                return Array.prototype.indexOf.call(angular.element(parent).children(), child);\n            }\n\n            /**\n             * Required\n             * Since we don't control the ngModel element any more we need to manually create a required validation\n             * we don't implement $observe since in our case required is static\n             */\n\n            if (data.required){\n                ngModel.$formatters.push(requiredValidator);\n                ngModel.$parsers.unshift(requiredValidator);\n                requiredValidator(scope.response); // check validity at the begining - without need for change...\n            }\n\n            function updateOrder(list){\n                list.forEach(function(value, index){value.order = index;});\n            }\n\n            function arraymove(arr, fromIndex, toIndex) {\n                var element = arr[fromIndex];\n                arr.splice(fromIndex, 1);\n                arr.splice(toIndex, 0, element);\n            }\n\n            function requiredValidator(value){\n                var ctrl = ngModel;\n                if (ctrl.$isEmpty(value)) {\n                    ctrl.$setValidity('required', false);\n                    return;\n                } else {\n                    ctrl.$setValidity('required', true);\n                    return value;\n                }\n            }\n        }\n    };\n}\n\n","import _ from 'lodash';\nimport grid from './grid.html';\n\nexport default gridDirective;\n\ngridDirective.$inject = ['questShuffle'];\nfunction gridDirective(shuffle){\n    return {\n        replace: true,\n        template: grid,\n        require: ['ngModel','form'],\n        controller: 'questController',\n        controllerAs: 'ctrl',\n        scope:{\n            data: '=questData',\n            current: '=questCurrent'\n        },\n        link: function(scope, element, attr, ctrls) {\n            var ngModel = ctrls[0];\n            var ctrl = scope.ctrl;\n            var data = scope.data;\n\n            scope.form = ctrls[1];\n\n            scope.columns = mapColumns(data.columns);\n            scope.rows = mapRows(data.rows, data);\n            scope.allCss = allCss;\n\n\n            scope.$watchCollection(function getResponses(){\n                return _.pluck(scope.rows, '$response');\n            }, function sumResponses(responses){\n                scope.response = _.reduce(responses, function(total, response) {\n                    return _.isFinite(response) ? total + response : total;\n                },0);\n            });\n\n            ctrl.registerModel(ngModel, {\n                dflt: 0\n            });\n        }\n    };\n\n    // merge objects\n    function allCss(){\n        var objects = _.toArray(arguments);\n        objects.unshift({}); // prepend an empty object so that we don't change the originals\n        return _.extend.apply(_, objects);\n    }\n\n    function mapColumns(columns){\n        return (columns || []).map(objectify);\n    }\n\n    function mapRows(rows, data){\n        return _(rows || [])\n            .map(objectify)\n            .each(function setRowName(row, index){\n                row.hasOwnProperty('name') || (row.name = data.name + zerofill(index+1,3));\n            })\n            .thru(data.shuffle ? shuffle : _.identity)\n            .value();\n    }\n\n    function objectify(target){\n        return _.isPlainObject(target) ? target : {stem:target};\n    }\n\n    /**\n     * Zero fills a number\n     * http://stackoverflow.com/questions/1267283/how-can-i-create-a-zerofilled-value-using-javascript\n     *\n     * WARNING!! fails if n===0\n     *\n     * @param  {Number} n The number to zerofill\n     * @param  {Number} w The width of the fill\n     * @return {String}   Zerofilled number\n     */\n    function zerofill(n, w) {\n        var an = Math.abs(n);\n        var digitCount = 1 + Math.floor(Math.log(an) / Math.LN10);\n        if (digitCount >= w) {\n            return n;\n        }\n        var zeroString = Math.pow(10, w - digitCount).toString().substr(1);\n        return n < 0 ? '-' + zeroString + an : zeroString + an;\n    }\n}\n","import gridRow from './gridRow.html';\nimport _ from 'lodash';\n\nexport default gridRowDirective;\n\nfunction gridRowDirective(){\n    return {\n        replace: true,\n        template: gridRow,\n        require: ['ngModel'],\n        controller: 'questController',\n        controllerAs: 'ctrl',\n        scope: {\n            row: '=questGridRow',\n            data: '=questGridData'\n        },\n        link: function(scope, element, attr, ctrls) {\n            var ngModel = ctrls[0];\n            var ctrl = scope.ctrl;\n            var columns = scope.columns = scope.$parent.columns\n                .map(function(column, index){\n                    return _.get(scope, 'row.overwrite[' + index + ']') || column;\n                })\n                .map(function(column){\n                    column.hasOwnProperty('type') || (column.type = 'checkbox');\n\n                    if (column.type == 'dropdown'){\n                        _.isArray(column.answers) || (column.answers = []);\n                        column.answers = column.answers.map(function(row, index){\n                            if (!_.isObject(row)) row = {text: row};\n                            if (!('value' in row)) row.value = index+1;\n                            return row;\n                        });\n                    }\n\n                    return column;\n                });\n\n            // set values\n            columns\n                .filter(function hasValue(column){return column.type != 'text';})\n                .forEach(function setValue(column, index){\n                    column.hasOwnProperty('value') || (column.value = index+1);\n                });\n\n            // setReverseValues\n            columns\n                .filter(function(column){return !column.noReverse;}) // ignore columns that shouldn't be reveresed\n                .filter(function hasValue(column){return column.type != 'text';})\n                .forEach(function(column, index, columns){\n                    column.reverseValue = columns[columns.length - index - 1].value; // set the value from the mirroring column\n                });\n\n            scope.model = ngModel;\n\n            // keep row updated with response so that we can watch it from the grid directive\n            scope.$watch('response', function(newVal){\n                scope.row.$response = newVal;\n            });\n\n            ctrl.registerModel(ngModel, {\n                data: scope.row\n            });\n        }\n    };\n}\n","import _ from 'lodash';\nimport multiGrid from './multiGrid.html';\n\nexport default gridDirective;\n\ngridDirective.$inject = ['questShuffle'];\nfunction gridDirective(shuffle){\n    return {\n        replace: true,\n        template: multiGrid,\n        require: ['ngModel','form'],\n        //\t\t\tcontroller: 'questController',\n        controllerAs: 'ctrl',\n        scope:{\n            data: '=questData',\n            current: '=questCurrent'\n        },\n        link: function(scope, element, attr, ctrls) {\n            var data = scope.data;\n\n            scope.form = ctrls[1];\n\n            scope.columns = mapColumns(data.columns);\n            scope.rows = mapRows(data.rows, data);\n\n            scope.allCss = allCss;\n        }\n    };\n\n    // merge objects\n    function allCss(){\n        var objects = _.toArray(arguments);\n        objects.unshift({}); // prepend an empty object so that we don't change the originals\n        return _.extend.apply(_, objects);\n    }\n\n    function mapColumns(columns){\n        return (columns || []).map(objectify);\n    }\n\n    function mapRows(rows, data){\n        return _(rows || [])\n            .map(objectify)\n            .each(function setRowName(row, index){\n                row.hasOwnProperty('name') || (row.name = data.name + zerofill(index+1,3));\n            })\n            .thru(data.shuffle ? shuffle : _.identity)\n            .value();\n    }\n\n    function objectify(target){\n        return _.isPlainObject(target) ? target : {stem:target};\n    }\n\n    /**\n     * Zero fills a number\n     * http://stackoverflow.com/questions/1267283/how-can-i-create-a-zerofilled-value-using-javascript\n     *\n     * WARNING!! fails if n===0\n     *\n     * @param  {Number} n The number to zerofill\n     * @param  {Number} w The width of the fill\n     * @return {String}   Zerofilled number\n     */\n    function zerofill(n, w) {\n        var an = Math.abs(n);\n        var digitCount = 1 + Math.floor(Math.log(an) / Math.LN10);\n        if (digitCount >= w) {\n            return n;\n        }\n        var zeroString = Math.pow(10, w - digitCount).toString().substr(1);\n        return n < 0 ? '-' + zeroString + an : zeroString + an;\n    }\n}\n","import multiGridRow from './multiGridRow.html';\nimport _ from 'lodash';\n\nexport default gridRowDirective;\n\nfunction gridRowDirective(){\n    return {\n        replace: true,\n        template: multiGridRow,\n        require: ['ngModel'],\n        controller: 'questController',\n        controllerAs: 'ctrl',\n        scope: {\n            row: '=questMultiGridRow',\n            data: '=questMultiGridData'\n        },\n        link: function(scope, element, attr, ctrls) {\n            var ngModel = ctrls[0];\n            var ctrl = scope.ctrl;\n\n            scope.model = ngModel;\n            scope.columns = scope.$parent.columns\n                .map(function(column, index){\n                    return _.get(scope, 'row.overwrite[' + index + ']',column) ;\n                })\n                .map(function setType(column){\n                    column.hasOwnProperty('type') || (column.type = 'checkbox');\n\n                    if (column.type == 'dropdown'){\n                        _.isArray(column.answers) || (column.answers = []);\n                        column.answers = column.answers.map(function(row, index){\n                            if (!_.isObject(row)) row = {text: row};\n                            if (!('value' in row)) row.value = index+1;\n                            return row;\n                        });\n                    }\n\n                    return column;\n                });\n\n            ctrl.registerModel(ngModel, {\n                data: scope.row,\n                dflt: (scope.columns || []).map(mapDefault)\n            });\n\n            // setup validation\n            ngModel.$parsers.unshift(requiredValidator);\n            ngModel.$parsers.unshift(patternValidator);\n            requiredValidator(ngModel.$viewValue);\n            scope.$watchCollection('response', function(value){ngModel.$setViewValue(value.slice());}); // reset response so that parsers trigger\n\n            function requiredValidator(value){\n                var isValid = scope.columns.every(isFull);\n                ngModel.$setValidity('required', isValid);\n                return value;\n\n                function isFull(column, index){\n                    var val = value[index];\n                    // if not required\n                    if (!scope.data.required && !scope.row.required && !column.required) return true; \n                    switch (column.type){\n                        case 'text': return true;\n                        case 'input': return val !== '';\n                        case 'dropdown': return !isNaN(val) && val !== null;\n                        default: return val;\n                    }\n                }\n            }\n\n            function patternValidator(value){\n                var isValid = scope.columns.every(fitsPattern);\n                ngModel.$setValidity('pattern', isValid);\n                return value;\n\n                function fitsPattern(column, index){\n                    var val = value[index];\n                    if (column.type !== 'input' || !column.pattern) return true;\n                    if (_.isNumber(val) || _.isString(val)){\n                        return (new RegExp(column.pattern)).test(val);\n                    } \n                    else return false;\n                }\n            }\n        }\n    };\n}\n\nfunction mapDefault(column){\n    if (typeof column === 'string') return false;\n    if (column.type === 'text') return null;\n    if (column.type === 'input') return '';\n    if (column.type === 'dropdown') return NaN;\n    return false; // checkbox\n}\n","import slider from './slider.html';\n\nexport default sliderDirective;\n\nsliderDirective.$inject = [];\nfunction sliderDirective(){\n    return {\n        replace: true,\n        template: slider.html,\n        require: ['form', 'ngModel'],\n        controller: 'questController',\n        controllerAs: 'ctrl',\n        scope:{\n            data: '=questData'\n        },\n        link: function(scope, element, attr, ctrls) {\n            var form = ctrls[0];\n            var ngModel = ctrls[1];\n            var ctrl = scope.ctrl;\n            var data = scope.data;\n\n            scope.form = form;\n\n            ctrl.registerModel(ngModel, { dflt: undefined });\n\n            // setup model => view\n            scope.sliderResponse = scope.response;\n\n            // setup view => model\n            scope.$on('slider:change', function(e, newValue){\n                scope.$apply(function(){\n                    scope.response = newValue;\n                    data.autoSubmit && scope.$emit('quest:submit:now');\n                });\n            });\n        }\n    };\n}\n","export default piPointerdownDirective;\n\nvar EVENTNAME = 'touchstart mousedown';\nvar DIRECTIVENAME = 'piPointerdown';\npiPointerdownDirective.$inject = ['$parse'];\nfunction piPointerdownDirective($parse){\n    return {\n        compile: function($element, attr) {\n            // We expose the powerful $event object on the scope that provides access to the Window,\n            // etc. that isn't protected by the fast paths in $parse.  We explicitly request better\n            // checks at the cost of speed since event handler expressions are not executed as\n            // frequently as regular change detection.\n            var fn = $parse(attr[DIRECTIVENAME], /* expensiveChecks */ true);\n            return function piEventHandler(scope, element) {\n                element.on(EVENTNAME, listener);\n                scope.$on('$destroy', function(){\n                    element.off(EVENTNAME, listener);\n                });\n\n                function listener(event) {\n                    scope.$apply(function() {\n                        fn(scope, {$event:event});\n                    });\n                }\n            };\n        }\n    };\n}\n\n","import _ from 'lodash';\n\ntoRegexFilter.$inject = ['piConsole'];\nfunction toRegexFilter($console){\n    return toRegex;\n\n    function toRegex(value) {\n        var err;\n\n        if (_.isUndefined(value)){\n            return /(?:)/;\n        }\n\n        if (_.isRegExp(value) || _.isString(value)){\n            return new RegExp(value);\n        } else {\n            err = new Error('Question pattern is not a valid regular expression');\n            $console('text').error(err, value);\n            throw err;\n        }\n    }\n}\n\nexport default toRegexFilter;\n","import _ from 'lodash';\n\nexport default function(){\n    return dfltUnits;\n}\n\nfunction dfltUnits(value, unit) {\n    var suffix;\n\n    // if value is empty (unless it equals 0)\n    if (!value && value !== 0 && value !== '0') return '';\n\n    if (isNumeric(value)){\n        suffix = _.isUndefined(unit) ? 'px' : String(unit);\n        return value + suffix;\n    }\n\n    return value;\n}\n\n// taken from jquery\nfunction isNumeric(obj){\n    return !_.isArray( obj ) && (obj - parseFloat( obj ) + 1) >= 0;\n}\n","/*\n * @name: piMessage Directive\n */\n\nimport _ from 'lodash';\nexport default directive;\n\ndirective.$inject = ['$compile', '$rootScope', '$document', 'piConsole'];\nfunction directive($compile, $rootScope, $document, $console){\n    return {\n        link: function($scope, $element) {\n            var events = 'keydown';\n            var script = $scope.script;\n            var newScope = $scope.newScope = $scope.$new();\n            var template;\n            var context = {\n                global : $rootScope.global,\n                current : $rootScope.current,\n                task: script,\n                tasksData: _.get(script, 'data', {})\n            };\n\n            if (script.$template == null){\n                $console('message').error('missing template for message', script.name || script.inherit);\n            }\n\n            // try to render template\n            try {\n                template = _.template(script.$template)(context);\n            } catch(e){\n                template = script.$template;\n                $console('message').error('failed to render template', e);\n            }\n\n            _.extend($scope, context);\n            $scope.done = done;\n\n            // listen for events\n            $document.on(events, onKeydown);\n            $scope.$on('$destroy',function(){\n                $document.off(events, onKeydown);\n            });\n\n            $element.html(template);\n            $compile($element.contents())(newScope);\n\n            // check if the we should proceed and if so call done\n            function onKeydown(e){\n                // accept both the keyCode and the key itself\n                var keyArr = _.isArray(script.keys) ? script.keys : [script.keys];\n                var keys = _.map(keyArr,function(value){\n                    return _.isString(value) ? value.toUpperCase().charCodeAt(0) : value;\n                });\n\n                // event is in the keys array\n                // ~ return 0 only if target was not found\n                if (~_.indexOf(keys, e.which)){\n                    $scope.done();\n                }\n            }\n\n            function done(){\n                newScope.$destroy();\n                $element.empty();\n                $scope.$emit('message:done');\n            }\n        }\n    };\n}\n","/*\n * @name: messageDone Directive\n */\n \ndirective.$inject = [];\nfunction directive(){\n    return {\n        link: function($scope, $element){\n            $element.on('click', function(){\n                $scope.done();\n            });\n        }\n    };\n}\n\nexport default directive;\n","/**\n * @name: taskActivateProvider\n */\n\n\nimport _ from 'lodash';\n\n\nfunction provider(){\n    var activators = {};\n\n    this.$get = taskActivateProvider;\n\n    this.set = function set(name, fn){\n        activators[name] = fn;\n    };\n\n    this.get = function(name){\n        return activators[name];\n    };\n}\n\n\ntaskActivateProvider.$inject = ['$q', '$rootScope', '$injector'];\nfunction taskActivateProvider($q,$rootScope, $injector){\n    var self = this;\n\n    function taskActivate(task, $element, $scope){\n        var activator;\n        var def = $q.defer();\n        var global = $rootScope.global;\n        var script = task.$script;\n        var destroy;\n\n        // get activation function\n        if (_.isFunction(script) || _.isArray(script)){\n            activator = script;\n        }\n\n        if (!activator && script && _.isFunction(script.play)){\n            activator = _.bind(script.play, script);\n            activator.$inject = $injector.annotate(script.play);\n        }\n\n        if (!activator && script && _.isArray(script.play)){\n            activator = _.bind(script.play[script.play.length-1], script);\n            activator.$inject = $injector.annotate(script.play);\n        }\n\n\n        if (!activator && task.type){\n            activator = self.get(task.type);\n        }\n\n\n        if (!activator){\n            throw new Error('Activator function not found for the \"' + task.type + '\" task');\n        }\n\n        // activate task\n        /**\n\t\t\t * activation function\n\t\t\t * @param {function} done calback for finishing the task\n\t\t\t * @param {obj} props an object with all the stuff we think we could need...\n\t\t\t * @type {[type]}\n\t\t\t */\n\n        destroy = $injector.invoke(activator, null, {\n            done: _.bind(def.resolve,def),\n            task: task,\n            script: script,\n            $element: $element,\n            $scope: $scope,\n            global: global\n        });\n\n        // if activator returns a function use it to clean up the task\n        if (_.isFunction(destroy)) def.promise['finally'](destroy);\n\n        return def;\n    }\n\n    return taskActivate;\n}\n\nexport default provider;\n","/*\n * @name: taskDirective\n */\n\n\nimport _ from 'lodash';\n\ndirective.$inject = ['taskActivate','managerCanvas','$document', '$window', '$rootScope', 'piConsole'];\nfunction directive(activateTask, canvas, $document, $window, $rootScope, piConsole){\n    return {\n        scope:{\n            task: '=piTask'\n        },\n        link: function($scope, $element){\n            var task = $scope.task;\n            var canvasOff, oldTitle;\n            var def;\n            var promise;\n            var proceedObject;\n            var settings = $scope.$parent.settings || {};\n            var script = task.$script || {};\n            var taskName = task.name || script.name;\n            var piGlobal = window.piGlobal;\n\n            if (!task){\n                return;\n            }\n\n            /**\n                 * listen for skip events\n                 */\n            if (settings.skip && window.DEBUG === true){\n                $document.on('keydown',proceedListener);\n                $scope.$on('$destroy', function(){\n                    $document.off('keydown', proceedListener);\n                    $document.off('keydown', skipListener);\n                });\n            }\n\n            /**\n                 * Setup current object\n                 */\n            $rootScope.current = piGlobal.current = script.current || {};\n            if (taskName){\n                if (piGlobal[taskName]){\n                    piConsole(['task']).warn('This taskName has already been in use: \"' + taskName + '\"');\n                }\n                // extend current script with the piGlobal object\n                _.extend($rootScope.current, piGlobal[taskName] || {});\n                // set the current object back into the global\n                $window.piGlobal[taskName] = script.current;\n            }\n\n            /**\n                 * Activate task\n                 */\n            def = activateTask(task, $element, $scope.$new());\n            promise = def.promise;\n\n            /**\n                 * Add and remove canvas\n                 */\n            canvasOff = canvas(task.canvas); // apply canvas settings\n            promise['finally'](canvasOff); // remove canvas settings\n\n            /**\n                 * Add and remove title\n                 * if task.title is set, set the title and remove at the end...\n                 */\n            if (task.title){\n                oldTitle = $document[0].title;\n                $document[0].title = task.title;\n                promise['finally'](function(){$document[0].title = oldTitle;});\n            }\n\n            promise['finally'](function(){\n                $scope.$emit('task:done', proceedObject);\n            });\n\n            /**\n                 * Listen for skip events\n                 * F5 = refresh\n                 * esc = set up arrows for prev/next\n                 * @param  {Event} e\n                 */\n            function proceedListener(e){\n                var which = e.which || e.keyCode;\n                var key = (e.key || '').toUpperCase();\n\n                // ctrl r ==> refresh\n                if ((which == 82 || key == 'R') && e.ctrlKey) {\n                    proceed(e, 'current');\n                    e.preventDefault();\n                }\n\n                // esc ==> listen for skip direction (once)\n                if(which == 27) {\n                    $document.one('keydown', skipListener);\n                }\n            }\n\n            // skip on left/right key codes\n            function skipListener(e){\n                var which = e.which || e.keyCode;\n                if (which == 37) {proceed(e, 'prev');}\n                if (which == 39) {proceed(e, 'next');}\n            }\n\n            // end task and proceed where needed\n            function proceed(e, target){\n                e.preventDefault();\n                proceedObject = {type:target, bustCache:true}; // when the deferred is resolved this object is used to tell piqPage where to proceed.\n                def.resolve();\n            }\n\n        }\n    };\n}\n\nexport default directive;\n","import _ from 'lodash';\n\nexport default canvasContructor;\n\n/**\n * Takes a map of css rules and applies them.\n * Returns a function that returns the page to its former condition.\n *\n * The rule map is an object of ruleName -> ruleObject.\n *\n * var ruleObject = {\n * \telement : wrapped element to affect\n * \tproperty: css property to modify\n * }\n *\n * @param  {Object} map      A hash of rules.\n * @param  {Object} settings A hash of ruleName -> value\n * @return {Function}        A function that undoes all the previous changes\n */\nfunction canvasContructor(map, settings){\n    var offArr;\n\n    if (!_.isPlainObject(map)){\n        throw new Error('canvas(map): You must set a rule map for canvas to work properly');\n    }\n\n    // if settings is undefined return a function that doesn't do anything\n    // just so we don't need to make sure that the user modifies the canvas\n    if (_.isUndefined(settings)){\n        return _.noop;\n    }\n\n    if (!_.isPlainObject(settings)){\n        throw new Error('canvas(settings): canvas settings must be an object');\n    }\n\n    // create an array of off functions to undo any changes by this action\n    offArr = _.map(settings, function(value,key){\n        var rule = map[key];\n        if (rule){\n            return on(rule.element, rule.property, value);\n        } else {\n            throw new Error('canvas('+ key +'): unknow key in canvas object.');\n        }\n    });\n\n    return function off(){\n        _.forEach(offArr, function(fn){fn.call();});\n    };\n}\n\nfunction on($el, property, value){\n    var old = $el.css(property); // save old value\n    $el.css(property, value); // set new value\n    return _.bind($el.css, $el, property, old); // create off function: bind $el.css(property, old)\n}\n","\n\nimport _ from 'lodash';\nimport angular from 'angular';\nimport canvasConstructor from './canvasConstructor';\n\nmanagerCanvasService.$inject = ['$rootElement', '$document'];\nfunction managerCanvasService($rootElement, $document){\n    var $body = angular.element($document[0].body);\n\n    var map = {\n        background \t\t\t: {element: $body, property: 'backgroundColor'},\n        canvasBackground\t: {element: $rootElement, property:'backgroundColor'},\n        fontSize \t\t\t: {element: $rootElement, property:'fontSize'},\n        fontColor \t\t\t: {element: $rootElement, property:'color'}\n    };\n\n    return _.bind(canvasConstructor, null, map);\n}\n\nexport default managerCanvasService;\n","/**\n * Swap directive\n * Enables a slide-show type interface.\n * It exposes a controller with the next/prev/refresh/empty methods.\n * Each time next is called, the content is re-compiled and animated in, and old content is animated out.\n *\n * @param  {[type]} require [description]\n * @return {[type]}         [description]\n */\n\n// get template\nimport _ from 'lodash';\n\nswapControler.$inject = ['$scope'];\nfunction swapControler($scope){\n    this.$scope = $scope;\n}\n\n_.extend(swapControler.prototype, {\n    next : function(props, options){\n        this.$scope.enter(props, options);\n    },\n    prev: function(props, options){\n        this.$scope.enter(props, options);\n    },\n    refresh: function(props){\n        this.$scope.refresh(props);\n    },\n    empty: function(options){\n        this.$scope.empty(options);\n    }\n});\n\nswapDirective.$inject = ['$compile', '$animate', '$injector'];\nfunction swapDirective($compile, $animate, $injector){\n    return {\n        //replace: true,\n        transclude: true,\n        controller: swapControler,\n        controllerAs: 'ctrl',\n        compile: function(){\n            return {\n                pre: this.pre,\n                post: function(){}\n            };\n        },\n        pre: function($scope, $element, $attr, $ctrls, $transclude) {\n            $scope.enter = enter;\n            $scope.empty = cleanupLast;\n            $scope.refresh = refresh;\n\n            var currentScope, // the scope of the current element\n                currentElement, // an entering element (up until it leaves)\n                previousElement, // an element that is currently leaving\n                parentElement = $element;\n\n            function cleanupLast(opts) {\n                var options = opts || {};\n\n                if(previousElement) {\n                    previousElement.remove();\n                    previousElement = null;\n                }\n                if(currentScope) {\n                    currentScope.$destroy();\n                    currentScope = null;\n                }\n                if(currentElement) {\n                    $animate.leave(currentElement, function() {\n                        previousElement = null;\n                        options.postLeave && options.postLeave();\n                    });\n                    previousElement = currentElement;\n                    currentElement = null;\n                }\n            }\n\n            function enter(props, opts){\n                var options = opts || {};\n                options.pre && options.pre();\n\n                if (!props){\n                    return cleanupLast(options);\n                }\n\n                // create new scope and extend it with props\n                var newScope = _.extend($scope.$new(), props);\n\n                // create new element\n                $transclude(newScope, function(clone){\n\n                    // @TODO: add animation info\n                    // clone.addClass(direction); // maybe add this to the parent? how do we control both enter and leave with this method?\n                    addAnimations(clone, options.animate);\n\n                    // First send away the previous element (if it exists)\n                    cleanupLast(options);\n\n                    // Instantiate new element\n                    currentElement = clone;\n\n                    currentScope = newScope;\n\n                    // Animate it in\n                    $animate.enter(currentElement, parentElement, null, function(){\n                        options.post && options.post();\n                    });\n                });\n            }\n\n            function refresh(props){\n                _.extend(currentScope, props);\n            }\n\n            function addAnimations(element, animationsStr){\n                if (!animationsStr){\n                    return;\n                }\n\n                var animations = animationsStr.split(' ');\n\n                _.each(animations, function(animation){\n                    // Make sure that this animation exists\n                    if (!$injector.has('.' + animation + '-animation')){\n                        throw new Error('Unknown animation type: \"' + animation + '\"');\n                    }\n\n                });\n\n                element.addClass(animationsStr);\n            }\n\n\n        }\n    };\n}\n\nexport default swapDirective;\n","/*\n * @name: spinner Directive\n */\n\n// get template\nimport template from './spinner.html';\n\ndirective.$inject = [];\nfunction directive(){\n    return {\n        transclude: true,\n        replace: true,\n        template:template,\n        require: [],\n        // controller: '',\n        // controllerAs: 'ctrl',\n        scope:{\n            spinner: '=piSpinner'\n        }\n    };\n}\n\nexport default directive;\n","\nimport _ from 'lodash';\n\nfunction harvest(global){\n    var logs = getLogs(global);\n    var matrix = createMatrix(logs);\n    return toCsv(matrix);\n}\n\n/*\n     * Harvest Logs from global\n     */\nfunction getLogs(global){\n    return _.reduce(global, reducer, []);\n    function reducer(results, task, taskName){ return results.concat(harvestTask(taskName, task)); }\n}\n\nfunction harvestTask(taskName, task){\n    if (taskName !== 'current' && _.isPlainObject(task) && Array.isArray(task.logs)) return task.logs.map(addTaskName);\n    return [];\n        \n    function addTaskName(obj){ obj.taskName = taskName; return obj; }\n}\n\n/*\n     * Transform Logs into matrix\n     */\nfunction createMatrix(logs){\n    var getIndex = GetIndex();\n    var rows = logs.map(toRows);\n    var headers = getIndex();\n        \n    rows.forEach(normalizeLength(headers.length));\n\n    return [headers].concat(rows);\n\n    function toRows(log){\n        var row = [];\n        _.forEach(log, extractValues);\n        return row;\n\n        function extractValues(value, key){ row[getIndex(key)] = typeof value === 'object' ? JSON.stringify(value) : value; }\n    }\n\n    function normalizeLength(maxLength){\n        return function(arr){ arr.length = maxLength; };\n    }\n}\n\nfunction GetIndex(){\n    var hash = {taskName:0};\n    var index = 1;\n    return getIndex;\n\n    function getIndex(key){\n        if (!arguments.length) return _.keys(hash);\n        if (key in hash) return hash[key];\n        return hash[key] = index++;\n    }\n}\n\n/*\n     * Csv encoder\n     * https://www.ietf.org/rfc/rfc4180.txt\n     * toCSv :: [[String]] -> String\n     */\n\nvar quotableRgx = /(\\n|,|\")/;\nfunction toCsv(matrice){ return matrice.map(buildRow).join('\\n'); }\nfunction buildRow(arr){ return arr.map(normalize).join(','); }\nfunction normalize(val){\n    // wrap in double quotes and escape inner double quotes\n    if (quotableRgx.test(val)) return '\"' + val.replace(/\"/g, '\"\"') + '\"';\n    return val;\n}   \nexport default harvest;\n","\nimport _ from 'lodash';\nimport managerToCsv from './managerToCsv';\n\nmanagerService.$inject = ['$rootScope', '$q', 'managerSequence', 'managerTaskLoad', '$injector'];\nfunction managerService($rootScope, $q, ManagerSequence, taskLoad, $injector){\n\n    /**\n\t\t * This is the constructor for the manager object.\n\t\t *\n\t\t * The manager is responsible for the interface between the managerDirective and the managerSequence\n\t\t * It deals with loading tasks (pulled from the sequence)\n\t\t * And notifying the directive that a new task is ready to be run.\n\t\t *\n\t\t * listens to manager:next and manager:prev ==> proceeds sequence\n\t\t *\n\t\t * emits manager:loaded <== when a script is loaded\n\t\t *\n\t\t * @param  {Scope} $scope The scope to be notified\n\t\t * @param  {Object} script The manager script to be parsed\n\t\t * @return {Object}\n\t\t */\n    function manager($scope, script){\n        var self = this;\n        var settings = script.settings || {};\n\n        // make sure this works without a new statement\n        if (!(this instanceof manager)){\n            // jshint newcap:false\n            return new manager($scope,script);\n            // jshint newcap:true\n        }\n\n        this.$scope = $scope;\n        this.script = script;\n\n        // create sequence\n        this.sequence = new ManagerSequence(script);\n\n        // activate all setup stuff\n        setup($scope, settings);\n\n        $scope.$on('manager:next', function(event, target){\n            target || (target = {type:'next'});\n            switch (target.type){\n                case 'current':\n                    self.load(target);\n                    break;\n                case 'prev':\n                    self.prev(target);\n                    break;\n                case 'next':\n                    /* fall through */\n                default:\n                    self.next(target);\n            }\n        });\n        $scope.$on('manager:prev', function(){self.prev();});\n\n    }\n\n    _.extend(manager.prototype, {\n        next: function(target){\n            this.sequence.next();\n            this.load(target);\n        },\n\n        prev: function(target){\n            this.sequence.prev();\n            this.load(target);\n        },\n\n        current: function(){\n            // taskLoad sets the loaded script into $script\n            return this.sequence.current();\n        },\n\n        load: function(target){\n            var task = this.current();\n            var $scope = this.$scope;\n            var loadOptions = {\n                baseUrl: this.baseUrl,\n                bustCache: target && target.bustCache\n            };\n\n            if (task){\n                taskLoad(task, loadOptions).then(function(){\n                    $scope.$emit('manager:loaded');\n                });\n            } else {\n                // let the directive deal with the end of the sequence\n                $scope.$emit('manager:loaded');\n            }\n        },\n\n        setBaseUrl: function(baseUrl){\n            this.baseUrl = baseUrl;\n        }\n    });\n\n    return manager;\n\n    // just to separate the activation of all the settings: KISS\n    function setup($scope, settings){\n        var canvas = $injector.get('managerCanvas');\n        var $document = $injector.get('$document');\n        var preloadImages = $injector.get('piPreloadImages');\n        var beforeUnload = $injector.get('managerBeforeUnload');\n        var injectStyle = $injector.get('managerInjectStyle');\n        var rootElement = $injector.get('$rootElement');\n        var $http = $injector.get('$http');\n        var canvasOff, stylesOff, skinClass = settings.skin || 'default';\n\n\n        // prevent accidental browsing away\n        beforeUnload.activate();\n        $scope.$on('$destroy', beforeUnload.deactivate);\n\n        // activate canvas\n        canvasOff = canvas(settings.canvas);\n        $scope.$on('$destroy', canvasOff);\n\n        // inject styles\n        stylesOff = injectStyle(settings.injectStyle);\n        $scope.$on('$destroy', stylesOff);\n\n        // preload images\n        preloadImages(settings.preloadImages || []);\n\n        // activate titles\n        if (settings.title) $document[0].title = settings.title;\n\n\n        if (_.get(settings, 'logger.postCsv', false)) $scope.$on('$destroy', function(){\n            var csv = managerToCsv($rootScope.global);\n            $http.post(settings.logger.postCsv, csv);\n        });\n\n        rootElement.addClass(skinClass + '-skin');\n    }\n}\n\nexport default managerService;\n","\nimport _ from 'lodash';\n\nsequenceProvider.$inject = ['Database','$rootScope','mixerDefaultContext','templateDefaultContext'];\nfunction sequenceProvider(Database, $rootScope, mixerDefaultContext, templateDefaultContext){\n\n    /**\n\t\t * The sequence for the manager (essentialy the model).\n\t\t * @param  {Object} script A manager script.\n\t\t * @return {Object}\n\t\t */\n    function sequence(script){\n        var db, context;\n        // make sure this works without a new statement\n        if (!(this instanceof sequence)){\n            // jshint newcap:false\n            return new sequence(script);\n            // jshint newcap:true\n        }\n\n        // setup database\n        db = this.db = new Database();\n        db.createColl('tasks');\n        db.add('tasks', script.tasksSets || []);\n\n        // setup default contexts\n        context = {global: $rootScope.global};\n        _.extend(mixerDefaultContext, context);\n        _.extend(templateDefaultContext, context);\n\n        // setup sequence\n        this.sequence = db.sequence('tasks', script.sequence);\n    }\n\n    _.extend(sequence.prototype, {\n        next: function(){\n            this.sequence.next();\n            return this;\n        },\n\n        prev: function(){\n            this.sequence.prev();\n            return this;\n        },\n\n        current: function(){\n            return this.sequence.current();\n        }\n    });\n\n    return sequence;\n}\n\nexport default sequenceProvider;\n","/**\n * @name: managerLoadService\n * @returns {$q} A $q.promise that returns the target script\n */\n\n\nimport _ from 'lodash';\n\nmanagerLoadService.$inject = ['$q', 'managerGetScript'];\nfunction managerLoadService($q, getScript){\n\n    function managerLoadScript(source){\n        var promise = _.isString(source) ? getScript(source) : source;\n        return $q.when(promise);\n    }\n\n    return managerLoadScript;\n}\n\nexport default managerLoadService;\n","import {require} from 'requirejs/require.js';\nexport default getScriptProvider;\n\ngetScriptProvider.$inject = ['$q'];\nfunction getScriptProvider($q){\n\n    // @TODO: separate the parsing into a different module (make this a dependency)\n    function getScript(url, options){\n        options || (options = {});\n        var def = $q.defer(), target = '';\n\n        // if url doesn't starts with / or has : then add baseUrl\n        /^\\/|:/.test(url) || (target += options.baseUrl ? options.baseUrl + '/' : '');\n\n        target += url;\n\n        options.isText && (target = '' + target);\n        options.bustCache && (target += '?bust=' + (new Date()).getTime());\n\n        require([target], function(script){\n            def.resolve(script);\n        }, function(err){\n            def.reject(err);\n        });\n\n        return def.promise;\n    }\n\n    return getScript;\n}\n","/**\n * @name: taskLoadProvider\n * @returns {$q} A $q.promise that returns the target script\n */\n\nimport _ from 'lodash';\n\ntaskLoadService.$inject = ['$q', 'managerGetScript', 'piConsole'];\nfunction taskLoadService($q, managerGetScript, $console){\n\n    function getScript(url, options){\n        return managerGetScript(url, options)\n        // make sure that the script is defined\n        // and if not throw an appropriate error\n            .then(function(script){\n                var e;\n                if (_.isUndefined(script)){\n                    e = new Error('Task ' + url + ' failed or has not been found. Make sure that you returned the script and that your script does not have any errors');\n                    $console('task').error(e);\n                    throw e;\n                }\n\n                return script;\n            });\n    }\n\n    function taskLoad(task, options){\n        var promise, script, template;\n\n        // script def\n        if (task.scriptUrl){\n            script = getScript(task.scriptUrl, options);\n        } else {\n            script = task.script;\n        }\n\n        // template def\n        if (task.templateUrl){\n            template = getScript(task.templateUrl, _.extend({isText:true},options));\n        } else {\n            template = task.template;\n        }\n\n        promise = $q.all({script: $q.when(script), template: $q.when(template)});\n\n        promise.then(function(promises){\n            task.$script = promises.script;\n            task.$template = promises.template;\n            return task;\n        }, function(e){\n            $console('load').error('Failed to load task script - make sure that your URLs are all correct and that your script does not have any errors.', e);\n        });\n\n        return promise;\n    }\n\n    return taskLoad;\n}\n\nexport default taskLoadService;\n","import _ from 'lodash';\n\nvar addEvent = window.attachEvent || window.addEventListener;\nvar removeEvent = window.detachEvent || window.removeEventListener;\nvar chkevent = window.attachEvent ? 'onbeforeunload' : 'beforeunload'; /// make IE7, IE8 compitable\n\nvar proto = {\n    activate: function(){\n        addEvent(chkevent, leaveEvent);\n    },\n    deactivate: function(){\n        removeEvent(chkevent, leaveEvent);\n    }\n};\n\nfunction leaveEvent(e) { // For >=IE7, Chrome, Firefox\n    var confirmationMessage = 'Are you sure you want to leave this page? You may have some unsaved data here.';  // a space\n    (e || window.event).returnValue = confirmationMessage;\n    return confirmationMessage;\n}\n\nexport default function beforeunloadFactory(){\n    return _.create(proto);\n}\n","// VanilaJS\n// http://stackoverflow.com/questions/524696/how-to-create-a-style-tag-with-javascript\n\nfunction injectStyle(css){\n    var head = document.head || document.querySelector('head');\n    var style = document.createElement('style');\n\n    style.type = 'text/css';\n\n    if (style.styleSheet){\n        style.styleSheet.cssText = css;\n    } else {\n        style.appendChild(document.createTextNode(css));\n    }\n\n    head.appendChild(style);\n\n    return function(){\n        head.removeChild(style);\n    };\n}\n\nexport default injectStyle;\n","/**\n * Should manage various tasks.\n * For now it should simply load and activate a questionnaire.\n * Eventually it should be able to take a sequence of tasks and run them.\n * @name  managerDirctive\n * @return {directive}\n */\n\n\nimport _ from 'lodash';\n\nmanagerControler.$inject = ['$scope', 'managerService', 'managerLoad', 'piConsole'];\nfunction managerControler($scope, ManagerService, managerLoad, piConsole){\n    this.init = init;\n\n\n    function init(source){\n        var ctrl = this;\n        var taskSource;\n\n        try {\n            taskSource = $scope.$eval(source); // if source is a plain string eval returns undefined so we want to load this as a url\n        } catch(e){\n            // don't do anything. This means that the source is un compilable...\n        } finally {\n            taskSource || (taskSource = source);\n        }\n\n        managerLoad(taskSource).then(success,error);\n\n        function success(script){\n            // takes taskSource and returns a path or undefined\n            function getPath(path){\n\n                if (!_.isString(path)) {\n                    return;\n                } else {\n                    return path.substring(0, path.lastIndexOf('/'));\n                }\n            }\n\n            // keep the script on scope\n            $scope.script = script;\n            $scope.settings = (script && script.settings) || {};\n\n            // create the manager\n            ctrl.manager = new ManagerService($scope, script);\n            ctrl.manager.setBaseUrl(getPath(taskSource));\n\n            // activate first task\n            $scope.$emit('manager:next');\n        }\n\n        function error(e){\n            piConsole('manager').error('Failed to load ' + taskSource, e);\n        }\n    }\n}\n\ndirective.$inject = ['$q', '$injector', 'piConsole'];\nfunction directive($q, $injector,piConsole){\n    return {\n        priority: 1000,\n        replace:true,\n        template: [ \n            '<div pi-swap ng-cloak ng-class=\"{\\'pi-spinner\\':loading}\">',\n            '<div ng-bind-html=\"task.preText\"></div>',\n            '<div pi-task=\"task\"></div>',\n            '<div ng-bind-html=\"task.postText\"></div>',\n            '</div>',\n        ].join('\\n'),\n        controller: managerControler,\n        require: ['piManager', 'piSwap'],\n        link:  function($scope, $element, attr, ctrl){\n            var swap = ctrl[1], thisCtrl = ctrl[0];\n            var currentTask, prevTask;\n\n            thisCtrl.init(attr.piManager);\n\n            $scope.$on('manager:loaded', loaded);\n            $scope.$on('task:done', taskDone);\n            $scope.loading = true;\n\n            function loaded(){\n                $scope.loading = false;\n\n                // keep previous task\n                prevTask = currentTask;\n\n                // get loaded task\n                currentTask = thisCtrl.manager.current();\n                piConsole('manager').debug('Manager:currentTask', currentTask);\n\n                // procced or and manager\n                currentTask ? proceed() : done();\n            }\n\n            function proceed(){\n                var locals = {prevTask: prevTask, currentTask: currentTask, managerSettings: $scope.settings};\n                $qSequence([\n                    $scope.settings.onPreTask,\n                    _.get(prevTask,'post'),\n                    currentTask.pre,\n                    _.bind(swap.next, swap, {task:currentTask, settings:$scope.settings}),\n                    currentTask.load,\n                    function(){\n                        $scope.loading = false;\n                    }\n                ], locals);\n            }\n\n            function done(){\n                var locals = {prevTask: prevTask, currentTask: currentTask};\n                $qSequence([\n                    prevTask && prevTask.post,\n                    _.bind(swap.empty, swap),\n                    $scope.settings.onEnd,\n                    function(){\n                        $scope.loading = false;\n                        $scope.$emit('manager:done');\n                        $scope.$destroy();\n                    }\n                ], locals);\n            }\n\n            /**\n\t\t\t\t * This is called uppon task:done\n\t\t\t\t * It is responsible for proceeding to the following task\n\t\t\t\t * @param  {Event} ev   The event that triggered the taskdone\n\t\t\t\t * @param  {Object} args An object that describes the direction of proceeding\n\t\t\t\t */\n            function taskDone(ev, args){\n                ev.stopPropagation();\n                $scope.loading = true;\n                $scope.$emit('manager:next', args);\n            }\n\n            /**\n\t\t\t\t * chain a series of functions/promises/undefined\n\t\t\t\t * @param  {Array} arr an array of functions etc.\n\t\t\t\t * @return {promise}\n\t\t\t\t */\n            function $qSequence(arr, locals){\n                var promise = $q.when();\n\n                _(arr)\n                // map into then functions\n                    .map(function(value){\n                        return function(){\n                            var prms = _.isFunction(value) ? $injector.invoke(value,null,locals||{}) : value;\n                            return $q.when(prms);\n                        };\n                    })\n                    .reduce(function(promise, fn){\n                        return promise.then(fn, function(e){\n                            piConsole('manager').error('There was an error in the task sequence. ',e);\n                        });\n                    }, promise);\n            }\n\n        }\n    };\n}\n\n\nexport default directive;\n","function directive(){\n    return {\n        priority: 1000,\n        template: '<div pi-manager=\"script\"></div>',\n        compile: function(){\n            return {\n                // this need to be pre so that the wrapping directive gets rendered before the template\n                pre: function($scope, $element, $attr){\n                    var taskSource;\n                    var source = $attr.piManagerTask;\n                    try{\n                        taskSource = $scope.$eval(source);\n                    } catch(e){/* empty catch */}\n\n                    var task  = taskSource ? taskSource : {scriptUrl:source};\n\n                    $scope.script = {\n                        sequence: [\n                            {script:['done', 'managerBeforeUnload', function(done, beforeUnload){beforeUnload.deactivate(); done();}]},\n                            task\n                        ]\n                    };\n                }\n            };\n        }\n    };\n}\n\nexport default directive;\n","piLinkDirective.$inject = ['managerBeforeUnload'];\nfunction piLinkDirective(managerBeforeUnload){\n    return {\n        link: function($scope, $element){\n            $element.on('click', function(){\n                managerBeforeUnload.deactivate();\n            });\n        }\n    };\n}\n\nexport default piLinkDirective;\n","function animation($window, now){\n\n    var topdx = 60;\n    var duration = 300;\n    var raf = $window.requestAnimationFrame;\n    var rafCancel = $window.cancelAnimationFrame;\n\n    return {\n        enter: function(element, done){\n            var el = element[0]; // raw element;\n            var cancelId;\n            var start = now();\n\n            // setup\n            element.css({\n                top: -topdx +'px'\n            });\n\n            // activate animation\n            cancelId = raf(enter);\n\n            return function(canceled){\n                if (canceled){\n                    rafCancel(cancelId);\n                    element.css({top: '0px'});\n                }\n            };\n\n            function enter(){\n                var deltaTime = now() - start;\n                var proportion = deltaTime/duration;\n\n                // if we're out of time, finish the animation\n                if (deltaTime > duration) {\n                    el.style.top = 0;\n                    rafCancel(cancelId);\n                    done();\n                    return;\n                }\n\n                el.style.top = (topdx * (proportion-1)) + 'px';\n                cancelId = raf(enter);\n            }\n        },\n\n        leave: function(element, done){\n            var el = element[0]; // raw element;\n            var cancelId;\n            var start = now();\n\n            // activate animation\n            cancelId = raf(leave);\n\n            return function(canceled){\n                if (canceled){\n                    rafCancel(cancelId);\n                }\n            };\n\n            function leave(){\n                var deltaTime = now() - start;\n                var proportion = 1-deltaTime/duration;\n\n                // if we're out of time, finish the animation\n                if (deltaTime > duration) {\n                    rafCancel(cancelId);\n                    done();\n                    return;\n                }\n\n                el.style.top = (topdx * (proportion-1)) + 'px';\n                cancelId = raf(leave);\n            }\n        }\n\n    };\n}\n\n// $inject doesn't seem to work??\nexport default ['$window', 'timerNow', animation];\n","function animation($window, now){\n\n    var duration = 300;\n    var raf = $window.requestAnimationFrame;\n    var rafCancel = $window.cancelAnimationFrame;\n\n    return {\n        enter: function(element, done){\n            var el = element[0]; // raw element;\n            var cancelId;\n            var start = now();\n\n            // setup\n            el.style.opacity = 0;\n\n            // activate animation\n            cancelId = raf(enter);\n\n            return function(canceled){\n                if (canceled){\n                    rafCancel(cancelId);\n                    el.style.opacity = 1;\n                }\n            };\n\n            function enter(){\n                var deltaTime = now() - start;\n                var proportion = deltaTime/duration;\n\n                // if we're out of time, finish the animation\n                if (deltaTime > duration) {\n                    el.style.opacity = 1;\n                    rafCancel(cancelId);\n                    done();\n                    return;\n                }\n\n                el.style.opacity = proportion;\n                cancelId = raf(enter);\n            }\n        },\n\n        leave: function(element, done){\n            var el = element[0]; // raw element;\n            var cancelId;\n            var start = now();\n\n            // activate animation\n            cancelId = raf(leave);\n\n            return function(canceled){\n                if (canceled){\n                    rafCancel(cancelId);\n                    el.style.opacity = 0;\n                }\n            };\n\n            function leave(){\n                var deltaTime = now() - start;\n                var proportion = 1-deltaTime/duration;\n\n                // if we're out of time, finish the animation\n                if (deltaTime > duration) {\n                    el.style.opacity = 0;\n                    rafCancel(cancelId);\n                    done();\n                    return;\n                }\n\n                el.style.opacity = proportion;\n                cancelId = raf(leave);\n            }\n        }\n\n    };\n}\n\n// $inject doesn't seem to work??\nexport default ['$window', 'timerNow', animation];\n","function animation($window, now){\n\n    var duration = 300;\n    var raf = $window.requestAnimationFrame;\n    var rafCancel = $window.cancelAnimationFrame;\n\n    return {\n        enter: function(element, done){\n            var el = element[0]; // raw element;\n            var cancelId;\n            var start = now();\n\n            // setup\n            el.style.left = '-100%';\n\n            // activate animation\n            cancelId = raf(enter);\n\n            return function(canceled){\n                if (canceled){\n                    rafCancel(cancelId);\n                    el.style.left = '0%';\n                }\n            };\n\n            function enter(){\n                var deltaTime = now() - start;\n                var proportion = 1 - deltaTime/duration;\n\n                // if we're out of time, finish the animation\n                if (deltaTime > duration) {\n                    el.style.left = '0%';\n                    rafCancel(cancelId);\n                    done();\n                    return;\n                }\n\n                el.style.left = (-proportion*100) + '%';\n\n                cancelId = raf(enter);\n            }\n        },\n\n        leave: function(element, done){\n            var el = element[0]; // raw element;\n            var cancelId;\n            var start = now();\n\n            // activate animation\n            cancelId = raf(leave);\n\n            return function(canceled){\n                if (canceled){\n                    rafCancel(cancelId);\n                    el.style.left = '100%';\n                }\n            };\n\n            function leave(){\n                var deltaTime = now() - start;\n                var proportion = deltaTime/duration;\n\n                // if we're out of time, finish the animation\n                if (deltaTime > duration) {\n                    el.style.left = '100%';\n                    rafCancel(cancelId);\n                    done();\n                    return;\n                }\n\n                el.style.left = (proportion*100) + '%';\n                cancelId = raf(leave);\n            }\n        }\n\n    };\n}\n\n// $inject doesn't seem to work??\nexport default ['$window', 'timerNow', animation];\n","/**\n * A factory for $console\n *\n * each $console is prototyped on `consolePrototype`\n */\n\nimport _ from 'lodash';\n\nconsoleProvider.$inject = ['piConsolePrototype'];\n\nfunction consoleProvider(consolePrototype){\n\n    // decorate Console with a simple settings manager\n    Console.setSettings = consoleSetSettings;\n\n    return Console;\n\n    function Console(tags, force){\n        var $console = _.create(consolePrototype);\n\n        _.extend($console, {\n            tags: _.isArray(tags) ? tags : [tags], // make sure tags is an array\n            force: !!force\n        });\n\n        return $console;\n    }\n\n    // a mehtod of console\n    function consoleSetSettings (settings) {\n        consolePrototype.settings = settings;\n    }\n\n}\n\nexport default consoleProvider;\n","/**\n * This is our $console object.\n * It is a bit weird as it is supposed to work in concert with the consoleProvider.\n *\n * it depends on `tags` {Array} and `force` {Boolean} to be set externaly.\n *\n * {\n * \t\tlog: logFn\n * \t\tinfo: infoFn\n * \t\tshouldLog: fn that test whether as specific level should be logged\n * \t\tsettings: settingsObj ==> to be set from piConsole\n * \t\ttags: ['tag1'] // to be compared to settings.tags ==> to be set from piConsole\n * \t\tforce: false // ignore tags and level ==> to be set from piConsole\n * }\n */\n\n\nimport _ from 'lodash';\nvar LOGFUNCTIONS = ['log', 'info', 'warn', 'error', 'debug'];\nvar LEVELS = {none:9, error:1, warn:2, info:3, log:4, debug:4};\n\nconsolePrototypeProvider.$inject = ['$log', '$rootScope'];\nfunction consolePrototypeProvider ($log, $rootScope) {\n    /**\n     * Create the prototype for the instances of piConsole\n     */\n    var consolePrototype = {};\n\n    // add logging function\n    _.each(LOGFUNCTIONS, function(level){\n        consolePrototype[level] = createLog(level);\n    });\n\n    // default settings\n    consolePrototype.settings = {};\n\n    // the function that checks if this instance\n    consolePrototype.shouldLog = shouldLog;\n\n    // if we want the individual functions to be seperable sometime...\n    //_.bindAll(consolePrototype);\n\n    return consolePrototype;\n\n    /**\n     * This function is a method of the consolePrototype.\n     * It accesses the global settings, and the definitions set by Console and returns whether we should log\n     *\n     * @param  {String} level \tThe level of logging we are testing\n     * @return {Boolean}\t\tWhether to log this or not\n     */\n    function shouldLog(level){\n        var targetLevel = this.settings.level || 'warn'; // levels set to show\n        var targetTags = this.settings.tags || 'all'; // tags set to show\n        var tags = this.tags;\n        var force = this.force;\n\n        if (force){\n            return true;\n        }\n\n        // check if this level should *not* be logged\n        if (!~_.indexOf(LOGFUNCTIONS, targetLevel)){\n            this.settings.level = 'error';\n            this.error('Unknow DEBUG level: \"' + targetLevel + '\". The valid levels are debug>info>warn>error>none');\n            return false;\n        }\n\n        if (LEVELS[level] > LEVELS[targetLevel]){\n            return false;\n        }\n\n        // check if these tags should be logged (fit targetTags)\n        if (targetTags !== 'all' && !_.intersection(tags, _.isArray(targetTags) ? targetTags : [targetTags]).length){\n            return false;\n        }\n\n        // if we were not regected, this should be logged\n        return true;\n    }\n\n    /**\n     * Builds the log functions for consolePrototype\n     * @param  {String} level \tLevel name\n     * @return {Function}       A logging function\n     */\n    function createLog (level) {\n        return function(){\n            var settings = this.settings;\n            var i, args = [];\n\n            if (this.shouldLog(level)){\n                // get arguments (so that we don't leak the arguments object)\n                for (i=0; i < arguments.length; i++){args[i] = arguments[i];}\n\n                // do the actual logging\n                $log[level].apply(null, args);\n\n                if (settings.hideConsole){return;}\n\n                // broadcast to the piConsole directive\n                $rootScope.$emit('console:log',{\n                    time: new Date(),\n                    type: level,\n                    args: args,\n                    tags: this.tags\n                });\n\n            }\n        };\n    }\n}\n\nexport default consolePrototypeProvider;\n","\n// This is the only way to get a non js file relatively\nimport template from './console.html';\nimport _ from 'lodash';\n\ndirective.$inject = ['$rootScope'];\nfunction directive($rootScope){\n    return {\n        replace: true,\n        template:template,\n        link: function(scope) {\n            var logs = scope.logs = [];\n\n            scope.remove = remove;\n            scope.reverse = true;\n\n            $rootScope.$on('console:log', function(scope, log){\n                logs.push(log);\n            });\n\n            function remove(log){\n                var index = _.indexOf(logs, log);\n                if (index > -1) {\n                    logs.splice(index, 1);\n                }\n            }\n        }\n    };\n}\n\nexport default directive;\n","import angular from 'angular';\nimport consoleProvider from './consoleProvider';\nimport consolePrototypeProvider from './consolePrototypeProvider';\nimport consoleDirective from './consoleDirective';\n\nexport default module;\n\nvar module = angular.module('piConsole',[]);\n\nmodule.service('piConsole', consoleProvider);\nmodule.service('piConsolePrototype', consolePrototypeProvider);\nmodule.directive('piConsole', consoleDirective);\n\nmodule.filter('stringify', function(){\n    return stringify;\n});\n\nfunction stringify(value, pretty) {\n    if (value == null) { // null || undefined\n        return '<i class=\"text-muted\">undefined</i>';\n    }\n    if (value === '') {\n        return '<i class=\"text-muted\">an empty string</i>';\n    }\n\n    switch (typeof value) {\n        case 'string':\n            break;\n        case 'number':\n            value = '' + value;\n            break;\n        case 'object':\n            // display the error message not the full thing...\n            if (value instanceof Error){\n                value = value.message;\n                break;\n            }\n            /* fall through */\n        default:\n            // @TODO: implement this: http://stackoverflow.com/questions/4810841/how-can-i-pretty-print-json-using-javascript\n            value = '<a href=\"javascript:void(0)\">' + angular.toJson(value, !!pretty) + '</a>';\n    }\n\n    return value;\n}\n","import angular from 'angular';\nimport _ from 'lodash';\nimport manager from './APIs/PImanagerAPI';\nimport time from './APIs/PItimeAPI';\nimport quest from './APIs/PIquestAPI';\nimport {define} from 'requirejs/require';\nimport app from './app';\n\nvar noop = function(){};\nif (!window.console) window.console = {log:noop,info:noop,error:noop};\n\n// setup amd loader with common packages\ndefine('managerAPI', _.constant(manager));\ndefine('timeAPI', _.constant(time));\ndefine('pipAPI', _.constant(time));\ndefine('questAPI', _.constant(quest));\ndefine('lodash', _.constant(_));\ndefine('underscore', _.constant(_));\ndefine('angular', _.constant(angular));\n\n// integrate with erroception\napp.config(['$provide',function($provide) {\n    $provide.decorator('$exceptionHandler', ['$delegate','$window', function($delegate, $window) {\n        return function(exception, cause) {\n            $window._errs && $window._errs.push(exception);\n            $delegate(exception, cause);\n        };\n    }]);\n}]);\n\nangular.element(document).ready(function() {\n    var el = document.getElementById('minno-app');\n    if (el) activate(el);\n});\n\n\nfunction activate(el){\n    angular.bootstrap(el, [app.name]);\n}\n\nexport default activate;\n","/**\n * @license\n * lodash 3.10.1 (Custom Build) <https://lodash.com/>\n * Build: `lodash modern -d -o ./index.js`\n * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\n;(function() {\n\n  /** Used as a safe reference for `undefined` in pre-ES5 environments. */\n  var undefined;\n\n  /** Used as the semantic version number. */\n  var VERSION = '3.10.1';\n\n  /** Used to compose bitmasks for wrapper metadata. */\n  var BIND_FLAG = 1,\n      BIND_KEY_FLAG = 2,\n      CURRY_BOUND_FLAG = 4,\n      CURRY_FLAG = 8,\n      CURRY_RIGHT_FLAG = 16,\n      PARTIAL_FLAG = 32,\n      PARTIAL_RIGHT_FLAG = 64,\n      ARY_FLAG = 128,\n      REARG_FLAG = 256;\n\n  /** Used as default options for `_.trunc`. */\n  var DEFAULT_TRUNC_LENGTH = 30,\n      DEFAULT_TRUNC_OMISSION = '...';\n\n  /** Used to detect when a function becomes hot. */\n  var HOT_COUNT = 150,\n      HOT_SPAN = 16;\n\n  /** Used as the size to enable large array optimizations. */\n  var LARGE_ARRAY_SIZE = 200;\n\n  /** Used to indicate the type of lazy iteratees. */\n  var LAZY_FILTER_FLAG = 1,\n      LAZY_MAP_FLAG = 2;\n\n  /** Used as the `TypeError` message for \"Functions\" methods. */\n  var FUNC_ERROR_TEXT = 'Expected a function';\n\n  /** Used as the internal argument placeholder. */\n  var PLACEHOLDER = '__lodash_placeholder__';\n\n  /** `Object#toString` result references. */\n  var argsTag = '[object Arguments]',\n      arrayTag = '[object Array]',\n      boolTag = '[object Boolean]',\n      dateTag = '[object Date]',\n      errorTag = '[object Error]',\n      funcTag = '[object Function]',\n      mapTag = '[object Map]',\n      numberTag = '[object Number]',\n      objectTag = '[object Object]',\n      regexpTag = '[object RegExp]',\n      setTag = '[object Set]',\n      stringTag = '[object String]',\n      weakMapTag = '[object WeakMap]';\n\n  var arrayBufferTag = '[object ArrayBuffer]',\n      float32Tag = '[object Float32Array]',\n      float64Tag = '[object Float64Array]',\n      int8Tag = '[object Int8Array]',\n      int16Tag = '[object Int16Array]',\n      int32Tag = '[object Int32Array]',\n      uint8Tag = '[object Uint8Array]',\n      uint8ClampedTag = '[object Uint8ClampedArray]',\n      uint16Tag = '[object Uint16Array]',\n      uint32Tag = '[object Uint32Array]';\n\n  /** Used to match empty string literals in compiled template source. */\n  var reEmptyStringLeading = /\\b__p \\+= '';/g,\n      reEmptyStringMiddle = /\\b(__p \\+=) '' \\+/g,\n      reEmptyStringTrailing = /(__e\\(.*?\\)|\\b__t\\)) \\+\\n'';/g;\n\n  /** Used to match HTML entities and HTML characters. */\n  var reEscapedHtml = /&(?:amp|lt|gt|quot|#39|#96);/g,\n      reUnescapedHtml = /[&<>\"'`]/g,\n      reHasEscapedHtml = RegExp(reEscapedHtml.source),\n      reHasUnescapedHtml = RegExp(reUnescapedHtml.source);\n\n  /** Used to match template delimiters. */\n  var reEscape = /<%-([\\s\\S]+?)%>/g,\n      reEvaluate = /<%([\\s\\S]+?)%>/g,\n      reInterpolate = /<%=([\\s\\S]+?)%>/g;\n\n  /** Used to match property names within property paths. */\n  var reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\n\\\\]|\\\\.)*?\\1)\\]/,\n      reIsPlainProp = /^\\w*$/,\n      rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\n\\\\]|\\\\.)*?)\\2)\\]/g;\n\n  /**\n   * Used to match `RegExp` [syntax characters](http://ecma-international.org/ecma-262/6.0/#sec-patterns)\n   * and those outlined by [`EscapeRegExpPattern`](http://ecma-international.org/ecma-262/6.0/#sec-escaperegexppattern).\n   */\n  var reRegExpChars = /^[:!,]|[\\\\^$.*+?()[\\]{}|\\/]|(^[0-9a-fA-Fnrtuvx])|([\\n\\r\\u2028\\u2029])/g,\n      reHasRegExpChars = RegExp(reRegExpChars.source);\n\n  /** Used to match [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks). */\n  var reComboMark = /[\\u0300-\\u036f\\ufe20-\\ufe23]/g;\n\n  /** Used to match backslashes in property paths. */\n  var reEscapeChar = /\\\\(\\\\)?/g;\n\n  /** Used to match [ES template delimiters](http://ecma-international.org/ecma-262/6.0/#sec-template-literal-lexical-components). */\n  var reEsTemplate = /\\$\\{([^\\\\}]*(?:\\\\.[^\\\\}]*)*)\\}/g;\n\n  /** Used to match `RegExp` flags from their coerced string values. */\n  var reFlags = /\\w*$/;\n\n  /** Used to detect hexadecimal string values. */\n  var reHasHexPrefix = /^0[xX]/;\n\n  /** Used to detect host constructors (Safari > 5). */\n  var reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n  /** Used to detect unsigned integer values. */\n  var reIsUint = /^\\d+$/;\n\n  /** Used to match latin-1 supplementary letters (excluding mathematical operators). */\n  var reLatin1 = /[\\xc0-\\xd6\\xd8-\\xde\\xdf-\\xf6\\xf8-\\xff]/g;\n\n  /** Used to ensure capturing order of template delimiters. */\n  var reNoMatch = /($^)/;\n\n  /** Used to match unescaped characters in compiled string literals. */\n  var reUnescapedString = /['\\n\\r\\u2028\\u2029\\\\]/g;\n\n  /** Used to match words to create compound words. */\n  var reWords = (function() {\n    var upper = '[A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde]',\n        lower = '[a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff]+';\n\n    return RegExp(upper + '+(?=' + upper + lower + ')|' + upper + '?' + lower + '|' + upper + '+|[0-9]+', 'g');\n  }());\n\n  /** Used to assign default `context` object properties. */\n  var contextProps = [\n    'Array', 'ArrayBuffer', 'Date', 'Error', 'Float32Array', 'Float64Array',\n    'Function', 'Int8Array', 'Int16Array', 'Int32Array', 'Math', 'Number',\n    'Object', 'RegExp', 'Set', 'String', '_', 'clearTimeout', 'isFinite',\n    'parseFloat', 'parseInt', 'setTimeout', 'TypeError', 'Uint8Array',\n    'Uint8ClampedArray', 'Uint16Array', 'Uint32Array', 'WeakMap'\n  ];\n\n  /** Used to make template sourceURLs easier to identify. */\n  var templateCounter = -1;\n\n  /** Used to identify `toStringTag` values of typed arrays. */\n  var typedArrayTags = {};\n  typedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\n  typedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\n  typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\n  typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\n  typedArrayTags[uint32Tag] = true;\n  typedArrayTags[argsTag] = typedArrayTags[arrayTag] =\n  typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\n  typedArrayTags[dateTag] = typedArrayTags[errorTag] =\n  typedArrayTags[funcTag] = typedArrayTags[mapTag] =\n  typedArrayTags[numberTag] = typedArrayTags[objectTag] =\n  typedArrayTags[regexpTag] = typedArrayTags[setTag] =\n  typedArrayTags[stringTag] = typedArrayTags[weakMapTag] = false;\n\n  /** Used to identify `toStringTag` values supported by `_.clone`. */\n  var cloneableTags = {};\n  cloneableTags[argsTag] = cloneableTags[arrayTag] =\n  cloneableTags[arrayBufferTag] = cloneableTags[boolTag] =\n  cloneableTags[dateTag] = cloneableTags[float32Tag] =\n  cloneableTags[float64Tag] = cloneableTags[int8Tag] =\n  cloneableTags[int16Tag] = cloneableTags[int32Tag] =\n  cloneableTags[numberTag] = cloneableTags[objectTag] =\n  cloneableTags[regexpTag] = cloneableTags[stringTag] =\n  cloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\n  cloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\n  cloneableTags[errorTag] = cloneableTags[funcTag] =\n  cloneableTags[mapTag] = cloneableTags[setTag] =\n  cloneableTags[weakMapTag] = false;\n\n  /** Used to map latin-1 supplementary letters to basic latin letters. */\n  var deburredLetters = {\n    '\\xc0': 'A',  '\\xc1': 'A', '\\xc2': 'A', '\\xc3': 'A', '\\xc4': 'A', '\\xc5': 'A',\n    '\\xe0': 'a',  '\\xe1': 'a', '\\xe2': 'a', '\\xe3': 'a', '\\xe4': 'a', '\\xe5': 'a',\n    '\\xc7': 'C',  '\\xe7': 'c',\n    '\\xd0': 'D',  '\\xf0': 'd',\n    '\\xc8': 'E',  '\\xc9': 'E', '\\xca': 'E', '\\xcb': 'E',\n    '\\xe8': 'e',  '\\xe9': 'e', '\\xea': 'e', '\\xeb': 'e',\n    '\\xcC': 'I',  '\\xcd': 'I', '\\xce': 'I', '\\xcf': 'I',\n    '\\xeC': 'i',  '\\xed': 'i', '\\xee': 'i', '\\xef': 'i',\n    '\\xd1': 'N',  '\\xf1': 'n',\n    '\\xd2': 'O',  '\\xd3': 'O', '\\xd4': 'O', '\\xd5': 'O', '\\xd6': 'O', '\\xd8': 'O',\n    '\\xf2': 'o',  '\\xf3': 'o', '\\xf4': 'o', '\\xf5': 'o', '\\xf6': 'o', '\\xf8': 'o',\n    '\\xd9': 'U',  '\\xda': 'U', '\\xdb': 'U', '\\xdc': 'U',\n    '\\xf9': 'u',  '\\xfa': 'u', '\\xfb': 'u', '\\xfc': 'u',\n    '\\xdd': 'Y',  '\\xfd': 'y', '\\xff': 'y',\n    '\\xc6': 'Ae', '\\xe6': 'ae',\n    '\\xde': 'Th', '\\xfe': 'th',\n    '\\xdf': 'ss'\n  };\n\n  /** Used to map characters to HTML entities. */\n  var htmlEscapes = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '`': '&#96;'\n  };\n\n  /** Used to map HTML entities to characters. */\n  var htmlUnescapes = {\n    '&amp;': '&',\n    '&lt;': '<',\n    '&gt;': '>',\n    '&quot;': '\"',\n    '&#39;': \"'\",\n    '&#96;': '`'\n  };\n\n  /** Used to determine if values are of the language type `Object`. */\n  var objectTypes = {\n    'function': true,\n    'object': true\n  };\n\n  /** Used to escape characters for inclusion in compiled regexes. */\n  var regexpEscapes = {\n    '0': 'x30', '1': 'x31', '2': 'x32', '3': 'x33', '4': 'x34',\n    '5': 'x35', '6': 'x36', '7': 'x37', '8': 'x38', '9': 'x39',\n    'A': 'x41', 'B': 'x42', 'C': 'x43', 'D': 'x44', 'E': 'x45', 'F': 'x46',\n    'a': 'x61', 'b': 'x62', 'c': 'x63', 'd': 'x64', 'e': 'x65', 'f': 'x66',\n    'n': 'x6e', 'r': 'x72', 't': 'x74', 'u': 'x75', 'v': 'x76', 'x': 'x78'\n  };\n\n  /** Used to escape characters for inclusion in compiled string literals. */\n  var stringEscapes = {\n    '\\\\': '\\\\',\n    \"'\": \"'\",\n    '\\n': 'n',\n    '\\r': 'r',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n  };\n\n  /** Detect free variable `exports`. */\n  var freeExports = objectTypes[typeof exports] && exports && !exports.nodeType && exports;\n\n  /** Detect free variable `module`. */\n  var freeModule = objectTypes[typeof module] && module && !module.nodeType && module;\n\n  /** Detect free variable `global` from Node.js. */\n  var freeGlobal = freeExports && freeModule && typeof global == 'object' && global && global.Object && global;\n\n  /** Detect free variable `self`. */\n  var freeSelf = objectTypes[typeof self] && self && self.Object && self;\n\n  /** Detect free variable `window`. */\n  var freeWindow = objectTypes[typeof window] && window && window.Object && window;\n\n  /** Detect the popular CommonJS extension `module.exports`. */\n  var moduleExports = freeModule && freeModule.exports === freeExports && freeExports;\n\n  /**\n   * Used as a reference to the global object.\n   *\n   * The `this` value is used if it's the global object to avoid Greasemonkey's\n   * restricted `window` object, otherwise the `window` object is used.\n   */\n  var root = freeGlobal || ((freeWindow !== (this && this.window)) && freeWindow) || freeSelf || this;\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * The base implementation of `compareAscending` which compares values and\n   * sorts them in ascending order without guaranteeing a stable sort.\n   *\n   * @private\n   * @param {*} value The value to compare.\n   * @param {*} other The other value to compare.\n   * @returns {number} Returns the sort order indicator for `value`.\n   */\n  function baseCompareAscending(value, other) {\n    if (value !== other) {\n      var valIsNull = value === null,\n          valIsUndef = value === undefined,\n          valIsReflexive = value === value;\n\n      var othIsNull = other === null,\n          othIsUndef = other === undefined,\n          othIsReflexive = other === other;\n\n      if ((value > other && !othIsNull) || !valIsReflexive ||\n          (valIsNull && !othIsUndef && othIsReflexive) ||\n          (valIsUndef && othIsReflexive)) {\n        return 1;\n      }\n      if ((value < other && !valIsNull) || !othIsReflexive ||\n          (othIsNull && !valIsUndef && valIsReflexive) ||\n          (othIsUndef && valIsReflexive)) {\n        return -1;\n      }\n    }\n    return 0;\n  }\n\n  /**\n   * The base implementation of `_.findIndex` and `_.findLastIndex` without\n   * support for callback shorthands and `this` binding.\n   *\n   * @private\n   * @param {Array} array The array to search.\n   * @param {Function} predicate The function invoked per iteration.\n   * @param {boolean} [fromRight] Specify iterating from right to left.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function baseFindIndex(array, predicate, fromRight) {\n    var length = array.length,\n        index = fromRight ? length : -1;\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (predicate(array[index], index, array)) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * The base implementation of `_.indexOf` without support for binary searches.\n   *\n   * @private\n   * @param {Array} array The array to search.\n   * @param {*} value The value to search for.\n   * @param {number} fromIndex The index to search from.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function baseIndexOf(array, value, fromIndex) {\n    if (value !== value) {\n      return indexOfNaN(array, fromIndex);\n    }\n    var index = fromIndex - 1,\n        length = array.length;\n\n    while (++index < length) {\n      if (array[index] === value) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * The base implementation of `_.isFunction` without support for environments\n   * with incorrect `typeof` results.\n   *\n   * @private\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n   */\n  function baseIsFunction(value) {\n    // Avoid a Chakra JIT bug in compatibility modes of IE 11.\n    // See https://github.com/jashkenas/underscore/issues/1621 for more details.\n    return typeof value == 'function' || false;\n  }\n\n  /**\n   * Converts `value` to a string if it's not one. An empty string is returned\n   * for `null` or `undefined` values.\n   *\n   * @private\n   * @param {*} value The value to process.\n   * @returns {string} Returns the string.\n   */\n  function baseToString(value) {\n    return value == null ? '' : (value + '');\n  }\n\n  /**\n   * Used by `_.trim` and `_.trimLeft` to get the index of the first character\n   * of `string` that is not found in `chars`.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @param {string} chars The characters to find.\n   * @returns {number} Returns the index of the first character not found in `chars`.\n   */\n  function charsLeftIndex(string, chars) {\n    var index = -1,\n        length = string.length;\n\n    while (++index < length && chars.indexOf(string.charAt(index)) > -1) {}\n    return index;\n  }\n\n  /**\n   * Used by `_.trim` and `_.trimRight` to get the index of the last character\n   * of `string` that is not found in `chars`.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @param {string} chars The characters to find.\n   * @returns {number} Returns the index of the last character not found in `chars`.\n   */\n  function charsRightIndex(string, chars) {\n    var index = string.length;\n\n    while (index-- && chars.indexOf(string.charAt(index)) > -1) {}\n    return index;\n  }\n\n  /**\n   * Used by `_.sortBy` to compare transformed elements of a collection and stable\n   * sort them in ascending order.\n   *\n   * @private\n   * @param {Object} object The object to compare.\n   * @param {Object} other The other object to compare.\n   * @returns {number} Returns the sort order indicator for `object`.\n   */\n  function compareAscending(object, other) {\n    return baseCompareAscending(object.criteria, other.criteria) || (object.index - other.index);\n  }\n\n  /**\n   * Used by `_.sortByOrder` to compare multiple properties of a value to another\n   * and stable sort them.\n   *\n   * If `orders` is unspecified, all valuess are sorted in ascending order. Otherwise,\n   * a value is sorted in ascending order if its corresponding order is \"asc\", and\n   * descending if \"desc\".\n   *\n   * @private\n   * @param {Object} object The object to compare.\n   * @param {Object} other The other object to compare.\n   * @param {boolean[]} orders The order to sort by for each property.\n   * @returns {number} Returns the sort order indicator for `object`.\n   */\n  function compareMultiple(object, other, orders) {\n    var index = -1,\n        objCriteria = object.criteria,\n        othCriteria = other.criteria,\n        length = objCriteria.length,\n        ordersLength = orders.length;\n\n    while (++index < length) {\n      var result = baseCompareAscending(objCriteria[index], othCriteria[index]);\n      if (result) {\n        if (index >= ordersLength) {\n          return result;\n        }\n        var order = orders[index];\n        return result * ((order === 'asc' || order === true) ? 1 : -1);\n      }\n    }\n    // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications\n    // that causes it, under certain circumstances, to provide the same value for\n    // `object` and `other`. See https://github.com/jashkenas/underscore/pull/1247\n    // for more details.\n    //\n    // This also ensures a stable sort in V8 and other engines.\n    // See https://code.google.com/p/v8/issues/detail?id=90 for more details.\n    return object.index - other.index;\n  }\n\n  /**\n   * Used by `_.deburr` to convert latin-1 supplementary letters to basic latin letters.\n   *\n   * @private\n   * @param {string} letter The matched letter to deburr.\n   * @returns {string} Returns the deburred letter.\n   */\n  function deburrLetter(letter) {\n    return deburredLetters[letter];\n  }\n\n  /**\n   * Used by `_.escape` to convert characters to HTML entities.\n   *\n   * @private\n   * @param {string} chr The matched character to escape.\n   * @returns {string} Returns the escaped character.\n   */\n  function escapeHtmlChar(chr) {\n    return htmlEscapes[chr];\n  }\n\n  /**\n   * Used by `_.escapeRegExp` to escape characters for inclusion in compiled regexes.\n   *\n   * @private\n   * @param {string} chr The matched character to escape.\n   * @param {string} leadingChar The capture group for a leading character.\n   * @param {string} whitespaceChar The capture group for a whitespace character.\n   * @returns {string} Returns the escaped character.\n   */\n  function escapeRegExpChar(chr, leadingChar, whitespaceChar) {\n    if (leadingChar) {\n      chr = regexpEscapes[chr];\n    } else if (whitespaceChar) {\n      chr = stringEscapes[chr];\n    }\n    return '\\\\' + chr;\n  }\n\n  /**\n   * Used by `_.template` to escape characters for inclusion in compiled string literals.\n   *\n   * @private\n   * @param {string} chr The matched character to escape.\n   * @returns {string} Returns the escaped character.\n   */\n  function escapeStringChar(chr) {\n    return '\\\\' + stringEscapes[chr];\n  }\n\n  /**\n   * Gets the index at which the first occurrence of `NaN` is found in `array`.\n   *\n   * @private\n   * @param {Array} array The array to search.\n   * @param {number} fromIndex The index to search from.\n   * @param {boolean} [fromRight] Specify iterating from right to left.\n   * @returns {number} Returns the index of the matched `NaN`, else `-1`.\n   */\n  function indexOfNaN(array, fromIndex, fromRight) {\n    var length = array.length,\n        index = fromIndex + (fromRight ? 0 : -1);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      var other = array[index];\n      if (other !== other) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * Checks if `value` is object-like.\n   *\n   * @private\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n   */\n  function isObjectLike(value) {\n    return !!value && typeof value == 'object';\n  }\n\n  /**\n   * Used by `trimmedLeftIndex` and `trimmedRightIndex` to determine if a\n   * character code is whitespace.\n   *\n   * @private\n   * @param {number} charCode The character code to inspect.\n   * @returns {boolean} Returns `true` if `charCode` is whitespace, else `false`.\n   */\n  function isSpace(charCode) {\n    return ((charCode <= 160 && (charCode >= 9 && charCode <= 13) || charCode == 32 || charCode == 160) || charCode == 5760 || charCode == 6158 ||\n      (charCode >= 8192 && (charCode <= 8202 || charCode == 8232 || charCode == 8233 || charCode == 8239 || charCode == 8287 || charCode == 12288 || charCode == 65279)));\n  }\n\n  /**\n   * Replaces all `placeholder` elements in `array` with an internal placeholder\n   * and returns an array of their indexes.\n   *\n   * @private\n   * @param {Array} array The array to modify.\n   * @param {*} placeholder The placeholder to replace.\n   * @returns {Array} Returns the new array of placeholder indexes.\n   */\n  function replaceHolders(array, placeholder) {\n    var index = -1,\n        length = array.length,\n        resIndex = -1,\n        result = [];\n\n    while (++index < length) {\n      if (array[index] === placeholder) {\n        array[index] = PLACEHOLDER;\n        result[++resIndex] = index;\n      }\n    }\n    return result;\n  }\n\n  /**\n   * An implementation of `_.uniq` optimized for sorted arrays without support\n   * for callback shorthands and `this` binding.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {Function} [iteratee] The function invoked per iteration.\n   * @returns {Array} Returns the new duplicate-value-free array.\n   */\n  function sortedUniq(array, iteratee) {\n    var seen,\n        index = -1,\n        length = array.length,\n        resIndex = -1,\n        result = [];\n\n    while (++index < length) {\n      var value = array[index],\n          computed = iteratee ? iteratee(value, index, array) : value;\n\n      if (!index || seen !== computed) {\n        seen = computed;\n        result[++resIndex] = value;\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Used by `_.trim` and `_.trimLeft` to get the index of the first non-whitespace\n   * character of `string`.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @returns {number} Returns the index of the first non-whitespace character.\n   */\n  function trimmedLeftIndex(string) {\n    var index = -1,\n        length = string.length;\n\n    while (++index < length && isSpace(string.charCodeAt(index))) {}\n    return index;\n  }\n\n  /**\n   * Used by `_.trim` and `_.trimRight` to get the index of the last non-whitespace\n   * character of `string`.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @returns {number} Returns the index of the last non-whitespace character.\n   */\n  function trimmedRightIndex(string) {\n    var index = string.length;\n\n    while (index-- && isSpace(string.charCodeAt(index))) {}\n    return index;\n  }\n\n  /**\n   * Used by `_.unescape` to convert HTML entities to characters.\n   *\n   * @private\n   * @param {string} chr The matched character to unescape.\n   * @returns {string} Returns the unescaped character.\n   */\n  function unescapeHtmlChar(chr) {\n    return htmlUnescapes[chr];\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Create a new pristine `lodash` function using the given `context` object.\n   *\n   * @static\n   * @memberOf _\n   * @category Utility\n   * @param {Object} [context=root] The context object.\n   * @returns {Function} Returns a new `lodash` function.\n   * @example\n   *\n   * _.mixin({ 'foo': _.constant('foo') });\n   *\n   * var lodash = _.runInContext();\n   * lodash.mixin({ 'bar': lodash.constant('bar') });\n   *\n   * _.isFunction(_.foo);\n   * // => true\n   * _.isFunction(_.bar);\n   * // => false\n   *\n   * lodash.isFunction(lodash.foo);\n   * // => false\n   * lodash.isFunction(lodash.bar);\n   * // => true\n   *\n   * // using `context` to mock `Date#getTime` use in `_.now`\n   * var mock = _.runInContext({\n   *   'Date': function() {\n   *     return { 'getTime': getTimeMock };\n   *   }\n   * });\n   *\n   * // or creating a suped-up `defer` in Node.js\n   * var defer = _.runInContext({ 'setTimeout': setImmediate }).defer;\n   */\n  function runInContext(context) {\n    // Avoid issues with some ES3 environments that attempt to use values, named\n    // after built-in constructors like `Object`, for the creation of literals.\n    // ES5 clears this up by stating that literals must use built-in constructors.\n    // See https://es5.github.io/#x11.1.5 for more details.\n    context = context ? _.defaults(root.Object(), context, _.pick(root, contextProps)) : root;\n\n    /** Native constructor references. */\n    var Array = context.Array,\n        Date = context.Date,\n        Error = context.Error,\n        Function = context.Function,\n        Math = context.Math,\n        Number = context.Number,\n        Object = context.Object,\n        RegExp = context.RegExp,\n        String = context.String,\n        TypeError = context.TypeError;\n\n    /** Used for native method references. */\n    var arrayProto = Array.prototype,\n        objectProto = Object.prototype,\n        stringProto = String.prototype;\n\n    /** Used to resolve the decompiled source of functions. */\n    var fnToString = Function.prototype.toString;\n\n    /** Used to check objects for own properties. */\n    var hasOwnProperty = objectProto.hasOwnProperty;\n\n    /** Used to generate unique IDs. */\n    var idCounter = 0;\n\n    /**\n     * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n     * of values.\n     */\n    var objToString = objectProto.toString;\n\n    /** Used to restore the original `_` reference in `_.noConflict`. */\n    var oldDash = root._;\n\n    /** Used to detect if a method is native. */\n    var reIsNative = RegExp('^' +\n      fnToString.call(hasOwnProperty).replace(/[\\\\^$.*+?()[\\]{}|]/g, '\\\\$&')\n      .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n    );\n\n    /** Native method references. */\n    var ArrayBuffer = context.ArrayBuffer,\n        clearTimeout = context.clearTimeout,\n        parseFloat = context.parseFloat,\n        pow = Math.pow,\n        propertyIsEnumerable = objectProto.propertyIsEnumerable,\n        Set = getNative(context, 'Set'),\n        setTimeout = context.setTimeout,\n        splice = arrayProto.splice,\n        Uint8Array = context.Uint8Array,\n        WeakMap = getNative(context, 'WeakMap');\n\n    /* Native method references for those with the same name as other `lodash` methods. */\n    var nativeCeil = Math.ceil,\n        nativeCreate = getNative(Object, 'create'),\n        nativeFloor = Math.floor,\n        nativeIsArray = getNative(Array, 'isArray'),\n        nativeIsFinite = context.isFinite,\n        nativeKeys = getNative(Object, 'keys'),\n        nativeMax = Math.max,\n        nativeMin = Math.min,\n        nativeNow = getNative(Date, 'now'),\n        nativeParseInt = context.parseInt,\n        nativeRandom = Math.random;\n\n    /** Used as references for `-Infinity` and `Infinity`. */\n    var NEGATIVE_INFINITY = Number.NEGATIVE_INFINITY,\n        POSITIVE_INFINITY = Number.POSITIVE_INFINITY;\n\n    /** Used as references for the maximum length and index of an array. */\n    var MAX_ARRAY_LENGTH = 4294967295,\n        MAX_ARRAY_INDEX = MAX_ARRAY_LENGTH - 1,\n        HALF_MAX_ARRAY_LENGTH = MAX_ARRAY_LENGTH >>> 1;\n\n    /**\n     * Used as the [maximum length](http://ecma-international.org/ecma-262/6.0/#sec-number.max_safe_integer)\n     * of an array-like value.\n     */\n    var MAX_SAFE_INTEGER = 9007199254740991;\n\n    /** Used to store function metadata. */\n    var metaMap = WeakMap && new WeakMap;\n\n    /** Used to lookup unminified function names. */\n    var realNames = {};\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a `lodash` object which wraps `value` to enable implicit chaining.\n     * Methods that operate on and return arrays, collections, and functions can\n     * be chained together. Methods that retrieve a single value or may return a\n     * primitive value will automatically end the chain returning the unwrapped\n     * value. Explicit chaining may be enabled using `_.chain`. The execution of\n     * chained methods is lazy, that is, execution is deferred until `_#value`\n     * is implicitly or explicitly called.\n     *\n     * Lazy evaluation allows several methods to support shortcut fusion. Shortcut\n     * fusion is an optimization strategy which merge iteratee calls; this can help\n     * to avoid the creation of intermediate data structures and greatly reduce the\n     * number of iteratee executions.\n     *\n     * Chaining is supported in custom builds as long as the `_#value` method is\n     * directly or indirectly included in the build.\n     *\n     * In addition to lodash methods, wrappers have `Array` and `String` methods.\n     *\n     * The wrapper `Array` methods are:\n     * `concat`, `join`, `pop`, `push`, `reverse`, `shift`, `slice`, `sort`,\n     * `splice`, and `unshift`\n     *\n     * The wrapper `String` methods are:\n     * `replace` and `split`\n     *\n     * The wrapper methods that support shortcut fusion are:\n     * `compact`, `drop`, `dropRight`, `dropRightWhile`, `dropWhile`, `filter`,\n     * `first`, `initial`, `last`, `map`, `pluck`, `reject`, `rest`, `reverse`,\n     * `slice`, `take`, `takeRight`, `takeRightWhile`, `takeWhile`, `toArray`,\n     * and `where`\n     *\n     * The chainable wrapper methods are:\n     * `after`, `ary`, `assign`, `at`, `before`, `bind`, `bindAll`, `bindKey`,\n     * `callback`, `chain`, `chunk`, `commit`, `compact`, `concat`, `constant`,\n     * `countBy`, `create`, `curry`, `debounce`, `defaults`, `defaultsDeep`,\n     * `defer`, `delay`, `difference`, `drop`, `dropRight`, `dropRightWhile`,\n     * `dropWhile`, `fill`, `filter`, `flatten`, `flattenDeep`, `flow`, `flowRight`,\n     * `forEach`, `forEachRight`, `forIn`, `forInRight`, `forOwn`, `forOwnRight`,\n     * `functions`, `groupBy`, `indexBy`, `initial`, `intersection`, `invert`,\n     * `invoke`, `keys`, `keysIn`, `map`, `mapKeys`, `mapValues`, `matches`,\n     * `matchesProperty`, `memoize`, `merge`, `method`, `methodOf`, `mixin`,\n     * `modArgs`, `negate`, `omit`, `once`, `pairs`, `partial`, `partialRight`,\n     * `partition`, `pick`, `plant`, `pluck`, `property`, `propertyOf`, `pull`,\n     * `pullAt`, `push`, `range`, `rearg`, `reject`, `remove`, `rest`, `restParam`,\n     * `reverse`, `set`, `shuffle`, `slice`, `sort`, `sortBy`, `sortByAll`,\n     * `sortByOrder`, `splice`, `spread`, `take`, `takeRight`, `takeRightWhile`,\n     * `takeWhile`, `tap`, `throttle`, `thru`, `times`, `toArray`, `toPlainObject`,\n     * `transform`, `union`, `uniq`, `unshift`, `unzip`, `unzipWith`, `values`,\n     * `valuesIn`, `where`, `without`, `wrap`, `xor`, `zip`, `zipObject`, `zipWith`\n     *\n     * The wrapper methods that are **not** chainable by default are:\n     * `add`, `attempt`, `camelCase`, `capitalize`, `ceil`, `clone`, `cloneDeep`,\n     * `deburr`, `endsWith`, `escape`, `escapeRegExp`, `every`, `find`, `findIndex`,\n     * `findKey`, `findLast`, `findLastIndex`, `findLastKey`, `findWhere`, `first`,\n     * `floor`, `get`, `gt`, `gte`, `has`, `identity`, `includes`, `indexOf`,\n     * `inRange`, `isArguments`, `isArray`, `isBoolean`, `isDate`, `isElement`,\n     * `isEmpty`, `isEqual`, `isError`, `isFinite` `isFunction`, `isMatch`,\n     * `isNative`, `isNaN`, `isNull`, `isNumber`, `isObject`, `isPlainObject`,\n     * `isRegExp`, `isString`, `isUndefined`, `isTypedArray`, `join`, `kebabCase`,\n     * `last`, `lastIndexOf`, `lt`, `lte`, `max`, `min`, `noConflict`, `noop`,\n     * `now`, `pad`, `padLeft`, `padRight`, `parseInt`, `pop`, `random`, `reduce`,\n     * `reduceRight`, `repeat`, `result`, `round`, `runInContext`, `shift`, `size`,\n     * `snakeCase`, `some`, `sortedIndex`, `sortedLastIndex`, `startCase`,\n     * `startsWith`, `sum`, `template`, `trim`, `trimLeft`, `trimRight`, `trunc`,\n     * `unescape`, `uniqueId`, `value`, and `words`\n     *\n     * The wrapper method `sample` will return a wrapped value when `n` is provided,\n     * otherwise an unwrapped value is returned.\n     *\n     * @name _\n     * @constructor\n     * @category Chain\n     * @param {*} value The value to wrap in a `lodash` instance.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var wrapped = _([1, 2, 3]);\n     *\n     * // returns an unwrapped value\n     * wrapped.reduce(function(total, n) {\n     *   return total + n;\n     * });\n     * // => 6\n     *\n     * // returns a wrapped value\n     * var squares = wrapped.map(function(n) {\n     *   return n * n;\n     * });\n     *\n     * _.isArray(squares);\n     * // => false\n     *\n     * _.isArray(squares.value());\n     * // => true\n     */\n    function lodash(value) {\n      if (isObjectLike(value) && !isArray(value) && !(value instanceof LazyWrapper)) {\n        if (value instanceof LodashWrapper) {\n          return value;\n        }\n        if (hasOwnProperty.call(value, '__chain__') && hasOwnProperty.call(value, '__wrapped__')) {\n          return wrapperClone(value);\n        }\n      }\n      return new LodashWrapper(value);\n    }\n\n    /**\n     * The function whose prototype all chaining wrappers inherit from.\n     *\n     * @private\n     */\n    function baseLodash() {\n      // No operation performed.\n    }\n\n    /**\n     * The base constructor for creating `lodash` wrapper objects.\n     *\n     * @private\n     * @param {*} value The value to wrap.\n     * @param {boolean} [chainAll] Enable chaining for all wrapper methods.\n     * @param {Array} [actions=[]] Actions to peform to resolve the unwrapped value.\n     */\n    function LodashWrapper(value, chainAll, actions) {\n      this.__wrapped__ = value;\n      this.__actions__ = actions || [];\n      this.__chain__ = !!chainAll;\n    }\n\n    /**\n     * An object environment feature flags.\n     *\n     * @static\n     * @memberOf _\n     * @type Object\n     */\n    var support = lodash.support = {};\n\n    /**\n     * By default, the template delimiters used by lodash are like those in\n     * embedded Ruby (ERB). Change the following template settings to use\n     * alternative delimiters.\n     *\n     * @static\n     * @memberOf _\n     * @type Object\n     */\n    lodash.templateSettings = {\n\n      /**\n       * Used to detect `data` property values to be HTML-escaped.\n       *\n       * @memberOf _.templateSettings\n       * @type RegExp\n       */\n      'escape': reEscape,\n\n      /**\n       * Used to detect code to be evaluated.\n       *\n       * @memberOf _.templateSettings\n       * @type RegExp\n       */\n      'evaluate': reEvaluate,\n\n      /**\n       * Used to detect `data` property values to inject.\n       *\n       * @memberOf _.templateSettings\n       * @type RegExp\n       */\n      'interpolate': reInterpolate,\n\n      /**\n       * Used to reference the data object in the template text.\n       *\n       * @memberOf _.templateSettings\n       * @type string\n       */\n      'variable': '',\n\n      /**\n       * Used to import variables into the compiled template.\n       *\n       * @memberOf _.templateSettings\n       * @type Object\n       */\n      'imports': {\n\n        /**\n         * A reference to the `lodash` function.\n         *\n         * @memberOf _.templateSettings.imports\n         * @type Function\n         */\n        '_': lodash\n      }\n    };\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a lazy wrapper object which wraps `value` to enable lazy evaluation.\n     *\n     * @private\n     * @param {*} value The value to wrap.\n     */\n    function LazyWrapper(value) {\n      this.__wrapped__ = value;\n      this.__actions__ = [];\n      this.__dir__ = 1;\n      this.__filtered__ = false;\n      this.__iteratees__ = [];\n      this.__takeCount__ = POSITIVE_INFINITY;\n      this.__views__ = [];\n    }\n\n    /**\n     * Creates a clone of the lazy wrapper object.\n     *\n     * @private\n     * @name clone\n     * @memberOf LazyWrapper\n     * @returns {Object} Returns the cloned `LazyWrapper` object.\n     */\n    function lazyClone() {\n      var result = new LazyWrapper(this.__wrapped__);\n      result.__actions__ = arrayCopy(this.__actions__);\n      result.__dir__ = this.__dir__;\n      result.__filtered__ = this.__filtered__;\n      result.__iteratees__ = arrayCopy(this.__iteratees__);\n      result.__takeCount__ = this.__takeCount__;\n      result.__views__ = arrayCopy(this.__views__);\n      return result;\n    }\n\n    /**\n     * Reverses the direction of lazy iteration.\n     *\n     * @private\n     * @name reverse\n     * @memberOf LazyWrapper\n     * @returns {Object} Returns the new reversed `LazyWrapper` object.\n     */\n    function lazyReverse() {\n      if (this.__filtered__) {\n        var result = new LazyWrapper(this);\n        result.__dir__ = -1;\n        result.__filtered__ = true;\n      } else {\n        result = this.clone();\n        result.__dir__ *= -1;\n      }\n      return result;\n    }\n\n    /**\n     * Extracts the unwrapped value from its lazy wrapper.\n     *\n     * @private\n     * @name value\n     * @memberOf LazyWrapper\n     * @returns {*} Returns the unwrapped value.\n     */\n    function lazyValue() {\n      var array = this.__wrapped__.value(),\n          dir = this.__dir__,\n          isArr = isArray(array),\n          isRight = dir < 0,\n          arrLength = isArr ? array.length : 0,\n          view = getView(0, arrLength, this.__views__),\n          start = view.start,\n          end = view.end,\n          length = end - start,\n          index = isRight ? end : (start - 1),\n          iteratees = this.__iteratees__,\n          iterLength = iteratees.length,\n          resIndex = 0,\n          takeCount = nativeMin(length, this.__takeCount__);\n\n      if (!isArr || arrLength < LARGE_ARRAY_SIZE || (arrLength == length && takeCount == length)) {\n        return baseWrapperValue((isRight && isArr) ? array.reverse() : array, this.__actions__);\n      }\n      var result = [];\n\n      outer:\n      while (length-- && resIndex < takeCount) {\n        index += dir;\n\n        var iterIndex = -1,\n            value = array[index];\n\n        while (++iterIndex < iterLength) {\n          var data = iteratees[iterIndex],\n              iteratee = data.iteratee,\n              type = data.type,\n              computed = iteratee(value);\n\n          if (type == LAZY_MAP_FLAG) {\n            value = computed;\n          } else if (!computed) {\n            if (type == LAZY_FILTER_FLAG) {\n              continue outer;\n            } else {\n              break outer;\n            }\n          }\n        }\n        result[resIndex++] = value;\n      }\n      return result;\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a cache object to store key/value pairs.\n     *\n     * @private\n     * @static\n     * @name Cache\n     * @memberOf _.memoize\n     */\n    function MapCache() {\n      this.__data__ = {};\n    }\n\n    /**\n     * Removes `key` and its value from the cache.\n     *\n     * @private\n     * @name delete\n     * @memberOf _.memoize.Cache\n     * @param {string} key The key of the value to remove.\n     * @returns {boolean} Returns `true` if the entry was removed successfully, else `false`.\n     */\n    function mapDelete(key) {\n      return this.has(key) && delete this.__data__[key];\n    }\n\n    /**\n     * Gets the cached value for `key`.\n     *\n     * @private\n     * @name get\n     * @memberOf _.memoize.Cache\n     * @param {string} key The key of the value to get.\n     * @returns {*} Returns the cached value.\n     */\n    function mapGet(key) {\n      return key == '__proto__' ? undefined : this.__data__[key];\n    }\n\n    /**\n     * Checks if a cached value for `key` exists.\n     *\n     * @private\n     * @name has\n     * @memberOf _.memoize.Cache\n     * @param {string} key The key of the entry to check.\n     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n     */\n    function mapHas(key) {\n      return key != '__proto__' && hasOwnProperty.call(this.__data__, key);\n    }\n\n    /**\n     * Sets `value` to `key` of the cache.\n     *\n     * @private\n     * @name set\n     * @memberOf _.memoize.Cache\n     * @param {string} key The key of the value to cache.\n     * @param {*} value The value to cache.\n     * @returns {Object} Returns the cache object.\n     */\n    function mapSet(key, value) {\n      if (key != '__proto__') {\n        this.__data__[key] = value;\n      }\n      return this;\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     *\n     * Creates a cache object to store unique values.\n     *\n     * @private\n     * @param {Array} [values] The values to cache.\n     */\n    function SetCache(values) {\n      var length = values ? values.length : 0;\n\n      this.data = { 'hash': nativeCreate(null), 'set': new Set };\n      while (length--) {\n        this.push(values[length]);\n      }\n    }\n\n    /**\n     * Checks if `value` is in `cache` mimicking the return signature of\n     * `_.indexOf` by returning `0` if the value is found, else `-1`.\n     *\n     * @private\n     * @param {Object} cache The cache to search.\n     * @param {*} value The value to search for.\n     * @returns {number} Returns `0` if `value` is found, else `-1`.\n     */\n    function cacheIndexOf(cache, value) {\n      var data = cache.data,\n          result = (typeof value == 'string' || isObject(value)) ? data.set.has(value) : data.hash[value];\n\n      return result ? 0 : -1;\n    }\n\n    /**\n     * Adds `value` to the cache.\n     *\n     * @private\n     * @name push\n     * @memberOf SetCache\n     * @param {*} value The value to cache.\n     */\n    function cachePush(value) {\n      var data = this.data;\n      if (typeof value == 'string' || isObject(value)) {\n        data.set.add(value);\n      } else {\n        data.hash[value] = true;\n      }\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a new array joining `array` with `other`.\n     *\n     * @private\n     * @param {Array} array The array to join.\n     * @param {Array} other The other array to join.\n     * @returns {Array} Returns the new concatenated array.\n     */\n    function arrayConcat(array, other) {\n      var index = -1,\n          length = array.length,\n          othIndex = -1,\n          othLength = other.length,\n          result = Array(length + othLength);\n\n      while (++index < length) {\n        result[index] = array[index];\n      }\n      while (++othIndex < othLength) {\n        result[index++] = other[othIndex];\n      }\n      return result;\n    }\n\n    /**\n     * Copies the values of `source` to `array`.\n     *\n     * @private\n     * @param {Array} source The array to copy values from.\n     * @param {Array} [array=[]] The array to copy values to.\n     * @returns {Array} Returns `array`.\n     */\n    function arrayCopy(source, array) {\n      var index = -1,\n          length = source.length;\n\n      array || (array = Array(length));\n      while (++index < length) {\n        array[index] = source[index];\n      }\n      return array;\n    }\n\n    /**\n     * A specialized version of `_.forEach` for arrays without support for callback\n     * shorthands and `this` binding.\n     *\n     * @private\n     * @param {Array} array The array to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array} Returns `array`.\n     */\n    function arrayEach(array, iteratee) {\n      var index = -1,\n          length = array.length;\n\n      while (++index < length) {\n        if (iteratee(array[index], index, array) === false) {\n          break;\n        }\n      }\n      return array;\n    }\n\n    /**\n     * A specialized version of `_.forEachRight` for arrays without support for\n     * callback shorthands and `this` binding.\n     *\n     * @private\n     * @param {Array} array The array to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array} Returns `array`.\n     */\n    function arrayEachRight(array, iteratee) {\n      var length = array.length;\n\n      while (length--) {\n        if (iteratee(array[length], length, array) === false) {\n          break;\n        }\n      }\n      return array;\n    }\n\n    /**\n     * A specialized version of `_.every` for arrays without support for callback\n     * shorthands and `this` binding.\n     *\n     * @private\n     * @param {Array} array The array to iterate over.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {boolean} Returns `true` if all elements pass the predicate check,\n     *  else `false`.\n     */\n    function arrayEvery(array, predicate) {\n      var index = -1,\n          length = array.length;\n\n      while (++index < length) {\n        if (!predicate(array[index], index, array)) {\n          return false;\n        }\n      }\n      return true;\n    }\n\n    /**\n     * A specialized version of `baseExtremum` for arrays which invokes `iteratee`\n     * with one argument: (value).\n     *\n     * @private\n     * @param {Array} array The array to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @param {Function} comparator The function used to compare values.\n     * @param {*} exValue The initial extremum value.\n     * @returns {*} Returns the extremum value.\n     */\n    function arrayExtremum(array, iteratee, comparator, exValue) {\n      var index = -1,\n          length = array.length,\n          computed = exValue,\n          result = computed;\n\n      while (++index < length) {\n        var value = array[index],\n            current = +iteratee(value);\n\n        if (comparator(current, computed)) {\n          computed = current;\n          result = value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * A specialized version of `_.filter` for arrays without support for callback\n     * shorthands and `this` binding.\n     *\n     * @private\n     * @param {Array} array The array to iterate over.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {Array} Returns the new filtered array.\n     */\n    function arrayFilter(array, predicate) {\n      var index = -1,\n          length = array.length,\n          resIndex = -1,\n          result = [];\n\n      while (++index < length) {\n        var value = array[index];\n        if (predicate(value, index, array)) {\n          result[++resIndex] = value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * A specialized version of `_.map` for arrays without support for callback\n     * shorthands and `this` binding.\n     *\n     * @private\n     * @param {Array} array The array to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array} Returns the new mapped array.\n     */\n    function arrayMap(array, iteratee) {\n      var index = -1,\n          length = array.length,\n          result = Array(length);\n\n      while (++index < length) {\n        result[index] = iteratee(array[index], index, array);\n      }\n      return result;\n    }\n\n    /**\n     * Appends the elements of `values` to `array`.\n     *\n     * @private\n     * @param {Array} array The array to modify.\n     * @param {Array} values The values to append.\n     * @returns {Array} Returns `array`.\n     */\n    function arrayPush(array, values) {\n      var index = -1,\n          length = values.length,\n          offset = array.length;\n\n      while (++index < length) {\n        array[offset + index] = values[index];\n      }\n      return array;\n    }\n\n    /**\n     * A specialized version of `_.reduce` for arrays without support for callback\n     * shorthands and `this` binding.\n     *\n     * @private\n     * @param {Array} array The array to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @param {*} [accumulator] The initial value.\n     * @param {boolean} [initFromArray] Specify using the first element of `array`\n     *  as the initial value.\n     * @returns {*} Returns the accumulated value.\n     */\n    function arrayReduce(array, iteratee, accumulator, initFromArray) {\n      var index = -1,\n          length = array.length;\n\n      if (initFromArray && length) {\n        accumulator = array[++index];\n      }\n      while (++index < length) {\n        accumulator = iteratee(accumulator, array[index], index, array);\n      }\n      return accumulator;\n    }\n\n    /**\n     * A specialized version of `_.reduceRight` for arrays without support for\n     * callback shorthands and `this` binding.\n     *\n     * @private\n     * @param {Array} array The array to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @param {*} [accumulator] The initial value.\n     * @param {boolean} [initFromArray] Specify using the last element of `array`\n     *  as the initial value.\n     * @returns {*} Returns the accumulated value.\n     */\n    function arrayReduceRight(array, iteratee, accumulator, initFromArray) {\n      var length = array.length;\n      if (initFromArray && length) {\n        accumulator = array[--length];\n      }\n      while (length--) {\n        accumulator = iteratee(accumulator, array[length], length, array);\n      }\n      return accumulator;\n    }\n\n    /**\n     * A specialized version of `_.some` for arrays without support for callback\n     * shorthands and `this` binding.\n     *\n     * @private\n     * @param {Array} array The array to iterate over.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {boolean} Returns `true` if any element passes the predicate check,\n     *  else `false`.\n     */\n    function arraySome(array, predicate) {\n      var index = -1,\n          length = array.length;\n\n      while (++index < length) {\n        if (predicate(array[index], index, array)) {\n          return true;\n        }\n      }\n      return false;\n    }\n\n    /**\n     * A specialized version of `_.sum` for arrays without support for callback\n     * shorthands and `this` binding..\n     *\n     * @private\n     * @param {Array} array The array to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {number} Returns the sum.\n     */\n    function arraySum(array, iteratee) {\n      var length = array.length,\n          result = 0;\n\n      while (length--) {\n        result += +iteratee(array[length]) || 0;\n      }\n      return result;\n    }\n\n    /**\n     * Used by `_.defaults` to customize its `_.assign` use.\n     *\n     * @private\n     * @param {*} objectValue The destination object property value.\n     * @param {*} sourceValue The source object property value.\n     * @returns {*} Returns the value to assign to the destination object.\n     */\n    function assignDefaults(objectValue, sourceValue) {\n      return objectValue === undefined ? sourceValue : objectValue;\n    }\n\n    /**\n     * Used by `_.template` to customize its `_.assign` use.\n     *\n     * **Note:** This function is like `assignDefaults` except that it ignores\n     * inherited property values when checking if a property is `undefined`.\n     *\n     * @private\n     * @param {*} objectValue The destination object property value.\n     * @param {*} sourceValue The source object property value.\n     * @param {string} key The key associated with the object and source values.\n     * @param {Object} object The destination object.\n     * @returns {*} Returns the value to assign to the destination object.\n     */\n    function assignOwnDefaults(objectValue, sourceValue, key, object) {\n      return (objectValue === undefined || !hasOwnProperty.call(object, key))\n        ? sourceValue\n        : objectValue;\n    }\n\n    /**\n     * A specialized version of `_.assign` for customizing assigned values without\n     * support for argument juggling, multiple sources, and `this` binding `customizer`\n     * functions.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @param {Function} customizer The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     */\n    function assignWith(object, source, customizer) {\n      var index = -1,\n          props = keys(source),\n          length = props.length;\n\n      while (++index < length) {\n        var key = props[index],\n            value = object[key],\n            result = customizer(value, source[key], key, object, source);\n\n        if ((result === result ? (result !== value) : (value === value)) ||\n            (value === undefined && !(key in object))) {\n          object[key] = result;\n        }\n      }\n      return object;\n    }\n\n    /**\n     * The base implementation of `_.assign` without support for argument juggling,\n     * multiple sources, and `customizer` functions.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @returns {Object} Returns `object`.\n     */\n    function baseAssign(object, source) {\n      return source == null\n        ? object\n        : baseCopy(source, keys(source), object);\n    }\n\n    /**\n     * The base implementation of `_.at` without support for string collections\n     * and individual key arguments.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {number[]|string[]} props The property names or indexes of elements to pick.\n     * @returns {Array} Returns the new array of picked elements.\n     */\n    function baseAt(collection, props) {\n      var index = -1,\n          isNil = collection == null,\n          isArr = !isNil && isArrayLike(collection),\n          length = isArr ? collection.length : 0,\n          propsLength = props.length,\n          result = Array(propsLength);\n\n      while(++index < propsLength) {\n        var key = props[index];\n        if (isArr) {\n          result[index] = isIndex(key, length) ? collection[key] : undefined;\n        } else {\n          result[index] = isNil ? undefined : collection[key];\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Copies properties of `source` to `object`.\n     *\n     * @private\n     * @param {Object} source The object to copy properties from.\n     * @param {Array} props The property names to copy.\n     * @param {Object} [object={}] The object to copy properties to.\n     * @returns {Object} Returns `object`.\n     */\n    function baseCopy(source, props, object) {\n      object || (object = {});\n\n      var index = -1,\n          length = props.length;\n\n      while (++index < length) {\n        var key = props[index];\n        object[key] = source[key];\n      }\n      return object;\n    }\n\n    /**\n     * The base implementation of `_.callback` which supports specifying the\n     * number of arguments to provide to `func`.\n     *\n     * @private\n     * @param {*} [func=_.identity] The value to convert to a callback.\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param {number} [argCount] The number of arguments to provide to `func`.\n     * @returns {Function} Returns the callback.\n     */\n    function baseCallback(func, thisArg, argCount) {\n      var type = typeof func;\n      if (type == 'function') {\n        return thisArg === undefined\n          ? func\n          : bindCallback(func, thisArg, argCount);\n      }\n      if (func == null) {\n        return identity;\n      }\n      if (type == 'object') {\n        return baseMatches(func);\n      }\n      return thisArg === undefined\n        ? property(func)\n        : baseMatchesProperty(func, thisArg);\n    }\n\n    /**\n     * The base implementation of `_.clone` without support for argument juggling\n     * and `this` binding `customizer` functions.\n     *\n     * @private\n     * @param {*} value The value to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @param {Function} [customizer] The function to customize cloning values.\n     * @param {string} [key] The key of `value`.\n     * @param {Object} [object] The object `value` belongs to.\n     * @param {Array} [stackA=[]] Tracks traversed source objects.\n     * @param {Array} [stackB=[]] Associates clones with source counterparts.\n     * @returns {*} Returns the cloned value.\n     */\n    function baseClone(value, isDeep, customizer, key, object, stackA, stackB) {\n      var result;\n      if (customizer) {\n        result = object ? customizer(value, key, object) : customizer(value);\n      }\n      if (result !== undefined) {\n        return result;\n      }\n      if (!isObject(value)) {\n        return value;\n      }\n      var isArr = isArray(value);\n      if (isArr) {\n        result = initCloneArray(value);\n        if (!isDeep) {\n          return arrayCopy(value, result);\n        }\n      } else {\n        var tag = objToString.call(value),\n            isFunc = tag == funcTag;\n\n        if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n          result = initCloneObject(isFunc ? {} : value);\n          if (!isDeep) {\n            return baseAssign(result, value);\n          }\n        } else {\n          return cloneableTags[tag]\n            ? initCloneByTag(value, tag, isDeep)\n            : (object ? value : {});\n        }\n      }\n      // Check for circular references and return its corresponding clone.\n      stackA || (stackA = []);\n      stackB || (stackB = []);\n\n      var length = stackA.length;\n      while (length--) {\n        if (stackA[length] == value) {\n          return stackB[length];\n        }\n      }\n      // Add the source value to the stack of traversed objects and associate it with its clone.\n      stackA.push(value);\n      stackB.push(result);\n\n      // Recursively populate clone (susceptible to call stack limits).\n      (isArr ? arrayEach : baseForOwn)(value, function(subValue, key) {\n        result[key] = baseClone(subValue, isDeep, customizer, key, value, stackA, stackB);\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.create` without support for assigning\n     * properties to the created object.\n     *\n     * @private\n     * @param {Object} prototype The object to inherit from.\n     * @returns {Object} Returns the new object.\n     */\n    var baseCreate = (function() {\n      function object() {}\n      return function(prototype) {\n        if (isObject(prototype)) {\n          object.prototype = prototype;\n          var result = new object;\n          object.prototype = undefined;\n        }\n        return result || {};\n      };\n    }());\n\n    /**\n     * The base implementation of `_.delay` and `_.defer` which accepts an index\n     * of where to slice the arguments to provide to `func`.\n     *\n     * @private\n     * @param {Function} func The function to delay.\n     * @param {number} wait The number of milliseconds to delay invocation.\n     * @param {Object} args The arguments provide to `func`.\n     * @returns {number} Returns the timer id.\n     */\n    function baseDelay(func, wait, args) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      return setTimeout(function() { func.apply(undefined, args); }, wait);\n    }\n\n    /**\n     * The base implementation of `_.difference` which accepts a single array\n     * of values to exclude.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {Array} values The values to exclude.\n     * @returns {Array} Returns the new array of filtered values.\n     */\n    function baseDifference(array, values) {\n      var length = array ? array.length : 0,\n          result = [];\n\n      if (!length) {\n        return result;\n      }\n      var index = -1,\n          indexOf = getIndexOf(),\n          isCommon = indexOf == baseIndexOf,\n          cache = (isCommon && values.length >= LARGE_ARRAY_SIZE) ? createCache(values) : null,\n          valuesLength = values.length;\n\n      if (cache) {\n        indexOf = cacheIndexOf;\n        isCommon = false;\n        values = cache;\n      }\n      outer:\n      while (++index < length) {\n        var value = array[index];\n\n        if (isCommon && value === value) {\n          var valuesIndex = valuesLength;\n          while (valuesIndex--) {\n            if (values[valuesIndex] === value) {\n              continue outer;\n            }\n          }\n          result.push(value);\n        }\n        else if (indexOf(values, value, 0) < 0) {\n          result.push(value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.forEach` without support for callback\n     * shorthands and `this` binding.\n     *\n     * @private\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array|Object|string} Returns `collection`.\n     */\n    var baseEach = createBaseEach(baseForOwn);\n\n    /**\n     * The base implementation of `_.forEachRight` without support for callback\n     * shorthands and `this` binding.\n     *\n     * @private\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array|Object|string} Returns `collection`.\n     */\n    var baseEachRight = createBaseEach(baseForOwnRight, true);\n\n    /**\n     * The base implementation of `_.every` without support for callback\n     * shorthands and `this` binding.\n     *\n     * @private\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {boolean} Returns `true` if all elements pass the predicate check,\n     *  else `false`\n     */\n    function baseEvery(collection, predicate) {\n      var result = true;\n      baseEach(collection, function(value, index, collection) {\n        result = !!predicate(value, index, collection);\n        return result;\n      });\n      return result;\n    }\n\n    /**\n     * Gets the extremum value of `collection` invoking `iteratee` for each value\n     * in `collection` to generate the criterion by which the value is ranked.\n     * The `iteratee` is invoked with three arguments: (value, index|key, collection).\n     *\n     * @private\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @param {Function} comparator The function used to compare values.\n     * @param {*} exValue The initial extremum value.\n     * @returns {*} Returns the extremum value.\n     */\n    function baseExtremum(collection, iteratee, comparator, exValue) {\n      var computed = exValue,\n          result = computed;\n\n      baseEach(collection, function(value, index, collection) {\n        var current = +iteratee(value, index, collection);\n        if (comparator(current, computed) || (current === exValue && current === result)) {\n          computed = current;\n          result = value;\n        }\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.fill` without an iteratee call guard.\n     *\n     * @private\n     * @param {Array} array The array to fill.\n     * @param {*} value The value to fill `array` with.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns `array`.\n     */\n    function baseFill(array, value, start, end) {\n      var length = array.length;\n\n      start = start == null ? 0 : (+start || 0);\n      if (start < 0) {\n        start = -start > length ? 0 : (length + start);\n      }\n      end = (end === undefined || end > length) ? length : (+end || 0);\n      if (end < 0) {\n        end += length;\n      }\n      length = start > end ? 0 : (end >>> 0);\n      start >>>= 0;\n\n      while (start < length) {\n        array[start++] = value;\n      }\n      return array;\n    }\n\n    /**\n     * The base implementation of `_.filter` without support for callback\n     * shorthands and `this` binding.\n     *\n     * @private\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {Array} Returns the new filtered array.\n     */\n    function baseFilter(collection, predicate) {\n      var result = [];\n      baseEach(collection, function(value, index, collection) {\n        if (predicate(value, index, collection)) {\n          result.push(value);\n        }\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.find`, `_.findLast`, `_.findKey`, and `_.findLastKey`,\n     * without support for callback shorthands and `this` binding, which iterates\n     * over `collection` using the provided `eachFunc`.\n     *\n     * @private\n     * @param {Array|Object|string} collection The collection to search.\n     * @param {Function} predicate The function invoked per iteration.\n     * @param {Function} eachFunc The function to iterate over `collection`.\n     * @param {boolean} [retKey] Specify returning the key of the found element\n     *  instead of the element itself.\n     * @returns {*} Returns the found element or its key, else `undefined`.\n     */\n    function baseFind(collection, predicate, eachFunc, retKey) {\n      var result;\n      eachFunc(collection, function(value, key, collection) {\n        if (predicate(value, key, collection)) {\n          result = retKey ? key : value;\n          return false;\n        }\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.flatten` with added support for restricting\n     * flattening and specifying the start index.\n     *\n     * @private\n     * @param {Array} array The array to flatten.\n     * @param {boolean} [isDeep] Specify a deep flatten.\n     * @param {boolean} [isStrict] Restrict flattening to arrays-like objects.\n     * @param {Array} [result=[]] The initial result value.\n     * @returns {Array} Returns the new flattened array.\n     */\n    function baseFlatten(array, isDeep, isStrict, result) {\n      result || (result = []);\n\n      var index = -1,\n          length = array.length;\n\n      while (++index < length) {\n        var value = array[index];\n        if (isObjectLike(value) && isArrayLike(value) &&\n            (isStrict || isArray(value) || isArguments(value))) {\n          if (isDeep) {\n            // Recursively flatten arrays (susceptible to call stack limits).\n            baseFlatten(value, isDeep, isStrict, result);\n          } else {\n            arrayPush(result, value);\n          }\n        } else if (!isStrict) {\n          result[result.length] = value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `baseForIn` and `baseForOwn` which iterates\n     * over `object` properties returned by `keysFunc` invoking `iteratee` for\n     * each property. Iteratee functions may exit iteration early by explicitly\n     * returning `false`.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @param {Function} keysFunc The function to get the keys of `object`.\n     * @returns {Object} Returns `object`.\n     */\n    var baseFor = createBaseFor();\n\n    /**\n     * This function is like `baseFor` except that it iterates over properties\n     * in the opposite order.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @param {Function} keysFunc The function to get the keys of `object`.\n     * @returns {Object} Returns `object`.\n     */\n    var baseForRight = createBaseFor(true);\n\n    /**\n     * The base implementation of `_.forIn` without support for callback\n     * shorthands and `this` binding.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     */\n    function baseForIn(object, iteratee) {\n      return baseFor(object, iteratee, keysIn);\n    }\n\n    /**\n     * The base implementation of `_.forOwn` without support for callback\n     * shorthands and `this` binding.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     */\n    function baseForOwn(object, iteratee) {\n      return baseFor(object, iteratee, keys);\n    }\n\n    /**\n     * The base implementation of `_.forOwnRight` without support for callback\n     * shorthands and `this` binding.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     */\n    function baseForOwnRight(object, iteratee) {\n      return baseForRight(object, iteratee, keys);\n    }\n\n    /**\n     * The base implementation of `_.functions` which creates an array of\n     * `object` function property names filtered from those provided.\n     *\n     * @private\n     * @param {Object} object The object to inspect.\n     * @param {Array} props The property names to filter.\n     * @returns {Array} Returns the new array of filtered property names.\n     */\n    function baseFunctions(object, props) {\n      var index = -1,\n          length = props.length,\n          resIndex = -1,\n          result = [];\n\n      while (++index < length) {\n        var key = props[index];\n        if (isFunction(object[key])) {\n          result[++resIndex] = key;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `get` without support for string paths\n     * and default values.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array} path The path of the property to get.\n     * @param {string} [pathKey] The key representation of path.\n     * @returns {*} Returns the resolved value.\n     */\n    function baseGet(object, path, pathKey) {\n      if (object == null) {\n        return;\n      }\n      if (pathKey !== undefined && pathKey in toObject(object)) {\n        path = [pathKey];\n      }\n      var index = 0,\n          length = path.length;\n\n      while (object != null && index < length) {\n        object = object[path[index++]];\n      }\n      return (index && index == length) ? object : undefined;\n    }\n\n    /**\n     * The base implementation of `_.isEqual` without support for `this` binding\n     * `customizer` functions.\n     *\n     * @private\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @param {Function} [customizer] The function to customize comparing values.\n     * @param {boolean} [isLoose] Specify performing partial comparisons.\n     * @param {Array} [stackA] Tracks traversed `value` objects.\n     * @param {Array} [stackB] Tracks traversed `other` objects.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     */\n    function baseIsEqual(value, other, customizer, isLoose, stackA, stackB) {\n      if (value === other) {\n        return true;\n      }\n      if (value == null || other == null || (!isObject(value) && !isObjectLike(other))) {\n        return value !== value && other !== other;\n      }\n      return baseIsEqualDeep(value, other, baseIsEqual, customizer, isLoose, stackA, stackB);\n    }\n\n    /**\n     * A specialized version of `baseIsEqual` for arrays and objects which performs\n     * deep comparisons and tracks traversed objects enabling objects with circular\n     * references to be compared.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Function} [customizer] The function to customize comparing objects.\n     * @param {boolean} [isLoose] Specify performing partial comparisons.\n     * @param {Array} [stackA=[]] Tracks traversed `value` objects.\n     * @param {Array} [stackB=[]] Tracks traversed `other` objects.\n     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n     */\n    function baseIsEqualDeep(object, other, equalFunc, customizer, isLoose, stackA, stackB) {\n      var objIsArr = isArray(object),\n          othIsArr = isArray(other),\n          objTag = arrayTag,\n          othTag = arrayTag;\n\n      if (!objIsArr) {\n        objTag = objToString.call(object);\n        if (objTag == argsTag) {\n          objTag = objectTag;\n        } else if (objTag != objectTag) {\n          objIsArr = isTypedArray(object);\n        }\n      }\n      if (!othIsArr) {\n        othTag = objToString.call(other);\n        if (othTag == argsTag) {\n          othTag = objectTag;\n        } else if (othTag != objectTag) {\n          othIsArr = isTypedArray(other);\n        }\n      }\n      var objIsObj = objTag == objectTag,\n          othIsObj = othTag == objectTag,\n          isSameTag = objTag == othTag;\n\n      if (isSameTag && !(objIsArr || objIsObj)) {\n        return equalByTag(object, other, objTag);\n      }\n      if (!isLoose) {\n        var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n            othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n        if (objIsWrapped || othIsWrapped) {\n          return equalFunc(objIsWrapped ? object.value() : object, othIsWrapped ? other.value() : other, customizer, isLoose, stackA, stackB);\n        }\n      }\n      if (!isSameTag) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      // For more information on detecting circular references see https://es5.github.io/#JO.\n      stackA || (stackA = []);\n      stackB || (stackB = []);\n\n      var length = stackA.length;\n      while (length--) {\n        if (stackA[length] == object) {\n          return stackB[length] == other;\n        }\n      }\n      // Add `object` and `other` to the stack of traversed objects.\n      stackA.push(object);\n      stackB.push(other);\n\n      var result = (objIsArr ? equalArrays : equalObjects)(object, other, equalFunc, customizer, isLoose, stackA, stackB);\n\n      stackA.pop();\n      stackB.pop();\n\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.isMatch` without support for callback\n     * shorthands and `this` binding.\n     *\n     * @private\n     * @param {Object} object The object to inspect.\n     * @param {Array} matchData The propery names, values, and compare flags to match.\n     * @param {Function} [customizer] The function to customize comparing objects.\n     * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n     */\n    function baseIsMatch(object, matchData, customizer) {\n      var index = matchData.length,\n          length = index,\n          noCustomizer = !customizer;\n\n      if (object == null) {\n        return !length;\n      }\n      object = toObject(object);\n      while (index--) {\n        var data = matchData[index];\n        if ((noCustomizer && data[2])\n              ? data[1] !== object[data[0]]\n              : !(data[0] in object)\n            ) {\n          return false;\n        }\n      }\n      while (++index < length) {\n        data = matchData[index];\n        var key = data[0],\n            objValue = object[key],\n            srcValue = data[1];\n\n        if (noCustomizer && data[2]) {\n          if (objValue === undefined && !(key in object)) {\n            return false;\n          }\n        } else {\n          var result = customizer ? customizer(objValue, srcValue, key) : undefined;\n          if (!(result === undefined ? baseIsEqual(srcValue, objValue, customizer, true) : result)) {\n            return false;\n          }\n        }\n      }\n      return true;\n    }\n\n    /**\n     * The base implementation of `_.map` without support for callback shorthands\n     * and `this` binding.\n     *\n     * @private\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array} Returns the new mapped array.\n     */\n    function baseMap(collection, iteratee) {\n      var index = -1,\n          result = isArrayLike(collection) ? Array(collection.length) : [];\n\n      baseEach(collection, function(value, key, collection) {\n        result[++index] = iteratee(value, key, collection);\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.matches` which does not clone `source`.\n     *\n     * @private\n     * @param {Object} source The object of property values to match.\n     * @returns {Function} Returns the new function.\n     */\n    function baseMatches(source) {\n      var matchData = getMatchData(source);\n      if (matchData.length == 1 && matchData[0][2]) {\n        var key = matchData[0][0],\n            value = matchData[0][1];\n\n        return function(object) {\n          if (object == null) {\n            return false;\n          }\n          return object[key] === value && (value !== undefined || (key in toObject(object)));\n        };\n      }\n      return function(object) {\n        return baseIsMatch(object, matchData);\n      };\n    }\n\n    /**\n     * The base implementation of `_.matchesProperty` which does not clone `srcValue`.\n     *\n     * @private\n     * @param {string} path The path of the property to get.\n     * @param {*} srcValue The value to compare.\n     * @returns {Function} Returns the new function.\n     */\n    function baseMatchesProperty(path, srcValue) {\n      var isArr = isArray(path),\n          isCommon = isKey(path) && isStrictComparable(srcValue),\n          pathKey = (path + '');\n\n      path = toPath(path);\n      return function(object) {\n        if (object == null) {\n          return false;\n        }\n        var key = pathKey;\n        object = toObject(object);\n        if ((isArr || !isCommon) && !(key in object)) {\n          object = path.length == 1 ? object : baseGet(object, baseSlice(path, 0, -1));\n          if (object == null) {\n            return false;\n          }\n          key = last(path);\n          object = toObject(object);\n        }\n        return object[key] === srcValue\n          ? (srcValue !== undefined || (key in object))\n          : baseIsEqual(srcValue, object[key], undefined, true);\n      };\n    }\n\n    /**\n     * The base implementation of `_.merge` without support for argument juggling,\n     * multiple sources, and `this` binding `customizer` functions.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @param {Function} [customizer] The function to customize merged values.\n     * @param {Array} [stackA=[]] Tracks traversed source objects.\n     * @param {Array} [stackB=[]] Associates values with source counterparts.\n     * @returns {Object} Returns `object`.\n     */\n    function baseMerge(object, source, customizer, stackA, stackB) {\n      if (!isObject(object)) {\n        return object;\n      }\n      var isSrcArr = isArrayLike(source) && (isArray(source) || isTypedArray(source)),\n          props = isSrcArr ? undefined : keys(source);\n\n      arrayEach(props || source, function(srcValue, key) {\n        if (props) {\n          key = srcValue;\n          srcValue = source[key];\n        }\n        if (isObjectLike(srcValue)) {\n          stackA || (stackA = []);\n          stackB || (stackB = []);\n          baseMergeDeep(object, source, key, baseMerge, customizer, stackA, stackB);\n        }\n        else {\n          var value = object[key],\n              result = customizer ? customizer(value, srcValue, key, object, source) : undefined,\n              isCommon = result === undefined;\n\n          if (isCommon) {\n            result = srcValue;\n          }\n          if ((result !== undefined || (isSrcArr && !(key in object))) &&\n              (isCommon || (result === result ? (result !== value) : (value === value)))) {\n            object[key] = result;\n          }\n        }\n      });\n      return object;\n    }\n\n    /**\n     * A specialized version of `baseMerge` for arrays and objects which performs\n     * deep merges and tracks traversed objects enabling objects with circular\n     * references to be merged.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @param {string} key The key of the value to merge.\n     * @param {Function} mergeFunc The function to merge values.\n     * @param {Function} [customizer] The function to customize merged values.\n     * @param {Array} [stackA=[]] Tracks traversed source objects.\n     * @param {Array} [stackB=[]] Associates values with source counterparts.\n     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n     */\n    function baseMergeDeep(object, source, key, mergeFunc, customizer, stackA, stackB) {\n      var length = stackA.length,\n          srcValue = source[key];\n\n      while (length--) {\n        if (stackA[length] == srcValue) {\n          object[key] = stackB[length];\n          return;\n        }\n      }\n      var value = object[key],\n          result = customizer ? customizer(value, srcValue, key, object, source) : undefined,\n          isCommon = result === undefined;\n\n      if (isCommon) {\n        result = srcValue;\n        if (isArrayLike(srcValue) && (isArray(srcValue) || isTypedArray(srcValue))) {\n          result = isArray(value)\n            ? value\n            : (isArrayLike(value) ? arrayCopy(value) : []);\n        }\n        else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n          result = isArguments(value)\n            ? toPlainObject(value)\n            : (isPlainObject(value) ? value : {});\n        }\n        else {\n          isCommon = false;\n        }\n      }\n      // Add the source value to the stack of traversed objects and associate\n      // it with its merged value.\n      stackA.push(srcValue);\n      stackB.push(result);\n\n      if (isCommon) {\n        // Recursively merge objects and arrays (susceptible to call stack limits).\n        object[key] = mergeFunc(result, srcValue, customizer, stackA, stackB);\n      } else if (result === result ? (result !== value) : (value === value)) {\n        object[key] = result;\n      }\n    }\n\n    /**\n     * The base implementation of `_.property` without support for deep paths.\n     *\n     * @private\n     * @param {string} key The key of the property to get.\n     * @returns {Function} Returns the new function.\n     */\n    function baseProperty(key) {\n      return function(object) {\n        return object == null ? undefined : object[key];\n      };\n    }\n\n    /**\n     * A specialized version of `baseProperty` which supports deep paths.\n     *\n     * @private\n     * @param {Array|string} path The path of the property to get.\n     * @returns {Function} Returns the new function.\n     */\n    function basePropertyDeep(path) {\n      var pathKey = (path + '');\n      path = toPath(path);\n      return function(object) {\n        return baseGet(object, path, pathKey);\n      };\n    }\n\n    /**\n     * The base implementation of `_.pullAt` without support for individual\n     * index arguments and capturing the removed elements.\n     *\n     * @private\n     * @param {Array} array The array to modify.\n     * @param {number[]} indexes The indexes of elements to remove.\n     * @returns {Array} Returns `array`.\n     */\n    function basePullAt(array, indexes) {\n      var length = array ? indexes.length : 0;\n      while (length--) {\n        var index = indexes[length];\n        if (index != previous && isIndex(index)) {\n          var previous = index;\n          splice.call(array, index, 1);\n        }\n      }\n      return array;\n    }\n\n    /**\n     * The base implementation of `_.random` without support for argument juggling\n     * and returning floating-point numbers.\n     *\n     * @private\n     * @param {number} min The minimum possible value.\n     * @param {number} max The maximum possible value.\n     * @returns {number} Returns the random number.\n     */\n    function baseRandom(min, max) {\n      return min + nativeFloor(nativeRandom() * (max - min + 1));\n    }\n\n    /**\n     * The base implementation of `_.reduce` and `_.reduceRight` without support\n     * for callback shorthands and `this` binding, which iterates over `collection`\n     * using the provided `eachFunc`.\n     *\n     * @private\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @param {*} accumulator The initial value.\n     * @param {boolean} initFromCollection Specify using the first or last element\n     *  of `collection` as the initial value.\n     * @param {Function} eachFunc The function to iterate over `collection`.\n     * @returns {*} Returns the accumulated value.\n     */\n    function baseReduce(collection, iteratee, accumulator, initFromCollection, eachFunc) {\n      eachFunc(collection, function(value, index, collection) {\n        accumulator = initFromCollection\n          ? (initFromCollection = false, value)\n          : iteratee(accumulator, value, index, collection);\n      });\n      return accumulator;\n    }\n\n    /**\n     * The base implementation of `setData` without support for hot loop detection.\n     *\n     * @private\n     * @param {Function} func The function to associate metadata with.\n     * @param {*} data The metadata.\n     * @returns {Function} Returns `func`.\n     */\n    var baseSetData = !metaMap ? identity : function(func, data) {\n      metaMap.set(func, data);\n      return func;\n    };\n\n    /**\n     * The base implementation of `_.slice` without an iteratee call guard.\n     *\n     * @private\n     * @param {Array} array The array to slice.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns the slice of `array`.\n     */\n    function baseSlice(array, start, end) {\n      var index = -1,\n          length = array.length;\n\n      start = start == null ? 0 : (+start || 0);\n      if (start < 0) {\n        start = -start > length ? 0 : (length + start);\n      }\n      end = (end === undefined || end > length) ? length : (+end || 0);\n      if (end < 0) {\n        end += length;\n      }\n      length = start > end ? 0 : ((end - start) >>> 0);\n      start >>>= 0;\n\n      var result = Array(length);\n      while (++index < length) {\n        result[index] = array[index + start];\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.some` without support for callback shorthands\n     * and `this` binding.\n     *\n     * @private\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {boolean} Returns `true` if any element passes the predicate check,\n     *  else `false`.\n     */\n    function baseSome(collection, predicate) {\n      var result;\n\n      baseEach(collection, function(value, index, collection) {\n        result = predicate(value, index, collection);\n        return !result;\n      });\n      return !!result;\n    }\n\n    /**\n     * The base implementation of `_.sortBy` which uses `comparer` to define\n     * the sort order of `array` and replaces criteria objects with their\n     * corresponding values.\n     *\n     * @private\n     * @param {Array} array The array to sort.\n     * @param {Function} comparer The function to define sort order.\n     * @returns {Array} Returns `array`.\n     */\n    function baseSortBy(array, comparer) {\n      var length = array.length;\n\n      array.sort(comparer);\n      while (length--) {\n        array[length] = array[length].value;\n      }\n      return array;\n    }\n\n    /**\n     * The base implementation of `_.sortByOrder` without param guards.\n     *\n     * @private\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.\n     * @param {boolean[]} orders The sort orders of `iteratees`.\n     * @returns {Array} Returns the new sorted array.\n     */\n    function baseSortByOrder(collection, iteratees, orders) {\n      var callback = getCallback(),\n          index = -1;\n\n      iteratees = arrayMap(iteratees, function(iteratee) { return callback(iteratee); });\n\n      var result = baseMap(collection, function(value) {\n        var criteria = arrayMap(iteratees, function(iteratee) { return iteratee(value); });\n        return { 'criteria': criteria, 'index': ++index, 'value': value };\n      });\n\n      return baseSortBy(result, function(object, other) {\n        return compareMultiple(object, other, orders);\n      });\n    }\n\n    /**\n     * The base implementation of `_.sum` without support for callback shorthands\n     * and `this` binding.\n     *\n     * @private\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {number} Returns the sum.\n     */\n    function baseSum(collection, iteratee) {\n      var result = 0;\n      baseEach(collection, function(value, index, collection) {\n        result += +iteratee(value, index, collection) || 0;\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.uniq` without support for callback shorthands\n     * and `this` binding.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {Function} [iteratee] The function invoked per iteration.\n     * @returns {Array} Returns the new duplicate-value-free array.\n     */\n    function baseUniq(array, iteratee) {\n      var index = -1,\n          indexOf = getIndexOf(),\n          length = array.length,\n          isCommon = indexOf == baseIndexOf,\n          isLarge = isCommon && length >= LARGE_ARRAY_SIZE,\n          seen = isLarge ? createCache() : null,\n          result = [];\n\n      if (seen) {\n        indexOf = cacheIndexOf;\n        isCommon = false;\n      } else {\n        isLarge = false;\n        seen = iteratee ? [] : result;\n      }\n      outer:\n      while (++index < length) {\n        var value = array[index],\n            computed = iteratee ? iteratee(value, index, array) : value;\n\n        if (isCommon && value === value) {\n          var seenIndex = seen.length;\n          while (seenIndex--) {\n            if (seen[seenIndex] === computed) {\n              continue outer;\n            }\n          }\n          if (iteratee) {\n            seen.push(computed);\n          }\n          result.push(value);\n        }\n        else if (indexOf(seen, computed, 0) < 0) {\n          if (iteratee || isLarge) {\n            seen.push(computed);\n          }\n          result.push(value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.values` and `_.valuesIn` which creates an\n     * array of `object` property values corresponding to the property names\n     * of `props`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array} props The property names to get values for.\n     * @returns {Object} Returns the array of property values.\n     */\n    function baseValues(object, props) {\n      var index = -1,\n          length = props.length,\n          result = Array(length);\n\n      while (++index < length) {\n        result[index] = object[props[index]];\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.dropRightWhile`, `_.dropWhile`, `_.takeRightWhile`,\n     * and `_.takeWhile` without support for callback shorthands and `this` binding.\n     *\n     * @private\n     * @param {Array} array The array to query.\n     * @param {Function} predicate The function invoked per iteration.\n     * @param {boolean} [isDrop] Specify dropping elements instead of taking them.\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Array} Returns the slice of `array`.\n     */\n    function baseWhile(array, predicate, isDrop, fromRight) {\n      var length = array.length,\n          index = fromRight ? length : -1;\n\n      while ((fromRight ? index-- : ++index < length) && predicate(array[index], index, array)) {}\n      return isDrop\n        ? baseSlice(array, (fromRight ? 0 : index), (fromRight ? index + 1 : length))\n        : baseSlice(array, (fromRight ? index + 1 : 0), (fromRight ? length : index));\n    }\n\n    /**\n     * The base implementation of `wrapperValue` which returns the result of\n     * performing a sequence of actions on the unwrapped `value`, where each\n     * successive action is supplied the return value of the previous.\n     *\n     * @private\n     * @param {*} value The unwrapped value.\n     * @param {Array} actions Actions to peform to resolve the unwrapped value.\n     * @returns {*} Returns the resolved value.\n     */\n    function baseWrapperValue(value, actions) {\n      var result = value;\n      if (result instanceof LazyWrapper) {\n        result = result.value();\n      }\n      var index = -1,\n          length = actions.length;\n\n      while (++index < length) {\n        var action = actions[index];\n        result = action.func.apply(action.thisArg, arrayPush([result], action.args));\n      }\n      return result;\n    }\n\n    /**\n     * Performs a binary search of `array` to determine the index at which `value`\n     * should be inserted into `array` in order to maintain its sort order.\n     *\n     * @private\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {boolean} [retHighest] Specify returning the highest qualified index.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     */\n    function binaryIndex(array, value, retHighest) {\n      var low = 0,\n          high = array ? array.length : low;\n\n      if (typeof value == 'number' && value === value && high <= HALF_MAX_ARRAY_LENGTH) {\n        while (low < high) {\n          var mid = (low + high) >>> 1,\n              computed = array[mid];\n\n          if ((retHighest ? (computed <= value) : (computed < value)) && computed !== null) {\n            low = mid + 1;\n          } else {\n            high = mid;\n          }\n        }\n        return high;\n      }\n      return binaryIndexBy(array, value, identity, retHighest);\n    }\n\n    /**\n     * This function is like `binaryIndex` except that it invokes `iteratee` for\n     * `value` and each element of `array` to compute their sort ranking. The\n     * iteratee is invoked with one argument; (value).\n     *\n     * @private\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @param {boolean} [retHighest] Specify returning the highest qualified index.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     */\n    function binaryIndexBy(array, value, iteratee, retHighest) {\n      value = iteratee(value);\n\n      var low = 0,\n          high = array ? array.length : 0,\n          valIsNaN = value !== value,\n          valIsNull = value === null,\n          valIsUndef = value === undefined;\n\n      while (low < high) {\n        var mid = nativeFloor((low + high) / 2),\n            computed = iteratee(array[mid]),\n            isDef = computed !== undefined,\n            isReflexive = computed === computed;\n\n        if (valIsNaN) {\n          var setLow = isReflexive || retHighest;\n        } else if (valIsNull) {\n          setLow = isReflexive && isDef && (retHighest || computed != null);\n        } else if (valIsUndef) {\n          setLow = isReflexive && (retHighest || isDef);\n        } else if (computed == null) {\n          setLow = false;\n        } else {\n          setLow = retHighest ? (computed <= value) : (computed < value);\n        }\n        if (setLow) {\n          low = mid + 1;\n        } else {\n          high = mid;\n        }\n      }\n      return nativeMin(high, MAX_ARRAY_INDEX);\n    }\n\n    /**\n     * A specialized version of `baseCallback` which only supports `this` binding\n     * and specifying the number of arguments to provide to `func`.\n     *\n     * @private\n     * @param {Function} func The function to bind.\n     * @param {*} thisArg The `this` binding of `func`.\n     * @param {number} [argCount] The number of arguments to provide to `func`.\n     * @returns {Function} Returns the callback.\n     */\n    function bindCallback(func, thisArg, argCount) {\n      if (typeof func != 'function') {\n        return identity;\n      }\n      if (thisArg === undefined) {\n        return func;\n      }\n      switch (argCount) {\n        case 1: return function(value) {\n          return func.call(thisArg, value);\n        };\n        case 3: return function(value, index, collection) {\n          return func.call(thisArg, value, index, collection);\n        };\n        case 4: return function(accumulator, value, index, collection) {\n          return func.call(thisArg, accumulator, value, index, collection);\n        };\n        case 5: return function(value, other, key, object, source) {\n          return func.call(thisArg, value, other, key, object, source);\n        };\n      }\n      return function() {\n        return func.apply(thisArg, arguments);\n      };\n    }\n\n    /**\n     * Creates a clone of the given array buffer.\n     *\n     * @private\n     * @param {ArrayBuffer} buffer The array buffer to clone.\n     * @returns {ArrayBuffer} Returns the cloned array buffer.\n     */\n    function bufferClone(buffer) {\n      var result = new ArrayBuffer(buffer.byteLength),\n          view = new Uint8Array(result);\n\n      view.set(new Uint8Array(buffer));\n      return result;\n    }\n\n    /**\n     * Creates an array that is the composition of partially applied arguments,\n     * placeholders, and provided arguments into a single array of arguments.\n     *\n     * @private\n     * @param {Array|Object} args The provided arguments.\n     * @param {Array} partials The arguments to prepend to those provided.\n     * @param {Array} holders The `partials` placeholder indexes.\n     * @returns {Array} Returns the new array of composed arguments.\n     */\n    function composeArgs(args, partials, holders) {\n      var holdersLength = holders.length,\n          argsIndex = -1,\n          argsLength = nativeMax(args.length - holdersLength, 0),\n          leftIndex = -1,\n          leftLength = partials.length,\n          result = Array(leftLength + argsLength);\n\n      while (++leftIndex < leftLength) {\n        result[leftIndex] = partials[leftIndex];\n      }\n      while (++argsIndex < holdersLength) {\n        result[holders[argsIndex]] = args[argsIndex];\n      }\n      while (argsLength--) {\n        result[leftIndex++] = args[argsIndex++];\n      }\n      return result;\n    }\n\n    /**\n     * This function is like `composeArgs` except that the arguments composition\n     * is tailored for `_.partialRight`.\n     *\n     * @private\n     * @param {Array|Object} args The provided arguments.\n     * @param {Array} partials The arguments to append to those provided.\n     * @param {Array} holders The `partials` placeholder indexes.\n     * @returns {Array} Returns the new array of composed arguments.\n     */\n    function composeArgsRight(args, partials, holders) {\n      var holdersIndex = -1,\n          holdersLength = holders.length,\n          argsIndex = -1,\n          argsLength = nativeMax(args.length - holdersLength, 0),\n          rightIndex = -1,\n          rightLength = partials.length,\n          result = Array(argsLength + rightLength);\n\n      while (++argsIndex < argsLength) {\n        result[argsIndex] = args[argsIndex];\n      }\n      var offset = argsIndex;\n      while (++rightIndex < rightLength) {\n        result[offset + rightIndex] = partials[rightIndex];\n      }\n      while (++holdersIndex < holdersLength) {\n        result[offset + holders[holdersIndex]] = args[argsIndex++];\n      }\n      return result;\n    }\n\n    /**\n     * Creates a `_.countBy`, `_.groupBy`, `_.indexBy`, or `_.partition` function.\n     *\n     * @private\n     * @param {Function} setter The function to set keys and values of the accumulator object.\n     * @param {Function} [initializer] The function to initialize the accumulator object.\n     * @returns {Function} Returns the new aggregator function.\n     */\n    function createAggregator(setter, initializer) {\n      return function(collection, iteratee, thisArg) {\n        var result = initializer ? initializer() : {};\n        iteratee = getCallback(iteratee, thisArg, 3);\n\n        if (isArray(collection)) {\n          var index = -1,\n              length = collection.length;\n\n          while (++index < length) {\n            var value = collection[index];\n            setter(result, value, iteratee(value, index, collection), collection);\n          }\n        } else {\n          baseEach(collection, function(value, key, collection) {\n            setter(result, value, iteratee(value, key, collection), collection);\n          });\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Creates a `_.assign`, `_.defaults`, or `_.merge` function.\n     *\n     * @private\n     * @param {Function} assigner The function to assign values.\n     * @returns {Function} Returns the new assigner function.\n     */\n    function createAssigner(assigner) {\n      return restParam(function(object, sources) {\n        var index = -1,\n            length = object == null ? 0 : sources.length,\n            customizer = length > 2 ? sources[length - 2] : undefined,\n            guard = length > 2 ? sources[2] : undefined,\n            thisArg = length > 1 ? sources[length - 1] : undefined;\n\n        if (typeof customizer == 'function') {\n          customizer = bindCallback(customizer, thisArg, 5);\n          length -= 2;\n        } else {\n          customizer = typeof thisArg == 'function' ? thisArg : undefined;\n          length -= (customizer ? 1 : 0);\n        }\n        if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n          customizer = length < 3 ? undefined : customizer;\n          length = 1;\n        }\n        while (++index < length) {\n          var source = sources[index];\n          if (source) {\n            assigner(object, source, customizer);\n          }\n        }\n        return object;\n      });\n    }\n\n    /**\n     * Creates a `baseEach` or `baseEachRight` function.\n     *\n     * @private\n     * @param {Function} eachFunc The function to iterate over a collection.\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new base function.\n     */\n    function createBaseEach(eachFunc, fromRight) {\n      return function(collection, iteratee) {\n        var length = collection ? getLength(collection) : 0;\n        if (!isLength(length)) {\n          return eachFunc(collection, iteratee);\n        }\n        var index = fromRight ? length : -1,\n            iterable = toObject(collection);\n\n        while ((fromRight ? index-- : ++index < length)) {\n          if (iteratee(iterable[index], index, iterable) === false) {\n            break;\n          }\n        }\n        return collection;\n      };\n    }\n\n    /**\n     * Creates a base function for `_.forIn` or `_.forInRight`.\n     *\n     * @private\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new base function.\n     */\n    function createBaseFor(fromRight) {\n      return function(object, iteratee, keysFunc) {\n        var iterable = toObject(object),\n            props = keysFunc(object),\n            length = props.length,\n            index = fromRight ? length : -1;\n\n        while ((fromRight ? index-- : ++index < length)) {\n          var key = props[index];\n          if (iteratee(iterable[key], key, iterable) === false) {\n            break;\n          }\n        }\n        return object;\n      };\n    }\n\n    /**\n     * Creates a function that wraps `func` and invokes it with the `this`\n     * binding of `thisArg`.\n     *\n     * @private\n     * @param {Function} func The function to bind.\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @returns {Function} Returns the new bound function.\n     */\n    function createBindWrapper(func, thisArg) {\n      var Ctor = createCtorWrapper(func);\n\n      function wrapper() {\n        var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n        return fn.apply(thisArg, arguments);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a `Set` cache object to optimize linear searches of large arrays.\n     *\n     * @private\n     * @param {Array} [values] The values to cache.\n     * @returns {null|Object} Returns the new cache object if `Set` is supported, else `null`.\n     */\n    function createCache(values) {\n      return (nativeCreate && Set) ? new SetCache(values) : null;\n    }\n\n    /**\n     * Creates a function that produces compound words out of the words in a\n     * given string.\n     *\n     * @private\n     * @param {Function} callback The function to combine each word.\n     * @returns {Function} Returns the new compounder function.\n     */\n    function createCompounder(callback) {\n      return function(string) {\n        var index = -1,\n            array = words(deburr(string)),\n            length = array.length,\n            result = '';\n\n        while (++index < length) {\n          result = callback(result, array[index], index);\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Creates a function that produces an instance of `Ctor` regardless of\n     * whether it was invoked as part of a `new` expression or by `call` or `apply`.\n     *\n     * @private\n     * @param {Function} Ctor The constructor to wrap.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createCtorWrapper(Ctor) {\n      return function() {\n        // Use a `switch` statement to work with class constructors.\n        // See http://ecma-international.org/ecma-262/6.0/#sec-ecmascript-function-objects-call-thisargument-argumentslist\n        // for more details.\n        var args = arguments;\n        switch (args.length) {\n          case 0: return new Ctor;\n          case 1: return new Ctor(args[0]);\n          case 2: return new Ctor(args[0], args[1]);\n          case 3: return new Ctor(args[0], args[1], args[2]);\n          case 4: return new Ctor(args[0], args[1], args[2], args[3]);\n          case 5: return new Ctor(args[0], args[1], args[2], args[3], args[4]);\n          case 6: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5]);\n          case 7: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5], args[6]);\n        }\n        var thisBinding = baseCreate(Ctor.prototype),\n            result = Ctor.apply(thisBinding, args);\n\n        // Mimic the constructor's `return` behavior.\n        // See https://es5.github.io/#x13.2.2 for more details.\n        return isObject(result) ? result : thisBinding;\n      };\n    }\n\n    /**\n     * Creates a `_.curry` or `_.curryRight` function.\n     *\n     * @private\n     * @param {boolean} flag The curry bit flag.\n     * @returns {Function} Returns the new curry function.\n     */\n    function createCurry(flag) {\n      function curryFunc(func, arity, guard) {\n        if (guard && isIterateeCall(func, arity, guard)) {\n          arity = undefined;\n        }\n        var result = createWrapper(func, flag, undefined, undefined, undefined, undefined, undefined, arity);\n        result.placeholder = curryFunc.placeholder;\n        return result;\n      }\n      return curryFunc;\n    }\n\n    /**\n     * Creates a `_.defaults` or `_.defaultsDeep` function.\n     *\n     * @private\n     * @param {Function} assigner The function to assign values.\n     * @param {Function} customizer The function to customize assigned values.\n     * @returns {Function} Returns the new defaults function.\n     */\n    function createDefaults(assigner, customizer) {\n      return restParam(function(args) {\n        var object = args[0];\n        if (object == null) {\n          return object;\n        }\n        args.push(customizer);\n        return assigner.apply(undefined, args);\n      });\n    }\n\n    /**\n     * Creates a `_.max` or `_.min` function.\n     *\n     * @private\n     * @param {Function} comparator The function used to compare values.\n     * @param {*} exValue The initial extremum value.\n     * @returns {Function} Returns the new extremum function.\n     */\n    function createExtremum(comparator, exValue) {\n      return function(collection, iteratee, thisArg) {\n        if (thisArg && isIterateeCall(collection, iteratee, thisArg)) {\n          iteratee = undefined;\n        }\n        iteratee = getCallback(iteratee, thisArg, 3);\n        if (iteratee.length == 1) {\n          collection = isArray(collection) ? collection : toIterable(collection);\n          var result = arrayExtremum(collection, iteratee, comparator, exValue);\n          if (!(collection.length && result === exValue)) {\n            return result;\n          }\n        }\n        return baseExtremum(collection, iteratee, comparator, exValue);\n      };\n    }\n\n    /**\n     * Creates a `_.find` or `_.findLast` function.\n     *\n     * @private\n     * @param {Function} eachFunc The function to iterate over a collection.\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new find function.\n     */\n    function createFind(eachFunc, fromRight) {\n      return function(collection, predicate, thisArg) {\n        predicate = getCallback(predicate, thisArg, 3);\n        if (isArray(collection)) {\n          var index = baseFindIndex(collection, predicate, fromRight);\n          return index > -1 ? collection[index] : undefined;\n        }\n        return baseFind(collection, predicate, eachFunc);\n      };\n    }\n\n    /**\n     * Creates a `_.findIndex` or `_.findLastIndex` function.\n     *\n     * @private\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new find function.\n     */\n    function createFindIndex(fromRight) {\n      return function(array, predicate, thisArg) {\n        if (!(array && array.length)) {\n          return -1;\n        }\n        predicate = getCallback(predicate, thisArg, 3);\n        return baseFindIndex(array, predicate, fromRight);\n      };\n    }\n\n    /**\n     * Creates a `_.findKey` or `_.findLastKey` function.\n     *\n     * @private\n     * @param {Function} objectFunc The function to iterate over an object.\n     * @returns {Function} Returns the new find function.\n     */\n    function createFindKey(objectFunc) {\n      return function(object, predicate, thisArg) {\n        predicate = getCallback(predicate, thisArg, 3);\n        return baseFind(object, predicate, objectFunc, true);\n      };\n    }\n\n    /**\n     * Creates a `_.flow` or `_.flowRight` function.\n     *\n     * @private\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new flow function.\n     */\n    function createFlow(fromRight) {\n      return function() {\n        var wrapper,\n            length = arguments.length,\n            index = fromRight ? length : -1,\n            leftIndex = 0,\n            funcs = Array(length);\n\n        while ((fromRight ? index-- : ++index < length)) {\n          var func = funcs[leftIndex++] = arguments[index];\n          if (typeof func != 'function') {\n            throw new TypeError(FUNC_ERROR_TEXT);\n          }\n          if (!wrapper && LodashWrapper.prototype.thru && getFuncName(func) == 'wrapper') {\n            wrapper = new LodashWrapper([], true);\n          }\n        }\n        index = wrapper ? -1 : length;\n        while (++index < length) {\n          func = funcs[index];\n\n          var funcName = getFuncName(func),\n              data = funcName == 'wrapper' ? getData(func) : undefined;\n\n          if (data && isLaziable(data[0]) && data[1] == (ARY_FLAG | CURRY_FLAG | PARTIAL_FLAG | REARG_FLAG) && !data[4].length && data[9] == 1) {\n            wrapper = wrapper[getFuncName(data[0])].apply(wrapper, data[3]);\n          } else {\n            wrapper = (func.length == 1 && isLaziable(func)) ? wrapper[funcName]() : wrapper.thru(func);\n          }\n        }\n        return function() {\n          var args = arguments,\n              value = args[0];\n\n          if (wrapper && args.length == 1 && isArray(value) && value.length >= LARGE_ARRAY_SIZE) {\n            return wrapper.plant(value).value();\n          }\n          var index = 0,\n              result = length ? funcs[index].apply(this, args) : value;\n\n          while (++index < length) {\n            result = funcs[index].call(this, result);\n          }\n          return result;\n        };\n      };\n    }\n\n    /**\n     * Creates a function for `_.forEach` or `_.forEachRight`.\n     *\n     * @private\n     * @param {Function} arrayFunc The function to iterate over an array.\n     * @param {Function} eachFunc The function to iterate over a collection.\n     * @returns {Function} Returns the new each function.\n     */\n    function createForEach(arrayFunc, eachFunc) {\n      return function(collection, iteratee, thisArg) {\n        return (typeof iteratee == 'function' && thisArg === undefined && isArray(collection))\n          ? arrayFunc(collection, iteratee)\n          : eachFunc(collection, bindCallback(iteratee, thisArg, 3));\n      };\n    }\n\n    /**\n     * Creates a function for `_.forIn` or `_.forInRight`.\n     *\n     * @private\n     * @param {Function} objectFunc The function to iterate over an object.\n     * @returns {Function} Returns the new each function.\n     */\n    function createForIn(objectFunc) {\n      return function(object, iteratee, thisArg) {\n        if (typeof iteratee != 'function' || thisArg !== undefined) {\n          iteratee = bindCallback(iteratee, thisArg, 3);\n        }\n        return objectFunc(object, iteratee, keysIn);\n      };\n    }\n\n    /**\n     * Creates a function for `_.forOwn` or `_.forOwnRight`.\n     *\n     * @private\n     * @param {Function} objectFunc The function to iterate over an object.\n     * @returns {Function} Returns the new each function.\n     */\n    function createForOwn(objectFunc) {\n      return function(object, iteratee, thisArg) {\n        if (typeof iteratee != 'function' || thisArg !== undefined) {\n          iteratee = bindCallback(iteratee, thisArg, 3);\n        }\n        return objectFunc(object, iteratee);\n      };\n    }\n\n    /**\n     * Creates a function for `_.mapKeys` or `_.mapValues`.\n     *\n     * @private\n     * @param {boolean} [isMapKeys] Specify mapping keys instead of values.\n     * @returns {Function} Returns the new map function.\n     */\n    function createObjectMapper(isMapKeys) {\n      return function(object, iteratee, thisArg) {\n        var result = {};\n        iteratee = getCallback(iteratee, thisArg, 3);\n\n        baseForOwn(object, function(value, key, object) {\n          var mapped = iteratee(value, key, object);\n          key = isMapKeys ? mapped : key;\n          value = isMapKeys ? value : mapped;\n          result[key] = value;\n        });\n        return result;\n      };\n    }\n\n    /**\n     * Creates a function for `_.padLeft` or `_.padRight`.\n     *\n     * @private\n     * @param {boolean} [fromRight] Specify padding from the right.\n     * @returns {Function} Returns the new pad function.\n     */\n    function createPadDir(fromRight) {\n      return function(string, length, chars) {\n        string = baseToString(string);\n        return (fromRight ? string : '') + createPadding(string, length, chars) + (fromRight ? '' : string);\n      };\n    }\n\n    /**\n     * Creates a `_.partial` or `_.partialRight` function.\n     *\n     * @private\n     * @param {boolean} flag The partial bit flag.\n     * @returns {Function} Returns the new partial function.\n     */\n    function createPartial(flag) {\n      var partialFunc = restParam(function(func, partials) {\n        var holders = replaceHolders(partials, partialFunc.placeholder);\n        return createWrapper(func, flag, undefined, partials, holders);\n      });\n      return partialFunc;\n    }\n\n    /**\n     * Creates a function for `_.reduce` or `_.reduceRight`.\n     *\n     * @private\n     * @param {Function} arrayFunc The function to iterate over an array.\n     * @param {Function} eachFunc The function to iterate over a collection.\n     * @returns {Function} Returns the new each function.\n     */\n    function createReduce(arrayFunc, eachFunc) {\n      return function(collection, iteratee, accumulator, thisArg) {\n        var initFromArray = arguments.length < 3;\n        return (typeof iteratee == 'function' && thisArg === undefined && isArray(collection))\n          ? arrayFunc(collection, iteratee, accumulator, initFromArray)\n          : baseReduce(collection, getCallback(iteratee, thisArg, 4), accumulator, initFromArray, eachFunc);\n      };\n    }\n\n    /**\n     * Creates a function that wraps `func` and invokes it with optional `this`\n     * binding of, partial application, and currying.\n     *\n     * @private\n     * @param {Function|string} func The function or method name to reference.\n     * @param {number} bitmask The bitmask of flags. See `createWrapper` for more details.\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param {Array} [partials] The arguments to prepend to those provided to the new function.\n     * @param {Array} [holders] The `partials` placeholder indexes.\n     * @param {Array} [partialsRight] The arguments to append to those provided to the new function.\n     * @param {Array} [holdersRight] The `partialsRight` placeholder indexes.\n     * @param {Array} [argPos] The argument positions of the new function.\n     * @param {number} [ary] The arity cap of `func`.\n     * @param {number} [arity] The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createHybridWrapper(func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity) {\n      var isAry = bitmask & ARY_FLAG,\n          isBind = bitmask & BIND_FLAG,\n          isBindKey = bitmask & BIND_KEY_FLAG,\n          isCurry = bitmask & CURRY_FLAG,\n          isCurryBound = bitmask & CURRY_BOUND_FLAG,\n          isCurryRight = bitmask & CURRY_RIGHT_FLAG,\n          Ctor = isBindKey ? undefined : createCtorWrapper(func);\n\n      function wrapper() {\n        // Avoid `arguments` object use disqualifying optimizations by\n        // converting it to an array before providing it to other functions.\n        var length = arguments.length,\n            index = length,\n            args = Array(length);\n\n        while (index--) {\n          args[index] = arguments[index];\n        }\n        if (partials) {\n          args = composeArgs(args, partials, holders);\n        }\n        if (partialsRight) {\n          args = composeArgsRight(args, partialsRight, holdersRight);\n        }\n        if (isCurry || isCurryRight) {\n          var placeholder = wrapper.placeholder,\n              argsHolders = replaceHolders(args, placeholder);\n\n          length -= argsHolders.length;\n          if (length < arity) {\n            var newArgPos = argPos ? arrayCopy(argPos) : undefined,\n                newArity = nativeMax(arity - length, 0),\n                newsHolders = isCurry ? argsHolders : undefined,\n                newHoldersRight = isCurry ? undefined : argsHolders,\n                newPartials = isCurry ? args : undefined,\n                newPartialsRight = isCurry ? undefined : args;\n\n            bitmask |= (isCurry ? PARTIAL_FLAG : PARTIAL_RIGHT_FLAG);\n            bitmask &= ~(isCurry ? PARTIAL_RIGHT_FLAG : PARTIAL_FLAG);\n\n            if (!isCurryBound) {\n              bitmask &= ~(BIND_FLAG | BIND_KEY_FLAG);\n            }\n            var newData = [func, bitmask, thisArg, newPartials, newsHolders, newPartialsRight, newHoldersRight, newArgPos, ary, newArity],\n                result = createHybridWrapper.apply(undefined, newData);\n\n            if (isLaziable(func)) {\n              setData(result, newData);\n            }\n            result.placeholder = placeholder;\n            return result;\n          }\n        }\n        var thisBinding = isBind ? thisArg : this,\n            fn = isBindKey ? thisBinding[func] : func;\n\n        if (argPos) {\n          args = reorder(args, argPos);\n        }\n        if (isAry && ary < args.length) {\n          args.length = ary;\n        }\n        if (this && this !== root && this instanceof wrapper) {\n          fn = Ctor || createCtorWrapper(func);\n        }\n        return fn.apply(thisBinding, args);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates the padding required for `string` based on the given `length`.\n     * The `chars` string is truncated if the number of characters exceeds `length`.\n     *\n     * @private\n     * @param {string} string The string to create padding for.\n     * @param {number} [length=0] The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the pad for `string`.\n     */\n    function createPadding(string, length, chars) {\n      var strLength = string.length;\n      length = +length;\n\n      if (strLength >= length || !nativeIsFinite(length)) {\n        return '';\n      }\n      var padLength = length - strLength;\n      chars = chars == null ? ' ' : (chars + '');\n      return repeat(chars, nativeCeil(padLength / chars.length)).slice(0, padLength);\n    }\n\n    /**\n     * Creates a function that wraps `func` and invokes it with the optional `this`\n     * binding of `thisArg` and the `partials` prepended to those provided to\n     * the wrapper.\n     *\n     * @private\n     * @param {Function} func The function to partially apply arguments to.\n     * @param {number} bitmask The bitmask of flags. See `createWrapper` for more details.\n     * @param {*} thisArg The `this` binding of `func`.\n     * @param {Array} partials The arguments to prepend to those provided to the new function.\n     * @returns {Function} Returns the new bound function.\n     */\n    function createPartialWrapper(func, bitmask, thisArg, partials) {\n      var isBind = bitmask & BIND_FLAG,\n          Ctor = createCtorWrapper(func);\n\n      function wrapper() {\n        // Avoid `arguments` object use disqualifying optimizations by\n        // converting it to an array before providing it `func`.\n        var argsIndex = -1,\n            argsLength = arguments.length,\n            leftIndex = -1,\n            leftLength = partials.length,\n            args = Array(leftLength + argsLength);\n\n        while (++leftIndex < leftLength) {\n          args[leftIndex] = partials[leftIndex];\n        }\n        while (argsLength--) {\n          args[leftIndex++] = arguments[++argsIndex];\n        }\n        var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n        return fn.apply(isBind ? thisArg : this, args);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a `_.ceil`, `_.floor`, or `_.round` function.\n     *\n     * @private\n     * @param {string} methodName The name of the `Math` method to use when rounding.\n     * @returns {Function} Returns the new round function.\n     */\n    function createRound(methodName) {\n      var func = Math[methodName];\n      return function(number, precision) {\n        precision = precision === undefined ? 0 : (+precision || 0);\n        if (precision) {\n          precision = pow(10, precision);\n          return func(number * precision) / precision;\n        }\n        return func(number);\n      };\n    }\n\n    /**\n     * Creates a `_.sortedIndex` or `_.sortedLastIndex` function.\n     *\n     * @private\n     * @param {boolean} [retHighest] Specify returning the highest qualified index.\n     * @returns {Function} Returns the new index function.\n     */\n    function createSortedIndex(retHighest) {\n      return function(array, value, iteratee, thisArg) {\n        var callback = getCallback(iteratee);\n        return (iteratee == null && callback === baseCallback)\n          ? binaryIndex(array, value, retHighest)\n          : binaryIndexBy(array, value, callback(iteratee, thisArg, 1), retHighest);\n      };\n    }\n\n    /**\n     * Creates a function that either curries or invokes `func` with optional\n     * `this` binding and partially applied arguments.\n     *\n     * @private\n     * @param {Function|string} func The function or method name to reference.\n     * @param {number} bitmask The bitmask of flags.\n     *  The bitmask may be composed of the following flags:\n     *     1 - `_.bind`\n     *     2 - `_.bindKey`\n     *     4 - `_.curry` or `_.curryRight` of a bound function\n     *     8 - `_.curry`\n     *    16 - `_.curryRight`\n     *    32 - `_.partial`\n     *    64 - `_.partialRight`\n     *   128 - `_.rearg`\n     *   256 - `_.ary`\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param {Array} [partials] The arguments to be partially applied.\n     * @param {Array} [holders] The `partials` placeholder indexes.\n     * @param {Array} [argPos] The argument positions of the new function.\n     * @param {number} [ary] The arity cap of `func`.\n     * @param {number} [arity] The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createWrapper(func, bitmask, thisArg, partials, holders, argPos, ary, arity) {\n      var isBindKey = bitmask & BIND_KEY_FLAG;\n      if (!isBindKey && typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      var length = partials ? partials.length : 0;\n      if (!length) {\n        bitmask &= ~(PARTIAL_FLAG | PARTIAL_RIGHT_FLAG);\n        partials = holders = undefined;\n      }\n      length -= (holders ? holders.length : 0);\n      if (bitmask & PARTIAL_RIGHT_FLAG) {\n        var partialsRight = partials,\n            holdersRight = holders;\n\n        partials = holders = undefined;\n      }\n      var data = isBindKey ? undefined : getData(func),\n          newData = [func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity];\n\n      if (data) {\n        mergeData(newData, data);\n        bitmask = newData[1];\n        arity = newData[9];\n      }\n      newData[9] = arity == null\n        ? (isBindKey ? 0 : func.length)\n        : (nativeMax(arity - length, 0) || 0);\n\n      if (bitmask == BIND_FLAG) {\n        var result = createBindWrapper(newData[0], newData[2]);\n      } else if ((bitmask == PARTIAL_FLAG || bitmask == (BIND_FLAG | PARTIAL_FLAG)) && !newData[4].length) {\n        result = createPartialWrapper.apply(undefined, newData);\n      } else {\n        result = createHybridWrapper.apply(undefined, newData);\n      }\n      var setter = data ? baseSetData : setData;\n      return setter(result, newData);\n    }\n\n    /**\n     * A specialized version of `baseIsEqualDeep` for arrays with support for\n     * partial deep comparisons.\n     *\n     * @private\n     * @param {Array} array The array to compare.\n     * @param {Array} other The other array to compare.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Function} [customizer] The function to customize comparing arrays.\n     * @param {boolean} [isLoose] Specify performing partial comparisons.\n     * @param {Array} [stackA] Tracks traversed `value` objects.\n     * @param {Array} [stackB] Tracks traversed `other` objects.\n     * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n     */\n    function equalArrays(array, other, equalFunc, customizer, isLoose, stackA, stackB) {\n      var index = -1,\n          arrLength = array.length,\n          othLength = other.length;\n\n      if (arrLength != othLength && !(isLoose && othLength > arrLength)) {\n        return false;\n      }\n      // Ignore non-index properties.\n      while (++index < arrLength) {\n        var arrValue = array[index],\n            othValue = other[index],\n            result = customizer ? customizer(isLoose ? othValue : arrValue, isLoose ? arrValue : othValue, index) : undefined;\n\n        if (result !== undefined) {\n          if (result) {\n            continue;\n          }\n          return false;\n        }\n        // Recursively compare arrays (susceptible to call stack limits).\n        if (isLoose) {\n          if (!arraySome(other, function(othValue) {\n                return arrValue === othValue || equalFunc(arrValue, othValue, customizer, isLoose, stackA, stackB);\n              })) {\n            return false;\n          }\n        } else if (!(arrValue === othValue || equalFunc(arrValue, othValue, customizer, isLoose, stackA, stackB))) {\n          return false;\n        }\n      }\n      return true;\n    }\n\n    /**\n     * A specialized version of `baseIsEqualDeep` for comparing objects of\n     * the same `toStringTag`.\n     *\n     * **Note:** This function only supports comparing values with tags of\n     * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {string} tag The `toStringTag` of the objects to compare.\n     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n     */\n    function equalByTag(object, other, tag) {\n      switch (tag) {\n        case boolTag:\n        case dateTag:\n          // Coerce dates and booleans to numbers, dates to milliseconds and booleans\n          // to `1` or `0` treating invalid dates coerced to `NaN` as not equal.\n          return +object == +other;\n\n        case errorTag:\n          return object.name == other.name && object.message == other.message;\n\n        case numberTag:\n          // Treat `NaN` vs. `NaN` as equal.\n          return (object != +object)\n            ? other != +other\n            : object == +other;\n\n        case regexpTag:\n        case stringTag:\n          // Coerce regexes to strings and treat strings primitives and string\n          // objects as equal. See https://es5.github.io/#x15.10.6.4 for more details.\n          return object == (other + '');\n      }\n      return false;\n    }\n\n    /**\n     * A specialized version of `baseIsEqualDeep` for objects with support for\n     * partial deep comparisons.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Function} [customizer] The function to customize comparing values.\n     * @param {boolean} [isLoose] Specify performing partial comparisons.\n     * @param {Array} [stackA] Tracks traversed `value` objects.\n     * @param {Array} [stackB] Tracks traversed `other` objects.\n     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n     */\n    function equalObjects(object, other, equalFunc, customizer, isLoose, stackA, stackB) {\n      var objProps = keys(object),\n          objLength = objProps.length,\n          othProps = keys(other),\n          othLength = othProps.length;\n\n      if (objLength != othLength && !isLoose) {\n        return false;\n      }\n      var index = objLength;\n      while (index--) {\n        var key = objProps[index];\n        if (!(isLoose ? key in other : hasOwnProperty.call(other, key))) {\n          return false;\n        }\n      }\n      var skipCtor = isLoose;\n      while (++index < objLength) {\n        key = objProps[index];\n        var objValue = object[key],\n            othValue = other[key],\n            result = customizer ? customizer(isLoose ? othValue : objValue, isLoose? objValue : othValue, key) : undefined;\n\n        // Recursively compare objects (susceptible to call stack limits).\n        if (!(result === undefined ? equalFunc(objValue, othValue, customizer, isLoose, stackA, stackB) : result)) {\n          return false;\n        }\n        skipCtor || (skipCtor = key == 'constructor');\n      }\n      if (!skipCtor) {\n        var objCtor = object.constructor,\n            othCtor = other.constructor;\n\n        // Non `Object` object instances with different constructors are not equal.\n        if (objCtor != othCtor &&\n            ('constructor' in object && 'constructor' in other) &&\n            !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n              typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n          return false;\n        }\n      }\n      return true;\n    }\n\n    /**\n     * Gets the appropriate \"callback\" function. If the `_.callback` method is\n     * customized this function returns the custom method, otherwise it returns\n     * the `baseCallback` function. If arguments are provided the chosen function\n     * is invoked with them and its result is returned.\n     *\n     * @private\n     * @returns {Function} Returns the chosen function or its result.\n     */\n    function getCallback(func, thisArg, argCount) {\n      var result = lodash.callback || callback;\n      result = result === callback ? baseCallback : result;\n      return argCount ? result(func, thisArg, argCount) : result;\n    }\n\n    /**\n     * Gets metadata for `func`.\n     *\n     * @private\n     * @param {Function} func The function to query.\n     * @returns {*} Returns the metadata for `func`.\n     */\n    var getData = !metaMap ? noop : function(func) {\n      return metaMap.get(func);\n    };\n\n    /**\n     * Gets the name of `func`.\n     *\n     * @private\n     * @param {Function} func The function to query.\n     * @returns {string} Returns the function name.\n     */\n    function getFuncName(func) {\n      var result = func.name,\n          array = realNames[result],\n          length = array ? array.length : 0;\n\n      while (length--) {\n        var data = array[length],\n            otherFunc = data.func;\n        if (otherFunc == null || otherFunc == func) {\n          return data.name;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Gets the appropriate \"indexOf\" function. If the `_.indexOf` method is\n     * customized this function returns the custom method, otherwise it returns\n     * the `baseIndexOf` function. If arguments are provided the chosen function\n     * is invoked with them and its result is returned.\n     *\n     * @private\n     * @returns {Function|number} Returns the chosen function or its result.\n     */\n    function getIndexOf(collection, target, fromIndex) {\n      var result = lodash.indexOf || indexOf;\n      result = result === indexOf ? baseIndexOf : result;\n      return collection ? result(collection, target, fromIndex) : result;\n    }\n\n    /**\n     * Gets the \"length\" property value of `object`.\n     *\n     * **Note:** This function is used to avoid a [JIT bug](https://bugs.webkit.org/show_bug.cgi?id=142792)\n     * that affects Safari on at least iOS 8.1-8.3 ARM64.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {*} Returns the \"length\" value.\n     */\n    var getLength = baseProperty('length');\n\n    /**\n     * Gets the propery names, values, and compare flags of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the match data of `object`.\n     */\n    function getMatchData(object) {\n      var result = pairs(object),\n          length = result.length;\n\n      while (length--) {\n        result[length][2] = isStrictComparable(result[length][1]);\n      }\n      return result;\n    }\n\n    /**\n     * Gets the native function at `key` of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {string} key The key of the method to get.\n     * @returns {*} Returns the function if it's native, else `undefined`.\n     */\n    function getNative(object, key) {\n      var value = object == null ? undefined : object[key];\n      return isNative(value) ? value : undefined;\n    }\n\n    /**\n     * Gets the view, applying any `transforms` to the `start` and `end` positions.\n     *\n     * @private\n     * @param {number} start The start of the view.\n     * @param {number} end The end of the view.\n     * @param {Array} transforms The transformations to apply to the view.\n     * @returns {Object} Returns an object containing the `start` and `end`\n     *  positions of the view.\n     */\n    function getView(start, end, transforms) {\n      var index = -1,\n          length = transforms.length;\n\n      while (++index < length) {\n        var data = transforms[index],\n            size = data.size;\n\n        switch (data.type) {\n          case 'drop':      start += size; break;\n          case 'dropRight': end -= size; break;\n          case 'take':      end = nativeMin(end, start + size); break;\n          case 'takeRight': start = nativeMax(start, end - size); break;\n        }\n      }\n      return { 'start': start, 'end': end };\n    }\n\n    /**\n     * Initializes an array clone.\n     *\n     * @private\n     * @param {Array} array The array to clone.\n     * @returns {Array} Returns the initialized clone.\n     */\n    function initCloneArray(array) {\n      var length = array.length,\n          result = new array.constructor(length);\n\n      // Add array properties assigned by `RegExp#exec`.\n      if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n        result.index = array.index;\n        result.input = array.input;\n      }\n      return result;\n    }\n\n    /**\n     * Initializes an object clone.\n     *\n     * @private\n     * @param {Object} object The object to clone.\n     * @returns {Object} Returns the initialized clone.\n     */\n    function initCloneObject(object) {\n      var Ctor = object.constructor;\n      if (!(typeof Ctor == 'function' && Ctor instanceof Ctor)) {\n        Ctor = Object;\n      }\n      return new Ctor;\n    }\n\n    /**\n     * Initializes an object clone based on its `toStringTag`.\n     *\n     * **Note:** This function only supports cloning values with tags of\n     * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n     *\n     * @private\n     * @param {Object} object The object to clone.\n     * @param {string} tag The `toStringTag` of the object to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Object} Returns the initialized clone.\n     */\n    function initCloneByTag(object, tag, isDeep) {\n      var Ctor = object.constructor;\n      switch (tag) {\n        case arrayBufferTag:\n          return bufferClone(object);\n\n        case boolTag:\n        case dateTag:\n          return new Ctor(+object);\n\n        case float32Tag: case float64Tag:\n        case int8Tag: case int16Tag: case int32Tag:\n        case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n          var buffer = object.buffer;\n          return new Ctor(isDeep ? bufferClone(buffer) : buffer, object.byteOffset, object.length);\n\n        case numberTag:\n        case stringTag:\n          return new Ctor(object);\n\n        case regexpTag:\n          var result = new Ctor(object.source, reFlags.exec(object));\n          result.lastIndex = object.lastIndex;\n      }\n      return result;\n    }\n\n    /**\n     * Invokes the method at `path` on `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the method to invoke.\n     * @param {Array} args The arguments to invoke the method with.\n     * @returns {*} Returns the result of the invoked method.\n     */\n    function invokePath(object, path, args) {\n      if (object != null && !isKey(path, object)) {\n        path = toPath(path);\n        object = path.length == 1 ? object : baseGet(object, baseSlice(path, 0, -1));\n        path = last(path);\n      }\n      var func = object == null ? object : object[path];\n      return func == null ? undefined : func.apply(object, args);\n    }\n\n    /**\n     * Checks if `value` is array-like.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n     */\n    function isArrayLike(value) {\n      return value != null && isLength(getLength(value));\n    }\n\n    /**\n     * Checks if `value` is a valid array-like index.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n     * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n     */\n    function isIndex(value, length) {\n      value = (typeof value == 'number' || reIsUint.test(value)) ? +value : -1;\n      length = length == null ? MAX_SAFE_INTEGER : length;\n      return value > -1 && value % 1 == 0 && value < length;\n    }\n\n    /**\n     * Checks if the provided arguments are from an iteratee call.\n     *\n     * @private\n     * @param {*} value The potential iteratee value argument.\n     * @param {*} index The potential iteratee index or key argument.\n     * @param {*} object The potential iteratee object argument.\n     * @returns {boolean} Returns `true` if the arguments are from an iteratee call, else `false`.\n     */\n    function isIterateeCall(value, index, object) {\n      if (!isObject(object)) {\n        return false;\n      }\n      var type = typeof index;\n      if (type == 'number'\n          ? (isArrayLike(object) && isIndex(index, object.length))\n          : (type == 'string' && index in object)) {\n        var other = object[index];\n        return value === value ? (value === other) : (other !== other);\n      }\n      return false;\n    }\n\n    /**\n     * Checks if `value` is a property name and not a property path.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @param {Object} [object] The object to query keys on.\n     * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n     */\n    function isKey(value, object) {\n      var type = typeof value;\n      if ((type == 'string' && reIsPlainProp.test(value)) || type == 'number') {\n        return true;\n      }\n      if (isArray(value)) {\n        return false;\n      }\n      var result = !reIsDeepProp.test(value);\n      return result || (object != null && value in toObject(object));\n    }\n\n    /**\n     * Checks if `func` has a lazy counterpart.\n     *\n     * @private\n     * @param {Function} func The function to check.\n     * @returns {boolean} Returns `true` if `func` has a lazy counterpart, else `false`.\n     */\n    function isLaziable(func) {\n      var funcName = getFuncName(func);\n      if (!(funcName in LazyWrapper.prototype)) {\n        return false;\n      }\n      var other = lodash[funcName];\n      if (func === other) {\n        return true;\n      }\n      var data = getData(other);\n      return !!data && func === data[0];\n    }\n\n    /**\n     * Checks if `value` is a valid array-like length.\n     *\n     * **Note:** This function is based on [`ToLength`](http://ecma-international.org/ecma-262/6.0/#sec-tolength).\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n     */\n    function isLength(value) {\n      return typeof value == 'number' && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n    }\n\n    /**\n     * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` if suitable for strict\n     *  equality comparisons, else `false`.\n     */\n    function isStrictComparable(value) {\n      return value === value && !isObject(value);\n    }\n\n    /**\n     * Merges the function metadata of `source` into `data`.\n     *\n     * Merging metadata reduces the number of wrappers required to invoke a function.\n     * This is possible because methods like `_.bind`, `_.curry`, and `_.partial`\n     * may be applied regardless of execution order. Methods like `_.ary` and `_.rearg`\n     * augment function arguments, making the order in which they are executed important,\n     * preventing the merging of metadata. However, we make an exception for a safe\n     * common case where curried functions have `_.ary` and or `_.rearg` applied.\n     *\n     * @private\n     * @param {Array} data The destination metadata.\n     * @param {Array} source The source metadata.\n     * @returns {Array} Returns `data`.\n     */\n    function mergeData(data, source) {\n      var bitmask = data[1],\n          srcBitmask = source[1],\n          newBitmask = bitmask | srcBitmask,\n          isCommon = newBitmask < ARY_FLAG;\n\n      var isCombo =\n        (srcBitmask == ARY_FLAG && bitmask == CURRY_FLAG) ||\n        (srcBitmask == ARY_FLAG && bitmask == REARG_FLAG && data[7].length <= source[8]) ||\n        (srcBitmask == (ARY_FLAG | REARG_FLAG) && bitmask == CURRY_FLAG);\n\n      // Exit early if metadata can't be merged.\n      if (!(isCommon || isCombo)) {\n        return data;\n      }\n      // Use source `thisArg` if available.\n      if (srcBitmask & BIND_FLAG) {\n        data[2] = source[2];\n        // Set when currying a bound function.\n        newBitmask |= (bitmask & BIND_FLAG) ? 0 : CURRY_BOUND_FLAG;\n      }\n      // Compose partial arguments.\n      var value = source[3];\n      if (value) {\n        var partials = data[3];\n        data[3] = partials ? composeArgs(partials, value, source[4]) : arrayCopy(value);\n        data[4] = partials ? replaceHolders(data[3], PLACEHOLDER) : arrayCopy(source[4]);\n      }\n      // Compose partial right arguments.\n      value = source[5];\n      if (value) {\n        partials = data[5];\n        data[5] = partials ? composeArgsRight(partials, value, source[6]) : arrayCopy(value);\n        data[6] = partials ? replaceHolders(data[5], PLACEHOLDER) : arrayCopy(source[6]);\n      }\n      // Use source `argPos` if available.\n      value = source[7];\n      if (value) {\n        data[7] = arrayCopy(value);\n      }\n      // Use source `ary` if it's smaller.\n      if (srcBitmask & ARY_FLAG) {\n        data[8] = data[8] == null ? source[8] : nativeMin(data[8], source[8]);\n      }\n      // Use source `arity` if one is not provided.\n      if (data[9] == null) {\n        data[9] = source[9];\n      }\n      // Use source `func` and merge bitmasks.\n      data[0] = source[0];\n      data[1] = newBitmask;\n\n      return data;\n    }\n\n    /**\n     * Used by `_.defaultsDeep` to customize its `_.merge` use.\n     *\n     * @private\n     * @param {*} objectValue The destination object property value.\n     * @param {*} sourceValue The source object property value.\n     * @returns {*} Returns the value to assign to the destination object.\n     */\n    function mergeDefaults(objectValue, sourceValue) {\n      return objectValue === undefined ? sourceValue : merge(objectValue, sourceValue, mergeDefaults);\n    }\n\n    /**\n     * A specialized version of `_.pick` which picks `object` properties specified\n     * by `props`.\n     *\n     * @private\n     * @param {Object} object The source object.\n     * @param {string[]} props The property names to pick.\n     * @returns {Object} Returns the new object.\n     */\n    function pickByArray(object, props) {\n      object = toObject(object);\n\n      var index = -1,\n          length = props.length,\n          result = {};\n\n      while (++index < length) {\n        var key = props[index];\n        if (key in object) {\n          result[key] = object[key];\n        }\n      }\n      return result;\n    }\n\n    /**\n     * A specialized version of `_.pick` which picks `object` properties `predicate`\n     * returns truthy for.\n     *\n     * @private\n     * @param {Object} object The source object.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {Object} Returns the new object.\n     */\n    function pickByCallback(object, predicate) {\n      var result = {};\n      baseForIn(object, function(value, key, object) {\n        if (predicate(value, key, object)) {\n          result[key] = value;\n        }\n      });\n      return result;\n    }\n\n    /**\n     * Reorder `array` according to the specified indexes where the element at\n     * the first index is assigned as the first element, the element at\n     * the second index is assigned as the second element, and so on.\n     *\n     * @private\n     * @param {Array} array The array to reorder.\n     * @param {Array} indexes The arranged array indexes.\n     * @returns {Array} Returns `array`.\n     */\n    function reorder(array, indexes) {\n      var arrLength = array.length,\n          length = nativeMin(indexes.length, arrLength),\n          oldArray = arrayCopy(array);\n\n      while (length--) {\n        var index = indexes[length];\n        array[length] = isIndex(index, arrLength) ? oldArray[index] : undefined;\n      }\n      return array;\n    }\n\n    /**\n     * Sets metadata for `func`.\n     *\n     * **Note:** If this function becomes hot, i.e. is invoked a lot in a short\n     * period of time, it will trip its breaker and transition to an identity function\n     * to avoid garbage collection pauses in V8. See [V8 issue 2070](https://code.google.com/p/v8/issues/detail?id=2070)\n     * for more details.\n     *\n     * @private\n     * @param {Function} func The function to associate metadata with.\n     * @param {*} data The metadata.\n     * @returns {Function} Returns `func`.\n     */\n    var setData = (function() {\n      var count = 0,\n          lastCalled = 0;\n\n      return function(key, value) {\n        var stamp = now(),\n            remaining = HOT_SPAN - (stamp - lastCalled);\n\n        lastCalled = stamp;\n        if (remaining > 0) {\n          if (++count >= HOT_COUNT) {\n            return key;\n          }\n        } else {\n          count = 0;\n        }\n        return baseSetData(key, value);\n      };\n    }());\n\n    /**\n     * A fallback implementation of `Object.keys` which creates an array of the\n     * own enumerable property names of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     */\n    function shimKeys(object) {\n      var props = keysIn(object),\n          propsLength = props.length,\n          length = propsLength && object.length;\n\n      var allowIndexes = !!length && isLength(length) &&\n        (isArray(object) || isArguments(object));\n\n      var index = -1,\n          result = [];\n\n      while (++index < propsLength) {\n        var key = props[index];\n        if ((allowIndexes && isIndex(key, length)) || hasOwnProperty.call(object, key)) {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Converts `value` to an array-like object if it's not one.\n     *\n     * @private\n     * @param {*} value The value to process.\n     * @returns {Array|Object} Returns the array-like object.\n     */\n    function toIterable(value) {\n      if (value == null) {\n        return [];\n      }\n      if (!isArrayLike(value)) {\n        return values(value);\n      }\n      return isObject(value) ? value : Object(value);\n    }\n\n    /**\n     * Converts `value` to an object if it's not one.\n     *\n     * @private\n     * @param {*} value The value to process.\n     * @returns {Object} Returns the object.\n     */\n    function toObject(value) {\n      return isObject(value) ? value : Object(value);\n    }\n\n    /**\n     * Converts `value` to property path array if it's not one.\n     *\n     * @private\n     * @param {*} value The value to process.\n     * @returns {Array} Returns the property path array.\n     */\n    function toPath(value) {\n      if (isArray(value)) {\n        return value;\n      }\n      var result = [];\n      baseToString(value).replace(rePropName, function(match, number, quote, string) {\n        result.push(quote ? string.replace(reEscapeChar, '$1') : (number || match));\n      });\n      return result;\n    }\n\n    /**\n     * Creates a clone of `wrapper`.\n     *\n     * @private\n     * @param {Object} wrapper The wrapper to clone.\n     * @returns {Object} Returns the cloned wrapper.\n     */\n    function wrapperClone(wrapper) {\n      return wrapper instanceof LazyWrapper\n        ? wrapper.clone()\n        : new LodashWrapper(wrapper.__wrapped__, wrapper.__chain__, arrayCopy(wrapper.__actions__));\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an array of elements split into groups the length of `size`.\n     * If `collection` can't be split evenly, the final chunk will be the remaining\n     * elements.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to process.\n     * @param {number} [size=1] The length of each chunk.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.\n     * @returns {Array} Returns the new array containing chunks.\n     * @example\n     *\n     * _.chunk(['a', 'b', 'c', 'd'], 2);\n     * // => [['a', 'b'], ['c', 'd']]\n     *\n     * _.chunk(['a', 'b', 'c', 'd'], 3);\n     * // => [['a', 'b', 'c'], ['d']]\n     */\n    function chunk(array, size, guard) {\n      if (guard ? isIterateeCall(array, size, guard) : size == null) {\n        size = 1;\n      } else {\n        size = nativeMax(nativeFloor(size) || 1, 1);\n      }\n      var index = 0,\n          length = array ? array.length : 0,\n          resIndex = -1,\n          result = Array(nativeCeil(length / size));\n\n      while (index < length) {\n        result[++resIndex] = baseSlice(array, index, (index += size));\n      }\n      return result;\n    }\n\n    /**\n     * Creates an array with all falsey values removed. The values `false`, `null`,\n     * `0`, `\"\"`, `undefined`, and `NaN` are falsey.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to compact.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * _.compact([0, 1, false, 2, '', 3]);\n     * // => [1, 2, 3]\n     */\n    function compact(array) {\n      var index = -1,\n          length = array ? array.length : 0,\n          resIndex = -1,\n          result = [];\n\n      while (++index < length) {\n        var value = array[index];\n        if (value) {\n          result[++resIndex] = value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Creates an array of unique `array` values not included in the other\n     * provided arrays using [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {...Array} [values] The arrays of values to exclude.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * _.difference([1, 2, 3], [4, 2]);\n     * // => [1, 3]\n     */\n    var difference = restParam(function(array, values) {\n      return (isObjectLike(array) && isArrayLike(array))\n        ? baseDifference(array, baseFlatten(values, false, true))\n        : [];\n    });\n\n    /**\n     * Creates a slice of `array` with `n` elements dropped from the beginning.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to drop.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.drop([1, 2, 3]);\n     * // => [2, 3]\n     *\n     * _.drop([1, 2, 3], 2);\n     * // => [3]\n     *\n     * _.drop([1, 2, 3], 5);\n     * // => []\n     *\n     * _.drop([1, 2, 3], 0);\n     * // => [1, 2, 3]\n     */\n    function drop(array, n, guard) {\n      var length = array ? array.length : 0;\n      if (!length) {\n        return [];\n      }\n      if (guard ? isIterateeCall(array, n, guard) : n == null) {\n        n = 1;\n      }\n      return baseSlice(array, n < 0 ? 0 : n);\n    }\n\n    /**\n     * Creates a slice of `array` with `n` elements dropped from the end.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to drop.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.dropRight([1, 2, 3]);\n     * // => [1, 2]\n     *\n     * _.dropRight([1, 2, 3], 2);\n     * // => [1]\n     *\n     * _.dropRight([1, 2, 3], 5);\n     * // => []\n     *\n     * _.dropRight([1, 2, 3], 0);\n     * // => [1, 2, 3]\n     */\n    function dropRight(array, n, guard) {\n      var length = array ? array.length : 0;\n      if (!length) {\n        return [];\n      }\n      if (guard ? isIterateeCall(array, n, guard) : n == null) {\n        n = 1;\n      }\n      n = length - (+n || 0);\n      return baseSlice(array, 0, n < 0 ? 0 : n);\n    }\n\n    /**\n     * Creates a slice of `array` excluding elements dropped from the end.\n     * Elements are dropped until `predicate` returns falsey. The predicate is\n     * bound to `thisArg` and invoked with three arguments: (value, index, array).\n     *\n     * If a property name is provided for `predicate` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `predicate` the created `_.matches` style\n     * callback returns `true` for elements that match the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function|Object|string} [predicate=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `predicate`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.dropRightWhile([1, 2, 3], function(n) {\n     *   return n > 1;\n     * });\n     * // => [1]\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': true },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': false }\n     * ];\n     *\n     * // using the `_.matches` callback shorthand\n     * _.pluck(_.dropRightWhile(users, { 'user': 'pebbles', 'active': false }), 'user');\n     * // => ['barney', 'fred']\n     *\n     * // using the `_.matchesProperty` callback shorthand\n     * _.pluck(_.dropRightWhile(users, 'active', false), 'user');\n     * // => ['barney']\n     *\n     * // using the `_.property` callback shorthand\n     * _.pluck(_.dropRightWhile(users, 'active'), 'user');\n     * // => ['barney', 'fred', 'pebbles']\n     */\n    function dropRightWhile(array, predicate, thisArg) {\n      return (array && array.length)\n        ? baseWhile(array, getCallback(predicate, thisArg, 3), true, true)\n        : [];\n    }\n\n    /**\n     * Creates a slice of `array` excluding elements dropped from the beginning.\n     * Elements are dropped until `predicate` returns falsey. The predicate is\n     * bound to `thisArg` and invoked with three arguments: (value, index, array).\n     *\n     * If a property name is provided for `predicate` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `predicate` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function|Object|string} [predicate=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `predicate`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.dropWhile([1, 2, 3], function(n) {\n     *   return n < 3;\n     * });\n     * // => [3]\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': false },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': true }\n     * ];\n     *\n     * // using the `_.matches` callback shorthand\n     * _.pluck(_.dropWhile(users, { 'user': 'barney', 'active': false }), 'user');\n     * // => ['fred', 'pebbles']\n     *\n     * // using the `_.matchesProperty` callback shorthand\n     * _.pluck(_.dropWhile(users, 'active', false), 'user');\n     * // => ['pebbles']\n     *\n     * // using the `_.property` callback shorthand\n     * _.pluck(_.dropWhile(users, 'active'), 'user');\n     * // => ['barney', 'fred', 'pebbles']\n     */\n    function dropWhile(array, predicate, thisArg) {\n      return (array && array.length)\n        ? baseWhile(array, getCallback(predicate, thisArg, 3), true)\n        : [];\n    }\n\n    /**\n     * Fills elements of `array` with `value` from `start` up to, but not\n     * including, `end`.\n     *\n     * **Note:** This method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to fill.\n     * @param {*} value The value to fill `array` with.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [1, 2, 3];\n     *\n     * _.fill(array, 'a');\n     * console.log(array);\n     * // => ['a', 'a', 'a']\n     *\n     * _.fill(Array(3), 2);\n     * // => [2, 2, 2]\n     *\n     * _.fill([4, 6, 8], '*', 1, 2);\n     * // => [4, '*', 8]\n     */\n    function fill(array, value, start, end) {\n      var length = array ? array.length : 0;\n      if (!length) {\n        return [];\n      }\n      if (start && typeof start != 'number' && isIterateeCall(array, value, start)) {\n        start = 0;\n        end = length;\n      }\n      return baseFill(array, value, start, end);\n    }\n\n    /**\n     * This method is like `_.find` except that it returns the index of the first\n     * element `predicate` returns truthy for instead of the element itself.\n     *\n     * If a property name is provided for `predicate` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `predicate` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to search.\n     * @param {Function|Object|string} [predicate=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `predicate`.\n     * @returns {number} Returns the index of the found element, else `-1`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': false },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': true }\n     * ];\n     *\n     * _.findIndex(users, function(chr) {\n     *   return chr.user == 'barney';\n     * });\n     * // => 0\n     *\n     * // using the `_.matches` callback shorthand\n     * _.findIndex(users, { 'user': 'fred', 'active': false });\n     * // => 1\n     *\n     * // using the `_.matchesProperty` callback shorthand\n     * _.findIndex(users, 'active', false);\n     * // => 0\n     *\n     * // using the `_.property` callback shorthand\n     * _.findIndex(users, 'active');\n     * // => 2\n     */\n    var findIndex = createFindIndex();\n\n    /**\n     * This method is like `_.findIndex` except that it iterates over elements\n     * of `collection` from right to left.\n     *\n     * If a property name is provided for `predicate` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `predicate` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to search.\n     * @param {Function|Object|string} [predicate=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `predicate`.\n     * @returns {number} Returns the index of the found element, else `-1`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': true },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': false }\n     * ];\n     *\n     * _.findLastIndex(users, function(chr) {\n     *   return chr.user == 'pebbles';\n     * });\n     * // => 2\n     *\n     * // using the `_.matches` callback shorthand\n     * _.findLastIndex(users, { 'user': 'barney', 'active': true });\n     * // => 0\n     *\n     * // using the `_.matchesProperty` callback shorthand\n     * _.findLastIndex(users, 'active', false);\n     * // => 2\n     *\n     * // using the `_.property` callback shorthand\n     * _.findLastIndex(users, 'active');\n     * // => 0\n     */\n    var findLastIndex = createFindIndex(true);\n\n    /**\n     * Gets the first element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @alias head\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {*} Returns the first element of `array`.\n     * @example\n     *\n     * _.first([1, 2, 3]);\n     * // => 1\n     *\n     * _.first([]);\n     * // => undefined\n     */\n    function first(array) {\n      return array ? array[0] : undefined;\n    }\n\n    /**\n     * Flattens a nested array. If `isDeep` is `true` the array is recursively\n     * flattened, otherwise it is only flattened a single level.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to flatten.\n     * @param {boolean} [isDeep] Specify a deep flatten.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * _.flatten([1, [2, 3, [4]]]);\n     * // => [1, 2, 3, [4]]\n     *\n     * // using `isDeep`\n     * _.flatten([1, [2, 3, [4]]], true);\n     * // => [1, 2, 3, 4]\n     */\n    function flatten(array, isDeep, guard) {\n      var length = array ? array.length : 0;\n      if (guard && isIterateeCall(array, isDeep, guard)) {\n        isDeep = false;\n      }\n      return length ? baseFlatten(array, isDeep) : [];\n    }\n\n    /**\n     * Recursively flattens a nested array.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to recursively flatten.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * _.flattenDeep([1, [2, 3, [4]]]);\n     * // => [1, 2, 3, 4]\n     */\n    function flattenDeep(array) {\n      var length = array ? array.length : 0;\n      return length ? baseFlatten(array, true) : [];\n    }\n\n    /**\n     * Gets the index at which the first occurrence of `value` is found in `array`\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n     * for equality comparisons. If `fromIndex` is negative, it is used as the offset\n     * from the end of `array`. If `array` is sorted providing `true` for `fromIndex`\n     * performs a faster binary search.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to search.\n     * @param {*} value The value to search for.\n     * @param {boolean|number} [fromIndex=0] The index to search from or `true`\n     *  to perform a binary search on a sorted array.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.indexOf([1, 2, 1, 2], 2);\n     * // => 1\n     *\n     * // using `fromIndex`\n     * _.indexOf([1, 2, 1, 2], 2, 2);\n     * // => 3\n     *\n     * // performing a binary search\n     * _.indexOf([1, 1, 2, 2], 2, true);\n     * // => 2\n     */\n    function indexOf(array, value, fromIndex) {\n      var length = array ? array.length : 0;\n      if (!length) {\n        return -1;\n      }\n      if (typeof fromIndex == 'number') {\n        fromIndex = fromIndex < 0 ? nativeMax(length + fromIndex, 0) : fromIndex;\n      } else if (fromIndex) {\n        var index = binaryIndex(array, value);\n        if (index < length &&\n            (value === value ? (value === array[index]) : (array[index] !== array[index]))) {\n          return index;\n        }\n        return -1;\n      }\n      return baseIndexOf(array, value, fromIndex || 0);\n    }\n\n    /**\n     * Gets all but the last element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.initial([1, 2, 3]);\n     * // => [1, 2]\n     */\n    function initial(array) {\n      return dropRight(array, 1);\n    }\n\n    /**\n     * Creates an array of unique values that are included in all of the provided\n     * arrays using [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @returns {Array} Returns the new array of shared values.\n     * @example\n     * _.intersection([1, 2], [4, 2], [2, 1]);\n     * // => [2]\n     */\n    var intersection = restParam(function(arrays) {\n      var othLength = arrays.length,\n          othIndex = othLength,\n          caches = Array(length),\n          indexOf = getIndexOf(),\n          isCommon = indexOf == baseIndexOf,\n          result = [];\n\n      while (othIndex--) {\n        var value = arrays[othIndex] = isArrayLike(value = arrays[othIndex]) ? value : [];\n        caches[othIndex] = (isCommon && value.length >= 120) ? createCache(othIndex && value) : null;\n      }\n      var array = arrays[0],\n          index = -1,\n          length = array ? array.length : 0,\n          seen = caches[0];\n\n      outer:\n      while (++index < length) {\n        value = array[index];\n        if ((seen ? cacheIndexOf(seen, value) : indexOf(result, value, 0)) < 0) {\n          var othIndex = othLength;\n          while (--othIndex) {\n            var cache = caches[othIndex];\n            if ((cache ? cacheIndexOf(cache, value) : indexOf(arrays[othIndex], value, 0)) < 0) {\n              continue outer;\n            }\n          }\n          if (seen) {\n            seen.push(value);\n          }\n          result.push(value);\n        }\n      }\n      return result;\n    });\n\n    /**\n     * Gets the last element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {*} Returns the last element of `array`.\n     * @example\n     *\n     * _.last([1, 2, 3]);\n     * // => 3\n     */\n    function last(array) {\n      var length = array ? array.length : 0;\n      return length ? array[length - 1] : undefined;\n    }\n\n    /**\n     * This method is like `_.indexOf` except that it iterates over elements of\n     * `array` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to search.\n     * @param {*} value The value to search for.\n     * @param {boolean|number} [fromIndex=array.length-1] The index to search from\n     *  or `true` to perform a binary search on a sorted array.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.lastIndexOf([1, 2, 1, 2], 2);\n     * // => 3\n     *\n     * // using `fromIndex`\n     * _.lastIndexOf([1, 2, 1, 2], 2, 2);\n     * // => 1\n     *\n     * // performing a binary search\n     * _.lastIndexOf([1, 1, 2, 2], 2, true);\n     * // => 3\n     */\n    function lastIndexOf(array, value, fromIndex) {\n      var length = array ? array.length : 0;\n      if (!length) {\n        return -1;\n      }\n      var index = length;\n      if (typeof fromIndex == 'number') {\n        index = (fromIndex < 0 ? nativeMax(length + fromIndex, 0) : nativeMin(fromIndex || 0, length - 1)) + 1;\n      } else if (fromIndex) {\n        index = binaryIndex(array, value, true) - 1;\n        var other = array[index];\n        if (value === value ? (value === other) : (other !== other)) {\n          return index;\n        }\n        return -1;\n      }\n      if (value !== value) {\n        return indexOfNaN(array, index, true);\n      }\n      while (index--) {\n        if (array[index] === value) {\n          return index;\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * Removes all provided values from `array` using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * **Note:** Unlike `_.without`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {...*} [values] The values to remove.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [1, 2, 3, 1, 2, 3];\n     *\n     * _.pull(array, 2, 3);\n     * console.log(array);\n     * // => [1, 1]\n     */\n    function pull() {\n      var args = arguments,\n          array = args[0];\n\n      if (!(array && array.length)) {\n        return array;\n      }\n      var index = 0,\n          indexOf = getIndexOf(),\n          length = args.length;\n\n      while (++index < length) {\n        var fromIndex = 0,\n            value = args[index];\n\n        while ((fromIndex = indexOf(array, value, fromIndex)) > -1) {\n          splice.call(array, fromIndex, 1);\n        }\n      }\n      return array;\n    }\n\n    /**\n     * Removes elements from `array` corresponding to the given indexes and returns\n     * an array of the removed elements. Indexes may be specified as an array of\n     * indexes or as individual arguments.\n     *\n     * **Note:** Unlike `_.at`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {...(number|number[])} [indexes] The indexes of elements to remove,\n     *  specified as individual indexes or arrays of indexes.\n     * @returns {Array} Returns the new array of removed elements.\n     * @example\n     *\n     * var array = [5, 10, 15, 20];\n     * var evens = _.pullAt(array, 1, 3);\n     *\n     * console.log(array);\n     * // => [5, 15]\n     *\n     * console.log(evens);\n     * // => [10, 20]\n     */\n    var pullAt = restParam(function(array, indexes) {\n      indexes = baseFlatten(indexes);\n\n      var result = baseAt(array, indexes);\n      basePullAt(array, indexes.sort(baseCompareAscending));\n      return result;\n    });\n\n    /**\n     * Removes all elements from `array` that `predicate` returns truthy for\n     * and returns an array of the removed elements. The predicate is bound to\n     * `thisArg` and invoked with three arguments: (value, index, array).\n     *\n     * If a property name is provided for `predicate` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `predicate` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * **Note:** Unlike `_.filter`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {Function|Object|string} [predicate=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `predicate`.\n     * @returns {Array} Returns the new array of removed elements.\n     * @example\n     *\n     * var array = [1, 2, 3, 4];\n     * var evens = _.remove(array, function(n) {\n     *   return n % 2 == 0;\n     * });\n     *\n     * console.log(array);\n     * // => [1, 3]\n     *\n     * console.log(evens);\n     * // => [2, 4]\n     */\n    function remove(array, predicate, thisArg) {\n      var result = [];\n      if (!(array && array.length)) {\n        return result;\n      }\n      var index = -1,\n          indexes = [],\n          length = array.length;\n\n      predicate = getCallback(predicate, thisArg, 3);\n      while (++index < length) {\n        var value = array[index];\n        if (predicate(value, index, array)) {\n          result.push(value);\n          indexes.push(index);\n        }\n      }\n      basePullAt(array, indexes);\n      return result;\n    }\n\n    /**\n     * Gets all but the first element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @alias tail\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.rest([1, 2, 3]);\n     * // => [2, 3]\n     */\n    function rest(array) {\n      return drop(array, 1);\n    }\n\n    /**\n     * Creates a slice of `array` from `start` up to, but not including, `end`.\n     *\n     * **Note:** This method is used instead of `Array#slice` to support node\n     * lists in IE < 9 and to ensure dense arrays are returned.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to slice.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns the slice of `array`.\n     */\n    function slice(array, start, end) {\n      var length = array ? array.length : 0;\n      if (!length) {\n        return [];\n      }\n      if (end && typeof end != 'number' && isIterateeCall(array, start, end)) {\n        start = 0;\n        end = length;\n      }\n      return baseSlice(array, start, end);\n    }\n\n    /**\n     * Uses a binary search to determine the lowest index at which `value` should\n     * be inserted into `array` in order to maintain its sort order. If an iteratee\n     * function is provided it is invoked for `value` and each element of `array`\n     * to compute their sort ranking. The iteratee is bound to `thisArg` and\n     * invoked with one argument; (value).\n     *\n     * If a property name is provided for `iteratee` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `iteratee` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {Function|Object|string} [iteratee=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * _.sortedIndex([30, 50], 40);\n     * // => 1\n     *\n     * _.sortedIndex([4, 4, 5, 5], 5);\n     * // => 2\n     *\n     * var dict = { 'data': { 'thirty': 30, 'forty': 40, 'fifty': 50 } };\n     *\n     * // using an iteratee function\n     * _.sortedIndex(['thirty', 'fifty'], 'forty', function(word) {\n     *   return this.data[word];\n     * }, dict);\n     * // => 1\n     *\n     * // using the `_.property` callback shorthand\n     * _.sortedIndex([{ 'x': 30 }, { 'x': 50 }], { 'x': 40 }, 'x');\n     * // => 1\n     */\n    var sortedIndex = createSortedIndex();\n\n    /**\n     * This method is like `_.sortedIndex` except that it returns the highest\n     * index at which `value` should be inserted into `array` in order to\n     * maintain its sort order.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {Function|Object|string} [iteratee=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * _.sortedLastIndex([4, 4, 5, 5], 5);\n     * // => 4\n     */\n    var sortedLastIndex = createSortedIndex(true);\n\n    /**\n     * Creates a slice of `array` with `n` elements taken from the beginning.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to take.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.take([1, 2, 3]);\n     * // => [1]\n     *\n     * _.take([1, 2, 3], 2);\n     * // => [1, 2]\n     *\n     * _.take([1, 2, 3], 5);\n     * // => [1, 2, 3]\n     *\n     * _.take([1, 2, 3], 0);\n     * // => []\n     */\n    function take(array, n, guard) {\n      var length = array ? array.length : 0;\n      if (!length) {\n        return [];\n      }\n      if (guard ? isIterateeCall(array, n, guard) : n == null) {\n        n = 1;\n      }\n      return baseSlice(array, 0, n < 0 ? 0 : n);\n    }\n\n    /**\n     * Creates a slice of `array` with `n` elements taken from the end.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to take.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.takeRight([1, 2, 3]);\n     * // => [3]\n     *\n     * _.takeRight([1, 2, 3], 2);\n     * // => [2, 3]\n     *\n     * _.takeRight([1, 2, 3], 5);\n     * // => [1, 2, 3]\n     *\n     * _.takeRight([1, 2, 3], 0);\n     * // => []\n     */\n    function takeRight(array, n, guard) {\n      var length = array ? array.length : 0;\n      if (!length) {\n        return [];\n      }\n      if (guard ? isIterateeCall(array, n, guard) : n == null) {\n        n = 1;\n      }\n      n = length - (+n || 0);\n      return baseSlice(array, n < 0 ? 0 : n);\n    }\n\n    /**\n     * Creates a slice of `array` with elements taken from the end. Elements are\n     * taken until `predicate` returns falsey. The predicate is bound to `thisArg`\n     * and invoked with three arguments: (value, index, array).\n     *\n     * If a property name is provided for `predicate` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `predicate` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function|Object|string} [predicate=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `predicate`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.takeRightWhile([1, 2, 3], function(n) {\n     *   return n > 1;\n     * });\n     * // => [2, 3]\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': true },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': false }\n     * ];\n     *\n     * // using the `_.matches` callback shorthand\n     * _.pluck(_.takeRightWhile(users, { 'user': 'pebbles', 'active': false }), 'user');\n     * // => ['pebbles']\n     *\n     * // using the `_.matchesProperty` callback shorthand\n     * _.pluck(_.takeRightWhile(users, 'active', false), 'user');\n     * // => ['fred', 'pebbles']\n     *\n     * // using the `_.property` callback shorthand\n     * _.pluck(_.takeRightWhile(users, 'active'), 'user');\n     * // => []\n     */\n    function takeRightWhile(array, predicate, thisArg) {\n      return (array && array.length)\n        ? baseWhile(array, getCallback(predicate, thisArg, 3), false, true)\n        : [];\n    }\n\n    /**\n     * Creates a slice of `array` with elements taken from the beginning. Elements\n     * are taken until `predicate` returns falsey. The predicate is bound to\n     * `thisArg` and invoked with three arguments: (value, index, array).\n     *\n     * If a property name is provided for `predicate` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `predicate` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function|Object|string} [predicate=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `predicate`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.takeWhile([1, 2, 3], function(n) {\n     *   return n < 3;\n     * });\n     * // => [1, 2]\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': false },\n     *   { 'user': 'fred',    'active': false},\n     *   { 'user': 'pebbles', 'active': true }\n     * ];\n     *\n     * // using the `_.matches` callback shorthand\n     * _.pluck(_.takeWhile(users, { 'user': 'barney', 'active': false }), 'user');\n     * // => ['barney']\n     *\n     * // using the `_.matchesProperty` callback shorthand\n     * _.pluck(_.takeWhile(users, 'active', false), 'user');\n     * // => ['barney', 'fred']\n     *\n     * // using the `_.property` callback shorthand\n     * _.pluck(_.takeWhile(users, 'active'), 'user');\n     * // => []\n     */\n    function takeWhile(array, predicate, thisArg) {\n      return (array && array.length)\n        ? baseWhile(array, getCallback(predicate, thisArg, 3))\n        : [];\n    }\n\n    /**\n     * Creates an array of unique values, in order, from all of the provided arrays\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @returns {Array} Returns the new array of combined values.\n     * @example\n     *\n     * _.union([1, 2], [4, 2], [2, 1]);\n     * // => [1, 2, 4]\n     */\n    var union = restParam(function(arrays) {\n      return baseUniq(baseFlatten(arrays, false, true));\n    });\n\n    /**\n     * Creates a duplicate-free version of an array, using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n     * for equality comparisons, in which only the first occurence of each element\n     * is kept. Providing `true` for `isSorted` performs a faster search algorithm\n     * for sorted arrays. If an iteratee function is provided it is invoked for\n     * each element in the array to generate the criterion by which uniqueness\n     * is computed. The `iteratee` is bound to `thisArg` and invoked with three\n     * arguments: (value, index, array).\n     *\n     * If a property name is provided for `iteratee` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `iteratee` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @alias unique\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {boolean} [isSorted] Specify the array is sorted.\n     * @param {Function|Object|string} [iteratee] The function invoked per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {Array} Returns the new duplicate-value-free array.\n     * @example\n     *\n     * _.uniq([2, 1, 2]);\n     * // => [2, 1]\n     *\n     * // using `isSorted`\n     * _.uniq([1, 1, 2], true);\n     * // => [1, 2]\n     *\n     * // using an iteratee function\n     * _.uniq([1, 2.5, 1.5, 2], function(n) {\n     *   return this.floor(n);\n     * }, Math);\n     * // => [1, 2.5]\n     *\n     * // using the `_.property` callback shorthand\n     * _.uniq([{ 'x': 1 }, { 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 1 }, { 'x': 2 }]\n     */\n    function uniq(array, isSorted, iteratee, thisArg) {\n      var length = array ? array.length : 0;\n      if (!length) {\n        return [];\n      }\n      if (isSorted != null && typeof isSorted != 'boolean') {\n        thisArg = iteratee;\n        iteratee = isIterateeCall(array, isSorted, thisArg) ? undefined : isSorted;\n        isSorted = false;\n      }\n      var callback = getCallback();\n      if (!(iteratee == null && callback === baseCallback)) {\n        iteratee = callback(iteratee, thisArg, 3);\n      }\n      return (isSorted && getIndexOf() == baseIndexOf)\n        ? sortedUniq(array, iteratee)\n        : baseUniq(array, iteratee);\n    }\n\n    /**\n     * This method is like `_.zip` except that it accepts an array of grouped\n     * elements and creates an array regrouping the elements to their pre-zip\n     * configuration.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array of grouped elements to process.\n     * @returns {Array} Returns the new array of regrouped elements.\n     * @example\n     *\n     * var zipped = _.zip(['fred', 'barney'], [30, 40], [true, false]);\n     * // => [['fred', 30, true], ['barney', 40, false]]\n     *\n     * _.unzip(zipped);\n     * // => [['fred', 'barney'], [30, 40], [true, false]]\n     */\n    function unzip(array) {\n      if (!(array && array.length)) {\n        return [];\n      }\n      var index = -1,\n          length = 0;\n\n      array = arrayFilter(array, function(group) {\n        if (isArrayLike(group)) {\n          length = nativeMax(group.length, length);\n          return true;\n        }\n      });\n      var result = Array(length);\n      while (++index < length) {\n        result[index] = arrayMap(array, baseProperty(index));\n      }\n      return result;\n    }\n\n    /**\n     * This method is like `_.unzip` except that it accepts an iteratee to specify\n     * how regrouped values should be combined. The `iteratee` is bound to `thisArg`\n     * and invoked with four arguments: (accumulator, value, index, group).\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array of grouped elements to process.\n     * @param {Function} [iteratee] The function to combine regrouped values.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {Array} Returns the new array of regrouped elements.\n     * @example\n     *\n     * var zipped = _.zip([1, 2], [10, 20], [100, 200]);\n     * // => [[1, 10, 100], [2, 20, 200]]\n     *\n     * _.unzipWith(zipped, _.add);\n     * // => [3, 30, 300]\n     */\n    function unzipWith(array, iteratee, thisArg) {\n      var length = array ? array.length : 0;\n      if (!length) {\n        return [];\n      }\n      var result = unzip(array);\n      if (iteratee == null) {\n        return result;\n      }\n      iteratee = bindCallback(iteratee, thisArg, 4);\n      return arrayMap(result, function(group) {\n        return arrayReduce(group, iteratee, undefined, true);\n      });\n    }\n\n    /**\n     * Creates an array excluding all provided values using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to filter.\n     * @param {...*} [values] The values to exclude.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * _.without([1, 2, 1, 3], 1, 2);\n     * // => [3]\n     */\n    var without = restParam(function(array, values) {\n      return isArrayLike(array)\n        ? baseDifference(array, values)\n        : [];\n    });\n\n    /**\n     * Creates an array of unique values that is the [symmetric difference](https://en.wikipedia.org/wiki/Symmetric_difference)\n     * of the provided arrays.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @returns {Array} Returns the new array of values.\n     * @example\n     *\n     * _.xor([1, 2], [4, 2]);\n     * // => [1, 4]\n     */\n    function xor() {\n      var index = -1,\n          length = arguments.length;\n\n      while (++index < length) {\n        var array = arguments[index];\n        if (isArrayLike(array)) {\n          var result = result\n            ? arrayPush(baseDifference(result, array), baseDifference(array, result))\n            : array;\n        }\n      }\n      return result ? baseUniq(result) : [];\n    }\n\n    /**\n     * Creates an array of grouped elements, the first of which contains the first\n     * elements of the given arrays, the second of which contains the second elements\n     * of the given arrays, and so on.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {...Array} [arrays] The arrays to process.\n     * @returns {Array} Returns the new array of grouped elements.\n     * @example\n     *\n     * _.zip(['fred', 'barney'], [30, 40], [true, false]);\n     * // => [['fred', 30, true], ['barney', 40, false]]\n     */\n    var zip = restParam(unzip);\n\n    /**\n     * The inverse of `_.pairs`; this method returns an object composed from arrays\n     * of property names and values. Provide either a single two dimensional array,\n     * e.g. `[[key1, value1], [key2, value2]]` or two arrays, one of property names\n     * and one of corresponding values.\n     *\n     * @static\n     * @memberOf _\n     * @alias object\n     * @category Array\n     * @param {Array} props The property names.\n     * @param {Array} [values=[]] The property values.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * _.zipObject([['fred', 30], ['barney', 40]]);\n     * // => { 'fred': 30, 'barney': 40 }\n     *\n     * _.zipObject(['fred', 'barney'], [30, 40]);\n     * // => { 'fred': 30, 'barney': 40 }\n     */\n    function zipObject(props, values) {\n      var index = -1,\n          length = props ? props.length : 0,\n          result = {};\n\n      if (length && !values && !isArray(props[0])) {\n        values = [];\n      }\n      while (++index < length) {\n        var key = props[index];\n        if (values) {\n          result[key] = values[index];\n        } else if (key) {\n          result[key[0]] = key[1];\n        }\n      }\n      return result;\n    }\n\n    /**\n     * This method is like `_.zip` except that it accepts an iteratee to specify\n     * how grouped values should be combined. The `iteratee` is bound to `thisArg`\n     * and invoked with four arguments: (accumulator, value, index, group).\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {...Array} [arrays] The arrays to process.\n     * @param {Function} [iteratee] The function to combine grouped values.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {Array} Returns the new array of grouped elements.\n     * @example\n     *\n     * _.zipWith([1, 2], [10, 20], [100, 200], _.add);\n     * // => [111, 222]\n     */\n    var zipWith = restParam(function(arrays) {\n      var length = arrays.length,\n          iteratee = length > 2 ? arrays[length - 2] : undefined,\n          thisArg = length > 1 ? arrays[length - 1] : undefined;\n\n      if (length > 2 && typeof iteratee == 'function') {\n        length -= 2;\n      } else {\n        iteratee = (length > 1 && typeof thisArg == 'function') ? (--length, thisArg) : undefined;\n        thisArg = undefined;\n      }\n      arrays.length = length;\n      return unzipWith(arrays, iteratee, thisArg);\n    });\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a `lodash` object that wraps `value` with explicit method\n     * chaining enabled.\n     *\n     * @static\n     * @memberOf _\n     * @category Chain\n     * @param {*} value The value to wrap.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'age': 36 },\n     *   { 'user': 'fred',    'age': 40 },\n     *   { 'user': 'pebbles', 'age': 1 }\n     * ];\n     *\n     * var youngest = _.chain(users)\n     *   .sortBy('age')\n     *   .map(function(chr) {\n     *     return chr.user + ' is ' + chr.age;\n     *   })\n     *   .first()\n     *   .value();\n     * // => 'pebbles is 1'\n     */\n    function chain(value) {\n      var result = lodash(value);\n      result.__chain__ = true;\n      return result;\n    }\n\n    /**\n     * This method invokes `interceptor` and returns `value`. The interceptor is\n     * bound to `thisArg` and invoked with one argument; (value). The purpose of\n     * this method is to \"tap into\" a method chain in order to perform operations\n     * on intermediate results within the chain.\n     *\n     * @static\n     * @memberOf _\n     * @category Chain\n     * @param {*} value The value to provide to `interceptor`.\n     * @param {Function} interceptor The function to invoke.\n     * @param {*} [thisArg] The `this` binding of `interceptor`.\n     * @returns {*} Returns `value`.\n     * @example\n     *\n     * _([1, 2, 3])\n     *  .tap(function(array) {\n     *    array.pop();\n     *  })\n     *  .reverse()\n     *  .value();\n     * // => [2, 1]\n     */\n    function tap(value, interceptor, thisArg) {\n      interceptor.call(thisArg, value);\n      return value;\n    }\n\n    /**\n     * This method is like `_.tap` except that it returns the result of `interceptor`.\n     *\n     * @static\n     * @memberOf _\n     * @category Chain\n     * @param {*} value The value to provide to `interceptor`.\n     * @param {Function} interceptor The function to invoke.\n     * @param {*} [thisArg] The `this` binding of `interceptor`.\n     * @returns {*} Returns the result of `interceptor`.\n     * @example\n     *\n     * _('  abc  ')\n     *  .chain()\n     *  .trim()\n     *  .thru(function(value) {\n     *    return [value];\n     *  })\n     *  .value();\n     * // => ['abc']\n     */\n    function thru(value, interceptor, thisArg) {\n      return interceptor.call(thisArg, value);\n    }\n\n    /**\n     * Enables explicit method chaining on the wrapper object.\n     *\n     * @name chain\n     * @memberOf _\n     * @category Chain\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36 },\n     *   { 'user': 'fred',   'age': 40 }\n     * ];\n     *\n     * // without explicit chaining\n     * _(users).first();\n     * // => { 'user': 'barney', 'age': 36 }\n     *\n     * // with explicit chaining\n     * _(users).chain()\n     *   .first()\n     *   .pick('user')\n     *   .value();\n     * // => { 'user': 'barney' }\n     */\n    function wrapperChain() {\n      return chain(this);\n    }\n\n    /**\n     * Executes the chained sequence and returns the wrapped result.\n     *\n     * @name commit\n     * @memberOf _\n     * @category Chain\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var array = [1, 2];\n     * var wrapped = _(array).push(3);\n     *\n     * console.log(array);\n     * // => [1, 2]\n     *\n     * wrapped = wrapped.commit();\n     * console.log(array);\n     * // => [1, 2, 3]\n     *\n     * wrapped.last();\n     * // => 3\n     *\n     * console.log(array);\n     * // => [1, 2, 3]\n     */\n    function wrapperCommit() {\n      return new LodashWrapper(this.value(), this.__chain__);\n    }\n\n    /**\n     * Creates a new array joining a wrapped array with any additional arrays\n     * and/or values.\n     *\n     * @name concat\n     * @memberOf _\n     * @category Chain\n     * @param {...*} [values] The values to concatenate.\n     * @returns {Array} Returns the new concatenated array.\n     * @example\n     *\n     * var array = [1];\n     * var wrapped = _(array).concat(2, [3], [[4]]);\n     *\n     * console.log(wrapped.value());\n     * // => [1, 2, 3, [4]]\n     *\n     * console.log(array);\n     * // => [1]\n     */\n    var wrapperConcat = restParam(function(values) {\n      values = baseFlatten(values);\n      return this.thru(function(array) {\n        return arrayConcat(isArray(array) ? array : [toObject(array)], values);\n      });\n    });\n\n    /**\n     * Creates a clone of the chained sequence planting `value` as the wrapped value.\n     *\n     * @name plant\n     * @memberOf _\n     * @category Chain\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var array = [1, 2];\n     * var wrapped = _(array).map(function(value) {\n     *   return Math.pow(value, 2);\n     * });\n     *\n     * var other = [3, 4];\n     * var otherWrapped = wrapped.plant(other);\n     *\n     * otherWrapped.value();\n     * // => [9, 16]\n     *\n     * wrapped.value();\n     * // => [1, 4]\n     */\n    function wrapperPlant(value) {\n      var result,\n          parent = this;\n\n      while (parent instanceof baseLodash) {\n        var clone = wrapperClone(parent);\n        if (result) {\n          previous.__wrapped__ = clone;\n        } else {\n          result = clone;\n        }\n        var previous = clone;\n        parent = parent.__wrapped__;\n      }\n      previous.__wrapped__ = value;\n      return result;\n    }\n\n    /**\n     * Reverses the wrapped array so the first element becomes the last, the\n     * second element becomes the second to last, and so on.\n     *\n     * **Note:** This method mutates the wrapped array.\n     *\n     * @name reverse\n     * @memberOf _\n     * @category Chain\n     * @returns {Object} Returns the new reversed `lodash` wrapper instance.\n     * @example\n     *\n     * var array = [1, 2, 3];\n     *\n     * _(array).reverse().value()\n     * // => [3, 2, 1]\n     *\n     * console.log(array);\n     * // => [3, 2, 1]\n     */\n    function wrapperReverse() {\n      var value = this.__wrapped__;\n\n      var interceptor = function(value) {\n        return (wrapped && wrapped.__dir__ < 0) ? value : value.reverse();\n      };\n      if (value instanceof LazyWrapper) {\n        var wrapped = value;\n        if (this.__actions__.length) {\n          wrapped = new LazyWrapper(this);\n        }\n        wrapped = wrapped.reverse();\n        wrapped.__actions__.push({ 'func': thru, 'args': [interceptor], 'thisArg': undefined });\n        return new LodashWrapper(wrapped, this.__chain__);\n      }\n      return this.thru(interceptor);\n    }\n\n    /**\n     * Produces the result of coercing the unwrapped value to a string.\n     *\n     * @name toString\n     * @memberOf _\n     * @category Chain\n     * @returns {string} Returns the coerced string value.\n     * @example\n     *\n     * _([1, 2, 3]).toString();\n     * // => '1,2,3'\n     */\n    function wrapperToString() {\n      return (this.value() + '');\n    }\n\n    /**\n     * Executes the chained sequence to extract the unwrapped value.\n     *\n     * @name value\n     * @memberOf _\n     * @alias run, toJSON, valueOf\n     * @category Chain\n     * @returns {*} Returns the resolved unwrapped value.\n     * @example\n     *\n     * _([1, 2, 3]).value();\n     * // => [1, 2, 3]\n     */\n    function wrapperValue() {\n      return baseWrapperValue(this.__wrapped__, this.__actions__);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an array of elements corresponding to the given keys, or indexes,\n     * of `collection`. Keys may be specified as individual arguments or as arrays\n     * of keys.\n     *\n     * @static\n     * @memberOf _\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {...(number|number[]|string|string[])} [props] The property names\n     *  or indexes of elements to pick, specified individually or in arrays.\n     * @returns {Array} Returns the new array of picked elements.\n     * @example\n     *\n     * _.at(['a', 'b', 'c'], [0, 2]);\n     * // => ['a', 'c']\n     *\n     * _.at(['barney', 'fred', 'pebbles'], 0, 2);\n     * // => ['barney', 'pebbles']\n     */\n    var at = restParam(function(collection, props) {\n      return baseAt(collection, baseFlatten(props));\n    });\n\n    /**\n     * Creates an object composed of keys generated from the results of running\n     * each element of `collection` through `iteratee`. The corresponding value\n     * of each key is the number of times the key was returned by `iteratee`.\n     * The `iteratee` is bound to `thisArg` and invoked with three arguments:\n     * (value, index|key, collection).\n     *\n     * If a property name is provided for `iteratee` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `iteratee` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [iteratee=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * _.countBy([4.3, 6.1, 6.4], function(n) {\n     *   return Math.floor(n);\n     * });\n     * // => { '4': 1, '6': 2 }\n     *\n     * _.countBy([4.3, 6.1, 6.4], function(n) {\n     *   return this.floor(n);\n     * }, Math);\n     * // => { '4': 1, '6': 2 }\n     *\n     * _.countBy(['one', 'two', 'three'], 'length');\n     * // => { '3': 2, '5': 1 }\n     */\n    var countBy = createAggregator(function(result, value, key) {\n      hasOwnProperty.call(result, key) ? ++result[key] : (result[key] = 1);\n    });\n\n    /**\n     * Checks if `predicate` returns truthy for **all** elements of `collection`.\n     * The predicate is bound to `thisArg` and invoked with three arguments:\n     * (value, index|key, collection).\n     *\n     * If a property name is provided for `predicate` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `predicate` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @alias all\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [predicate=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `predicate`.\n     * @returns {boolean} Returns `true` if all elements pass the predicate check,\n     *  else `false`.\n     * @example\n     *\n     * _.every([true, 1, null, 'yes'], Boolean);\n     * // => false\n     *\n     * var users = [\n     *   { 'user': 'barney', 'active': false },\n     *   { 'user': 'fred',   'active': false }\n     * ];\n     *\n     * // using the `_.matches` callback shorthand\n     * _.every(users, { 'user': 'barney', 'active': false });\n     * // => false\n     *\n     * // using the `_.matchesProperty` callback shorthand\n     * _.every(users, 'active', false);\n     * // => true\n     *\n     * // using the `_.property` callback shorthand\n     * _.every(users, 'active');\n     * // => false\n     */\n    function every(collection, predicate, thisArg) {\n      var func = isArray(collection) ? arrayEvery : baseEvery;\n      if (thisArg && isIterateeCall(collection, predicate, thisArg)) {\n        predicate = undefined;\n      }\n      if (typeof predicate != 'function' || thisArg !== undefined) {\n        predicate = getCallback(predicate, thisArg, 3);\n      }\n      return func(collection, predicate);\n    }\n\n    /**\n     * Iterates over elements of `collection`, returning an array of all elements\n     * `predicate` returns truthy for. The predicate is bound to `thisArg` and\n     * invoked with three arguments: (value, index|key, collection).\n     *\n     * If a property name is provided for `predicate` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `predicate` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @alias select\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [predicate=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `predicate`.\n     * @returns {Array} Returns the new filtered array.\n     * @example\n     *\n     * _.filter([4, 5, 6], function(n) {\n     *   return n % 2 == 0;\n     * });\n     * // => [4, 6]\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': true },\n     *   { 'user': 'fred',   'age': 40, 'active': false }\n     * ];\n     *\n     * // using the `_.matches` callback shorthand\n     * _.pluck(_.filter(users, { 'age': 36, 'active': true }), 'user');\n     * // => ['barney']\n     *\n     * // using the `_.matchesProperty` callback shorthand\n     * _.pluck(_.filter(users, 'active', false), 'user');\n     * // => ['fred']\n     *\n     * // using the `_.property` callback shorthand\n     * _.pluck(_.filter(users, 'active'), 'user');\n     * // => ['barney']\n     */\n    function filter(collection, predicate, thisArg) {\n      var func = isArray(collection) ? arrayFilter : baseFilter;\n      predicate = getCallback(predicate, thisArg, 3);\n      return func(collection, predicate);\n    }\n\n    /**\n     * Iterates over elements of `collection`, returning the first element\n     * `predicate` returns truthy for. The predicate is bound to `thisArg` and\n     * invoked with three arguments: (value, index|key, collection).\n     *\n     * If a property name is provided for `predicate` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `predicate` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @alias detect\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to search.\n     * @param {Function|Object|string} [predicate=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `predicate`.\n     * @returns {*} Returns the matched element, else `undefined`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'age': 36, 'active': true },\n     *   { 'user': 'fred',    'age': 40, 'active': false },\n     *   { 'user': 'pebbles', 'age': 1,  'active': true }\n     * ];\n     *\n     * _.result(_.find(users, function(chr) {\n     *   return chr.age < 40;\n     * }), 'user');\n     * // => 'barney'\n     *\n     * // using the `_.matches` callback shorthand\n     * _.result(_.find(users, { 'age': 1, 'active': true }), 'user');\n     * // => 'pebbles'\n     *\n     * // using the `_.matchesProperty` callback shorthand\n     * _.result(_.find(users, 'active', false), 'user');\n     * // => 'fred'\n     *\n     * // using the `_.property` callback shorthand\n     * _.result(_.find(users, 'active'), 'user');\n     * // => 'barney'\n     */\n    var find = createFind(baseEach);\n\n    /**\n     * This method is like `_.find` except that it iterates over elements of\n     * `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to search.\n     * @param {Function|Object|string} [predicate=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `predicate`.\n     * @returns {*} Returns the matched element, else `undefined`.\n     * @example\n     *\n     * _.findLast([1, 2, 3, 4], function(n) {\n     *   return n % 2 == 1;\n     * });\n     * // => 3\n     */\n    var findLast = createFind(baseEachRight, true);\n\n    /**\n     * Performs a deep comparison between each element in `collection` and the\n     * source object, returning the first element that has equivalent property\n     * values.\n     *\n     * **Note:** This method supports comparing arrays, booleans, `Date` objects,\n     * numbers, `Object` objects, regexes, and strings. Objects are compared by\n     * their own, not inherited, enumerable properties. For comparing a single\n     * own or inherited property value see `_.matchesProperty`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to search.\n     * @param {Object} source The object of property values to match.\n     * @returns {*} Returns the matched element, else `undefined`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': true },\n     *   { 'user': 'fred',   'age': 40, 'active': false }\n     * ];\n     *\n     * _.result(_.findWhere(users, { 'age': 36, 'active': true }), 'user');\n     * // => 'barney'\n     *\n     * _.result(_.findWhere(users, { 'age': 40, 'active': false }), 'user');\n     * // => 'fred'\n     */\n    function findWhere(collection, source) {\n      return find(collection, baseMatches(source));\n    }\n\n    /**\n     * Iterates over elements of `collection` invoking `iteratee` for each element.\n     * The `iteratee` is bound to `thisArg` and invoked with three arguments:\n     * (value, index|key, collection). Iteratee functions may exit iteration early\n     * by explicitly returning `false`.\n     *\n     * **Note:** As with other \"Collections\" methods, objects with a \"length\" property\n     * are iterated like arrays. To avoid this behavior `_.forIn` or `_.forOwn`\n     * may be used for object iteration.\n     *\n     * @static\n     * @memberOf _\n     * @alias each\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {Array|Object|string} Returns `collection`.\n     * @example\n     *\n     * _([1, 2]).forEach(function(n) {\n     *   console.log(n);\n     * }).value();\n     * // => logs each value from left to right and returns the array\n     *\n     * _.forEach({ 'a': 1, 'b': 2 }, function(n, key) {\n     *   console.log(n, key);\n     * });\n     * // => logs each value-key pair and returns the object (iteration order is not guaranteed)\n     */\n    var forEach = createForEach(arrayEach, baseEach);\n\n    /**\n     * This method is like `_.forEach` except that it iterates over elements of\n     * `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @alias eachRight\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {Array|Object|string} Returns `collection`.\n     * @example\n     *\n     * _([1, 2]).forEachRight(function(n) {\n     *   console.log(n);\n     * }).value();\n     * // => logs each value from right to left and returns the array\n     */\n    var forEachRight = createForEach(arrayEachRight, baseEachRight);\n\n    /**\n     * Creates an object composed of keys generated from the results of running\n     * each element of `collection` through `iteratee`. The corresponding value\n     * of each key is an array of the elements responsible for generating the key.\n     * The `iteratee` is bound to `thisArg` and invoked with three arguments:\n     * (value, index|key, collection).\n     *\n     * If a property name is provided for `iteratee` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `iteratee` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [iteratee=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * _.groupBy([4.2, 6.1, 6.4], function(n) {\n     *   return Math.floor(n);\n     * });\n     * // => { '4': [4.2], '6': [6.1, 6.4] }\n     *\n     * _.groupBy([4.2, 6.1, 6.4], function(n) {\n     *   return this.floor(n);\n     * }, Math);\n     * // => { '4': [4.2], '6': [6.1, 6.4] }\n     *\n     * // using the `_.property` callback shorthand\n     * _.groupBy(['one', 'two', 'three'], 'length');\n     * // => { '3': ['one', 'two'], '5': ['three'] }\n     */\n    var groupBy = createAggregator(function(result, value, key) {\n      if (hasOwnProperty.call(result, key)) {\n        result[key].push(value);\n      } else {\n        result[key] = [value];\n      }\n    });\n\n    /**\n     * Checks if `value` is in `collection` using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n     * for equality comparisons. If `fromIndex` is negative, it is used as the offset\n     * from the end of `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @alias contains, include\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to search.\n     * @param {*} target The value to search for.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.reduce`.\n     * @returns {boolean} Returns `true` if a matching element is found, else `false`.\n     * @example\n     *\n     * _.includes([1, 2, 3], 1);\n     * // => true\n     *\n     * _.includes([1, 2, 3], 1, 2);\n     * // => false\n     *\n     * _.includes({ 'user': 'fred', 'age': 40 }, 'fred');\n     * // => true\n     *\n     * _.includes('pebbles', 'eb');\n     * // => true\n     */\n    function includes(collection, target, fromIndex, guard) {\n      var length = collection ? getLength(collection) : 0;\n      if (!isLength(length)) {\n        collection = values(collection);\n        length = collection.length;\n      }\n      if (typeof fromIndex != 'number' || (guard && isIterateeCall(target, fromIndex, guard))) {\n        fromIndex = 0;\n      } else {\n        fromIndex = fromIndex < 0 ? nativeMax(length + fromIndex, 0) : (fromIndex || 0);\n      }\n      return (typeof collection == 'string' || !isArray(collection) && isString(collection))\n        ? (fromIndex <= length && collection.indexOf(target, fromIndex) > -1)\n        : (!!length && getIndexOf(collection, target, fromIndex) > -1);\n    }\n\n    /**\n     * Creates an object composed of keys generated from the results of running\n     * each element of `collection` through `iteratee`. The corresponding value\n     * of each key is the last element responsible for generating the key. The\n     * iteratee function is bound to `thisArg` and invoked with three arguments:\n     * (value, index|key, collection).\n     *\n     * If a property name is provided for `iteratee` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `iteratee` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [iteratee=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * var keyData = [\n     *   { 'dir': 'left', 'code': 97 },\n     *   { 'dir': 'right', 'code': 100 }\n     * ];\n     *\n     * _.indexBy(keyData, 'dir');\n     * // => { 'left': { 'dir': 'left', 'code': 97 }, 'right': { 'dir': 'right', 'code': 100 } }\n     *\n     * _.indexBy(keyData, function(object) {\n     *   return String.fromCharCode(object.code);\n     * });\n     * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }\n     *\n     * _.indexBy(keyData, function(object) {\n     *   return this.fromCharCode(object.code);\n     * }, String);\n     * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }\n     */\n    var indexBy = createAggregator(function(result, value, key) {\n      result[key] = value;\n    });\n\n    /**\n     * Invokes the method at `path` of each element in `collection`, returning\n     * an array of the results of each invoked method. Any additional arguments\n     * are provided to each invoked method. If `methodName` is a function it is\n     * invoked for, and `this` bound to, each element in `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Array|Function|string} path The path of the method to invoke or\n     *  the function invoked per iteration.\n     * @param {...*} [args] The arguments to invoke the method with.\n     * @returns {Array} Returns the array of results.\n     * @example\n     *\n     * _.invoke([[5, 1, 7], [3, 2, 1]], 'sort');\n     * // => [[1, 5, 7], [1, 2, 3]]\n     *\n     * _.invoke([123, 456], String.prototype.split, '');\n     * // => [['1', '2', '3'], ['4', '5', '6']]\n     */\n    var invoke = restParam(function(collection, path, args) {\n      var index = -1,\n          isFunc = typeof path == 'function',\n          isProp = isKey(path),\n          result = isArrayLike(collection) ? Array(collection.length) : [];\n\n      baseEach(collection, function(value) {\n        var func = isFunc ? path : ((isProp && value != null) ? value[path] : undefined);\n        result[++index] = func ? func.apply(value, args) : invokePath(value, path, args);\n      });\n      return result;\n    });\n\n    /**\n     * Creates an array of values by running each element in `collection` through\n     * `iteratee`. The `iteratee` is bound to `thisArg` and invoked with three\n     * arguments: (value, index|key, collection).\n     *\n     * If a property name is provided for `iteratee` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `iteratee` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * Many lodash methods are guarded to work as iteratees for methods like\n     * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n     *\n     * The guarded methods are:\n     * `ary`, `callback`, `chunk`, `clone`, `create`, `curry`, `curryRight`,\n     * `drop`, `dropRight`, `every`, `fill`, `flatten`, `invert`, `max`, `min`,\n     * `parseInt`, `slice`, `sortBy`, `take`, `takeRight`, `template`, `trim`,\n     * `trimLeft`, `trimRight`, `trunc`, `random`, `range`, `sample`, `some`,\n     * `sum`, `uniq`, and `words`\n     *\n     * @static\n     * @memberOf _\n     * @alias collect\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [iteratee=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {Array} Returns the new mapped array.\n     * @example\n     *\n     * function timesThree(n) {\n     *   return n * 3;\n     * }\n     *\n     * _.map([1, 2], timesThree);\n     * // => [3, 6]\n     *\n     * _.map({ 'a': 1, 'b': 2 }, timesThree);\n     * // => [3, 6] (iteration order is not guaranteed)\n     *\n     * var users = [\n     *   { 'user': 'barney' },\n     *   { 'user': 'fred' }\n     * ];\n     *\n     * // using the `_.property` callback shorthand\n     * _.map(users, 'user');\n     * // => ['barney', 'fred']\n     */\n    function map(collection, iteratee, thisArg) {\n      var func = isArray(collection) ? arrayMap : baseMap;\n      iteratee = getCallback(iteratee, thisArg, 3);\n      return func(collection, iteratee);\n    }\n\n    /**\n     * Creates an array of elements split into two groups, the first of which\n     * contains elements `predicate` returns truthy for, while the second of which\n     * contains elements `predicate` returns falsey for. The predicate is bound\n     * to `thisArg` and invoked with three arguments: (value, index|key, collection).\n     *\n     * If a property name is provided for `predicate` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `predicate` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [predicate=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `predicate`.\n     * @returns {Array} Returns the array of grouped elements.\n     * @example\n     *\n     * _.partition([1, 2, 3], function(n) {\n     *   return n % 2;\n     * });\n     * // => [[1, 3], [2]]\n     *\n     * _.partition([1.2, 2.3, 3.4], function(n) {\n     *   return this.floor(n) % 2;\n     * }, Math);\n     * // => [[1.2, 3.4], [2.3]]\n     *\n     * var users = [\n     *   { 'user': 'barney',  'age': 36, 'active': false },\n     *   { 'user': 'fred',    'age': 40, 'active': true },\n     *   { 'user': 'pebbles', 'age': 1,  'active': false }\n     * ];\n     *\n     * var mapper = function(array) {\n     *   return _.pluck(array, 'user');\n     * };\n     *\n     * // using the `_.matches` callback shorthand\n     * _.map(_.partition(users, { 'age': 1, 'active': false }), mapper);\n     * // => [['pebbles'], ['barney', 'fred']]\n     *\n     * // using the `_.matchesProperty` callback shorthand\n     * _.map(_.partition(users, 'active', false), mapper);\n     * // => [['barney', 'pebbles'], ['fred']]\n     *\n     * // using the `_.property` callback shorthand\n     * _.map(_.partition(users, 'active'), mapper);\n     * // => [['fred'], ['barney', 'pebbles']]\n     */\n    var partition = createAggregator(function(result, value, key) {\n      result[key ? 0 : 1].push(value);\n    }, function() { return [[], []]; });\n\n    /**\n     * Gets the property value of `path` from all elements in `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Array|string} path The path of the property to pluck.\n     * @returns {Array} Returns the property values.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36 },\n     *   { 'user': 'fred',   'age': 40 }\n     * ];\n     *\n     * _.pluck(users, 'user');\n     * // => ['barney', 'fred']\n     *\n     * var userIndex = _.indexBy(users, 'user');\n     * _.pluck(userIndex, 'age');\n     * // => [36, 40] (iteration order is not guaranteed)\n     */\n    function pluck(collection, path) {\n      return map(collection, property(path));\n    }\n\n    /**\n     * Reduces `collection` to a value which is the accumulated result of running\n     * each element in `collection` through `iteratee`, where each successive\n     * invocation is supplied the return value of the previous. If `accumulator`\n     * is not provided the first element of `collection` is used as the initial\n     * value. The `iteratee` is bound to `thisArg` and invoked with four arguments:\n     * (accumulator, value, index|key, collection).\n     *\n     * Many lodash methods are guarded to work as iteratees for methods like\n     * `_.reduce`, `_.reduceRight`, and `_.transform`.\n     *\n     * The guarded methods are:\n     * `assign`, `defaults`, `defaultsDeep`, `includes`, `merge`, `sortByAll`,\n     * and `sortByOrder`\n     *\n     * @static\n     * @memberOf _\n     * @alias foldl, inject\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [accumulator] The initial value.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {*} Returns the accumulated value.\n     * @example\n     *\n     * _.reduce([1, 2], function(total, n) {\n     *   return total + n;\n     * });\n     * // => 3\n     *\n     * _.reduce({ 'a': 1, 'b': 2 }, function(result, n, key) {\n     *   result[key] = n * 3;\n     *   return result;\n     * }, {});\n     * // => { 'a': 3, 'b': 6 } (iteration order is not guaranteed)\n     */\n    var reduce = createReduce(arrayReduce, baseEach);\n\n    /**\n     * This method is like `_.reduce` except that it iterates over elements of\n     * `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @alias foldr\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [accumulator] The initial value.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {*} Returns the accumulated value.\n     * @example\n     *\n     * var array = [[0, 1], [2, 3], [4, 5]];\n     *\n     * _.reduceRight(array, function(flattened, other) {\n     *   return flattened.concat(other);\n     * }, []);\n     * // => [4, 5, 2, 3, 0, 1]\n     */\n    var reduceRight = createReduce(arrayReduceRight, baseEachRight);\n\n    /**\n     * The opposite of `_.filter`; this method returns the elements of `collection`\n     * that `predicate` does **not** return truthy for.\n     *\n     * @static\n     * @memberOf _\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [predicate=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `predicate`.\n     * @returns {Array} Returns the new filtered array.\n     * @example\n     *\n     * _.reject([1, 2, 3, 4], function(n) {\n     *   return n % 2 == 0;\n     * });\n     * // => [1, 3]\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': false },\n     *   { 'user': 'fred',   'age': 40, 'active': true }\n     * ];\n     *\n     * // using the `_.matches` callback shorthand\n     * _.pluck(_.reject(users, { 'age': 40, 'active': true }), 'user');\n     * // => ['barney']\n     *\n     * // using the `_.matchesProperty` callback shorthand\n     * _.pluck(_.reject(users, 'active', false), 'user');\n     * // => ['fred']\n     *\n     * // using the `_.property` callback shorthand\n     * _.pluck(_.reject(users, 'active'), 'user');\n     * // => ['barney']\n     */\n    function reject(collection, predicate, thisArg) {\n      var func = isArray(collection) ? arrayFilter : baseFilter;\n      predicate = getCallback(predicate, thisArg, 3);\n      return func(collection, function(value, index, collection) {\n        return !predicate(value, index, collection);\n      });\n    }\n\n    /**\n     * Gets a random element or `n` random elements from a collection.\n     *\n     * @static\n     * @memberOf _\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to sample.\n     * @param {number} [n] The number of elements to sample.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.\n     * @returns {*} Returns the random sample(s).\n     * @example\n     *\n     * _.sample([1, 2, 3, 4]);\n     * // => 2\n     *\n     * _.sample([1, 2, 3, 4], 2);\n     * // => [3, 1]\n     */\n    function sample(collection, n, guard) {\n      if (guard ? isIterateeCall(collection, n, guard) : n == null) {\n        collection = toIterable(collection);\n        var length = collection.length;\n        return length > 0 ? collection[baseRandom(0, length - 1)] : undefined;\n      }\n      var index = -1,\n          result = toArray(collection),\n          length = result.length,\n          lastIndex = length - 1;\n\n      n = nativeMin(n < 0 ? 0 : (+n || 0), length);\n      while (++index < n) {\n        var rand = baseRandom(index, lastIndex),\n            value = result[rand];\n\n        result[rand] = result[index];\n        result[index] = value;\n      }\n      result.length = n;\n      return result;\n    }\n\n    /**\n     * Creates an array of shuffled values, using a version of the\n     * [Fisher-Yates shuffle](https://en.wikipedia.org/wiki/Fisher-Yates_shuffle).\n     *\n     * @static\n     * @memberOf _\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to shuffle.\n     * @returns {Array} Returns the new shuffled array.\n     * @example\n     *\n     * _.shuffle([1, 2, 3, 4]);\n     * // => [4, 1, 3, 2]\n     */\n    function shuffle(collection) {\n      return sample(collection, POSITIVE_INFINITY);\n    }\n\n    /**\n     * Gets the size of `collection` by returning its length for array-like\n     * values or the number of own enumerable properties for objects.\n     *\n     * @static\n     * @memberOf _\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to inspect.\n     * @returns {number} Returns the size of `collection`.\n     * @example\n     *\n     * _.size([1, 2, 3]);\n     * // => 3\n     *\n     * _.size({ 'a': 1, 'b': 2 });\n     * // => 2\n     *\n     * _.size('pebbles');\n     * // => 7\n     */\n    function size(collection) {\n      var length = collection ? getLength(collection) : 0;\n      return isLength(length) ? length : keys(collection).length;\n    }\n\n    /**\n     * Checks if `predicate` returns truthy for **any** element of `collection`.\n     * The function returns as soon as it finds a passing value and does not iterate\n     * over the entire collection. The predicate is bound to `thisArg` and invoked\n     * with three arguments: (value, index|key, collection).\n     *\n     * If a property name is provided for `predicate` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `predicate` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @alias any\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [predicate=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `predicate`.\n     * @returns {boolean} Returns `true` if any element passes the predicate check,\n     *  else `false`.\n     * @example\n     *\n     * _.some([null, 0, 'yes', false], Boolean);\n     * // => true\n     *\n     * var users = [\n     *   { 'user': 'barney', 'active': true },\n     *   { 'user': 'fred',   'active': false }\n     * ];\n     *\n     * // using the `_.matches` callback shorthand\n     * _.some(users, { 'user': 'barney', 'active': false });\n     * // => false\n     *\n     * // using the `_.matchesProperty` callback shorthand\n     * _.some(users, 'active', false);\n     * // => true\n     *\n     * // using the `_.property` callback shorthand\n     * _.some(users, 'active');\n     * // => true\n     */\n    function some(collection, predicate, thisArg) {\n      var func = isArray(collection) ? arraySome : baseSome;\n      if (thisArg && isIterateeCall(collection, predicate, thisArg)) {\n        predicate = undefined;\n      }\n      if (typeof predicate != 'function' || thisArg !== undefined) {\n        predicate = getCallback(predicate, thisArg, 3);\n      }\n      return func(collection, predicate);\n    }\n\n    /**\n     * Creates an array of elements, sorted in ascending order by the results of\n     * running each element in a collection through `iteratee`. This method performs\n     * a stable sort, that is, it preserves the original sort order of equal elements.\n     * The `iteratee` is bound to `thisArg` and invoked with three arguments:\n     * (value, index|key, collection).\n     *\n     * If a property name is provided for `iteratee` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `iteratee` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [iteratee=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {Array} Returns the new sorted array.\n     * @example\n     *\n     * _.sortBy([1, 2, 3], function(n) {\n     *   return Math.sin(n);\n     * });\n     * // => [3, 1, 2]\n     *\n     * _.sortBy([1, 2, 3], function(n) {\n     *   return this.sin(n);\n     * }, Math);\n     * // => [3, 1, 2]\n     *\n     * var users = [\n     *   { 'user': 'fred' },\n     *   { 'user': 'pebbles' },\n     *   { 'user': 'barney' }\n     * ];\n     *\n     * // using the `_.property` callback shorthand\n     * _.pluck(_.sortBy(users, 'user'), 'user');\n     * // => ['barney', 'fred', 'pebbles']\n     */\n    function sortBy(collection, iteratee, thisArg) {\n      if (collection == null) {\n        return [];\n      }\n      if (thisArg && isIterateeCall(collection, iteratee, thisArg)) {\n        iteratee = undefined;\n      }\n      var index = -1;\n      iteratee = getCallback(iteratee, thisArg, 3);\n\n      var result = baseMap(collection, function(value, key, collection) {\n        return { 'criteria': iteratee(value, key, collection), 'index': ++index, 'value': value };\n      });\n      return baseSortBy(result, compareAscending);\n    }\n\n    /**\n     * This method is like `_.sortBy` except that it can sort by multiple iteratees\n     * or property names.\n     *\n     * If a property name is provided for an iteratee the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If an object is provided for an iteratee the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {...(Function|Function[]|Object|Object[]|string|string[])} iteratees\n     *  The iteratees to sort by, specified as individual values or arrays of values.\n     * @returns {Array} Returns the new sorted array.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'fred',   'age': 48 },\n     *   { 'user': 'barney', 'age': 36 },\n     *   { 'user': 'fred',   'age': 42 },\n     *   { 'user': 'barney', 'age': 34 }\n     * ];\n     *\n     * _.map(_.sortByAll(users, ['user', 'age']), _.values);\n     * // => [['barney', 34], ['barney', 36], ['fred', 42], ['fred', 48]]\n     *\n     * _.map(_.sortByAll(users, 'user', function(chr) {\n     *   return Math.floor(chr.age / 10);\n     * }), _.values);\n     * // => [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 42]]\n     */\n    var sortByAll = restParam(function(collection, iteratees) {\n      if (collection == null) {\n        return [];\n      }\n      var guard = iteratees[2];\n      if (guard && isIterateeCall(iteratees[0], iteratees[1], guard)) {\n        iteratees.length = 1;\n      }\n      return baseSortByOrder(collection, baseFlatten(iteratees), []);\n    });\n\n    /**\n     * This method is like `_.sortByAll` except that it allows specifying the\n     * sort orders of the iteratees to sort by. If `orders` is unspecified, all\n     * values are sorted in ascending order. Otherwise, a value is sorted in\n     * ascending order if its corresponding order is \"asc\", and descending if \"desc\".\n     *\n     * If a property name is provided for an iteratee the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If an object is provided for an iteratee the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.\n     * @param {boolean[]} [orders] The sort orders of `iteratees`.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.reduce`.\n     * @returns {Array} Returns the new sorted array.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'fred',   'age': 48 },\n     *   { 'user': 'barney', 'age': 34 },\n     *   { 'user': 'fred',   'age': 42 },\n     *   { 'user': 'barney', 'age': 36 }\n     * ];\n     *\n     * // sort by `user` in ascending order and by `age` in descending order\n     * _.map(_.sortByOrder(users, ['user', 'age'], ['asc', 'desc']), _.values);\n     * // => [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 42]]\n     */\n    function sortByOrder(collection, iteratees, orders, guard) {\n      if (collection == null) {\n        return [];\n      }\n      if (guard && isIterateeCall(iteratees, orders, guard)) {\n        orders = undefined;\n      }\n      if (!isArray(iteratees)) {\n        iteratees = iteratees == null ? [] : [iteratees];\n      }\n      if (!isArray(orders)) {\n        orders = orders == null ? [] : [orders];\n      }\n      return baseSortByOrder(collection, iteratees, orders);\n    }\n\n    /**\n     * Performs a deep comparison between each element in `collection` and the\n     * source object, returning an array of all elements that have equivalent\n     * property values.\n     *\n     * **Note:** This method supports comparing arrays, booleans, `Date` objects,\n     * numbers, `Object` objects, regexes, and strings. Objects are compared by\n     * their own, not inherited, enumerable properties. For comparing a single\n     * own or inherited property value see `_.matchesProperty`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to search.\n     * @param {Object} source The object of property values to match.\n     * @returns {Array} Returns the new filtered array.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': false, 'pets': ['hoppy'] },\n     *   { 'user': 'fred',   'age': 40, 'active': true, 'pets': ['baby puss', 'dino'] }\n     * ];\n     *\n     * _.pluck(_.where(users, { 'age': 36, 'active': false }), 'user');\n     * // => ['barney']\n     *\n     * _.pluck(_.where(users, { 'pets': ['dino'] }), 'user');\n     * // => ['fred']\n     */\n    function where(collection, source) {\n      return filter(collection, baseMatches(source));\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Gets the number of milliseconds that have elapsed since the Unix epoch\n     * (1 January 1970 00:00:00 UTC).\n     *\n     * @static\n     * @memberOf _\n     * @category Date\n     * @example\n     *\n     * _.defer(function(stamp) {\n     *   console.log(_.now() - stamp);\n     * }, _.now());\n     * // => logs the number of milliseconds it took for the deferred function to be invoked\n     */\n    var now = nativeNow || function() {\n      return new Date().getTime();\n    };\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * The opposite of `_.before`; this method creates a function that invokes\n     * `func` once it is called `n` or more times.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {number} n The number of calls before `func` is invoked.\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * var saves = ['profile', 'settings'];\n     *\n     * var done = _.after(saves.length, function() {\n     *   console.log('done saving!');\n     * });\n     *\n     * _.forEach(saves, function(type) {\n     *   asyncSave({ 'type': type, 'complete': done });\n     * });\n     * // => logs 'done saving!' after the two async saves have completed\n     */\n    function after(n, func) {\n      if (typeof func != 'function') {\n        if (typeof n == 'function') {\n          var temp = n;\n          n = func;\n          func = temp;\n        } else {\n          throw new TypeError(FUNC_ERROR_TEXT);\n        }\n      }\n      n = nativeIsFinite(n = +n) ? n : 0;\n      return function() {\n        if (--n < 1) {\n          return func.apply(this, arguments);\n        }\n      };\n    }\n\n    /**\n     * Creates a function that accepts up to `n` arguments ignoring any\n     * additional arguments.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to cap arguments for.\n     * @param {number} [n=func.length] The arity cap.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * _.map(['6', '8', '10'], _.ary(parseInt, 1));\n     * // => [6, 8, 10]\n     */\n    function ary(func, n, guard) {\n      if (guard && isIterateeCall(func, n, guard)) {\n        n = undefined;\n      }\n      n = (func && n == null) ? func.length : nativeMax(+n || 0, 0);\n      return createWrapper(func, ARY_FLAG, undefined, undefined, undefined, undefined, n);\n    }\n\n    /**\n     * Creates a function that invokes `func`, with the `this` binding and arguments\n     * of the created function, while it is called less than `n` times. Subsequent\n     * calls to the created function return the result of the last `func` invocation.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {number} n The number of calls at which `func` is no longer invoked.\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * jQuery('#add').on('click', _.before(5, addContactToList));\n     * // => allows adding up to 4 contacts to the list\n     */\n    function before(n, func) {\n      var result;\n      if (typeof func != 'function') {\n        if (typeof n == 'function') {\n          var temp = n;\n          n = func;\n          func = temp;\n        } else {\n          throw new TypeError(FUNC_ERROR_TEXT);\n        }\n      }\n      return function() {\n        if (--n > 0) {\n          result = func.apply(this, arguments);\n        }\n        if (n <= 1) {\n          func = undefined;\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Creates a function that invokes `func` with the `this` binding of `thisArg`\n     * and prepends any additional `_.bind` arguments to those provided to the\n     * bound function.\n     *\n     * The `_.bind.placeholder` value, which defaults to `_` in monolithic builds,\n     * may be used as a placeholder for partially applied arguments.\n     *\n     * **Note:** Unlike native `Function#bind` this method does not set the \"length\"\n     * property of bound functions.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to bind.\n     * @param {*} thisArg The `this` binding of `func`.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new bound function.\n     * @example\n     *\n     * var greet = function(greeting, punctuation) {\n     *   return greeting + ' ' + this.user + punctuation;\n     * };\n     *\n     * var object = { 'user': 'fred' };\n     *\n     * var bound = _.bind(greet, object, 'hi');\n     * bound('!');\n     * // => 'hi fred!'\n     *\n     * // using placeholders\n     * var bound = _.bind(greet, object, _, '!');\n     * bound('hi');\n     * // => 'hi fred!'\n     */\n    var bind = restParam(function(func, thisArg, partials) {\n      var bitmask = BIND_FLAG;\n      if (partials.length) {\n        var holders = replaceHolders(partials, bind.placeholder);\n        bitmask |= PARTIAL_FLAG;\n      }\n      return createWrapper(func, bitmask, thisArg, partials, holders);\n    });\n\n    /**\n     * Binds methods of an object to the object itself, overwriting the existing\n     * method. Method names may be specified as individual arguments or as arrays\n     * of method names. If no method names are provided all enumerable function\n     * properties, own and inherited, of `object` are bound.\n     *\n     * **Note:** This method does not set the \"length\" property of bound functions.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Object} object The object to bind and assign the bound methods to.\n     * @param {...(string|string[])} [methodNames] The object method names to bind,\n     *  specified as individual method names or arrays of method names.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var view = {\n     *   'label': 'docs',\n     *   'onClick': function() {\n     *     console.log('clicked ' + this.label);\n     *   }\n     * };\n     *\n     * _.bindAll(view);\n     * jQuery('#docs').on('click', view.onClick);\n     * // => logs 'clicked docs' when the element is clicked\n     */\n    var bindAll = restParam(function(object, methodNames) {\n      methodNames = methodNames.length ? baseFlatten(methodNames) : functions(object);\n\n      var index = -1,\n          length = methodNames.length;\n\n      while (++index < length) {\n        var key = methodNames[index];\n        object[key] = createWrapper(object[key], BIND_FLAG, object);\n      }\n      return object;\n    });\n\n    /**\n     * Creates a function that invokes the method at `object[key]` and prepends\n     * any additional `_.bindKey` arguments to those provided to the bound function.\n     *\n     * This method differs from `_.bind` by allowing bound functions to reference\n     * methods that may be redefined or don't yet exist.\n     * See [Peter Michaux's article](http://peter.michaux.ca/articles/lazy-function-definition-pattern)\n     * for more details.\n     *\n     * The `_.bindKey.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for partially applied arguments.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Object} object The object the method belongs to.\n     * @param {string} key The key of the method.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new bound function.\n     * @example\n     *\n     * var object = {\n     *   'user': 'fred',\n     *   'greet': function(greeting, punctuation) {\n     *     return greeting + ' ' + this.user + punctuation;\n     *   }\n     * };\n     *\n     * var bound = _.bindKey(object, 'greet', 'hi');\n     * bound('!');\n     * // => 'hi fred!'\n     *\n     * object.greet = function(greeting, punctuation) {\n     *   return greeting + 'ya ' + this.user + punctuation;\n     * };\n     *\n     * bound('!');\n     * // => 'hiya fred!'\n     *\n     * // using placeholders\n     * var bound = _.bindKey(object, 'greet', _, '!');\n     * bound('hi');\n     * // => 'hiya fred!'\n     */\n    var bindKey = restParam(function(object, key, partials) {\n      var bitmask = BIND_FLAG | BIND_KEY_FLAG;\n      if (partials.length) {\n        var holders = replaceHolders(partials, bindKey.placeholder);\n        bitmask |= PARTIAL_FLAG;\n      }\n      return createWrapper(key, bitmask, object, partials, holders);\n    });\n\n    /**\n     * Creates a function that accepts one or more arguments of `func` that when\n     * called either invokes `func` returning its result, if all `func` arguments\n     * have been provided, or returns a function that accepts one or more of the\n     * remaining `func` arguments, and so on. The arity of `func` may be specified\n     * if `func.length` is not sufficient.\n     *\n     * The `_.curry.placeholder` value, which defaults to `_` in monolithic builds,\n     * may be used as a placeholder for provided arguments.\n     *\n     * **Note:** This method does not set the \"length\" property of curried functions.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to curry.\n     * @param {number} [arity=func.length] The arity of `func`.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.\n     * @returns {Function} Returns the new curried function.\n     * @example\n     *\n     * var abc = function(a, b, c) {\n     *   return [a, b, c];\n     * };\n     *\n     * var curried = _.curry(abc);\n     *\n     * curried(1)(2)(3);\n     * // => [1, 2, 3]\n     *\n     * curried(1, 2)(3);\n     * // => [1, 2, 3]\n     *\n     * curried(1, 2, 3);\n     * // => [1, 2, 3]\n     *\n     * // using placeholders\n     * curried(1)(_, 3)(2);\n     * // => [1, 2, 3]\n     */\n    var curry = createCurry(CURRY_FLAG);\n\n    /**\n     * This method is like `_.curry` except that arguments are applied to `func`\n     * in the manner of `_.partialRight` instead of `_.partial`.\n     *\n     * The `_.curryRight.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for provided arguments.\n     *\n     * **Note:** This method does not set the \"length\" property of curried functions.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to curry.\n     * @param {number} [arity=func.length] The arity of `func`.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.\n     * @returns {Function} Returns the new curried function.\n     * @example\n     *\n     * var abc = function(a, b, c) {\n     *   return [a, b, c];\n     * };\n     *\n     * var curried = _.curryRight(abc);\n     *\n     * curried(3)(2)(1);\n     * // => [1, 2, 3]\n     *\n     * curried(2, 3)(1);\n     * // => [1, 2, 3]\n     *\n     * curried(1, 2, 3);\n     * // => [1, 2, 3]\n     *\n     * // using placeholders\n     * curried(3)(1, _)(2);\n     * // => [1, 2, 3]\n     */\n    var curryRight = createCurry(CURRY_RIGHT_FLAG);\n\n    /**\n     * Creates a debounced function that delays invoking `func` until after `wait`\n     * milliseconds have elapsed since the last time the debounced function was\n     * invoked. The debounced function comes with a `cancel` method to cancel\n     * delayed invocations. Provide an options object to indicate that `func`\n     * should be invoked on the leading and/or trailing edge of the `wait` timeout.\n     * Subsequent calls to the debounced function return the result of the last\n     * `func` invocation.\n     *\n     * **Note:** If `leading` and `trailing` options are `true`, `func` is invoked\n     * on the trailing edge of the timeout only if the the debounced function is\n     * invoked more than once during the `wait` timeout.\n     *\n     * See [David Corbacho's article](http://drupalmotion.com/article/debounce-and-throttle-visual-explanation)\n     * for details over the differences between `_.debounce` and `_.throttle`.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to debounce.\n     * @param {number} [wait=0] The number of milliseconds to delay.\n     * @param {Object} [options] The options object.\n     * @param {boolean} [options.leading=false] Specify invoking on the leading\n     *  edge of the timeout.\n     * @param {number} [options.maxWait] The maximum time `func` is allowed to be\n     *  delayed before it is invoked.\n     * @param {boolean} [options.trailing=true] Specify invoking on the trailing\n     *  edge of the timeout.\n     * @returns {Function} Returns the new debounced function.\n     * @example\n     *\n     * // avoid costly calculations while the window size is in flux\n     * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n     *\n     * // invoke `sendMail` when the click event is fired, debouncing subsequent calls\n     * jQuery('#postbox').on('click', _.debounce(sendMail, 300, {\n     *   'leading': true,\n     *   'trailing': false\n     * }));\n     *\n     * // ensure `batchLog` is invoked once after 1 second of debounced calls\n     * var source = new EventSource('/stream');\n     * jQuery(source).on('message', _.debounce(batchLog, 250, {\n     *   'maxWait': 1000\n     * }));\n     *\n     * // cancel a debounced call\n     * var todoChanges = _.debounce(batchLog, 1000);\n     * Object.observe(models.todo, todoChanges);\n     *\n     * Object.observe(models, function(changes) {\n     *   if (_.find(changes, { 'user': 'todo', 'type': 'delete'})) {\n     *     todoChanges.cancel();\n     *   }\n     * }, ['delete']);\n     *\n     * // ...at some point `models.todo` is changed\n     * models.todo.completed = true;\n     *\n     * // ...before 1 second has passed `models.todo` is deleted\n     * // which cancels the debounced `todoChanges` call\n     * delete models.todo;\n     */\n    function debounce(func, wait, options) {\n      var args,\n          maxTimeoutId,\n          result,\n          stamp,\n          thisArg,\n          timeoutId,\n          trailingCall,\n          lastCalled = 0,\n          maxWait = false,\n          trailing = true;\n\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      wait = wait < 0 ? 0 : (+wait || 0);\n      if (options === true) {\n        var leading = true;\n        trailing = false;\n      } else if (isObject(options)) {\n        leading = !!options.leading;\n        maxWait = 'maxWait' in options && nativeMax(+options.maxWait || 0, wait);\n        trailing = 'trailing' in options ? !!options.trailing : trailing;\n      }\n\n      function cancel() {\n        if (timeoutId) {\n          clearTimeout(timeoutId);\n        }\n        if (maxTimeoutId) {\n          clearTimeout(maxTimeoutId);\n        }\n        lastCalled = 0;\n        maxTimeoutId = timeoutId = trailingCall = undefined;\n      }\n\n      function complete(isCalled, id) {\n        if (id) {\n          clearTimeout(id);\n        }\n        maxTimeoutId = timeoutId = trailingCall = undefined;\n        if (isCalled) {\n          lastCalled = now();\n          result = func.apply(thisArg, args);\n          if (!timeoutId && !maxTimeoutId) {\n            args = thisArg = undefined;\n          }\n        }\n      }\n\n      function delayed() {\n        var remaining = wait - (now() - stamp);\n        if (remaining <= 0 || remaining > wait) {\n          complete(trailingCall, maxTimeoutId);\n        } else {\n          timeoutId = setTimeout(delayed, remaining);\n        }\n      }\n\n      function maxDelayed() {\n        complete(trailing, timeoutId);\n      }\n\n      function debounced() {\n        args = arguments;\n        stamp = now();\n        thisArg = this;\n        trailingCall = trailing && (timeoutId || !leading);\n\n        if (maxWait === false) {\n          var leadingCall = leading && !timeoutId;\n        } else {\n          if (!maxTimeoutId && !leading) {\n            lastCalled = stamp;\n          }\n          var remaining = maxWait - (stamp - lastCalled),\n              isCalled = remaining <= 0 || remaining > maxWait;\n\n          if (isCalled) {\n            if (maxTimeoutId) {\n              maxTimeoutId = clearTimeout(maxTimeoutId);\n            }\n            lastCalled = stamp;\n            result = func.apply(thisArg, args);\n          }\n          else if (!maxTimeoutId) {\n            maxTimeoutId = setTimeout(maxDelayed, remaining);\n          }\n        }\n        if (isCalled && timeoutId) {\n          timeoutId = clearTimeout(timeoutId);\n        }\n        else if (!timeoutId && wait !== maxWait) {\n          timeoutId = setTimeout(delayed, wait);\n        }\n        if (leadingCall) {\n          isCalled = true;\n          result = func.apply(thisArg, args);\n        }\n        if (isCalled && !timeoutId && !maxTimeoutId) {\n          args = thisArg = undefined;\n        }\n        return result;\n      }\n      debounced.cancel = cancel;\n      return debounced;\n    }\n\n    /**\n     * Defers invoking the `func` until the current call stack has cleared. Any\n     * additional arguments are provided to `func` when it is invoked.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to defer.\n     * @param {...*} [args] The arguments to invoke the function with.\n     * @returns {number} Returns the timer id.\n     * @example\n     *\n     * _.defer(function(text) {\n     *   console.log(text);\n     * }, 'deferred');\n     * // logs 'deferred' after one or more milliseconds\n     */\n    var defer = restParam(function(func, args) {\n      return baseDelay(func, 1, args);\n    });\n\n    /**\n     * Invokes `func` after `wait` milliseconds. Any additional arguments are\n     * provided to `func` when it is invoked.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to delay.\n     * @param {number} wait The number of milliseconds to delay invocation.\n     * @param {...*} [args] The arguments to invoke the function with.\n     * @returns {number} Returns the timer id.\n     * @example\n     *\n     * _.delay(function(text) {\n     *   console.log(text);\n     * }, 1000, 'later');\n     * // => logs 'later' after one second\n     */\n    var delay = restParam(function(func, wait, args) {\n      return baseDelay(func, wait, args);\n    });\n\n    /**\n     * Creates a function that returns the result of invoking the provided\n     * functions with the `this` binding of the created function, where each\n     * successive invocation is supplied the return value of the previous.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {...Function} [funcs] Functions to invoke.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var addSquare = _.flow(_.add, square);\n     * addSquare(1, 2);\n     * // => 9\n     */\n    var flow = createFlow();\n\n    /**\n     * This method is like `_.flow` except that it creates a function that\n     * invokes the provided functions from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @alias backflow, compose\n     * @category Function\n     * @param {...Function} [funcs] Functions to invoke.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var addSquare = _.flowRight(square, _.add);\n     * addSquare(1, 2);\n     * // => 9\n     */\n    var flowRight = createFlow(true);\n\n    /**\n     * Creates a function that memoizes the result of `func`. If `resolver` is\n     * provided it determines the cache key for storing the result based on the\n     * arguments provided to the memoized function. By default, the first argument\n     * provided to the memoized function is coerced to a string and used as the\n     * cache key. The `func` is invoked with the `this` binding of the memoized\n     * function.\n     *\n     * **Note:** The cache is exposed as the `cache` property on the memoized\n     * function. Its creation may be customized by replacing the `_.memoize.Cache`\n     * constructor with one whose instances implement the [`Map`](http://ecma-international.org/ecma-262/6.0/#sec-properties-of-the-map-prototype-object)\n     * method interface of `get`, `has`, and `set`.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to have its output memoized.\n     * @param {Function} [resolver] The function to resolve the cache key.\n     * @returns {Function} Returns the new memoizing function.\n     * @example\n     *\n     * var upperCase = _.memoize(function(string) {\n     *   return string.toUpperCase();\n     * });\n     *\n     * upperCase('fred');\n     * // => 'FRED'\n     *\n     * // modifying the result cache\n     * upperCase.cache.set('fred', 'BARNEY');\n     * upperCase('fred');\n     * // => 'BARNEY'\n     *\n     * // replacing `_.memoize.Cache`\n     * var object = { 'user': 'fred' };\n     * var other = { 'user': 'barney' };\n     * var identity = _.memoize(_.identity);\n     *\n     * identity(object);\n     * // => { 'user': 'fred' }\n     * identity(other);\n     * // => { 'user': 'fred' }\n     *\n     * _.memoize.Cache = WeakMap;\n     * var identity = _.memoize(_.identity);\n     *\n     * identity(object);\n     * // => { 'user': 'fred' }\n     * identity(other);\n     * // => { 'user': 'barney' }\n     */\n    function memoize(func, resolver) {\n      if (typeof func != 'function' || (resolver && typeof resolver != 'function')) {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      var memoized = function() {\n        var args = arguments,\n            key = resolver ? resolver.apply(this, args) : args[0],\n            cache = memoized.cache;\n\n        if (cache.has(key)) {\n          return cache.get(key);\n        }\n        var result = func.apply(this, args);\n        memoized.cache = cache.set(key, result);\n        return result;\n      };\n      memoized.cache = new memoize.Cache;\n      return memoized;\n    }\n\n    /**\n     * Creates a function that runs each argument through a corresponding\n     * transform function.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to wrap.\n     * @param {...(Function|Function[])} [transforms] The functions to transform\n     * arguments, specified as individual functions or arrays of functions.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * function doubled(n) {\n     *   return n * 2;\n     * }\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var modded = _.modArgs(function(x, y) {\n     *   return [x, y];\n     * }, square, doubled);\n     *\n     * modded(1, 2);\n     * // => [1, 4]\n     *\n     * modded(5, 10);\n     * // => [25, 20]\n     */\n    var modArgs = restParam(function(func, transforms) {\n      transforms = baseFlatten(transforms);\n      if (typeof func != 'function' || !arrayEvery(transforms, baseIsFunction)) {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      var length = transforms.length;\n      return restParam(function(args) {\n        var index = nativeMin(args.length, length);\n        while (index--) {\n          args[index] = transforms[index](args[index]);\n        }\n        return func.apply(this, args);\n      });\n    });\n\n    /**\n     * Creates a function that negates the result of the predicate `func`. The\n     * `func` predicate is invoked with the `this` binding and arguments of the\n     * created function.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Function} predicate The predicate to negate.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * function isEven(n) {\n     *   return n % 2 == 0;\n     * }\n     *\n     * _.filter([1, 2, 3, 4, 5, 6], _.negate(isEven));\n     * // => [1, 3, 5]\n     */\n    function negate(predicate) {\n      if (typeof predicate != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      return function() {\n        return !predicate.apply(this, arguments);\n      };\n    }\n\n    /**\n     * Creates a function that is restricted to invoking `func` once. Repeat calls\n     * to the function return the value of the first call. The `func` is invoked\n     * with the `this` binding and arguments of the created function.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * var initialize = _.once(createApplication);\n     * initialize();\n     * initialize();\n     * // `initialize` invokes `createApplication` once\n     */\n    function once(func) {\n      return before(2, func);\n    }\n\n    /**\n     * Creates a function that invokes `func` with `partial` arguments prepended\n     * to those provided to the new function. This method is like `_.bind` except\n     * it does **not** alter the `this` binding.\n     *\n     * The `_.partial.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for partially applied arguments.\n     *\n     * **Note:** This method does not set the \"length\" property of partially\n     * applied functions.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to partially apply arguments to.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new partially applied function.\n     * @example\n     *\n     * var greet = function(greeting, name) {\n     *   return greeting + ' ' + name;\n     * };\n     *\n     * var sayHelloTo = _.partial(greet, 'hello');\n     * sayHelloTo('fred');\n     * // => 'hello fred'\n     *\n     * // using placeholders\n     * var greetFred = _.partial(greet, _, 'fred');\n     * greetFred('hi');\n     * // => 'hi fred'\n     */\n    var partial = createPartial(PARTIAL_FLAG);\n\n    /**\n     * This method is like `_.partial` except that partially applied arguments\n     * are appended to those provided to the new function.\n     *\n     * The `_.partialRight.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for partially applied arguments.\n     *\n     * **Note:** This method does not set the \"length\" property of partially\n     * applied functions.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to partially apply arguments to.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new partially applied function.\n     * @example\n     *\n     * var greet = function(greeting, name) {\n     *   return greeting + ' ' + name;\n     * };\n     *\n     * var greetFred = _.partialRight(greet, 'fred');\n     * greetFred('hi');\n     * // => 'hi fred'\n     *\n     * // using placeholders\n     * var sayHelloTo = _.partialRight(greet, 'hello', _);\n     * sayHelloTo('fred');\n     * // => 'hello fred'\n     */\n    var partialRight = createPartial(PARTIAL_RIGHT_FLAG);\n\n    /**\n     * Creates a function that invokes `func` with arguments arranged according\n     * to the specified indexes where the argument value at the first index is\n     * provided as the first argument, the argument value at the second index is\n     * provided as the second argument, and so on.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to rearrange arguments for.\n     * @param {...(number|number[])} indexes The arranged argument indexes,\n     *  specified as individual indexes or arrays of indexes.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var rearged = _.rearg(function(a, b, c) {\n     *   return [a, b, c];\n     * }, 2, 0, 1);\n     *\n     * rearged('b', 'c', 'a')\n     * // => ['a', 'b', 'c']\n     *\n     * var map = _.rearg(_.map, [1, 0]);\n     * map(function(n) {\n     *   return n * 3;\n     * }, [1, 2, 3]);\n     * // => [3, 6, 9]\n     */\n    var rearg = restParam(function(func, indexes) {\n      return createWrapper(func, REARG_FLAG, undefined, undefined, undefined, baseFlatten(indexes));\n    });\n\n    /**\n     * Creates a function that invokes `func` with the `this` binding of the\n     * created function and arguments from `start` and beyond provided as an array.\n     *\n     * **Note:** This method is based on the [rest parameter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters).\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to apply a rest parameter to.\n     * @param {number} [start=func.length-1] The start position of the rest parameter.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var say = _.restParam(function(what, names) {\n     *   return what + ' ' + _.initial(names).join(', ') +\n     *     (_.size(names) > 1 ? ', & ' : '') + _.last(names);\n     * });\n     *\n     * say('hello', 'fred', 'barney', 'pebbles');\n     * // => 'hello fred, barney, & pebbles'\n     */\n    function restParam(func, start) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      start = nativeMax(start === undefined ? (func.length - 1) : (+start || 0), 0);\n      return function() {\n        var args = arguments,\n            index = -1,\n            length = nativeMax(args.length - start, 0),\n            rest = Array(length);\n\n        while (++index < length) {\n          rest[index] = args[start + index];\n        }\n        switch (start) {\n          case 0: return func.call(this, rest);\n          case 1: return func.call(this, args[0], rest);\n          case 2: return func.call(this, args[0], args[1], rest);\n        }\n        var otherArgs = Array(start + 1);\n        index = -1;\n        while (++index < start) {\n          otherArgs[index] = args[index];\n        }\n        otherArgs[start] = rest;\n        return func.apply(this, otherArgs);\n      };\n    }\n\n    /**\n     * Creates a function that invokes `func` with the `this` binding of the created\n     * function and an array of arguments much like [`Function#apply`](https://es5.github.io/#x15.3.4.3).\n     *\n     * **Note:** This method is based on the [spread operator](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operator).\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to spread arguments over.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var say = _.spread(function(who, what) {\n     *   return who + ' says ' + what;\n     * });\n     *\n     * say(['fred', 'hello']);\n     * // => 'fred says hello'\n     *\n     * // with a Promise\n     * var numbers = Promise.all([\n     *   Promise.resolve(40),\n     *   Promise.resolve(36)\n     * ]);\n     *\n     * numbers.then(_.spread(function(x, y) {\n     *   return x + y;\n     * }));\n     * // => a Promise of 76\n     */\n    function spread(func) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      return function(array) {\n        return func.apply(this, array);\n      };\n    }\n\n    /**\n     * Creates a throttled function that only invokes `func` at most once per\n     * every `wait` milliseconds. The throttled function comes with a `cancel`\n     * method to cancel delayed invocations. Provide an options object to indicate\n     * that `func` should be invoked on the leading and/or trailing edge of the\n     * `wait` timeout. Subsequent calls to the throttled function return the\n     * result of the last `func` call.\n     *\n     * **Note:** If `leading` and `trailing` options are `true`, `func` is invoked\n     * on the trailing edge of the timeout only if the the throttled function is\n     * invoked more than once during the `wait` timeout.\n     *\n     * See [David Corbacho's article](http://drupalmotion.com/article/debounce-and-throttle-visual-explanation)\n     * for details over the differences between `_.throttle` and `_.debounce`.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to throttle.\n     * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n     * @param {Object} [options] The options object.\n     * @param {boolean} [options.leading=true] Specify invoking on the leading\n     *  edge of the timeout.\n     * @param {boolean} [options.trailing=true] Specify invoking on the trailing\n     *  edge of the timeout.\n     * @returns {Function} Returns the new throttled function.\n     * @example\n     *\n     * // avoid excessively updating the position while scrolling\n     * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n     *\n     * // invoke `renewToken` when the click event is fired, but not more than once every 5 minutes\n     * jQuery('.interactive').on('click', _.throttle(renewToken, 300000, {\n     *   'trailing': false\n     * }));\n     *\n     * // cancel a trailing throttled call\n     * jQuery(window).on('popstate', throttled.cancel);\n     */\n    function throttle(func, wait, options) {\n      var leading = true,\n          trailing = true;\n\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      if (options === false) {\n        leading = false;\n      } else if (isObject(options)) {\n        leading = 'leading' in options ? !!options.leading : leading;\n        trailing = 'trailing' in options ? !!options.trailing : trailing;\n      }\n      return debounce(func, wait, { 'leading': leading, 'maxWait': +wait, 'trailing': trailing });\n    }\n\n    /**\n     * Creates a function that provides `value` to the wrapper function as its\n     * first argument. Any additional arguments provided to the function are\n     * appended to those provided to the wrapper function. The wrapper is invoked\n     * with the `this` binding of the created function.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {*} value The value to wrap.\n     * @param {Function} wrapper The wrapper function.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var p = _.wrap(_.escape, function(func, text) {\n     *   return '<p>' + func(text) + '</p>';\n     * });\n     *\n     * p('fred, barney, & pebbles');\n     * // => '<p>fred, barney, &amp; pebbles</p>'\n     */\n    function wrap(value, wrapper) {\n      wrapper = wrapper == null ? identity : wrapper;\n      return createWrapper(wrapper, PARTIAL_FLAG, undefined, [value], []);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a clone of `value`. If `isDeep` is `true` nested objects are cloned,\n     * otherwise they are assigned by reference. If `customizer` is provided it is\n     * invoked to produce the cloned values. If `customizer` returns `undefined`\n     * cloning is handled by the method instead. The `customizer` is bound to\n     * `thisArg` and invoked with two argument; (value [, index|key, object]).\n     *\n     * **Note:** This method is loosely based on the\n     * [structured clone algorithm](http://www.w3.org/TR/html5/infrastructure.html#internal-structured-cloning-algorithm).\n     * The enumerable properties of `arguments` objects and objects created by\n     * constructors other than `Object` are cloned to plain `Object` objects. An\n     * empty object is returned for uncloneable values such as functions, DOM nodes,\n     * Maps, Sets, and WeakMaps.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @param {Function} [customizer] The function to customize cloning values.\n     * @param {*} [thisArg] The `this` binding of `customizer`.\n     * @returns {*} Returns the cloned value.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney' },\n     *   { 'user': 'fred' }\n     * ];\n     *\n     * var shallow = _.clone(users);\n     * shallow[0] === users[0];\n     * // => true\n     *\n     * var deep = _.clone(users, true);\n     * deep[0] === users[0];\n     * // => false\n     *\n     * // using a customizer callback\n     * var el = _.clone(document.body, function(value) {\n     *   if (_.isElement(value)) {\n     *     return value.cloneNode(false);\n     *   }\n     * });\n     *\n     * el === document.body\n     * // => false\n     * el.nodeName\n     * // => BODY\n     * el.childNodes.length;\n     * // => 0\n     */\n    function clone(value, isDeep, customizer, thisArg) {\n      if (isDeep && typeof isDeep != 'boolean' && isIterateeCall(value, isDeep, customizer)) {\n        isDeep = false;\n      }\n      else if (typeof isDeep == 'function') {\n        thisArg = customizer;\n        customizer = isDeep;\n        isDeep = false;\n      }\n      return typeof customizer == 'function'\n        ? baseClone(value, isDeep, bindCallback(customizer, thisArg, 1))\n        : baseClone(value, isDeep);\n    }\n\n    /**\n     * Creates a deep clone of `value`. If `customizer` is provided it is invoked\n     * to produce the cloned values. If `customizer` returns `undefined` cloning\n     * is handled by the method instead. The `customizer` is bound to `thisArg`\n     * and invoked with two argument; (value [, index|key, object]).\n     *\n     * **Note:** This method is loosely based on the\n     * [structured clone algorithm](http://www.w3.org/TR/html5/infrastructure.html#internal-structured-cloning-algorithm).\n     * The enumerable properties of `arguments` objects and objects created by\n     * constructors other than `Object` are cloned to plain `Object` objects. An\n     * empty object is returned for uncloneable values such as functions, DOM nodes,\n     * Maps, Sets, and WeakMaps.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to deep clone.\n     * @param {Function} [customizer] The function to customize cloning values.\n     * @param {*} [thisArg] The `this` binding of `customizer`.\n     * @returns {*} Returns the deep cloned value.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney' },\n     *   { 'user': 'fred' }\n     * ];\n     *\n     * var deep = _.cloneDeep(users);\n     * deep[0] === users[0];\n     * // => false\n     *\n     * // using a customizer callback\n     * var el = _.cloneDeep(document.body, function(value) {\n     *   if (_.isElement(value)) {\n     *     return value.cloneNode(true);\n     *   }\n     * });\n     *\n     * el === document.body\n     * // => false\n     * el.nodeName\n     * // => BODY\n     * el.childNodes.length;\n     * // => 20\n     */\n    function cloneDeep(value, customizer, thisArg) {\n      return typeof customizer == 'function'\n        ? baseClone(value, true, bindCallback(customizer, thisArg, 1))\n        : baseClone(value, true);\n    }\n\n    /**\n     * Checks if `value` is greater than `other`.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is greater than `other`, else `false`.\n     * @example\n     *\n     * _.gt(3, 1);\n     * // => true\n     *\n     * _.gt(3, 3);\n     * // => false\n     *\n     * _.gt(1, 3);\n     * // => false\n     */\n    function gt(value, other) {\n      return value > other;\n    }\n\n    /**\n     * Checks if `value` is greater than or equal to `other`.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is greater than or equal to `other`, else `false`.\n     * @example\n     *\n     * _.gte(3, 1);\n     * // => true\n     *\n     * _.gte(3, 3);\n     * // => true\n     *\n     * _.gte(1, 3);\n     * // => false\n     */\n    function gte(value, other) {\n      return value >= other;\n    }\n\n    /**\n     * Checks if `value` is classified as an `arguments` object.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n     * @example\n     *\n     * _.isArguments(function() { return arguments; }());\n     * // => true\n     *\n     * _.isArguments([1, 2, 3]);\n     * // => false\n     */\n    function isArguments(value) {\n      return isObjectLike(value) && isArrayLike(value) &&\n        hasOwnProperty.call(value, 'callee') && !propertyIsEnumerable.call(value, 'callee');\n    }\n\n    /**\n     * Checks if `value` is classified as an `Array` object.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n     * @example\n     *\n     * _.isArray([1, 2, 3]);\n     * // => true\n     *\n     * _.isArray(function() { return arguments; }());\n     * // => false\n     */\n    var isArray = nativeIsArray || function(value) {\n      return isObjectLike(value) && isLength(value.length) && objToString.call(value) == arrayTag;\n    };\n\n    /**\n     * Checks if `value` is classified as a boolean primitive or object.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n     * @example\n     *\n     * _.isBoolean(false);\n     * // => true\n     *\n     * _.isBoolean(null);\n     * // => false\n     */\n    function isBoolean(value) {\n      return value === true || value === false || (isObjectLike(value) && objToString.call(value) == boolTag);\n    }\n\n    /**\n     * Checks if `value` is classified as a `Date` object.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n     * @example\n     *\n     * _.isDate(new Date);\n     * // => true\n     *\n     * _.isDate('Mon April 23 2012');\n     * // => false\n     */\n    function isDate(value) {\n      return isObjectLike(value) && objToString.call(value) == dateTag;\n    }\n\n    /**\n     * Checks if `value` is a DOM element.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a DOM element, else `false`.\n     * @example\n     *\n     * _.isElement(document.body);\n     * // => true\n     *\n     * _.isElement('<body>');\n     * // => false\n     */\n    function isElement(value) {\n      return !!value && value.nodeType === 1 && isObjectLike(value) && !isPlainObject(value);\n    }\n\n    /**\n     * Checks if `value` is empty. A value is considered empty unless it is an\n     * `arguments` object, array, string, or jQuery-like collection with a length\n     * greater than `0` or an object with own enumerable properties.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {Array|Object|string} value The value to inspect.\n     * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n     * @example\n     *\n     * _.isEmpty(null);\n     * // => true\n     *\n     * _.isEmpty(true);\n     * // => true\n     *\n     * _.isEmpty(1);\n     * // => true\n     *\n     * _.isEmpty([1, 2, 3]);\n     * // => false\n     *\n     * _.isEmpty({ 'a': 1 });\n     * // => false\n     */\n    function isEmpty(value) {\n      if (value == null) {\n        return true;\n      }\n      if (isArrayLike(value) && (isArray(value) || isString(value) || isArguments(value) ||\n          (isObjectLike(value) && isFunction(value.splice)))) {\n        return !value.length;\n      }\n      return !keys(value).length;\n    }\n\n    /**\n     * Performs a deep comparison between two values to determine if they are\n     * equivalent. If `customizer` is provided it is invoked to compare values.\n     * If `customizer` returns `undefined` comparisons are handled by the method\n     * instead. The `customizer` is bound to `thisArg` and invoked with three\n     * arguments: (value, other [, index|key]).\n     *\n     * **Note:** This method supports comparing arrays, booleans, `Date` objects,\n     * numbers, `Object` objects, regexes, and strings. Objects are compared by\n     * their own, not inherited, enumerable properties. Functions and DOM nodes\n     * are **not** supported. Provide a customizer function to extend support\n     * for comparing other values.\n     *\n     * @static\n     * @memberOf _\n     * @alias eq\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @param {Function} [customizer] The function to customize value comparisons.\n     * @param {*} [thisArg] The `this` binding of `customizer`.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     * @example\n     *\n     * var object = { 'user': 'fred' };\n     * var other = { 'user': 'fred' };\n     *\n     * object == other;\n     * // => false\n     *\n     * _.isEqual(object, other);\n     * // => true\n     *\n     * // using a customizer callback\n     * var array = ['hello', 'goodbye'];\n     * var other = ['hi', 'goodbye'];\n     *\n     * _.isEqual(array, other, function(value, other) {\n     *   if (_.every([value, other], RegExp.prototype.test, /^h(?:i|ello)$/)) {\n     *     return true;\n     *   }\n     * });\n     * // => true\n     */\n    function isEqual(value, other, customizer, thisArg) {\n      customizer = typeof customizer == 'function' ? bindCallback(customizer, thisArg, 3) : undefined;\n      var result = customizer ? customizer(value, other) : undefined;\n      return  result === undefined ? baseIsEqual(value, other, customizer) : !!result;\n    }\n\n    /**\n     * Checks if `value` is an `Error`, `EvalError`, `RangeError`, `ReferenceError`,\n     * `SyntaxError`, `TypeError`, or `URIError` object.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an error object, else `false`.\n     * @example\n     *\n     * _.isError(new Error);\n     * // => true\n     *\n     * _.isError(Error);\n     * // => false\n     */\n    function isError(value) {\n      return isObjectLike(value) && typeof value.message == 'string' && objToString.call(value) == errorTag;\n    }\n\n    /**\n     * Checks if `value` is a finite primitive number.\n     *\n     * **Note:** This method is based on [`Number.isFinite`](http://ecma-international.org/ecma-262/6.0/#sec-number.isfinite).\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a finite number, else `false`.\n     * @example\n     *\n     * _.isFinite(10);\n     * // => true\n     *\n     * _.isFinite('10');\n     * // => false\n     *\n     * _.isFinite(true);\n     * // => false\n     *\n     * _.isFinite(Object(10));\n     * // => false\n     *\n     * _.isFinite(Infinity);\n     * // => false\n     */\n    function isFinite(value) {\n      return typeof value == 'number' && nativeIsFinite(value);\n    }\n\n    /**\n     * Checks if `value` is classified as a `Function` object.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n     * @example\n     *\n     * _.isFunction(_);\n     * // => true\n     *\n     * _.isFunction(/abc/);\n     * // => false\n     */\n    function isFunction(value) {\n      // The use of `Object#toString` avoids issues with the `typeof` operator\n      // in older versions of Chrome and Safari which return 'function' for regexes\n      // and Safari 8 equivalents which return 'object' for typed array constructors.\n      return isObject(value) && objToString.call(value) == funcTag;\n    }\n\n    /**\n     * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.\n     * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n     * @example\n     *\n     * _.isObject({});\n     * // => true\n     *\n     * _.isObject([1, 2, 3]);\n     * // => true\n     *\n     * _.isObject(1);\n     * // => false\n     */\n    function isObject(value) {\n      // Avoid a V8 JIT bug in Chrome 19-20.\n      // See https://code.google.com/p/v8/issues/detail?id=2291 for more details.\n      var type = typeof value;\n      return !!value && (type == 'object' || type == 'function');\n    }\n\n    /**\n     * Performs a deep comparison between `object` and `source` to determine if\n     * `object` contains equivalent property values. If `customizer` is provided\n     * it is invoked to compare values. If `customizer` returns `undefined`\n     * comparisons are handled by the method instead. The `customizer` is bound\n     * to `thisArg` and invoked with three arguments: (value, other, index|key).\n     *\n     * **Note:** This method supports comparing properties of arrays, booleans,\n     * `Date` objects, numbers, `Object` objects, regexes, and strings. Functions\n     * and DOM nodes are **not** supported. Provide a customizer function to extend\n     * support for comparing other values.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property values to match.\n     * @param {Function} [customizer] The function to customize value comparisons.\n     * @param {*} [thisArg] The `this` binding of `customizer`.\n     * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n     * @example\n     *\n     * var object = { 'user': 'fred', 'age': 40 };\n     *\n     * _.isMatch(object, { 'age': 40 });\n     * // => true\n     *\n     * _.isMatch(object, { 'age': 36 });\n     * // => false\n     *\n     * // using a customizer callback\n     * var object = { 'greeting': 'hello' };\n     * var source = { 'greeting': 'hi' };\n     *\n     * _.isMatch(object, source, function(value, other) {\n     *   return _.every([value, other], RegExp.prototype.test, /^h(?:i|ello)$/) || undefined;\n     * });\n     * // => true\n     */\n    function isMatch(object, source, customizer, thisArg) {\n      customizer = typeof customizer == 'function' ? bindCallback(customizer, thisArg, 3) : undefined;\n      return baseIsMatch(object, getMatchData(source), customizer);\n    }\n\n    /**\n     * Checks if `value` is `NaN`.\n     *\n     * **Note:** This method is not the same as [`isNaN`](https://es5.github.io/#x15.1.2.4)\n     * which returns `true` for `undefined` and other non-numeric values.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n     * @example\n     *\n     * _.isNaN(NaN);\n     * // => true\n     *\n     * _.isNaN(new Number(NaN));\n     * // => true\n     *\n     * isNaN(undefined);\n     * // => true\n     *\n     * _.isNaN(undefined);\n     * // => false\n     */\n    function isNaN(value) {\n      // An `NaN` primitive is the only value that is not equal to itself.\n      // Perform the `toStringTag` check first to avoid errors with some host objects in IE.\n      return isNumber(value) && value != +value;\n    }\n\n    /**\n     * Checks if `value` is a native function.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a native function, else `false`.\n     * @example\n     *\n     * _.isNative(Array.prototype.push);\n     * // => true\n     *\n     * _.isNative(_);\n     * // => false\n     */\n    function isNative(value) {\n      if (value == null) {\n        return false;\n      }\n      if (isFunction(value)) {\n        return reIsNative.test(fnToString.call(value));\n      }\n      return isObjectLike(value) && reIsHostCtor.test(value);\n    }\n\n    /**\n     * Checks if `value` is `null`.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is `null`, else `false`.\n     * @example\n     *\n     * _.isNull(null);\n     * // => true\n     *\n     * _.isNull(void 0);\n     * // => false\n     */\n    function isNull(value) {\n      return value === null;\n    }\n\n    /**\n     * Checks if `value` is classified as a `Number` primitive or object.\n     *\n     * **Note:** To exclude `Infinity`, `-Infinity`, and `NaN`, which are classified\n     * as numbers, use the `_.isFinite` method.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n     * @example\n     *\n     * _.isNumber(8.4);\n     * // => true\n     *\n     * _.isNumber(NaN);\n     * // => true\n     *\n     * _.isNumber('8.4');\n     * // => false\n     */\n    function isNumber(value) {\n      return typeof value == 'number' || (isObjectLike(value) && objToString.call(value) == numberTag);\n    }\n\n    /**\n     * Checks if `value` is a plain object, that is, an object created by the\n     * `Object` constructor or one with a `[[Prototype]]` of `null`.\n     *\n     * **Note:** This method assumes objects created by the `Object` constructor\n     * have no inherited enumerable properties.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     * }\n     *\n     * _.isPlainObject(new Foo);\n     * // => false\n     *\n     * _.isPlainObject([1, 2, 3]);\n     * // => false\n     *\n     * _.isPlainObject({ 'x': 0, 'y': 0 });\n     * // => true\n     *\n     * _.isPlainObject(Object.create(null));\n     * // => true\n     */\n    function isPlainObject(value) {\n      var Ctor;\n\n      // Exit early for non `Object` objects.\n      if (!(isObjectLike(value) && objToString.call(value) == objectTag && !isArguments(value)) ||\n          (!hasOwnProperty.call(value, 'constructor') && (Ctor = value.constructor, typeof Ctor == 'function' && !(Ctor instanceof Ctor)))) {\n        return false;\n      }\n      // IE < 9 iterates inherited properties before own properties. If the first\n      // iterated property is an object's own property then there are no inherited\n      // enumerable properties.\n      var result;\n      // In most environments an object's own properties are iterated before\n      // its inherited properties. If the last iterated property is an object's\n      // own property then there are no inherited enumerable properties.\n      baseForIn(value, function(subValue, key) {\n        result = key;\n      });\n      return result === undefined || hasOwnProperty.call(value, result);\n    }\n\n    /**\n     * Checks if `value` is classified as a `RegExp` object.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n     * @example\n     *\n     * _.isRegExp(/abc/);\n     * // => true\n     *\n     * _.isRegExp('/abc/');\n     * // => false\n     */\n    function isRegExp(value) {\n      return isObject(value) && objToString.call(value) == regexpTag;\n    }\n\n    /**\n     * Checks if `value` is classified as a `String` primitive or object.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n     * @example\n     *\n     * _.isString('abc');\n     * // => true\n     *\n     * _.isString(1);\n     * // => false\n     */\n    function isString(value) {\n      return typeof value == 'string' || (isObjectLike(value) && objToString.call(value) == stringTag);\n    }\n\n    /**\n     * Checks if `value` is classified as a typed array.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n     * @example\n     *\n     * _.isTypedArray(new Uint8Array);\n     * // => true\n     *\n     * _.isTypedArray([]);\n     * // => false\n     */\n    function isTypedArray(value) {\n      return isObjectLike(value) && isLength(value.length) && !!typedArrayTags[objToString.call(value)];\n    }\n\n    /**\n     * Checks if `value` is `undefined`.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is `undefined`, else `false`.\n     * @example\n     *\n     * _.isUndefined(void 0);\n     * // => true\n     *\n     * _.isUndefined(null);\n     * // => false\n     */\n    function isUndefined(value) {\n      return value === undefined;\n    }\n\n    /**\n     * Checks if `value` is less than `other`.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is less than `other`, else `false`.\n     * @example\n     *\n     * _.lt(1, 3);\n     * // => true\n     *\n     * _.lt(3, 3);\n     * // => false\n     *\n     * _.lt(3, 1);\n     * // => false\n     */\n    function lt(value, other) {\n      return value < other;\n    }\n\n    /**\n     * Checks if `value` is less than or equal to `other`.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is less than or equal to `other`, else `false`.\n     * @example\n     *\n     * _.lte(1, 3);\n     * // => true\n     *\n     * _.lte(3, 3);\n     * // => true\n     *\n     * _.lte(3, 1);\n     * // => false\n     */\n    function lte(value, other) {\n      return value <= other;\n    }\n\n    /**\n     * Converts `value` to an array.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {Array} Returns the converted array.\n     * @example\n     *\n     * (function() {\n     *   return _.toArray(arguments).slice(1);\n     * }(1, 2, 3));\n     * // => [2, 3]\n     */\n    function toArray(value) {\n      var length = value ? getLength(value) : 0;\n      if (!isLength(length)) {\n        return values(value);\n      }\n      if (!length) {\n        return [];\n      }\n      return arrayCopy(value);\n    }\n\n    /**\n     * Converts `value` to a plain object flattening inherited enumerable\n     * properties of `value` to own properties of the plain object.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {Object} Returns the converted plain object.\n     * @example\n     *\n     * function Foo() {\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.assign({ 'a': 1 }, new Foo);\n     * // => { 'a': 1, 'b': 2 }\n     *\n     * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n     * // => { 'a': 1, 'b': 2, 'c': 3 }\n     */\n    function toPlainObject(value) {\n      return baseCopy(value, keysIn(value));\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Recursively merges own enumerable properties of the source object(s), that\n     * don't resolve to `undefined` into the destination object. Subsequent sources\n     * overwrite property assignments of previous sources. If `customizer` is\n     * provided it is invoked to produce the merged values of the destination and\n     * source properties. If `customizer` returns `undefined` merging is handled\n     * by the method instead. The `customizer` is bound to `thisArg` and invoked\n     * with five arguments: (objectValue, sourceValue, key, object, source).\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @param {*} [thisArg] The `this` binding of `customizer`.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var users = {\n     *   'data': [{ 'user': 'barney' }, { 'user': 'fred' }]\n     * };\n     *\n     * var ages = {\n     *   'data': [{ 'age': 36 }, { 'age': 40 }]\n     * };\n     *\n     * _.merge(users, ages);\n     * // => { 'data': [{ 'user': 'barney', 'age': 36 }, { 'user': 'fred', 'age': 40 }] }\n     *\n     * // using a customizer callback\n     * var object = {\n     *   'fruits': ['apple'],\n     *   'vegetables': ['beet']\n     * };\n     *\n     * var other = {\n     *   'fruits': ['banana'],\n     *   'vegetables': ['carrot']\n     * };\n     *\n     * _.merge(object, other, function(a, b) {\n     *   if (_.isArray(a)) {\n     *     return a.concat(b);\n     *   }\n     * });\n     * // => { 'fruits': ['apple', 'banana'], 'vegetables': ['beet', 'carrot'] }\n     */\n    var merge = createAssigner(baseMerge);\n\n    /**\n     * Assigns own enumerable properties of source object(s) to the destination\n     * object. Subsequent sources overwrite property assignments of previous sources.\n     * If `customizer` is provided it is invoked to produce the assigned values.\n     * The `customizer` is bound to `thisArg` and invoked with five arguments:\n     * (objectValue, sourceValue, key, object, source).\n     *\n     * **Note:** This method mutates `object` and is based on\n     * [`Object.assign`](http://ecma-international.org/ecma-262/6.0/#sec-object.assign).\n     *\n     * @static\n     * @memberOf _\n     * @alias extend\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @param {*} [thisArg] The `this` binding of `customizer`.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * _.assign({ 'user': 'barney' }, { 'age': 40 }, { 'user': 'fred' });\n     * // => { 'user': 'fred', 'age': 40 }\n     *\n     * // using a customizer callback\n     * var defaults = _.partialRight(_.assign, function(value, other) {\n     *   return _.isUndefined(value) ? other : value;\n     * });\n     *\n     * defaults({ 'user': 'barney' }, { 'age': 36 }, { 'user': 'fred' });\n     * // => { 'user': 'barney', 'age': 36 }\n     */\n    var assign = createAssigner(function(object, source, customizer) {\n      return customizer\n        ? assignWith(object, source, customizer)\n        : baseAssign(object, source);\n    });\n\n    /**\n     * Creates an object that inherits from the given `prototype` object. If a\n     * `properties` object is provided its own enumerable properties are assigned\n     * to the created object.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} prototype The object to inherit from.\n     * @param {Object} [properties] The properties to assign to the object.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * function Shape() {\n     *   this.x = 0;\n     *   this.y = 0;\n     * }\n     *\n     * function Circle() {\n     *   Shape.call(this);\n     * }\n     *\n     * Circle.prototype = _.create(Shape.prototype, {\n     *   'constructor': Circle\n     * });\n     *\n     * var circle = new Circle;\n     * circle instanceof Circle;\n     * // => true\n     *\n     * circle instanceof Shape;\n     * // => true\n     */\n    function create(prototype, properties, guard) {\n      var result = baseCreate(prototype);\n      if (guard && isIterateeCall(prototype, properties, guard)) {\n        properties = undefined;\n      }\n      return properties ? baseAssign(result, properties) : result;\n    }\n\n    /**\n     * Assigns own enumerable properties of source object(s) to the destination\n     * object for all destination properties that resolve to `undefined`. Once a\n     * property is set, additional values of the same property are ignored.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * _.defaults({ 'user': 'barney' }, { 'age': 36 }, { 'user': 'fred' });\n     * // => { 'user': 'barney', 'age': 36 }\n     */\n    var defaults = createDefaults(assign, assignDefaults);\n\n    /**\n     * This method is like `_.defaults` except that it recursively assigns\n     * default properties.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * _.defaultsDeep({ 'user': { 'name': 'barney' } }, { 'user': { 'name': 'fred', 'age': 36 } });\n     * // => { 'user': { 'name': 'barney', 'age': 36 } }\n     *\n     */\n    var defaultsDeep = createDefaults(merge, mergeDefaults);\n\n    /**\n     * This method is like `_.find` except that it returns the key of the first\n     * element `predicate` returns truthy for instead of the element itself.\n     *\n     * If a property name is provided for `predicate` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `predicate` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to search.\n     * @param {Function|Object|string} [predicate=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `predicate`.\n     * @returns {string|undefined} Returns the key of the matched element, else `undefined`.\n     * @example\n     *\n     * var users = {\n     *   'barney':  { 'age': 36, 'active': true },\n     *   'fred':    { 'age': 40, 'active': false },\n     *   'pebbles': { 'age': 1,  'active': true }\n     * };\n     *\n     * _.findKey(users, function(chr) {\n     *   return chr.age < 40;\n     * });\n     * // => 'barney' (iteration order is not guaranteed)\n     *\n     * // using the `_.matches` callback shorthand\n     * _.findKey(users, { 'age': 1, 'active': true });\n     * // => 'pebbles'\n     *\n     * // using the `_.matchesProperty` callback shorthand\n     * _.findKey(users, 'active', false);\n     * // => 'fred'\n     *\n     * // using the `_.property` callback shorthand\n     * _.findKey(users, 'active');\n     * // => 'barney'\n     */\n    var findKey = createFindKey(baseForOwn);\n\n    /**\n     * This method is like `_.findKey` except that it iterates over elements of\n     * a collection in the opposite order.\n     *\n     * If a property name is provided for `predicate` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `predicate` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to search.\n     * @param {Function|Object|string} [predicate=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `predicate`.\n     * @returns {string|undefined} Returns the key of the matched element, else `undefined`.\n     * @example\n     *\n     * var users = {\n     *   'barney':  { 'age': 36, 'active': true },\n     *   'fred':    { 'age': 40, 'active': false },\n     *   'pebbles': { 'age': 1,  'active': true }\n     * };\n     *\n     * _.findLastKey(users, function(chr) {\n     *   return chr.age < 40;\n     * });\n     * // => returns `pebbles` assuming `_.findKey` returns `barney`\n     *\n     * // using the `_.matches` callback shorthand\n     * _.findLastKey(users, { 'age': 36, 'active': true });\n     * // => 'barney'\n     *\n     * // using the `_.matchesProperty` callback shorthand\n     * _.findLastKey(users, 'active', false);\n     * // => 'fred'\n     *\n     * // using the `_.property` callback shorthand\n     * _.findLastKey(users, 'active');\n     * // => 'pebbles'\n     */\n    var findLastKey = createFindKey(baseForOwnRight);\n\n    /**\n     * Iterates over own and inherited enumerable properties of an object invoking\n     * `iteratee` for each property. The `iteratee` is bound to `thisArg` and invoked\n     * with three arguments: (value, key, object). Iteratee functions may exit\n     * iteration early by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forIn(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => logs 'a', 'b', and 'c' (iteration order is not guaranteed)\n     */\n    var forIn = createForIn(baseFor);\n\n    /**\n     * This method is like `_.forIn` except that it iterates over properties of\n     * `object` in the opposite order.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forInRight(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => logs 'c', 'b', and 'a' assuming `_.forIn ` logs 'a', 'b', and 'c'\n     */\n    var forInRight = createForIn(baseForRight);\n\n    /**\n     * Iterates over own enumerable properties of an object invoking `iteratee`\n     * for each property. The `iteratee` is bound to `thisArg` and invoked with\n     * three arguments: (value, key, object). Iteratee functions may exit iteration\n     * early by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forOwn(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => logs 'a' and 'b' (iteration order is not guaranteed)\n     */\n    var forOwn = createForOwn(baseForOwn);\n\n    /**\n     * This method is like `_.forOwn` except that it iterates over properties of\n     * `object` in the opposite order.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forOwnRight(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => logs 'b' and 'a' assuming `_.forOwn` logs 'a' and 'b'\n     */\n    var forOwnRight = createForOwn(baseForOwnRight);\n\n    /**\n     * Creates an array of function property names from all enumerable properties,\n     * own and inherited, of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @alias methods\n     * @category Object\n     * @param {Object} object The object to inspect.\n     * @returns {Array} Returns the new array of property names.\n     * @example\n     *\n     * _.functions(_);\n     * // => ['after', 'ary', 'assign', ...]\n     */\n    function functions(object) {\n      return baseFunctions(object, keysIn(object));\n    }\n\n    /**\n     * Gets the property value at `path` of `object`. If the resolved value is\n     * `undefined` the `defaultValue` is used in its place.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the property to get.\n     * @param {*} [defaultValue] The value returned if the resolved value is `undefined`.\n     * @returns {*} Returns the resolved value.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n     *\n     * _.get(object, 'a[0].b.c');\n     * // => 3\n     *\n     * _.get(object, ['a', '0', 'b', 'c']);\n     * // => 3\n     *\n     * _.get(object, 'a.b.c', 'default');\n     * // => 'default'\n     */\n    function get(object, path, defaultValue) {\n      var result = object == null ? undefined : baseGet(object, toPath(path), path + '');\n      return result === undefined ? defaultValue : result;\n    }\n\n    /**\n     * Checks if `path` is a direct property.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path to check.\n     * @returns {boolean} Returns `true` if `path` is a direct property, else `false`.\n     * @example\n     *\n     * var object = { 'a': { 'b': { 'c': 3 } } };\n     *\n     * _.has(object, 'a');\n     * // => true\n     *\n     * _.has(object, 'a.b.c');\n     * // => true\n     *\n     * _.has(object, ['a', 'b', 'c']);\n     * // => true\n     */\n    function has(object, path) {\n      if (object == null) {\n        return false;\n      }\n      var result = hasOwnProperty.call(object, path);\n      if (!result && !isKey(path)) {\n        path = toPath(path);\n        object = path.length == 1 ? object : baseGet(object, baseSlice(path, 0, -1));\n        if (object == null) {\n          return false;\n        }\n        path = last(path);\n        result = hasOwnProperty.call(object, path);\n      }\n      return result || (isLength(object.length) && isIndex(path, object.length) &&\n        (isArray(object) || isArguments(object)));\n    }\n\n    /**\n     * Creates an object composed of the inverted keys and values of `object`.\n     * If `object` contains duplicate values, subsequent values overwrite property\n     * assignments of previous values unless `multiValue` is `true`.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to invert.\n     * @param {boolean} [multiValue] Allow multiple values per key.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.\n     * @returns {Object} Returns the new inverted object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2, 'c': 1 };\n     *\n     * _.invert(object);\n     * // => { '1': 'c', '2': 'b' }\n     *\n     * // with `multiValue`\n     * _.invert(object, true);\n     * // => { '1': ['a', 'c'], '2': ['b'] }\n     */\n    function invert(object, multiValue, guard) {\n      if (guard && isIterateeCall(object, multiValue, guard)) {\n        multiValue = undefined;\n      }\n      var index = -1,\n          props = keys(object),\n          length = props.length,\n          result = {};\n\n      while (++index < length) {\n        var key = props[index],\n            value = object[key];\n\n        if (multiValue) {\n          if (hasOwnProperty.call(result, value)) {\n            result[value].push(key);\n          } else {\n            result[value] = [key];\n          }\n        }\n        else {\n          result[value] = key;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Creates an array of the own enumerable property names of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects. See the\n     * [ES spec](http://ecma-international.org/ecma-262/6.0/#sec-object.keys)\n     * for more details.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.keys(new Foo);\n     * // => ['a', 'b'] (iteration order is not guaranteed)\n     *\n     * _.keys('hi');\n     * // => ['0', '1']\n     */\n    var keys = !nativeKeys ? shimKeys : function(object) {\n      var Ctor = object == null ? undefined : object.constructor;\n      if ((typeof Ctor == 'function' && Ctor.prototype === object) ||\n          (typeof object != 'function' && isArrayLike(object))) {\n        return shimKeys(object);\n      }\n      return isObject(object) ? nativeKeys(object) : [];\n    };\n\n    /**\n     * Creates an array of the own and inherited enumerable property names of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.keysIn(new Foo);\n     * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n     */\n    function keysIn(object) {\n      if (object == null) {\n        return [];\n      }\n      if (!isObject(object)) {\n        object = Object(object);\n      }\n      var length = object.length;\n      length = (length && isLength(length) &&\n        (isArray(object) || isArguments(object)) && length) || 0;\n\n      var Ctor = object.constructor,\n          index = -1,\n          isProto = typeof Ctor == 'function' && Ctor.prototype === object,\n          result = Array(length),\n          skipIndexes = length > 0;\n\n      while (++index < length) {\n        result[index] = (index + '');\n      }\n      for (var key in object) {\n        if (!(skipIndexes && isIndex(key, length)) &&\n            !(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The opposite of `_.mapValues`; this method creates an object with the\n     * same values as `object` and keys generated by running each own enumerable\n     * property of `object` through `iteratee`.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function|Object|string} [iteratee=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {Object} Returns the new mapped object.\n     * @example\n     *\n     * _.mapKeys({ 'a': 1, 'b': 2 }, function(value, key) {\n     *   return key + value;\n     * });\n     * // => { 'a1': 1, 'b2': 2 }\n     */\n    var mapKeys = createObjectMapper(true);\n\n    /**\n     * Creates an object with the same keys as `object` and values generated by\n     * running each own enumerable property of `object` through `iteratee`. The\n     * iteratee function is bound to `thisArg` and invoked with three arguments:\n     * (value, key, object).\n     *\n     * If a property name is provided for `iteratee` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `iteratee` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function|Object|string} [iteratee=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {Object} Returns the new mapped object.\n     * @example\n     *\n     * _.mapValues({ 'a': 1, 'b': 2 }, function(n) {\n     *   return n * 3;\n     * });\n     * // => { 'a': 3, 'b': 6 }\n     *\n     * var users = {\n     *   'fred':    { 'user': 'fred',    'age': 40 },\n     *   'pebbles': { 'user': 'pebbles', 'age': 1 }\n     * };\n     *\n     * // using the `_.property` callback shorthand\n     * _.mapValues(users, 'age');\n     * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n     */\n    var mapValues = createObjectMapper();\n\n    /**\n     * The opposite of `_.pick`; this method creates an object composed of the\n     * own and inherited enumerable properties of `object` that are not omitted.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {Function|...(string|string[])} [predicate] The function invoked per\n     *  iteration or property names to omit, specified as individual property\n     *  names or arrays of property names.\n     * @param {*} [thisArg] The `this` binding of `predicate`.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'user': 'fred', 'age': 40 };\n     *\n     * _.omit(object, 'age');\n     * // => { 'user': 'fred' }\n     *\n     * _.omit(object, _.isNumber);\n     * // => { 'user': 'fred' }\n     */\n    var omit = restParam(function(object, props) {\n      if (object == null) {\n        return {};\n      }\n      if (typeof props[0] != 'function') {\n        var props = arrayMap(baseFlatten(props), String);\n        return pickByArray(object, baseDifference(keysIn(object), props));\n      }\n      var predicate = bindCallback(props[0], props[1], 3);\n      return pickByCallback(object, function(value, key, object) {\n        return !predicate(value, key, object);\n      });\n    });\n\n    /**\n     * Creates a two dimensional array of the key-value pairs for `object`,\n     * e.g. `[[key1, value1], [key2, value2]]`.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the new array of key-value pairs.\n     * @example\n     *\n     * _.pairs({ 'barney': 36, 'fred': 40 });\n     * // => [['barney', 36], ['fred', 40]] (iteration order is not guaranteed)\n     */\n    function pairs(object) {\n      object = toObject(object);\n\n      var index = -1,\n          props = keys(object),\n          length = props.length,\n          result = Array(length);\n\n      while (++index < length) {\n        var key = props[index];\n        result[index] = [key, object[key]];\n      }\n      return result;\n    }\n\n    /**\n     * Creates an object composed of the picked `object` properties. Property\n     * names may be specified as individual arguments or as arrays of property\n     * names. If `predicate` is provided it is invoked for each property of `object`\n     * picking the properties `predicate` returns truthy for. The predicate is\n     * bound to `thisArg` and invoked with three arguments: (value, key, object).\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {Function|...(string|string[])} [predicate] The function invoked per\n     *  iteration or property names to pick, specified as individual property\n     *  names or arrays of property names.\n     * @param {*} [thisArg] The `this` binding of `predicate`.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'user': 'fred', 'age': 40 };\n     *\n     * _.pick(object, 'user');\n     * // => { 'user': 'fred' }\n     *\n     * _.pick(object, _.isString);\n     * // => { 'user': 'fred' }\n     */\n    var pick = restParam(function(object, props) {\n      if (object == null) {\n        return {};\n      }\n      return typeof props[0] == 'function'\n        ? pickByCallback(object, bindCallback(props[0], props[1], 3))\n        : pickByArray(object, baseFlatten(props));\n    });\n\n    /**\n     * This method is like `_.get` except that if the resolved value is a function\n     * it is invoked with the `this` binding of its parent object and its result\n     * is returned.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the property to resolve.\n     * @param {*} [defaultValue] The value returned if the resolved value is `undefined`.\n     * @returns {*} Returns the resolved value.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c1': 3, 'c2': _.constant(4) } }] };\n     *\n     * _.result(object, 'a[0].b.c1');\n     * // => 3\n     *\n     * _.result(object, 'a[0].b.c2');\n     * // => 4\n     *\n     * _.result(object, 'a.b.c', 'default');\n     * // => 'default'\n     *\n     * _.result(object, 'a.b.c', _.constant('default'));\n     * // => 'default'\n     */\n    function result(object, path, defaultValue) {\n      var result = object == null ? undefined : object[path];\n      if (result === undefined) {\n        if (object != null && !isKey(path, object)) {\n          path = toPath(path);\n          object = path.length == 1 ? object : baseGet(object, baseSlice(path, 0, -1));\n          result = object == null ? undefined : object[last(path)];\n        }\n        result = result === undefined ? defaultValue : result;\n      }\n      return isFunction(result) ? result.call(object) : result;\n    }\n\n    /**\n     * Sets the property value of `path` on `object`. If a portion of `path`\n     * does not exist it is created.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to augment.\n     * @param {Array|string} path The path of the property to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n     *\n     * _.set(object, 'a[0].b.c', 4);\n     * console.log(object.a[0].b.c);\n     * // => 4\n     *\n     * _.set(object, 'x[0].y.z', 5);\n     * console.log(object.x[0].y.z);\n     * // => 5\n     */\n    function set(object, path, value) {\n      if (object == null) {\n        return object;\n      }\n      var pathKey = (path + '');\n      path = (object[pathKey] != null || isKey(path, object)) ? [pathKey] : toPath(path);\n\n      var index = -1,\n          length = path.length,\n          lastIndex = length - 1,\n          nested = object;\n\n      while (nested != null && ++index < length) {\n        var key = path[index];\n        if (isObject(nested)) {\n          if (index == lastIndex) {\n            nested[key] = value;\n          } else if (nested[key] == null) {\n            nested[key] = isIndex(path[index + 1]) ? [] : {};\n          }\n        }\n        nested = nested[key];\n      }\n      return object;\n    }\n\n    /**\n     * An alternative to `_.reduce`; this method transforms `object` to a new\n     * `accumulator` object which is the result of running each of its own enumerable\n     * properties through `iteratee`, with each invocation potentially mutating\n     * the `accumulator` object. The `iteratee` is bound to `thisArg` and invoked\n     * with four arguments: (accumulator, value, key, object). Iteratee functions\n     * may exit iteration early by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Array|Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [accumulator] The custom accumulator value.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {*} Returns the accumulated value.\n     * @example\n     *\n     * _.transform([2, 3, 4], function(result, n) {\n     *   result.push(n *= n);\n     *   return n % 2 == 0;\n     * });\n     * // => [4, 9]\n     *\n     * _.transform({ 'a': 1, 'b': 2 }, function(result, n, key) {\n     *   result[key] = n * 3;\n     * });\n     * // => { 'a': 3, 'b': 6 }\n     */\n    function transform(object, iteratee, accumulator, thisArg) {\n      var isArr = isArray(object) || isTypedArray(object);\n      iteratee = getCallback(iteratee, thisArg, 4);\n\n      if (accumulator == null) {\n        if (isArr || isObject(object)) {\n          var Ctor = object.constructor;\n          if (isArr) {\n            accumulator = isArray(object) ? new Ctor : [];\n          } else {\n            accumulator = baseCreate(isFunction(Ctor) ? Ctor.prototype : undefined);\n          }\n        } else {\n          accumulator = {};\n        }\n      }\n      (isArr ? arrayEach : baseForOwn)(object, function(value, index, object) {\n        return iteratee(accumulator, value, index, object);\n      });\n      return accumulator;\n    }\n\n    /**\n     * Creates an array of the own enumerable property values of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property values.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.values(new Foo);\n     * // => [1, 2] (iteration order is not guaranteed)\n     *\n     * _.values('hi');\n     * // => ['h', 'i']\n     */\n    function values(object) {\n      return baseValues(object, keys(object));\n    }\n\n    /**\n     * Creates an array of the own and inherited enumerable property values\n     * of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property values.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.valuesIn(new Foo);\n     * // => [1, 2, 3] (iteration order is not guaranteed)\n     */\n    function valuesIn(object) {\n      return baseValues(object, keysIn(object));\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Checks if `n` is between `start` and up to but not including, `end`. If\n     * `end` is not specified it is set to `start` with `start` then set to `0`.\n     *\n     * @static\n     * @memberOf _\n     * @category Number\n     * @param {number} n The number to check.\n     * @param {number} [start=0] The start of the range.\n     * @param {number} end The end of the range.\n     * @returns {boolean} Returns `true` if `n` is in the range, else `false`.\n     * @example\n     *\n     * _.inRange(3, 2, 4);\n     * // => true\n     *\n     * _.inRange(4, 8);\n     * // => true\n     *\n     * _.inRange(4, 2);\n     * // => false\n     *\n     * _.inRange(2, 2);\n     * // => false\n     *\n     * _.inRange(1.2, 2);\n     * // => true\n     *\n     * _.inRange(5.2, 4);\n     * // => false\n     */\n    function inRange(value, start, end) {\n      start = +start || 0;\n      if (end === undefined) {\n        end = start;\n        start = 0;\n      } else {\n        end = +end || 0;\n      }\n      return value >= nativeMin(start, end) && value < nativeMax(start, end);\n    }\n\n    /**\n     * Produces a random number between `min` and `max` (inclusive). If only one\n     * argument is provided a number between `0` and the given number is returned.\n     * If `floating` is `true`, or either `min` or `max` are floats, a floating-point\n     * number is returned instead of an integer.\n     *\n     * @static\n     * @memberOf _\n     * @category Number\n     * @param {number} [min=0] The minimum possible value.\n     * @param {number} [max=1] The maximum possible value.\n     * @param {boolean} [floating] Specify returning a floating-point number.\n     * @returns {number} Returns the random number.\n     * @example\n     *\n     * _.random(0, 5);\n     * // => an integer between 0 and 5\n     *\n     * _.random(5);\n     * // => also an integer between 0 and 5\n     *\n     * _.random(5, true);\n     * // => a floating-point number between 0 and 5\n     *\n     * _.random(1.2, 5.2);\n     * // => a floating-point number between 1.2 and 5.2\n     */\n    function random(min, max, floating) {\n      if (floating && isIterateeCall(min, max, floating)) {\n        max = floating = undefined;\n      }\n      var noMin = min == null,\n          noMax = max == null;\n\n      if (floating == null) {\n        if (noMax && typeof min == 'boolean') {\n          floating = min;\n          min = 1;\n        }\n        else if (typeof max == 'boolean') {\n          floating = max;\n          noMax = true;\n        }\n      }\n      if (noMin && noMax) {\n        max = 1;\n        noMax = false;\n      }\n      min = +min || 0;\n      if (noMax) {\n        max = min;\n        min = 0;\n      } else {\n        max = +max || 0;\n      }\n      if (floating || min % 1 || max % 1) {\n        var rand = nativeRandom();\n        return nativeMin(min + (rand * (max - min + parseFloat('1e-' + ((rand + '').length - 1)))), max);\n      }\n      return baseRandom(min, max);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Converts `string` to [camel case](https://en.wikipedia.org/wiki/CamelCase).\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the camel cased string.\n     * @example\n     *\n     * _.camelCase('Foo Bar');\n     * // => 'fooBar'\n     *\n     * _.camelCase('--foo-bar');\n     * // => 'fooBar'\n     *\n     * _.camelCase('__foo_bar__');\n     * // => 'fooBar'\n     */\n    var camelCase = createCompounder(function(result, word, index) {\n      word = word.toLowerCase();\n      return result + (index ? (word.charAt(0).toUpperCase() + word.slice(1)) : word);\n    });\n\n    /**\n     * Capitalizes the first character of `string`.\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to capitalize.\n     * @returns {string} Returns the capitalized string.\n     * @example\n     *\n     * _.capitalize('fred');\n     * // => 'Fred'\n     */\n    function capitalize(string) {\n      string = baseToString(string);\n      return string && (string.charAt(0).toUpperCase() + string.slice(1));\n    }\n\n    /**\n     * Deburrs `string` by converting [latin-1 supplementary letters](https://en.wikipedia.org/wiki/Latin-1_Supplement_(Unicode_block)#Character_table)\n     * to basic latin letters and removing [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks).\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to deburr.\n     * @returns {string} Returns the deburred string.\n     * @example\n     *\n     * _.deburr('déjà vu');\n     * // => 'deja vu'\n     */\n    function deburr(string) {\n      string = baseToString(string);\n      return string && string.replace(reLatin1, deburrLetter).replace(reComboMark, '');\n    }\n\n    /**\n     * Checks if `string` ends with the given target string.\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to search.\n     * @param {string} [target] The string to search for.\n     * @param {number} [position=string.length] The position to search from.\n     * @returns {boolean} Returns `true` if `string` ends with `target`, else `false`.\n     * @example\n     *\n     * _.endsWith('abc', 'c');\n     * // => true\n     *\n     * _.endsWith('abc', 'b');\n     * // => false\n     *\n     * _.endsWith('abc', 'b', 2);\n     * // => true\n     */\n    function endsWith(string, target, position) {\n      string = baseToString(string);\n      target = (target + '');\n\n      var length = string.length;\n      position = position === undefined\n        ? length\n        : nativeMin(position < 0 ? 0 : (+position || 0), length);\n\n      position -= target.length;\n      return position >= 0 && string.indexOf(target, position) == position;\n    }\n\n    /**\n     * Converts the characters \"&\", \"<\", \">\", '\"', \"'\", and \"\\`\", in `string` to\n     * their corresponding HTML entities.\n     *\n     * **Note:** No other characters are escaped. To escape additional characters\n     * use a third-party library like [_he_](https://mths.be/he).\n     *\n     * Though the \">\" character is escaped for symmetry, characters like\n     * \">\" and \"/\" don't need escaping in HTML and have no special meaning\n     * unless they're part of a tag or unquoted attribute value.\n     * See [Mathias Bynens's article](https://mathiasbynens.be/notes/ambiguous-ampersands)\n     * (under \"semi-related fun fact\") for more details.\n     *\n     * Backticks are escaped because in Internet Explorer < 9, they can break out\n     * of attribute values or HTML comments. See [#59](https://html5sec.org/#59),\n     * [#102](https://html5sec.org/#102), [#108](https://html5sec.org/#108), and\n     * [#133](https://html5sec.org/#133) of the [HTML5 Security Cheatsheet](https://html5sec.org/)\n     * for more details.\n     *\n     * When working with HTML you should always [quote attribute values](http://wonko.com/post/html-escaping)\n     * to reduce XSS vectors.\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to escape.\n     * @returns {string} Returns the escaped string.\n     * @example\n     *\n     * _.escape('fred, barney, & pebbles');\n     * // => 'fred, barney, &amp; pebbles'\n     */\n    function escape(string) {\n      // Reset `lastIndex` because in IE < 9 `String#replace` does not.\n      string = baseToString(string);\n      return (string && reHasUnescapedHtml.test(string))\n        ? string.replace(reUnescapedHtml, escapeHtmlChar)\n        : string;\n    }\n\n    /**\n     * Escapes the `RegExp` special characters \"\\\", \"/\", \"^\", \"$\", \".\", \"|\", \"?\",\n     * \"*\", \"+\", \"(\", \")\", \"[\", \"]\", \"{\" and \"}\" in `string`.\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to escape.\n     * @returns {string} Returns the escaped string.\n     * @example\n     *\n     * _.escapeRegExp('[lodash](https://lodash.com/)');\n     * // => '\\[lodash\\]\\(https:\\/\\/lodash\\.com\\/\\)'\n     */\n    function escapeRegExp(string) {\n      string = baseToString(string);\n      return (string && reHasRegExpChars.test(string))\n        ? string.replace(reRegExpChars, escapeRegExpChar)\n        : (string || '(?:)');\n    }\n\n    /**\n     * Converts `string` to [kebab case](https://en.wikipedia.org/wiki/Letter_case#Special_case_styles).\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the kebab cased string.\n     * @example\n     *\n     * _.kebabCase('Foo Bar');\n     * // => 'foo-bar'\n     *\n     * _.kebabCase('fooBar');\n     * // => 'foo-bar'\n     *\n     * _.kebabCase('__foo_bar__');\n     * // => 'foo-bar'\n     */\n    var kebabCase = createCompounder(function(result, word, index) {\n      return result + (index ? '-' : '') + word.toLowerCase();\n    });\n\n    /**\n     * Pads `string` on the left and right sides if it's shorter than `length`.\n     * Padding characters are truncated if they can't be evenly divided by `length`.\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to pad.\n     * @param {number} [length=0] The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padded string.\n     * @example\n     *\n     * _.pad('abc', 8);\n     * // => '  abc   '\n     *\n     * _.pad('abc', 8, '_-');\n     * // => '_-abc_-_'\n     *\n     * _.pad('abc', 3);\n     * // => 'abc'\n     */\n    function pad(string, length, chars) {\n      string = baseToString(string);\n      length = +length;\n\n      var strLength = string.length;\n      if (strLength >= length || !nativeIsFinite(length)) {\n        return string;\n      }\n      var mid = (length - strLength) / 2,\n          leftLength = nativeFloor(mid),\n          rightLength = nativeCeil(mid);\n\n      chars = createPadding('', rightLength, chars);\n      return chars.slice(0, leftLength) + string + chars;\n    }\n\n    /**\n     * Pads `string` on the left side if it's shorter than `length`. Padding\n     * characters are truncated if they exceed `length`.\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to pad.\n     * @param {number} [length=0] The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padded string.\n     * @example\n     *\n     * _.padLeft('abc', 6);\n     * // => '   abc'\n     *\n     * _.padLeft('abc', 6, '_-');\n     * // => '_-_abc'\n     *\n     * _.padLeft('abc', 3);\n     * // => 'abc'\n     */\n    var padLeft = createPadDir();\n\n    /**\n     * Pads `string` on the right side if it's shorter than `length`. Padding\n     * characters are truncated if they exceed `length`.\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to pad.\n     * @param {number} [length=0] The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padded string.\n     * @example\n     *\n     * _.padRight('abc', 6);\n     * // => 'abc   '\n     *\n     * _.padRight('abc', 6, '_-');\n     * // => 'abc_-_'\n     *\n     * _.padRight('abc', 3);\n     * // => 'abc'\n     */\n    var padRight = createPadDir(true);\n\n    /**\n     * Converts `string` to an integer of the specified radix. If `radix` is\n     * `undefined` or `0`, a `radix` of `10` is used unless `value` is a hexadecimal,\n     * in which case a `radix` of `16` is used.\n     *\n     * **Note:** This method aligns with the [ES5 implementation](https://es5.github.io/#E)\n     * of `parseInt`.\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} string The string to convert.\n     * @param {number} [radix] The radix to interpret `value` by.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.\n     * @returns {number} Returns the converted integer.\n     * @example\n     *\n     * _.parseInt('08');\n     * // => 8\n     *\n     * _.map(['6', '08', '10'], _.parseInt);\n     * // => [6, 8, 10]\n     */\n    function parseInt(string, radix, guard) {\n      // Firefox < 21 and Opera < 15 follow ES3 for `parseInt`.\n      // Chrome fails to trim leading <BOM> whitespace characters.\n      // See https://code.google.com/p/v8/issues/detail?id=3109 for more details.\n      if (guard ? isIterateeCall(string, radix, guard) : radix == null) {\n        radix = 0;\n      } else if (radix) {\n        radix = +radix;\n      }\n      string = trim(string);\n      return nativeParseInt(string, radix || (reHasHexPrefix.test(string) ? 16 : 10));\n    }\n\n    /**\n     * Repeats the given string `n` times.\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to repeat.\n     * @param {number} [n=0] The number of times to repeat the string.\n     * @returns {string} Returns the repeated string.\n     * @example\n     *\n     * _.repeat('*', 3);\n     * // => '***'\n     *\n     * _.repeat('abc', 2);\n     * // => 'abcabc'\n     *\n     * _.repeat('abc', 0);\n     * // => ''\n     */\n    function repeat(string, n) {\n      var result = '';\n      string = baseToString(string);\n      n = +n;\n      if (n < 1 || !string || !nativeIsFinite(n)) {\n        return result;\n      }\n      // Leverage the exponentiation by squaring algorithm for a faster repeat.\n      // See https://en.wikipedia.org/wiki/Exponentiation_by_squaring for more details.\n      do {\n        if (n % 2) {\n          result += string;\n        }\n        n = nativeFloor(n / 2);\n        string += string;\n      } while (n);\n\n      return result;\n    }\n\n    /**\n     * Converts `string` to [snake case](https://en.wikipedia.org/wiki/Snake_case).\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the snake cased string.\n     * @example\n     *\n     * _.snakeCase('Foo Bar');\n     * // => 'foo_bar'\n     *\n     * _.snakeCase('fooBar');\n     * // => 'foo_bar'\n     *\n     * _.snakeCase('--foo-bar');\n     * // => 'foo_bar'\n     */\n    var snakeCase = createCompounder(function(result, word, index) {\n      return result + (index ? '_' : '') + word.toLowerCase();\n    });\n\n    /**\n     * Converts `string` to [start case](https://en.wikipedia.org/wiki/Letter_case#Stylistic_or_specialised_usage).\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the start cased string.\n     * @example\n     *\n     * _.startCase('--foo-bar');\n     * // => 'Foo Bar'\n     *\n     * _.startCase('fooBar');\n     * // => 'Foo Bar'\n     *\n     * _.startCase('__foo_bar__');\n     * // => 'Foo Bar'\n     */\n    var startCase = createCompounder(function(result, word, index) {\n      return result + (index ? ' ' : '') + (word.charAt(0).toUpperCase() + word.slice(1));\n    });\n\n    /**\n     * Checks if `string` starts with the given target string.\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to search.\n     * @param {string} [target] The string to search for.\n     * @param {number} [position=0] The position to search from.\n     * @returns {boolean} Returns `true` if `string` starts with `target`, else `false`.\n     * @example\n     *\n     * _.startsWith('abc', 'a');\n     * // => true\n     *\n     * _.startsWith('abc', 'b');\n     * // => false\n     *\n     * _.startsWith('abc', 'b', 1);\n     * // => true\n     */\n    function startsWith(string, target, position) {\n      string = baseToString(string);\n      position = position == null\n        ? 0\n        : nativeMin(position < 0 ? 0 : (+position || 0), string.length);\n\n      return string.lastIndexOf(target, position) == position;\n    }\n\n    /**\n     * Creates a compiled template function that can interpolate data properties\n     * in \"interpolate\" delimiters, HTML-escape interpolated data properties in\n     * \"escape\" delimiters, and execute JavaScript in \"evaluate\" delimiters. Data\n     * properties may be accessed as free variables in the template. If a setting\n     * object is provided it takes precedence over `_.templateSettings` values.\n     *\n     * **Note:** In the development build `_.template` utilizes\n     * [sourceURLs](http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl)\n     * for easier debugging.\n     *\n     * For more information on precompiling templates see\n     * [lodash's custom builds documentation](https://lodash.com/custom-builds).\n     *\n     * For more information on Chrome extension sandboxes see\n     * [Chrome's extensions documentation](https://developer.chrome.com/extensions/sandboxingEval).\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The template string.\n     * @param {Object} [options] The options object.\n     * @param {RegExp} [options.escape] The HTML \"escape\" delimiter.\n     * @param {RegExp} [options.evaluate] The \"evaluate\" delimiter.\n     * @param {Object} [options.imports] An object to import into the template as free variables.\n     * @param {RegExp} [options.interpolate] The \"interpolate\" delimiter.\n     * @param {string} [options.sourceURL] The sourceURL of the template's compiled source.\n     * @param {string} [options.variable] The data object variable name.\n     * @param- {Object} [otherOptions] Enables the legacy `options` param signature.\n     * @returns {Function} Returns the compiled template function.\n     * @example\n     *\n     * // using the \"interpolate\" delimiter to create a compiled template\n     * var compiled = _.template('hello <%= user %>!');\n     * compiled({ 'user': 'fred' });\n     * // => 'hello fred!'\n     *\n     * // using the HTML \"escape\" delimiter to escape data property values\n     * var compiled = _.template('<b><%- value %></b>');\n     * compiled({ 'value': '<script>' });\n     * // => '<b>&lt;script&gt;</b>'\n     *\n     * // using the \"evaluate\" delimiter to execute JavaScript and generate HTML\n     * var compiled = _.template('<% _.forEach(users, function(user) { %><li><%- user %></li><% }); %>');\n     * compiled({ 'users': ['fred', 'barney'] });\n     * // => '<li>fred</li><li>barney</li>'\n     *\n     * // using the internal `print` function in \"evaluate\" delimiters\n     * var compiled = _.template('<% print(\"hello \" + user); %>!');\n     * compiled({ 'user': 'barney' });\n     * // => 'hello barney!'\n     *\n     * // using the ES delimiter as an alternative to the default \"interpolate\" delimiter\n     * var compiled = _.template('hello ${ user }!');\n     * compiled({ 'user': 'pebbles' });\n     * // => 'hello pebbles!'\n     *\n     * // using custom template delimiters\n     * _.templateSettings.interpolate = /{{([\\s\\S]+?)}}/g;\n     * var compiled = _.template('hello {{ user }}!');\n     * compiled({ 'user': 'mustache' });\n     * // => 'hello mustache!'\n     *\n     * // using backslashes to treat delimiters as plain text\n     * var compiled = _.template('<%= \"\\\\<%- value %\\\\>\" %>');\n     * compiled({ 'value': 'ignored' });\n     * // => '<%- value %>'\n     *\n     * // using the `imports` option to import `jQuery` as `jq`\n     * var text = '<% jq.each(users, function(user) { %><li><%- user %></li><% }); %>';\n     * var compiled = _.template(text, { 'imports': { 'jq': jQuery } });\n     * compiled({ 'users': ['fred', 'barney'] });\n     * // => '<li>fred</li><li>barney</li>'\n     *\n     * // using the `sourceURL` option to specify a custom sourceURL for the template\n     * var compiled = _.template('hello <%= user %>!', { 'sourceURL': '/basic/greeting.jst' });\n     * compiled(data);\n     * // => find the source of \"greeting.jst\" under the Sources tab or Resources panel of the web inspector\n     *\n     * // using the `variable` option to ensure a with-statement isn't used in the compiled template\n     * var compiled = _.template('hi <%= data.user %>!', { 'variable': 'data' });\n     * compiled.source;\n     * // => function(data) {\n     * //   var __t, __p = '';\n     * //   __p += 'hi ' + ((__t = ( data.user )) == null ? '' : __t) + '!';\n     * //   return __p;\n     * // }\n     *\n     * // using the `source` property to inline compiled templates for meaningful\n     * // line numbers in error messages and a stack trace\n     * fs.writeFileSync(path.join(cwd, 'jst.js'), '\\\n     *   var JST = {\\\n     *     \"main\": ' + _.template(mainText).source + '\\\n     *   };\\\n     * ');\n     */\n    function template(string, options, otherOptions) {\n      // Based on John Resig's `tmpl` implementation (http://ejohn.org/blog/javascript-micro-templating/)\n      // and Laura Doktorova's doT.js (https://github.com/olado/doT).\n      var settings = lodash.templateSettings;\n\n      if (otherOptions && isIterateeCall(string, options, otherOptions)) {\n        options = otherOptions = undefined;\n      }\n      string = baseToString(string);\n      options = assignWith(baseAssign({}, otherOptions || options), settings, assignOwnDefaults);\n\n      var imports = assignWith(baseAssign({}, options.imports), settings.imports, assignOwnDefaults),\n          importsKeys = keys(imports),\n          importsValues = baseValues(imports, importsKeys);\n\n      var isEscaping,\n          isEvaluating,\n          index = 0,\n          interpolate = options.interpolate || reNoMatch,\n          source = \"__p += '\";\n\n      // Compile the regexp to match each delimiter.\n      var reDelimiters = RegExp(\n        (options.escape || reNoMatch).source + '|' +\n        interpolate.source + '|' +\n        (interpolate === reInterpolate ? reEsTemplate : reNoMatch).source + '|' +\n        (options.evaluate || reNoMatch).source + '|$'\n      , 'g');\n\n      // Use a sourceURL for easier debugging.\n      var sourceURL = '//# sourceURL=' +\n        ('sourceURL' in options\n          ? options.sourceURL\n          : ('lodash.templateSources[' + (++templateCounter) + ']')\n        ) + '\\n';\n\n      string.replace(reDelimiters, function(match, escapeValue, interpolateValue, esTemplateValue, evaluateValue, offset) {\n        interpolateValue || (interpolateValue = esTemplateValue);\n\n        // Escape characters that can't be included in string literals.\n        source += string.slice(index, offset).replace(reUnescapedString, escapeStringChar);\n\n        // Replace delimiters with snippets.\n        if (escapeValue) {\n          isEscaping = true;\n          source += \"' +\\n__e(\" + escapeValue + \") +\\n'\";\n        }\n        if (evaluateValue) {\n          isEvaluating = true;\n          source += \"';\\n\" + evaluateValue + \";\\n__p += '\";\n        }\n        if (interpolateValue) {\n          source += \"' +\\n((__t = (\" + interpolateValue + \")) == null ? '' : __t) +\\n'\";\n        }\n        index = offset + match.length;\n\n        // The JS engine embedded in Adobe products requires returning the `match`\n        // string in order to produce the correct `offset` value.\n        return match;\n      });\n\n      source += \"';\\n\";\n\n      // If `variable` is not specified wrap a with-statement around the generated\n      // code to add the data object to the top of the scope chain.\n      var variable = options.variable;\n      if (!variable) {\n        source = 'with (obj) {\\n' + source + '\\n}\\n';\n      }\n      // Cleanup code by stripping empty strings.\n      source = (isEvaluating ? source.replace(reEmptyStringLeading, '') : source)\n        .replace(reEmptyStringMiddle, '$1')\n        .replace(reEmptyStringTrailing, '$1;');\n\n      // Frame code as the function body.\n      source = 'function(' + (variable || 'obj') + ') {\\n' +\n        (variable\n          ? ''\n          : 'obj || (obj = {});\\n'\n        ) +\n        \"var __t, __p = ''\" +\n        (isEscaping\n           ? ', __e = _.escape'\n           : ''\n        ) +\n        (isEvaluating\n          ? ', __j = Array.prototype.join;\\n' +\n            \"function print() { __p += __j.call(arguments, '') }\\n\"\n          : ';\\n'\n        ) +\n        source +\n        'return __p\\n}';\n\n      var result = attempt(function() {\n        return Function(importsKeys, sourceURL + 'return ' + source).apply(undefined, importsValues);\n      });\n\n      // Provide the compiled function's source by its `toString` method or\n      // the `source` property as a convenience for inlining compiled templates.\n      result.source = source;\n      if (isError(result)) {\n        throw result;\n      }\n      return result;\n    }\n\n    /**\n     * Removes leading and trailing whitespace or specified characters from `string`.\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to trim.\n     * @param {string} [chars=whitespace] The characters to trim.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.\n     * @returns {string} Returns the trimmed string.\n     * @example\n     *\n     * _.trim('  abc  ');\n     * // => 'abc'\n     *\n     * _.trim('-_-abc-_-', '_-');\n     * // => 'abc'\n     *\n     * _.map(['  foo  ', '  bar  '], _.trim);\n     * // => ['foo', 'bar']\n     */\n    function trim(string, chars, guard) {\n      var value = string;\n      string = baseToString(string);\n      if (!string) {\n        return string;\n      }\n      if (guard ? isIterateeCall(value, chars, guard) : chars == null) {\n        return string.slice(trimmedLeftIndex(string), trimmedRightIndex(string) + 1);\n      }\n      chars = (chars + '');\n      return string.slice(charsLeftIndex(string, chars), charsRightIndex(string, chars) + 1);\n    }\n\n    /**\n     * Removes leading whitespace or specified characters from `string`.\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to trim.\n     * @param {string} [chars=whitespace] The characters to trim.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.\n     * @returns {string} Returns the trimmed string.\n     * @example\n     *\n     * _.trimLeft('  abc  ');\n     * // => 'abc  '\n     *\n     * _.trimLeft('-_-abc-_-', '_-');\n     * // => 'abc-_-'\n     */\n    function trimLeft(string, chars, guard) {\n      var value = string;\n      string = baseToString(string);\n      if (!string) {\n        return string;\n      }\n      if (guard ? isIterateeCall(value, chars, guard) : chars == null) {\n        return string.slice(trimmedLeftIndex(string));\n      }\n      return string.slice(charsLeftIndex(string, (chars + '')));\n    }\n\n    /**\n     * Removes trailing whitespace or specified characters from `string`.\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to trim.\n     * @param {string} [chars=whitespace] The characters to trim.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.\n     * @returns {string} Returns the trimmed string.\n     * @example\n     *\n     * _.trimRight('  abc  ');\n     * // => '  abc'\n     *\n     * _.trimRight('-_-abc-_-', '_-');\n     * // => '-_-abc'\n     */\n    function trimRight(string, chars, guard) {\n      var value = string;\n      string = baseToString(string);\n      if (!string) {\n        return string;\n      }\n      if (guard ? isIterateeCall(value, chars, guard) : chars == null) {\n        return string.slice(0, trimmedRightIndex(string) + 1);\n      }\n      return string.slice(0, charsRightIndex(string, (chars + '')) + 1);\n    }\n\n    /**\n     * Truncates `string` if it's longer than the given maximum string length.\n     * The last characters of the truncated string are replaced with the omission\n     * string which defaults to \"...\".\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to truncate.\n     * @param {Object|number} [options] The options object or maximum string length.\n     * @param {number} [options.length=30] The maximum string length.\n     * @param {string} [options.omission='...'] The string to indicate text is omitted.\n     * @param {RegExp|string} [options.separator] The separator pattern to truncate to.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.\n     * @returns {string} Returns the truncated string.\n     * @example\n     *\n     * _.trunc('hi-diddly-ho there, neighborino');\n     * // => 'hi-diddly-ho there, neighbo...'\n     *\n     * _.trunc('hi-diddly-ho there, neighborino', 24);\n     * // => 'hi-diddly-ho there, n...'\n     *\n     * _.trunc('hi-diddly-ho there, neighborino', {\n     *   'length': 24,\n     *   'separator': ' '\n     * });\n     * // => 'hi-diddly-ho there,...'\n     *\n     * _.trunc('hi-diddly-ho there, neighborino', {\n     *   'length': 24,\n     *   'separator': /,? +/\n     * });\n     * // => 'hi-diddly-ho there...'\n     *\n     * _.trunc('hi-diddly-ho there, neighborino', {\n     *   'omission': ' [...]'\n     * });\n     * // => 'hi-diddly-ho there, neig [...]'\n     */\n    function trunc(string, options, guard) {\n      if (guard && isIterateeCall(string, options, guard)) {\n        options = undefined;\n      }\n      var length = DEFAULT_TRUNC_LENGTH,\n          omission = DEFAULT_TRUNC_OMISSION;\n\n      if (options != null) {\n        if (isObject(options)) {\n          var separator = 'separator' in options ? options.separator : separator;\n          length = 'length' in options ? (+options.length || 0) : length;\n          omission = 'omission' in options ? baseToString(options.omission) : omission;\n        } else {\n          length = +options || 0;\n        }\n      }\n      string = baseToString(string);\n      if (length >= string.length) {\n        return string;\n      }\n      var end = length - omission.length;\n      if (end < 1) {\n        return omission;\n      }\n      var result = string.slice(0, end);\n      if (separator == null) {\n        return result + omission;\n      }\n      if (isRegExp(separator)) {\n        if (string.slice(end).search(separator)) {\n          var match,\n              newEnd,\n              substring = string.slice(0, end);\n\n          if (!separator.global) {\n            separator = RegExp(separator.source, (reFlags.exec(separator) || '') + 'g');\n          }\n          separator.lastIndex = 0;\n          while ((match = separator.exec(substring))) {\n            newEnd = match.index;\n          }\n          result = result.slice(0, newEnd == null ? end : newEnd);\n        }\n      } else if (string.indexOf(separator, end) != end) {\n        var index = result.lastIndexOf(separator);\n        if (index > -1) {\n          result = result.slice(0, index);\n        }\n      }\n      return result + omission;\n    }\n\n    /**\n     * The inverse of `_.escape`; this method converts the HTML entities\n     * `&amp;`, `&lt;`, `&gt;`, `&quot;`, `&#39;`, and `&#96;` in `string` to their\n     * corresponding characters.\n     *\n     * **Note:** No other HTML entities are unescaped. To unescape additional HTML\n     * entities use a third-party library like [_he_](https://mths.be/he).\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to unescape.\n     * @returns {string} Returns the unescaped string.\n     * @example\n     *\n     * _.unescape('fred, barney, &amp; pebbles');\n     * // => 'fred, barney, & pebbles'\n     */\n    function unescape(string) {\n      string = baseToString(string);\n      return (string && reHasEscapedHtml.test(string))\n        ? string.replace(reEscapedHtml, unescapeHtmlChar)\n        : string;\n    }\n\n    /**\n     * Splits `string` into an array of its words.\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to inspect.\n     * @param {RegExp|string} [pattern] The pattern to match words.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.\n     * @returns {Array} Returns the words of `string`.\n     * @example\n     *\n     * _.words('fred, barney, & pebbles');\n     * // => ['fred', 'barney', 'pebbles']\n     *\n     * _.words('fred, barney, & pebbles', /[^, ]+/g);\n     * // => ['fred', 'barney', '&', 'pebbles']\n     */\n    function words(string, pattern, guard) {\n      if (guard && isIterateeCall(string, pattern, guard)) {\n        pattern = undefined;\n      }\n      string = baseToString(string);\n      return string.match(pattern || reWords) || [];\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Attempts to invoke `func`, returning either the result or the caught error\n     * object. Any additional arguments are provided to `func` when it is invoked.\n     *\n     * @static\n     * @memberOf _\n     * @category Utility\n     * @param {Function} func The function to attempt.\n     * @returns {*} Returns the `func` result or error object.\n     * @example\n     *\n     * // avoid throwing errors for invalid selectors\n     * var elements = _.attempt(function(selector) {\n     *   return document.querySelectorAll(selector);\n     * }, '>_>');\n     *\n     * if (_.isError(elements)) {\n     *   elements = [];\n     * }\n     */\n    var attempt = restParam(function(func, args) {\n      try {\n        return func.apply(undefined, args);\n      } catch(e) {\n        return isError(e) ? e : new Error(e);\n      }\n    });\n\n    /**\n     * Creates a function that invokes `func` with the `this` binding of `thisArg`\n     * and arguments of the created function. If `func` is a property name the\n     * created callback returns the property value for a given element. If `func`\n     * is an object the created callback returns `true` for elements that contain\n     * the equivalent object properties, otherwise it returns `false`.\n     *\n     * @static\n     * @memberOf _\n     * @alias iteratee\n     * @category Utility\n     * @param {*} [func=_.identity] The value to convert to a callback.\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.\n     * @returns {Function} Returns the callback.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36 },\n     *   { 'user': 'fred',   'age': 40 }\n     * ];\n     *\n     * // wrap to create custom callback shorthands\n     * _.callback = _.wrap(_.callback, function(callback, func, thisArg) {\n     *   var match = /^(.+?)__([gl]t)(.+)$/.exec(func);\n     *   if (!match) {\n     *     return callback(func, thisArg);\n     *   }\n     *   return function(object) {\n     *     return match[2] == 'gt'\n     *       ? object[match[1]] > match[3]\n     *       : object[match[1]] < match[3];\n     *   };\n     * });\n     *\n     * _.filter(users, 'age__gt36');\n     * // => [{ 'user': 'fred', 'age': 40 }]\n     */\n    function callback(func, thisArg, guard) {\n      if (guard && isIterateeCall(func, thisArg, guard)) {\n        thisArg = undefined;\n      }\n      return isObjectLike(func)\n        ? matches(func)\n        : baseCallback(func, thisArg);\n    }\n\n    /**\n     * Creates a function that returns `value`.\n     *\n     * @static\n     * @memberOf _\n     * @category Utility\n     * @param {*} value The value to return from the new function.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var object = { 'user': 'fred' };\n     * var getter = _.constant(object);\n     *\n     * getter() === object;\n     * // => true\n     */\n    function constant(value) {\n      return function() {\n        return value;\n      };\n    }\n\n    /**\n     * This method returns the first argument provided to it.\n     *\n     * @static\n     * @memberOf _\n     * @category Utility\n     * @param {*} value Any value.\n     * @returns {*} Returns `value`.\n     * @example\n     *\n     * var object = { 'user': 'fred' };\n     *\n     * _.identity(object) === object;\n     * // => true\n     */\n    function identity(value) {\n      return value;\n    }\n\n    /**\n     * Creates a function that performs a deep comparison between a given object\n     * and `source`, returning `true` if the given object has equivalent property\n     * values, else `false`.\n     *\n     * **Note:** This method supports comparing arrays, booleans, `Date` objects,\n     * numbers, `Object` objects, regexes, and strings. Objects are compared by\n     * their own, not inherited, enumerable properties. For comparing a single\n     * own or inherited property value see `_.matchesProperty`.\n     *\n     * @static\n     * @memberOf _\n     * @category Utility\n     * @param {Object} source The object of property values to match.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': true },\n     *   { 'user': 'fred',   'age': 40, 'active': false }\n     * ];\n     *\n     * _.filter(users, _.matches({ 'age': 40, 'active': false }));\n     * // => [{ 'user': 'fred', 'age': 40, 'active': false }]\n     */\n    function matches(source) {\n      return baseMatches(baseClone(source, true));\n    }\n\n    /**\n     * Creates a function that compares the property value of `path` on a given\n     * object to `value`.\n     *\n     * **Note:** This method supports comparing arrays, booleans, `Date` objects,\n     * numbers, `Object` objects, regexes, and strings. Objects are compared by\n     * their own, not inherited, enumerable properties.\n     *\n     * @static\n     * @memberOf _\n     * @category Utility\n     * @param {Array|string} path The path of the property to get.\n     * @param {*} srcValue The value to match.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney' },\n     *   { 'user': 'fred' }\n     * ];\n     *\n     * _.find(users, _.matchesProperty('user', 'fred'));\n     * // => { 'user': 'fred' }\n     */\n    function matchesProperty(path, srcValue) {\n      return baseMatchesProperty(path, baseClone(srcValue, true));\n    }\n\n    /**\n     * Creates a function that invokes the method at `path` on a given object.\n     * Any additional arguments are provided to the invoked method.\n     *\n     * @static\n     * @memberOf _\n     * @category Utility\n     * @param {Array|string} path The path of the method to invoke.\n     * @param {...*} [args] The arguments to invoke the method with.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': { 'b': { 'c': _.constant(2) } } },\n     *   { 'a': { 'b': { 'c': _.constant(1) } } }\n     * ];\n     *\n     * _.map(objects, _.method('a.b.c'));\n     * // => [2, 1]\n     *\n     * _.invoke(_.sortBy(objects, _.method(['a', 'b', 'c'])), 'a.b.c');\n     * // => [1, 2]\n     */\n    var method = restParam(function(path, args) {\n      return function(object) {\n        return invokePath(object, path, args);\n      };\n    });\n\n    /**\n     * The opposite of `_.method`; this method creates a function that invokes\n     * the method at a given path on `object`. Any additional arguments are\n     * provided to the invoked method.\n     *\n     * @static\n     * @memberOf _\n     * @category Utility\n     * @param {Object} object The object to query.\n     * @param {...*} [args] The arguments to invoke the method with.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var array = _.times(3, _.constant),\n     *     object = { 'a': array, 'b': array, 'c': array };\n     *\n     * _.map(['a[2]', 'c[0]'], _.methodOf(object));\n     * // => [2, 0]\n     *\n     * _.map([['a', '2'], ['c', '0']], _.methodOf(object));\n     * // => [2, 0]\n     */\n    var methodOf = restParam(function(object, args) {\n      return function(path) {\n        return invokePath(object, path, args);\n      };\n    });\n\n    /**\n     * Adds all own enumerable function properties of a source object to the\n     * destination object. If `object` is a function then methods are added to\n     * its prototype as well.\n     *\n     * **Note:** Use `_.runInContext` to create a pristine `lodash` function to\n     * avoid conflicts caused by modifying the original.\n     *\n     * @static\n     * @memberOf _\n     * @category Utility\n     * @param {Function|Object} [object=lodash] The destination object.\n     * @param {Object} source The object of functions to add.\n     * @param {Object} [options] The options object.\n     * @param {boolean} [options.chain=true] Specify whether the functions added\n     *  are chainable.\n     * @returns {Function|Object} Returns `object`.\n     * @example\n     *\n     * function vowels(string) {\n     *   return _.filter(string, function(v) {\n     *     return /[aeiou]/i.test(v);\n     *   });\n     * }\n     *\n     * _.mixin({ 'vowels': vowels });\n     * _.vowels('fred');\n     * // => ['e']\n     *\n     * _('fred').vowels().value();\n     * // => ['e']\n     *\n     * _.mixin({ 'vowels': vowels }, { 'chain': false });\n     * _('fred').vowels();\n     * // => ['e']\n     */\n    function mixin(object, source, options) {\n      if (options == null) {\n        var isObj = isObject(source),\n            props = isObj ? keys(source) : undefined,\n            methodNames = (props && props.length) ? baseFunctions(source, props) : undefined;\n\n        if (!(methodNames ? methodNames.length : isObj)) {\n          methodNames = false;\n          options = source;\n          source = object;\n          object = this;\n        }\n      }\n      if (!methodNames) {\n        methodNames = baseFunctions(source, keys(source));\n      }\n      var chain = true,\n          index = -1,\n          isFunc = isFunction(object),\n          length = methodNames.length;\n\n      if (options === false) {\n        chain = false;\n      } else if (isObject(options) && 'chain' in options) {\n        chain = options.chain;\n      }\n      while (++index < length) {\n        var methodName = methodNames[index],\n            func = source[methodName];\n\n        object[methodName] = func;\n        if (isFunc) {\n          object.prototype[methodName] = (function(func) {\n            return function() {\n              var chainAll = this.__chain__;\n              if (chain || chainAll) {\n                var result = object(this.__wrapped__),\n                    actions = result.__actions__ = arrayCopy(this.__actions__);\n\n                actions.push({ 'func': func, 'args': arguments, 'thisArg': object });\n                result.__chain__ = chainAll;\n                return result;\n              }\n              return func.apply(object, arrayPush([this.value()], arguments));\n            };\n          }(func));\n        }\n      }\n      return object;\n    }\n\n    /**\n     * Reverts the `_` variable to its previous value and returns a reference to\n     * the `lodash` function.\n     *\n     * @static\n     * @memberOf _\n     * @category Utility\n     * @returns {Function} Returns the `lodash` function.\n     * @example\n     *\n     * var lodash = _.noConflict();\n     */\n    function noConflict() {\n      root._ = oldDash;\n      return this;\n    }\n\n    /**\n     * A no-operation function that returns `undefined` regardless of the\n     * arguments it receives.\n     *\n     * @static\n     * @memberOf _\n     * @category Utility\n     * @example\n     *\n     * var object = { 'user': 'fred' };\n     *\n     * _.noop(object) === undefined;\n     * // => true\n     */\n    function noop() {\n      // No operation performed.\n    }\n\n    /**\n     * Creates a function that returns the property value at `path` on a\n     * given object.\n     *\n     * @static\n     * @memberOf _\n     * @category Utility\n     * @param {Array|string} path The path of the property to get.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': { 'b': { 'c': 2 } } },\n     *   { 'a': { 'b': { 'c': 1 } } }\n     * ];\n     *\n     * _.map(objects, _.property('a.b.c'));\n     * // => [2, 1]\n     *\n     * _.pluck(_.sortBy(objects, _.property(['a', 'b', 'c'])), 'a.b.c');\n     * // => [1, 2]\n     */\n    function property(path) {\n      return isKey(path) ? baseProperty(path) : basePropertyDeep(path);\n    }\n\n    /**\n     * The opposite of `_.property`; this method creates a function that returns\n     * the property value at a given path on `object`.\n     *\n     * @static\n     * @memberOf _\n     * @category Utility\n     * @param {Object} object The object to query.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var array = [0, 1, 2],\n     *     object = { 'a': array, 'b': array, 'c': array };\n     *\n     * _.map(['a[2]', 'c[0]'], _.propertyOf(object));\n     * // => [2, 0]\n     *\n     * _.map([['a', '2'], ['c', '0']], _.propertyOf(object));\n     * // => [2, 0]\n     */\n    function propertyOf(object) {\n      return function(path) {\n        return baseGet(object, toPath(path), path + '');\n      };\n    }\n\n    /**\n     * Creates an array of numbers (positive and/or negative) progressing from\n     * `start` up to, but not including, `end`. If `end` is not specified it is\n     * set to `start` with `start` then set to `0`. If `end` is less than `start`\n     * a zero-length range is created unless a negative `step` is specified.\n     *\n     * @static\n     * @memberOf _\n     * @category Utility\n     * @param {number} [start=0] The start of the range.\n     * @param {number} end The end of the range.\n     * @param {number} [step=1] The value to increment or decrement by.\n     * @returns {Array} Returns the new array of numbers.\n     * @example\n     *\n     * _.range(4);\n     * // => [0, 1, 2, 3]\n     *\n     * _.range(1, 5);\n     * // => [1, 2, 3, 4]\n     *\n     * _.range(0, 20, 5);\n     * // => [0, 5, 10, 15]\n     *\n     * _.range(0, -4, -1);\n     * // => [0, -1, -2, -3]\n     *\n     * _.range(1, 4, 0);\n     * // => [1, 1, 1]\n     *\n     * _.range(0);\n     * // => []\n     */\n    function range(start, end, step) {\n      if (step && isIterateeCall(start, end, step)) {\n        end = step = undefined;\n      }\n      start = +start || 0;\n      step = step == null ? 1 : (+step || 0);\n\n      if (end == null) {\n        end = start;\n        start = 0;\n      } else {\n        end = +end || 0;\n      }\n      // Use `Array(length)` so engines like Chakra and V8 avoid slower modes.\n      // See https://youtu.be/XAqIpGU8ZZk#t=17m25s for more details.\n      var index = -1,\n          length = nativeMax(nativeCeil((end - start) / (step || 1)), 0),\n          result = Array(length);\n\n      while (++index < length) {\n        result[index] = start;\n        start += step;\n      }\n      return result;\n    }\n\n    /**\n     * Invokes the iteratee function `n` times, returning an array of the results\n     * of each invocation. The `iteratee` is bound to `thisArg` and invoked with\n     * one argument; (index).\n     *\n     * @static\n     * @memberOf _\n     * @category Utility\n     * @param {number} n The number of times to invoke `iteratee`.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {Array} Returns the array of results.\n     * @example\n     *\n     * var diceRolls = _.times(3, _.partial(_.random, 1, 6, false));\n     * // => [3, 6, 4]\n     *\n     * _.times(3, function(n) {\n     *   mage.castSpell(n);\n     * });\n     * // => invokes `mage.castSpell(n)` three times with `n` of `0`, `1`, and `2`\n     *\n     * _.times(3, function(n) {\n     *   this.cast(n);\n     * }, mage);\n     * // => also invokes `mage.castSpell(n)` three times\n     */\n    function times(n, iteratee, thisArg) {\n      n = nativeFloor(n);\n\n      // Exit early to avoid a JSC JIT bug in Safari 8\n      // where `Array(0)` is treated as `Array(1)`.\n      if (n < 1 || !nativeIsFinite(n)) {\n        return [];\n      }\n      var index = -1,\n          result = Array(nativeMin(n, MAX_ARRAY_LENGTH));\n\n      iteratee = bindCallback(iteratee, thisArg, 1);\n      while (++index < n) {\n        if (index < MAX_ARRAY_LENGTH) {\n          result[index] = iteratee(index);\n        } else {\n          iteratee(index);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Generates a unique ID. If `prefix` is provided the ID is appended to it.\n     *\n     * @static\n     * @memberOf _\n     * @category Utility\n     * @param {string} [prefix] The value to prefix the ID with.\n     * @returns {string} Returns the unique ID.\n     * @example\n     *\n     * _.uniqueId('contact_');\n     * // => 'contact_104'\n     *\n     * _.uniqueId();\n     * // => '105'\n     */\n    function uniqueId(prefix) {\n      var id = ++idCounter;\n      return baseToString(prefix) + id;\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Adds two numbers.\n     *\n     * @static\n     * @memberOf _\n     * @category Math\n     * @param {number} augend The first number to add.\n     * @param {number} addend The second number to add.\n     * @returns {number} Returns the sum.\n     * @example\n     *\n     * _.add(6, 4);\n     * // => 10\n     */\n    function add(augend, addend) {\n      return (+augend || 0) + (+addend || 0);\n    }\n\n    /**\n     * Calculates `n` rounded up to `precision`.\n     *\n     * @static\n     * @memberOf _\n     * @category Math\n     * @param {number} n The number to round up.\n     * @param {number} [precision=0] The precision to round up to.\n     * @returns {number} Returns the rounded up number.\n     * @example\n     *\n     * _.ceil(4.006);\n     * // => 5\n     *\n     * _.ceil(6.004, 2);\n     * // => 6.01\n     *\n     * _.ceil(6040, -2);\n     * // => 6100\n     */\n    var ceil = createRound('ceil');\n\n    /**\n     * Calculates `n` rounded down to `precision`.\n     *\n     * @static\n     * @memberOf _\n     * @category Math\n     * @param {number} n The number to round down.\n     * @param {number} [precision=0] The precision to round down to.\n     * @returns {number} Returns the rounded down number.\n     * @example\n     *\n     * _.floor(4.006);\n     * // => 4\n     *\n     * _.floor(0.046, 2);\n     * // => 0.04\n     *\n     * _.floor(4060, -2);\n     * // => 4000\n     */\n    var floor = createRound('floor');\n\n    /**\n     * Gets the maximum value of `collection`. If `collection` is empty or falsey\n     * `-Infinity` is returned. If an iteratee function is provided it is invoked\n     * for each value in `collection` to generate the criterion by which the value\n     * is ranked. The `iteratee` is bound to `thisArg` and invoked with three\n     * arguments: (value, index, collection).\n     *\n     * If a property name is provided for `iteratee` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `iteratee` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Math\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [iteratee] The function invoked per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {*} Returns the maximum value.\n     * @example\n     *\n     * _.max([4, 2, 8, 6]);\n     * // => 8\n     *\n     * _.max([]);\n     * // => -Infinity\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36 },\n     *   { 'user': 'fred',   'age': 40 }\n     * ];\n     *\n     * _.max(users, function(chr) {\n     *   return chr.age;\n     * });\n     * // => { 'user': 'fred', 'age': 40 }\n     *\n     * // using the `_.property` callback shorthand\n     * _.max(users, 'age');\n     * // => { 'user': 'fred', 'age': 40 }\n     */\n    var max = createExtremum(gt, NEGATIVE_INFINITY);\n\n    /**\n     * Gets the minimum value of `collection`. If `collection` is empty or falsey\n     * `Infinity` is returned. If an iteratee function is provided it is invoked\n     * for each value in `collection` to generate the criterion by which the value\n     * is ranked. The `iteratee` is bound to `thisArg` and invoked with three\n     * arguments: (value, index, collection).\n     *\n     * If a property name is provided for `iteratee` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `iteratee` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Math\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [iteratee] The function invoked per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {*} Returns the minimum value.\n     * @example\n     *\n     * _.min([4, 2, 8, 6]);\n     * // => 2\n     *\n     * _.min([]);\n     * // => Infinity\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36 },\n     *   { 'user': 'fred',   'age': 40 }\n     * ];\n     *\n     * _.min(users, function(chr) {\n     *   return chr.age;\n     * });\n     * // => { 'user': 'barney', 'age': 36 }\n     *\n     * // using the `_.property` callback shorthand\n     * _.min(users, 'age');\n     * // => { 'user': 'barney', 'age': 36 }\n     */\n    var min = createExtremum(lt, POSITIVE_INFINITY);\n\n    /**\n     * Calculates `n` rounded to `precision`.\n     *\n     * @static\n     * @memberOf _\n     * @category Math\n     * @param {number} n The number to round.\n     * @param {number} [precision=0] The precision to round to.\n     * @returns {number} Returns the rounded number.\n     * @example\n     *\n     * _.round(4.006);\n     * // => 4\n     *\n     * _.round(4.006, 2);\n     * // => 4.01\n     *\n     * _.round(4060, -2);\n     * // => 4100\n     */\n    var round = createRound('round');\n\n    /**\n     * Gets the sum of the values in `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @category Math\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [iteratee] The function invoked per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {number} Returns the sum.\n     * @example\n     *\n     * _.sum([4, 6]);\n     * // => 10\n     *\n     * _.sum({ 'a': 4, 'b': 6 });\n     * // => 10\n     *\n     * var objects = [\n     *   { 'n': 4 },\n     *   { 'n': 6 }\n     * ];\n     *\n     * _.sum(objects, function(object) {\n     *   return object.n;\n     * });\n     * // => 10\n     *\n     * // using the `_.property` callback shorthand\n     * _.sum(objects, 'n');\n     * // => 10\n     */\n    function sum(collection, iteratee, thisArg) {\n      if (thisArg && isIterateeCall(collection, iteratee, thisArg)) {\n        iteratee = undefined;\n      }\n      iteratee = getCallback(iteratee, thisArg, 3);\n      return iteratee.length == 1\n        ? arraySum(isArray(collection) ? collection : toIterable(collection), iteratee)\n        : baseSum(collection, iteratee);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    // Ensure wrappers are instances of `baseLodash`.\n    lodash.prototype = baseLodash.prototype;\n\n    LodashWrapper.prototype = baseCreate(baseLodash.prototype);\n    LodashWrapper.prototype.constructor = LodashWrapper;\n\n    LazyWrapper.prototype = baseCreate(baseLodash.prototype);\n    LazyWrapper.prototype.constructor = LazyWrapper;\n\n    // Add functions to the `Map` cache.\n    MapCache.prototype['delete'] = mapDelete;\n    MapCache.prototype.get = mapGet;\n    MapCache.prototype.has = mapHas;\n    MapCache.prototype.set = mapSet;\n\n    // Add functions to the `Set` cache.\n    SetCache.prototype.push = cachePush;\n\n    // Assign cache to `_.memoize`.\n    memoize.Cache = MapCache;\n\n    // Add functions that return wrapped values when chaining.\n    lodash.after = after;\n    lodash.ary = ary;\n    lodash.assign = assign;\n    lodash.at = at;\n    lodash.before = before;\n    lodash.bind = bind;\n    lodash.bindAll = bindAll;\n    lodash.bindKey = bindKey;\n    lodash.callback = callback;\n    lodash.chain = chain;\n    lodash.chunk = chunk;\n    lodash.compact = compact;\n    lodash.constant = constant;\n    lodash.countBy = countBy;\n    lodash.create = create;\n    lodash.curry = curry;\n    lodash.curryRight = curryRight;\n    lodash.debounce = debounce;\n    lodash.defaults = defaults;\n    lodash.defaultsDeep = defaultsDeep;\n    lodash.defer = defer;\n    lodash.delay = delay;\n    lodash.difference = difference;\n    lodash.drop = drop;\n    lodash.dropRight = dropRight;\n    lodash.dropRightWhile = dropRightWhile;\n    lodash.dropWhile = dropWhile;\n    lodash.fill = fill;\n    lodash.filter = filter;\n    lodash.flatten = flatten;\n    lodash.flattenDeep = flattenDeep;\n    lodash.flow = flow;\n    lodash.flowRight = flowRight;\n    lodash.forEach = forEach;\n    lodash.forEachRight = forEachRight;\n    lodash.forIn = forIn;\n    lodash.forInRight = forInRight;\n    lodash.forOwn = forOwn;\n    lodash.forOwnRight = forOwnRight;\n    lodash.functions = functions;\n    lodash.groupBy = groupBy;\n    lodash.indexBy = indexBy;\n    lodash.initial = initial;\n    lodash.intersection = intersection;\n    lodash.invert = invert;\n    lodash.invoke = invoke;\n    lodash.keys = keys;\n    lodash.keysIn = keysIn;\n    lodash.map = map;\n    lodash.mapKeys = mapKeys;\n    lodash.mapValues = mapValues;\n    lodash.matches = matches;\n    lodash.matchesProperty = matchesProperty;\n    lodash.memoize = memoize;\n    lodash.merge = merge;\n    lodash.method = method;\n    lodash.methodOf = methodOf;\n    lodash.mixin = mixin;\n    lodash.modArgs = modArgs;\n    lodash.negate = negate;\n    lodash.omit = omit;\n    lodash.once = once;\n    lodash.pairs = pairs;\n    lodash.partial = partial;\n    lodash.partialRight = partialRight;\n    lodash.partition = partition;\n    lodash.pick = pick;\n    lodash.pluck = pluck;\n    lodash.property = property;\n    lodash.propertyOf = propertyOf;\n    lodash.pull = pull;\n    lodash.pullAt = pullAt;\n    lodash.range = range;\n    lodash.rearg = rearg;\n    lodash.reject = reject;\n    lodash.remove = remove;\n    lodash.rest = rest;\n    lodash.restParam = restParam;\n    lodash.set = set;\n    lodash.shuffle = shuffle;\n    lodash.slice = slice;\n    lodash.sortBy = sortBy;\n    lodash.sortByAll = sortByAll;\n    lodash.sortByOrder = sortByOrder;\n    lodash.spread = spread;\n    lodash.take = take;\n    lodash.takeRight = takeRight;\n    lodash.takeRightWhile = takeRightWhile;\n    lodash.takeWhile = takeWhile;\n    lodash.tap = tap;\n    lodash.throttle = throttle;\n    lodash.thru = thru;\n    lodash.times = times;\n    lodash.toArray = toArray;\n    lodash.toPlainObject = toPlainObject;\n    lodash.transform = transform;\n    lodash.union = union;\n    lodash.uniq = uniq;\n    lodash.unzip = unzip;\n    lodash.unzipWith = unzipWith;\n    lodash.values = values;\n    lodash.valuesIn = valuesIn;\n    lodash.where = where;\n    lodash.without = without;\n    lodash.wrap = wrap;\n    lodash.xor = xor;\n    lodash.zip = zip;\n    lodash.zipObject = zipObject;\n    lodash.zipWith = zipWith;\n\n    // Add aliases.\n    lodash.backflow = flowRight;\n    lodash.collect = map;\n    lodash.compose = flowRight;\n    lodash.each = forEach;\n    lodash.eachRight = forEachRight;\n    lodash.extend = assign;\n    lodash.iteratee = callback;\n    lodash.methods = functions;\n    lodash.object = zipObject;\n    lodash.select = filter;\n    lodash.tail = rest;\n    lodash.unique = uniq;\n\n    // Add functions to `lodash.prototype`.\n    mixin(lodash, lodash);\n\n    /*------------------------------------------------------------------------*/\n\n    // Add functions that return unwrapped values when chaining.\n    lodash.add = add;\n    lodash.attempt = attempt;\n    lodash.camelCase = camelCase;\n    lodash.capitalize = capitalize;\n    lodash.ceil = ceil;\n    lodash.clone = clone;\n    lodash.cloneDeep = cloneDeep;\n    lodash.deburr = deburr;\n    lodash.endsWith = endsWith;\n    lodash.escape = escape;\n    lodash.escapeRegExp = escapeRegExp;\n    lodash.every = every;\n    lodash.find = find;\n    lodash.findIndex = findIndex;\n    lodash.findKey = findKey;\n    lodash.findLast = findLast;\n    lodash.findLastIndex = findLastIndex;\n    lodash.findLastKey = findLastKey;\n    lodash.findWhere = findWhere;\n    lodash.first = first;\n    lodash.floor = floor;\n    lodash.get = get;\n    lodash.gt = gt;\n    lodash.gte = gte;\n    lodash.has = has;\n    lodash.identity = identity;\n    lodash.includes = includes;\n    lodash.indexOf = indexOf;\n    lodash.inRange = inRange;\n    lodash.isArguments = isArguments;\n    lodash.isArray = isArray;\n    lodash.isBoolean = isBoolean;\n    lodash.isDate = isDate;\n    lodash.isElement = isElement;\n    lodash.isEmpty = isEmpty;\n    lodash.isEqual = isEqual;\n    lodash.isError = isError;\n    lodash.isFinite = isFinite;\n    lodash.isFunction = isFunction;\n    lodash.isMatch = isMatch;\n    lodash.isNaN = isNaN;\n    lodash.isNative = isNative;\n    lodash.isNull = isNull;\n    lodash.isNumber = isNumber;\n    lodash.isObject = isObject;\n    lodash.isPlainObject = isPlainObject;\n    lodash.isRegExp = isRegExp;\n    lodash.isString = isString;\n    lodash.isTypedArray = isTypedArray;\n    lodash.isUndefined = isUndefined;\n    lodash.kebabCase = kebabCase;\n    lodash.last = last;\n    lodash.lastIndexOf = lastIndexOf;\n    lodash.lt = lt;\n    lodash.lte = lte;\n    lodash.max = max;\n    lodash.min = min;\n    lodash.noConflict = noConflict;\n    lodash.noop = noop;\n    lodash.now = now;\n    lodash.pad = pad;\n    lodash.padLeft = padLeft;\n    lodash.padRight = padRight;\n    lodash.parseInt = parseInt;\n    lodash.random = random;\n    lodash.reduce = reduce;\n    lodash.reduceRight = reduceRight;\n    lodash.repeat = repeat;\n    lodash.result = result;\n    lodash.round = round;\n    lodash.runInContext = runInContext;\n    lodash.size = size;\n    lodash.snakeCase = snakeCase;\n    lodash.some = some;\n    lodash.sortedIndex = sortedIndex;\n    lodash.sortedLastIndex = sortedLastIndex;\n    lodash.startCase = startCase;\n    lodash.startsWith = startsWith;\n    lodash.sum = sum;\n    lodash.template = template;\n    lodash.trim = trim;\n    lodash.trimLeft = trimLeft;\n    lodash.trimRight = trimRight;\n    lodash.trunc = trunc;\n    lodash.unescape = unescape;\n    lodash.uniqueId = uniqueId;\n    lodash.words = words;\n\n    // Add aliases.\n    lodash.all = every;\n    lodash.any = some;\n    lodash.contains = includes;\n    lodash.eq = isEqual;\n    lodash.detect = find;\n    lodash.foldl = reduce;\n    lodash.foldr = reduceRight;\n    lodash.head = first;\n    lodash.include = includes;\n    lodash.inject = reduce;\n\n    mixin(lodash, (function() {\n      var source = {};\n      baseForOwn(lodash, function(func, methodName) {\n        if (!lodash.prototype[methodName]) {\n          source[methodName] = func;\n        }\n      });\n      return source;\n    }()), false);\n\n    /*------------------------------------------------------------------------*/\n\n    // Add functions capable of returning wrapped and unwrapped values when chaining.\n    lodash.sample = sample;\n\n    lodash.prototype.sample = function(n) {\n      if (!this.__chain__ && n == null) {\n        return sample(this.value());\n      }\n      return this.thru(function(value) {\n        return sample(value, n);\n      });\n    };\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * The semantic version number.\n     *\n     * @static\n     * @memberOf _\n     * @type string\n     */\n    lodash.VERSION = VERSION;\n\n    // Assign default placeholders.\n    arrayEach(['bind', 'bindKey', 'curry', 'curryRight', 'partial', 'partialRight'], function(methodName) {\n      lodash[methodName].placeholder = lodash;\n    });\n\n    // Add `LazyWrapper` methods for `_.drop` and `_.take` variants.\n    arrayEach(['drop', 'take'], function(methodName, index) {\n      LazyWrapper.prototype[methodName] = function(n) {\n        var filtered = this.__filtered__;\n        if (filtered && !index) {\n          return new LazyWrapper(this);\n        }\n        n = n == null ? 1 : nativeMax(nativeFloor(n) || 0, 0);\n\n        var result = this.clone();\n        if (filtered) {\n          result.__takeCount__ = nativeMin(result.__takeCount__, n);\n        } else {\n          result.__views__.push({ 'size': n, 'type': methodName + (result.__dir__ < 0 ? 'Right' : '') });\n        }\n        return result;\n      };\n\n      LazyWrapper.prototype[methodName + 'Right'] = function(n) {\n        return this.reverse()[methodName](n).reverse();\n      };\n    });\n\n    // Add `LazyWrapper` methods that accept an `iteratee` value.\n    arrayEach(['filter', 'map', 'takeWhile'], function(methodName, index) {\n      var type = index + 1,\n          isFilter = type != LAZY_MAP_FLAG;\n\n      LazyWrapper.prototype[methodName] = function(iteratee, thisArg) {\n        var result = this.clone();\n        result.__iteratees__.push({ 'iteratee': getCallback(iteratee, thisArg, 1), 'type': type });\n        result.__filtered__ = result.__filtered__ || isFilter;\n        return result;\n      };\n    });\n\n    // Add `LazyWrapper` methods for `_.first` and `_.last`.\n    arrayEach(['first', 'last'], function(methodName, index) {\n      var takeName = 'take' + (index ? 'Right' : '');\n\n      LazyWrapper.prototype[methodName] = function() {\n        return this[takeName](1).value()[0];\n      };\n    });\n\n    // Add `LazyWrapper` methods for `_.initial` and `_.rest`.\n    arrayEach(['initial', 'rest'], function(methodName, index) {\n      var dropName = 'drop' + (index ? '' : 'Right');\n\n      LazyWrapper.prototype[methodName] = function() {\n        return this.__filtered__ ? new LazyWrapper(this) : this[dropName](1);\n      };\n    });\n\n    // Add `LazyWrapper` methods for `_.pluck` and `_.where`.\n    arrayEach(['pluck', 'where'], function(methodName, index) {\n      var operationName = index ? 'filter' : 'map',\n          createCallback = index ? baseMatches : property;\n\n      LazyWrapper.prototype[methodName] = function(value) {\n        return this[operationName](createCallback(value));\n      };\n    });\n\n    LazyWrapper.prototype.compact = function() {\n      return this.filter(identity);\n    };\n\n    LazyWrapper.prototype.reject = function(predicate, thisArg) {\n      predicate = getCallback(predicate, thisArg, 1);\n      return this.filter(function(value) {\n        return !predicate(value);\n      });\n    };\n\n    LazyWrapper.prototype.slice = function(start, end) {\n      start = start == null ? 0 : (+start || 0);\n\n      var result = this;\n      if (result.__filtered__ && (start > 0 || end < 0)) {\n        return new LazyWrapper(result);\n      }\n      if (start < 0) {\n        result = result.takeRight(-start);\n      } else if (start) {\n        result = result.drop(start);\n      }\n      if (end !== undefined) {\n        end = (+end || 0);\n        result = end < 0 ? result.dropRight(-end) : result.take(end - start);\n      }\n      return result;\n    };\n\n    LazyWrapper.prototype.takeRightWhile = function(predicate, thisArg) {\n      return this.reverse().takeWhile(predicate, thisArg).reverse();\n    };\n\n    LazyWrapper.prototype.toArray = function() {\n      return this.take(POSITIVE_INFINITY);\n    };\n\n    // Add `LazyWrapper` methods to `lodash.prototype`.\n    baseForOwn(LazyWrapper.prototype, function(func, methodName) {\n      var checkIteratee = /^(?:filter|map|reject)|While$/.test(methodName),\n          retUnwrapped = /^(?:first|last)$/.test(methodName),\n          lodashFunc = lodash[retUnwrapped ? ('take' + (methodName == 'last' ? 'Right' : '')) : methodName];\n\n      if (!lodashFunc) {\n        return;\n      }\n      lodash.prototype[methodName] = function() {\n        var args = retUnwrapped ? [1] : arguments,\n            chainAll = this.__chain__,\n            value = this.__wrapped__,\n            isHybrid = !!this.__actions__.length,\n            isLazy = value instanceof LazyWrapper,\n            iteratee = args[0],\n            useLazy = isLazy || isArray(value);\n\n        if (useLazy && checkIteratee && typeof iteratee == 'function' && iteratee.length != 1) {\n          // Avoid lazy use if the iteratee has a \"length\" value other than `1`.\n          isLazy = useLazy = false;\n        }\n        var interceptor = function(value) {\n          return (retUnwrapped && chainAll)\n            ? lodashFunc(value, 1)[0]\n            : lodashFunc.apply(undefined, arrayPush([value], args));\n        };\n\n        var action = { 'func': thru, 'args': [interceptor], 'thisArg': undefined },\n            onlyLazy = isLazy && !isHybrid;\n\n        if (retUnwrapped && !chainAll) {\n          if (onlyLazy) {\n            value = value.clone();\n            value.__actions__.push(action);\n            return func.call(value);\n          }\n          return lodashFunc.call(undefined, this.value())[0];\n        }\n        if (!retUnwrapped && useLazy) {\n          value = onlyLazy ? value : new LazyWrapper(this);\n          var result = func.apply(value, args);\n          result.__actions__.push(action);\n          return new LodashWrapper(result, chainAll);\n        }\n        return this.thru(interceptor);\n      };\n    });\n\n    // Add `Array` and `String` methods to `lodash.prototype`.\n    arrayEach(['join', 'pop', 'push', 'replace', 'shift', 'sort', 'splice', 'split', 'unshift'], function(methodName) {\n      var func = (/^(?:replace|split)$/.test(methodName) ? stringProto : arrayProto)[methodName],\n          chainName = /^(?:push|sort|unshift)$/.test(methodName) ? 'tap' : 'thru',\n          retUnwrapped = /^(?:join|pop|replace|shift)$/.test(methodName);\n\n      lodash.prototype[methodName] = function() {\n        var args = arguments;\n        if (retUnwrapped && !this.__chain__) {\n          return func.apply(this.value(), args);\n        }\n        return this[chainName](function(value) {\n          return func.apply(value, args);\n        });\n      };\n    });\n\n    // Map minified function names to their real names.\n    baseForOwn(LazyWrapper.prototype, function(func, methodName) {\n      var lodashFunc = lodash[methodName];\n      if (lodashFunc) {\n        var key = lodashFunc.name,\n            names = realNames[key] || (realNames[key] = []);\n\n        names.push({ 'name': methodName, 'func': lodashFunc });\n      }\n    });\n\n    realNames[createHybridWrapper(undefined, BIND_KEY_FLAG).name] = [{ 'name': 'wrapper', 'func': undefined }];\n\n    // Add functions to the lazy wrapper.\n    LazyWrapper.prototype.clone = lazyClone;\n    LazyWrapper.prototype.reverse = lazyReverse;\n    LazyWrapper.prototype.value = lazyValue;\n\n    // Add chaining functions to the `lodash` wrapper.\n    lodash.prototype.chain = wrapperChain;\n    lodash.prototype.commit = wrapperCommit;\n    lodash.prototype.concat = wrapperConcat;\n    lodash.prototype.plant = wrapperPlant;\n    lodash.prototype.reverse = wrapperReverse;\n    lodash.prototype.toString = wrapperToString;\n    lodash.prototype.run = lodash.prototype.toJSON = lodash.prototype.valueOf = lodash.prototype.value = wrapperValue;\n\n    // Add function aliases to the `lodash` wrapper.\n    lodash.prototype.collect = lodash.prototype.map;\n    lodash.prototype.head = lodash.prototype.first;\n    lodash.prototype.select = lodash.prototype.filter;\n    lodash.prototype.tail = lodash.prototype.rest;\n\n    return lodash;\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  // Export lodash.\n  var _ = runInContext();\n\n  // Some AMD build optimizers like r.js check for condition patterns like the following:\n  if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {\n    // Expose lodash to the global object when an AMD loader is present to avoid\n    // errors in cases where lodash is loaded by a script tag and not intended\n    // as an AMD module. See http://requirejs.org/docs/errors.html#mismatch for\n    // more details.\n    root._ = _;\n\n    // Define as an anonymous module so, through path mapping, it can be\n    // referenced as the \"underscore\" module.\n    define(function() {\n      return _;\n    });\n  }\n  // Check for `exports` after `define` in case a build optimizer adds an `exports` object.\n  else if (freeExports && freeModule) {\n    // Export for Node.js or RingoJS.\n    if (moduleExports) {\n      (freeModule.exports = _)._ = _;\n    }\n    // Export for Rhino with CommonJS support.\n    else {\n      freeExports._ = _;\n    }\n  }\n  else {\n    // Export for a browser or Rhino.\n    root._ = _;\n  }\n}.call(this));\n","\nimport api from './APIConstructor';\n\nvar PROGRESS_BAR = ['<div class=\"row\" style=\"opacity:0.4;\">',\n    '<div class=\"hidden-xs col-sm-3 text-right\" style=\"font-weight:bold;\">Progress:&nbsp;</div>',\n    '<div class=\"col-xs-12 col-sm-7\">',\n    '<div class=\"progress\">',\n    '<div class=\"progress-bar\" style=\"width: <%= 100 * tasksMeta.number / tasksMeta.outOf %>%;\"></div>',\n    '</div>',\n    '</div>',\n    '</div>'\n].join('\\n');\n\nexport default api({\n    type: 'manager',\n    sets: ['tasks'],\n    static: {PROGRESS_BAR:PROGRESS_BAR}\n});\n","import factory from './APIConstructor';\nexport default api;\n\nvar api = factory({\n    type: 'PIP',\n    sets: ['trial', 'stimulus','media']\n});\n\napi.prototype.addTrialSets = api.prototype.addTrialSet;\napi.prototype.addStimulusSets = api.prototype.addStimulusSet;\napi.prototype.addMediaSets = api.prototype.addMediaSet;\n\napi.prototype.getLogs = function getLogs(){\n    return this.script.current.logs;\n};\n","/**\n * @license\n * lodash 3.10.1 (Custom Build) <https://lodash.com/>\n * Build: `lodash modern -d -o ./index.js`\n * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\n;(function() {\n\n  /** Used as a safe reference for `undefined` in pre-ES5 environments. */\n  var undefined;\n\n  /** Used as the semantic version number. */\n  var VERSION = '3.10.1';\n\n  /** Used to compose bitmasks for wrapper metadata. */\n  var BIND_FLAG = 1,\n      BIND_KEY_FLAG = 2,\n      CURRY_BOUND_FLAG = 4,\n      CURRY_FLAG = 8,\n      CURRY_RIGHT_FLAG = 16,\n      PARTIAL_FLAG = 32,\n      PARTIAL_RIGHT_FLAG = 64,\n      ARY_FLAG = 128,\n      REARG_FLAG = 256;\n\n  /** Used as default options for `_.trunc`. */\n  var DEFAULT_TRUNC_LENGTH = 30,\n      DEFAULT_TRUNC_OMISSION = '...';\n\n  /** Used to detect when a function becomes hot. */\n  var HOT_COUNT = 150,\n      HOT_SPAN = 16;\n\n  /** Used as the size to enable large array optimizations. */\n  var LARGE_ARRAY_SIZE = 200;\n\n  /** Used to indicate the type of lazy iteratees. */\n  var LAZY_FILTER_FLAG = 1,\n      LAZY_MAP_FLAG = 2;\n\n  /** Used as the `TypeError` message for \"Functions\" methods. */\n  var FUNC_ERROR_TEXT = 'Expected a function';\n\n  /** Used as the internal argument placeholder. */\n  var PLACEHOLDER = '__lodash_placeholder__';\n\n  /** `Object#toString` result references. */\n  var argsTag = '[object Arguments]',\n      arrayTag = '[object Array]',\n      boolTag = '[object Boolean]',\n      dateTag = '[object Date]',\n      errorTag = '[object Error]',\n      funcTag = '[object Function]',\n      mapTag = '[object Map]',\n      numberTag = '[object Number]',\n      objectTag = '[object Object]',\n      regexpTag = '[object RegExp]',\n      setTag = '[object Set]',\n      stringTag = '[object String]',\n      weakMapTag = '[object WeakMap]';\n\n  var arrayBufferTag = '[object ArrayBuffer]',\n      float32Tag = '[object Float32Array]',\n      float64Tag = '[object Float64Array]',\n      int8Tag = '[object Int8Array]',\n      int16Tag = '[object Int16Array]',\n      int32Tag = '[object Int32Array]',\n      uint8Tag = '[object Uint8Array]',\n      uint8ClampedTag = '[object Uint8ClampedArray]',\n      uint16Tag = '[object Uint16Array]',\n      uint32Tag = '[object Uint32Array]';\n\n  /** Used to match empty string literals in compiled template source. */\n  var reEmptyStringLeading = /\\b__p \\+= '';/g,\n      reEmptyStringMiddle = /\\b(__p \\+=) '' \\+/g,\n      reEmptyStringTrailing = /(__e\\(.*?\\)|\\b__t\\)) \\+\\n'';/g;\n\n  /** Used to match HTML entities and HTML characters. */\n  var reEscapedHtml = /&(?:amp|lt|gt|quot|#39|#96);/g,\n      reUnescapedHtml = /[&<>\"'`]/g,\n      reHasEscapedHtml = RegExp(reEscapedHtml.source),\n      reHasUnescapedHtml = RegExp(reUnescapedHtml.source);\n\n  /** Used to match template delimiters. */\n  var reEscape = /<%-([\\s\\S]+?)%>/g,\n      reEvaluate = /<%([\\s\\S]+?)%>/g,\n      reInterpolate = /<%=([\\s\\S]+?)%>/g;\n\n  /** Used to match property names within property paths. */\n  var reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\n\\\\]|\\\\.)*?\\1)\\]/,\n      reIsPlainProp = /^\\w*$/,\n      rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\n\\\\]|\\\\.)*?)\\2)\\]/g;\n\n  /**\n   * Used to match `RegExp` [syntax characters](http://ecma-international.org/ecma-262/6.0/#sec-patterns)\n   * and those outlined by [`EscapeRegExpPattern`](http://ecma-international.org/ecma-262/6.0/#sec-escaperegexppattern).\n   */\n  var reRegExpChars = /^[:!,]|[\\\\^$.*+?()[\\]{}|\\/]|(^[0-9a-fA-Fnrtuvx])|([\\n\\r\\u2028\\u2029])/g,\n      reHasRegExpChars = RegExp(reRegExpChars.source);\n\n  /** Used to match [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks). */\n  var reComboMark = /[\\u0300-\\u036f\\ufe20-\\ufe23]/g;\n\n  /** Used to match backslashes in property paths. */\n  var reEscapeChar = /\\\\(\\\\)?/g;\n\n  /** Used to match [ES template delimiters](http://ecma-international.org/ecma-262/6.0/#sec-template-literal-lexical-components). */\n  var reEsTemplate = /\\$\\{([^\\\\}]*(?:\\\\.[^\\\\}]*)*)\\}/g;\n\n  /** Used to match `RegExp` flags from their coerced string values. */\n  var reFlags = /\\w*$/;\n\n  /** Used to detect hexadecimal string values. */\n  var reHasHexPrefix = /^0[xX]/;\n\n  /** Used to detect host constructors (Safari > 5). */\n  var reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n  /** Used to detect unsigned integer values. */\n  var reIsUint = /^\\d+$/;\n\n  /** Used to match latin-1 supplementary letters (excluding mathematical operators). */\n  var reLatin1 = /[\\xc0-\\xd6\\xd8-\\xde\\xdf-\\xf6\\xf8-\\xff]/g;\n\n  /** Used to ensure capturing order of template delimiters. */\n  var reNoMatch = /($^)/;\n\n  /** Used to match unescaped characters in compiled string literals. */\n  var reUnescapedString = /['\\n\\r\\u2028\\u2029\\\\]/g;\n\n  /** Used to match words to create compound words. */\n  var reWords = (function() {\n    var upper = '[A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde]',\n        lower = '[a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff]+';\n\n    return RegExp(upper + '+(?=' + upper + lower + ')|' + upper + '?' + lower + '|' + upper + '+|[0-9]+', 'g');\n  }());\n\n  /** Used to assign default `context` object properties. */\n  var contextProps = [\n    'Array', 'ArrayBuffer', 'Date', 'Error', 'Float32Array', 'Float64Array',\n    'Function', 'Int8Array', 'Int16Array', 'Int32Array', 'Math', 'Number',\n    'Object', 'RegExp', 'Set', 'String', '_', 'clearTimeout', 'isFinite',\n    'parseFloat', 'parseInt', 'setTimeout', 'TypeError', 'Uint8Array',\n    'Uint8ClampedArray', 'Uint16Array', 'Uint32Array', 'WeakMap'\n  ];\n\n  /** Used to make template sourceURLs easier to identify. */\n  var templateCounter = -1;\n\n  /** Used to identify `toStringTag` values of typed arrays. */\n  var typedArrayTags = {};\n  typedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\n  typedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\n  typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\n  typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\n  typedArrayTags[uint32Tag] = true;\n  typedArrayTags[argsTag] = typedArrayTags[arrayTag] =\n  typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\n  typedArrayTags[dateTag] = typedArrayTags[errorTag] =\n  typedArrayTags[funcTag] = typedArrayTags[mapTag] =\n  typedArrayTags[numberTag] = typedArrayTags[objectTag] =\n  typedArrayTags[regexpTag] = typedArrayTags[setTag] =\n  typedArrayTags[stringTag] = typedArrayTags[weakMapTag] = false;\n\n  /** Used to identify `toStringTag` values supported by `_.clone`. */\n  var cloneableTags = {};\n  cloneableTags[argsTag] = cloneableTags[arrayTag] =\n  cloneableTags[arrayBufferTag] = cloneableTags[boolTag] =\n  cloneableTags[dateTag] = cloneableTags[float32Tag] =\n  cloneableTags[float64Tag] = cloneableTags[int8Tag] =\n  cloneableTags[int16Tag] = cloneableTags[int32Tag] =\n  cloneableTags[numberTag] = cloneableTags[objectTag] =\n  cloneableTags[regexpTag] = cloneableTags[stringTag] =\n  cloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\n  cloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\n  cloneableTags[errorTag] = cloneableTags[funcTag] =\n  cloneableTags[mapTag] = cloneableTags[setTag] =\n  cloneableTags[weakMapTag] = false;\n\n  /** Used to map latin-1 supplementary letters to basic latin letters. */\n  var deburredLetters = {\n    '\\xc0': 'A',  '\\xc1': 'A', '\\xc2': 'A', '\\xc3': 'A', '\\xc4': 'A', '\\xc5': 'A',\n    '\\xe0': 'a',  '\\xe1': 'a', '\\xe2': 'a', '\\xe3': 'a', '\\xe4': 'a', '\\xe5': 'a',\n    '\\xc7': 'C',  '\\xe7': 'c',\n    '\\xd0': 'D',  '\\xf0': 'd',\n    '\\xc8': 'E',  '\\xc9': 'E', '\\xca': 'E', '\\xcb': 'E',\n    '\\xe8': 'e',  '\\xe9': 'e', '\\xea': 'e', '\\xeb': 'e',\n    '\\xcC': 'I',  '\\xcd': 'I', '\\xce': 'I', '\\xcf': 'I',\n    '\\xeC': 'i',  '\\xed': 'i', '\\xee': 'i', '\\xef': 'i',\n    '\\xd1': 'N',  '\\xf1': 'n',\n    '\\xd2': 'O',  '\\xd3': 'O', '\\xd4': 'O', '\\xd5': 'O', '\\xd6': 'O', '\\xd8': 'O',\n    '\\xf2': 'o',  '\\xf3': 'o', '\\xf4': 'o', '\\xf5': 'o', '\\xf6': 'o', '\\xf8': 'o',\n    '\\xd9': 'U',  '\\xda': 'U', '\\xdb': 'U', '\\xdc': 'U',\n    '\\xf9': 'u',  '\\xfa': 'u', '\\xfb': 'u', '\\xfc': 'u',\n    '\\xdd': 'Y',  '\\xfd': 'y', '\\xff': 'y',\n    '\\xc6': 'Ae', '\\xe6': 'ae',\n    '\\xde': 'Th', '\\xfe': 'th',\n    '\\xdf': 'ss'\n  };\n\n  /** Used to map characters to HTML entities. */\n  var htmlEscapes = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '`': '&#96;'\n  };\n\n  /** Used to map HTML entities to characters. */\n  var htmlUnescapes = {\n    '&amp;': '&',\n    '&lt;': '<',\n    '&gt;': '>',\n    '&quot;': '\"',\n    '&#39;': \"'\",\n    '&#96;': '`'\n  };\n\n  /** Used to determine if values are of the language type `Object`. */\n  var objectTypes = {\n    'function': true,\n    'object': true\n  };\n\n  /** Used to escape characters for inclusion in compiled regexes. */\n  var regexpEscapes = {\n    '0': 'x30', '1': 'x31', '2': 'x32', '3': 'x33', '4': 'x34',\n    '5': 'x35', '6': 'x36', '7': 'x37', '8': 'x38', '9': 'x39',\n    'A': 'x41', 'B': 'x42', 'C': 'x43', 'D': 'x44', 'E': 'x45', 'F': 'x46',\n    'a': 'x61', 'b': 'x62', 'c': 'x63', 'd': 'x64', 'e': 'x65', 'f': 'x66',\n    'n': 'x6e', 'r': 'x72', 't': 'x74', 'u': 'x75', 'v': 'x76', 'x': 'x78'\n  };\n\n  /** Used to escape characters for inclusion in compiled string literals. */\n  var stringEscapes = {\n    '\\\\': '\\\\',\n    \"'\": \"'\",\n    '\\n': 'n',\n    '\\r': 'r',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n  };\n\n  /** Detect free variable `exports`. */\n  var freeExports = objectTypes[typeof exports] && exports && !exports.nodeType && exports;\n\n  /** Detect free variable `module`. */\n  var freeModule = objectTypes[typeof module] && module && !module.nodeType && module;\n\n  /** Detect free variable `global` from Node.js. */\n  var freeGlobal = freeExports && freeModule && typeof global == 'object' && global && global.Object && global;\n\n  /** Detect free variable `self`. */\n  var freeSelf = objectTypes[typeof self] && self && self.Object && self;\n\n  /** Detect free variable `window`. */\n  var freeWindow = objectTypes[typeof window] && window && window.Object && window;\n\n  /** Detect the popular CommonJS extension `module.exports`. */\n  var moduleExports = freeModule && freeModule.exports === freeExports && freeExports;\n\n  /**\n   * Used as a reference to the global object.\n   *\n   * The `this` value is used if it's the global object to avoid Greasemonkey's\n   * restricted `window` object, otherwise the `window` object is used.\n   */\n  var root = freeGlobal || ((freeWindow !== (this && this.window)) && freeWindow) || freeSelf || this;\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * The base implementation of `compareAscending` which compares values and\n   * sorts them in ascending order without guaranteeing a stable sort.\n   *\n   * @private\n   * @param {*} value The value to compare.\n   * @param {*} other The other value to compare.\n   * @returns {number} Returns the sort order indicator for `value`.\n   */\n  function baseCompareAscending(value, other) {\n    if (value !== other) {\n      var valIsNull = value === null,\n          valIsUndef = value === undefined,\n          valIsReflexive = value === value;\n\n      var othIsNull = other === null,\n          othIsUndef = other === undefined,\n          othIsReflexive = other === other;\n\n      if ((value > other && !othIsNull) || !valIsReflexive ||\n          (valIsNull && !othIsUndef && othIsReflexive) ||\n          (valIsUndef && othIsReflexive)) {\n        return 1;\n      }\n      if ((value < other && !valIsNull) || !othIsReflexive ||\n          (othIsNull && !valIsUndef && valIsReflexive) ||\n          (othIsUndef && valIsReflexive)) {\n        return -1;\n      }\n    }\n    return 0;\n  }\n\n  /**\n   * The base implementation of `_.findIndex` and `_.findLastIndex` without\n   * support for callback shorthands and `this` binding.\n   *\n   * @private\n   * @param {Array} array The array to search.\n   * @param {Function} predicate The function invoked per iteration.\n   * @param {boolean} [fromRight] Specify iterating from right to left.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function baseFindIndex(array, predicate, fromRight) {\n    var length = array.length,\n        index = fromRight ? length : -1;\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (predicate(array[index], index, array)) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * The base implementation of `_.indexOf` without support for binary searches.\n   *\n   * @private\n   * @param {Array} array The array to search.\n   * @param {*} value The value to search for.\n   * @param {number} fromIndex The index to search from.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function baseIndexOf(array, value, fromIndex) {\n    if (value !== value) {\n      return indexOfNaN(array, fromIndex);\n    }\n    var index = fromIndex - 1,\n        length = array.length;\n\n    while (++index < length) {\n      if (array[index] === value) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * The base implementation of `_.isFunction` without support for environments\n   * with incorrect `typeof` results.\n   *\n   * @private\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n   */\n  function baseIsFunction(value) {\n    // Avoid a Chakra JIT bug in compatibility modes of IE 11.\n    // See https://github.com/jashkenas/underscore/issues/1621 for more details.\n    return typeof value == 'function' || false;\n  }\n\n  /**\n   * Converts `value` to a string if it's not one. An empty string is returned\n   * for `null` or `undefined` values.\n   *\n   * @private\n   * @param {*} value The value to process.\n   * @returns {string} Returns the string.\n   */\n  function baseToString(value) {\n    return value == null ? '' : (value + '');\n  }\n\n  /**\n   * Used by `_.trim` and `_.trimLeft` to get the index of the first character\n   * of `string` that is not found in `chars`.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @param {string} chars The characters to find.\n   * @returns {number} Returns the index of the first character not found in `chars`.\n   */\n  function charsLeftIndex(string, chars) {\n    var index = -1,\n        length = string.length;\n\n    while (++index < length && chars.indexOf(string.charAt(index)) > -1) {}\n    return index;\n  }\n\n  /**\n   * Used by `_.trim` and `_.trimRight` to get the index of the last character\n   * of `string` that is not found in `chars`.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @param {string} chars The characters to find.\n   * @returns {number} Returns the index of the last character not found in `chars`.\n   */\n  function charsRightIndex(string, chars) {\n    var index = string.length;\n\n    while (index-- && chars.indexOf(string.charAt(index)) > -1) {}\n    return index;\n  }\n\n  /**\n   * Used by `_.sortBy` to compare transformed elements of a collection and stable\n   * sort them in ascending order.\n   *\n   * @private\n   * @param {Object} object The object to compare.\n   * @param {Object} other The other object to compare.\n   * @returns {number} Returns the sort order indicator for `object`.\n   */\n  function compareAscending(object, other) {\n    return baseCompareAscending(object.criteria, other.criteria) || (object.index - other.index);\n  }\n\n  /**\n   * Used by `_.sortByOrder` to compare multiple properties of a value to another\n   * and stable sort them.\n   *\n   * If `orders` is unspecified, all valuess are sorted in ascending order. Otherwise,\n   * a value is sorted in ascending order if its corresponding order is \"asc\", and\n   * descending if \"desc\".\n   *\n   * @private\n   * @param {Object} object The object to compare.\n   * @param {Object} other The other object to compare.\n   * @param {boolean[]} orders The order to sort by for each property.\n   * @returns {number} Returns the sort order indicator for `object`.\n   */\n  function compareMultiple(object, other, orders) {\n    var index = -1,\n        objCriteria = object.criteria,\n        othCriteria = other.criteria,\n        length = objCriteria.length,\n        ordersLength = orders.length;\n\n    while (++index < length) {\n      var result = baseCompareAscending(objCriteria[index], othCriteria[index]);\n      if (result) {\n        if (index >= ordersLength) {\n          return result;\n        }\n        var order = orders[index];\n        return result * ((order === 'asc' || order === true) ? 1 : -1);\n      }\n    }\n    // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications\n    // that causes it, under certain circumstances, to provide the same value for\n    // `object` and `other`. See https://github.com/jashkenas/underscore/pull/1247\n    // for more details.\n    //\n    // This also ensures a stable sort in V8 and other engines.\n    // See https://code.google.com/p/v8/issues/detail?id=90 for more details.\n    return object.index - other.index;\n  }\n\n  /**\n   * Used by `_.deburr` to convert latin-1 supplementary letters to basic latin letters.\n   *\n   * @private\n   * @param {string} letter The matched letter to deburr.\n   * @returns {string} Returns the deburred letter.\n   */\n  function deburrLetter(letter) {\n    return deburredLetters[letter];\n  }\n\n  /**\n   * Used by `_.escape` to convert characters to HTML entities.\n   *\n   * @private\n   * @param {string} chr The matched character to escape.\n   * @returns {string} Returns the escaped character.\n   */\n  function escapeHtmlChar(chr) {\n    return htmlEscapes[chr];\n  }\n\n  /**\n   * Used by `_.escapeRegExp` to escape characters for inclusion in compiled regexes.\n   *\n   * @private\n   * @param {string} chr The matched character to escape.\n   * @param {string} leadingChar The capture group for a leading character.\n   * @param {string} whitespaceChar The capture group for a whitespace character.\n   * @returns {string} Returns the escaped character.\n   */\n  function escapeRegExpChar(chr, leadingChar, whitespaceChar) {\n    if (leadingChar) {\n      chr = regexpEscapes[chr];\n    } else if (whitespaceChar) {\n      chr = stringEscapes[chr];\n    }\n    return '\\\\' + chr;\n  }\n\n  /**\n   * Used by `_.template` to escape characters for inclusion in compiled string literals.\n   *\n   * @private\n   * @param {string} chr The matched character to escape.\n   * @returns {string} Returns the escaped character.\n   */\n  function escapeStringChar(chr) {\n    return '\\\\' + stringEscapes[chr];\n  }\n\n  /**\n   * Gets the index at which the first occurrence of `NaN` is found in `array`.\n   *\n   * @private\n   * @param {Array} array The array to search.\n   * @param {number} fromIndex The index to search from.\n   * @param {boolean} [fromRight] Specify iterating from right to left.\n   * @returns {number} Returns the index of the matched `NaN`, else `-1`.\n   */\n  function indexOfNaN(array, fromIndex, fromRight) {\n    var length = array.length,\n        index = fromIndex + (fromRight ? 0 : -1);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      var other = array[index];\n      if (other !== other) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * Checks if `value` is object-like.\n   *\n   * @private\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n   */\n  function isObjectLike(value) {\n    return !!value && typeof value == 'object';\n  }\n\n  /**\n   * Used by `trimmedLeftIndex` and `trimmedRightIndex` to determine if a\n   * character code is whitespace.\n   *\n   * @private\n   * @param {number} charCode The character code to inspect.\n   * @returns {boolean} Returns `true` if `charCode` is whitespace, else `false`.\n   */\n  function isSpace(charCode) {\n    return ((charCode <= 160 && (charCode >= 9 && charCode <= 13) || charCode == 32 || charCode == 160) || charCode == 5760 || charCode == 6158 ||\n      (charCode >= 8192 && (charCode <= 8202 || charCode == 8232 || charCode == 8233 || charCode == 8239 || charCode == 8287 || charCode == 12288 || charCode == 65279)));\n  }\n\n  /**\n   * Replaces all `placeholder` elements in `array` with an internal placeholder\n   * and returns an array of their indexes.\n   *\n   * @private\n   * @param {Array} array The array to modify.\n   * @param {*} placeholder The placeholder to replace.\n   * @returns {Array} Returns the new array of placeholder indexes.\n   */\n  function replaceHolders(array, placeholder) {\n    var index = -1,\n        length = array.length,\n        resIndex = -1,\n        result = [];\n\n    while (++index < length) {\n      if (array[index] === placeholder) {\n        array[index] = PLACEHOLDER;\n        result[++resIndex] = index;\n      }\n    }\n    return result;\n  }\n\n  /**\n   * An implementation of `_.uniq` optimized for sorted arrays without support\n   * for callback shorthands and `this` binding.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {Function} [iteratee] The function invoked per iteration.\n   * @returns {Array} Returns the new duplicate-value-free array.\n   */\n  function sortedUniq(array, iteratee) {\n    var seen,\n        index = -1,\n        length = array.length,\n        resIndex = -1,\n        result = [];\n\n    while (++index < length) {\n      var value = array[index],\n          computed = iteratee ? iteratee(value, index, array) : value;\n\n      if (!index || seen !== computed) {\n        seen = computed;\n        result[++resIndex] = value;\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Used by `_.trim` and `_.trimLeft` to get the index of the first non-whitespace\n   * character of `string`.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @returns {number} Returns the index of the first non-whitespace character.\n   */\n  function trimmedLeftIndex(string) {\n    var index = -1,\n        length = string.length;\n\n    while (++index < length && isSpace(string.charCodeAt(index))) {}\n    return index;\n  }\n\n  /**\n   * Used by `_.trim` and `_.trimRight` to get the index of the last non-whitespace\n   * character of `string`.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @returns {number} Returns the index of the last non-whitespace character.\n   */\n  function trimmedRightIndex(string) {\n    var index = string.length;\n\n    while (index-- && isSpace(string.charCodeAt(index))) {}\n    return index;\n  }\n\n  /**\n   * Used by `_.unescape` to convert HTML entities to characters.\n   *\n   * @private\n   * @param {string} chr The matched character to unescape.\n   * @returns {string} Returns the unescaped character.\n   */\n  function unescapeHtmlChar(chr) {\n    return htmlUnescapes[chr];\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Create a new pristine `lodash` function using the given `context` object.\n   *\n   * @static\n   * @memberOf _\n   * @category Utility\n   * @param {Object} [context=root] The context object.\n   * @returns {Function} Returns a new `lodash` function.\n   * @example\n   *\n   * _.mixin({ 'foo': _.constant('foo') });\n   *\n   * var lodash = _.runInContext();\n   * lodash.mixin({ 'bar': lodash.constant('bar') });\n   *\n   * _.isFunction(_.foo);\n   * // => true\n   * _.isFunction(_.bar);\n   * // => false\n   *\n   * lodash.isFunction(lodash.foo);\n   * // => false\n   * lodash.isFunction(lodash.bar);\n   * // => true\n   *\n   * // using `context` to mock `Date#getTime` use in `_.now`\n   * var mock = _.runInContext({\n   *   'Date': function() {\n   *     return { 'getTime': getTimeMock };\n   *   }\n   * });\n   *\n   * // or creating a suped-up `defer` in Node.js\n   * var defer = _.runInContext({ 'setTimeout': setImmediate }).defer;\n   */\n  function runInContext(context) {\n    // Avoid issues with some ES3 environments that attempt to use values, named\n    // after built-in constructors like `Object`, for the creation of literals.\n    // ES5 clears this up by stating that literals must use built-in constructors.\n    // See https://es5.github.io/#x11.1.5 for more details.\n    context = context ? _.defaults(root.Object(), context, _.pick(root, contextProps)) : root;\n\n    /** Native constructor references. */\n    var Array = context.Array,\n        Date = context.Date,\n        Error = context.Error,\n        Function = context.Function,\n        Math = context.Math,\n        Number = context.Number,\n        Object = context.Object,\n        RegExp = context.RegExp,\n        String = context.String,\n        TypeError = context.TypeError;\n\n    /** Used for native method references. */\n    var arrayProto = Array.prototype,\n        objectProto = Object.prototype,\n        stringProto = String.prototype;\n\n    /** Used to resolve the decompiled source of functions. */\n    var fnToString = Function.prototype.toString;\n\n    /** Used to check objects for own properties. */\n    var hasOwnProperty = objectProto.hasOwnProperty;\n\n    /** Used to generate unique IDs. */\n    var idCounter = 0;\n\n    /**\n     * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n     * of values.\n     */\n    var objToString = objectProto.toString;\n\n    /** Used to restore the original `_` reference in `_.noConflict`. */\n    var oldDash = root._;\n\n    /** Used to detect if a method is native. */\n    var reIsNative = RegExp('^' +\n      fnToString.call(hasOwnProperty).replace(/[\\\\^$.*+?()[\\]{}|]/g, '\\\\$&')\n      .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n    );\n\n    /** Native method references. */\n    var ArrayBuffer = context.ArrayBuffer,\n        clearTimeout = context.clearTimeout,\n        parseFloat = context.parseFloat,\n        pow = Math.pow,\n        propertyIsEnumerable = objectProto.propertyIsEnumerable,\n        Set = getNative(context, 'Set'),\n        setTimeout = context.setTimeout,\n        splice = arrayProto.splice,\n        Uint8Array = context.Uint8Array,\n        WeakMap = getNative(context, 'WeakMap');\n\n    /* Native method references for those with the same name as other `lodash` methods. */\n    var nativeCeil = Math.ceil,\n        nativeCreate = getNative(Object, 'create'),\n        nativeFloor = Math.floor,\n        nativeIsArray = getNative(Array, 'isArray'),\n        nativeIsFinite = context.isFinite,\n        nativeKeys = getNative(Object, 'keys'),\n        nativeMax = Math.max,\n        nativeMin = Math.min,\n        nativeNow = getNative(Date, 'now'),\n        nativeParseInt = context.parseInt,\n        nativeRandom = Math.random;\n\n    /** Used as references for `-Infinity` and `Infinity`. */\n    var NEGATIVE_INFINITY = Number.NEGATIVE_INFINITY,\n        POSITIVE_INFINITY = Number.POSITIVE_INFINITY;\n\n    /** Used as references for the maximum length and index of an array. */\n    var MAX_ARRAY_LENGTH = 4294967295,\n        MAX_ARRAY_INDEX = MAX_ARRAY_LENGTH - 1,\n        HALF_MAX_ARRAY_LENGTH = MAX_ARRAY_LENGTH >>> 1;\n\n    /**\n     * Used as the [maximum length](http://ecma-international.org/ecma-262/6.0/#sec-number.max_safe_integer)\n     * of an array-like value.\n     */\n    var MAX_SAFE_INTEGER = 9007199254740991;\n\n    /** Used to store function metadata. */\n    var metaMap = WeakMap && new WeakMap;\n\n    /** Used to lookup unminified function names. */\n    var realNames = {};\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a `lodash` object which wraps `value` to enable implicit chaining.\n     * Methods that operate on and return arrays, collections, and functions can\n     * be chained together. Methods that retrieve a single value or may return a\n     * primitive value will automatically end the chain returning the unwrapped\n     * value. Explicit chaining may be enabled using `_.chain`. The execution of\n     * chained methods is lazy, that is, execution is deferred until `_#value`\n     * is implicitly or explicitly called.\n     *\n     * Lazy evaluation allows several methods to support shortcut fusion. Shortcut\n     * fusion is an optimization strategy which merge iteratee calls; this can help\n     * to avoid the creation of intermediate data structures and greatly reduce the\n     * number of iteratee executions.\n     *\n     * Chaining is supported in custom builds as long as the `_#value` method is\n     * directly or indirectly included in the build.\n     *\n     * In addition to lodash methods, wrappers have `Array` and `String` methods.\n     *\n     * The wrapper `Array` methods are:\n     * `concat`, `join`, `pop`, `push`, `reverse`, `shift`, `slice`, `sort`,\n     * `splice`, and `unshift`\n     *\n     * The wrapper `String` methods are:\n     * `replace` and `split`\n     *\n     * The wrapper methods that support shortcut fusion are:\n     * `compact`, `drop`, `dropRight`, `dropRightWhile`, `dropWhile`, `filter`,\n     * `first`, `initial`, `last`, `map`, `pluck`, `reject`, `rest`, `reverse`,\n     * `slice`, `take`, `takeRight`, `takeRightWhile`, `takeWhile`, `toArray`,\n     * and `where`\n     *\n     * The chainable wrapper methods are:\n     * `after`, `ary`, `assign`, `at`, `before`, `bind`, `bindAll`, `bindKey`,\n     * `callback`, `chain`, `chunk`, `commit`, `compact`, `concat`, `constant`,\n     * `countBy`, `create`, `curry`, `debounce`, `defaults`, `defaultsDeep`,\n     * `defer`, `delay`, `difference`, `drop`, `dropRight`, `dropRightWhile`,\n     * `dropWhile`, `fill`, `filter`, `flatten`, `flattenDeep`, `flow`, `flowRight`,\n     * `forEach`, `forEachRight`, `forIn`, `forInRight`, `forOwn`, `forOwnRight`,\n     * `functions`, `groupBy`, `indexBy`, `initial`, `intersection`, `invert`,\n     * `invoke`, `keys`, `keysIn`, `map`, `mapKeys`, `mapValues`, `matches`,\n     * `matchesProperty`, `memoize`, `merge`, `method`, `methodOf`, `mixin`,\n     * `modArgs`, `negate`, `omit`, `once`, `pairs`, `partial`, `partialRight`,\n     * `partition`, `pick`, `plant`, `pluck`, `property`, `propertyOf`, `pull`,\n     * `pullAt`, `push`, `range`, `rearg`, `reject`, `remove`, `rest`, `restParam`,\n     * `reverse`, `set`, `shuffle`, `slice`, `sort`, `sortBy`, `sortByAll`,\n     * `sortByOrder`, `splice`, `spread`, `take`, `takeRight`, `takeRightWhile`,\n     * `takeWhile`, `tap`, `throttle`, `thru`, `times`, `toArray`, `toPlainObject`,\n     * `transform`, `union`, `uniq`, `unshift`, `unzip`, `unzipWith`, `values`,\n     * `valuesIn`, `where`, `without`, `wrap`, `xor`, `zip`, `zipObject`, `zipWith`\n     *\n     * The wrapper methods that are **not** chainable by default are:\n     * `add`, `attempt`, `camelCase`, `capitalize`, `ceil`, `clone`, `cloneDeep`,\n     * `deburr`, `endsWith`, `escape`, `escapeRegExp`, `every`, `find`, `findIndex`,\n     * `findKey`, `findLast`, `findLastIndex`, `findLastKey`, `findWhere`, `first`,\n     * `floor`, `get`, `gt`, `gte`, `has`, `identity`, `includes`, `indexOf`,\n     * `inRange`, `isArguments`, `isArray`, `isBoolean`, `isDate`, `isElement`,\n     * `isEmpty`, `isEqual`, `isError`, `isFinite` `isFunction`, `isMatch`,\n     * `isNative`, `isNaN`, `isNull`, `isNumber`, `isObject`, `isPlainObject`,\n     * `isRegExp`, `isString`, `isUndefined`, `isTypedArray`, `join`, `kebabCase`,\n     * `last`, `lastIndexOf`, `lt`, `lte`, `max`, `min`, `noConflict`, `noop`,\n     * `now`, `pad`, `padLeft`, `padRight`, `parseInt`, `pop`, `random`, `reduce`,\n     * `reduceRight`, `repeat`, `result`, `round`, `runInContext`, `shift`, `size`,\n     * `snakeCase`, `some`, `sortedIndex`, `sortedLastIndex`, `startCase`,\n     * `startsWith`, `sum`, `template`, `trim`, `trimLeft`, `trimRight`, `trunc`,\n     * `unescape`, `uniqueId`, `value`, and `words`\n     *\n     * The wrapper method `sample` will return a wrapped value when `n` is provided,\n     * otherwise an unwrapped value is returned.\n     *\n     * @name _\n     * @constructor\n     * @category Chain\n     * @param {*} value The value to wrap in a `lodash` instance.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var wrapped = _([1, 2, 3]);\n     *\n     * // returns an unwrapped value\n     * wrapped.reduce(function(total, n) {\n     *   return total + n;\n     * });\n     * // => 6\n     *\n     * // returns a wrapped value\n     * var squares = wrapped.map(function(n) {\n     *   return n * n;\n     * });\n     *\n     * _.isArray(squares);\n     * // => false\n     *\n     * _.isArray(squares.value());\n     * // => true\n     */\n    function lodash(value) {\n      if (isObjectLike(value) && !isArray(value) && !(value instanceof LazyWrapper)) {\n        if (value instanceof LodashWrapper) {\n          return value;\n        }\n        if (hasOwnProperty.call(value, '__chain__') && hasOwnProperty.call(value, '__wrapped__')) {\n          return wrapperClone(value);\n        }\n      }\n      return new LodashWrapper(value);\n    }\n\n    /**\n     * The function whose prototype all chaining wrappers inherit from.\n     *\n     * @private\n     */\n    function baseLodash() {\n      // No operation performed.\n    }\n\n    /**\n     * The base constructor for creating `lodash` wrapper objects.\n     *\n     * @private\n     * @param {*} value The value to wrap.\n     * @param {boolean} [chainAll] Enable chaining for all wrapper methods.\n     * @param {Array} [actions=[]] Actions to peform to resolve the unwrapped value.\n     */\n    function LodashWrapper(value, chainAll, actions) {\n      this.__wrapped__ = value;\n      this.__actions__ = actions || [];\n      this.__chain__ = !!chainAll;\n    }\n\n    /**\n     * An object environment feature flags.\n     *\n     * @static\n     * @memberOf _\n     * @type Object\n     */\n    var support = lodash.support = {};\n\n    /**\n     * By default, the template delimiters used by lodash are like those in\n     * embedded Ruby (ERB). Change the following template settings to use\n     * alternative delimiters.\n     *\n     * @static\n     * @memberOf _\n     * @type Object\n     */\n    lodash.templateSettings = {\n\n      /**\n       * Used to detect `data` property values to be HTML-escaped.\n       *\n       * @memberOf _.templateSettings\n       * @type RegExp\n       */\n      'escape': reEscape,\n\n      /**\n       * Used to detect code to be evaluated.\n       *\n       * @memberOf _.templateSettings\n       * @type RegExp\n       */\n      'evaluate': reEvaluate,\n\n      /**\n       * Used to detect `data` property values to inject.\n       *\n       * @memberOf _.templateSettings\n       * @type RegExp\n       */\n      'interpolate': reInterpolate,\n\n      /**\n       * Used to reference the data object in the template text.\n       *\n       * @memberOf _.templateSettings\n       * @type string\n       */\n      'variable': '',\n\n      /**\n       * Used to import variables into the compiled template.\n       *\n       * @memberOf _.templateSettings\n       * @type Object\n       */\n      'imports': {\n\n        /**\n         * A reference to the `lodash` function.\n         *\n         * @memberOf _.templateSettings.imports\n         * @type Function\n         */\n        '_': lodash\n      }\n    };\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a lazy wrapper object which wraps `value` to enable lazy evaluation.\n     *\n     * @private\n     * @param {*} value The value to wrap.\n     */\n    function LazyWrapper(value) {\n      this.__wrapped__ = value;\n      this.__actions__ = [];\n      this.__dir__ = 1;\n      this.__filtered__ = false;\n      this.__iteratees__ = [];\n      this.__takeCount__ = POSITIVE_INFINITY;\n      this.__views__ = [];\n    }\n\n    /**\n     * Creates a clone of the lazy wrapper object.\n     *\n     * @private\n     * @name clone\n     * @memberOf LazyWrapper\n     * @returns {Object} Returns the cloned `LazyWrapper` object.\n     */\n    function lazyClone() {\n      var result = new LazyWrapper(this.__wrapped__);\n      result.__actions__ = arrayCopy(this.__actions__);\n      result.__dir__ = this.__dir__;\n      result.__filtered__ = this.__filtered__;\n      result.__iteratees__ = arrayCopy(this.__iteratees__);\n      result.__takeCount__ = this.__takeCount__;\n      result.__views__ = arrayCopy(this.__views__);\n      return result;\n    }\n\n    /**\n     * Reverses the direction of lazy iteration.\n     *\n     * @private\n     * @name reverse\n     * @memberOf LazyWrapper\n     * @returns {Object} Returns the new reversed `LazyWrapper` object.\n     */\n    function lazyReverse() {\n      if (this.__filtered__) {\n        var result = new LazyWrapper(this);\n        result.__dir__ = -1;\n        result.__filtered__ = true;\n      } else {\n        result = this.clone();\n        result.__dir__ *= -1;\n      }\n      return result;\n    }\n\n    /**\n     * Extracts the unwrapped value from its lazy wrapper.\n     *\n     * @private\n     * @name value\n     * @memberOf LazyWrapper\n     * @returns {*} Returns the unwrapped value.\n     */\n    function lazyValue() {\n      var array = this.__wrapped__.value(),\n          dir = this.__dir__,\n          isArr = isArray(array),\n          isRight = dir < 0,\n          arrLength = isArr ? array.length : 0,\n          view = getView(0, arrLength, this.__views__),\n          start = view.start,\n          end = view.end,\n          length = end - start,\n          index = isRight ? end : (start - 1),\n          iteratees = this.__iteratees__,\n          iterLength = iteratees.length,\n          resIndex = 0,\n          takeCount = nativeMin(length, this.__takeCount__);\n\n      if (!isArr || arrLength < LARGE_ARRAY_SIZE || (arrLength == length && takeCount == length)) {\n        return baseWrapperValue((isRight && isArr) ? array.reverse() : array, this.__actions__);\n      }\n      var result = [];\n\n      outer:\n      while (length-- && resIndex < takeCount) {\n        index += dir;\n\n        var iterIndex = -1,\n            value = array[index];\n\n        while (++iterIndex < iterLength) {\n          var data = iteratees[iterIndex],\n              iteratee = data.iteratee,\n              type = data.type,\n              computed = iteratee(value);\n\n          if (type == LAZY_MAP_FLAG) {\n            value = computed;\n          } else if (!computed) {\n            if (type == LAZY_FILTER_FLAG) {\n              continue outer;\n            } else {\n              break outer;\n            }\n          }\n        }\n        result[resIndex++] = value;\n      }\n      return result;\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a cache object to store key/value pairs.\n     *\n     * @private\n     * @static\n     * @name Cache\n     * @memberOf _.memoize\n     */\n    function MapCache() {\n      this.__data__ = {};\n    }\n\n    /**\n     * Removes `key` and its value from the cache.\n     *\n     * @private\n     * @name delete\n     * @memberOf _.memoize.Cache\n     * @param {string} key The key of the value to remove.\n     * @returns {boolean} Returns `true` if the entry was removed successfully, else `false`.\n     */\n    function mapDelete(key) {\n      return this.has(key) && delete this.__data__[key];\n    }\n\n    /**\n     * Gets the cached value for `key`.\n     *\n     * @private\n     * @name get\n     * @memberOf _.memoize.Cache\n     * @param {string} key The key of the value to get.\n     * @returns {*} Returns the cached value.\n     */\n    function mapGet(key) {\n      return key == '__proto__' ? undefined : this.__data__[key];\n    }\n\n    /**\n     * Checks if a cached value for `key` exists.\n     *\n     * @private\n     * @name has\n     * @memberOf _.memoize.Cache\n     * @param {string} key The key of the entry to check.\n     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n     */\n    function mapHas(key) {\n      return key != '__proto__' && hasOwnProperty.call(this.__data__, key);\n    }\n\n    /**\n     * Sets `value` to `key` of the cache.\n     *\n     * @private\n     * @name set\n     * @memberOf _.memoize.Cache\n     * @param {string} key The key of the value to cache.\n     * @param {*} value The value to cache.\n     * @returns {Object} Returns the cache object.\n     */\n    function mapSet(key, value) {\n      if (key != '__proto__') {\n        this.__data__[key] = value;\n      }\n      return this;\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     *\n     * Creates a cache object to store unique values.\n     *\n     * @private\n     * @param {Array} [values] The values to cache.\n     */\n    function SetCache(values) {\n      var length = values ? values.length : 0;\n\n      this.data = { 'hash': nativeCreate(null), 'set': new Set };\n      while (length--) {\n        this.push(values[length]);\n      }\n    }\n\n    /**\n     * Checks if `value` is in `cache` mimicking the return signature of\n     * `_.indexOf` by returning `0` if the value is found, else `-1`.\n     *\n     * @private\n     * @param {Object} cache The cache to search.\n     * @param {*} value The value to search for.\n     * @returns {number} Returns `0` if `value` is found, else `-1`.\n     */\n    function cacheIndexOf(cache, value) {\n      var data = cache.data,\n          result = (typeof value == 'string' || isObject(value)) ? data.set.has(value) : data.hash[value];\n\n      return result ? 0 : -1;\n    }\n\n    /**\n     * Adds `value` to the cache.\n     *\n     * @private\n     * @name push\n     * @memberOf SetCache\n     * @param {*} value The value to cache.\n     */\n    function cachePush(value) {\n      var data = this.data;\n      if (typeof value == 'string' || isObject(value)) {\n        data.set.add(value);\n      } else {\n        data.hash[value] = true;\n      }\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a new array joining `array` with `other`.\n     *\n     * @private\n     * @param {Array} array The array to join.\n     * @param {Array} other The other array to join.\n     * @returns {Array} Returns the new concatenated array.\n     */\n    function arrayConcat(array, other) {\n      var index = -1,\n          length = array.length,\n          othIndex = -1,\n          othLength = other.length,\n          result = Array(length + othLength);\n\n      while (++index < length) {\n        result[index] = array[index];\n      }\n      while (++othIndex < othLength) {\n        result[index++] = other[othIndex];\n      }\n      return result;\n    }\n\n    /**\n     * Copies the values of `source` to `array`.\n     *\n     * @private\n     * @param {Array} source The array to copy values from.\n     * @param {Array} [array=[]] The array to copy values to.\n     * @returns {Array} Returns `array`.\n     */\n    function arrayCopy(source, array) {\n      var index = -1,\n          length = source.length;\n\n      array || (array = Array(length));\n      while (++index < length) {\n        array[index] = source[index];\n      }\n      return array;\n    }\n\n    /**\n     * A specialized version of `_.forEach` for arrays without support for callback\n     * shorthands and `this` binding.\n     *\n     * @private\n     * @param {Array} array The array to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array} Returns `array`.\n     */\n    function arrayEach(array, iteratee) {\n      var index = -1,\n          length = array.length;\n\n      while (++index < length) {\n        if (iteratee(array[index], index, array) === false) {\n          break;\n        }\n      }\n      return array;\n    }\n\n    /**\n     * A specialized version of `_.forEachRight` for arrays without support for\n     * callback shorthands and `this` binding.\n     *\n     * @private\n     * @param {Array} array The array to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array} Returns `array`.\n     */\n    function arrayEachRight(array, iteratee) {\n      var length = array.length;\n\n      while (length--) {\n        if (iteratee(array[length], length, array) === false) {\n          break;\n        }\n      }\n      return array;\n    }\n\n    /**\n     * A specialized version of `_.every` for arrays without support for callback\n     * shorthands and `this` binding.\n     *\n     * @private\n     * @param {Array} array The array to iterate over.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {boolean} Returns `true` if all elements pass the predicate check,\n     *  else `false`.\n     */\n    function arrayEvery(array, predicate) {\n      var index = -1,\n          length = array.length;\n\n      while (++index < length) {\n        if (!predicate(array[index], index, array)) {\n          return false;\n        }\n      }\n      return true;\n    }\n\n    /**\n     * A specialized version of `baseExtremum` for arrays which invokes `iteratee`\n     * with one argument: (value).\n     *\n     * @private\n     * @param {Array} array The array to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @param {Function} comparator The function used to compare values.\n     * @param {*} exValue The initial extremum value.\n     * @returns {*} Returns the extremum value.\n     */\n    function arrayExtremum(array, iteratee, comparator, exValue) {\n      var index = -1,\n          length = array.length,\n          computed = exValue,\n          result = computed;\n\n      while (++index < length) {\n        var value = array[index],\n            current = +iteratee(value);\n\n        if (comparator(current, computed)) {\n          computed = current;\n          result = value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * A specialized version of `_.filter` for arrays without support for callback\n     * shorthands and `this` binding.\n     *\n     * @private\n     * @param {Array} array The array to iterate over.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {Array} Returns the new filtered array.\n     */\n    function arrayFilter(array, predicate) {\n      var index = -1,\n          length = array.length,\n          resIndex = -1,\n          result = [];\n\n      while (++index < length) {\n        var value = array[index];\n        if (predicate(value, index, array)) {\n          result[++resIndex] = value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * A specialized version of `_.map` for arrays without support for callback\n     * shorthands and `this` binding.\n     *\n     * @private\n     * @param {Array} array The array to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array} Returns the new mapped array.\n     */\n    function arrayMap(array, iteratee) {\n      var index = -1,\n          length = array.length,\n          result = Array(length);\n\n      while (++index < length) {\n        result[index] = iteratee(array[index], index, array);\n      }\n      return result;\n    }\n\n    /**\n     * Appends the elements of `values` to `array`.\n     *\n     * @private\n     * @param {Array} array The array to modify.\n     * @param {Array} values The values to append.\n     * @returns {Array} Returns `array`.\n     */\n    function arrayPush(array, values) {\n      var index = -1,\n          length = values.length,\n          offset = array.length;\n\n      while (++index < length) {\n        array[offset + index] = values[index];\n      }\n      return array;\n    }\n\n    /**\n     * A specialized version of `_.reduce` for arrays without support for callback\n     * shorthands and `this` binding.\n     *\n     * @private\n     * @param {Array} array The array to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @param {*} [accumulator] The initial value.\n     * @param {boolean} [initFromArray] Specify using the first element of `array`\n     *  as the initial value.\n     * @returns {*} Returns the accumulated value.\n     */\n    function arrayReduce(array, iteratee, accumulator, initFromArray) {\n      var index = -1,\n          length = array.length;\n\n      if (initFromArray && length) {\n        accumulator = array[++index];\n      }\n      while (++index < length) {\n        accumulator = iteratee(accumulator, array[index], index, array);\n      }\n      return accumulator;\n    }\n\n    /**\n     * A specialized version of `_.reduceRight` for arrays without support for\n     * callback shorthands and `this` binding.\n     *\n     * @private\n     * @param {Array} array The array to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @param {*} [accumulator] The initial value.\n     * @param {boolean} [initFromArray] Specify using the last element of `array`\n     *  as the initial value.\n     * @returns {*} Returns the accumulated value.\n     */\n    function arrayReduceRight(array, iteratee, accumulator, initFromArray) {\n      var length = array.length;\n      if (initFromArray && length) {\n        accumulator = array[--length];\n      }\n      while (length--) {\n        accumulator = iteratee(accumulator, array[length], length, array);\n      }\n      return accumulator;\n    }\n\n    /**\n     * A specialized version of `_.some` for arrays without support for callback\n     * shorthands and `this` binding.\n     *\n     * @private\n     * @param {Array} array The array to iterate over.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {boolean} Returns `true` if any element passes the predicate check,\n     *  else `false`.\n     */\n    function arraySome(array, predicate) {\n      var index = -1,\n          length = array.length;\n\n      while (++index < length) {\n        if (predicate(array[index], index, array)) {\n          return true;\n        }\n      }\n      return false;\n    }\n\n    /**\n     * A specialized version of `_.sum` for arrays without support for callback\n     * shorthands and `this` binding..\n     *\n     * @private\n     * @param {Array} array The array to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {number} Returns the sum.\n     */\n    function arraySum(array, iteratee) {\n      var length = array.length,\n          result = 0;\n\n      while (length--) {\n        result += +iteratee(array[length]) || 0;\n      }\n      return result;\n    }\n\n    /**\n     * Used by `_.defaults` to customize its `_.assign` use.\n     *\n     * @private\n     * @param {*} objectValue The destination object property value.\n     * @param {*} sourceValue The source object property value.\n     * @returns {*} Returns the value to assign to the destination object.\n     */\n    function assignDefaults(objectValue, sourceValue) {\n      return objectValue === undefined ? sourceValue : objectValue;\n    }\n\n    /**\n     * Used by `_.template` to customize its `_.assign` use.\n     *\n     * **Note:** This function is like `assignDefaults` except that it ignores\n     * inherited property values when checking if a property is `undefined`.\n     *\n     * @private\n     * @param {*} objectValue The destination object property value.\n     * @param {*} sourceValue The source object property value.\n     * @param {string} key The key associated with the object and source values.\n     * @param {Object} object The destination object.\n     * @returns {*} Returns the value to assign to the destination object.\n     */\n    function assignOwnDefaults(objectValue, sourceValue, key, object) {\n      return (objectValue === undefined || !hasOwnProperty.call(object, key))\n        ? sourceValue\n        : objectValue;\n    }\n\n    /**\n     * A specialized version of `_.assign` for customizing assigned values without\n     * support for argument juggling, multiple sources, and `this` binding `customizer`\n     * functions.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @param {Function} customizer The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     */\n    function assignWith(object, source, customizer) {\n      var index = -1,\n          props = keys(source),\n          length = props.length;\n\n      while (++index < length) {\n        var key = props[index],\n            value = object[key],\n            result = customizer(value, source[key], key, object, source);\n\n        if ((result === result ? (result !== value) : (value === value)) ||\n            (value === undefined && !(key in object))) {\n          object[key] = result;\n        }\n      }\n      return object;\n    }\n\n    /**\n     * The base implementation of `_.assign` without support for argument juggling,\n     * multiple sources, and `customizer` functions.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @returns {Object} Returns `object`.\n     */\n    function baseAssign(object, source) {\n      return source == null\n        ? object\n        : baseCopy(source, keys(source), object);\n    }\n\n    /**\n     * The base implementation of `_.at` without support for string collections\n     * and individual key arguments.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {number[]|string[]} props The property names or indexes of elements to pick.\n     * @returns {Array} Returns the new array of picked elements.\n     */\n    function baseAt(collection, props) {\n      var index = -1,\n          isNil = collection == null,\n          isArr = !isNil && isArrayLike(collection),\n          length = isArr ? collection.length : 0,\n          propsLength = props.length,\n          result = Array(propsLength);\n\n      while(++index < propsLength) {\n        var key = props[index];\n        if (isArr) {\n          result[index] = isIndex(key, length) ? collection[key] : undefined;\n        } else {\n          result[index] = isNil ? undefined : collection[key];\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Copies properties of `source` to `object`.\n     *\n     * @private\n     * @param {Object} source The object to copy properties from.\n     * @param {Array} props The property names to copy.\n     * @param {Object} [object={}] The object to copy properties to.\n     * @returns {Object} Returns `object`.\n     */\n    function baseCopy(source, props, object) {\n      object || (object = {});\n\n      var index = -1,\n          length = props.length;\n\n      while (++index < length) {\n        var key = props[index];\n        object[key] = source[key];\n      }\n      return object;\n    }\n\n    /**\n     * The base implementation of `_.callback` which supports specifying the\n     * number of arguments to provide to `func`.\n     *\n     * @private\n     * @param {*} [func=_.identity] The value to convert to a callback.\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param {number} [argCount] The number of arguments to provide to `func`.\n     * @returns {Function} Returns the callback.\n     */\n    function baseCallback(func, thisArg, argCount) {\n      var type = typeof func;\n      if (type == 'function') {\n        return thisArg === undefined\n          ? func\n          : bindCallback(func, thisArg, argCount);\n      }\n      if (func == null) {\n        return identity;\n      }\n      if (type == 'object') {\n        return baseMatches(func);\n      }\n      return thisArg === undefined\n        ? property(func)\n        : baseMatchesProperty(func, thisArg);\n    }\n\n    /**\n     * The base implementation of `_.clone` without support for argument juggling\n     * and `this` binding `customizer` functions.\n     *\n     * @private\n     * @param {*} value The value to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @param {Function} [customizer] The function to customize cloning values.\n     * @param {string} [key] The key of `value`.\n     * @param {Object} [object] The object `value` belongs to.\n     * @param {Array} [stackA=[]] Tracks traversed source objects.\n     * @param {Array} [stackB=[]] Associates clones with source counterparts.\n     * @returns {*} Returns the cloned value.\n     */\n    function baseClone(value, isDeep, customizer, key, object, stackA, stackB) {\n      var result;\n      if (customizer) {\n        result = object ? customizer(value, key, object) : customizer(value);\n      }\n      if (result !== undefined) {\n        return result;\n      }\n      if (!isObject(value)) {\n        return value;\n      }\n      var isArr = isArray(value);\n      if (isArr) {\n        result = initCloneArray(value);\n        if (!isDeep) {\n          return arrayCopy(value, result);\n        }\n      } else {\n        var tag = objToString.call(value),\n            isFunc = tag == funcTag;\n\n        if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n          result = initCloneObject(isFunc ? {} : value);\n          if (!isDeep) {\n            return baseAssign(result, value);\n          }\n        } else {\n          return cloneableTags[tag]\n            ? initCloneByTag(value, tag, isDeep)\n            : (object ? value : {});\n        }\n      }\n      // Check for circular references and return its corresponding clone.\n      stackA || (stackA = []);\n      stackB || (stackB = []);\n\n      var length = stackA.length;\n      while (length--) {\n        if (stackA[length] == value) {\n          return stackB[length];\n        }\n      }\n      // Add the source value to the stack of traversed objects and associate it with its clone.\n      stackA.push(value);\n      stackB.push(result);\n\n      // Recursively populate clone (susceptible to call stack limits).\n      (isArr ? arrayEach : baseForOwn)(value, function(subValue, key) {\n        result[key] = baseClone(subValue, isDeep, customizer, key, value, stackA, stackB);\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.create` without support for assigning\n     * properties to the created object.\n     *\n     * @private\n     * @param {Object} prototype The object to inherit from.\n     * @returns {Object} Returns the new object.\n     */\n    var baseCreate = (function() {\n      function object() {}\n      return function(prototype) {\n        if (isObject(prototype)) {\n          object.prototype = prototype;\n          var result = new object;\n          object.prototype = undefined;\n        }\n        return result || {};\n      };\n    }());\n\n    /**\n     * The base implementation of `_.delay` and `_.defer` which accepts an index\n     * of where to slice the arguments to provide to `func`.\n     *\n     * @private\n     * @param {Function} func The function to delay.\n     * @param {number} wait The number of milliseconds to delay invocation.\n     * @param {Object} args The arguments provide to `func`.\n     * @returns {number} Returns the timer id.\n     */\n    function baseDelay(func, wait, args) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      return setTimeout(function() { func.apply(undefined, args); }, wait);\n    }\n\n    /**\n     * The base implementation of `_.difference` which accepts a single array\n     * of values to exclude.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {Array} values The values to exclude.\n     * @returns {Array} Returns the new array of filtered values.\n     */\n    function baseDifference(array, values) {\n      var length = array ? array.length : 0,\n          result = [];\n\n      if (!length) {\n        return result;\n      }\n      var index = -1,\n          indexOf = getIndexOf(),\n          isCommon = indexOf == baseIndexOf,\n          cache = (isCommon && values.length >= LARGE_ARRAY_SIZE) ? createCache(values) : null,\n          valuesLength = values.length;\n\n      if (cache) {\n        indexOf = cacheIndexOf;\n        isCommon = false;\n        values = cache;\n      }\n      outer:\n      while (++index < length) {\n        var value = array[index];\n\n        if (isCommon && value === value) {\n          var valuesIndex = valuesLength;\n          while (valuesIndex--) {\n            if (values[valuesIndex] === value) {\n              continue outer;\n            }\n          }\n          result.push(value);\n        }\n        else if (indexOf(values, value, 0) < 0) {\n          result.push(value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.forEach` without support for callback\n     * shorthands and `this` binding.\n     *\n     * @private\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array|Object|string} Returns `collection`.\n     */\n    var baseEach = createBaseEach(baseForOwn);\n\n    /**\n     * The base implementation of `_.forEachRight` without support for callback\n     * shorthands and `this` binding.\n     *\n     * @private\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array|Object|string} Returns `collection`.\n     */\n    var baseEachRight = createBaseEach(baseForOwnRight, true);\n\n    /**\n     * The base implementation of `_.every` without support for callback\n     * shorthands and `this` binding.\n     *\n     * @private\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {boolean} Returns `true` if all elements pass the predicate check,\n     *  else `false`\n     */\n    function baseEvery(collection, predicate) {\n      var result = true;\n      baseEach(collection, function(value, index, collection) {\n        result = !!predicate(value, index, collection);\n        return result;\n      });\n      return result;\n    }\n\n    /**\n     * Gets the extremum value of `collection` invoking `iteratee` for each value\n     * in `collection` to generate the criterion by which the value is ranked.\n     * The `iteratee` is invoked with three arguments: (value, index|key, collection).\n     *\n     * @private\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @param {Function} comparator The function used to compare values.\n     * @param {*} exValue The initial extremum value.\n     * @returns {*} Returns the extremum value.\n     */\n    function baseExtremum(collection, iteratee, comparator, exValue) {\n      var computed = exValue,\n          result = computed;\n\n      baseEach(collection, function(value, index, collection) {\n        var current = +iteratee(value, index, collection);\n        if (comparator(current, computed) || (current === exValue && current === result)) {\n          computed = current;\n          result = value;\n        }\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.fill` without an iteratee call guard.\n     *\n     * @private\n     * @param {Array} array The array to fill.\n     * @param {*} value The value to fill `array` with.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns `array`.\n     */\n    function baseFill(array, value, start, end) {\n      var length = array.length;\n\n      start = start == null ? 0 : (+start || 0);\n      if (start < 0) {\n        start = -start > length ? 0 : (length + start);\n      }\n      end = (end === undefined || end > length) ? length : (+end || 0);\n      if (end < 0) {\n        end += length;\n      }\n      length = start > end ? 0 : (end >>> 0);\n      start >>>= 0;\n\n      while (start < length) {\n        array[start++] = value;\n      }\n      return array;\n    }\n\n    /**\n     * The base implementation of `_.filter` without support for callback\n     * shorthands and `this` binding.\n     *\n     * @private\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {Array} Returns the new filtered array.\n     */\n    function baseFilter(collection, predicate) {\n      var result = [];\n      baseEach(collection, function(value, index, collection) {\n        if (predicate(value, index, collection)) {\n          result.push(value);\n        }\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.find`, `_.findLast`, `_.findKey`, and `_.findLastKey`,\n     * without support for callback shorthands and `this` binding, which iterates\n     * over `collection` using the provided `eachFunc`.\n     *\n     * @private\n     * @param {Array|Object|string} collection The collection to search.\n     * @param {Function} predicate The function invoked per iteration.\n     * @param {Function} eachFunc The function to iterate over `collection`.\n     * @param {boolean} [retKey] Specify returning the key of the found element\n     *  instead of the element itself.\n     * @returns {*} Returns the found element or its key, else `undefined`.\n     */\n    function baseFind(collection, predicate, eachFunc, retKey) {\n      var result;\n      eachFunc(collection, function(value, key, collection) {\n        if (predicate(value, key, collection)) {\n          result = retKey ? key : value;\n          return false;\n        }\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.flatten` with added support for restricting\n     * flattening and specifying the start index.\n     *\n     * @private\n     * @param {Array} array The array to flatten.\n     * @param {boolean} [isDeep] Specify a deep flatten.\n     * @param {boolean} [isStrict] Restrict flattening to arrays-like objects.\n     * @param {Array} [result=[]] The initial result value.\n     * @returns {Array} Returns the new flattened array.\n     */\n    function baseFlatten(array, isDeep, isStrict, result) {\n      result || (result = []);\n\n      var index = -1,\n          length = array.length;\n\n      while (++index < length) {\n        var value = array[index];\n        if (isObjectLike(value) && isArrayLike(value) &&\n            (isStrict || isArray(value) || isArguments(value))) {\n          if (isDeep) {\n            // Recursively flatten arrays (susceptible to call stack limits).\n            baseFlatten(value, isDeep, isStrict, result);\n          } else {\n            arrayPush(result, value);\n          }\n        } else if (!isStrict) {\n          result[result.length] = value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `baseForIn` and `baseForOwn` which iterates\n     * over `object` properties returned by `keysFunc` invoking `iteratee` for\n     * each property. Iteratee functions may exit iteration early by explicitly\n     * returning `false`.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @param {Function} keysFunc The function to get the keys of `object`.\n     * @returns {Object} Returns `object`.\n     */\n    var baseFor = createBaseFor();\n\n    /**\n     * This function is like `baseFor` except that it iterates over properties\n     * in the opposite order.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @param {Function} keysFunc The function to get the keys of `object`.\n     * @returns {Object} Returns `object`.\n     */\n    var baseForRight = createBaseFor(true);\n\n    /**\n     * The base implementation of `_.forIn` without support for callback\n     * shorthands and `this` binding.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     */\n    function baseForIn(object, iteratee) {\n      return baseFor(object, iteratee, keysIn);\n    }\n\n    /**\n     * The base implementation of `_.forOwn` without support for callback\n     * shorthands and `this` binding.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     */\n    function baseForOwn(object, iteratee) {\n      return baseFor(object, iteratee, keys);\n    }\n\n    /**\n     * The base implementation of `_.forOwnRight` without support for callback\n     * shorthands and `this` binding.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     */\n    function baseForOwnRight(object, iteratee) {\n      return baseForRight(object, iteratee, keys);\n    }\n\n    /**\n     * The base implementation of `_.functions` which creates an array of\n     * `object` function property names filtered from those provided.\n     *\n     * @private\n     * @param {Object} object The object to inspect.\n     * @param {Array} props The property names to filter.\n     * @returns {Array} Returns the new array of filtered property names.\n     */\n    function baseFunctions(object, props) {\n      var index = -1,\n          length = props.length,\n          resIndex = -1,\n          result = [];\n\n      while (++index < length) {\n        var key = props[index];\n        if (isFunction(object[key])) {\n          result[++resIndex] = key;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `get` without support for string paths\n     * and default values.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array} path The path of the property to get.\n     * @param {string} [pathKey] The key representation of path.\n     * @returns {*} Returns the resolved value.\n     */\n    function baseGet(object, path, pathKey) {\n      if (object == null) {\n        return;\n      }\n      if (pathKey !== undefined && pathKey in toObject(object)) {\n        path = [pathKey];\n      }\n      var index = 0,\n          length = path.length;\n\n      while (object != null && index < length) {\n        object = object[path[index++]];\n      }\n      return (index && index == length) ? object : undefined;\n    }\n\n    /**\n     * The base implementation of `_.isEqual` without support for `this` binding\n     * `customizer` functions.\n     *\n     * @private\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @param {Function} [customizer] The function to customize comparing values.\n     * @param {boolean} [isLoose] Specify performing partial comparisons.\n     * @param {Array} [stackA] Tracks traversed `value` objects.\n     * @param {Array} [stackB] Tracks traversed `other` objects.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     */\n    function baseIsEqual(value, other, customizer, isLoose, stackA, stackB) {\n      if (value === other) {\n        return true;\n      }\n      if (value == null || other == null || (!isObject(value) && !isObjectLike(other))) {\n        return value !== value && other !== other;\n      }\n      return baseIsEqualDeep(value, other, baseIsEqual, customizer, isLoose, stackA, stackB);\n    }\n\n    /**\n     * A specialized version of `baseIsEqual` for arrays and objects which performs\n     * deep comparisons and tracks traversed objects enabling objects with circular\n     * references to be compared.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Function} [customizer] The function to customize comparing objects.\n     * @param {boolean} [isLoose] Specify performing partial comparisons.\n     * @param {Array} [stackA=[]] Tracks traversed `value` objects.\n     * @param {Array} [stackB=[]] Tracks traversed `other` objects.\n     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n     */\n    function baseIsEqualDeep(object, other, equalFunc, customizer, isLoose, stackA, stackB) {\n      var objIsArr = isArray(object),\n          othIsArr = isArray(other),\n          objTag = arrayTag,\n          othTag = arrayTag;\n\n      if (!objIsArr) {\n        objTag = objToString.call(object);\n        if (objTag == argsTag) {\n          objTag = objectTag;\n        } else if (objTag != objectTag) {\n          objIsArr = isTypedArray(object);\n        }\n      }\n      if (!othIsArr) {\n        othTag = objToString.call(other);\n        if (othTag == argsTag) {\n          othTag = objectTag;\n        } else if (othTag != objectTag) {\n          othIsArr = isTypedArray(other);\n        }\n      }\n      var objIsObj = objTag == objectTag,\n          othIsObj = othTag == objectTag,\n          isSameTag = objTag == othTag;\n\n      if (isSameTag && !(objIsArr || objIsObj)) {\n        return equalByTag(object, other, objTag);\n      }\n      if (!isLoose) {\n        var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n            othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n        if (objIsWrapped || othIsWrapped) {\n          return equalFunc(objIsWrapped ? object.value() : object, othIsWrapped ? other.value() : other, customizer, isLoose, stackA, stackB);\n        }\n      }\n      if (!isSameTag) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      // For more information on detecting circular references see https://es5.github.io/#JO.\n      stackA || (stackA = []);\n      stackB || (stackB = []);\n\n      var length = stackA.length;\n      while (length--) {\n        if (stackA[length] == object) {\n          return stackB[length] == other;\n        }\n      }\n      // Add `object` and `other` to the stack of traversed objects.\n      stackA.push(object);\n      stackB.push(other);\n\n      var result = (objIsArr ? equalArrays : equalObjects)(object, other, equalFunc, customizer, isLoose, stackA, stackB);\n\n      stackA.pop();\n      stackB.pop();\n\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.isMatch` without support for callback\n     * shorthands and `this` binding.\n     *\n     * @private\n     * @param {Object} object The object to inspect.\n     * @param {Array} matchData The propery names, values, and compare flags to match.\n     * @param {Function} [customizer] The function to customize comparing objects.\n     * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n     */\n    function baseIsMatch(object, matchData, customizer) {\n      var index = matchData.length,\n          length = index,\n          noCustomizer = !customizer;\n\n      if (object == null) {\n        return !length;\n      }\n      object = toObject(object);\n      while (index--) {\n        var data = matchData[index];\n        if ((noCustomizer && data[2])\n              ? data[1] !== object[data[0]]\n              : !(data[0] in object)\n            ) {\n          return false;\n        }\n      }\n      while (++index < length) {\n        data = matchData[index];\n        var key = data[0],\n            objValue = object[key],\n            srcValue = data[1];\n\n        if (noCustomizer && data[2]) {\n          if (objValue === undefined && !(key in object)) {\n            return false;\n          }\n        } else {\n          var result = customizer ? customizer(objValue, srcValue, key) : undefined;\n          if (!(result === undefined ? baseIsEqual(srcValue, objValue, customizer, true) : result)) {\n            return false;\n          }\n        }\n      }\n      return true;\n    }\n\n    /**\n     * The base implementation of `_.map` without support for callback shorthands\n     * and `this` binding.\n     *\n     * @private\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array} Returns the new mapped array.\n     */\n    function baseMap(collection, iteratee) {\n      var index = -1,\n          result = isArrayLike(collection) ? Array(collection.length) : [];\n\n      baseEach(collection, function(value, key, collection) {\n        result[++index] = iteratee(value, key, collection);\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.matches` which does not clone `source`.\n     *\n     * @private\n     * @param {Object} source The object of property values to match.\n     * @returns {Function} Returns the new function.\n     */\n    function baseMatches(source) {\n      var matchData = getMatchData(source);\n      if (matchData.length == 1 && matchData[0][2]) {\n        var key = matchData[0][0],\n            value = matchData[0][1];\n\n        return function(object) {\n          if (object == null) {\n            return false;\n          }\n          return object[key] === value && (value !== undefined || (key in toObject(object)));\n        };\n      }\n      return function(object) {\n        return baseIsMatch(object, matchData);\n      };\n    }\n\n    /**\n     * The base implementation of `_.matchesProperty` which does not clone `srcValue`.\n     *\n     * @private\n     * @param {string} path The path of the property to get.\n     * @param {*} srcValue The value to compare.\n     * @returns {Function} Returns the new function.\n     */\n    function baseMatchesProperty(path, srcValue) {\n      var isArr = isArray(path),\n          isCommon = isKey(path) && isStrictComparable(srcValue),\n          pathKey = (path + '');\n\n      path = toPath(path);\n      return function(object) {\n        if (object == null) {\n          return false;\n        }\n        var key = pathKey;\n        object = toObject(object);\n        if ((isArr || !isCommon) && !(key in object)) {\n          object = path.length == 1 ? object : baseGet(object, baseSlice(path, 0, -1));\n          if (object == null) {\n            return false;\n          }\n          key = last(path);\n          object = toObject(object);\n        }\n        return object[key] === srcValue\n          ? (srcValue !== undefined || (key in object))\n          : baseIsEqual(srcValue, object[key], undefined, true);\n      };\n    }\n\n    /**\n     * The base implementation of `_.merge` without support for argument juggling,\n     * multiple sources, and `this` binding `customizer` functions.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @param {Function} [customizer] The function to customize merged values.\n     * @param {Array} [stackA=[]] Tracks traversed source objects.\n     * @param {Array} [stackB=[]] Associates values with source counterparts.\n     * @returns {Object} Returns `object`.\n     */\n    function baseMerge(object, source, customizer, stackA, stackB) {\n      if (!isObject(object)) {\n        return object;\n      }\n      var isSrcArr = isArrayLike(source) && (isArray(source) || isTypedArray(source)),\n          props = isSrcArr ? undefined : keys(source);\n\n      arrayEach(props || source, function(srcValue, key) {\n        if (props) {\n          key = srcValue;\n          srcValue = source[key];\n        }\n        if (isObjectLike(srcValue)) {\n          stackA || (stackA = []);\n          stackB || (stackB = []);\n          baseMergeDeep(object, source, key, baseMerge, customizer, stackA, stackB);\n        }\n        else {\n          var value = object[key],\n              result = customizer ? customizer(value, srcValue, key, object, source) : undefined,\n              isCommon = result === undefined;\n\n          if (isCommon) {\n            result = srcValue;\n          }\n          if ((result !== undefined || (isSrcArr && !(key in object))) &&\n              (isCommon || (result === result ? (result !== value) : (value === value)))) {\n            object[key] = result;\n          }\n        }\n      });\n      return object;\n    }\n\n    /**\n     * A specialized version of `baseMerge` for arrays and objects which performs\n     * deep merges and tracks traversed objects enabling objects with circular\n     * references to be merged.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @param {string} key The key of the value to merge.\n     * @param {Function} mergeFunc The function to merge values.\n     * @param {Function} [customizer] The function to customize merged values.\n     * @param {Array} [stackA=[]] Tracks traversed source objects.\n     * @param {Array} [stackB=[]] Associates values with source counterparts.\n     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n     */\n    function baseMergeDeep(object, source, key, mergeFunc, customizer, stackA, stackB) {\n      var length = stackA.length,\n          srcValue = source[key];\n\n      while (length--) {\n        if (stackA[length] == srcValue) {\n          object[key] = stackB[length];\n          return;\n        }\n      }\n      var value = object[key],\n          result = customizer ? customizer(value, srcValue, key, object, source) : undefined,\n          isCommon = result === undefined;\n\n      if (isCommon) {\n        result = srcValue;\n        if (isArrayLike(srcValue) && (isArray(srcValue) || isTypedArray(srcValue))) {\n          result = isArray(value)\n            ? value\n            : (isArrayLike(value) ? arrayCopy(value) : []);\n        }\n        else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n          result = isArguments(value)\n            ? toPlainObject(value)\n            : (isPlainObject(value) ? value : {});\n        }\n        else {\n          isCommon = false;\n        }\n      }\n      // Add the source value to the stack of traversed objects and associate\n      // it with its merged value.\n      stackA.push(srcValue);\n      stackB.push(result);\n\n      if (isCommon) {\n        // Recursively merge objects and arrays (susceptible to call stack limits).\n        object[key] = mergeFunc(result, srcValue, customizer, stackA, stackB);\n      } else if (result === result ? (result !== value) : (value === value)) {\n        object[key] = result;\n      }\n    }\n\n    /**\n     * The base implementation of `_.property` without support for deep paths.\n     *\n     * @private\n     * @param {string} key The key of the property to get.\n     * @returns {Function} Returns the new function.\n     */\n    function baseProperty(key) {\n      return function(object) {\n        return object == null ? undefined : object[key];\n      };\n    }\n\n    /**\n     * A specialized version of `baseProperty` which supports deep paths.\n     *\n     * @private\n     * @param {Array|string} path The path of the property to get.\n     * @returns {Function} Returns the new function.\n     */\n    function basePropertyDeep(path) {\n      var pathKey = (path + '');\n      path = toPath(path);\n      return function(object) {\n        return baseGet(object, path, pathKey);\n      };\n    }\n\n    /**\n     * The base implementation of `_.pullAt` without support for individual\n     * index arguments and capturing the removed elements.\n     *\n     * @private\n     * @param {Array} array The array to modify.\n     * @param {number[]} indexes The indexes of elements to remove.\n     * @returns {Array} Returns `array`.\n     */\n    function basePullAt(array, indexes) {\n      var length = array ? indexes.length : 0;\n      while (length--) {\n        var index = indexes[length];\n        if (index != previous && isIndex(index)) {\n          var previous = index;\n          splice.call(array, index, 1);\n        }\n      }\n      return array;\n    }\n\n    /**\n     * The base implementation of `_.random` without support for argument juggling\n     * and returning floating-point numbers.\n     *\n     * @private\n     * @param {number} min The minimum possible value.\n     * @param {number} max The maximum possible value.\n     * @returns {number} Returns the random number.\n     */\n    function baseRandom(min, max) {\n      return min + nativeFloor(nativeRandom() * (max - min + 1));\n    }\n\n    /**\n     * The base implementation of `_.reduce` and `_.reduceRight` without support\n     * for callback shorthands and `this` binding, which iterates over `collection`\n     * using the provided `eachFunc`.\n     *\n     * @private\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @param {*} accumulator The initial value.\n     * @param {boolean} initFromCollection Specify using the first or last element\n     *  of `collection` as the initial value.\n     * @param {Function} eachFunc The function to iterate over `collection`.\n     * @returns {*} Returns the accumulated value.\n     */\n    function baseReduce(collection, iteratee, accumulator, initFromCollection, eachFunc) {\n      eachFunc(collection, function(value, index, collection) {\n        accumulator = initFromCollection\n          ? (initFromCollection = false, value)\n          : iteratee(accumulator, value, index, collection);\n      });\n      return accumulator;\n    }\n\n    /**\n     * The base implementation of `setData` without support for hot loop detection.\n     *\n     * @private\n     * @param {Function} func The function to associate metadata with.\n     * @param {*} data The metadata.\n     * @returns {Function} Returns `func`.\n     */\n    var baseSetData = !metaMap ? identity : function(func, data) {\n      metaMap.set(func, data);\n      return func;\n    };\n\n    /**\n     * The base implementation of `_.slice` without an iteratee call guard.\n     *\n     * @private\n     * @param {Array} array The array to slice.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns the slice of `array`.\n     */\n    function baseSlice(array, start, end) {\n      var index = -1,\n          length = array.length;\n\n      start = start == null ? 0 : (+start || 0);\n      if (start < 0) {\n        start = -start > length ? 0 : (length + start);\n      }\n      end = (end === undefined || end > length) ? length : (+end || 0);\n      if (end < 0) {\n        end += length;\n      }\n      length = start > end ? 0 : ((end - start) >>> 0);\n      start >>>= 0;\n\n      var result = Array(length);\n      while (++index < length) {\n        result[index] = array[index + start];\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.some` without support for callback shorthands\n     * and `this` binding.\n     *\n     * @private\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {boolean} Returns `true` if any element passes the predicate check,\n     *  else `false`.\n     */\n    function baseSome(collection, predicate) {\n      var result;\n\n      baseEach(collection, function(value, index, collection) {\n        result = predicate(value, index, collection);\n        return !result;\n      });\n      return !!result;\n    }\n\n    /**\n     * The base implementation of `_.sortBy` which uses `comparer` to define\n     * the sort order of `array` and replaces criteria objects with their\n     * corresponding values.\n     *\n     * @private\n     * @param {Array} array The array to sort.\n     * @param {Function} comparer The function to define sort order.\n     * @returns {Array} Returns `array`.\n     */\n    function baseSortBy(array, comparer) {\n      var length = array.length;\n\n      array.sort(comparer);\n      while (length--) {\n        array[length] = array[length].value;\n      }\n      return array;\n    }\n\n    /**\n     * The base implementation of `_.sortByOrder` without param guards.\n     *\n     * @private\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.\n     * @param {boolean[]} orders The sort orders of `iteratees`.\n     * @returns {Array} Returns the new sorted array.\n     */\n    function baseSortByOrder(collection, iteratees, orders) {\n      var callback = getCallback(),\n          index = -1;\n\n      iteratees = arrayMap(iteratees, function(iteratee) { return callback(iteratee); });\n\n      var result = baseMap(collection, function(value) {\n        var criteria = arrayMap(iteratees, function(iteratee) { return iteratee(value); });\n        return { 'criteria': criteria, 'index': ++index, 'value': value };\n      });\n\n      return baseSortBy(result, function(object, other) {\n        return compareMultiple(object, other, orders);\n      });\n    }\n\n    /**\n     * The base implementation of `_.sum` without support for callback shorthands\n     * and `this` binding.\n     *\n     * @private\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {number} Returns the sum.\n     */\n    function baseSum(collection, iteratee) {\n      var result = 0;\n      baseEach(collection, function(value, index, collection) {\n        result += +iteratee(value, index, collection) || 0;\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.uniq` without support for callback shorthands\n     * and `this` binding.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {Function} [iteratee] The function invoked per iteration.\n     * @returns {Array} Returns the new duplicate-value-free array.\n     */\n    function baseUniq(array, iteratee) {\n      var index = -1,\n          indexOf = getIndexOf(),\n          length = array.length,\n          isCommon = indexOf == baseIndexOf,\n          isLarge = isCommon && length >= LARGE_ARRAY_SIZE,\n          seen = isLarge ? createCache() : null,\n          result = [];\n\n      if (seen) {\n        indexOf = cacheIndexOf;\n        isCommon = false;\n      } else {\n        isLarge = false;\n        seen = iteratee ? [] : result;\n      }\n      outer:\n      while (++index < length) {\n        var value = array[index],\n            computed = iteratee ? iteratee(value, index, array) : value;\n\n        if (isCommon && value === value) {\n          var seenIndex = seen.length;\n          while (seenIndex--) {\n            if (seen[seenIndex] === computed) {\n              continue outer;\n            }\n          }\n          if (iteratee) {\n            seen.push(computed);\n          }\n          result.push(value);\n        }\n        else if (indexOf(seen, computed, 0) < 0) {\n          if (iteratee || isLarge) {\n            seen.push(computed);\n          }\n          result.push(value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.values` and `_.valuesIn` which creates an\n     * array of `object` property values corresponding to the property names\n     * of `props`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array} props The property names to get values for.\n     * @returns {Object} Returns the array of property values.\n     */\n    function baseValues(object, props) {\n      var index = -1,\n          length = props.length,\n          result = Array(length);\n\n      while (++index < length) {\n        result[index] = object[props[index]];\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.dropRightWhile`, `_.dropWhile`, `_.takeRightWhile`,\n     * and `_.takeWhile` without support for callback shorthands and `this` binding.\n     *\n     * @private\n     * @param {Array} array The array to query.\n     * @param {Function} predicate The function invoked per iteration.\n     * @param {boolean} [isDrop] Specify dropping elements instead of taking them.\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Array} Returns the slice of `array`.\n     */\n    function baseWhile(array, predicate, isDrop, fromRight) {\n      var length = array.length,\n          index = fromRight ? length : -1;\n\n      while ((fromRight ? index-- : ++index < length) && predicate(array[index], index, array)) {}\n      return isDrop\n        ? baseSlice(array, (fromRight ? 0 : index), (fromRight ? index + 1 : length))\n        : baseSlice(array, (fromRight ? index + 1 : 0), (fromRight ? length : index));\n    }\n\n    /**\n     * The base implementation of `wrapperValue` which returns the result of\n     * performing a sequence of actions on the unwrapped `value`, where each\n     * successive action is supplied the return value of the previous.\n     *\n     * @private\n     * @param {*} value The unwrapped value.\n     * @param {Array} actions Actions to peform to resolve the unwrapped value.\n     * @returns {*} Returns the resolved value.\n     */\n    function baseWrapperValue(value, actions) {\n      var result = value;\n      if (result instanceof LazyWrapper) {\n        result = result.value();\n      }\n      var index = -1,\n          length = actions.length;\n\n      while (++index < length) {\n        var action = actions[index];\n        result = action.func.apply(action.thisArg, arrayPush([result], action.args));\n      }\n      return result;\n    }\n\n    /**\n     * Performs a binary search of `array` to determine the index at which `value`\n     * should be inserted into `array` in order to maintain its sort order.\n     *\n     * @private\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {boolean} [retHighest] Specify returning the highest qualified index.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     */\n    function binaryIndex(array, value, retHighest) {\n      var low = 0,\n          high = array ? array.length : low;\n\n      if (typeof value == 'number' && value === value && high <= HALF_MAX_ARRAY_LENGTH) {\n        while (low < high) {\n          var mid = (low + high) >>> 1,\n              computed = array[mid];\n\n          if ((retHighest ? (computed <= value) : (computed < value)) && computed !== null) {\n            low = mid + 1;\n          } else {\n            high = mid;\n          }\n        }\n        return high;\n      }\n      return binaryIndexBy(array, value, identity, retHighest);\n    }\n\n    /**\n     * This function is like `binaryIndex` except that it invokes `iteratee` for\n     * `value` and each element of `array` to compute their sort ranking. The\n     * iteratee is invoked with one argument; (value).\n     *\n     * @private\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @param {boolean} [retHighest] Specify returning the highest qualified index.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     */\n    function binaryIndexBy(array, value, iteratee, retHighest) {\n      value = iteratee(value);\n\n      var low = 0,\n          high = array ? array.length : 0,\n          valIsNaN = value !== value,\n          valIsNull = value === null,\n          valIsUndef = value === undefined;\n\n      while (low < high) {\n        var mid = nativeFloor((low + high) / 2),\n            computed = iteratee(array[mid]),\n            isDef = computed !== undefined,\n            isReflexive = computed === computed;\n\n        if (valIsNaN) {\n          var setLow = isReflexive || retHighest;\n        } else if (valIsNull) {\n          setLow = isReflexive && isDef && (retHighest || computed != null);\n        } else if (valIsUndef) {\n          setLow = isReflexive && (retHighest || isDef);\n        } else if (computed == null) {\n          setLow = false;\n        } else {\n          setLow = retHighest ? (computed <= value) : (computed < value);\n        }\n        if (setLow) {\n          low = mid + 1;\n        } else {\n          high = mid;\n        }\n      }\n      return nativeMin(high, MAX_ARRAY_INDEX);\n    }\n\n    /**\n     * A specialized version of `baseCallback` which only supports `this` binding\n     * and specifying the number of arguments to provide to `func`.\n     *\n     * @private\n     * @param {Function} func The function to bind.\n     * @param {*} thisArg The `this` binding of `func`.\n     * @param {number} [argCount] The number of arguments to provide to `func`.\n     * @returns {Function} Returns the callback.\n     */\n    function bindCallback(func, thisArg, argCount) {\n      if (typeof func != 'function') {\n        return identity;\n      }\n      if (thisArg === undefined) {\n        return func;\n      }\n      switch (argCount) {\n        case 1: return function(value) {\n          return func.call(thisArg, value);\n        };\n        case 3: return function(value, index, collection) {\n          return func.call(thisArg, value, index, collection);\n        };\n        case 4: return function(accumulator, value, index, collection) {\n          return func.call(thisArg, accumulator, value, index, collection);\n        };\n        case 5: return function(value, other, key, object, source) {\n          return func.call(thisArg, value, other, key, object, source);\n        };\n      }\n      return function() {\n        return func.apply(thisArg, arguments);\n      };\n    }\n\n    /**\n     * Creates a clone of the given array buffer.\n     *\n     * @private\n     * @param {ArrayBuffer} buffer The array buffer to clone.\n     * @returns {ArrayBuffer} Returns the cloned array buffer.\n     */\n    function bufferClone(buffer) {\n      var result = new ArrayBuffer(buffer.byteLength),\n          view = new Uint8Array(result);\n\n      view.set(new Uint8Array(buffer));\n      return result;\n    }\n\n    /**\n     * Creates an array that is the composition of partially applied arguments,\n     * placeholders, and provided arguments into a single array of arguments.\n     *\n     * @private\n     * @param {Array|Object} args The provided arguments.\n     * @param {Array} partials The arguments to prepend to those provided.\n     * @param {Array} holders The `partials` placeholder indexes.\n     * @returns {Array} Returns the new array of composed arguments.\n     */\n    function composeArgs(args, partials, holders) {\n      var holdersLength = holders.length,\n          argsIndex = -1,\n          argsLength = nativeMax(args.length - holdersLength, 0),\n          leftIndex = -1,\n          leftLength = partials.length,\n          result = Array(leftLength + argsLength);\n\n      while (++leftIndex < leftLength) {\n        result[leftIndex] = partials[leftIndex];\n      }\n      while (++argsIndex < holdersLength) {\n        result[holders[argsIndex]] = args[argsIndex];\n      }\n      while (argsLength--) {\n        result[leftIndex++] = args[argsIndex++];\n      }\n      return result;\n    }\n\n    /**\n     * This function is like `composeArgs` except that the arguments composition\n     * is tailored for `_.partialRight`.\n     *\n     * @private\n     * @param {Array|Object} args The provided arguments.\n     * @param {Array} partials The arguments to append to those provided.\n     * @param {Array} holders The `partials` placeholder indexes.\n     * @returns {Array} Returns the new array of composed arguments.\n     */\n    function composeArgsRight(args, partials, holders) {\n      var holdersIndex = -1,\n          holdersLength = holders.length,\n          argsIndex = -1,\n          argsLength = nativeMax(args.length - holdersLength, 0),\n          rightIndex = -1,\n          rightLength = partials.length,\n          result = Array(argsLength + rightLength);\n\n      while (++argsIndex < argsLength) {\n        result[argsIndex] = args[argsIndex];\n      }\n      var offset = argsIndex;\n      while (++rightIndex < rightLength) {\n        result[offset + rightIndex] = partials[rightIndex];\n      }\n      while (++holdersIndex < holdersLength) {\n        result[offset + holders[holdersIndex]] = args[argsIndex++];\n      }\n      return result;\n    }\n\n    /**\n     * Creates a `_.countBy`, `_.groupBy`, `_.indexBy`, or `_.partition` function.\n     *\n     * @private\n     * @param {Function} setter The function to set keys and values of the accumulator object.\n     * @param {Function} [initializer] The function to initialize the accumulator object.\n     * @returns {Function} Returns the new aggregator function.\n     */\n    function createAggregator(setter, initializer) {\n      return function(collection, iteratee, thisArg) {\n        var result = initializer ? initializer() : {};\n        iteratee = getCallback(iteratee, thisArg, 3);\n\n        if (isArray(collection)) {\n          var index = -1,\n              length = collection.length;\n\n          while (++index < length) {\n            var value = collection[index];\n            setter(result, value, iteratee(value, index, collection), collection);\n          }\n        } else {\n          baseEach(collection, function(value, key, collection) {\n            setter(result, value, iteratee(value, key, collection), collection);\n          });\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Creates a `_.assign`, `_.defaults`, or `_.merge` function.\n     *\n     * @private\n     * @param {Function} assigner The function to assign values.\n     * @returns {Function} Returns the new assigner function.\n     */\n    function createAssigner(assigner) {\n      return restParam(function(object, sources) {\n        var index = -1,\n            length = object == null ? 0 : sources.length,\n            customizer = length > 2 ? sources[length - 2] : undefined,\n            guard = length > 2 ? sources[2] : undefined,\n            thisArg = length > 1 ? sources[length - 1] : undefined;\n\n        if (typeof customizer == 'function') {\n          customizer = bindCallback(customizer, thisArg, 5);\n          length -= 2;\n        } else {\n          customizer = typeof thisArg == 'function' ? thisArg : undefined;\n          length -= (customizer ? 1 : 0);\n        }\n        if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n          customizer = length < 3 ? undefined : customizer;\n          length = 1;\n        }\n        while (++index < length) {\n          var source = sources[index];\n          if (source) {\n            assigner(object, source, customizer);\n          }\n        }\n        return object;\n      });\n    }\n\n    /**\n     * Creates a `baseEach` or `baseEachRight` function.\n     *\n     * @private\n     * @param {Function} eachFunc The function to iterate over a collection.\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new base function.\n     */\n    function createBaseEach(eachFunc, fromRight) {\n      return function(collection, iteratee) {\n        var length = collection ? getLength(collection) : 0;\n        if (!isLength(length)) {\n          return eachFunc(collection, iteratee);\n        }\n        var index = fromRight ? length : -1,\n            iterable = toObject(collection);\n\n        while ((fromRight ? index-- : ++index < length)) {\n          if (iteratee(iterable[index], index, iterable) === false) {\n            break;\n          }\n        }\n        return collection;\n      };\n    }\n\n    /**\n     * Creates a base function for `_.forIn` or `_.forInRight`.\n     *\n     * @private\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new base function.\n     */\n    function createBaseFor(fromRight) {\n      return function(object, iteratee, keysFunc) {\n        var iterable = toObject(object),\n            props = keysFunc(object),\n            length = props.length,\n            index = fromRight ? length : -1;\n\n        while ((fromRight ? index-- : ++index < length)) {\n          var key = props[index];\n          if (iteratee(iterable[key], key, iterable) === false) {\n            break;\n          }\n        }\n        return object;\n      };\n    }\n\n    /**\n     * Creates a function that wraps `func` and invokes it with the `this`\n     * binding of `thisArg`.\n     *\n     * @private\n     * @param {Function} func The function to bind.\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @returns {Function} Returns the new bound function.\n     */\n    function createBindWrapper(func, thisArg) {\n      var Ctor = createCtorWrapper(func);\n\n      function wrapper() {\n        var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n        return fn.apply(thisArg, arguments);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a `Set` cache object to optimize linear searches of large arrays.\n     *\n     * @private\n     * @param {Array} [values] The values to cache.\n     * @returns {null|Object} Returns the new cache object if `Set` is supported, else `null`.\n     */\n    function createCache(values) {\n      return (nativeCreate && Set) ? new SetCache(values) : null;\n    }\n\n    /**\n     * Creates a function that produces compound words out of the words in a\n     * given string.\n     *\n     * @private\n     * @param {Function} callback The function to combine each word.\n     * @returns {Function} Returns the new compounder function.\n     */\n    function createCompounder(callback) {\n      return function(string) {\n        var index = -1,\n            array = words(deburr(string)),\n            length = array.length,\n            result = '';\n\n        while (++index < length) {\n          result = callback(result, array[index], index);\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Creates a function that produces an instance of `Ctor` regardless of\n     * whether it was invoked as part of a `new` expression or by `call` or `apply`.\n     *\n     * @private\n     * @param {Function} Ctor The constructor to wrap.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createCtorWrapper(Ctor) {\n      return function() {\n        // Use a `switch` statement to work with class constructors.\n        // See http://ecma-international.org/ecma-262/6.0/#sec-ecmascript-function-objects-call-thisargument-argumentslist\n        // for more details.\n        var args = arguments;\n        switch (args.length) {\n          case 0: return new Ctor;\n          case 1: return new Ctor(args[0]);\n          case 2: return new Ctor(args[0], args[1]);\n          case 3: return new Ctor(args[0], args[1], args[2]);\n          case 4: return new Ctor(args[0], args[1], args[2], args[3]);\n          case 5: return new Ctor(args[0], args[1], args[2], args[3], args[4]);\n          case 6: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5]);\n          case 7: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5], args[6]);\n        }\n        var thisBinding = baseCreate(Ctor.prototype),\n            result = Ctor.apply(thisBinding, args);\n\n        // Mimic the constructor's `return` behavior.\n        // See https://es5.github.io/#x13.2.2 for more details.\n        return isObject(result) ? result : thisBinding;\n      };\n    }\n\n    /**\n     * Creates a `_.curry` or `_.curryRight` function.\n     *\n     * @private\n     * @param {boolean} flag The curry bit flag.\n     * @returns {Function} Returns the new curry function.\n     */\n    function createCurry(flag) {\n      function curryFunc(func, arity, guard) {\n        if (guard && isIterateeCall(func, arity, guard)) {\n          arity = undefined;\n        }\n        var result = createWrapper(func, flag, undefined, undefined, undefined, undefined, undefined, arity);\n        result.placeholder = curryFunc.placeholder;\n        return result;\n      }\n      return curryFunc;\n    }\n\n    /**\n     * Creates a `_.defaults` or `_.defaultsDeep` function.\n     *\n     * @private\n     * @param {Function} assigner The function to assign values.\n     * @param {Function} customizer The function to customize assigned values.\n     * @returns {Function} Returns the new defaults function.\n     */\n    function createDefaults(assigner, customizer) {\n      return restParam(function(args) {\n        var object = args[0];\n        if (object == null) {\n          return object;\n        }\n        args.push(customizer);\n        return assigner.apply(undefined, args);\n      });\n    }\n\n    /**\n     * Creates a `_.max` or `_.min` function.\n     *\n     * @private\n     * @param {Function} comparator The function used to compare values.\n     * @param {*} exValue The initial extremum value.\n     * @returns {Function} Returns the new extremum function.\n     */\n    function createExtremum(comparator, exValue) {\n      return function(collection, iteratee, thisArg) {\n        if (thisArg && isIterateeCall(collection, iteratee, thisArg)) {\n          iteratee = undefined;\n        }\n        iteratee = getCallback(iteratee, thisArg, 3);\n        if (iteratee.length == 1) {\n          collection = isArray(collection) ? collection : toIterable(collection);\n          var result = arrayExtremum(collection, iteratee, comparator, exValue);\n          if (!(collection.length && result === exValue)) {\n            return result;\n          }\n        }\n        return baseExtremum(collection, iteratee, comparator, exValue);\n      };\n    }\n\n    /**\n     * Creates a `_.find` or `_.findLast` function.\n     *\n     * @private\n     * @param {Function} eachFunc The function to iterate over a collection.\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new find function.\n     */\n    function createFind(eachFunc, fromRight) {\n      return function(collection, predicate, thisArg) {\n        predicate = getCallback(predicate, thisArg, 3);\n        if (isArray(collection)) {\n          var index = baseFindIndex(collection, predicate, fromRight);\n          return index > -1 ? collection[index] : undefined;\n        }\n        return baseFind(collection, predicate, eachFunc);\n      };\n    }\n\n    /**\n     * Creates a `_.findIndex` or `_.findLastIndex` function.\n     *\n     * @private\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new find function.\n     */\n    function createFindIndex(fromRight) {\n      return function(array, predicate, thisArg) {\n        if (!(array && array.length)) {\n          return -1;\n        }\n        predicate = getCallback(predicate, thisArg, 3);\n        return baseFindIndex(array, predicate, fromRight);\n      };\n    }\n\n    /**\n     * Creates a `_.findKey` or `_.findLastKey` function.\n     *\n     * @private\n     * @param {Function} objectFunc The function to iterate over an object.\n     * @returns {Function} Returns the new find function.\n     */\n    function createFindKey(objectFunc) {\n      return function(object, predicate, thisArg) {\n        predicate = getCallback(predicate, thisArg, 3);\n        return baseFind(object, predicate, objectFunc, true);\n      };\n    }\n\n    /**\n     * Creates a `_.flow` or `_.flowRight` function.\n     *\n     * @private\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new flow function.\n     */\n    function createFlow(fromRight) {\n      return function() {\n        var wrapper,\n            length = arguments.length,\n            index = fromRight ? length : -1,\n            leftIndex = 0,\n            funcs = Array(length);\n\n        while ((fromRight ? index-- : ++index < length)) {\n          var func = funcs[leftIndex++] = arguments[index];\n          if (typeof func != 'function') {\n            throw new TypeError(FUNC_ERROR_TEXT);\n          }\n          if (!wrapper && LodashWrapper.prototype.thru && getFuncName(func) == 'wrapper') {\n            wrapper = new LodashWrapper([], true);\n          }\n        }\n        index = wrapper ? -1 : length;\n        while (++index < length) {\n          func = funcs[index];\n\n          var funcName = getFuncName(func),\n              data = funcName == 'wrapper' ? getData(func) : undefined;\n\n          if (data && isLaziable(data[0]) && data[1] == (ARY_FLAG | CURRY_FLAG | PARTIAL_FLAG | REARG_FLAG) && !data[4].length && data[9] == 1) {\n            wrapper = wrapper[getFuncName(data[0])].apply(wrapper, data[3]);\n          } else {\n            wrapper = (func.length == 1 && isLaziable(func)) ? wrapper[funcName]() : wrapper.thru(func);\n          }\n        }\n        return function() {\n          var args = arguments,\n              value = args[0];\n\n          if (wrapper && args.length == 1 && isArray(value) && value.length >= LARGE_ARRAY_SIZE) {\n            return wrapper.plant(value).value();\n          }\n          var index = 0,\n              result = length ? funcs[index].apply(this, args) : value;\n\n          while (++index < length) {\n            result = funcs[index].call(this, result);\n          }\n          return result;\n        };\n      };\n    }\n\n    /**\n     * Creates a function for `_.forEach` or `_.forEachRight`.\n     *\n     * @private\n     * @param {Function} arrayFunc The function to iterate over an array.\n     * @param {Function} eachFunc The function to iterate over a collection.\n     * @returns {Function} Returns the new each function.\n     */\n    function createForEach(arrayFunc, eachFunc) {\n      return function(collection, iteratee, thisArg) {\n        return (typeof iteratee == 'function' && thisArg === undefined && isArray(collection))\n          ? arrayFunc(collection, iteratee)\n          : eachFunc(collection, bindCallback(iteratee, thisArg, 3));\n      };\n    }\n\n    /**\n     * Creates a function for `_.forIn` or `_.forInRight`.\n     *\n     * @private\n     * @param {Function} objectFunc The function to iterate over an object.\n     * @returns {Function} Returns the new each function.\n     */\n    function createForIn(objectFunc) {\n      return function(object, iteratee, thisArg) {\n        if (typeof iteratee != 'function' || thisArg !== undefined) {\n          iteratee = bindCallback(iteratee, thisArg, 3);\n        }\n        return objectFunc(object, iteratee, keysIn);\n      };\n    }\n\n    /**\n     * Creates a function for `_.forOwn` or `_.forOwnRight`.\n     *\n     * @private\n     * @param {Function} objectFunc The function to iterate over an object.\n     * @returns {Function} Returns the new each function.\n     */\n    function createForOwn(objectFunc) {\n      return function(object, iteratee, thisArg) {\n        if (typeof iteratee != 'function' || thisArg !== undefined) {\n          iteratee = bindCallback(iteratee, thisArg, 3);\n        }\n        return objectFunc(object, iteratee);\n      };\n    }\n\n    /**\n     * Creates a function for `_.mapKeys` or `_.mapValues`.\n     *\n     * @private\n     * @param {boolean} [isMapKeys] Specify mapping keys instead of values.\n     * @returns {Function} Returns the new map function.\n     */\n    function createObjectMapper(isMapKeys) {\n      return function(object, iteratee, thisArg) {\n        var result = {};\n        iteratee = getCallback(iteratee, thisArg, 3);\n\n        baseForOwn(object, function(value, key, object) {\n          var mapped = iteratee(value, key, object);\n          key = isMapKeys ? mapped : key;\n          value = isMapKeys ? value : mapped;\n          result[key] = value;\n        });\n        return result;\n      };\n    }\n\n    /**\n     * Creates a function for `_.padLeft` or `_.padRight`.\n     *\n     * @private\n     * @param {boolean} [fromRight] Specify padding from the right.\n     * @returns {Function} Returns the new pad function.\n     */\n    function createPadDir(fromRight) {\n      return function(string, length, chars) {\n        string = baseToString(string);\n        return (fromRight ? string : '') + createPadding(string, length, chars) + (fromRight ? '' : string);\n      };\n    }\n\n    /**\n     * Creates a `_.partial` or `_.partialRight` function.\n     *\n     * @private\n     * @param {boolean} flag The partial bit flag.\n     * @returns {Function} Returns the new partial function.\n     */\n    function createPartial(flag) {\n      var partialFunc = restParam(function(func, partials) {\n        var holders = replaceHolders(partials, partialFunc.placeholder);\n        return createWrapper(func, flag, undefined, partials, holders);\n      });\n      return partialFunc;\n    }\n\n    /**\n     * Creates a function for `_.reduce` or `_.reduceRight`.\n     *\n     * @private\n     * @param {Function} arrayFunc The function to iterate over an array.\n     * @param {Function} eachFunc The function to iterate over a collection.\n     * @returns {Function} Returns the new each function.\n     */\n    function createReduce(arrayFunc, eachFunc) {\n      return function(collection, iteratee, accumulator, thisArg) {\n        var initFromArray = arguments.length < 3;\n        return (typeof iteratee == 'function' && thisArg === undefined && isArray(collection))\n          ? arrayFunc(collection, iteratee, accumulator, initFromArray)\n          : baseReduce(collection, getCallback(iteratee, thisArg, 4), accumulator, initFromArray, eachFunc);\n      };\n    }\n\n    /**\n     * Creates a function that wraps `func` and invokes it with optional `this`\n     * binding of, partial application, and currying.\n     *\n     * @private\n     * @param {Function|string} func The function or method name to reference.\n     * @param {number} bitmask The bitmask of flags. See `createWrapper` for more details.\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param {Array} [partials] The arguments to prepend to those provided to the new function.\n     * @param {Array} [holders] The `partials` placeholder indexes.\n     * @param {Array} [partialsRight] The arguments to append to those provided to the new function.\n     * @param {Array} [holdersRight] The `partialsRight` placeholder indexes.\n     * @param {Array} [argPos] The argument positions of the new function.\n     * @param {number} [ary] The arity cap of `func`.\n     * @param {number} [arity] The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createHybridWrapper(func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity) {\n      var isAry = bitmask & ARY_FLAG,\n          isBind = bitmask & BIND_FLAG,\n          isBindKey = bitmask & BIND_KEY_FLAG,\n          isCurry = bitmask & CURRY_FLAG,\n          isCurryBound = bitmask & CURRY_BOUND_FLAG,\n          isCurryRight = bitmask & CURRY_RIGHT_FLAG,\n          Ctor = isBindKey ? undefined : createCtorWrapper(func);\n\n      function wrapper() {\n        // Avoid `arguments` object use disqualifying optimizations by\n        // converting it to an array before providing it to other functions.\n        var length = arguments.length,\n            index = length,\n            args = Array(length);\n\n        while (index--) {\n          args[index] = arguments[index];\n        }\n        if (partials) {\n          args = composeArgs(args, partials, holders);\n        }\n        if (partialsRight) {\n          args = composeArgsRight(args, partialsRight, holdersRight);\n        }\n        if (isCurry || isCurryRight) {\n          var placeholder = wrapper.placeholder,\n              argsHolders = replaceHolders(args, placeholder);\n\n          length -= argsHolders.length;\n          if (length < arity) {\n            var newArgPos = argPos ? arrayCopy(argPos) : undefined,\n                newArity = nativeMax(arity - length, 0),\n                newsHolders = isCurry ? argsHolders : undefined,\n                newHoldersRight = isCurry ? undefined : argsHolders,\n                newPartials = isCurry ? args : undefined,\n                newPartialsRight = isCurry ? undefined : args;\n\n            bitmask |= (isCurry ? PARTIAL_FLAG : PARTIAL_RIGHT_FLAG);\n            bitmask &= ~(isCurry ? PARTIAL_RIGHT_FLAG : PARTIAL_FLAG);\n\n            if (!isCurryBound) {\n              bitmask &= ~(BIND_FLAG | BIND_KEY_FLAG);\n            }\n            var newData = [func, bitmask, thisArg, newPartials, newsHolders, newPartialsRight, newHoldersRight, newArgPos, ary, newArity],\n                result = createHybridWrapper.apply(undefined, newData);\n\n            if (isLaziable(func)) {\n              setData(result, newData);\n            }\n            result.placeholder = placeholder;\n            return result;\n          }\n        }\n        var thisBinding = isBind ? thisArg : this,\n            fn = isBindKey ? thisBinding[func] : func;\n\n        if (argPos) {\n          args = reorder(args, argPos);\n        }\n        if (isAry && ary < args.length) {\n          args.length = ary;\n        }\n        if (this && this !== root && this instanceof wrapper) {\n          fn = Ctor || createCtorWrapper(func);\n        }\n        return fn.apply(thisBinding, args);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates the padding required for `string` based on the given `length`.\n     * The `chars` string is truncated if the number of characters exceeds `length`.\n     *\n     * @private\n     * @param {string} string The string to create padding for.\n     * @param {number} [length=0] The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the pad for `string`.\n     */\n    function createPadding(string, length, chars) {\n      var strLength = string.length;\n      length = +length;\n\n      if (strLength >= length || !nativeIsFinite(length)) {\n        return '';\n      }\n      var padLength = length - strLength;\n      chars = chars == null ? ' ' : (chars + '');\n      return repeat(chars, nativeCeil(padLength / chars.length)).slice(0, padLength);\n    }\n\n    /**\n     * Creates a function that wraps `func` and invokes it with the optional `this`\n     * binding of `thisArg` and the `partials` prepended to those provided to\n     * the wrapper.\n     *\n     * @private\n     * @param {Function} func The function to partially apply arguments to.\n     * @param {number} bitmask The bitmask of flags. See `createWrapper` for more details.\n     * @param {*} thisArg The `this` binding of `func`.\n     * @param {Array} partials The arguments to prepend to those provided to the new function.\n     * @returns {Function} Returns the new bound function.\n     */\n    function createPartialWrapper(func, bitmask, thisArg, partials) {\n      var isBind = bitmask & BIND_FLAG,\n          Ctor = createCtorWrapper(func);\n\n      function wrapper() {\n        // Avoid `arguments` object use disqualifying optimizations by\n        // converting it to an array before providing it `func`.\n        var argsIndex = -1,\n            argsLength = arguments.length,\n            leftIndex = -1,\n            leftLength = partials.length,\n            args = Array(leftLength + argsLength);\n\n        while (++leftIndex < leftLength) {\n          args[leftIndex] = partials[leftIndex];\n        }\n        while (argsLength--) {\n          args[leftIndex++] = arguments[++argsIndex];\n        }\n        var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n        return fn.apply(isBind ? thisArg : this, args);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a `_.ceil`, `_.floor`, or `_.round` function.\n     *\n     * @private\n     * @param {string} methodName The name of the `Math` method to use when rounding.\n     * @returns {Function} Returns the new round function.\n     */\n    function createRound(methodName) {\n      var func = Math[methodName];\n      return function(number, precision) {\n        precision = precision === undefined ? 0 : (+precision || 0);\n        if (precision) {\n          precision = pow(10, precision);\n          return func(number * precision) / precision;\n        }\n        return func(number);\n      };\n    }\n\n    /**\n     * Creates a `_.sortedIndex` or `_.sortedLastIndex` function.\n     *\n     * @private\n     * @param {boolean} [retHighest] Specify returning the highest qualified index.\n     * @returns {Function} Returns the new index function.\n     */\n    function createSortedIndex(retHighest) {\n      return function(array, value, iteratee, thisArg) {\n        var callback = getCallback(iteratee);\n        return (iteratee == null && callback === baseCallback)\n          ? binaryIndex(array, value, retHighest)\n          : binaryIndexBy(array, value, callback(iteratee, thisArg, 1), retHighest);\n      };\n    }\n\n    /**\n     * Creates a function that either curries or invokes `func` with optional\n     * `this` binding and partially applied arguments.\n     *\n     * @private\n     * @param {Function|string} func The function or method name to reference.\n     * @param {number} bitmask The bitmask of flags.\n     *  The bitmask may be composed of the following flags:\n     *     1 - `_.bind`\n     *     2 - `_.bindKey`\n     *     4 - `_.curry` or `_.curryRight` of a bound function\n     *     8 - `_.curry`\n     *    16 - `_.curryRight`\n     *    32 - `_.partial`\n     *    64 - `_.partialRight`\n     *   128 - `_.rearg`\n     *   256 - `_.ary`\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param {Array} [partials] The arguments to be partially applied.\n     * @param {Array} [holders] The `partials` placeholder indexes.\n     * @param {Array} [argPos] The argument positions of the new function.\n     * @param {number} [ary] The arity cap of `func`.\n     * @param {number} [arity] The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createWrapper(func, bitmask, thisArg, partials, holders, argPos, ary, arity) {\n      var isBindKey = bitmask & BIND_KEY_FLAG;\n      if (!isBindKey && typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      var length = partials ? partials.length : 0;\n      if (!length) {\n        bitmask &= ~(PARTIAL_FLAG | PARTIAL_RIGHT_FLAG);\n        partials = holders = undefined;\n      }\n      length -= (holders ? holders.length : 0);\n      if (bitmask & PARTIAL_RIGHT_FLAG) {\n        var partialsRight = partials,\n            holdersRight = holders;\n\n        partials = holders = undefined;\n      }\n      var data = isBindKey ? undefined : getData(func),\n          newData = [func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity];\n\n      if (data) {\n        mergeData(newData, data);\n        bitmask = newData[1];\n        arity = newData[9];\n      }\n      newData[9] = arity == null\n        ? (isBindKey ? 0 : func.length)\n        : (nativeMax(arity - length, 0) || 0);\n\n      if (bitmask == BIND_FLAG) {\n        var result = createBindWrapper(newData[0], newData[2]);\n      } else if ((bitmask == PARTIAL_FLAG || bitmask == (BIND_FLAG | PARTIAL_FLAG)) && !newData[4].length) {\n        result = createPartialWrapper.apply(undefined, newData);\n      } else {\n        result = createHybridWrapper.apply(undefined, newData);\n      }\n      var setter = data ? baseSetData : setData;\n      return setter(result, newData);\n    }\n\n    /**\n     * A specialized version of `baseIsEqualDeep` for arrays with support for\n     * partial deep comparisons.\n     *\n     * @private\n     * @param {Array} array The array to compare.\n     * @param {Array} other The other array to compare.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Function} [customizer] The function to customize comparing arrays.\n     * @param {boolean} [isLoose] Specify performing partial comparisons.\n     * @param {Array} [stackA] Tracks traversed `value` objects.\n     * @param {Array} [stackB] Tracks traversed `other` objects.\n     * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n     */\n    function equalArrays(array, other, equalFunc, customizer, isLoose, stackA, stackB) {\n      var index = -1,\n          arrLength = array.length,\n          othLength = other.length;\n\n      if (arrLength != othLength && !(isLoose && othLength > arrLength)) {\n        return false;\n      }\n      // Ignore non-index properties.\n      while (++index < arrLength) {\n        var arrValue = array[index],\n            othValue = other[index],\n            result = customizer ? customizer(isLoose ? othValue : arrValue, isLoose ? arrValue : othValue, index) : undefined;\n\n        if (result !== undefined) {\n          if (result) {\n            continue;\n          }\n          return false;\n        }\n        // Recursively compare arrays (susceptible to call stack limits).\n        if (isLoose) {\n          if (!arraySome(other, function(othValue) {\n                return arrValue === othValue || equalFunc(arrValue, othValue, customizer, isLoose, stackA, stackB);\n              })) {\n            return false;\n          }\n        } else if (!(arrValue === othValue || equalFunc(arrValue, othValue, customizer, isLoose, stackA, stackB))) {\n          return false;\n        }\n      }\n      return true;\n    }\n\n    /**\n     * A specialized version of `baseIsEqualDeep` for comparing objects of\n     * the same `toStringTag`.\n     *\n     * **Note:** This function only supports comparing values with tags of\n     * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {string} tag The `toStringTag` of the objects to compare.\n     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n     */\n    function equalByTag(object, other, tag) {\n      switch (tag) {\n        case boolTag:\n        case dateTag:\n          // Coerce dates and booleans to numbers, dates to milliseconds and booleans\n          // to `1` or `0` treating invalid dates coerced to `NaN` as not equal.\n          return +object == +other;\n\n        case errorTag:\n          return object.name == other.name && object.message == other.message;\n\n        case numberTag:\n          // Treat `NaN` vs. `NaN` as equal.\n          return (object != +object)\n            ? other != +other\n            : object == +other;\n\n        case regexpTag:\n        case stringTag:\n          // Coerce regexes to strings and treat strings primitives and string\n          // objects as equal. See https://es5.github.io/#x15.10.6.4 for more details.\n          return object == (other + '');\n      }\n      return false;\n    }\n\n    /**\n     * A specialized version of `baseIsEqualDeep` for objects with support for\n     * partial deep comparisons.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Function} [customizer] The function to customize comparing values.\n     * @param {boolean} [isLoose] Specify performing partial comparisons.\n     * @param {Array} [stackA] Tracks traversed `value` objects.\n     * @param {Array} [stackB] Tracks traversed `other` objects.\n     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n     */\n    function equalObjects(object, other, equalFunc, customizer, isLoose, stackA, stackB) {\n      var objProps = keys(object),\n          objLength = objProps.length,\n          othProps = keys(other),\n          othLength = othProps.length;\n\n      if (objLength != othLength && !isLoose) {\n        return false;\n      }\n      var index = objLength;\n      while (index--) {\n        var key = objProps[index];\n        if (!(isLoose ? key in other : hasOwnProperty.call(other, key))) {\n          return false;\n        }\n      }\n      var skipCtor = isLoose;\n      while (++index < objLength) {\n        key = objProps[index];\n        var objValue = object[key],\n            othValue = other[key],\n            result = customizer ? customizer(isLoose ? othValue : objValue, isLoose? objValue : othValue, key) : undefined;\n\n        // Recursively compare objects (susceptible to call stack limits).\n        if (!(result === undefined ? equalFunc(objValue, othValue, customizer, isLoose, stackA, stackB) : result)) {\n          return false;\n        }\n        skipCtor || (skipCtor = key == 'constructor');\n      }\n      if (!skipCtor) {\n        var objCtor = object.constructor,\n            othCtor = other.constructor;\n\n        // Non `Object` object instances with different constructors are not equal.\n        if (objCtor != othCtor &&\n            ('constructor' in object && 'constructor' in other) &&\n            !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n              typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n          return false;\n        }\n      }\n      return true;\n    }\n\n    /**\n     * Gets the appropriate \"callback\" function. If the `_.callback` method is\n     * customized this function returns the custom method, otherwise it returns\n     * the `baseCallback` function. If arguments are provided the chosen function\n     * is invoked with them and its result is returned.\n     *\n     * @private\n     * @returns {Function} Returns the chosen function or its result.\n     */\n    function getCallback(func, thisArg, argCount) {\n      var result = lodash.callback || callback;\n      result = result === callback ? baseCallback : result;\n      return argCount ? result(func, thisArg, argCount) : result;\n    }\n\n    /**\n     * Gets metadata for `func`.\n     *\n     * @private\n     * @param {Function} func The function to query.\n     * @returns {*} Returns the metadata for `func`.\n     */\n    var getData = !metaMap ? noop : function(func) {\n      return metaMap.get(func);\n    };\n\n    /**\n     * Gets the name of `func`.\n     *\n     * @private\n     * @param {Function} func The function to query.\n     * @returns {string} Returns the function name.\n     */\n    function getFuncName(func) {\n      var result = func.name,\n          array = realNames[result],\n          length = array ? array.length : 0;\n\n      while (length--) {\n        var data = array[length],\n            otherFunc = data.func;\n        if (otherFunc == null || otherFunc == func) {\n          return data.name;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Gets the appropriate \"indexOf\" function. If the `_.indexOf` method is\n     * customized this function returns the custom method, otherwise it returns\n     * the `baseIndexOf` function. If arguments are provided the chosen function\n     * is invoked with them and its result is returned.\n     *\n     * @private\n     * @returns {Function|number} Returns the chosen function or its result.\n     */\n    function getIndexOf(collection, target, fromIndex) {\n      var result = lodash.indexOf || indexOf;\n      result = result === indexOf ? baseIndexOf : result;\n      return collection ? result(collection, target, fromIndex) : result;\n    }\n\n    /**\n     * Gets the \"length\" property value of `object`.\n     *\n     * **Note:** This function is used to avoid a [JIT bug](https://bugs.webkit.org/show_bug.cgi?id=142792)\n     * that affects Safari on at least iOS 8.1-8.3 ARM64.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {*} Returns the \"length\" value.\n     */\n    var getLength = baseProperty('length');\n\n    /**\n     * Gets the propery names, values, and compare flags of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the match data of `object`.\n     */\n    function getMatchData(object) {\n      var result = pairs(object),\n          length = result.length;\n\n      while (length--) {\n        result[length][2] = isStrictComparable(result[length][1]);\n      }\n      return result;\n    }\n\n    /**\n     * Gets the native function at `key` of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {string} key The key of the method to get.\n     * @returns {*} Returns the function if it's native, else `undefined`.\n     */\n    function getNative(object, key) {\n      var value = object == null ? undefined : object[key];\n      return isNative(value) ? value : undefined;\n    }\n\n    /**\n     * Gets the view, applying any `transforms` to the `start` and `end` positions.\n     *\n     * @private\n     * @param {number} start The start of the view.\n     * @param {number} end The end of the view.\n     * @param {Array} transforms The transformations to apply to the view.\n     * @returns {Object} Returns an object containing the `start` and `end`\n     *  positions of the view.\n     */\n    function getView(start, end, transforms) {\n      var index = -1,\n          length = transforms.length;\n\n      while (++index < length) {\n        var data = transforms[index],\n            size = data.size;\n\n        switch (data.type) {\n          case 'drop':      start += size; break;\n          case 'dropRight': end -= size; break;\n          case 'take':      end = nativeMin(end, start + size); break;\n          case 'takeRight': start = nativeMax(start, end - size); break;\n        }\n      }\n      return { 'start': start, 'end': end };\n    }\n\n    /**\n     * Initializes an array clone.\n     *\n     * @private\n     * @param {Array} array The array to clone.\n     * @returns {Array} Returns the initialized clone.\n     */\n    function initCloneArray(array) {\n      var length = array.length,\n          result = new array.constructor(length);\n\n      // Add array properties assigned by `RegExp#exec`.\n      if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n        result.index = array.index;\n        result.input = array.input;\n      }\n      return result;\n    }\n\n    /**\n     * Initializes an object clone.\n     *\n     * @private\n     * @param {Object} object The object to clone.\n     * @returns {Object} Returns the initialized clone.\n     */\n    function initCloneObject(object) {\n      var Ctor = object.constructor;\n      if (!(typeof Ctor == 'function' && Ctor instanceof Ctor)) {\n        Ctor = Object;\n      }\n      return new Ctor;\n    }\n\n    /**\n     * Initializes an object clone based on its `toStringTag`.\n     *\n     * **Note:** This function only supports cloning values with tags of\n     * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n     *\n     * @private\n     * @param {Object} object The object to clone.\n     * @param {string} tag The `toStringTag` of the object to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Object} Returns the initialized clone.\n     */\n    function initCloneByTag(object, tag, isDeep) {\n      var Ctor = object.constructor;\n      switch (tag) {\n        case arrayBufferTag:\n          return bufferClone(object);\n\n        case boolTag:\n        case dateTag:\n          return new Ctor(+object);\n\n        case float32Tag: case float64Tag:\n        case int8Tag: case int16Tag: case int32Tag:\n        case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n          var buffer = object.buffer;\n          return new Ctor(isDeep ? bufferClone(buffer) : buffer, object.byteOffset, object.length);\n\n        case numberTag:\n        case stringTag:\n          return new Ctor(object);\n\n        case regexpTag:\n          var result = new Ctor(object.source, reFlags.exec(object));\n          result.lastIndex = object.lastIndex;\n      }\n      return result;\n    }\n\n    /**\n     * Invokes the method at `path` on `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the method to invoke.\n     * @param {Array} args The arguments to invoke the method with.\n     * @returns {*} Returns the result of the invoked method.\n     */\n    function invokePath(object, path, args) {\n      if (object != null && !isKey(path, object)) {\n        path = toPath(path);\n        object = path.length == 1 ? object : baseGet(object, baseSlice(path, 0, -1));\n        path = last(path);\n      }\n      var func = object == null ? object : object[path];\n      return func == null ? undefined : func.apply(object, args);\n    }\n\n    /**\n     * Checks if `value` is array-like.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n     */\n    function isArrayLike(value) {\n      return value != null && isLength(getLength(value));\n    }\n\n    /**\n     * Checks if `value` is a valid array-like index.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n     * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n     */\n    function isIndex(value, length) {\n      value = (typeof value == 'number' || reIsUint.test(value)) ? +value : -1;\n      length = length == null ? MAX_SAFE_INTEGER : length;\n      return value > -1 && value % 1 == 0 && value < length;\n    }\n\n    /**\n     * Checks if the provided arguments are from an iteratee call.\n     *\n     * @private\n     * @param {*} value The potential iteratee value argument.\n     * @param {*} index The potential iteratee index or key argument.\n     * @param {*} object The potential iteratee object argument.\n     * @returns {boolean} Returns `true` if the arguments are from an iteratee call, else `false`.\n     */\n    function isIterateeCall(value, index, object) {\n      if (!isObject(object)) {\n        return false;\n      }\n      var type = typeof index;\n      if (type == 'number'\n          ? (isArrayLike(object) && isIndex(index, object.length))\n          : (type == 'string' && index in object)) {\n        var other = object[index];\n        return value === value ? (value === other) : (other !== other);\n      }\n      return false;\n    }\n\n    /**\n     * Checks if `value` is a property name and not a property path.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @param {Object} [object] The object to query keys on.\n     * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n     */\n    function isKey(value, object) {\n      var type = typeof value;\n      if ((type == 'string' && reIsPlainProp.test(value)) || type == 'number') {\n        return true;\n      }\n      if (isArray(value)) {\n        return false;\n      }\n      var result = !reIsDeepProp.test(value);\n      return result || (object != null && value in toObject(object));\n    }\n\n    /**\n     * Checks if `func` has a lazy counterpart.\n     *\n     * @private\n     * @param {Function} func The function to check.\n     * @returns {boolean} Returns `true` if `func` has a lazy counterpart, else `false`.\n     */\n    function isLaziable(func) {\n      var funcName = getFuncName(func);\n      if (!(funcName in LazyWrapper.prototype)) {\n        return false;\n      }\n      var other = lodash[funcName];\n      if (func === other) {\n        return true;\n      }\n      var data = getData(other);\n      return !!data && func === data[0];\n    }\n\n    /**\n     * Checks if `value` is a valid array-like length.\n     *\n     * **Note:** This function is based on [`ToLength`](http://ecma-international.org/ecma-262/6.0/#sec-tolength).\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n     */\n    function isLength(value) {\n      return typeof value == 'number' && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n    }\n\n    /**\n     * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` if suitable for strict\n     *  equality comparisons, else `false`.\n     */\n    function isStrictComparable(value) {\n      return value === value && !isObject(value);\n    }\n\n    /**\n     * Merges the function metadata of `source` into `data`.\n     *\n     * Merging metadata reduces the number of wrappers required to invoke a function.\n     * This is possible because methods like `_.bind`, `_.curry`, and `_.partial`\n     * may be applied regardless of execution order. Methods like `_.ary` and `_.rearg`\n     * augment function arguments, making the order in which they are executed important,\n     * preventing the merging of metadata. However, we make an exception for a safe\n     * common case where curried functions have `_.ary` and or `_.rearg` applied.\n     *\n     * @private\n     * @param {Array} data The destination metadata.\n     * @param {Array} source The source metadata.\n     * @returns {Array} Returns `data`.\n     */\n    function mergeData(data, source) {\n      var bitmask = data[1],\n          srcBitmask = source[1],\n          newBitmask = bitmask | srcBitmask,\n          isCommon = newBitmask < ARY_FLAG;\n\n      var isCombo =\n        (srcBitmask == ARY_FLAG && bitmask == CURRY_FLAG) ||\n        (srcBitmask == ARY_FLAG && bitmask == REARG_FLAG && data[7].length <= source[8]) ||\n        (srcBitmask == (ARY_FLAG | REARG_FLAG) && bitmask == CURRY_FLAG);\n\n      // Exit early if metadata can't be merged.\n      if (!(isCommon || isCombo)) {\n        return data;\n      }\n      // Use source `thisArg` if available.\n      if (srcBitmask & BIND_FLAG) {\n        data[2] = source[2];\n        // Set when currying a bound function.\n        newBitmask |= (bitmask & BIND_FLAG) ? 0 : CURRY_BOUND_FLAG;\n      }\n      // Compose partial arguments.\n      var value = source[3];\n      if (value) {\n        var partials = data[3];\n        data[3] = partials ? composeArgs(partials, value, source[4]) : arrayCopy(value);\n        data[4] = partials ? replaceHolders(data[3], PLACEHOLDER) : arrayCopy(source[4]);\n      }\n      // Compose partial right arguments.\n      value = source[5];\n      if (value) {\n        partials = data[5];\n        data[5] = partials ? composeArgsRight(partials, value, source[6]) : arrayCopy(value);\n        data[6] = partials ? replaceHolders(data[5], PLACEHOLDER) : arrayCopy(source[6]);\n      }\n      // Use source `argPos` if available.\n      value = source[7];\n      if (value) {\n        data[7] = arrayCopy(value);\n      }\n      // Use source `ary` if it's smaller.\n      if (srcBitmask & ARY_FLAG) {\n        data[8] = data[8] == null ? source[8] : nativeMin(data[8], source[8]);\n      }\n      // Use source `arity` if one is not provided.\n      if (data[9] == null) {\n        data[9] = source[9];\n      }\n      // Use source `func` and merge bitmasks.\n      data[0] = source[0];\n      data[1] = newBitmask;\n\n      return data;\n    }\n\n    /**\n     * Used by `_.defaultsDeep` to customize its `_.merge` use.\n     *\n     * @private\n     * @param {*} objectValue The destination object property value.\n     * @param {*} sourceValue The source object property value.\n     * @returns {*} Returns the value to assign to the destination object.\n     */\n    function mergeDefaults(objectValue, sourceValue) {\n      return objectValue === undefined ? sourceValue : merge(objectValue, sourceValue, mergeDefaults);\n    }\n\n    /**\n     * A specialized version of `_.pick` which picks `object` properties specified\n     * by `props`.\n     *\n     * @private\n     * @param {Object} object The source object.\n     * @param {string[]} props The property names to pick.\n     * @returns {Object} Returns the new object.\n     */\n    function pickByArray(object, props) {\n      object = toObject(object);\n\n      var index = -1,\n          length = props.length,\n          result = {};\n\n      while (++index < length) {\n        var key = props[index];\n        if (key in object) {\n          result[key] = object[key];\n        }\n      }\n      return result;\n    }\n\n    /**\n     * A specialized version of `_.pick` which picks `object` properties `predicate`\n     * returns truthy for.\n     *\n     * @private\n     * @param {Object} object The source object.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {Object} Returns the new object.\n     */\n    function pickByCallback(object, predicate) {\n      var result = {};\n      baseForIn(object, function(value, key, object) {\n        if (predicate(value, key, object)) {\n          result[key] = value;\n        }\n      });\n      return result;\n    }\n\n    /**\n     * Reorder `array` according to the specified indexes where the element at\n     * the first index is assigned as the first element, the element at\n     * the second index is assigned as the second element, and so on.\n     *\n     * @private\n     * @param {Array} array The array to reorder.\n     * @param {Array} indexes The arranged array indexes.\n     * @returns {Array} Returns `array`.\n     */\n    function reorder(array, indexes) {\n      var arrLength = array.length,\n          length = nativeMin(indexes.length, arrLength),\n          oldArray = arrayCopy(array);\n\n      while (length--) {\n        var index = indexes[length];\n        array[length] = isIndex(index, arrLength) ? oldArray[index] : undefined;\n      }\n      return array;\n    }\n\n    /**\n     * Sets metadata for `func`.\n     *\n     * **Note:** If this function becomes hot, i.e. is invoked a lot in a short\n     * period of time, it will trip its breaker and transition to an identity function\n     * to avoid garbage collection pauses in V8. See [V8 issue 2070](https://code.google.com/p/v8/issues/detail?id=2070)\n     * for more details.\n     *\n     * @private\n     * @param {Function} func The function to associate metadata with.\n     * @param {*} data The metadata.\n     * @returns {Function} Returns `func`.\n     */\n    var setData = (function() {\n      var count = 0,\n          lastCalled = 0;\n\n      return function(key, value) {\n        var stamp = now(),\n            remaining = HOT_SPAN - (stamp - lastCalled);\n\n        lastCalled = stamp;\n        if (remaining > 0) {\n          if (++count >= HOT_COUNT) {\n            return key;\n          }\n        } else {\n          count = 0;\n        }\n        return baseSetData(key, value);\n      };\n    }());\n\n    /**\n     * A fallback implementation of `Object.keys` which creates an array of the\n     * own enumerable property names of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     */\n    function shimKeys(object) {\n      var props = keysIn(object),\n          propsLength = props.length,\n          length = propsLength && object.length;\n\n      var allowIndexes = !!length && isLength(length) &&\n        (isArray(object) || isArguments(object));\n\n      var index = -1,\n          result = [];\n\n      while (++index < propsLength) {\n        var key = props[index];\n        if ((allowIndexes && isIndex(key, length)) || hasOwnProperty.call(object, key)) {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Converts `value` to an array-like object if it's not one.\n     *\n     * @private\n     * @param {*} value The value to process.\n     * @returns {Array|Object} Returns the array-like object.\n     */\n    function toIterable(value) {\n      if (value == null) {\n        return [];\n      }\n      if (!isArrayLike(value)) {\n        return values(value);\n      }\n      return isObject(value) ? value : Object(value);\n    }\n\n    /**\n     * Converts `value` to an object if it's not one.\n     *\n     * @private\n     * @param {*} value The value to process.\n     * @returns {Object} Returns the object.\n     */\n    function toObject(value) {\n      return isObject(value) ? value : Object(value);\n    }\n\n    /**\n     * Converts `value` to property path array if it's not one.\n     *\n     * @private\n     * @param {*} value The value to process.\n     * @returns {Array} Returns the property path array.\n     */\n    function toPath(value) {\n      if (isArray(value)) {\n        return value;\n      }\n      var result = [];\n      baseToString(value).replace(rePropName, function(match, number, quote, string) {\n        result.push(quote ? string.replace(reEscapeChar, '$1') : (number || match));\n      });\n      return result;\n    }\n\n    /**\n     * Creates a clone of `wrapper`.\n     *\n     * @private\n     * @param {Object} wrapper The wrapper to clone.\n     * @returns {Object} Returns the cloned wrapper.\n     */\n    function wrapperClone(wrapper) {\n      return wrapper instanceof LazyWrapper\n        ? wrapper.clone()\n        : new LodashWrapper(wrapper.__wrapped__, wrapper.__chain__, arrayCopy(wrapper.__actions__));\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an array of elements split into groups the length of `size`.\n     * If `collection` can't be split evenly, the final chunk will be the remaining\n     * elements.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to process.\n     * @param {number} [size=1] The length of each chunk.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.\n     * @returns {Array} Returns the new array containing chunks.\n     * @example\n     *\n     * _.chunk(['a', 'b', 'c', 'd'], 2);\n     * // => [['a', 'b'], ['c', 'd']]\n     *\n     * _.chunk(['a', 'b', 'c', 'd'], 3);\n     * // => [['a', 'b', 'c'], ['d']]\n     */\n    function chunk(array, size, guard) {\n      if (guard ? isIterateeCall(array, size, guard) : size == null) {\n        size = 1;\n      } else {\n        size = nativeMax(nativeFloor(size) || 1, 1);\n      }\n      var index = 0,\n          length = array ? array.length : 0,\n          resIndex = -1,\n          result = Array(nativeCeil(length / size));\n\n      while (index < length) {\n        result[++resIndex] = baseSlice(array, index, (index += size));\n      }\n      return result;\n    }\n\n    /**\n     * Creates an array with all falsey values removed. The values `false`, `null`,\n     * `0`, `\"\"`, `undefined`, and `NaN` are falsey.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to compact.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * _.compact([0, 1, false, 2, '', 3]);\n     * // => [1, 2, 3]\n     */\n    function compact(array) {\n      var index = -1,\n          length = array ? array.length : 0,\n          resIndex = -1,\n          result = [];\n\n      while (++index < length) {\n        var value = array[index];\n        if (value) {\n          result[++resIndex] = value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Creates an array of unique `array` values not included in the other\n     * provided arrays using [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {...Array} [values] The arrays of values to exclude.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * _.difference([1, 2, 3], [4, 2]);\n     * // => [1, 3]\n     */\n    var difference = restParam(function(array, values) {\n      return (isObjectLike(array) && isArrayLike(array))\n        ? baseDifference(array, baseFlatten(values, false, true))\n        : [];\n    });\n\n    /**\n     * Creates a slice of `array` with `n` elements dropped from the beginning.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to drop.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.drop([1, 2, 3]);\n     * // => [2, 3]\n     *\n     * _.drop([1, 2, 3], 2);\n     * // => [3]\n     *\n     * _.drop([1, 2, 3], 5);\n     * // => []\n     *\n     * _.drop([1, 2, 3], 0);\n     * // => [1, 2, 3]\n     */\n    function drop(array, n, guard) {\n      var length = array ? array.length : 0;\n      if (!length) {\n        return [];\n      }\n      if (guard ? isIterateeCall(array, n, guard) : n == null) {\n        n = 1;\n      }\n      return baseSlice(array, n < 0 ? 0 : n);\n    }\n\n    /**\n     * Creates a slice of `array` with `n` elements dropped from the end.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to drop.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.dropRight([1, 2, 3]);\n     * // => [1, 2]\n     *\n     * _.dropRight([1, 2, 3], 2);\n     * // => [1]\n     *\n     * _.dropRight([1, 2, 3], 5);\n     * // => []\n     *\n     * _.dropRight([1, 2, 3], 0);\n     * // => [1, 2, 3]\n     */\n    function dropRight(array, n, guard) {\n      var length = array ? array.length : 0;\n      if (!length) {\n        return [];\n      }\n      if (guard ? isIterateeCall(array, n, guard) : n == null) {\n        n = 1;\n      }\n      n = length - (+n || 0);\n      return baseSlice(array, 0, n < 0 ? 0 : n);\n    }\n\n    /**\n     * Creates a slice of `array` excluding elements dropped from the end.\n     * Elements are dropped until `predicate` returns falsey. The predicate is\n     * bound to `thisArg` and invoked with three arguments: (value, index, array).\n     *\n     * If a property name is provided for `predicate` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `predicate` the created `_.matches` style\n     * callback returns `true` for elements that match the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function|Object|string} [predicate=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `predicate`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.dropRightWhile([1, 2, 3], function(n) {\n     *   return n > 1;\n     * });\n     * // => [1]\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': true },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': false }\n     * ];\n     *\n     * // using the `_.matches` callback shorthand\n     * _.pluck(_.dropRightWhile(users, { 'user': 'pebbles', 'active': false }), 'user');\n     * // => ['barney', 'fred']\n     *\n     * // using the `_.matchesProperty` callback shorthand\n     * _.pluck(_.dropRightWhile(users, 'active', false), 'user');\n     * // => ['barney']\n     *\n     * // using the `_.property` callback shorthand\n     * _.pluck(_.dropRightWhile(users, 'active'), 'user');\n     * // => ['barney', 'fred', 'pebbles']\n     */\n    function dropRightWhile(array, predicate, thisArg) {\n      return (array && array.length)\n        ? baseWhile(array, getCallback(predicate, thisArg, 3), true, true)\n        : [];\n    }\n\n    /**\n     * Creates a slice of `array` excluding elements dropped from the beginning.\n     * Elements are dropped until `predicate` returns falsey. The predicate is\n     * bound to `thisArg` and invoked with three arguments: (value, index, array).\n     *\n     * If a property name is provided for `predicate` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `predicate` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function|Object|string} [predicate=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `predicate`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.dropWhile([1, 2, 3], function(n) {\n     *   return n < 3;\n     * });\n     * // => [3]\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': false },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': true }\n     * ];\n     *\n     * // using the `_.matches` callback shorthand\n     * _.pluck(_.dropWhile(users, { 'user': 'barney', 'active': false }), 'user');\n     * // => ['fred', 'pebbles']\n     *\n     * // using the `_.matchesProperty` callback shorthand\n     * _.pluck(_.dropWhile(users, 'active', false), 'user');\n     * // => ['pebbles']\n     *\n     * // using the `_.property` callback shorthand\n     * _.pluck(_.dropWhile(users, 'active'), 'user');\n     * // => ['barney', 'fred', 'pebbles']\n     */\n    function dropWhile(array, predicate, thisArg) {\n      return (array && array.length)\n        ? baseWhile(array, getCallback(predicate, thisArg, 3), true)\n        : [];\n    }\n\n    /**\n     * Fills elements of `array` with `value` from `start` up to, but not\n     * including, `end`.\n     *\n     * **Note:** This method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to fill.\n     * @param {*} value The value to fill `array` with.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [1, 2, 3];\n     *\n     * _.fill(array, 'a');\n     * console.log(array);\n     * // => ['a', 'a', 'a']\n     *\n     * _.fill(Array(3), 2);\n     * // => [2, 2, 2]\n     *\n     * _.fill([4, 6, 8], '*', 1, 2);\n     * // => [4, '*', 8]\n     */\n    function fill(array, value, start, end) {\n      var length = array ? array.length : 0;\n      if (!length) {\n        return [];\n      }\n      if (start && typeof start != 'number' && isIterateeCall(array, value, start)) {\n        start = 0;\n        end = length;\n      }\n      return baseFill(array, value, start, end);\n    }\n\n    /**\n     * This method is like `_.find` except that it returns the index of the first\n     * element `predicate` returns truthy for instead of the element itself.\n     *\n     * If a property name is provided for `predicate` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `predicate` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to search.\n     * @param {Function|Object|string} [predicate=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `predicate`.\n     * @returns {number} Returns the index of the found element, else `-1`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': false },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': true }\n     * ];\n     *\n     * _.findIndex(users, function(chr) {\n     *   return chr.user == 'barney';\n     * });\n     * // => 0\n     *\n     * // using the `_.matches` callback shorthand\n     * _.findIndex(users, { 'user': 'fred', 'active': false });\n     * // => 1\n     *\n     * // using the `_.matchesProperty` callback shorthand\n     * _.findIndex(users, 'active', false);\n     * // => 0\n     *\n     * // using the `_.property` callback shorthand\n     * _.findIndex(users, 'active');\n     * // => 2\n     */\n    var findIndex = createFindIndex();\n\n    /**\n     * This method is like `_.findIndex` except that it iterates over elements\n     * of `collection` from right to left.\n     *\n     * If a property name is provided for `predicate` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `predicate` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to search.\n     * @param {Function|Object|string} [predicate=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `predicate`.\n     * @returns {number} Returns the index of the found element, else `-1`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': true },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': false }\n     * ];\n     *\n     * _.findLastIndex(users, function(chr) {\n     *   return chr.user == 'pebbles';\n     * });\n     * // => 2\n     *\n     * // using the `_.matches` callback shorthand\n     * _.findLastIndex(users, { 'user': 'barney', 'active': true });\n     * // => 0\n     *\n     * // using the `_.matchesProperty` callback shorthand\n     * _.findLastIndex(users, 'active', false);\n     * // => 2\n     *\n     * // using the `_.property` callback shorthand\n     * _.findLastIndex(users, 'active');\n     * // => 0\n     */\n    var findLastIndex = createFindIndex(true);\n\n    /**\n     * Gets the first element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @alias head\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {*} Returns the first element of `array`.\n     * @example\n     *\n     * _.first([1, 2, 3]);\n     * // => 1\n     *\n     * _.first([]);\n     * // => undefined\n     */\n    function first(array) {\n      return array ? array[0] : undefined;\n    }\n\n    /**\n     * Flattens a nested array. If `isDeep` is `true` the array is recursively\n     * flattened, otherwise it is only flattened a single level.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to flatten.\n     * @param {boolean} [isDeep] Specify a deep flatten.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * _.flatten([1, [2, 3, [4]]]);\n     * // => [1, 2, 3, [4]]\n     *\n     * // using `isDeep`\n     * _.flatten([1, [2, 3, [4]]], true);\n     * // => [1, 2, 3, 4]\n     */\n    function flatten(array, isDeep, guard) {\n      var length = array ? array.length : 0;\n      if (guard && isIterateeCall(array, isDeep, guard)) {\n        isDeep = false;\n      }\n      return length ? baseFlatten(array, isDeep) : [];\n    }\n\n    /**\n     * Recursively flattens a nested array.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to recursively flatten.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * _.flattenDeep([1, [2, 3, [4]]]);\n     * // => [1, 2, 3, 4]\n     */\n    function flattenDeep(array) {\n      var length = array ? array.length : 0;\n      return length ? baseFlatten(array, true) : [];\n    }\n\n    /**\n     * Gets the index at which the first occurrence of `value` is found in `array`\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n     * for equality comparisons. If `fromIndex` is negative, it is used as the offset\n     * from the end of `array`. If `array` is sorted providing `true` for `fromIndex`\n     * performs a faster binary search.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to search.\n     * @param {*} value The value to search for.\n     * @param {boolean|number} [fromIndex=0] The index to search from or `true`\n     *  to perform a binary search on a sorted array.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.indexOf([1, 2, 1, 2], 2);\n     * // => 1\n     *\n     * // using `fromIndex`\n     * _.indexOf([1, 2, 1, 2], 2, 2);\n     * // => 3\n     *\n     * // performing a binary search\n     * _.indexOf([1, 1, 2, 2], 2, true);\n     * // => 2\n     */\n    function indexOf(array, value, fromIndex) {\n      var length = array ? array.length : 0;\n      if (!length) {\n        return -1;\n      }\n      if (typeof fromIndex == 'number') {\n        fromIndex = fromIndex < 0 ? nativeMax(length + fromIndex, 0) : fromIndex;\n      } else if (fromIndex) {\n        var index = binaryIndex(array, value);\n        if (index < length &&\n            (value === value ? (value === array[index]) : (array[index] !== array[index]))) {\n          return index;\n        }\n        return -1;\n      }\n      return baseIndexOf(array, value, fromIndex || 0);\n    }\n\n    /**\n     * Gets all but the last element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.initial([1, 2, 3]);\n     * // => [1, 2]\n     */\n    function initial(array) {\n      return dropRight(array, 1);\n    }\n\n    /**\n     * Creates an array of unique values that are included in all of the provided\n     * arrays using [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @returns {Array} Returns the new array of shared values.\n     * @example\n     * _.intersection([1, 2], [4, 2], [2, 1]);\n     * // => [2]\n     */\n    var intersection = restParam(function(arrays) {\n      var othLength = arrays.length,\n          othIndex = othLength,\n          caches = Array(length),\n          indexOf = getIndexOf(),\n          isCommon = indexOf == baseIndexOf,\n          result = [];\n\n      while (othIndex--) {\n        var value = arrays[othIndex] = isArrayLike(value = arrays[othIndex]) ? value : [];\n        caches[othIndex] = (isCommon && value.length >= 120) ? createCache(othIndex && value) : null;\n      }\n      var array = arrays[0],\n          index = -1,\n          length = array ? array.length : 0,\n          seen = caches[0];\n\n      outer:\n      while (++index < length) {\n        value = array[index];\n        if ((seen ? cacheIndexOf(seen, value) : indexOf(result, value, 0)) < 0) {\n          var othIndex = othLength;\n          while (--othIndex) {\n            var cache = caches[othIndex];\n            if ((cache ? cacheIndexOf(cache, value) : indexOf(arrays[othIndex], value, 0)) < 0) {\n              continue outer;\n            }\n          }\n          if (seen) {\n            seen.push(value);\n          }\n          result.push(value);\n        }\n      }\n      return result;\n    });\n\n    /**\n     * Gets the last element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {*} Returns the last element of `array`.\n     * @example\n     *\n     * _.last([1, 2, 3]);\n     * // => 3\n     */\n    function last(array) {\n      var length = array ? array.length : 0;\n      return length ? array[length - 1] : undefined;\n    }\n\n    /**\n     * This method is like `_.indexOf` except that it iterates over elements of\n     * `array` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to search.\n     * @param {*} value The value to search for.\n     * @param {boolean|number} [fromIndex=array.length-1] The index to search from\n     *  or `true` to perform a binary search on a sorted array.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.lastIndexOf([1, 2, 1, 2], 2);\n     * // => 3\n     *\n     * // using `fromIndex`\n     * _.lastIndexOf([1, 2, 1, 2], 2, 2);\n     * // => 1\n     *\n     * // performing a binary search\n     * _.lastIndexOf([1, 1, 2, 2], 2, true);\n     * // => 3\n     */\n    function lastIndexOf(array, value, fromIndex) {\n      var length = array ? array.length : 0;\n      if (!length) {\n        return -1;\n      }\n      var index = length;\n      if (typeof fromIndex == 'number') {\n        index = (fromIndex < 0 ? nativeMax(length + fromIndex, 0) : nativeMin(fromIndex || 0, length - 1)) + 1;\n      } else if (fromIndex) {\n        index = binaryIndex(array, value, true) - 1;\n        var other = array[index];\n        if (value === value ? (value === other) : (other !== other)) {\n          return index;\n        }\n        return -1;\n      }\n      if (value !== value) {\n        return indexOfNaN(array, index, true);\n      }\n      while (index--) {\n        if (array[index] === value) {\n          return index;\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * Removes all provided values from `array` using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * **Note:** Unlike `_.without`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {...*} [values] The values to remove.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [1, 2, 3, 1, 2, 3];\n     *\n     * _.pull(array, 2, 3);\n     * console.log(array);\n     * // => [1, 1]\n     */\n    function pull() {\n      var args = arguments,\n          array = args[0];\n\n      if (!(array && array.length)) {\n        return array;\n      }\n      var index = 0,\n          indexOf = getIndexOf(),\n          length = args.length;\n\n      while (++index < length) {\n        var fromIndex = 0,\n            value = args[index];\n\n        while ((fromIndex = indexOf(array, value, fromIndex)) > -1) {\n          splice.call(array, fromIndex, 1);\n        }\n      }\n      return array;\n    }\n\n    /**\n     * Removes elements from `array` corresponding to the given indexes and returns\n     * an array of the removed elements. Indexes may be specified as an array of\n     * indexes or as individual arguments.\n     *\n     * **Note:** Unlike `_.at`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {...(number|number[])} [indexes] The indexes of elements to remove,\n     *  specified as individual indexes or arrays of indexes.\n     * @returns {Array} Returns the new array of removed elements.\n     * @example\n     *\n     * var array = [5, 10, 15, 20];\n     * var evens = _.pullAt(array, 1, 3);\n     *\n     * console.log(array);\n     * // => [5, 15]\n     *\n     * console.log(evens);\n     * // => [10, 20]\n     */\n    var pullAt = restParam(function(array, indexes) {\n      indexes = baseFlatten(indexes);\n\n      var result = baseAt(array, indexes);\n      basePullAt(array, indexes.sort(baseCompareAscending));\n      return result;\n    });\n\n    /**\n     * Removes all elements from `array` that `predicate` returns truthy for\n     * and returns an array of the removed elements. The predicate is bound to\n     * `thisArg` and invoked with three arguments: (value, index, array).\n     *\n     * If a property name is provided for `predicate` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `predicate` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * **Note:** Unlike `_.filter`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {Function|Object|string} [predicate=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `predicate`.\n     * @returns {Array} Returns the new array of removed elements.\n     * @example\n     *\n     * var array = [1, 2, 3, 4];\n     * var evens = _.remove(array, function(n) {\n     *   return n % 2 == 0;\n     * });\n     *\n     * console.log(array);\n     * // => [1, 3]\n     *\n     * console.log(evens);\n     * // => [2, 4]\n     */\n    function remove(array, predicate, thisArg) {\n      var result = [];\n      if (!(array && array.length)) {\n        return result;\n      }\n      var index = -1,\n          indexes = [],\n          length = array.length;\n\n      predicate = getCallback(predicate, thisArg, 3);\n      while (++index < length) {\n        var value = array[index];\n        if (predicate(value, index, array)) {\n          result.push(value);\n          indexes.push(index);\n        }\n      }\n      basePullAt(array, indexes);\n      return result;\n    }\n\n    /**\n     * Gets all but the first element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @alias tail\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.rest([1, 2, 3]);\n     * // => [2, 3]\n     */\n    function rest(array) {\n      return drop(array, 1);\n    }\n\n    /**\n     * Creates a slice of `array` from `start` up to, but not including, `end`.\n     *\n     * **Note:** This method is used instead of `Array#slice` to support node\n     * lists in IE < 9 and to ensure dense arrays are returned.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to slice.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns the slice of `array`.\n     */\n    function slice(array, start, end) {\n      var length = array ? array.length : 0;\n      if (!length) {\n        return [];\n      }\n      if (end && typeof end != 'number' && isIterateeCall(array, start, end)) {\n        start = 0;\n        end = length;\n      }\n      return baseSlice(array, start, end);\n    }\n\n    /**\n     * Uses a binary search to determine the lowest index at which `value` should\n     * be inserted into `array` in order to maintain its sort order. If an iteratee\n     * function is provided it is invoked for `value` and each element of `array`\n     * to compute their sort ranking. The iteratee is bound to `thisArg` and\n     * invoked with one argument; (value).\n     *\n     * If a property name is provided for `iteratee` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `iteratee` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {Function|Object|string} [iteratee=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * _.sortedIndex([30, 50], 40);\n     * // => 1\n     *\n     * _.sortedIndex([4, 4, 5, 5], 5);\n     * // => 2\n     *\n     * var dict = { 'data': { 'thirty': 30, 'forty': 40, 'fifty': 50 } };\n     *\n     * // using an iteratee function\n     * _.sortedIndex(['thirty', 'fifty'], 'forty', function(word) {\n     *   return this.data[word];\n     * }, dict);\n     * // => 1\n     *\n     * // using the `_.property` callback shorthand\n     * _.sortedIndex([{ 'x': 30 }, { 'x': 50 }], { 'x': 40 }, 'x');\n     * // => 1\n     */\n    var sortedIndex = createSortedIndex();\n\n    /**\n     * This method is like `_.sortedIndex` except that it returns the highest\n     * index at which `value` should be inserted into `array` in order to\n     * maintain its sort order.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {Function|Object|string} [iteratee=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * _.sortedLastIndex([4, 4, 5, 5], 5);\n     * // => 4\n     */\n    var sortedLastIndex = createSortedIndex(true);\n\n    /**\n     * Creates a slice of `array` with `n` elements taken from the beginning.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to take.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.take([1, 2, 3]);\n     * // => [1]\n     *\n     * _.take([1, 2, 3], 2);\n     * // => [1, 2]\n     *\n     * _.take([1, 2, 3], 5);\n     * // => [1, 2, 3]\n     *\n     * _.take([1, 2, 3], 0);\n     * // => []\n     */\n    function take(array, n, guard) {\n      var length = array ? array.length : 0;\n      if (!length) {\n        return [];\n      }\n      if (guard ? isIterateeCall(array, n, guard) : n == null) {\n        n = 1;\n      }\n      return baseSlice(array, 0, n < 0 ? 0 : n);\n    }\n\n    /**\n     * Creates a slice of `array` with `n` elements taken from the end.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to take.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.takeRight([1, 2, 3]);\n     * // => [3]\n     *\n     * _.takeRight([1, 2, 3], 2);\n     * // => [2, 3]\n     *\n     * _.takeRight([1, 2, 3], 5);\n     * // => [1, 2, 3]\n     *\n     * _.takeRight([1, 2, 3], 0);\n     * // => []\n     */\n    function takeRight(array, n, guard) {\n      var length = array ? array.length : 0;\n      if (!length) {\n        return [];\n      }\n      if (guard ? isIterateeCall(array, n, guard) : n == null) {\n        n = 1;\n      }\n      n = length - (+n || 0);\n      return baseSlice(array, n < 0 ? 0 : n);\n    }\n\n    /**\n     * Creates a slice of `array` with elements taken from the end. Elements are\n     * taken until `predicate` returns falsey. The predicate is bound to `thisArg`\n     * and invoked with three arguments: (value, index, array).\n     *\n     * If a property name is provided for `predicate` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `predicate` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function|Object|string} [predicate=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `predicate`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.takeRightWhile([1, 2, 3], function(n) {\n     *   return n > 1;\n     * });\n     * // => [2, 3]\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': true },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': false }\n     * ];\n     *\n     * // using the `_.matches` callback shorthand\n     * _.pluck(_.takeRightWhile(users, { 'user': 'pebbles', 'active': false }), 'user');\n     * // => ['pebbles']\n     *\n     * // using the `_.matchesProperty` callback shorthand\n     * _.pluck(_.takeRightWhile(users, 'active', false), 'user');\n     * // => ['fred', 'pebbles']\n     *\n     * // using the `_.property` callback shorthand\n     * _.pluck(_.takeRightWhile(users, 'active'), 'user');\n     * // => []\n     */\n    function takeRightWhile(array, predicate, thisArg) {\n      return (array && array.length)\n        ? baseWhile(array, getCallback(predicate, thisArg, 3), false, true)\n        : [];\n    }\n\n    /**\n     * Creates a slice of `array` with elements taken from the beginning. Elements\n     * are taken until `predicate` returns falsey. The predicate is bound to\n     * `thisArg` and invoked with three arguments: (value, index, array).\n     *\n     * If a property name is provided for `predicate` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `predicate` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function|Object|string} [predicate=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `predicate`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.takeWhile([1, 2, 3], function(n) {\n     *   return n < 3;\n     * });\n     * // => [1, 2]\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': false },\n     *   { 'user': 'fred',    'active': false},\n     *   { 'user': 'pebbles', 'active': true }\n     * ];\n     *\n     * // using the `_.matches` callback shorthand\n     * _.pluck(_.takeWhile(users, { 'user': 'barney', 'active': false }), 'user');\n     * // => ['barney']\n     *\n     * // using the `_.matchesProperty` callback shorthand\n     * _.pluck(_.takeWhile(users, 'active', false), 'user');\n     * // => ['barney', 'fred']\n     *\n     * // using the `_.property` callback shorthand\n     * _.pluck(_.takeWhile(users, 'active'), 'user');\n     * // => []\n     */\n    function takeWhile(array, predicate, thisArg) {\n      return (array && array.length)\n        ? baseWhile(array, getCallback(predicate, thisArg, 3))\n        : [];\n    }\n\n    /**\n     * Creates an array of unique values, in order, from all of the provided arrays\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @returns {Array} Returns the new array of combined values.\n     * @example\n     *\n     * _.union([1, 2], [4, 2], [2, 1]);\n     * // => [1, 2, 4]\n     */\n    var union = restParam(function(arrays) {\n      return baseUniq(baseFlatten(arrays, false, true));\n    });\n\n    /**\n     * Creates a duplicate-free version of an array, using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n     * for equality comparisons, in which only the first occurence of each element\n     * is kept. Providing `true` for `isSorted` performs a faster search algorithm\n     * for sorted arrays. If an iteratee function is provided it is invoked for\n     * each element in the array to generate the criterion by which uniqueness\n     * is computed. The `iteratee` is bound to `thisArg` and invoked with three\n     * arguments: (value, index, array).\n     *\n     * If a property name is provided for `iteratee` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `iteratee` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @alias unique\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {boolean} [isSorted] Specify the array is sorted.\n     * @param {Function|Object|string} [iteratee] The function invoked per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {Array} Returns the new duplicate-value-free array.\n     * @example\n     *\n     * _.uniq([2, 1, 2]);\n     * // => [2, 1]\n     *\n     * // using `isSorted`\n     * _.uniq([1, 1, 2], true);\n     * // => [1, 2]\n     *\n     * // using an iteratee function\n     * _.uniq([1, 2.5, 1.5, 2], function(n) {\n     *   return this.floor(n);\n     * }, Math);\n     * // => [1, 2.5]\n     *\n     * // using the `_.property` callback shorthand\n     * _.uniq([{ 'x': 1 }, { 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 1 }, { 'x': 2 }]\n     */\n    function uniq(array, isSorted, iteratee, thisArg) {\n      var length = array ? array.length : 0;\n      if (!length) {\n        return [];\n      }\n      if (isSorted != null && typeof isSorted != 'boolean') {\n        thisArg = iteratee;\n        iteratee = isIterateeCall(array, isSorted, thisArg) ? undefined : isSorted;\n        isSorted = false;\n      }\n      var callback = getCallback();\n      if (!(iteratee == null && callback === baseCallback)) {\n        iteratee = callback(iteratee, thisArg, 3);\n      }\n      return (isSorted && getIndexOf() == baseIndexOf)\n        ? sortedUniq(array, iteratee)\n        : baseUniq(array, iteratee);\n    }\n\n    /**\n     * This method is like `_.zip` except that it accepts an array of grouped\n     * elements and creates an array regrouping the elements to their pre-zip\n     * configuration.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array of grouped elements to process.\n     * @returns {Array} Returns the new array of regrouped elements.\n     * @example\n     *\n     * var zipped = _.zip(['fred', 'barney'], [30, 40], [true, false]);\n     * // => [['fred', 30, true], ['barney', 40, false]]\n     *\n     * _.unzip(zipped);\n     * // => [['fred', 'barney'], [30, 40], [true, false]]\n     */\n    function unzip(array) {\n      if (!(array && array.length)) {\n        return [];\n      }\n      var index = -1,\n          length = 0;\n\n      array = arrayFilter(array, function(group) {\n        if (isArrayLike(group)) {\n          length = nativeMax(group.length, length);\n          return true;\n        }\n      });\n      var result = Array(length);\n      while (++index < length) {\n        result[index] = arrayMap(array, baseProperty(index));\n      }\n      return result;\n    }\n\n    /**\n     * This method is like `_.unzip` except that it accepts an iteratee to specify\n     * how regrouped values should be combined. The `iteratee` is bound to `thisArg`\n     * and invoked with four arguments: (accumulator, value, index, group).\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array of grouped elements to process.\n     * @param {Function} [iteratee] The function to combine regrouped values.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {Array} Returns the new array of regrouped elements.\n     * @example\n     *\n     * var zipped = _.zip([1, 2], [10, 20], [100, 200]);\n     * // => [[1, 10, 100], [2, 20, 200]]\n     *\n     * _.unzipWith(zipped, _.add);\n     * // => [3, 30, 300]\n     */\n    function unzipWith(array, iteratee, thisArg) {\n      var length = array ? array.length : 0;\n      if (!length) {\n        return [];\n      }\n      var result = unzip(array);\n      if (iteratee == null) {\n        return result;\n      }\n      iteratee = bindCallback(iteratee, thisArg, 4);\n      return arrayMap(result, function(group) {\n        return arrayReduce(group, iteratee, undefined, true);\n      });\n    }\n\n    /**\n     * Creates an array excluding all provided values using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {Array} array The array to filter.\n     * @param {...*} [values] The values to exclude.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * _.without([1, 2, 1, 3], 1, 2);\n     * // => [3]\n     */\n    var without = restParam(function(array, values) {\n      return isArrayLike(array)\n        ? baseDifference(array, values)\n        : [];\n    });\n\n    /**\n     * Creates an array of unique values that is the [symmetric difference](https://en.wikipedia.org/wiki/Symmetric_difference)\n     * of the provided arrays.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @returns {Array} Returns the new array of values.\n     * @example\n     *\n     * _.xor([1, 2], [4, 2]);\n     * // => [1, 4]\n     */\n    function xor() {\n      var index = -1,\n          length = arguments.length;\n\n      while (++index < length) {\n        var array = arguments[index];\n        if (isArrayLike(array)) {\n          var result = result\n            ? arrayPush(baseDifference(result, array), baseDifference(array, result))\n            : array;\n        }\n      }\n      return result ? baseUniq(result) : [];\n    }\n\n    /**\n     * Creates an array of grouped elements, the first of which contains the first\n     * elements of the given arrays, the second of which contains the second elements\n     * of the given arrays, and so on.\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {...Array} [arrays] The arrays to process.\n     * @returns {Array} Returns the new array of grouped elements.\n     * @example\n     *\n     * _.zip(['fred', 'barney'], [30, 40], [true, false]);\n     * // => [['fred', 30, true], ['barney', 40, false]]\n     */\n    var zip = restParam(unzip);\n\n    /**\n     * The inverse of `_.pairs`; this method returns an object composed from arrays\n     * of property names and values. Provide either a single two dimensional array,\n     * e.g. `[[key1, value1], [key2, value2]]` or two arrays, one of property names\n     * and one of corresponding values.\n     *\n     * @static\n     * @memberOf _\n     * @alias object\n     * @category Array\n     * @param {Array} props The property names.\n     * @param {Array} [values=[]] The property values.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * _.zipObject([['fred', 30], ['barney', 40]]);\n     * // => { 'fred': 30, 'barney': 40 }\n     *\n     * _.zipObject(['fred', 'barney'], [30, 40]);\n     * // => { 'fred': 30, 'barney': 40 }\n     */\n    function zipObject(props, values) {\n      var index = -1,\n          length = props ? props.length : 0,\n          result = {};\n\n      if (length && !values && !isArray(props[0])) {\n        values = [];\n      }\n      while (++index < length) {\n        var key = props[index];\n        if (values) {\n          result[key] = values[index];\n        } else if (key) {\n          result[key[0]] = key[1];\n        }\n      }\n      return result;\n    }\n\n    /**\n     * This method is like `_.zip` except that it accepts an iteratee to specify\n     * how grouped values should be combined. The `iteratee` is bound to `thisArg`\n     * and invoked with four arguments: (accumulator, value, index, group).\n     *\n     * @static\n     * @memberOf _\n     * @category Array\n     * @param {...Array} [arrays] The arrays to process.\n     * @param {Function} [iteratee] The function to combine grouped values.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {Array} Returns the new array of grouped elements.\n     * @example\n     *\n     * _.zipWith([1, 2], [10, 20], [100, 200], _.add);\n     * // => [111, 222]\n     */\n    var zipWith = restParam(function(arrays) {\n      var length = arrays.length,\n          iteratee = length > 2 ? arrays[length - 2] : undefined,\n          thisArg = length > 1 ? arrays[length - 1] : undefined;\n\n      if (length > 2 && typeof iteratee == 'function') {\n        length -= 2;\n      } else {\n        iteratee = (length > 1 && typeof thisArg == 'function') ? (--length, thisArg) : undefined;\n        thisArg = undefined;\n      }\n      arrays.length = length;\n      return unzipWith(arrays, iteratee, thisArg);\n    });\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a `lodash` object that wraps `value` with explicit method\n     * chaining enabled.\n     *\n     * @static\n     * @memberOf _\n     * @category Chain\n     * @param {*} value The value to wrap.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'age': 36 },\n     *   { 'user': 'fred',    'age': 40 },\n     *   { 'user': 'pebbles', 'age': 1 }\n     * ];\n     *\n     * var youngest = _.chain(users)\n     *   .sortBy('age')\n     *   .map(function(chr) {\n     *     return chr.user + ' is ' + chr.age;\n     *   })\n     *   .first()\n     *   .value();\n     * // => 'pebbles is 1'\n     */\n    function chain(value) {\n      var result = lodash(value);\n      result.__chain__ = true;\n      return result;\n    }\n\n    /**\n     * This method invokes `interceptor` and returns `value`. The interceptor is\n     * bound to `thisArg` and invoked with one argument; (value). The purpose of\n     * this method is to \"tap into\" a method chain in order to perform operations\n     * on intermediate results within the chain.\n     *\n     * @static\n     * @memberOf _\n     * @category Chain\n     * @param {*} value The value to provide to `interceptor`.\n     * @param {Function} interceptor The function to invoke.\n     * @param {*} [thisArg] The `this` binding of `interceptor`.\n     * @returns {*} Returns `value`.\n     * @example\n     *\n     * _([1, 2, 3])\n     *  .tap(function(array) {\n     *    array.pop();\n     *  })\n     *  .reverse()\n     *  .value();\n     * // => [2, 1]\n     */\n    function tap(value, interceptor, thisArg) {\n      interceptor.call(thisArg, value);\n      return value;\n    }\n\n    /**\n     * This method is like `_.tap` except that it returns the result of `interceptor`.\n     *\n     * @static\n     * @memberOf _\n     * @category Chain\n     * @param {*} value The value to provide to `interceptor`.\n     * @param {Function} interceptor The function to invoke.\n     * @param {*} [thisArg] The `this` binding of `interceptor`.\n     * @returns {*} Returns the result of `interceptor`.\n     * @example\n     *\n     * _('  abc  ')\n     *  .chain()\n     *  .trim()\n     *  .thru(function(value) {\n     *    return [value];\n     *  })\n     *  .value();\n     * // => ['abc']\n     */\n    function thru(value, interceptor, thisArg) {\n      return interceptor.call(thisArg, value);\n    }\n\n    /**\n     * Enables explicit method chaining on the wrapper object.\n     *\n     * @name chain\n     * @memberOf _\n     * @category Chain\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36 },\n     *   { 'user': 'fred',   'age': 40 }\n     * ];\n     *\n     * // without explicit chaining\n     * _(users).first();\n     * // => { 'user': 'barney', 'age': 36 }\n     *\n     * // with explicit chaining\n     * _(users).chain()\n     *   .first()\n     *   .pick('user')\n     *   .value();\n     * // => { 'user': 'barney' }\n     */\n    function wrapperChain() {\n      return chain(this);\n    }\n\n    /**\n     * Executes the chained sequence and returns the wrapped result.\n     *\n     * @name commit\n     * @memberOf _\n     * @category Chain\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var array = [1, 2];\n     * var wrapped = _(array).push(3);\n     *\n     * console.log(array);\n     * // => [1, 2]\n     *\n     * wrapped = wrapped.commit();\n     * console.log(array);\n     * // => [1, 2, 3]\n     *\n     * wrapped.last();\n     * // => 3\n     *\n     * console.log(array);\n     * // => [1, 2, 3]\n     */\n    function wrapperCommit() {\n      return new LodashWrapper(this.value(), this.__chain__);\n    }\n\n    /**\n     * Creates a new array joining a wrapped array with any additional arrays\n     * and/or values.\n     *\n     * @name concat\n     * @memberOf _\n     * @category Chain\n     * @param {...*} [values] The values to concatenate.\n     * @returns {Array} Returns the new concatenated array.\n     * @example\n     *\n     * var array = [1];\n     * var wrapped = _(array).concat(2, [3], [[4]]);\n     *\n     * console.log(wrapped.value());\n     * // => [1, 2, 3, [4]]\n     *\n     * console.log(array);\n     * // => [1]\n     */\n    var wrapperConcat = restParam(function(values) {\n      values = baseFlatten(values);\n      return this.thru(function(array) {\n        return arrayConcat(isArray(array) ? array : [toObject(array)], values);\n      });\n    });\n\n    /**\n     * Creates a clone of the chained sequence planting `value` as the wrapped value.\n     *\n     * @name plant\n     * @memberOf _\n     * @category Chain\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var array = [1, 2];\n     * var wrapped = _(array).map(function(value) {\n     *   return Math.pow(value, 2);\n     * });\n     *\n     * var other = [3, 4];\n     * var otherWrapped = wrapped.plant(other);\n     *\n     * otherWrapped.value();\n     * // => [9, 16]\n     *\n     * wrapped.value();\n     * // => [1, 4]\n     */\n    function wrapperPlant(value) {\n      var result,\n          parent = this;\n\n      while (parent instanceof baseLodash) {\n        var clone = wrapperClone(parent);\n        if (result) {\n          previous.__wrapped__ = clone;\n        } else {\n          result = clone;\n        }\n        var previous = clone;\n        parent = parent.__wrapped__;\n      }\n      previous.__wrapped__ = value;\n      return result;\n    }\n\n    /**\n     * Reverses the wrapped array so the first element becomes the last, the\n     * second element becomes the second to last, and so on.\n     *\n     * **Note:** This method mutates the wrapped array.\n     *\n     * @name reverse\n     * @memberOf _\n     * @category Chain\n     * @returns {Object} Returns the new reversed `lodash` wrapper instance.\n     * @example\n     *\n     * var array = [1, 2, 3];\n     *\n     * _(array).reverse().value()\n     * // => [3, 2, 1]\n     *\n     * console.log(array);\n     * // => [3, 2, 1]\n     */\n    function wrapperReverse() {\n      var value = this.__wrapped__;\n\n      var interceptor = function(value) {\n        return (wrapped && wrapped.__dir__ < 0) ? value : value.reverse();\n      };\n      if (value instanceof LazyWrapper) {\n        var wrapped = value;\n        if (this.__actions__.length) {\n          wrapped = new LazyWrapper(this);\n        }\n        wrapped = wrapped.reverse();\n        wrapped.__actions__.push({ 'func': thru, 'args': [interceptor], 'thisArg': undefined });\n        return new LodashWrapper(wrapped, this.__chain__);\n      }\n      return this.thru(interceptor);\n    }\n\n    /**\n     * Produces the result of coercing the unwrapped value to a string.\n     *\n     * @name toString\n     * @memberOf _\n     * @category Chain\n     * @returns {string} Returns the coerced string value.\n     * @example\n     *\n     * _([1, 2, 3]).toString();\n     * // => '1,2,3'\n     */\n    function wrapperToString() {\n      return (this.value() + '');\n    }\n\n    /**\n     * Executes the chained sequence to extract the unwrapped value.\n     *\n     * @name value\n     * @memberOf _\n     * @alias run, toJSON, valueOf\n     * @category Chain\n     * @returns {*} Returns the resolved unwrapped value.\n     * @example\n     *\n     * _([1, 2, 3]).value();\n     * // => [1, 2, 3]\n     */\n    function wrapperValue() {\n      return baseWrapperValue(this.__wrapped__, this.__actions__);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an array of elements corresponding to the given keys, or indexes,\n     * of `collection`. Keys may be specified as individual arguments or as arrays\n     * of keys.\n     *\n     * @static\n     * @memberOf _\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {...(number|number[]|string|string[])} [props] The property names\n     *  or indexes of elements to pick, specified individually or in arrays.\n     * @returns {Array} Returns the new array of picked elements.\n     * @example\n     *\n     * _.at(['a', 'b', 'c'], [0, 2]);\n     * // => ['a', 'c']\n     *\n     * _.at(['barney', 'fred', 'pebbles'], 0, 2);\n     * // => ['barney', 'pebbles']\n     */\n    var at = restParam(function(collection, props) {\n      return baseAt(collection, baseFlatten(props));\n    });\n\n    /**\n     * Creates an object composed of keys generated from the results of running\n     * each element of `collection` through `iteratee`. The corresponding value\n     * of each key is the number of times the key was returned by `iteratee`.\n     * The `iteratee` is bound to `thisArg` and invoked with three arguments:\n     * (value, index|key, collection).\n     *\n     * If a property name is provided for `iteratee` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `iteratee` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [iteratee=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * _.countBy([4.3, 6.1, 6.4], function(n) {\n     *   return Math.floor(n);\n     * });\n     * // => { '4': 1, '6': 2 }\n     *\n     * _.countBy([4.3, 6.1, 6.4], function(n) {\n     *   return this.floor(n);\n     * }, Math);\n     * // => { '4': 1, '6': 2 }\n     *\n     * _.countBy(['one', 'two', 'three'], 'length');\n     * // => { '3': 2, '5': 1 }\n     */\n    var countBy = createAggregator(function(result, value, key) {\n      hasOwnProperty.call(result, key) ? ++result[key] : (result[key] = 1);\n    });\n\n    /**\n     * Checks if `predicate` returns truthy for **all** elements of `collection`.\n     * The predicate is bound to `thisArg` and invoked with three arguments:\n     * (value, index|key, collection).\n     *\n     * If a property name is provided for `predicate` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `predicate` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @alias all\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [predicate=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `predicate`.\n     * @returns {boolean} Returns `true` if all elements pass the predicate check,\n     *  else `false`.\n     * @example\n     *\n     * _.every([true, 1, null, 'yes'], Boolean);\n     * // => false\n     *\n     * var users = [\n     *   { 'user': 'barney', 'active': false },\n     *   { 'user': 'fred',   'active': false }\n     * ];\n     *\n     * // using the `_.matches` callback shorthand\n     * _.every(users, { 'user': 'barney', 'active': false });\n     * // => false\n     *\n     * // using the `_.matchesProperty` callback shorthand\n     * _.every(users, 'active', false);\n     * // => true\n     *\n     * // using the `_.property` callback shorthand\n     * _.every(users, 'active');\n     * // => false\n     */\n    function every(collection, predicate, thisArg) {\n      var func = isArray(collection) ? arrayEvery : baseEvery;\n      if (thisArg && isIterateeCall(collection, predicate, thisArg)) {\n        predicate = undefined;\n      }\n      if (typeof predicate != 'function' || thisArg !== undefined) {\n        predicate = getCallback(predicate, thisArg, 3);\n      }\n      return func(collection, predicate);\n    }\n\n    /**\n     * Iterates over elements of `collection`, returning an array of all elements\n     * `predicate` returns truthy for. The predicate is bound to `thisArg` and\n     * invoked with three arguments: (value, index|key, collection).\n     *\n     * If a property name is provided for `predicate` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `predicate` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @alias select\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [predicate=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `predicate`.\n     * @returns {Array} Returns the new filtered array.\n     * @example\n     *\n     * _.filter([4, 5, 6], function(n) {\n     *   return n % 2 == 0;\n     * });\n     * // => [4, 6]\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': true },\n     *   { 'user': 'fred',   'age': 40, 'active': false }\n     * ];\n     *\n     * // using the `_.matches` callback shorthand\n     * _.pluck(_.filter(users, { 'age': 36, 'active': true }), 'user');\n     * // => ['barney']\n     *\n     * // using the `_.matchesProperty` callback shorthand\n     * _.pluck(_.filter(users, 'active', false), 'user');\n     * // => ['fred']\n     *\n     * // using the `_.property` callback shorthand\n     * _.pluck(_.filter(users, 'active'), 'user');\n     * // => ['barney']\n     */\n    function filter(collection, predicate, thisArg) {\n      var func = isArray(collection) ? arrayFilter : baseFilter;\n      predicate = getCallback(predicate, thisArg, 3);\n      return func(collection, predicate);\n    }\n\n    /**\n     * Iterates over elements of `collection`, returning the first element\n     * `predicate` returns truthy for. The predicate is bound to `thisArg` and\n     * invoked with three arguments: (value, index|key, collection).\n     *\n     * If a property name is provided for `predicate` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `predicate` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @alias detect\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to search.\n     * @param {Function|Object|string} [predicate=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `predicate`.\n     * @returns {*} Returns the matched element, else `undefined`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'age': 36, 'active': true },\n     *   { 'user': 'fred',    'age': 40, 'active': false },\n     *   { 'user': 'pebbles', 'age': 1,  'active': true }\n     * ];\n     *\n     * _.result(_.find(users, function(chr) {\n     *   return chr.age < 40;\n     * }), 'user');\n     * // => 'barney'\n     *\n     * // using the `_.matches` callback shorthand\n     * _.result(_.find(users, { 'age': 1, 'active': true }), 'user');\n     * // => 'pebbles'\n     *\n     * // using the `_.matchesProperty` callback shorthand\n     * _.result(_.find(users, 'active', false), 'user');\n     * // => 'fred'\n     *\n     * // using the `_.property` callback shorthand\n     * _.result(_.find(users, 'active'), 'user');\n     * // => 'barney'\n     */\n    var find = createFind(baseEach);\n\n    /**\n     * This method is like `_.find` except that it iterates over elements of\n     * `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to search.\n     * @param {Function|Object|string} [predicate=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `predicate`.\n     * @returns {*} Returns the matched element, else `undefined`.\n     * @example\n     *\n     * _.findLast([1, 2, 3, 4], function(n) {\n     *   return n % 2 == 1;\n     * });\n     * // => 3\n     */\n    var findLast = createFind(baseEachRight, true);\n\n    /**\n     * Performs a deep comparison between each element in `collection` and the\n     * source object, returning the first element that has equivalent property\n     * values.\n     *\n     * **Note:** This method supports comparing arrays, booleans, `Date` objects,\n     * numbers, `Object` objects, regexes, and strings. Objects are compared by\n     * their own, not inherited, enumerable properties. For comparing a single\n     * own or inherited property value see `_.matchesProperty`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to search.\n     * @param {Object} source The object of property values to match.\n     * @returns {*} Returns the matched element, else `undefined`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': true },\n     *   { 'user': 'fred',   'age': 40, 'active': false }\n     * ];\n     *\n     * _.result(_.findWhere(users, { 'age': 36, 'active': true }), 'user');\n     * // => 'barney'\n     *\n     * _.result(_.findWhere(users, { 'age': 40, 'active': false }), 'user');\n     * // => 'fred'\n     */\n    function findWhere(collection, source) {\n      return find(collection, baseMatches(source));\n    }\n\n    /**\n     * Iterates over elements of `collection` invoking `iteratee` for each element.\n     * The `iteratee` is bound to `thisArg` and invoked with three arguments:\n     * (value, index|key, collection). Iteratee functions may exit iteration early\n     * by explicitly returning `false`.\n     *\n     * **Note:** As with other \"Collections\" methods, objects with a \"length\" property\n     * are iterated like arrays. To avoid this behavior `_.forIn` or `_.forOwn`\n     * may be used for object iteration.\n     *\n     * @static\n     * @memberOf _\n     * @alias each\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {Array|Object|string} Returns `collection`.\n     * @example\n     *\n     * _([1, 2]).forEach(function(n) {\n     *   console.log(n);\n     * }).value();\n     * // => logs each value from left to right and returns the array\n     *\n     * _.forEach({ 'a': 1, 'b': 2 }, function(n, key) {\n     *   console.log(n, key);\n     * });\n     * // => logs each value-key pair and returns the object (iteration order is not guaranteed)\n     */\n    var forEach = createForEach(arrayEach, baseEach);\n\n    /**\n     * This method is like `_.forEach` except that it iterates over elements of\n     * `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @alias eachRight\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {Array|Object|string} Returns `collection`.\n     * @example\n     *\n     * _([1, 2]).forEachRight(function(n) {\n     *   console.log(n);\n     * }).value();\n     * // => logs each value from right to left and returns the array\n     */\n    var forEachRight = createForEach(arrayEachRight, baseEachRight);\n\n    /**\n     * Creates an object composed of keys generated from the results of running\n     * each element of `collection` through `iteratee`. The corresponding value\n     * of each key is an array of the elements responsible for generating the key.\n     * The `iteratee` is bound to `thisArg` and invoked with three arguments:\n     * (value, index|key, collection).\n     *\n     * If a property name is provided for `iteratee` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `iteratee` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [iteratee=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * _.groupBy([4.2, 6.1, 6.4], function(n) {\n     *   return Math.floor(n);\n     * });\n     * // => { '4': [4.2], '6': [6.1, 6.4] }\n     *\n     * _.groupBy([4.2, 6.1, 6.4], function(n) {\n     *   return this.floor(n);\n     * }, Math);\n     * // => { '4': [4.2], '6': [6.1, 6.4] }\n     *\n     * // using the `_.property` callback shorthand\n     * _.groupBy(['one', 'two', 'three'], 'length');\n     * // => { '3': ['one', 'two'], '5': ['three'] }\n     */\n    var groupBy = createAggregator(function(result, value, key) {\n      if (hasOwnProperty.call(result, key)) {\n        result[key].push(value);\n      } else {\n        result[key] = [value];\n      }\n    });\n\n    /**\n     * Checks if `value` is in `collection` using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n     * for equality comparisons. If `fromIndex` is negative, it is used as the offset\n     * from the end of `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @alias contains, include\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to search.\n     * @param {*} target The value to search for.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.reduce`.\n     * @returns {boolean} Returns `true` if a matching element is found, else `false`.\n     * @example\n     *\n     * _.includes([1, 2, 3], 1);\n     * // => true\n     *\n     * _.includes([1, 2, 3], 1, 2);\n     * // => false\n     *\n     * _.includes({ 'user': 'fred', 'age': 40 }, 'fred');\n     * // => true\n     *\n     * _.includes('pebbles', 'eb');\n     * // => true\n     */\n    function includes(collection, target, fromIndex, guard) {\n      var length = collection ? getLength(collection) : 0;\n      if (!isLength(length)) {\n        collection = values(collection);\n        length = collection.length;\n      }\n      if (typeof fromIndex != 'number' || (guard && isIterateeCall(target, fromIndex, guard))) {\n        fromIndex = 0;\n      } else {\n        fromIndex = fromIndex < 0 ? nativeMax(length + fromIndex, 0) : (fromIndex || 0);\n      }\n      return (typeof collection == 'string' || !isArray(collection) && isString(collection))\n        ? (fromIndex <= length && collection.indexOf(target, fromIndex) > -1)\n        : (!!length && getIndexOf(collection, target, fromIndex) > -1);\n    }\n\n    /**\n     * Creates an object composed of keys generated from the results of running\n     * each element of `collection` through `iteratee`. The corresponding value\n     * of each key is the last element responsible for generating the key. The\n     * iteratee function is bound to `thisArg` and invoked with three arguments:\n     * (value, index|key, collection).\n     *\n     * If a property name is provided for `iteratee` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `iteratee` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [iteratee=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * var keyData = [\n     *   { 'dir': 'left', 'code': 97 },\n     *   { 'dir': 'right', 'code': 100 }\n     * ];\n     *\n     * _.indexBy(keyData, 'dir');\n     * // => { 'left': { 'dir': 'left', 'code': 97 }, 'right': { 'dir': 'right', 'code': 100 } }\n     *\n     * _.indexBy(keyData, function(object) {\n     *   return String.fromCharCode(object.code);\n     * });\n     * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }\n     *\n     * _.indexBy(keyData, function(object) {\n     *   return this.fromCharCode(object.code);\n     * }, String);\n     * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }\n     */\n    var indexBy = createAggregator(function(result, value, key) {\n      result[key] = value;\n    });\n\n    /**\n     * Invokes the method at `path` of each element in `collection`, returning\n     * an array of the results of each invoked method. Any additional arguments\n     * are provided to each invoked method. If `methodName` is a function it is\n     * invoked for, and `this` bound to, each element in `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Array|Function|string} path The path of the method to invoke or\n     *  the function invoked per iteration.\n     * @param {...*} [args] The arguments to invoke the method with.\n     * @returns {Array} Returns the array of results.\n     * @example\n     *\n     * _.invoke([[5, 1, 7], [3, 2, 1]], 'sort');\n     * // => [[1, 5, 7], [1, 2, 3]]\n     *\n     * _.invoke([123, 456], String.prototype.split, '');\n     * // => [['1', '2', '3'], ['4', '5', '6']]\n     */\n    var invoke = restParam(function(collection, path, args) {\n      var index = -1,\n          isFunc = typeof path == 'function',\n          isProp = isKey(path),\n          result = isArrayLike(collection) ? Array(collection.length) : [];\n\n      baseEach(collection, function(value) {\n        var func = isFunc ? path : ((isProp && value != null) ? value[path] : undefined);\n        result[++index] = func ? func.apply(value, args) : invokePath(value, path, args);\n      });\n      return result;\n    });\n\n    /**\n     * Creates an array of values by running each element in `collection` through\n     * `iteratee`. The `iteratee` is bound to `thisArg` and invoked with three\n     * arguments: (value, index|key, collection).\n     *\n     * If a property name is provided for `iteratee` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `iteratee` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * Many lodash methods are guarded to work as iteratees for methods like\n     * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n     *\n     * The guarded methods are:\n     * `ary`, `callback`, `chunk`, `clone`, `create`, `curry`, `curryRight`,\n     * `drop`, `dropRight`, `every`, `fill`, `flatten`, `invert`, `max`, `min`,\n     * `parseInt`, `slice`, `sortBy`, `take`, `takeRight`, `template`, `trim`,\n     * `trimLeft`, `trimRight`, `trunc`, `random`, `range`, `sample`, `some`,\n     * `sum`, `uniq`, and `words`\n     *\n     * @static\n     * @memberOf _\n     * @alias collect\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [iteratee=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {Array} Returns the new mapped array.\n     * @example\n     *\n     * function timesThree(n) {\n     *   return n * 3;\n     * }\n     *\n     * _.map([1, 2], timesThree);\n     * // => [3, 6]\n     *\n     * _.map({ 'a': 1, 'b': 2 }, timesThree);\n     * // => [3, 6] (iteration order is not guaranteed)\n     *\n     * var users = [\n     *   { 'user': 'barney' },\n     *   { 'user': 'fred' }\n     * ];\n     *\n     * // using the `_.property` callback shorthand\n     * _.map(users, 'user');\n     * // => ['barney', 'fred']\n     */\n    function map(collection, iteratee, thisArg) {\n      var func = isArray(collection) ? arrayMap : baseMap;\n      iteratee = getCallback(iteratee, thisArg, 3);\n      return func(collection, iteratee);\n    }\n\n    /**\n     * Creates an array of elements split into two groups, the first of which\n     * contains elements `predicate` returns truthy for, while the second of which\n     * contains elements `predicate` returns falsey for. The predicate is bound\n     * to `thisArg` and invoked with three arguments: (value, index|key, collection).\n     *\n     * If a property name is provided for `predicate` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `predicate` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [predicate=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `predicate`.\n     * @returns {Array} Returns the array of grouped elements.\n     * @example\n     *\n     * _.partition([1, 2, 3], function(n) {\n     *   return n % 2;\n     * });\n     * // => [[1, 3], [2]]\n     *\n     * _.partition([1.2, 2.3, 3.4], function(n) {\n     *   return this.floor(n) % 2;\n     * }, Math);\n     * // => [[1.2, 3.4], [2.3]]\n     *\n     * var users = [\n     *   { 'user': 'barney',  'age': 36, 'active': false },\n     *   { 'user': 'fred',    'age': 40, 'active': true },\n     *   { 'user': 'pebbles', 'age': 1,  'active': false }\n     * ];\n     *\n     * var mapper = function(array) {\n     *   return _.pluck(array, 'user');\n     * };\n     *\n     * // using the `_.matches` callback shorthand\n     * _.map(_.partition(users, { 'age': 1, 'active': false }), mapper);\n     * // => [['pebbles'], ['barney', 'fred']]\n     *\n     * // using the `_.matchesProperty` callback shorthand\n     * _.map(_.partition(users, 'active', false), mapper);\n     * // => [['barney', 'pebbles'], ['fred']]\n     *\n     * // using the `_.property` callback shorthand\n     * _.map(_.partition(users, 'active'), mapper);\n     * // => [['fred'], ['barney', 'pebbles']]\n     */\n    var partition = createAggregator(function(result, value, key) {\n      result[key ? 0 : 1].push(value);\n    }, function() { return [[], []]; });\n\n    /**\n     * Gets the property value of `path` from all elements in `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Array|string} path The path of the property to pluck.\n     * @returns {Array} Returns the property values.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36 },\n     *   { 'user': 'fred',   'age': 40 }\n     * ];\n     *\n     * _.pluck(users, 'user');\n     * // => ['barney', 'fred']\n     *\n     * var userIndex = _.indexBy(users, 'user');\n     * _.pluck(userIndex, 'age');\n     * // => [36, 40] (iteration order is not guaranteed)\n     */\n    function pluck(collection, path) {\n      return map(collection, property(path));\n    }\n\n    /**\n     * Reduces `collection` to a value which is the accumulated result of running\n     * each element in `collection` through `iteratee`, where each successive\n     * invocation is supplied the return value of the previous. If `accumulator`\n     * is not provided the first element of `collection` is used as the initial\n     * value. The `iteratee` is bound to `thisArg` and invoked with four arguments:\n     * (accumulator, value, index|key, collection).\n     *\n     * Many lodash methods are guarded to work as iteratees for methods like\n     * `_.reduce`, `_.reduceRight`, and `_.transform`.\n     *\n     * The guarded methods are:\n     * `assign`, `defaults`, `defaultsDeep`, `includes`, `merge`, `sortByAll`,\n     * and `sortByOrder`\n     *\n     * @static\n     * @memberOf _\n     * @alias foldl, inject\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [accumulator] The initial value.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {*} Returns the accumulated value.\n     * @example\n     *\n     * _.reduce([1, 2], function(total, n) {\n     *   return total + n;\n     * });\n     * // => 3\n     *\n     * _.reduce({ 'a': 1, 'b': 2 }, function(result, n, key) {\n     *   result[key] = n * 3;\n     *   return result;\n     * }, {});\n     * // => { 'a': 3, 'b': 6 } (iteration order is not guaranteed)\n     */\n    var reduce = createReduce(arrayReduce, baseEach);\n\n    /**\n     * This method is like `_.reduce` except that it iterates over elements of\n     * `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @alias foldr\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [accumulator] The initial value.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {*} Returns the accumulated value.\n     * @example\n     *\n     * var array = [[0, 1], [2, 3], [4, 5]];\n     *\n     * _.reduceRight(array, function(flattened, other) {\n     *   return flattened.concat(other);\n     * }, []);\n     * // => [4, 5, 2, 3, 0, 1]\n     */\n    var reduceRight = createReduce(arrayReduceRight, baseEachRight);\n\n    /**\n     * The opposite of `_.filter`; this method returns the elements of `collection`\n     * that `predicate` does **not** return truthy for.\n     *\n     * @static\n     * @memberOf _\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [predicate=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `predicate`.\n     * @returns {Array} Returns the new filtered array.\n     * @example\n     *\n     * _.reject([1, 2, 3, 4], function(n) {\n     *   return n % 2 == 0;\n     * });\n     * // => [1, 3]\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': false },\n     *   { 'user': 'fred',   'age': 40, 'active': true }\n     * ];\n     *\n     * // using the `_.matches` callback shorthand\n     * _.pluck(_.reject(users, { 'age': 40, 'active': true }), 'user');\n     * // => ['barney']\n     *\n     * // using the `_.matchesProperty` callback shorthand\n     * _.pluck(_.reject(users, 'active', false), 'user');\n     * // => ['fred']\n     *\n     * // using the `_.property` callback shorthand\n     * _.pluck(_.reject(users, 'active'), 'user');\n     * // => ['barney']\n     */\n    function reject(collection, predicate, thisArg) {\n      var func = isArray(collection) ? arrayFilter : baseFilter;\n      predicate = getCallback(predicate, thisArg, 3);\n      return func(collection, function(value, index, collection) {\n        return !predicate(value, index, collection);\n      });\n    }\n\n    /**\n     * Gets a random element or `n` random elements from a collection.\n     *\n     * @static\n     * @memberOf _\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to sample.\n     * @param {number} [n] The number of elements to sample.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.\n     * @returns {*} Returns the random sample(s).\n     * @example\n     *\n     * _.sample([1, 2, 3, 4]);\n     * // => 2\n     *\n     * _.sample([1, 2, 3, 4], 2);\n     * // => [3, 1]\n     */\n    function sample(collection, n, guard) {\n      if (guard ? isIterateeCall(collection, n, guard) : n == null) {\n        collection = toIterable(collection);\n        var length = collection.length;\n        return length > 0 ? collection[baseRandom(0, length - 1)] : undefined;\n      }\n      var index = -1,\n          result = toArray(collection),\n          length = result.length,\n          lastIndex = length - 1;\n\n      n = nativeMin(n < 0 ? 0 : (+n || 0), length);\n      while (++index < n) {\n        var rand = baseRandom(index, lastIndex),\n            value = result[rand];\n\n        result[rand] = result[index];\n        result[index] = value;\n      }\n      result.length = n;\n      return result;\n    }\n\n    /**\n     * Creates an array of shuffled values, using a version of the\n     * [Fisher-Yates shuffle](https://en.wikipedia.org/wiki/Fisher-Yates_shuffle).\n     *\n     * @static\n     * @memberOf _\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to shuffle.\n     * @returns {Array} Returns the new shuffled array.\n     * @example\n     *\n     * _.shuffle([1, 2, 3, 4]);\n     * // => [4, 1, 3, 2]\n     */\n    function shuffle(collection) {\n      return sample(collection, POSITIVE_INFINITY);\n    }\n\n    /**\n     * Gets the size of `collection` by returning its length for array-like\n     * values or the number of own enumerable properties for objects.\n     *\n     * @static\n     * @memberOf _\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to inspect.\n     * @returns {number} Returns the size of `collection`.\n     * @example\n     *\n     * _.size([1, 2, 3]);\n     * // => 3\n     *\n     * _.size({ 'a': 1, 'b': 2 });\n     * // => 2\n     *\n     * _.size('pebbles');\n     * // => 7\n     */\n    function size(collection) {\n      var length = collection ? getLength(collection) : 0;\n      return isLength(length) ? length : keys(collection).length;\n    }\n\n    /**\n     * Checks if `predicate` returns truthy for **any** element of `collection`.\n     * The function returns as soon as it finds a passing value and does not iterate\n     * over the entire collection. The predicate is bound to `thisArg` and invoked\n     * with three arguments: (value, index|key, collection).\n     *\n     * If a property name is provided for `predicate` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `predicate` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @alias any\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [predicate=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `predicate`.\n     * @returns {boolean} Returns `true` if any element passes the predicate check,\n     *  else `false`.\n     * @example\n     *\n     * _.some([null, 0, 'yes', false], Boolean);\n     * // => true\n     *\n     * var users = [\n     *   { 'user': 'barney', 'active': true },\n     *   { 'user': 'fred',   'active': false }\n     * ];\n     *\n     * // using the `_.matches` callback shorthand\n     * _.some(users, { 'user': 'barney', 'active': false });\n     * // => false\n     *\n     * // using the `_.matchesProperty` callback shorthand\n     * _.some(users, 'active', false);\n     * // => true\n     *\n     * // using the `_.property` callback shorthand\n     * _.some(users, 'active');\n     * // => true\n     */\n    function some(collection, predicate, thisArg) {\n      var func = isArray(collection) ? arraySome : baseSome;\n      if (thisArg && isIterateeCall(collection, predicate, thisArg)) {\n        predicate = undefined;\n      }\n      if (typeof predicate != 'function' || thisArg !== undefined) {\n        predicate = getCallback(predicate, thisArg, 3);\n      }\n      return func(collection, predicate);\n    }\n\n    /**\n     * Creates an array of elements, sorted in ascending order by the results of\n     * running each element in a collection through `iteratee`. This method performs\n     * a stable sort, that is, it preserves the original sort order of equal elements.\n     * The `iteratee` is bound to `thisArg` and invoked with three arguments:\n     * (value, index|key, collection).\n     *\n     * If a property name is provided for `iteratee` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `iteratee` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [iteratee=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {Array} Returns the new sorted array.\n     * @example\n     *\n     * _.sortBy([1, 2, 3], function(n) {\n     *   return Math.sin(n);\n     * });\n     * // => [3, 1, 2]\n     *\n     * _.sortBy([1, 2, 3], function(n) {\n     *   return this.sin(n);\n     * }, Math);\n     * // => [3, 1, 2]\n     *\n     * var users = [\n     *   { 'user': 'fred' },\n     *   { 'user': 'pebbles' },\n     *   { 'user': 'barney' }\n     * ];\n     *\n     * // using the `_.property` callback shorthand\n     * _.pluck(_.sortBy(users, 'user'), 'user');\n     * // => ['barney', 'fred', 'pebbles']\n     */\n    function sortBy(collection, iteratee, thisArg) {\n      if (collection == null) {\n        return [];\n      }\n      if (thisArg && isIterateeCall(collection, iteratee, thisArg)) {\n        iteratee = undefined;\n      }\n      var index = -1;\n      iteratee = getCallback(iteratee, thisArg, 3);\n\n      var result = baseMap(collection, function(value, key, collection) {\n        return { 'criteria': iteratee(value, key, collection), 'index': ++index, 'value': value };\n      });\n      return baseSortBy(result, compareAscending);\n    }\n\n    /**\n     * This method is like `_.sortBy` except that it can sort by multiple iteratees\n     * or property names.\n     *\n     * If a property name is provided for an iteratee the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If an object is provided for an iteratee the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {...(Function|Function[]|Object|Object[]|string|string[])} iteratees\n     *  The iteratees to sort by, specified as individual values or arrays of values.\n     * @returns {Array} Returns the new sorted array.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'fred',   'age': 48 },\n     *   { 'user': 'barney', 'age': 36 },\n     *   { 'user': 'fred',   'age': 42 },\n     *   { 'user': 'barney', 'age': 34 }\n     * ];\n     *\n     * _.map(_.sortByAll(users, ['user', 'age']), _.values);\n     * // => [['barney', 34], ['barney', 36], ['fred', 42], ['fred', 48]]\n     *\n     * _.map(_.sortByAll(users, 'user', function(chr) {\n     *   return Math.floor(chr.age / 10);\n     * }), _.values);\n     * // => [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 42]]\n     */\n    var sortByAll = restParam(function(collection, iteratees) {\n      if (collection == null) {\n        return [];\n      }\n      var guard = iteratees[2];\n      if (guard && isIterateeCall(iteratees[0], iteratees[1], guard)) {\n        iteratees.length = 1;\n      }\n      return baseSortByOrder(collection, baseFlatten(iteratees), []);\n    });\n\n    /**\n     * This method is like `_.sortByAll` except that it allows specifying the\n     * sort orders of the iteratees to sort by. If `orders` is unspecified, all\n     * values are sorted in ascending order. Otherwise, a value is sorted in\n     * ascending order if its corresponding order is \"asc\", and descending if \"desc\".\n     *\n     * If a property name is provided for an iteratee the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If an object is provided for an iteratee the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.\n     * @param {boolean[]} [orders] The sort orders of `iteratees`.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.reduce`.\n     * @returns {Array} Returns the new sorted array.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'fred',   'age': 48 },\n     *   { 'user': 'barney', 'age': 34 },\n     *   { 'user': 'fred',   'age': 42 },\n     *   { 'user': 'barney', 'age': 36 }\n     * ];\n     *\n     * // sort by `user` in ascending order and by `age` in descending order\n     * _.map(_.sortByOrder(users, ['user', 'age'], ['asc', 'desc']), _.values);\n     * // => [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 42]]\n     */\n    function sortByOrder(collection, iteratees, orders, guard) {\n      if (collection == null) {\n        return [];\n      }\n      if (guard && isIterateeCall(iteratees, orders, guard)) {\n        orders = undefined;\n      }\n      if (!isArray(iteratees)) {\n        iteratees = iteratees == null ? [] : [iteratees];\n      }\n      if (!isArray(orders)) {\n        orders = orders == null ? [] : [orders];\n      }\n      return baseSortByOrder(collection, iteratees, orders);\n    }\n\n    /**\n     * Performs a deep comparison between each element in `collection` and the\n     * source object, returning an array of all elements that have equivalent\n     * property values.\n     *\n     * **Note:** This method supports comparing arrays, booleans, `Date` objects,\n     * numbers, `Object` objects, regexes, and strings. Objects are compared by\n     * their own, not inherited, enumerable properties. For comparing a single\n     * own or inherited property value see `_.matchesProperty`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to search.\n     * @param {Object} source The object of property values to match.\n     * @returns {Array} Returns the new filtered array.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': false, 'pets': ['hoppy'] },\n     *   { 'user': 'fred',   'age': 40, 'active': true, 'pets': ['baby puss', 'dino'] }\n     * ];\n     *\n     * _.pluck(_.where(users, { 'age': 36, 'active': false }), 'user');\n     * // => ['barney']\n     *\n     * _.pluck(_.where(users, { 'pets': ['dino'] }), 'user');\n     * // => ['fred']\n     */\n    function where(collection, source) {\n      return filter(collection, baseMatches(source));\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Gets the number of milliseconds that have elapsed since the Unix epoch\n     * (1 January 1970 00:00:00 UTC).\n     *\n     * @static\n     * @memberOf _\n     * @category Date\n     * @example\n     *\n     * _.defer(function(stamp) {\n     *   console.log(_.now() - stamp);\n     * }, _.now());\n     * // => logs the number of milliseconds it took for the deferred function to be invoked\n     */\n    var now = nativeNow || function() {\n      return new Date().getTime();\n    };\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * The opposite of `_.before`; this method creates a function that invokes\n     * `func` once it is called `n` or more times.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {number} n The number of calls before `func` is invoked.\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * var saves = ['profile', 'settings'];\n     *\n     * var done = _.after(saves.length, function() {\n     *   console.log('done saving!');\n     * });\n     *\n     * _.forEach(saves, function(type) {\n     *   asyncSave({ 'type': type, 'complete': done });\n     * });\n     * // => logs 'done saving!' after the two async saves have completed\n     */\n    function after(n, func) {\n      if (typeof func != 'function') {\n        if (typeof n == 'function') {\n          var temp = n;\n          n = func;\n          func = temp;\n        } else {\n          throw new TypeError(FUNC_ERROR_TEXT);\n        }\n      }\n      n = nativeIsFinite(n = +n) ? n : 0;\n      return function() {\n        if (--n < 1) {\n          return func.apply(this, arguments);\n        }\n      };\n    }\n\n    /**\n     * Creates a function that accepts up to `n` arguments ignoring any\n     * additional arguments.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to cap arguments for.\n     * @param {number} [n=func.length] The arity cap.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * _.map(['6', '8', '10'], _.ary(parseInt, 1));\n     * // => [6, 8, 10]\n     */\n    function ary(func, n, guard) {\n      if (guard && isIterateeCall(func, n, guard)) {\n        n = undefined;\n      }\n      n = (func && n == null) ? func.length : nativeMax(+n || 0, 0);\n      return createWrapper(func, ARY_FLAG, undefined, undefined, undefined, undefined, n);\n    }\n\n    /**\n     * Creates a function that invokes `func`, with the `this` binding and arguments\n     * of the created function, while it is called less than `n` times. Subsequent\n     * calls to the created function return the result of the last `func` invocation.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {number} n The number of calls at which `func` is no longer invoked.\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * jQuery('#add').on('click', _.before(5, addContactToList));\n     * // => allows adding up to 4 contacts to the list\n     */\n    function before(n, func) {\n      var result;\n      if (typeof func != 'function') {\n        if (typeof n == 'function') {\n          var temp = n;\n          n = func;\n          func = temp;\n        } else {\n          throw new TypeError(FUNC_ERROR_TEXT);\n        }\n      }\n      return function() {\n        if (--n > 0) {\n          result = func.apply(this, arguments);\n        }\n        if (n <= 1) {\n          func = undefined;\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Creates a function that invokes `func` with the `this` binding of `thisArg`\n     * and prepends any additional `_.bind` arguments to those provided to the\n     * bound function.\n     *\n     * The `_.bind.placeholder` value, which defaults to `_` in monolithic builds,\n     * may be used as a placeholder for partially applied arguments.\n     *\n     * **Note:** Unlike native `Function#bind` this method does not set the \"length\"\n     * property of bound functions.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to bind.\n     * @param {*} thisArg The `this` binding of `func`.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new bound function.\n     * @example\n     *\n     * var greet = function(greeting, punctuation) {\n     *   return greeting + ' ' + this.user + punctuation;\n     * };\n     *\n     * var object = { 'user': 'fred' };\n     *\n     * var bound = _.bind(greet, object, 'hi');\n     * bound('!');\n     * // => 'hi fred!'\n     *\n     * // using placeholders\n     * var bound = _.bind(greet, object, _, '!');\n     * bound('hi');\n     * // => 'hi fred!'\n     */\n    var bind = restParam(function(func, thisArg, partials) {\n      var bitmask = BIND_FLAG;\n      if (partials.length) {\n        var holders = replaceHolders(partials, bind.placeholder);\n        bitmask |= PARTIAL_FLAG;\n      }\n      return createWrapper(func, bitmask, thisArg, partials, holders);\n    });\n\n    /**\n     * Binds methods of an object to the object itself, overwriting the existing\n     * method. Method names may be specified as individual arguments or as arrays\n     * of method names. If no method names are provided all enumerable function\n     * properties, own and inherited, of `object` are bound.\n     *\n     * **Note:** This method does not set the \"length\" property of bound functions.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Object} object The object to bind and assign the bound methods to.\n     * @param {...(string|string[])} [methodNames] The object method names to bind,\n     *  specified as individual method names or arrays of method names.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var view = {\n     *   'label': 'docs',\n     *   'onClick': function() {\n     *     console.log('clicked ' + this.label);\n     *   }\n     * };\n     *\n     * _.bindAll(view);\n     * jQuery('#docs').on('click', view.onClick);\n     * // => logs 'clicked docs' when the element is clicked\n     */\n    var bindAll = restParam(function(object, methodNames) {\n      methodNames = methodNames.length ? baseFlatten(methodNames) : functions(object);\n\n      var index = -1,\n          length = methodNames.length;\n\n      while (++index < length) {\n        var key = methodNames[index];\n        object[key] = createWrapper(object[key], BIND_FLAG, object);\n      }\n      return object;\n    });\n\n    /**\n     * Creates a function that invokes the method at `object[key]` and prepends\n     * any additional `_.bindKey` arguments to those provided to the bound function.\n     *\n     * This method differs from `_.bind` by allowing bound functions to reference\n     * methods that may be redefined or don't yet exist.\n     * See [Peter Michaux's article](http://peter.michaux.ca/articles/lazy-function-definition-pattern)\n     * for more details.\n     *\n     * The `_.bindKey.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for partially applied arguments.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Object} object The object the method belongs to.\n     * @param {string} key The key of the method.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new bound function.\n     * @example\n     *\n     * var object = {\n     *   'user': 'fred',\n     *   'greet': function(greeting, punctuation) {\n     *     return greeting + ' ' + this.user + punctuation;\n     *   }\n     * };\n     *\n     * var bound = _.bindKey(object, 'greet', 'hi');\n     * bound('!');\n     * // => 'hi fred!'\n     *\n     * object.greet = function(greeting, punctuation) {\n     *   return greeting + 'ya ' + this.user + punctuation;\n     * };\n     *\n     * bound('!');\n     * // => 'hiya fred!'\n     *\n     * // using placeholders\n     * var bound = _.bindKey(object, 'greet', _, '!');\n     * bound('hi');\n     * // => 'hiya fred!'\n     */\n    var bindKey = restParam(function(object, key, partials) {\n      var bitmask = BIND_FLAG | BIND_KEY_FLAG;\n      if (partials.length) {\n        var holders = replaceHolders(partials, bindKey.placeholder);\n        bitmask |= PARTIAL_FLAG;\n      }\n      return createWrapper(key, bitmask, object, partials, holders);\n    });\n\n    /**\n     * Creates a function that accepts one or more arguments of `func` that when\n     * called either invokes `func` returning its result, if all `func` arguments\n     * have been provided, or returns a function that accepts one or more of the\n     * remaining `func` arguments, and so on. The arity of `func` may be specified\n     * if `func.length` is not sufficient.\n     *\n     * The `_.curry.placeholder` value, which defaults to `_` in monolithic builds,\n     * may be used as a placeholder for provided arguments.\n     *\n     * **Note:** This method does not set the \"length\" property of curried functions.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to curry.\n     * @param {number} [arity=func.length] The arity of `func`.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.\n     * @returns {Function} Returns the new curried function.\n     * @example\n     *\n     * var abc = function(a, b, c) {\n     *   return [a, b, c];\n     * };\n     *\n     * var curried = _.curry(abc);\n     *\n     * curried(1)(2)(3);\n     * // => [1, 2, 3]\n     *\n     * curried(1, 2)(3);\n     * // => [1, 2, 3]\n     *\n     * curried(1, 2, 3);\n     * // => [1, 2, 3]\n     *\n     * // using placeholders\n     * curried(1)(_, 3)(2);\n     * // => [1, 2, 3]\n     */\n    var curry = createCurry(CURRY_FLAG);\n\n    /**\n     * This method is like `_.curry` except that arguments are applied to `func`\n     * in the manner of `_.partialRight` instead of `_.partial`.\n     *\n     * The `_.curryRight.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for provided arguments.\n     *\n     * **Note:** This method does not set the \"length\" property of curried functions.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to curry.\n     * @param {number} [arity=func.length] The arity of `func`.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.\n     * @returns {Function} Returns the new curried function.\n     * @example\n     *\n     * var abc = function(a, b, c) {\n     *   return [a, b, c];\n     * };\n     *\n     * var curried = _.curryRight(abc);\n     *\n     * curried(3)(2)(1);\n     * // => [1, 2, 3]\n     *\n     * curried(2, 3)(1);\n     * // => [1, 2, 3]\n     *\n     * curried(1, 2, 3);\n     * // => [1, 2, 3]\n     *\n     * // using placeholders\n     * curried(3)(1, _)(2);\n     * // => [1, 2, 3]\n     */\n    var curryRight = createCurry(CURRY_RIGHT_FLAG);\n\n    /**\n     * Creates a debounced function that delays invoking `func` until after `wait`\n     * milliseconds have elapsed since the last time the debounced function was\n     * invoked. The debounced function comes with a `cancel` method to cancel\n     * delayed invocations. Provide an options object to indicate that `func`\n     * should be invoked on the leading and/or trailing edge of the `wait` timeout.\n     * Subsequent calls to the debounced function return the result of the last\n     * `func` invocation.\n     *\n     * **Note:** If `leading` and `trailing` options are `true`, `func` is invoked\n     * on the trailing edge of the timeout only if the the debounced function is\n     * invoked more than once during the `wait` timeout.\n     *\n     * See [David Corbacho's article](http://drupalmotion.com/article/debounce-and-throttle-visual-explanation)\n     * for details over the differences between `_.debounce` and `_.throttle`.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to debounce.\n     * @param {number} [wait=0] The number of milliseconds to delay.\n     * @param {Object} [options] The options object.\n     * @param {boolean} [options.leading=false] Specify invoking on the leading\n     *  edge of the timeout.\n     * @param {number} [options.maxWait] The maximum time `func` is allowed to be\n     *  delayed before it is invoked.\n     * @param {boolean} [options.trailing=true] Specify invoking on the trailing\n     *  edge of the timeout.\n     * @returns {Function} Returns the new debounced function.\n     * @example\n     *\n     * // avoid costly calculations while the window size is in flux\n     * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n     *\n     * // invoke `sendMail` when the click event is fired, debouncing subsequent calls\n     * jQuery('#postbox').on('click', _.debounce(sendMail, 300, {\n     *   'leading': true,\n     *   'trailing': false\n     * }));\n     *\n     * // ensure `batchLog` is invoked once after 1 second of debounced calls\n     * var source = new EventSource('/stream');\n     * jQuery(source).on('message', _.debounce(batchLog, 250, {\n     *   'maxWait': 1000\n     * }));\n     *\n     * // cancel a debounced call\n     * var todoChanges = _.debounce(batchLog, 1000);\n     * Object.observe(models.todo, todoChanges);\n     *\n     * Object.observe(models, function(changes) {\n     *   if (_.find(changes, { 'user': 'todo', 'type': 'delete'})) {\n     *     todoChanges.cancel();\n     *   }\n     * }, ['delete']);\n     *\n     * // ...at some point `models.todo` is changed\n     * models.todo.completed = true;\n     *\n     * // ...before 1 second has passed `models.todo` is deleted\n     * // which cancels the debounced `todoChanges` call\n     * delete models.todo;\n     */\n    function debounce(func, wait, options) {\n      var args,\n          maxTimeoutId,\n          result,\n          stamp,\n          thisArg,\n          timeoutId,\n          trailingCall,\n          lastCalled = 0,\n          maxWait = false,\n          trailing = true;\n\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      wait = wait < 0 ? 0 : (+wait || 0);\n      if (options === true) {\n        var leading = true;\n        trailing = false;\n      } else if (isObject(options)) {\n        leading = !!options.leading;\n        maxWait = 'maxWait' in options && nativeMax(+options.maxWait || 0, wait);\n        trailing = 'trailing' in options ? !!options.trailing : trailing;\n      }\n\n      function cancel() {\n        if (timeoutId) {\n          clearTimeout(timeoutId);\n        }\n        if (maxTimeoutId) {\n          clearTimeout(maxTimeoutId);\n        }\n        lastCalled = 0;\n        maxTimeoutId = timeoutId = trailingCall = undefined;\n      }\n\n      function complete(isCalled, id) {\n        if (id) {\n          clearTimeout(id);\n        }\n        maxTimeoutId = timeoutId = trailingCall = undefined;\n        if (isCalled) {\n          lastCalled = now();\n          result = func.apply(thisArg, args);\n          if (!timeoutId && !maxTimeoutId) {\n            args = thisArg = undefined;\n          }\n        }\n      }\n\n      function delayed() {\n        var remaining = wait - (now() - stamp);\n        if (remaining <= 0 || remaining > wait) {\n          complete(trailingCall, maxTimeoutId);\n        } else {\n          timeoutId = setTimeout(delayed, remaining);\n        }\n      }\n\n      function maxDelayed() {\n        complete(trailing, timeoutId);\n      }\n\n      function debounced() {\n        args = arguments;\n        stamp = now();\n        thisArg = this;\n        trailingCall = trailing && (timeoutId || !leading);\n\n        if (maxWait === false) {\n          var leadingCall = leading && !timeoutId;\n        } else {\n          if (!maxTimeoutId && !leading) {\n            lastCalled = stamp;\n          }\n          var remaining = maxWait - (stamp - lastCalled),\n              isCalled = remaining <= 0 || remaining > maxWait;\n\n          if (isCalled) {\n            if (maxTimeoutId) {\n              maxTimeoutId = clearTimeout(maxTimeoutId);\n            }\n            lastCalled = stamp;\n            result = func.apply(thisArg, args);\n          }\n          else if (!maxTimeoutId) {\n            maxTimeoutId = setTimeout(maxDelayed, remaining);\n          }\n        }\n        if (isCalled && timeoutId) {\n          timeoutId = clearTimeout(timeoutId);\n        }\n        else if (!timeoutId && wait !== maxWait) {\n          timeoutId = setTimeout(delayed, wait);\n        }\n        if (leadingCall) {\n          isCalled = true;\n          result = func.apply(thisArg, args);\n        }\n        if (isCalled && !timeoutId && !maxTimeoutId) {\n          args = thisArg = undefined;\n        }\n        return result;\n      }\n      debounced.cancel = cancel;\n      return debounced;\n    }\n\n    /**\n     * Defers invoking the `func` until the current call stack has cleared. Any\n     * additional arguments are provided to `func` when it is invoked.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to defer.\n     * @param {...*} [args] The arguments to invoke the function with.\n     * @returns {number} Returns the timer id.\n     * @example\n     *\n     * _.defer(function(text) {\n     *   console.log(text);\n     * }, 'deferred');\n     * // logs 'deferred' after one or more milliseconds\n     */\n    var defer = restParam(function(func, args) {\n      return baseDelay(func, 1, args);\n    });\n\n    /**\n     * Invokes `func` after `wait` milliseconds. Any additional arguments are\n     * provided to `func` when it is invoked.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to delay.\n     * @param {number} wait The number of milliseconds to delay invocation.\n     * @param {...*} [args] The arguments to invoke the function with.\n     * @returns {number} Returns the timer id.\n     * @example\n     *\n     * _.delay(function(text) {\n     *   console.log(text);\n     * }, 1000, 'later');\n     * // => logs 'later' after one second\n     */\n    var delay = restParam(function(func, wait, args) {\n      return baseDelay(func, wait, args);\n    });\n\n    /**\n     * Creates a function that returns the result of invoking the provided\n     * functions with the `this` binding of the created function, where each\n     * successive invocation is supplied the return value of the previous.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {...Function} [funcs] Functions to invoke.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var addSquare = _.flow(_.add, square);\n     * addSquare(1, 2);\n     * // => 9\n     */\n    var flow = createFlow();\n\n    /**\n     * This method is like `_.flow` except that it creates a function that\n     * invokes the provided functions from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @alias backflow, compose\n     * @category Function\n     * @param {...Function} [funcs] Functions to invoke.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var addSquare = _.flowRight(square, _.add);\n     * addSquare(1, 2);\n     * // => 9\n     */\n    var flowRight = createFlow(true);\n\n    /**\n     * Creates a function that memoizes the result of `func`. If `resolver` is\n     * provided it determines the cache key for storing the result based on the\n     * arguments provided to the memoized function. By default, the first argument\n     * provided to the memoized function is coerced to a string and used as the\n     * cache key. The `func` is invoked with the `this` binding of the memoized\n     * function.\n     *\n     * **Note:** The cache is exposed as the `cache` property on the memoized\n     * function. Its creation may be customized by replacing the `_.memoize.Cache`\n     * constructor with one whose instances implement the [`Map`](http://ecma-international.org/ecma-262/6.0/#sec-properties-of-the-map-prototype-object)\n     * method interface of `get`, `has`, and `set`.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to have its output memoized.\n     * @param {Function} [resolver] The function to resolve the cache key.\n     * @returns {Function} Returns the new memoizing function.\n     * @example\n     *\n     * var upperCase = _.memoize(function(string) {\n     *   return string.toUpperCase();\n     * });\n     *\n     * upperCase('fred');\n     * // => 'FRED'\n     *\n     * // modifying the result cache\n     * upperCase.cache.set('fred', 'BARNEY');\n     * upperCase('fred');\n     * // => 'BARNEY'\n     *\n     * // replacing `_.memoize.Cache`\n     * var object = { 'user': 'fred' };\n     * var other = { 'user': 'barney' };\n     * var identity = _.memoize(_.identity);\n     *\n     * identity(object);\n     * // => { 'user': 'fred' }\n     * identity(other);\n     * // => { 'user': 'fred' }\n     *\n     * _.memoize.Cache = WeakMap;\n     * var identity = _.memoize(_.identity);\n     *\n     * identity(object);\n     * // => { 'user': 'fred' }\n     * identity(other);\n     * // => { 'user': 'barney' }\n     */\n    function memoize(func, resolver) {\n      if (typeof func != 'function' || (resolver && typeof resolver != 'function')) {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      var memoized = function() {\n        var args = arguments,\n            key = resolver ? resolver.apply(this, args) : args[0],\n            cache = memoized.cache;\n\n        if (cache.has(key)) {\n          return cache.get(key);\n        }\n        var result = func.apply(this, args);\n        memoized.cache = cache.set(key, result);\n        return result;\n      };\n      memoized.cache = new memoize.Cache;\n      return memoized;\n    }\n\n    /**\n     * Creates a function that runs each argument through a corresponding\n     * transform function.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to wrap.\n     * @param {...(Function|Function[])} [transforms] The functions to transform\n     * arguments, specified as individual functions or arrays of functions.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * function doubled(n) {\n     *   return n * 2;\n     * }\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var modded = _.modArgs(function(x, y) {\n     *   return [x, y];\n     * }, square, doubled);\n     *\n     * modded(1, 2);\n     * // => [1, 4]\n     *\n     * modded(5, 10);\n     * // => [25, 20]\n     */\n    var modArgs = restParam(function(func, transforms) {\n      transforms = baseFlatten(transforms);\n      if (typeof func != 'function' || !arrayEvery(transforms, baseIsFunction)) {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      var length = transforms.length;\n      return restParam(function(args) {\n        var index = nativeMin(args.length, length);\n        while (index--) {\n          args[index] = transforms[index](args[index]);\n        }\n        return func.apply(this, args);\n      });\n    });\n\n    /**\n     * Creates a function that negates the result of the predicate `func`. The\n     * `func` predicate is invoked with the `this` binding and arguments of the\n     * created function.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Function} predicate The predicate to negate.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * function isEven(n) {\n     *   return n % 2 == 0;\n     * }\n     *\n     * _.filter([1, 2, 3, 4, 5, 6], _.negate(isEven));\n     * // => [1, 3, 5]\n     */\n    function negate(predicate) {\n      if (typeof predicate != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      return function() {\n        return !predicate.apply(this, arguments);\n      };\n    }\n\n    /**\n     * Creates a function that is restricted to invoking `func` once. Repeat calls\n     * to the function return the value of the first call. The `func` is invoked\n     * with the `this` binding and arguments of the created function.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * var initialize = _.once(createApplication);\n     * initialize();\n     * initialize();\n     * // `initialize` invokes `createApplication` once\n     */\n    function once(func) {\n      return before(2, func);\n    }\n\n    /**\n     * Creates a function that invokes `func` with `partial` arguments prepended\n     * to those provided to the new function. This method is like `_.bind` except\n     * it does **not** alter the `this` binding.\n     *\n     * The `_.partial.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for partially applied arguments.\n     *\n     * **Note:** This method does not set the \"length\" property of partially\n     * applied functions.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to partially apply arguments to.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new partially applied function.\n     * @example\n     *\n     * var greet = function(greeting, name) {\n     *   return greeting + ' ' + name;\n     * };\n     *\n     * var sayHelloTo = _.partial(greet, 'hello');\n     * sayHelloTo('fred');\n     * // => 'hello fred'\n     *\n     * // using placeholders\n     * var greetFred = _.partial(greet, _, 'fred');\n     * greetFred('hi');\n     * // => 'hi fred'\n     */\n    var partial = createPartial(PARTIAL_FLAG);\n\n    /**\n     * This method is like `_.partial` except that partially applied arguments\n     * are appended to those provided to the new function.\n     *\n     * The `_.partialRight.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for partially applied arguments.\n     *\n     * **Note:** This method does not set the \"length\" property of partially\n     * applied functions.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to partially apply arguments to.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new partially applied function.\n     * @example\n     *\n     * var greet = function(greeting, name) {\n     *   return greeting + ' ' + name;\n     * };\n     *\n     * var greetFred = _.partialRight(greet, 'fred');\n     * greetFred('hi');\n     * // => 'hi fred'\n     *\n     * // using placeholders\n     * var sayHelloTo = _.partialRight(greet, 'hello', _);\n     * sayHelloTo('fred');\n     * // => 'hello fred'\n     */\n    var partialRight = createPartial(PARTIAL_RIGHT_FLAG);\n\n    /**\n     * Creates a function that invokes `func` with arguments arranged according\n     * to the specified indexes where the argument value at the first index is\n     * provided as the first argument, the argument value at the second index is\n     * provided as the second argument, and so on.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to rearrange arguments for.\n     * @param {...(number|number[])} indexes The arranged argument indexes,\n     *  specified as individual indexes or arrays of indexes.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var rearged = _.rearg(function(a, b, c) {\n     *   return [a, b, c];\n     * }, 2, 0, 1);\n     *\n     * rearged('b', 'c', 'a')\n     * // => ['a', 'b', 'c']\n     *\n     * var map = _.rearg(_.map, [1, 0]);\n     * map(function(n) {\n     *   return n * 3;\n     * }, [1, 2, 3]);\n     * // => [3, 6, 9]\n     */\n    var rearg = restParam(function(func, indexes) {\n      return createWrapper(func, REARG_FLAG, undefined, undefined, undefined, baseFlatten(indexes));\n    });\n\n    /**\n     * Creates a function that invokes `func` with the `this` binding of the\n     * created function and arguments from `start` and beyond provided as an array.\n     *\n     * **Note:** This method is based on the [rest parameter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters).\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to apply a rest parameter to.\n     * @param {number} [start=func.length-1] The start position of the rest parameter.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var say = _.restParam(function(what, names) {\n     *   return what + ' ' + _.initial(names).join(', ') +\n     *     (_.size(names) > 1 ? ', & ' : '') + _.last(names);\n     * });\n     *\n     * say('hello', 'fred', 'barney', 'pebbles');\n     * // => 'hello fred, barney, & pebbles'\n     */\n    function restParam(func, start) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      start = nativeMax(start === undefined ? (func.length - 1) : (+start || 0), 0);\n      return function() {\n        var args = arguments,\n            index = -1,\n            length = nativeMax(args.length - start, 0),\n            rest = Array(length);\n\n        while (++index < length) {\n          rest[index] = args[start + index];\n        }\n        switch (start) {\n          case 0: return func.call(this, rest);\n          case 1: return func.call(this, args[0], rest);\n          case 2: return func.call(this, args[0], args[1], rest);\n        }\n        var otherArgs = Array(start + 1);\n        index = -1;\n        while (++index < start) {\n          otherArgs[index] = args[index];\n        }\n        otherArgs[start] = rest;\n        return func.apply(this, otherArgs);\n      };\n    }\n\n    /**\n     * Creates a function that invokes `func` with the `this` binding of the created\n     * function and an array of arguments much like [`Function#apply`](https://es5.github.io/#x15.3.4.3).\n     *\n     * **Note:** This method is based on the [spread operator](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operator).\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to spread arguments over.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var say = _.spread(function(who, what) {\n     *   return who + ' says ' + what;\n     * });\n     *\n     * say(['fred', 'hello']);\n     * // => 'fred says hello'\n     *\n     * // with a Promise\n     * var numbers = Promise.all([\n     *   Promise.resolve(40),\n     *   Promise.resolve(36)\n     * ]);\n     *\n     * numbers.then(_.spread(function(x, y) {\n     *   return x + y;\n     * }));\n     * // => a Promise of 76\n     */\n    function spread(func) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      return function(array) {\n        return func.apply(this, array);\n      };\n    }\n\n    /**\n     * Creates a throttled function that only invokes `func` at most once per\n     * every `wait` milliseconds. The throttled function comes with a `cancel`\n     * method to cancel delayed invocations. Provide an options object to indicate\n     * that `func` should be invoked on the leading and/or trailing edge of the\n     * `wait` timeout. Subsequent calls to the throttled function return the\n     * result of the last `func` call.\n     *\n     * **Note:** If `leading` and `trailing` options are `true`, `func` is invoked\n     * on the trailing edge of the timeout only if the the throttled function is\n     * invoked more than once during the `wait` timeout.\n     *\n     * See [David Corbacho's article](http://drupalmotion.com/article/debounce-and-throttle-visual-explanation)\n     * for details over the differences between `_.throttle` and `_.debounce`.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to throttle.\n     * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n     * @param {Object} [options] The options object.\n     * @param {boolean} [options.leading=true] Specify invoking on the leading\n     *  edge of the timeout.\n     * @param {boolean} [options.trailing=true] Specify invoking on the trailing\n     *  edge of the timeout.\n     * @returns {Function} Returns the new throttled function.\n     * @example\n     *\n     * // avoid excessively updating the position while scrolling\n     * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n     *\n     * // invoke `renewToken` when the click event is fired, but not more than once every 5 minutes\n     * jQuery('.interactive').on('click', _.throttle(renewToken, 300000, {\n     *   'trailing': false\n     * }));\n     *\n     * // cancel a trailing throttled call\n     * jQuery(window).on('popstate', throttled.cancel);\n     */\n    function throttle(func, wait, options) {\n      var leading = true,\n          trailing = true;\n\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      if (options === false) {\n        leading = false;\n      } else if (isObject(options)) {\n        leading = 'leading' in options ? !!options.leading : leading;\n        trailing = 'trailing' in options ? !!options.trailing : trailing;\n      }\n      return debounce(func, wait, { 'leading': leading, 'maxWait': +wait, 'trailing': trailing });\n    }\n\n    /**\n     * Creates a function that provides `value` to the wrapper function as its\n     * first argument. Any additional arguments provided to the function are\n     * appended to those provided to the wrapper function. The wrapper is invoked\n     * with the `this` binding of the created function.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {*} value The value to wrap.\n     * @param {Function} wrapper The wrapper function.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var p = _.wrap(_.escape, function(func, text) {\n     *   return '<p>' + func(text) + '</p>';\n     * });\n     *\n     * p('fred, barney, & pebbles');\n     * // => '<p>fred, barney, &amp; pebbles</p>'\n     */\n    function wrap(value, wrapper) {\n      wrapper = wrapper == null ? identity : wrapper;\n      return createWrapper(wrapper, PARTIAL_FLAG, undefined, [value], []);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a clone of `value`. If `isDeep` is `true` nested objects are cloned,\n     * otherwise they are assigned by reference. If `customizer` is provided it is\n     * invoked to produce the cloned values. If `customizer` returns `undefined`\n     * cloning is handled by the method instead. The `customizer` is bound to\n     * `thisArg` and invoked with two argument; (value [, index|key, object]).\n     *\n     * **Note:** This method is loosely based on the\n     * [structured clone algorithm](http://www.w3.org/TR/html5/infrastructure.html#internal-structured-cloning-algorithm).\n     * The enumerable properties of `arguments` objects and objects created by\n     * constructors other than `Object` are cloned to plain `Object` objects. An\n     * empty object is returned for uncloneable values such as functions, DOM nodes,\n     * Maps, Sets, and WeakMaps.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @param {Function} [customizer] The function to customize cloning values.\n     * @param {*} [thisArg] The `this` binding of `customizer`.\n     * @returns {*} Returns the cloned value.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney' },\n     *   { 'user': 'fred' }\n     * ];\n     *\n     * var shallow = _.clone(users);\n     * shallow[0] === users[0];\n     * // => true\n     *\n     * var deep = _.clone(users, true);\n     * deep[0] === users[0];\n     * // => false\n     *\n     * // using a customizer callback\n     * var el = _.clone(document.body, function(value) {\n     *   if (_.isElement(value)) {\n     *     return value.cloneNode(false);\n     *   }\n     * });\n     *\n     * el === document.body\n     * // => false\n     * el.nodeName\n     * // => BODY\n     * el.childNodes.length;\n     * // => 0\n     */\n    function clone(value, isDeep, customizer, thisArg) {\n      if (isDeep && typeof isDeep != 'boolean' && isIterateeCall(value, isDeep, customizer)) {\n        isDeep = false;\n      }\n      else if (typeof isDeep == 'function') {\n        thisArg = customizer;\n        customizer = isDeep;\n        isDeep = false;\n      }\n      return typeof customizer == 'function'\n        ? baseClone(value, isDeep, bindCallback(customizer, thisArg, 1))\n        : baseClone(value, isDeep);\n    }\n\n    /**\n     * Creates a deep clone of `value`. If `customizer` is provided it is invoked\n     * to produce the cloned values. If `customizer` returns `undefined` cloning\n     * is handled by the method instead. The `customizer` is bound to `thisArg`\n     * and invoked with two argument; (value [, index|key, object]).\n     *\n     * **Note:** This method is loosely based on the\n     * [structured clone algorithm](http://www.w3.org/TR/html5/infrastructure.html#internal-structured-cloning-algorithm).\n     * The enumerable properties of `arguments` objects and objects created by\n     * constructors other than `Object` are cloned to plain `Object` objects. An\n     * empty object is returned for uncloneable values such as functions, DOM nodes,\n     * Maps, Sets, and WeakMaps.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to deep clone.\n     * @param {Function} [customizer] The function to customize cloning values.\n     * @param {*} [thisArg] The `this` binding of `customizer`.\n     * @returns {*} Returns the deep cloned value.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney' },\n     *   { 'user': 'fred' }\n     * ];\n     *\n     * var deep = _.cloneDeep(users);\n     * deep[0] === users[0];\n     * // => false\n     *\n     * // using a customizer callback\n     * var el = _.cloneDeep(document.body, function(value) {\n     *   if (_.isElement(value)) {\n     *     return value.cloneNode(true);\n     *   }\n     * });\n     *\n     * el === document.body\n     * // => false\n     * el.nodeName\n     * // => BODY\n     * el.childNodes.length;\n     * // => 20\n     */\n    function cloneDeep(value, customizer, thisArg) {\n      return typeof customizer == 'function'\n        ? baseClone(value, true, bindCallback(customizer, thisArg, 1))\n        : baseClone(value, true);\n    }\n\n    /**\n     * Checks if `value` is greater than `other`.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is greater than `other`, else `false`.\n     * @example\n     *\n     * _.gt(3, 1);\n     * // => true\n     *\n     * _.gt(3, 3);\n     * // => false\n     *\n     * _.gt(1, 3);\n     * // => false\n     */\n    function gt(value, other) {\n      return value > other;\n    }\n\n    /**\n     * Checks if `value` is greater than or equal to `other`.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is greater than or equal to `other`, else `false`.\n     * @example\n     *\n     * _.gte(3, 1);\n     * // => true\n     *\n     * _.gte(3, 3);\n     * // => true\n     *\n     * _.gte(1, 3);\n     * // => false\n     */\n    function gte(value, other) {\n      return value >= other;\n    }\n\n    /**\n     * Checks if `value` is classified as an `arguments` object.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n     * @example\n     *\n     * _.isArguments(function() { return arguments; }());\n     * // => true\n     *\n     * _.isArguments([1, 2, 3]);\n     * // => false\n     */\n    function isArguments(value) {\n      return isObjectLike(value) && isArrayLike(value) &&\n        hasOwnProperty.call(value, 'callee') && !propertyIsEnumerable.call(value, 'callee');\n    }\n\n    /**\n     * Checks if `value` is classified as an `Array` object.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n     * @example\n     *\n     * _.isArray([1, 2, 3]);\n     * // => true\n     *\n     * _.isArray(function() { return arguments; }());\n     * // => false\n     */\n    var isArray = nativeIsArray || function(value) {\n      return isObjectLike(value) && isLength(value.length) && objToString.call(value) == arrayTag;\n    };\n\n    /**\n     * Checks if `value` is classified as a boolean primitive or object.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n     * @example\n     *\n     * _.isBoolean(false);\n     * // => true\n     *\n     * _.isBoolean(null);\n     * // => false\n     */\n    function isBoolean(value) {\n      return value === true || value === false || (isObjectLike(value) && objToString.call(value) == boolTag);\n    }\n\n    /**\n     * Checks if `value` is classified as a `Date` object.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n     * @example\n     *\n     * _.isDate(new Date);\n     * // => true\n     *\n     * _.isDate('Mon April 23 2012');\n     * // => false\n     */\n    function isDate(value) {\n      return isObjectLike(value) && objToString.call(value) == dateTag;\n    }\n\n    /**\n     * Checks if `value` is a DOM element.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a DOM element, else `false`.\n     * @example\n     *\n     * _.isElement(document.body);\n     * // => true\n     *\n     * _.isElement('<body>');\n     * // => false\n     */\n    function isElement(value) {\n      return !!value && value.nodeType === 1 && isObjectLike(value) && !isPlainObject(value);\n    }\n\n    /**\n     * Checks if `value` is empty. A value is considered empty unless it is an\n     * `arguments` object, array, string, or jQuery-like collection with a length\n     * greater than `0` or an object with own enumerable properties.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {Array|Object|string} value The value to inspect.\n     * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n     * @example\n     *\n     * _.isEmpty(null);\n     * // => true\n     *\n     * _.isEmpty(true);\n     * // => true\n     *\n     * _.isEmpty(1);\n     * // => true\n     *\n     * _.isEmpty([1, 2, 3]);\n     * // => false\n     *\n     * _.isEmpty({ 'a': 1 });\n     * // => false\n     */\n    function isEmpty(value) {\n      if (value == null) {\n        return true;\n      }\n      if (isArrayLike(value) && (isArray(value) || isString(value) || isArguments(value) ||\n          (isObjectLike(value) && isFunction(value.splice)))) {\n        return !value.length;\n      }\n      return !keys(value).length;\n    }\n\n    /**\n     * Performs a deep comparison between two values to determine if they are\n     * equivalent. If `customizer` is provided it is invoked to compare values.\n     * If `customizer` returns `undefined` comparisons are handled by the method\n     * instead. The `customizer` is bound to `thisArg` and invoked with three\n     * arguments: (value, other [, index|key]).\n     *\n     * **Note:** This method supports comparing arrays, booleans, `Date` objects,\n     * numbers, `Object` objects, regexes, and strings. Objects are compared by\n     * their own, not inherited, enumerable properties. Functions and DOM nodes\n     * are **not** supported. Provide a customizer function to extend support\n     * for comparing other values.\n     *\n     * @static\n     * @memberOf _\n     * @alias eq\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @param {Function} [customizer] The function to customize value comparisons.\n     * @param {*} [thisArg] The `this` binding of `customizer`.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     * @example\n     *\n     * var object = { 'user': 'fred' };\n     * var other = { 'user': 'fred' };\n     *\n     * object == other;\n     * // => false\n     *\n     * _.isEqual(object, other);\n     * // => true\n     *\n     * // using a customizer callback\n     * var array = ['hello', 'goodbye'];\n     * var other = ['hi', 'goodbye'];\n     *\n     * _.isEqual(array, other, function(value, other) {\n     *   if (_.every([value, other], RegExp.prototype.test, /^h(?:i|ello)$/)) {\n     *     return true;\n     *   }\n     * });\n     * // => true\n     */\n    function isEqual(value, other, customizer, thisArg) {\n      customizer = typeof customizer == 'function' ? bindCallback(customizer, thisArg, 3) : undefined;\n      var result = customizer ? customizer(value, other) : undefined;\n      return  result === undefined ? baseIsEqual(value, other, customizer) : !!result;\n    }\n\n    /**\n     * Checks if `value` is an `Error`, `EvalError`, `RangeError`, `ReferenceError`,\n     * `SyntaxError`, `TypeError`, or `URIError` object.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an error object, else `false`.\n     * @example\n     *\n     * _.isError(new Error);\n     * // => true\n     *\n     * _.isError(Error);\n     * // => false\n     */\n    function isError(value) {\n      return isObjectLike(value) && typeof value.message == 'string' && objToString.call(value) == errorTag;\n    }\n\n    /**\n     * Checks if `value` is a finite primitive number.\n     *\n     * **Note:** This method is based on [`Number.isFinite`](http://ecma-international.org/ecma-262/6.0/#sec-number.isfinite).\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a finite number, else `false`.\n     * @example\n     *\n     * _.isFinite(10);\n     * // => true\n     *\n     * _.isFinite('10');\n     * // => false\n     *\n     * _.isFinite(true);\n     * // => false\n     *\n     * _.isFinite(Object(10));\n     * // => false\n     *\n     * _.isFinite(Infinity);\n     * // => false\n     */\n    function isFinite(value) {\n      return typeof value == 'number' && nativeIsFinite(value);\n    }\n\n    /**\n     * Checks if `value` is classified as a `Function` object.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n     * @example\n     *\n     * _.isFunction(_);\n     * // => true\n     *\n     * _.isFunction(/abc/);\n     * // => false\n     */\n    function isFunction(value) {\n      // The use of `Object#toString` avoids issues with the `typeof` operator\n      // in older versions of Chrome and Safari which return 'function' for regexes\n      // and Safari 8 equivalents which return 'object' for typed array constructors.\n      return isObject(value) && objToString.call(value) == funcTag;\n    }\n\n    /**\n     * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.\n     * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n     * @example\n     *\n     * _.isObject({});\n     * // => true\n     *\n     * _.isObject([1, 2, 3]);\n     * // => true\n     *\n     * _.isObject(1);\n     * // => false\n     */\n    function isObject(value) {\n      // Avoid a V8 JIT bug in Chrome 19-20.\n      // See https://code.google.com/p/v8/issues/detail?id=2291 for more details.\n      var type = typeof value;\n      return !!value && (type == 'object' || type == 'function');\n    }\n\n    /**\n     * Performs a deep comparison between `object` and `source` to determine if\n     * `object` contains equivalent property values. If `customizer` is provided\n     * it is invoked to compare values. If `customizer` returns `undefined`\n     * comparisons are handled by the method instead. The `customizer` is bound\n     * to `thisArg` and invoked with three arguments: (value, other, index|key).\n     *\n     * **Note:** This method supports comparing properties of arrays, booleans,\n     * `Date` objects, numbers, `Object` objects, regexes, and strings. Functions\n     * and DOM nodes are **not** supported. Provide a customizer function to extend\n     * support for comparing other values.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property values to match.\n     * @param {Function} [customizer] The function to customize value comparisons.\n     * @param {*} [thisArg] The `this` binding of `customizer`.\n     * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n     * @example\n     *\n     * var object = { 'user': 'fred', 'age': 40 };\n     *\n     * _.isMatch(object, { 'age': 40 });\n     * // => true\n     *\n     * _.isMatch(object, { 'age': 36 });\n     * // => false\n     *\n     * // using a customizer callback\n     * var object = { 'greeting': 'hello' };\n     * var source = { 'greeting': 'hi' };\n     *\n     * _.isMatch(object, source, function(value, other) {\n     *   return _.every([value, other], RegExp.prototype.test, /^h(?:i|ello)$/) || undefined;\n     * });\n     * // => true\n     */\n    function isMatch(object, source, customizer, thisArg) {\n      customizer = typeof customizer == 'function' ? bindCallback(customizer, thisArg, 3) : undefined;\n      return baseIsMatch(object, getMatchData(source), customizer);\n    }\n\n    /**\n     * Checks if `value` is `NaN`.\n     *\n     * **Note:** This method is not the same as [`isNaN`](https://es5.github.io/#x15.1.2.4)\n     * which returns `true` for `undefined` and other non-numeric values.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n     * @example\n     *\n     * _.isNaN(NaN);\n     * // => true\n     *\n     * _.isNaN(new Number(NaN));\n     * // => true\n     *\n     * isNaN(undefined);\n     * // => true\n     *\n     * _.isNaN(undefined);\n     * // => false\n     */\n    function isNaN(value) {\n      // An `NaN` primitive is the only value that is not equal to itself.\n      // Perform the `toStringTag` check first to avoid errors with some host objects in IE.\n      return isNumber(value) && value != +value;\n    }\n\n    /**\n     * Checks if `value` is a native function.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a native function, else `false`.\n     * @example\n     *\n     * _.isNative(Array.prototype.push);\n     * // => true\n     *\n     * _.isNative(_);\n     * // => false\n     */\n    function isNative(value) {\n      if (value == null) {\n        return false;\n      }\n      if (isFunction(value)) {\n        return reIsNative.test(fnToString.call(value));\n      }\n      return isObjectLike(value) && reIsHostCtor.test(value);\n    }\n\n    /**\n     * Checks if `value` is `null`.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is `null`, else `false`.\n     * @example\n     *\n     * _.isNull(null);\n     * // => true\n     *\n     * _.isNull(void 0);\n     * // => false\n     */\n    function isNull(value) {\n      return value === null;\n    }\n\n    /**\n     * Checks if `value` is classified as a `Number` primitive or object.\n     *\n     * **Note:** To exclude `Infinity`, `-Infinity`, and `NaN`, which are classified\n     * as numbers, use the `_.isFinite` method.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n     * @example\n     *\n     * _.isNumber(8.4);\n     * // => true\n     *\n     * _.isNumber(NaN);\n     * // => true\n     *\n     * _.isNumber('8.4');\n     * // => false\n     */\n    function isNumber(value) {\n      return typeof value == 'number' || (isObjectLike(value) && objToString.call(value) == numberTag);\n    }\n\n    /**\n     * Checks if `value` is a plain object, that is, an object created by the\n     * `Object` constructor or one with a `[[Prototype]]` of `null`.\n     *\n     * **Note:** This method assumes objects created by the `Object` constructor\n     * have no inherited enumerable properties.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     * }\n     *\n     * _.isPlainObject(new Foo);\n     * // => false\n     *\n     * _.isPlainObject([1, 2, 3]);\n     * // => false\n     *\n     * _.isPlainObject({ 'x': 0, 'y': 0 });\n     * // => true\n     *\n     * _.isPlainObject(Object.create(null));\n     * // => true\n     */\n    function isPlainObject(value) {\n      var Ctor;\n\n      // Exit early for non `Object` objects.\n      if (!(isObjectLike(value) && objToString.call(value) == objectTag && !isArguments(value)) ||\n          (!hasOwnProperty.call(value, 'constructor') && (Ctor = value.constructor, typeof Ctor == 'function' && !(Ctor instanceof Ctor)))) {\n        return false;\n      }\n      // IE < 9 iterates inherited properties before own properties. If the first\n      // iterated property is an object's own property then there are no inherited\n      // enumerable properties.\n      var result;\n      // In most environments an object's own properties are iterated before\n      // its inherited properties. If the last iterated property is an object's\n      // own property then there are no inherited enumerable properties.\n      baseForIn(value, function(subValue, key) {\n        result = key;\n      });\n      return result === undefined || hasOwnProperty.call(value, result);\n    }\n\n    /**\n     * Checks if `value` is classified as a `RegExp` object.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n     * @example\n     *\n     * _.isRegExp(/abc/);\n     * // => true\n     *\n     * _.isRegExp('/abc/');\n     * // => false\n     */\n    function isRegExp(value) {\n      return isObject(value) && objToString.call(value) == regexpTag;\n    }\n\n    /**\n     * Checks if `value` is classified as a `String` primitive or object.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n     * @example\n     *\n     * _.isString('abc');\n     * // => true\n     *\n     * _.isString(1);\n     * // => false\n     */\n    function isString(value) {\n      return typeof value == 'string' || (isObjectLike(value) && objToString.call(value) == stringTag);\n    }\n\n    /**\n     * Checks if `value` is classified as a typed array.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n     * @example\n     *\n     * _.isTypedArray(new Uint8Array);\n     * // => true\n     *\n     * _.isTypedArray([]);\n     * // => false\n     */\n    function isTypedArray(value) {\n      return isObjectLike(value) && isLength(value.length) && !!typedArrayTags[objToString.call(value)];\n    }\n\n    /**\n     * Checks if `value` is `undefined`.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is `undefined`, else `false`.\n     * @example\n     *\n     * _.isUndefined(void 0);\n     * // => true\n     *\n     * _.isUndefined(null);\n     * // => false\n     */\n    function isUndefined(value) {\n      return value === undefined;\n    }\n\n    /**\n     * Checks if `value` is less than `other`.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is less than `other`, else `false`.\n     * @example\n     *\n     * _.lt(1, 3);\n     * // => true\n     *\n     * _.lt(3, 3);\n     * // => false\n     *\n     * _.lt(3, 1);\n     * // => false\n     */\n    function lt(value, other) {\n      return value < other;\n    }\n\n    /**\n     * Checks if `value` is less than or equal to `other`.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is less than or equal to `other`, else `false`.\n     * @example\n     *\n     * _.lte(1, 3);\n     * // => true\n     *\n     * _.lte(3, 3);\n     * // => true\n     *\n     * _.lte(3, 1);\n     * // => false\n     */\n    function lte(value, other) {\n      return value <= other;\n    }\n\n    /**\n     * Converts `value` to an array.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {Array} Returns the converted array.\n     * @example\n     *\n     * (function() {\n     *   return _.toArray(arguments).slice(1);\n     * }(1, 2, 3));\n     * // => [2, 3]\n     */\n    function toArray(value) {\n      var length = value ? getLength(value) : 0;\n      if (!isLength(length)) {\n        return values(value);\n      }\n      if (!length) {\n        return [];\n      }\n      return arrayCopy(value);\n    }\n\n    /**\n     * Converts `value` to a plain object flattening inherited enumerable\n     * properties of `value` to own properties of the plain object.\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {Object} Returns the converted plain object.\n     * @example\n     *\n     * function Foo() {\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.assign({ 'a': 1 }, new Foo);\n     * // => { 'a': 1, 'b': 2 }\n     *\n     * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n     * // => { 'a': 1, 'b': 2, 'c': 3 }\n     */\n    function toPlainObject(value) {\n      return baseCopy(value, keysIn(value));\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Recursively merges own enumerable properties of the source object(s), that\n     * don't resolve to `undefined` into the destination object. Subsequent sources\n     * overwrite property assignments of previous sources. If `customizer` is\n     * provided it is invoked to produce the merged values of the destination and\n     * source properties. If `customizer` returns `undefined` merging is handled\n     * by the method instead. The `customizer` is bound to `thisArg` and invoked\n     * with five arguments: (objectValue, sourceValue, key, object, source).\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @param {*} [thisArg] The `this` binding of `customizer`.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var users = {\n     *   'data': [{ 'user': 'barney' }, { 'user': 'fred' }]\n     * };\n     *\n     * var ages = {\n     *   'data': [{ 'age': 36 }, { 'age': 40 }]\n     * };\n     *\n     * _.merge(users, ages);\n     * // => { 'data': [{ 'user': 'barney', 'age': 36 }, { 'user': 'fred', 'age': 40 }] }\n     *\n     * // using a customizer callback\n     * var object = {\n     *   'fruits': ['apple'],\n     *   'vegetables': ['beet']\n     * };\n     *\n     * var other = {\n     *   'fruits': ['banana'],\n     *   'vegetables': ['carrot']\n     * };\n     *\n     * _.merge(object, other, function(a, b) {\n     *   if (_.isArray(a)) {\n     *     return a.concat(b);\n     *   }\n     * });\n     * // => { 'fruits': ['apple', 'banana'], 'vegetables': ['beet', 'carrot'] }\n     */\n    var merge = createAssigner(baseMerge);\n\n    /**\n     * Assigns own enumerable properties of source object(s) to the destination\n     * object. Subsequent sources overwrite property assignments of previous sources.\n     * If `customizer` is provided it is invoked to produce the assigned values.\n     * The `customizer` is bound to `thisArg` and invoked with five arguments:\n     * (objectValue, sourceValue, key, object, source).\n     *\n     * **Note:** This method mutates `object` and is based on\n     * [`Object.assign`](http://ecma-international.org/ecma-262/6.0/#sec-object.assign).\n     *\n     * @static\n     * @memberOf _\n     * @alias extend\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @param {*} [thisArg] The `this` binding of `customizer`.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * _.assign({ 'user': 'barney' }, { 'age': 40 }, { 'user': 'fred' });\n     * // => { 'user': 'fred', 'age': 40 }\n     *\n     * // using a customizer callback\n     * var defaults = _.partialRight(_.assign, function(value, other) {\n     *   return _.isUndefined(value) ? other : value;\n     * });\n     *\n     * defaults({ 'user': 'barney' }, { 'age': 36 }, { 'user': 'fred' });\n     * // => { 'user': 'barney', 'age': 36 }\n     */\n    var assign = createAssigner(function(object, source, customizer) {\n      return customizer\n        ? assignWith(object, source, customizer)\n        : baseAssign(object, source);\n    });\n\n    /**\n     * Creates an object that inherits from the given `prototype` object. If a\n     * `properties` object is provided its own enumerable properties are assigned\n     * to the created object.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} prototype The object to inherit from.\n     * @param {Object} [properties] The properties to assign to the object.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * function Shape() {\n     *   this.x = 0;\n     *   this.y = 0;\n     * }\n     *\n     * function Circle() {\n     *   Shape.call(this);\n     * }\n     *\n     * Circle.prototype = _.create(Shape.prototype, {\n     *   'constructor': Circle\n     * });\n     *\n     * var circle = new Circle;\n     * circle instanceof Circle;\n     * // => true\n     *\n     * circle instanceof Shape;\n     * // => true\n     */\n    function create(prototype, properties, guard) {\n      var result = baseCreate(prototype);\n      if (guard && isIterateeCall(prototype, properties, guard)) {\n        properties = undefined;\n      }\n      return properties ? baseAssign(result, properties) : result;\n    }\n\n    /**\n     * Assigns own enumerable properties of source object(s) to the destination\n     * object for all destination properties that resolve to `undefined`. Once a\n     * property is set, additional values of the same property are ignored.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * _.defaults({ 'user': 'barney' }, { 'age': 36 }, { 'user': 'fred' });\n     * // => { 'user': 'barney', 'age': 36 }\n     */\n    var defaults = createDefaults(assign, assignDefaults);\n\n    /**\n     * This method is like `_.defaults` except that it recursively assigns\n     * default properties.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * _.defaultsDeep({ 'user': { 'name': 'barney' } }, { 'user': { 'name': 'fred', 'age': 36 } });\n     * // => { 'user': { 'name': 'barney', 'age': 36 } }\n     *\n     */\n    var defaultsDeep = createDefaults(merge, mergeDefaults);\n\n    /**\n     * This method is like `_.find` except that it returns the key of the first\n     * element `predicate` returns truthy for instead of the element itself.\n     *\n     * If a property name is provided for `predicate` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `predicate` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to search.\n     * @param {Function|Object|string} [predicate=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `predicate`.\n     * @returns {string|undefined} Returns the key of the matched element, else `undefined`.\n     * @example\n     *\n     * var users = {\n     *   'barney':  { 'age': 36, 'active': true },\n     *   'fred':    { 'age': 40, 'active': false },\n     *   'pebbles': { 'age': 1,  'active': true }\n     * };\n     *\n     * _.findKey(users, function(chr) {\n     *   return chr.age < 40;\n     * });\n     * // => 'barney' (iteration order is not guaranteed)\n     *\n     * // using the `_.matches` callback shorthand\n     * _.findKey(users, { 'age': 1, 'active': true });\n     * // => 'pebbles'\n     *\n     * // using the `_.matchesProperty` callback shorthand\n     * _.findKey(users, 'active', false);\n     * // => 'fred'\n     *\n     * // using the `_.property` callback shorthand\n     * _.findKey(users, 'active');\n     * // => 'barney'\n     */\n    var findKey = createFindKey(baseForOwn);\n\n    /**\n     * This method is like `_.findKey` except that it iterates over elements of\n     * a collection in the opposite order.\n     *\n     * If a property name is provided for `predicate` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `predicate` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to search.\n     * @param {Function|Object|string} [predicate=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `predicate`.\n     * @returns {string|undefined} Returns the key of the matched element, else `undefined`.\n     * @example\n     *\n     * var users = {\n     *   'barney':  { 'age': 36, 'active': true },\n     *   'fred':    { 'age': 40, 'active': false },\n     *   'pebbles': { 'age': 1,  'active': true }\n     * };\n     *\n     * _.findLastKey(users, function(chr) {\n     *   return chr.age < 40;\n     * });\n     * // => returns `pebbles` assuming `_.findKey` returns `barney`\n     *\n     * // using the `_.matches` callback shorthand\n     * _.findLastKey(users, { 'age': 36, 'active': true });\n     * // => 'barney'\n     *\n     * // using the `_.matchesProperty` callback shorthand\n     * _.findLastKey(users, 'active', false);\n     * // => 'fred'\n     *\n     * // using the `_.property` callback shorthand\n     * _.findLastKey(users, 'active');\n     * // => 'pebbles'\n     */\n    var findLastKey = createFindKey(baseForOwnRight);\n\n    /**\n     * Iterates over own and inherited enumerable properties of an object invoking\n     * `iteratee` for each property. The `iteratee` is bound to `thisArg` and invoked\n     * with three arguments: (value, key, object). Iteratee functions may exit\n     * iteration early by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forIn(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => logs 'a', 'b', and 'c' (iteration order is not guaranteed)\n     */\n    var forIn = createForIn(baseFor);\n\n    /**\n     * This method is like `_.forIn` except that it iterates over properties of\n     * `object` in the opposite order.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forInRight(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => logs 'c', 'b', and 'a' assuming `_.forIn ` logs 'a', 'b', and 'c'\n     */\n    var forInRight = createForIn(baseForRight);\n\n    /**\n     * Iterates over own enumerable properties of an object invoking `iteratee`\n     * for each property. The `iteratee` is bound to `thisArg` and invoked with\n     * three arguments: (value, key, object). Iteratee functions may exit iteration\n     * early by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forOwn(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => logs 'a' and 'b' (iteration order is not guaranteed)\n     */\n    var forOwn = createForOwn(baseForOwn);\n\n    /**\n     * This method is like `_.forOwn` except that it iterates over properties of\n     * `object` in the opposite order.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forOwnRight(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => logs 'b' and 'a' assuming `_.forOwn` logs 'a' and 'b'\n     */\n    var forOwnRight = createForOwn(baseForOwnRight);\n\n    /**\n     * Creates an array of function property names from all enumerable properties,\n     * own and inherited, of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @alias methods\n     * @category Object\n     * @param {Object} object The object to inspect.\n     * @returns {Array} Returns the new array of property names.\n     * @example\n     *\n     * _.functions(_);\n     * // => ['after', 'ary', 'assign', ...]\n     */\n    function functions(object) {\n      return baseFunctions(object, keysIn(object));\n    }\n\n    /**\n     * Gets the property value at `path` of `object`. If the resolved value is\n     * `undefined` the `defaultValue` is used in its place.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the property to get.\n     * @param {*} [defaultValue] The value returned if the resolved value is `undefined`.\n     * @returns {*} Returns the resolved value.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n     *\n     * _.get(object, 'a[0].b.c');\n     * // => 3\n     *\n     * _.get(object, ['a', '0', 'b', 'c']);\n     * // => 3\n     *\n     * _.get(object, 'a.b.c', 'default');\n     * // => 'default'\n     */\n    function get(object, path, defaultValue) {\n      var result = object == null ? undefined : baseGet(object, toPath(path), path + '');\n      return result === undefined ? defaultValue : result;\n    }\n\n    /**\n     * Checks if `path` is a direct property.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path to check.\n     * @returns {boolean} Returns `true` if `path` is a direct property, else `false`.\n     * @example\n     *\n     * var object = { 'a': { 'b': { 'c': 3 } } };\n     *\n     * _.has(object, 'a');\n     * // => true\n     *\n     * _.has(object, 'a.b.c');\n     * // => true\n     *\n     * _.has(object, ['a', 'b', 'c']);\n     * // => true\n     */\n    function has(object, path) {\n      if (object == null) {\n        return false;\n      }\n      var result = hasOwnProperty.call(object, path);\n      if (!result && !isKey(path)) {\n        path = toPath(path);\n        object = path.length == 1 ? object : baseGet(object, baseSlice(path, 0, -1));\n        if (object == null) {\n          return false;\n        }\n        path = last(path);\n        result = hasOwnProperty.call(object, path);\n      }\n      return result || (isLength(object.length) && isIndex(path, object.length) &&\n        (isArray(object) || isArguments(object)));\n    }\n\n    /**\n     * Creates an object composed of the inverted keys and values of `object`.\n     * If `object` contains duplicate values, subsequent values overwrite property\n     * assignments of previous values unless `multiValue` is `true`.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to invert.\n     * @param {boolean} [multiValue] Allow multiple values per key.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.\n     * @returns {Object} Returns the new inverted object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2, 'c': 1 };\n     *\n     * _.invert(object);\n     * // => { '1': 'c', '2': 'b' }\n     *\n     * // with `multiValue`\n     * _.invert(object, true);\n     * // => { '1': ['a', 'c'], '2': ['b'] }\n     */\n    function invert(object, multiValue, guard) {\n      if (guard && isIterateeCall(object, multiValue, guard)) {\n        multiValue = undefined;\n      }\n      var index = -1,\n          props = keys(object),\n          length = props.length,\n          result = {};\n\n      while (++index < length) {\n        var key = props[index],\n            value = object[key];\n\n        if (multiValue) {\n          if (hasOwnProperty.call(result, value)) {\n            result[value].push(key);\n          } else {\n            result[value] = [key];\n          }\n        }\n        else {\n          result[value] = key;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Creates an array of the own enumerable property names of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects. See the\n     * [ES spec](http://ecma-international.org/ecma-262/6.0/#sec-object.keys)\n     * for more details.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.keys(new Foo);\n     * // => ['a', 'b'] (iteration order is not guaranteed)\n     *\n     * _.keys('hi');\n     * // => ['0', '1']\n     */\n    var keys = !nativeKeys ? shimKeys : function(object) {\n      var Ctor = object == null ? undefined : object.constructor;\n      if ((typeof Ctor == 'function' && Ctor.prototype === object) ||\n          (typeof object != 'function' && isArrayLike(object))) {\n        return shimKeys(object);\n      }\n      return isObject(object) ? nativeKeys(object) : [];\n    };\n\n    /**\n     * Creates an array of the own and inherited enumerable property names of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.keysIn(new Foo);\n     * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n     */\n    function keysIn(object) {\n      if (object == null) {\n        return [];\n      }\n      if (!isObject(object)) {\n        object = Object(object);\n      }\n      var length = object.length;\n      length = (length && isLength(length) &&\n        (isArray(object) || isArguments(object)) && length) || 0;\n\n      var Ctor = object.constructor,\n          index = -1,\n          isProto = typeof Ctor == 'function' && Ctor.prototype === object,\n          result = Array(length),\n          skipIndexes = length > 0;\n\n      while (++index < length) {\n        result[index] = (index + '');\n      }\n      for (var key in object) {\n        if (!(skipIndexes && isIndex(key, length)) &&\n            !(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The opposite of `_.mapValues`; this method creates an object with the\n     * same values as `object` and keys generated by running each own enumerable\n     * property of `object` through `iteratee`.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function|Object|string} [iteratee=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {Object} Returns the new mapped object.\n     * @example\n     *\n     * _.mapKeys({ 'a': 1, 'b': 2 }, function(value, key) {\n     *   return key + value;\n     * });\n     * // => { 'a1': 1, 'b2': 2 }\n     */\n    var mapKeys = createObjectMapper(true);\n\n    /**\n     * Creates an object with the same keys as `object` and values generated by\n     * running each own enumerable property of `object` through `iteratee`. The\n     * iteratee function is bound to `thisArg` and invoked with three arguments:\n     * (value, key, object).\n     *\n     * If a property name is provided for `iteratee` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `iteratee` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function|Object|string} [iteratee=_.identity] The function invoked\n     *  per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {Object} Returns the new mapped object.\n     * @example\n     *\n     * _.mapValues({ 'a': 1, 'b': 2 }, function(n) {\n     *   return n * 3;\n     * });\n     * // => { 'a': 3, 'b': 6 }\n     *\n     * var users = {\n     *   'fred':    { 'user': 'fred',    'age': 40 },\n     *   'pebbles': { 'user': 'pebbles', 'age': 1 }\n     * };\n     *\n     * // using the `_.property` callback shorthand\n     * _.mapValues(users, 'age');\n     * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n     */\n    var mapValues = createObjectMapper();\n\n    /**\n     * The opposite of `_.pick`; this method creates an object composed of the\n     * own and inherited enumerable properties of `object` that are not omitted.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {Function|...(string|string[])} [predicate] The function invoked per\n     *  iteration or property names to omit, specified as individual property\n     *  names or arrays of property names.\n     * @param {*} [thisArg] The `this` binding of `predicate`.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'user': 'fred', 'age': 40 };\n     *\n     * _.omit(object, 'age');\n     * // => { 'user': 'fred' }\n     *\n     * _.omit(object, _.isNumber);\n     * // => { 'user': 'fred' }\n     */\n    var omit = restParam(function(object, props) {\n      if (object == null) {\n        return {};\n      }\n      if (typeof props[0] != 'function') {\n        var props = arrayMap(baseFlatten(props), String);\n        return pickByArray(object, baseDifference(keysIn(object), props));\n      }\n      var predicate = bindCallback(props[0], props[1], 3);\n      return pickByCallback(object, function(value, key, object) {\n        return !predicate(value, key, object);\n      });\n    });\n\n    /**\n     * Creates a two dimensional array of the key-value pairs for `object`,\n     * e.g. `[[key1, value1], [key2, value2]]`.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the new array of key-value pairs.\n     * @example\n     *\n     * _.pairs({ 'barney': 36, 'fred': 40 });\n     * // => [['barney', 36], ['fred', 40]] (iteration order is not guaranteed)\n     */\n    function pairs(object) {\n      object = toObject(object);\n\n      var index = -1,\n          props = keys(object),\n          length = props.length,\n          result = Array(length);\n\n      while (++index < length) {\n        var key = props[index];\n        result[index] = [key, object[key]];\n      }\n      return result;\n    }\n\n    /**\n     * Creates an object composed of the picked `object` properties. Property\n     * names may be specified as individual arguments or as arrays of property\n     * names. If `predicate` is provided it is invoked for each property of `object`\n     * picking the properties `predicate` returns truthy for. The predicate is\n     * bound to `thisArg` and invoked with three arguments: (value, key, object).\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {Function|...(string|string[])} [predicate] The function invoked per\n     *  iteration or property names to pick, specified as individual property\n     *  names or arrays of property names.\n     * @param {*} [thisArg] The `this` binding of `predicate`.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'user': 'fred', 'age': 40 };\n     *\n     * _.pick(object, 'user');\n     * // => { 'user': 'fred' }\n     *\n     * _.pick(object, _.isString);\n     * // => { 'user': 'fred' }\n     */\n    var pick = restParam(function(object, props) {\n      if (object == null) {\n        return {};\n      }\n      return typeof props[0] == 'function'\n        ? pickByCallback(object, bindCallback(props[0], props[1], 3))\n        : pickByArray(object, baseFlatten(props));\n    });\n\n    /**\n     * This method is like `_.get` except that if the resolved value is a function\n     * it is invoked with the `this` binding of its parent object and its result\n     * is returned.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the property to resolve.\n     * @param {*} [defaultValue] The value returned if the resolved value is `undefined`.\n     * @returns {*} Returns the resolved value.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c1': 3, 'c2': _.constant(4) } }] };\n     *\n     * _.result(object, 'a[0].b.c1');\n     * // => 3\n     *\n     * _.result(object, 'a[0].b.c2');\n     * // => 4\n     *\n     * _.result(object, 'a.b.c', 'default');\n     * // => 'default'\n     *\n     * _.result(object, 'a.b.c', _.constant('default'));\n     * // => 'default'\n     */\n    function result(object, path, defaultValue) {\n      var result = object == null ? undefined : object[path];\n      if (result === undefined) {\n        if (object != null && !isKey(path, object)) {\n          path = toPath(path);\n          object = path.length == 1 ? object : baseGet(object, baseSlice(path, 0, -1));\n          result = object == null ? undefined : object[last(path)];\n        }\n        result = result === undefined ? defaultValue : result;\n      }\n      return isFunction(result) ? result.call(object) : result;\n    }\n\n    /**\n     * Sets the property value of `path` on `object`. If a portion of `path`\n     * does not exist it is created.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to augment.\n     * @param {Array|string} path The path of the property to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n     *\n     * _.set(object, 'a[0].b.c', 4);\n     * console.log(object.a[0].b.c);\n     * // => 4\n     *\n     * _.set(object, 'x[0].y.z', 5);\n     * console.log(object.x[0].y.z);\n     * // => 5\n     */\n    function set(object, path, value) {\n      if (object == null) {\n        return object;\n      }\n      var pathKey = (path + '');\n      path = (object[pathKey] != null || isKey(path, object)) ? [pathKey] : toPath(path);\n\n      var index = -1,\n          length = path.length,\n          lastIndex = length - 1,\n          nested = object;\n\n      while (nested != null && ++index < length) {\n        var key = path[index];\n        if (isObject(nested)) {\n          if (index == lastIndex) {\n            nested[key] = value;\n          } else if (nested[key] == null) {\n            nested[key] = isIndex(path[index + 1]) ? [] : {};\n          }\n        }\n        nested = nested[key];\n      }\n      return object;\n    }\n\n    /**\n     * An alternative to `_.reduce`; this method transforms `object` to a new\n     * `accumulator` object which is the result of running each of its own enumerable\n     * properties through `iteratee`, with each invocation potentially mutating\n     * the `accumulator` object. The `iteratee` is bound to `thisArg` and invoked\n     * with four arguments: (accumulator, value, key, object). Iteratee functions\n     * may exit iteration early by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Array|Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [accumulator] The custom accumulator value.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {*} Returns the accumulated value.\n     * @example\n     *\n     * _.transform([2, 3, 4], function(result, n) {\n     *   result.push(n *= n);\n     *   return n % 2 == 0;\n     * });\n     * // => [4, 9]\n     *\n     * _.transform({ 'a': 1, 'b': 2 }, function(result, n, key) {\n     *   result[key] = n * 3;\n     * });\n     * // => { 'a': 3, 'b': 6 }\n     */\n    function transform(object, iteratee, accumulator, thisArg) {\n      var isArr = isArray(object) || isTypedArray(object);\n      iteratee = getCallback(iteratee, thisArg, 4);\n\n      if (accumulator == null) {\n        if (isArr || isObject(object)) {\n          var Ctor = object.constructor;\n          if (isArr) {\n            accumulator = isArray(object) ? new Ctor : [];\n          } else {\n            accumulator = baseCreate(isFunction(Ctor) ? Ctor.prototype : undefined);\n          }\n        } else {\n          accumulator = {};\n        }\n      }\n      (isArr ? arrayEach : baseForOwn)(object, function(value, index, object) {\n        return iteratee(accumulator, value, index, object);\n      });\n      return accumulator;\n    }\n\n    /**\n     * Creates an array of the own enumerable property values of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property values.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.values(new Foo);\n     * // => [1, 2] (iteration order is not guaranteed)\n     *\n     * _.values('hi');\n     * // => ['h', 'i']\n     */\n    function values(object) {\n      return baseValues(object, keys(object));\n    }\n\n    /**\n     * Creates an array of the own and inherited enumerable property values\n     * of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects.\n     *\n     * @static\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property values.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.valuesIn(new Foo);\n     * // => [1, 2, 3] (iteration order is not guaranteed)\n     */\n    function valuesIn(object) {\n      return baseValues(object, keysIn(object));\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Checks if `n` is between `start` and up to but not including, `end`. If\n     * `end` is not specified it is set to `start` with `start` then set to `0`.\n     *\n     * @static\n     * @memberOf _\n     * @category Number\n     * @param {number} n The number to check.\n     * @param {number} [start=0] The start of the range.\n     * @param {number} end The end of the range.\n     * @returns {boolean} Returns `true` if `n` is in the range, else `false`.\n     * @example\n     *\n     * _.inRange(3, 2, 4);\n     * // => true\n     *\n     * _.inRange(4, 8);\n     * // => true\n     *\n     * _.inRange(4, 2);\n     * // => false\n     *\n     * _.inRange(2, 2);\n     * // => false\n     *\n     * _.inRange(1.2, 2);\n     * // => true\n     *\n     * _.inRange(5.2, 4);\n     * // => false\n     */\n    function inRange(value, start, end) {\n      start = +start || 0;\n      if (end === undefined) {\n        end = start;\n        start = 0;\n      } else {\n        end = +end || 0;\n      }\n      return value >= nativeMin(start, end) && value < nativeMax(start, end);\n    }\n\n    /**\n     * Produces a random number between `min` and `max` (inclusive). If only one\n     * argument is provided a number between `0` and the given number is returned.\n     * If `floating` is `true`, or either `min` or `max` are floats, a floating-point\n     * number is returned instead of an integer.\n     *\n     * @static\n     * @memberOf _\n     * @category Number\n     * @param {number} [min=0] The minimum possible value.\n     * @param {number} [max=1] The maximum possible value.\n     * @param {boolean} [floating] Specify returning a floating-point number.\n     * @returns {number} Returns the random number.\n     * @example\n     *\n     * _.random(0, 5);\n     * // => an integer between 0 and 5\n     *\n     * _.random(5);\n     * // => also an integer between 0 and 5\n     *\n     * _.random(5, true);\n     * // => a floating-point number between 0 and 5\n     *\n     * _.random(1.2, 5.2);\n     * // => a floating-point number between 1.2 and 5.2\n     */\n    function random(min, max, floating) {\n      if (floating && isIterateeCall(min, max, floating)) {\n        max = floating = undefined;\n      }\n      var noMin = min == null,\n          noMax = max == null;\n\n      if (floating == null) {\n        if (noMax && typeof min == 'boolean') {\n          floating = min;\n          min = 1;\n        }\n        else if (typeof max == 'boolean') {\n          floating = max;\n          noMax = true;\n        }\n      }\n      if (noMin && noMax) {\n        max = 1;\n        noMax = false;\n      }\n      min = +min || 0;\n      if (noMax) {\n        max = min;\n        min = 0;\n      } else {\n        max = +max || 0;\n      }\n      if (floating || min % 1 || max % 1) {\n        var rand = nativeRandom();\n        return nativeMin(min + (rand * (max - min + parseFloat('1e-' + ((rand + '').length - 1)))), max);\n      }\n      return baseRandom(min, max);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Converts `string` to [camel case](https://en.wikipedia.org/wiki/CamelCase).\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the camel cased string.\n     * @example\n     *\n     * _.camelCase('Foo Bar');\n     * // => 'fooBar'\n     *\n     * _.camelCase('--foo-bar');\n     * // => 'fooBar'\n     *\n     * _.camelCase('__foo_bar__');\n     * // => 'fooBar'\n     */\n    var camelCase = createCompounder(function(result, word, index) {\n      word = word.toLowerCase();\n      return result + (index ? (word.charAt(0).toUpperCase() + word.slice(1)) : word);\n    });\n\n    /**\n     * Capitalizes the first character of `string`.\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to capitalize.\n     * @returns {string} Returns the capitalized string.\n     * @example\n     *\n     * _.capitalize('fred');\n     * // => 'Fred'\n     */\n    function capitalize(string) {\n      string = baseToString(string);\n      return string && (string.charAt(0).toUpperCase() + string.slice(1));\n    }\n\n    /**\n     * Deburrs `string` by converting [latin-1 supplementary letters](https://en.wikipedia.org/wiki/Latin-1_Supplement_(Unicode_block)#Character_table)\n     * to basic latin letters and removing [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks).\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to deburr.\n     * @returns {string} Returns the deburred string.\n     * @example\n     *\n     * _.deburr('déjà vu');\n     * // => 'deja vu'\n     */\n    function deburr(string) {\n      string = baseToString(string);\n      return string && string.replace(reLatin1, deburrLetter).replace(reComboMark, '');\n    }\n\n    /**\n     * Checks if `string` ends with the given target string.\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to search.\n     * @param {string} [target] The string to search for.\n     * @param {number} [position=string.length] The position to search from.\n     * @returns {boolean} Returns `true` if `string` ends with `target`, else `false`.\n     * @example\n     *\n     * _.endsWith('abc', 'c');\n     * // => true\n     *\n     * _.endsWith('abc', 'b');\n     * // => false\n     *\n     * _.endsWith('abc', 'b', 2);\n     * // => true\n     */\n    function endsWith(string, target, position) {\n      string = baseToString(string);\n      target = (target + '');\n\n      var length = string.length;\n      position = position === undefined\n        ? length\n        : nativeMin(position < 0 ? 0 : (+position || 0), length);\n\n      position -= target.length;\n      return position >= 0 && string.indexOf(target, position) == position;\n    }\n\n    /**\n     * Converts the characters \"&\", \"<\", \">\", '\"', \"'\", and \"\\`\", in `string` to\n     * their corresponding HTML entities.\n     *\n     * **Note:** No other characters are escaped. To escape additional characters\n     * use a third-party library like [_he_](https://mths.be/he).\n     *\n     * Though the \">\" character is escaped for symmetry, characters like\n     * \">\" and \"/\" don't need escaping in HTML and have no special meaning\n     * unless they're part of a tag or unquoted attribute value.\n     * See [Mathias Bynens's article](https://mathiasbynens.be/notes/ambiguous-ampersands)\n     * (under \"semi-related fun fact\") for more details.\n     *\n     * Backticks are escaped because in Internet Explorer < 9, they can break out\n     * of attribute values or HTML comments. See [#59](https://html5sec.org/#59),\n     * [#102](https://html5sec.org/#102), [#108](https://html5sec.org/#108), and\n     * [#133](https://html5sec.org/#133) of the [HTML5 Security Cheatsheet](https://html5sec.org/)\n     * for more details.\n     *\n     * When working with HTML you should always [quote attribute values](http://wonko.com/post/html-escaping)\n     * to reduce XSS vectors.\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to escape.\n     * @returns {string} Returns the escaped string.\n     * @example\n     *\n     * _.escape('fred, barney, & pebbles');\n     * // => 'fred, barney, &amp; pebbles'\n     */\n    function escape(string) {\n      // Reset `lastIndex` because in IE < 9 `String#replace` does not.\n      string = baseToString(string);\n      return (string && reHasUnescapedHtml.test(string))\n        ? string.replace(reUnescapedHtml, escapeHtmlChar)\n        : string;\n    }\n\n    /**\n     * Escapes the `RegExp` special characters \"\\\", \"/\", \"^\", \"$\", \".\", \"|\", \"?\",\n     * \"*\", \"+\", \"(\", \")\", \"[\", \"]\", \"{\" and \"}\" in `string`.\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to escape.\n     * @returns {string} Returns the escaped string.\n     * @example\n     *\n     * _.escapeRegExp('[lodash](https://lodash.com/)');\n     * // => '\\[lodash\\]\\(https:\\/\\/lodash\\.com\\/\\)'\n     */\n    function escapeRegExp(string) {\n      string = baseToString(string);\n      return (string && reHasRegExpChars.test(string))\n        ? string.replace(reRegExpChars, escapeRegExpChar)\n        : (string || '(?:)');\n    }\n\n    /**\n     * Converts `string` to [kebab case](https://en.wikipedia.org/wiki/Letter_case#Special_case_styles).\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the kebab cased string.\n     * @example\n     *\n     * _.kebabCase('Foo Bar');\n     * // => 'foo-bar'\n     *\n     * _.kebabCase('fooBar');\n     * // => 'foo-bar'\n     *\n     * _.kebabCase('__foo_bar__');\n     * // => 'foo-bar'\n     */\n    var kebabCase = createCompounder(function(result, word, index) {\n      return result + (index ? '-' : '') + word.toLowerCase();\n    });\n\n    /**\n     * Pads `string` on the left and right sides if it's shorter than `length`.\n     * Padding characters are truncated if they can't be evenly divided by `length`.\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to pad.\n     * @param {number} [length=0] The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padded string.\n     * @example\n     *\n     * _.pad('abc', 8);\n     * // => '  abc   '\n     *\n     * _.pad('abc', 8, '_-');\n     * // => '_-abc_-_'\n     *\n     * _.pad('abc', 3);\n     * // => 'abc'\n     */\n    function pad(string, length, chars) {\n      string = baseToString(string);\n      length = +length;\n\n      var strLength = string.length;\n      if (strLength >= length || !nativeIsFinite(length)) {\n        return string;\n      }\n      var mid = (length - strLength) / 2,\n          leftLength = nativeFloor(mid),\n          rightLength = nativeCeil(mid);\n\n      chars = createPadding('', rightLength, chars);\n      return chars.slice(0, leftLength) + string + chars;\n    }\n\n    /**\n     * Pads `string` on the left side if it's shorter than `length`. Padding\n     * characters are truncated if they exceed `length`.\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to pad.\n     * @param {number} [length=0] The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padded string.\n     * @example\n     *\n     * _.padLeft('abc', 6);\n     * // => '   abc'\n     *\n     * _.padLeft('abc', 6, '_-');\n     * // => '_-_abc'\n     *\n     * _.padLeft('abc', 3);\n     * // => 'abc'\n     */\n    var padLeft = createPadDir();\n\n    /**\n     * Pads `string` on the right side if it's shorter than `length`. Padding\n     * characters are truncated if they exceed `length`.\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to pad.\n     * @param {number} [length=0] The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padded string.\n     * @example\n     *\n     * _.padRight('abc', 6);\n     * // => 'abc   '\n     *\n     * _.padRight('abc', 6, '_-');\n     * // => 'abc_-_'\n     *\n     * _.padRight('abc', 3);\n     * // => 'abc'\n     */\n    var padRight = createPadDir(true);\n\n    /**\n     * Converts `string` to an integer of the specified radix. If `radix` is\n     * `undefined` or `0`, a `radix` of `10` is used unless `value` is a hexadecimal,\n     * in which case a `radix` of `16` is used.\n     *\n     * **Note:** This method aligns with the [ES5 implementation](https://es5.github.io/#E)\n     * of `parseInt`.\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} string The string to convert.\n     * @param {number} [radix] The radix to interpret `value` by.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.\n     * @returns {number} Returns the converted integer.\n     * @example\n     *\n     * _.parseInt('08');\n     * // => 8\n     *\n     * _.map(['6', '08', '10'], _.parseInt);\n     * // => [6, 8, 10]\n     */\n    function parseInt(string, radix, guard) {\n      // Firefox < 21 and Opera < 15 follow ES3 for `parseInt`.\n      // Chrome fails to trim leading <BOM> whitespace characters.\n      // See https://code.google.com/p/v8/issues/detail?id=3109 for more details.\n      if (guard ? isIterateeCall(string, radix, guard) : radix == null) {\n        radix = 0;\n      } else if (radix) {\n        radix = +radix;\n      }\n      string = trim(string);\n      return nativeParseInt(string, radix || (reHasHexPrefix.test(string) ? 16 : 10));\n    }\n\n    /**\n     * Repeats the given string `n` times.\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to repeat.\n     * @param {number} [n=0] The number of times to repeat the string.\n     * @returns {string} Returns the repeated string.\n     * @example\n     *\n     * _.repeat('*', 3);\n     * // => '***'\n     *\n     * _.repeat('abc', 2);\n     * // => 'abcabc'\n     *\n     * _.repeat('abc', 0);\n     * // => ''\n     */\n    function repeat(string, n) {\n      var result = '';\n      string = baseToString(string);\n      n = +n;\n      if (n < 1 || !string || !nativeIsFinite(n)) {\n        return result;\n      }\n      // Leverage the exponentiation by squaring algorithm for a faster repeat.\n      // See https://en.wikipedia.org/wiki/Exponentiation_by_squaring for more details.\n      do {\n        if (n % 2) {\n          result += string;\n        }\n        n = nativeFloor(n / 2);\n        string += string;\n      } while (n);\n\n      return result;\n    }\n\n    /**\n     * Converts `string` to [snake case](https://en.wikipedia.org/wiki/Snake_case).\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the snake cased string.\n     * @example\n     *\n     * _.snakeCase('Foo Bar');\n     * // => 'foo_bar'\n     *\n     * _.snakeCase('fooBar');\n     * // => 'foo_bar'\n     *\n     * _.snakeCase('--foo-bar');\n     * // => 'foo_bar'\n     */\n    var snakeCase = createCompounder(function(result, word, index) {\n      return result + (index ? '_' : '') + word.toLowerCase();\n    });\n\n    /**\n     * Converts `string` to [start case](https://en.wikipedia.org/wiki/Letter_case#Stylistic_or_specialised_usage).\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the start cased string.\n     * @example\n     *\n     * _.startCase('--foo-bar');\n     * // => 'Foo Bar'\n     *\n     * _.startCase('fooBar');\n     * // => 'Foo Bar'\n     *\n     * _.startCase('__foo_bar__');\n     * // => 'Foo Bar'\n     */\n    var startCase = createCompounder(function(result, word, index) {\n      return result + (index ? ' ' : '') + (word.charAt(0).toUpperCase() + word.slice(1));\n    });\n\n    /**\n     * Checks if `string` starts with the given target string.\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to search.\n     * @param {string} [target] The string to search for.\n     * @param {number} [position=0] The position to search from.\n     * @returns {boolean} Returns `true` if `string` starts with `target`, else `false`.\n     * @example\n     *\n     * _.startsWith('abc', 'a');\n     * // => true\n     *\n     * _.startsWith('abc', 'b');\n     * // => false\n     *\n     * _.startsWith('abc', 'b', 1);\n     * // => true\n     */\n    function startsWith(string, target, position) {\n      string = baseToString(string);\n      position = position == null\n        ? 0\n        : nativeMin(position < 0 ? 0 : (+position || 0), string.length);\n\n      return string.lastIndexOf(target, position) == position;\n    }\n\n    /**\n     * Creates a compiled template function that can interpolate data properties\n     * in \"interpolate\" delimiters, HTML-escape interpolated data properties in\n     * \"escape\" delimiters, and execute JavaScript in \"evaluate\" delimiters. Data\n     * properties may be accessed as free variables in the template. If a setting\n     * object is provided it takes precedence over `_.templateSettings` values.\n     *\n     * **Note:** In the development build `_.template` utilizes\n     * [sourceURLs](http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl)\n     * for easier debugging.\n     *\n     * For more information on precompiling templates see\n     * [lodash's custom builds documentation](https://lodash.com/custom-builds).\n     *\n     * For more information on Chrome extension sandboxes see\n     * [Chrome's extensions documentation](https://developer.chrome.com/extensions/sandboxingEval).\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The template string.\n     * @param {Object} [options] The options object.\n     * @param {RegExp} [options.escape] The HTML \"escape\" delimiter.\n     * @param {RegExp} [options.evaluate] The \"evaluate\" delimiter.\n     * @param {Object} [options.imports] An object to import into the template as free variables.\n     * @param {RegExp} [options.interpolate] The \"interpolate\" delimiter.\n     * @param {string} [options.sourceURL] The sourceURL of the template's compiled source.\n     * @param {string} [options.variable] The data object variable name.\n     * @param- {Object} [otherOptions] Enables the legacy `options` param signature.\n     * @returns {Function} Returns the compiled template function.\n     * @example\n     *\n     * // using the \"interpolate\" delimiter to create a compiled template\n     * var compiled = _.template('hello <%= user %>!');\n     * compiled({ 'user': 'fred' });\n     * // => 'hello fred!'\n     *\n     * // using the HTML \"escape\" delimiter to escape data property values\n     * var compiled = _.template('<b><%- value %></b>');\n     * compiled({ 'value': '<script>' });\n     * // => '<b>&lt;script&gt;</b>'\n     *\n     * // using the \"evaluate\" delimiter to execute JavaScript and generate HTML\n     * var compiled = _.template('<% _.forEach(users, function(user) { %><li><%- user %></li><% }); %>');\n     * compiled({ 'users': ['fred', 'barney'] });\n     * // => '<li>fred</li><li>barney</li>'\n     *\n     * // using the internal `print` function in \"evaluate\" delimiters\n     * var compiled = _.template('<% print(\"hello \" + user); %>!');\n     * compiled({ 'user': 'barney' });\n     * // => 'hello barney!'\n     *\n     * // using the ES delimiter as an alternative to the default \"interpolate\" delimiter\n     * var compiled = _.template('hello ${ user }!');\n     * compiled({ 'user': 'pebbles' });\n     * // => 'hello pebbles!'\n     *\n     * // using custom template delimiters\n     * _.templateSettings.interpolate = /{{([\\s\\S]+?)}}/g;\n     * var compiled = _.template('hello {{ user }}!');\n     * compiled({ 'user': 'mustache' });\n     * // => 'hello mustache!'\n     *\n     * // using backslashes to treat delimiters as plain text\n     * var compiled = _.template('<%= \"\\\\<%- value %\\\\>\" %>');\n     * compiled({ 'value': 'ignored' });\n     * // => '<%- value %>'\n     *\n     * // using the `imports` option to import `jQuery` as `jq`\n     * var text = '<% jq.each(users, function(user) { %><li><%- user %></li><% }); %>';\n     * var compiled = _.template(text, { 'imports': { 'jq': jQuery } });\n     * compiled({ 'users': ['fred', 'barney'] });\n     * // => '<li>fred</li><li>barney</li>'\n     *\n     * // using the `sourceURL` option to specify a custom sourceURL for the template\n     * var compiled = _.template('hello <%= user %>!', { 'sourceURL': '/basic/greeting.jst' });\n     * compiled(data);\n     * // => find the source of \"greeting.jst\" under the Sources tab or Resources panel of the web inspector\n     *\n     * // using the `variable` option to ensure a with-statement isn't used in the compiled template\n     * var compiled = _.template('hi <%= data.user %>!', { 'variable': 'data' });\n     * compiled.source;\n     * // => function(data) {\n     * //   var __t, __p = '';\n     * //   __p += 'hi ' + ((__t = ( data.user )) == null ? '' : __t) + '!';\n     * //   return __p;\n     * // }\n     *\n     * // using the `source` property to inline compiled templates for meaningful\n     * // line numbers in error messages and a stack trace\n     * fs.writeFileSync(path.join(cwd, 'jst.js'), '\\\n     *   var JST = {\\\n     *     \"main\": ' + _.template(mainText).source + '\\\n     *   };\\\n     * ');\n     */\n    function template(string, options, otherOptions) {\n      // Based on John Resig's `tmpl` implementation (http://ejohn.org/blog/javascript-micro-templating/)\n      // and Laura Doktorova's doT.js (https://github.com/olado/doT).\n      var settings = lodash.templateSettings;\n\n      if (otherOptions && isIterateeCall(string, options, otherOptions)) {\n        options = otherOptions = undefined;\n      }\n      string = baseToString(string);\n      options = assignWith(baseAssign({}, otherOptions || options), settings, assignOwnDefaults);\n\n      var imports = assignWith(baseAssign({}, options.imports), settings.imports, assignOwnDefaults),\n          importsKeys = keys(imports),\n          importsValues = baseValues(imports, importsKeys);\n\n      var isEscaping,\n          isEvaluating,\n          index = 0,\n          interpolate = options.interpolate || reNoMatch,\n          source = \"__p += '\";\n\n      // Compile the regexp to match each delimiter.\n      var reDelimiters = RegExp(\n        (options.escape || reNoMatch).source + '|' +\n        interpolate.source + '|' +\n        (interpolate === reInterpolate ? reEsTemplate : reNoMatch).source + '|' +\n        (options.evaluate || reNoMatch).source + '|$'\n      , 'g');\n\n      // Use a sourceURL for easier debugging.\n      var sourceURL = '//# sourceURL=' +\n        ('sourceURL' in options\n          ? options.sourceURL\n          : ('lodash.templateSources[' + (++templateCounter) + ']')\n        ) + '\\n';\n\n      string.replace(reDelimiters, function(match, escapeValue, interpolateValue, esTemplateValue, evaluateValue, offset) {\n        interpolateValue || (interpolateValue = esTemplateValue);\n\n        // Escape characters that can't be included in string literals.\n        source += string.slice(index, offset).replace(reUnescapedString, escapeStringChar);\n\n        // Replace delimiters with snippets.\n        if (escapeValue) {\n          isEscaping = true;\n          source += \"' +\\n__e(\" + escapeValue + \") +\\n'\";\n        }\n        if (evaluateValue) {\n          isEvaluating = true;\n          source += \"';\\n\" + evaluateValue + \";\\n__p += '\";\n        }\n        if (interpolateValue) {\n          source += \"' +\\n((__t = (\" + interpolateValue + \")) == null ? '' : __t) +\\n'\";\n        }\n        index = offset + match.length;\n\n        // The JS engine embedded in Adobe products requires returning the `match`\n        // string in order to produce the correct `offset` value.\n        return match;\n      });\n\n      source += \"';\\n\";\n\n      // If `variable` is not specified wrap a with-statement around the generated\n      // code to add the data object to the top of the scope chain.\n      var variable = options.variable;\n      if (!variable) {\n        source = 'with (obj) {\\n' + source + '\\n}\\n';\n      }\n      // Cleanup code by stripping empty strings.\n      source = (isEvaluating ? source.replace(reEmptyStringLeading, '') : source)\n        .replace(reEmptyStringMiddle, '$1')\n        .replace(reEmptyStringTrailing, '$1;');\n\n      // Frame code as the function body.\n      source = 'function(' + (variable || 'obj') + ') {\\n' +\n        (variable\n          ? ''\n          : 'obj || (obj = {});\\n'\n        ) +\n        \"var __t, __p = ''\" +\n        (isEscaping\n           ? ', __e = _.escape'\n           : ''\n        ) +\n        (isEvaluating\n          ? ', __j = Array.prototype.join;\\n' +\n            \"function print() { __p += __j.call(arguments, '') }\\n\"\n          : ';\\n'\n        ) +\n        source +\n        'return __p\\n}';\n\n      var result = attempt(function() {\n        return Function(importsKeys, sourceURL + 'return ' + source).apply(undefined, importsValues);\n      });\n\n      // Provide the compiled function's source by its `toString` method or\n      // the `source` property as a convenience for inlining compiled templates.\n      result.source = source;\n      if (isError(result)) {\n        throw result;\n      }\n      return result;\n    }\n\n    /**\n     * Removes leading and trailing whitespace or specified characters from `string`.\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to trim.\n     * @param {string} [chars=whitespace] The characters to trim.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.\n     * @returns {string} Returns the trimmed string.\n     * @example\n     *\n     * _.trim('  abc  ');\n     * // => 'abc'\n     *\n     * _.trim('-_-abc-_-', '_-');\n     * // => 'abc'\n     *\n     * _.map(['  foo  ', '  bar  '], _.trim);\n     * // => ['foo', 'bar']\n     */\n    function trim(string, chars, guard) {\n      var value = string;\n      string = baseToString(string);\n      if (!string) {\n        return string;\n      }\n      if (guard ? isIterateeCall(value, chars, guard) : chars == null) {\n        return string.slice(trimmedLeftIndex(string), trimmedRightIndex(string) + 1);\n      }\n      chars = (chars + '');\n      return string.slice(charsLeftIndex(string, chars), charsRightIndex(string, chars) + 1);\n    }\n\n    /**\n     * Removes leading whitespace or specified characters from `string`.\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to trim.\n     * @param {string} [chars=whitespace] The characters to trim.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.\n     * @returns {string} Returns the trimmed string.\n     * @example\n     *\n     * _.trimLeft('  abc  ');\n     * // => 'abc  '\n     *\n     * _.trimLeft('-_-abc-_-', '_-');\n     * // => 'abc-_-'\n     */\n    function trimLeft(string, chars, guard) {\n      var value = string;\n      string = baseToString(string);\n      if (!string) {\n        return string;\n      }\n      if (guard ? isIterateeCall(value, chars, guard) : chars == null) {\n        return string.slice(trimmedLeftIndex(string));\n      }\n      return string.slice(charsLeftIndex(string, (chars + '')));\n    }\n\n    /**\n     * Removes trailing whitespace or specified characters from `string`.\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to trim.\n     * @param {string} [chars=whitespace] The characters to trim.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.\n     * @returns {string} Returns the trimmed string.\n     * @example\n     *\n     * _.trimRight('  abc  ');\n     * // => '  abc'\n     *\n     * _.trimRight('-_-abc-_-', '_-');\n     * // => '-_-abc'\n     */\n    function trimRight(string, chars, guard) {\n      var value = string;\n      string = baseToString(string);\n      if (!string) {\n        return string;\n      }\n      if (guard ? isIterateeCall(value, chars, guard) : chars == null) {\n        return string.slice(0, trimmedRightIndex(string) + 1);\n      }\n      return string.slice(0, charsRightIndex(string, (chars + '')) + 1);\n    }\n\n    /**\n     * Truncates `string` if it's longer than the given maximum string length.\n     * The last characters of the truncated string are replaced with the omission\n     * string which defaults to \"...\".\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to truncate.\n     * @param {Object|number} [options] The options object or maximum string length.\n     * @param {number} [options.length=30] The maximum string length.\n     * @param {string} [options.omission='...'] The string to indicate text is omitted.\n     * @param {RegExp|string} [options.separator] The separator pattern to truncate to.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.\n     * @returns {string} Returns the truncated string.\n     * @example\n     *\n     * _.trunc('hi-diddly-ho there, neighborino');\n     * // => 'hi-diddly-ho there, neighbo...'\n     *\n     * _.trunc('hi-diddly-ho there, neighborino', 24);\n     * // => 'hi-diddly-ho there, n...'\n     *\n     * _.trunc('hi-diddly-ho there, neighborino', {\n     *   'length': 24,\n     *   'separator': ' '\n     * });\n     * // => 'hi-diddly-ho there,...'\n     *\n     * _.trunc('hi-diddly-ho there, neighborino', {\n     *   'length': 24,\n     *   'separator': /,? +/\n     * });\n     * // => 'hi-diddly-ho there...'\n     *\n     * _.trunc('hi-diddly-ho there, neighborino', {\n     *   'omission': ' [...]'\n     * });\n     * // => 'hi-diddly-ho there, neig [...]'\n     */\n    function trunc(string, options, guard) {\n      if (guard && isIterateeCall(string, options, guard)) {\n        options = undefined;\n      }\n      var length = DEFAULT_TRUNC_LENGTH,\n          omission = DEFAULT_TRUNC_OMISSION;\n\n      if (options != null) {\n        if (isObject(options)) {\n          var separator = 'separator' in options ? options.separator : separator;\n          length = 'length' in options ? (+options.length || 0) : length;\n          omission = 'omission' in options ? baseToString(options.omission) : omission;\n        } else {\n          length = +options || 0;\n        }\n      }\n      string = baseToString(string);\n      if (length >= string.length) {\n        return string;\n      }\n      var end = length - omission.length;\n      if (end < 1) {\n        return omission;\n      }\n      var result = string.slice(0, end);\n      if (separator == null) {\n        return result + omission;\n      }\n      if (isRegExp(separator)) {\n        if (string.slice(end).search(separator)) {\n          var match,\n              newEnd,\n              substring = string.slice(0, end);\n\n          if (!separator.global) {\n            separator = RegExp(separator.source, (reFlags.exec(separator) || '') + 'g');\n          }\n          separator.lastIndex = 0;\n          while ((match = separator.exec(substring))) {\n            newEnd = match.index;\n          }\n          result = result.slice(0, newEnd == null ? end : newEnd);\n        }\n      } else if (string.indexOf(separator, end) != end) {\n        var index = result.lastIndexOf(separator);\n        if (index > -1) {\n          result = result.slice(0, index);\n        }\n      }\n      return result + omission;\n    }\n\n    /**\n     * The inverse of `_.escape`; this method converts the HTML entities\n     * `&amp;`, `&lt;`, `&gt;`, `&quot;`, `&#39;`, and `&#96;` in `string` to their\n     * corresponding characters.\n     *\n     * **Note:** No other HTML entities are unescaped. To unescape additional HTML\n     * entities use a third-party library like [_he_](https://mths.be/he).\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to unescape.\n     * @returns {string} Returns the unescaped string.\n     * @example\n     *\n     * _.unescape('fred, barney, &amp; pebbles');\n     * // => 'fred, barney, & pebbles'\n     */\n    function unescape(string) {\n      string = baseToString(string);\n      return (string && reHasEscapedHtml.test(string))\n        ? string.replace(reEscapedHtml, unescapeHtmlChar)\n        : string;\n    }\n\n    /**\n     * Splits `string` into an array of its words.\n     *\n     * @static\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to inspect.\n     * @param {RegExp|string} [pattern] The pattern to match words.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.\n     * @returns {Array} Returns the words of `string`.\n     * @example\n     *\n     * _.words('fred, barney, & pebbles');\n     * // => ['fred', 'barney', 'pebbles']\n     *\n     * _.words('fred, barney, & pebbles', /[^, ]+/g);\n     * // => ['fred', 'barney', '&', 'pebbles']\n     */\n    function words(string, pattern, guard) {\n      if (guard && isIterateeCall(string, pattern, guard)) {\n        pattern = undefined;\n      }\n      string = baseToString(string);\n      return string.match(pattern || reWords) || [];\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Attempts to invoke `func`, returning either the result or the caught error\n     * object. Any additional arguments are provided to `func` when it is invoked.\n     *\n     * @static\n     * @memberOf _\n     * @category Utility\n     * @param {Function} func The function to attempt.\n     * @returns {*} Returns the `func` result or error object.\n     * @example\n     *\n     * // avoid throwing errors for invalid selectors\n     * var elements = _.attempt(function(selector) {\n     *   return document.querySelectorAll(selector);\n     * }, '>_>');\n     *\n     * if (_.isError(elements)) {\n     *   elements = [];\n     * }\n     */\n    var attempt = restParam(function(func, args) {\n      try {\n        return func.apply(undefined, args);\n      } catch(e) {\n        return isError(e) ? e : new Error(e);\n      }\n    });\n\n    /**\n     * Creates a function that invokes `func` with the `this` binding of `thisArg`\n     * and arguments of the created function. If `func` is a property name the\n     * created callback returns the property value for a given element. If `func`\n     * is an object the created callback returns `true` for elements that contain\n     * the equivalent object properties, otherwise it returns `false`.\n     *\n     * @static\n     * @memberOf _\n     * @alias iteratee\n     * @category Utility\n     * @param {*} [func=_.identity] The value to convert to a callback.\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.\n     * @returns {Function} Returns the callback.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36 },\n     *   { 'user': 'fred',   'age': 40 }\n     * ];\n     *\n     * // wrap to create custom callback shorthands\n     * _.callback = _.wrap(_.callback, function(callback, func, thisArg) {\n     *   var match = /^(.+?)__([gl]t)(.+)$/.exec(func);\n     *   if (!match) {\n     *     return callback(func, thisArg);\n     *   }\n     *   return function(object) {\n     *     return match[2] == 'gt'\n     *       ? object[match[1]] > match[3]\n     *       : object[match[1]] < match[3];\n     *   };\n     * });\n     *\n     * _.filter(users, 'age__gt36');\n     * // => [{ 'user': 'fred', 'age': 40 }]\n     */\n    function callback(func, thisArg, guard) {\n      if (guard && isIterateeCall(func, thisArg, guard)) {\n        thisArg = undefined;\n      }\n      return isObjectLike(func)\n        ? matches(func)\n        : baseCallback(func, thisArg);\n    }\n\n    /**\n     * Creates a function that returns `value`.\n     *\n     * @static\n     * @memberOf _\n     * @category Utility\n     * @param {*} value The value to return from the new function.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var object = { 'user': 'fred' };\n     * var getter = _.constant(object);\n     *\n     * getter() === object;\n     * // => true\n     */\n    function constant(value) {\n      return function() {\n        return value;\n      };\n    }\n\n    /**\n     * This method returns the first argument provided to it.\n     *\n     * @static\n     * @memberOf _\n     * @category Utility\n     * @param {*} value Any value.\n     * @returns {*} Returns `value`.\n     * @example\n     *\n     * var object = { 'user': 'fred' };\n     *\n     * _.identity(object) === object;\n     * // => true\n     */\n    function identity(value) {\n      return value;\n    }\n\n    /**\n     * Creates a function that performs a deep comparison between a given object\n     * and `source`, returning `true` if the given object has equivalent property\n     * values, else `false`.\n     *\n     * **Note:** This method supports comparing arrays, booleans, `Date` objects,\n     * numbers, `Object` objects, regexes, and strings. Objects are compared by\n     * their own, not inherited, enumerable properties. For comparing a single\n     * own or inherited property value see `_.matchesProperty`.\n     *\n     * @static\n     * @memberOf _\n     * @category Utility\n     * @param {Object} source The object of property values to match.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': true },\n     *   { 'user': 'fred',   'age': 40, 'active': false }\n     * ];\n     *\n     * _.filter(users, _.matches({ 'age': 40, 'active': false }));\n     * // => [{ 'user': 'fred', 'age': 40, 'active': false }]\n     */\n    function matches(source) {\n      return baseMatches(baseClone(source, true));\n    }\n\n    /**\n     * Creates a function that compares the property value of `path` on a given\n     * object to `value`.\n     *\n     * **Note:** This method supports comparing arrays, booleans, `Date` objects,\n     * numbers, `Object` objects, regexes, and strings. Objects are compared by\n     * their own, not inherited, enumerable properties.\n     *\n     * @static\n     * @memberOf _\n     * @category Utility\n     * @param {Array|string} path The path of the property to get.\n     * @param {*} srcValue The value to match.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney' },\n     *   { 'user': 'fred' }\n     * ];\n     *\n     * _.find(users, _.matchesProperty('user', 'fred'));\n     * // => { 'user': 'fred' }\n     */\n    function matchesProperty(path, srcValue) {\n      return baseMatchesProperty(path, baseClone(srcValue, true));\n    }\n\n    /**\n     * Creates a function that invokes the method at `path` on a given object.\n     * Any additional arguments are provided to the invoked method.\n     *\n     * @static\n     * @memberOf _\n     * @category Utility\n     * @param {Array|string} path The path of the method to invoke.\n     * @param {...*} [args] The arguments to invoke the method with.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': { 'b': { 'c': _.constant(2) } } },\n     *   { 'a': { 'b': { 'c': _.constant(1) } } }\n     * ];\n     *\n     * _.map(objects, _.method('a.b.c'));\n     * // => [2, 1]\n     *\n     * _.invoke(_.sortBy(objects, _.method(['a', 'b', 'c'])), 'a.b.c');\n     * // => [1, 2]\n     */\n    var method = restParam(function(path, args) {\n      return function(object) {\n        return invokePath(object, path, args);\n      };\n    });\n\n    /**\n     * The opposite of `_.method`; this method creates a function that invokes\n     * the method at a given path on `object`. Any additional arguments are\n     * provided to the invoked method.\n     *\n     * @static\n     * @memberOf _\n     * @category Utility\n     * @param {Object} object The object to query.\n     * @param {...*} [args] The arguments to invoke the method with.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var array = _.times(3, _.constant),\n     *     object = { 'a': array, 'b': array, 'c': array };\n     *\n     * _.map(['a[2]', 'c[0]'], _.methodOf(object));\n     * // => [2, 0]\n     *\n     * _.map([['a', '2'], ['c', '0']], _.methodOf(object));\n     * // => [2, 0]\n     */\n    var methodOf = restParam(function(object, args) {\n      return function(path) {\n        return invokePath(object, path, args);\n      };\n    });\n\n    /**\n     * Adds all own enumerable function properties of a source object to the\n     * destination object. If `object` is a function then methods are added to\n     * its prototype as well.\n     *\n     * **Note:** Use `_.runInContext` to create a pristine `lodash` function to\n     * avoid conflicts caused by modifying the original.\n     *\n     * @static\n     * @memberOf _\n     * @category Utility\n     * @param {Function|Object} [object=lodash] The destination object.\n     * @param {Object} source The object of functions to add.\n     * @param {Object} [options] The options object.\n     * @param {boolean} [options.chain=true] Specify whether the functions added\n     *  are chainable.\n     * @returns {Function|Object} Returns `object`.\n     * @example\n     *\n     * function vowels(string) {\n     *   return _.filter(string, function(v) {\n     *     return /[aeiou]/i.test(v);\n     *   });\n     * }\n     *\n     * _.mixin({ 'vowels': vowels });\n     * _.vowels('fred');\n     * // => ['e']\n     *\n     * _('fred').vowels().value();\n     * // => ['e']\n     *\n     * _.mixin({ 'vowels': vowels }, { 'chain': false });\n     * _('fred').vowels();\n     * // => ['e']\n     */\n    function mixin(object, source, options) {\n      if (options == null) {\n        var isObj = isObject(source),\n            props = isObj ? keys(source) : undefined,\n            methodNames = (props && props.length) ? baseFunctions(source, props) : undefined;\n\n        if (!(methodNames ? methodNames.length : isObj)) {\n          methodNames = false;\n          options = source;\n          source = object;\n          object = this;\n        }\n      }\n      if (!methodNames) {\n        methodNames = baseFunctions(source, keys(source));\n      }\n      var chain = true,\n          index = -1,\n          isFunc = isFunction(object),\n          length = methodNames.length;\n\n      if (options === false) {\n        chain = false;\n      } else if (isObject(options) && 'chain' in options) {\n        chain = options.chain;\n      }\n      while (++index < length) {\n        var methodName = methodNames[index],\n            func = source[methodName];\n\n        object[methodName] = func;\n        if (isFunc) {\n          object.prototype[methodName] = (function(func) {\n            return function() {\n              var chainAll = this.__chain__;\n              if (chain || chainAll) {\n                var result = object(this.__wrapped__),\n                    actions = result.__actions__ = arrayCopy(this.__actions__);\n\n                actions.push({ 'func': func, 'args': arguments, 'thisArg': object });\n                result.__chain__ = chainAll;\n                return result;\n              }\n              return func.apply(object, arrayPush([this.value()], arguments));\n            };\n          }(func));\n        }\n      }\n      return object;\n    }\n\n    /**\n     * Reverts the `_` variable to its previous value and returns a reference to\n     * the `lodash` function.\n     *\n     * @static\n     * @memberOf _\n     * @category Utility\n     * @returns {Function} Returns the `lodash` function.\n     * @example\n     *\n     * var lodash = _.noConflict();\n     */\n    function noConflict() {\n      root._ = oldDash;\n      return this;\n    }\n\n    /**\n     * A no-operation function that returns `undefined` regardless of the\n     * arguments it receives.\n     *\n     * @static\n     * @memberOf _\n     * @category Utility\n     * @example\n     *\n     * var object = { 'user': 'fred' };\n     *\n     * _.noop(object) === undefined;\n     * // => true\n     */\n    function noop() {\n      // No operation performed.\n    }\n\n    /**\n     * Creates a function that returns the property value at `path` on a\n     * given object.\n     *\n     * @static\n     * @memberOf _\n     * @category Utility\n     * @param {Array|string} path The path of the property to get.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': { 'b': { 'c': 2 } } },\n     *   { 'a': { 'b': { 'c': 1 } } }\n     * ];\n     *\n     * _.map(objects, _.property('a.b.c'));\n     * // => [2, 1]\n     *\n     * _.pluck(_.sortBy(objects, _.property(['a', 'b', 'c'])), 'a.b.c');\n     * // => [1, 2]\n     */\n    function property(path) {\n      return isKey(path) ? baseProperty(path) : basePropertyDeep(path);\n    }\n\n    /**\n     * The opposite of `_.property`; this method creates a function that returns\n     * the property value at a given path on `object`.\n     *\n     * @static\n     * @memberOf _\n     * @category Utility\n     * @param {Object} object The object to query.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var array = [0, 1, 2],\n     *     object = { 'a': array, 'b': array, 'c': array };\n     *\n     * _.map(['a[2]', 'c[0]'], _.propertyOf(object));\n     * // => [2, 0]\n     *\n     * _.map([['a', '2'], ['c', '0']], _.propertyOf(object));\n     * // => [2, 0]\n     */\n    function propertyOf(object) {\n      return function(path) {\n        return baseGet(object, toPath(path), path + '');\n      };\n    }\n\n    /**\n     * Creates an array of numbers (positive and/or negative) progressing from\n     * `start` up to, but not including, `end`. If `end` is not specified it is\n     * set to `start` with `start` then set to `0`. If `end` is less than `start`\n     * a zero-length range is created unless a negative `step` is specified.\n     *\n     * @static\n     * @memberOf _\n     * @category Utility\n     * @param {number} [start=0] The start of the range.\n     * @param {number} end The end of the range.\n     * @param {number} [step=1] The value to increment or decrement by.\n     * @returns {Array} Returns the new array of numbers.\n     * @example\n     *\n     * _.range(4);\n     * // => [0, 1, 2, 3]\n     *\n     * _.range(1, 5);\n     * // => [1, 2, 3, 4]\n     *\n     * _.range(0, 20, 5);\n     * // => [0, 5, 10, 15]\n     *\n     * _.range(0, -4, -1);\n     * // => [0, -1, -2, -3]\n     *\n     * _.range(1, 4, 0);\n     * // => [1, 1, 1]\n     *\n     * _.range(0);\n     * // => []\n     */\n    function range(start, end, step) {\n      if (step && isIterateeCall(start, end, step)) {\n        end = step = undefined;\n      }\n      start = +start || 0;\n      step = step == null ? 1 : (+step || 0);\n\n      if (end == null) {\n        end = start;\n        start = 0;\n      } else {\n        end = +end || 0;\n      }\n      // Use `Array(length)` so engines like Chakra and V8 avoid slower modes.\n      // See https://youtu.be/XAqIpGU8ZZk#t=17m25s for more details.\n      var index = -1,\n          length = nativeMax(nativeCeil((end - start) / (step || 1)), 0),\n          result = Array(length);\n\n      while (++index < length) {\n        result[index] = start;\n        start += step;\n      }\n      return result;\n    }\n\n    /**\n     * Invokes the iteratee function `n` times, returning an array of the results\n     * of each invocation. The `iteratee` is bound to `thisArg` and invoked with\n     * one argument; (index).\n     *\n     * @static\n     * @memberOf _\n     * @category Utility\n     * @param {number} n The number of times to invoke `iteratee`.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {Array} Returns the array of results.\n     * @example\n     *\n     * var diceRolls = _.times(3, _.partial(_.random, 1, 6, false));\n     * // => [3, 6, 4]\n     *\n     * _.times(3, function(n) {\n     *   mage.castSpell(n);\n     * });\n     * // => invokes `mage.castSpell(n)` three times with `n` of `0`, `1`, and `2`\n     *\n     * _.times(3, function(n) {\n     *   this.cast(n);\n     * }, mage);\n     * // => also invokes `mage.castSpell(n)` three times\n     */\n    function times(n, iteratee, thisArg) {\n      n = nativeFloor(n);\n\n      // Exit early to avoid a JSC JIT bug in Safari 8\n      // where `Array(0)` is treated as `Array(1)`.\n      if (n < 1 || !nativeIsFinite(n)) {\n        return [];\n      }\n      var index = -1,\n          result = Array(nativeMin(n, MAX_ARRAY_LENGTH));\n\n      iteratee = bindCallback(iteratee, thisArg, 1);\n      while (++index < n) {\n        if (index < MAX_ARRAY_LENGTH) {\n          result[index] = iteratee(index);\n        } else {\n          iteratee(index);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Generates a unique ID. If `prefix` is provided the ID is appended to it.\n     *\n     * @static\n     * @memberOf _\n     * @category Utility\n     * @param {string} [prefix] The value to prefix the ID with.\n     * @returns {string} Returns the unique ID.\n     * @example\n     *\n     * _.uniqueId('contact_');\n     * // => 'contact_104'\n     *\n     * _.uniqueId();\n     * // => '105'\n     */\n    function uniqueId(prefix) {\n      var id = ++idCounter;\n      return baseToString(prefix) + id;\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Adds two numbers.\n     *\n     * @static\n     * @memberOf _\n     * @category Math\n     * @param {number} augend The first number to add.\n     * @param {number} addend The second number to add.\n     * @returns {number} Returns the sum.\n     * @example\n     *\n     * _.add(6, 4);\n     * // => 10\n     */\n    function add(augend, addend) {\n      return (+augend || 0) + (+addend || 0);\n    }\n\n    /**\n     * Calculates `n` rounded up to `precision`.\n     *\n     * @static\n     * @memberOf _\n     * @category Math\n     * @param {number} n The number to round up.\n     * @param {number} [precision=0] The precision to round up to.\n     * @returns {number} Returns the rounded up number.\n     * @example\n     *\n     * _.ceil(4.006);\n     * // => 5\n     *\n     * _.ceil(6.004, 2);\n     * // => 6.01\n     *\n     * _.ceil(6040, -2);\n     * // => 6100\n     */\n    var ceil = createRound('ceil');\n\n    /**\n     * Calculates `n` rounded down to `precision`.\n     *\n     * @static\n     * @memberOf _\n     * @category Math\n     * @param {number} n The number to round down.\n     * @param {number} [precision=0] The precision to round down to.\n     * @returns {number} Returns the rounded down number.\n     * @example\n     *\n     * _.floor(4.006);\n     * // => 4\n     *\n     * _.floor(0.046, 2);\n     * // => 0.04\n     *\n     * _.floor(4060, -2);\n     * // => 4000\n     */\n    var floor = createRound('floor');\n\n    /**\n     * Gets the maximum value of `collection`. If `collection` is empty or falsey\n     * `-Infinity` is returned. If an iteratee function is provided it is invoked\n     * for each value in `collection` to generate the criterion by which the value\n     * is ranked. The `iteratee` is bound to `thisArg` and invoked with three\n     * arguments: (value, index, collection).\n     *\n     * If a property name is provided for `iteratee` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `iteratee` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Math\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [iteratee] The function invoked per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {*} Returns the maximum value.\n     * @example\n     *\n     * _.max([4, 2, 8, 6]);\n     * // => 8\n     *\n     * _.max([]);\n     * // => -Infinity\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36 },\n     *   { 'user': 'fred',   'age': 40 }\n     * ];\n     *\n     * _.max(users, function(chr) {\n     *   return chr.age;\n     * });\n     * // => { 'user': 'fred', 'age': 40 }\n     *\n     * // using the `_.property` callback shorthand\n     * _.max(users, 'age');\n     * // => { 'user': 'fred', 'age': 40 }\n     */\n    var max = createExtremum(gt, NEGATIVE_INFINITY);\n\n    /**\n     * Gets the minimum value of `collection`. If `collection` is empty or falsey\n     * `Infinity` is returned. If an iteratee function is provided it is invoked\n     * for each value in `collection` to generate the criterion by which the value\n     * is ranked. The `iteratee` is bound to `thisArg` and invoked with three\n     * arguments: (value, index, collection).\n     *\n     * If a property name is provided for `iteratee` the created `_.property`\n     * style callback returns the property value of the given element.\n     *\n     * If a value is also provided for `thisArg` the created `_.matchesProperty`\n     * style callback returns `true` for elements that have a matching property\n     * value, else `false`.\n     *\n     * If an object is provided for `iteratee` the created `_.matches` style\n     * callback returns `true` for elements that have the properties of the given\n     * object, else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Math\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [iteratee] The function invoked per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {*} Returns the minimum value.\n     * @example\n     *\n     * _.min([4, 2, 8, 6]);\n     * // => 2\n     *\n     * _.min([]);\n     * // => Infinity\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36 },\n     *   { 'user': 'fred',   'age': 40 }\n     * ];\n     *\n     * _.min(users, function(chr) {\n     *   return chr.age;\n     * });\n     * // => { 'user': 'barney', 'age': 36 }\n     *\n     * // using the `_.property` callback shorthand\n     * _.min(users, 'age');\n     * // => { 'user': 'barney', 'age': 36 }\n     */\n    var min = createExtremum(lt, POSITIVE_INFINITY);\n\n    /**\n     * Calculates `n` rounded to `precision`.\n     *\n     * @static\n     * @memberOf _\n     * @category Math\n     * @param {number} n The number to round.\n     * @param {number} [precision=0] The precision to round to.\n     * @returns {number} Returns the rounded number.\n     * @example\n     *\n     * _.round(4.006);\n     * // => 4\n     *\n     * _.round(4.006, 2);\n     * // => 4.01\n     *\n     * _.round(4060, -2);\n     * // => 4100\n     */\n    var round = createRound('round');\n\n    /**\n     * Gets the sum of the values in `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @category Math\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [iteratee] The function invoked per iteration.\n     * @param {*} [thisArg] The `this` binding of `iteratee`.\n     * @returns {number} Returns the sum.\n     * @example\n     *\n     * _.sum([4, 6]);\n     * // => 10\n     *\n     * _.sum({ 'a': 4, 'b': 6 });\n     * // => 10\n     *\n     * var objects = [\n     *   { 'n': 4 },\n     *   { 'n': 6 }\n     * ];\n     *\n     * _.sum(objects, function(object) {\n     *   return object.n;\n     * });\n     * // => 10\n     *\n     * // using the `_.property` callback shorthand\n     * _.sum(objects, 'n');\n     * // => 10\n     */\n    function sum(collection, iteratee, thisArg) {\n      if (thisArg && isIterateeCall(collection, iteratee, thisArg)) {\n        iteratee = undefined;\n      }\n      iteratee = getCallback(iteratee, thisArg, 3);\n      return iteratee.length == 1\n        ? arraySum(isArray(collection) ? collection : toIterable(collection), iteratee)\n        : baseSum(collection, iteratee);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    // Ensure wrappers are instances of `baseLodash`.\n    lodash.prototype = baseLodash.prototype;\n\n    LodashWrapper.prototype = baseCreate(baseLodash.prototype);\n    LodashWrapper.prototype.constructor = LodashWrapper;\n\n    LazyWrapper.prototype = baseCreate(baseLodash.prototype);\n    LazyWrapper.prototype.constructor = LazyWrapper;\n\n    // Add functions to the `Map` cache.\n    MapCache.prototype['delete'] = mapDelete;\n    MapCache.prototype.get = mapGet;\n    MapCache.prototype.has = mapHas;\n    MapCache.prototype.set = mapSet;\n\n    // Add functions to the `Set` cache.\n    SetCache.prototype.push = cachePush;\n\n    // Assign cache to `_.memoize`.\n    memoize.Cache = MapCache;\n\n    // Add functions that return wrapped values when chaining.\n    lodash.after = after;\n    lodash.ary = ary;\n    lodash.assign = assign;\n    lodash.at = at;\n    lodash.before = before;\n    lodash.bind = bind;\n    lodash.bindAll = bindAll;\n    lodash.bindKey = bindKey;\n    lodash.callback = callback;\n    lodash.chain = chain;\n    lodash.chunk = chunk;\n    lodash.compact = compact;\n    lodash.constant = constant;\n    lodash.countBy = countBy;\n    lodash.create = create;\n    lodash.curry = curry;\n    lodash.curryRight = curryRight;\n    lodash.debounce = debounce;\n    lodash.defaults = defaults;\n    lodash.defaultsDeep = defaultsDeep;\n    lodash.defer = defer;\n    lodash.delay = delay;\n    lodash.difference = difference;\n    lodash.drop = drop;\n    lodash.dropRight = dropRight;\n    lodash.dropRightWhile = dropRightWhile;\n    lodash.dropWhile = dropWhile;\n    lodash.fill = fill;\n    lodash.filter = filter;\n    lodash.flatten = flatten;\n    lodash.flattenDeep = flattenDeep;\n    lodash.flow = flow;\n    lodash.flowRight = flowRight;\n    lodash.forEach = forEach;\n    lodash.forEachRight = forEachRight;\n    lodash.forIn = forIn;\n    lodash.forInRight = forInRight;\n    lodash.forOwn = forOwn;\n    lodash.forOwnRight = forOwnRight;\n    lodash.functions = functions;\n    lodash.groupBy = groupBy;\n    lodash.indexBy = indexBy;\n    lodash.initial = initial;\n    lodash.intersection = intersection;\n    lodash.invert = invert;\n    lodash.invoke = invoke;\n    lodash.keys = keys;\n    lodash.keysIn = keysIn;\n    lodash.map = map;\n    lodash.mapKeys = mapKeys;\n    lodash.mapValues = mapValues;\n    lodash.matches = matches;\n    lodash.matchesProperty = matchesProperty;\n    lodash.memoize = memoize;\n    lodash.merge = merge;\n    lodash.method = method;\n    lodash.methodOf = methodOf;\n    lodash.mixin = mixin;\n    lodash.modArgs = modArgs;\n    lodash.negate = negate;\n    lodash.omit = omit;\n    lodash.once = once;\n    lodash.pairs = pairs;\n    lodash.partial = partial;\n    lodash.partialRight = partialRight;\n    lodash.partition = partition;\n    lodash.pick = pick;\n    lodash.pluck = pluck;\n    lodash.property = property;\n    lodash.propertyOf = propertyOf;\n    lodash.pull = pull;\n    lodash.pullAt = pullAt;\n    lodash.range = range;\n    lodash.rearg = rearg;\n    lodash.reject = reject;\n    lodash.remove = remove;\n    lodash.rest = rest;\n    lodash.restParam = restParam;\n    lodash.set = set;\n    lodash.shuffle = shuffle;\n    lodash.slice = slice;\n    lodash.sortBy = sortBy;\n    lodash.sortByAll = sortByAll;\n    lodash.sortByOrder = sortByOrder;\n    lodash.spread = spread;\n    lodash.take = take;\n    lodash.takeRight = takeRight;\n    lodash.takeRightWhile = takeRightWhile;\n    lodash.takeWhile = takeWhile;\n    lodash.tap = tap;\n    lodash.throttle = throttle;\n    lodash.thru = thru;\n    lodash.times = times;\n    lodash.toArray = toArray;\n    lodash.toPlainObject = toPlainObject;\n    lodash.transform = transform;\n    lodash.union = union;\n    lodash.uniq = uniq;\n    lodash.unzip = unzip;\n    lodash.unzipWith = unzipWith;\n    lodash.values = values;\n    lodash.valuesIn = valuesIn;\n    lodash.where = where;\n    lodash.without = without;\n    lodash.wrap = wrap;\n    lodash.xor = xor;\n    lodash.zip = zip;\n    lodash.zipObject = zipObject;\n    lodash.zipWith = zipWith;\n\n    // Add aliases.\n    lodash.backflow = flowRight;\n    lodash.collect = map;\n    lodash.compose = flowRight;\n    lodash.each = forEach;\n    lodash.eachRight = forEachRight;\n    lodash.extend = assign;\n    lodash.iteratee = callback;\n    lodash.methods = functions;\n    lodash.object = zipObject;\n    lodash.select = filter;\n    lodash.tail = rest;\n    lodash.unique = uniq;\n\n    // Add functions to `lodash.prototype`.\n    mixin(lodash, lodash);\n\n    /*------------------------------------------------------------------------*/\n\n    // Add functions that return unwrapped values when chaining.\n    lodash.add = add;\n    lodash.attempt = attempt;\n    lodash.camelCase = camelCase;\n    lodash.capitalize = capitalize;\n    lodash.ceil = ceil;\n    lodash.clone = clone;\n    lodash.cloneDeep = cloneDeep;\n    lodash.deburr = deburr;\n    lodash.endsWith = endsWith;\n    lodash.escape = escape;\n    lodash.escapeRegExp = escapeRegExp;\n    lodash.every = every;\n    lodash.find = find;\n    lodash.findIndex = findIndex;\n    lodash.findKey = findKey;\n    lodash.findLast = findLast;\n    lodash.findLastIndex = findLastIndex;\n    lodash.findLastKey = findLastKey;\n    lodash.findWhere = findWhere;\n    lodash.first = first;\n    lodash.floor = floor;\n    lodash.get = get;\n    lodash.gt = gt;\n    lodash.gte = gte;\n    lodash.has = has;\n    lodash.identity = identity;\n    lodash.includes = includes;\n    lodash.indexOf = indexOf;\n    lodash.inRange = inRange;\n    lodash.isArguments = isArguments;\n    lodash.isArray = isArray;\n    lodash.isBoolean = isBoolean;\n    lodash.isDate = isDate;\n    lodash.isElement = isElement;\n    lodash.isEmpty = isEmpty;\n    lodash.isEqual = isEqual;\n    lodash.isError = isError;\n    lodash.isFinite = isFinite;\n    lodash.isFunction = isFunction;\n    lodash.isMatch = isMatch;\n    lodash.isNaN = isNaN;\n    lodash.isNative = isNative;\n    lodash.isNull = isNull;\n    lodash.isNumber = isNumber;\n    lodash.isObject = isObject;\n    lodash.isPlainObject = isPlainObject;\n    lodash.isRegExp = isRegExp;\n    lodash.isString = isString;\n    lodash.isTypedArray = isTypedArray;\n    lodash.isUndefined = isUndefined;\n    lodash.kebabCase = kebabCase;\n    lodash.last = last;\n    lodash.lastIndexOf = lastIndexOf;\n    lodash.lt = lt;\n    lodash.lte = lte;\n    lodash.max = max;\n    lodash.min = min;\n    lodash.noConflict = noConflict;\n    lodash.noop = noop;\n    lodash.now = now;\n    lodash.pad = pad;\n    lodash.padLeft = padLeft;\n    lodash.padRight = padRight;\n    lodash.parseInt = parseInt;\n    lodash.random = random;\n    lodash.reduce = reduce;\n    lodash.reduceRight = reduceRight;\n    lodash.repeat = repeat;\n    lodash.result = result;\n    lodash.round = round;\n    lodash.runInContext = runInContext;\n    lodash.size = size;\n    lodash.snakeCase = snakeCase;\n    lodash.some = some;\n    lodash.sortedIndex = sortedIndex;\n    lodash.sortedLastIndex = sortedLastIndex;\n    lodash.startCase = startCase;\n    lodash.startsWith = startsWith;\n    lodash.sum = sum;\n    lodash.template = template;\n    lodash.trim = trim;\n    lodash.trimLeft = trimLeft;\n    lodash.trimRight = trimRight;\n    lodash.trunc = trunc;\n    lodash.unescape = unescape;\n    lodash.uniqueId = uniqueId;\n    lodash.words = words;\n\n    // Add aliases.\n    lodash.all = every;\n    lodash.any = some;\n    lodash.contains = includes;\n    lodash.eq = isEqual;\n    lodash.detect = find;\n    lodash.foldl = reduce;\n    lodash.foldr = reduceRight;\n    lodash.head = first;\n    lodash.include = includes;\n    lodash.inject = reduce;\n\n    mixin(lodash, (function() {\n      var source = {};\n      baseForOwn(lodash, function(func, methodName) {\n        if (!lodash.prototype[methodName]) {\n          source[methodName] = func;\n        }\n      });\n      return source;\n    }()), false);\n\n    /*------------------------------------------------------------------------*/\n\n    // Add functions capable of returning wrapped and unwrapped values when chaining.\n    lodash.sample = sample;\n\n    lodash.prototype.sample = function(n) {\n      if (!this.__chain__ && n == null) {\n        return sample(this.value());\n      }\n      return this.thru(function(value) {\n        return sample(value, n);\n      });\n    };\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * The semantic version number.\n     *\n     * @static\n     * @memberOf _\n     * @type string\n     */\n    lodash.VERSION = VERSION;\n\n    // Assign default placeholders.\n    arrayEach(['bind', 'bindKey', 'curry', 'curryRight', 'partial', 'partialRight'], function(methodName) {\n      lodash[methodName].placeholder = lodash;\n    });\n\n    // Add `LazyWrapper` methods for `_.drop` and `_.take` variants.\n    arrayEach(['drop', 'take'], function(methodName, index) {\n      LazyWrapper.prototype[methodName] = function(n) {\n        var filtered = this.__filtered__;\n        if (filtered && !index) {\n          return new LazyWrapper(this);\n        }\n        n = n == null ? 1 : nativeMax(nativeFloor(n) || 0, 0);\n\n        var result = this.clone();\n        if (filtered) {\n          result.__takeCount__ = nativeMin(result.__takeCount__, n);\n        } else {\n          result.__views__.push({ 'size': n, 'type': methodName + (result.__dir__ < 0 ? 'Right' : '') });\n        }\n        return result;\n      };\n\n      LazyWrapper.prototype[methodName + 'Right'] = function(n) {\n        return this.reverse()[methodName](n).reverse();\n      };\n    });\n\n    // Add `LazyWrapper` methods that accept an `iteratee` value.\n    arrayEach(['filter', 'map', 'takeWhile'], function(methodName, index) {\n      var type = index + 1,\n          isFilter = type != LAZY_MAP_FLAG;\n\n      LazyWrapper.prototype[methodName] = function(iteratee, thisArg) {\n        var result = this.clone();\n        result.__iteratees__.push({ 'iteratee': getCallback(iteratee, thisArg, 1), 'type': type });\n        result.__filtered__ = result.__filtered__ || isFilter;\n        return result;\n      };\n    });\n\n    // Add `LazyWrapper` methods for `_.first` and `_.last`.\n    arrayEach(['first', 'last'], function(methodName, index) {\n      var takeName = 'take' + (index ? 'Right' : '');\n\n      LazyWrapper.prototype[methodName] = function() {\n        return this[takeName](1).value()[0];\n      };\n    });\n\n    // Add `LazyWrapper` methods for `_.initial` and `_.rest`.\n    arrayEach(['initial', 'rest'], function(methodName, index) {\n      var dropName = 'drop' + (index ? '' : 'Right');\n\n      LazyWrapper.prototype[methodName] = function() {\n        return this.__filtered__ ? new LazyWrapper(this) : this[dropName](1);\n      };\n    });\n\n    // Add `LazyWrapper` methods for `_.pluck` and `_.where`.\n    arrayEach(['pluck', 'where'], function(methodName, index) {\n      var operationName = index ? 'filter' : 'map',\n          createCallback = index ? baseMatches : property;\n\n      LazyWrapper.prototype[methodName] = function(value) {\n        return this[operationName](createCallback(value));\n      };\n    });\n\n    LazyWrapper.prototype.compact = function() {\n      return this.filter(identity);\n    };\n\n    LazyWrapper.prototype.reject = function(predicate, thisArg) {\n      predicate = getCallback(predicate, thisArg, 1);\n      return this.filter(function(value) {\n        return !predicate(value);\n      });\n    };\n\n    LazyWrapper.prototype.slice = function(start, end) {\n      start = start == null ? 0 : (+start || 0);\n\n      var result = this;\n      if (result.__filtered__ && (start > 0 || end < 0)) {\n        return new LazyWrapper(result);\n      }\n      if (start < 0) {\n        result = result.takeRight(-start);\n      } else if (start) {\n        result = result.drop(start);\n      }\n      if (end !== undefined) {\n        end = (+end || 0);\n        result = end < 0 ? result.dropRight(-end) : result.take(end - start);\n      }\n      return result;\n    };\n\n    LazyWrapper.prototype.takeRightWhile = function(predicate, thisArg) {\n      return this.reverse().takeWhile(predicate, thisArg).reverse();\n    };\n\n    LazyWrapper.prototype.toArray = function() {\n      return this.take(POSITIVE_INFINITY);\n    };\n\n    // Add `LazyWrapper` methods to `lodash.prototype`.\n    baseForOwn(LazyWrapper.prototype, function(func, methodName) {\n      var checkIteratee = /^(?:filter|map|reject)|While$/.test(methodName),\n          retUnwrapped = /^(?:first|last)$/.test(methodName),\n          lodashFunc = lodash[retUnwrapped ? ('take' + (methodName == 'last' ? 'Right' : '')) : methodName];\n\n      if (!lodashFunc) {\n        return;\n      }\n      lodash.prototype[methodName] = function() {\n        var args = retUnwrapped ? [1] : arguments,\n            chainAll = this.__chain__,\n            value = this.__wrapped__,\n            isHybrid = !!this.__actions__.length,\n            isLazy = value instanceof LazyWrapper,\n            iteratee = args[0],\n            useLazy = isLazy || isArray(value);\n\n        if (useLazy && checkIteratee && typeof iteratee == 'function' && iteratee.length != 1) {\n          // Avoid lazy use if the iteratee has a \"length\" value other than `1`.\n          isLazy = useLazy = false;\n        }\n        var interceptor = function(value) {\n          return (retUnwrapped && chainAll)\n            ? lodashFunc(value, 1)[0]\n            : lodashFunc.apply(undefined, arrayPush([value], args));\n        };\n\n        var action = { 'func': thru, 'args': [interceptor], 'thisArg': undefined },\n            onlyLazy = isLazy && !isHybrid;\n\n        if (retUnwrapped && !chainAll) {\n          if (onlyLazy) {\n            value = value.clone();\n            value.__actions__.push(action);\n            return func.call(value);\n          }\n          return lodashFunc.call(undefined, this.value())[0];\n        }\n        if (!retUnwrapped && useLazy) {\n          value = onlyLazy ? value : new LazyWrapper(this);\n          var result = func.apply(value, args);\n          result.__actions__.push(action);\n          return new LodashWrapper(result, chainAll);\n        }\n        return this.thru(interceptor);\n      };\n    });\n\n    // Add `Array` and `String` methods to `lodash.prototype`.\n    arrayEach(['join', 'pop', 'push', 'replace', 'shift', 'sort', 'splice', 'split', 'unshift'], function(methodName) {\n      var func = (/^(?:replace|split)$/.test(methodName) ? stringProto : arrayProto)[methodName],\n          chainName = /^(?:push|sort|unshift)$/.test(methodName) ? 'tap' : 'thru',\n          retUnwrapped = /^(?:join|pop|replace|shift)$/.test(methodName);\n\n      lodash.prototype[methodName] = function() {\n        var args = arguments;\n        if (retUnwrapped && !this.__chain__) {\n          return func.apply(this.value(), args);\n        }\n        return this[chainName](function(value) {\n          return func.apply(value, args);\n        });\n      };\n    });\n\n    // Map minified function names to their real names.\n    baseForOwn(LazyWrapper.prototype, function(func, methodName) {\n      var lodashFunc = lodash[methodName];\n      if (lodashFunc) {\n        var key = lodashFunc.name,\n            names = realNames[key] || (realNames[key] = []);\n\n        names.push({ 'name': methodName, 'func': lodashFunc });\n      }\n    });\n\n    realNames[createHybridWrapper(undefined, BIND_KEY_FLAG).name] = [{ 'name': 'wrapper', 'func': undefined }];\n\n    // Add functions to the lazy wrapper.\n    LazyWrapper.prototype.clone = lazyClone;\n    LazyWrapper.prototype.reverse = lazyReverse;\n    LazyWrapper.prototype.value = lazyValue;\n\n    // Add chaining functions to the `lodash` wrapper.\n    lodash.prototype.chain = wrapperChain;\n    lodash.prototype.commit = wrapperCommit;\n    lodash.prototype.concat = wrapperConcat;\n    lodash.prototype.plant = wrapperPlant;\n    lodash.prototype.reverse = wrapperReverse;\n    lodash.prototype.toString = wrapperToString;\n    lodash.prototype.run = lodash.prototype.toJSON = lodash.prototype.valueOf = lodash.prototype.value = wrapperValue;\n\n    // Add function aliases to the `lodash` wrapper.\n    lodash.prototype.collect = lodash.prototype.map;\n    lodash.prototype.head = lodash.prototype.first;\n    lodash.prototype.select = lodash.prototype.filter;\n    lodash.prototype.tail = lodash.prototype.rest;\n\n    return lodash;\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  // Export lodash.\n  var _ = runInContext();\n\n  // Some AMD build optimizers like r.js check for condition patterns like the following:\n  if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {\n    // Expose lodash to the global object when an AMD loader is present to avoid\n    // errors in cases where lodash is loaded by a script tag and not intended\n    // as an AMD module. See http://requirejs.org/docs/errors.html#mismatch for\n    // more details.\n    root._ = _;\n\n    // Define as an anonymous module so, through path mapping, it can be\n    // referenced as the \"underscore\" module.\n    define(function() {\n      return _;\n    });\n  }\n  // Check for `exports` after `define` in case a build optimizer adds an `exports` object.\n  else if (freeExports && freeModule) {\n    // Export for Node.js or RingoJS.\n    if (moduleExports) {\n      (freeModule.exports = _)._ = _;\n    }\n    // Export for Rhino with CommonJS support.\n    else {\n      freeExports._ = _;\n    }\n  }\n  else {\n    // Export for a browser or Rhino.\n    root._ = _;\n  }\n}.call(this));\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('lodash')) :\n\ttypeof define === 'function' && define.amd ? define(['lodash'], factory) :\n\t(global['minno-sequencer'] = factory(global._));\n}(this, (function (_) { 'use strict';\n\n_ = _ && _.hasOwnProperty('default') ? _['default'] : _;\n\n/**\n * A function that maps a mixer object into a sequence.\n *\n * The basic structure of such an obect is:\n * {\n *\t\tmixer: 'functionType',\n *\t\tremix : false,\n *\t\tdata: [task1, task2]\n *\t}\n *\n * The results of the mix are set into `$parsed` within the original mixer object.\n * if remix is true $parsed is returned instead of recomputing\n *\n * @param {Object} [obj] [a mixer object]\n * @returns {Array} [An array of mixed objects]\n */\n\nmixProvider.$inject = ['randomizeShuffle', 'randomizeRandom'];\nfunction mixProvider(shuffle, random){\n\n    function mix(obj){\n        var mixerName = obj.mixer;\n\n        // if this isn't a mixer\n        // make sure we catch mixers that are set with undefined by accident...\n        if (!(_.isPlainObject(obj) && 'mixer' in obj)){\n            return [obj];\n        }\n\n        if (_.isUndefined(mix.mixers[mixerName])){\n            throw new Error('Mixer: unknow mixer type = ' + mixerName);\n        }\n\n        if (!obj.remix && obj.$parsed) {\n            return obj.$parsed;\n        }\n\n        obj.$parsed = mix.mixers[mixerName].apply(null, arguments);\n\n        if (!_.isArray(obj.$parsed)) {\n            throw new Error('Mixer: mixers must return an array (mixer: ' + mixerName + ')');\n        }\n\n        return obj.$parsed;\n    }\n\n    function deepMixer(sequence, context){\n        return _.reduce(sequence, function(arr,value){\n\n            if (_.isPlainObject(value) && 'mixer' in value && value.mixer != 'wrapper' && !value.wrapper){\n                var seq = deepMixer(mix(value, context), context);\n                return arr.concat(seq);\n            } else {\n                return arr.concat([value]);\n            }\n        }, []);\n    }\n\n\n    mix.mixers = {\n        wrapper : function(obj){\n            return obj.data;\n        },\n\n        repeat: function(obj){\n            var sequence = obj.data || [];\n            var result = [], i;\n            for (i=0; i < obj.times; i++){\n                result = result.concat(_.clone(sequence,true));\n            }\n            return result;\n        },\n\n        // randomize any elements\n        random: function(obj, context){\n            var sequence = obj.data ? deepMixer(obj.data, context) : [];\n            return shuffle(sequence);\n        },\n\n        choose: function(obj, context){\n            var sequence = obj.data ? deepMixer(obj.data, context) : [];\n            return _.take(shuffle(sequence), obj.n ? obj.n : 1);\n        },\n\n        custom: function(obj, context){\n            return _.isFunction(obj.fn) ? obj.fn(obj, context) : [];\n        },\n\n        weightedRandom: weightedChoose,\n        weightedChoose: weightedChoose\n\n    };\n\n\n    return mix;\n\n    function weightedChoose(obj, context){\n        var sequence = obj.data ? deepMixer(obj.data, context) : [];\n        var i;\n        var n = obj.n || 1;\n        var result = [];\n        var total_weight = _.reduce(obj.weights,function (prev, cur) {\n            return prev + cur;\n        });\n\n        for (i = 0; i < n; i++){\n            result.push(generate());\n        }\n\n        return result;\n\n        function generate(){\n            var i;\n            var random_num = random() * total_weight; // cutoff - when we reach this sum - we've reached the desired weight\n            var weight_sum = 0;\n\n            for (i = 0; i < sequence.length; i++) {\n                weight_sum += obj.weights[i];\n                weight_sum = +weight_sum.toFixed(3);\n\n                if (random_num <= weight_sum) {\n                    return obj.data[i];\n                }\n            }\n\n            throw new Error('Mixer: something went wrong with weightedRandom');\n        }\n    }\n\n}\n\nmixerDotNotationProvider$1.$inject = ['dotNotation'];\nfunction mixerDotNotationProvider$1(dotNotation){\n\n    function mixerDotNotation(chain, obj){\n\n        var escapeSeparatorRegex= /[^/]\\./;\n\n        if (!_.isString(chain)) return chain;\n\n        // We do not have a non escaped dot: we treat this as a string\n        if (!escapeSeparatorRegex.test(chain)) return chain.replace('/.','.');\n\n        return dotNotation(chain, obj);\n    }\n\n    return mixerDotNotation;\n}\n\nmixerConditionProvider$1.$inject = ['mixerDotNotation'];\nfunction mixerConditionProvider$1(dotNotation){\n    var operatorHash = {\n        gt: forceNumeric(_.gt),\n        greaterThan: forceNumeric(_.gt),\n        gte: forceNumeric(_.gte),\n        greaterThanOrEqual: forceNumeric(_.gte),\n        equals: _.eq,\n        'in': _.rearg(_.contains,1,0), // effectively reverse\n        contains: _.rearg(_.contains,1,0), // effectively reverse\n        exactly: exactly,\n        isTruthy: isTruthy\n    };\n\n    function mixerCondition(condition, context){\n        var operator = getOperator(condition);\n        var left = dotNotation(condition.compare,context);\n        var right = dotNotation(condition.to,context);\n\n        if (condition.DEBUG && console) console.info('Condition: ', left, condition.operator || 'equals', right, condition); // eslint-disable-line no-console \n\n        return condition.negate\n            ? !operator.apply(context,[left, right, context])\n            : operator.apply(context,[left, right, context]);\n    }\n\n    return mixerCondition;\n\n\n    // extract the operator function from the condition\n    function getOperator(condition){\n        var operator = condition.operator;\n        if (_.isFunction(condition)) return condition;\n        if (!_.has(condition, 'operator')) return _.has(condition,'to') ? _.eq : isTruthy;\n        if (_.isFunction(operator)) return operator;\n        return operatorHash[operator];\n    }\n\n    function isTruthy(left){ return !!left; }\n    function exactly(left,right){ return left === right;}\n    function forceNumeric(cb){ return function(left,right){ return [left,right].every(_.isNumber) ? cb(left,right) : false; }; } \n\n}\n\nevaluateProvider.$inject = ['mixerCondition'];\nfunction evaluateProvider(condition){\n    /**\n     * Checks if a conditions set is true\n     * @param  {Array} conditions [an array of conditions]\n     * @param  {Object} context   [A context for the condition checker]\n     * @return {Boolean}          [Are these conditions true]\n     */\n\n    function evaluate(conditions,context){\n        // make && the default\n        _.isArray(conditions) && (conditions = {and:conditions});\n\n        function test(cond){return evaluate(cond,context);}\n\n        // && objects\n        if (conditions.and){\n            return _.every(conditions.and, test);\n        }\n        if (conditions.nand){\n            return !_.every(conditions.nand, test);\n        }\n\n        // || objects\n        if (conditions.or){\n            return _.some(conditions.or, test);\n        }\n        if (conditions.nor){\n            return !_.some(conditions.nor, test);\n        }\n\n        return condition(conditions, context);\n    }\n\n    return evaluate;\n}\n\n/**\n * Registers the branching mixers with the mixer\n * @return {function}         [mixer decorator]\n */\n\nmixerBranchingDecorator$1.$inject = ['$delegate','mixerEvaluate','mixerDefaultContext'];\nfunction mixerBranchingDecorator$1(mix, evaluate, mixerDefaultContext){\n\n    mix.mixers.branch = branch;\n    mix.mixers.multiBranch = multiBranch;\n\n    return mix;\n\n    /**\n     * Branching mixer\n     * @return {Array}         [A data array with objects to continue with]\n     */\n    function branch(obj, context){\n        context = _.extend(context || {}, mixerDefaultContext);\n        return evaluate(obj.conditions, context) ? obj.data || [] : obj.elseData || [];\n    }\n\n    /**\n     * multiBranch mixer\n     * @return {Array}         [A data array with objects to continue with]\n     */\n    function multiBranch(obj, context){\n        context = _.extend(context || {}, mixerDefaultContext);\n        var row;\n\n        row = _.find(obj.branches, function(branch){\n            return evaluate(branch.conditions, context);\n        });\n\n        if (row) {\n            return row.data || [];\n        }\n\n        return obj.elseData || [];\n    }\n}\n\nmixerSequenceProvider$1.$inject = ['mixer'];\nfunction mixerSequenceProvider$1(mix){\n\n    /**\n     * MixerSequence takes an mixer array and allows browsing back and forth within it\n     * @param {Array} arr [a mixer array]\n     */\n    function MixerSequence(arr){\n        this.sequence = arr;\n        this.stack = [];\n        this.add(arr);\n        this.pointer = 0;\n    }\n\n    _.extend(MixerSequence.prototype, {\n        /**\n         * Add sequence to mixer\n         * @param {[type]} arr     Sequence\n         * @param {[type]} reverse Whether to start from begining or end\n         */\n        add: function(arr, reverse){\n            this.stack.push({pointer:reverse ? arr.length : -1,sequence:arr});\n        },\n\n        proceed: function(direction, context){\n            // get last subSequence\n            var subSequence = this.stack[this.stack.length-1];\n            var isNext = (direction === 'next');\n\n            // if we ran out of sequence\n            // add the original sequence back in\n            if (!subSequence) {\n                throw new Error ('mixerSequence: subSequence not found');\n            }\n\n            subSequence.pointer += isNext ? 1 : -1;\n\n            var el = subSequence.sequence[subSequence.pointer];\n\n            // if we ran out of elements, go to previous level (unless we are on the root sequence)\n            if (_.isUndefined(el) && this.stack.length > 1){\n                this.stack.pop();\n                return this.proceed.call(this,direction,context);\n            }\n\n            // if element is a mixer, mix it\n            if (el && el.mixer){\n                this.add(mix(el,context), !isNext);\n                return this.proceed.call(this,direction,context);\n            }\n\n            // regular element or undefined (end of sequence)\n            return this;\n        },\n\n        next: function(context){\n            this.pointer++;\n            return this.proceed.call(this, 'next',context);\n        },\n\n        prev: function(context){\n            this.pointer--;\n            return this.proceed.call(this, 'prev',context);\n        },\n\n        /**\n         * Return current element\n         * should **never** return a mixer - supposed to abstract them away\n         * @return {[type]} undefined or element\n         */\n        current:function(){\n            // get last subSequence\n            var subSequence = this.stack[this.stack.length-1];\n\n            if (!subSequence) {\n                throw new Error ('mixerSequence: subSequence not found');\n            }\n\n            var el = subSequence.sequence[subSequence.pointer];\n\n            if (!el){\n                return undefined;\n            }\n\n            // extend element with meta data\n            el.$meta = this.meta();\n\n            return el;\n        },\n\n        meta: function(){\n            return {\n                number: this.pointer,\n\n                // sum of sequence length, minus one (the mixer) for each level of stack except the last\n                outOf:  _.reduce(this.stack, function(memo,sub){return memo + sub.sequence.length-1;},0)+1\n            };\n        }\n\n    });\n\n    return MixerSequence;\n}\n\nfunction dotNotation$1(chain, obj){\n\n    if (_.isUndefined(chain)) return;\n    if (_.isString(chain)) chain = chain.split('.');\n\n    // @TODO maybe lodash _.get?\n    return chain.reduce(function(result, link){\n\n        if (_.isPlainObject(result) || _.isArray(result)){\n            return result[link];\n        }\n\n        return undefined;\n\n    }, obj);\n}\n\nvar mixer = mixProvider(\n    _.shuffle, // randomizeShuffle\n    Math.random // randomizeRandom\n);\n\nvar mixerDotNotation = mixerDotNotationProvider$1(dotNotation$1);\nvar mixerCondition = mixerConditionProvider$1(\n    mixerDotNotation,\n    piConsole$1\n);\n\nvar mixerEvaluate = evaluateProvider(mixerCondition);\n\nvar mixerDefaultContext = {};\n\nmixerBranchingDecorator$1(\n    mixer,\n    mixerEvaluate,\n    mixerDefaultContext\n);\n\nvar MixerSequence = mixerSequenceProvider$1(mixer);\n\nfunction piConsole$1(){\n    return console;\n}\n\ntemplateObjProvider$1.$inject = ['templateDefaultContext'];\nfunction templateObjProvider$1(templateDefaultContext){\n\n    function templateObj(obj, context, options){\n        var skip = _.get(options, 'skip', []);\n        var result = {};\n        var key;\n        var ctx = _.assign({}, context, templateDefaultContext);\n\n        for (key in obj){\n            result[key] = (skip.indexOf(key) == -1) ? expand(obj[key]) : obj[key];\n        }\n\n        return result;\n\n        function expand(value){\n            if (_.isString(value)) return template(value);\n            if (_.isArray(value)) return value.map(expand);\n            if (_.isPlainObject(value)) return _.mapValues(value, expand);\n            return value;\n        }\n\n        function template(input){\n            // if there is no template just return the string\n            if (!~input.indexOf('<%')) return input;\n            return _.template(input)(ctx);\n        }\n    }\n\n    return templateObj;\n}\n\nvar templateObj = templateObjProvider$1({});\n\n/*\n * The constructor for an Array wrapper\n */\n\nfunction collectionService(){\n\n    function Collection (arr) {\n        if (arr instanceof Collection) {\n            return arr;\n        }\n\n        // Make sure we are creating this array out of a valid argument\n        if (!_.isUndefined(arr) && !_.isArray(arr) && !(arr instanceof Collection)) {\n            throw new Error('Collections can only be constructed from arrays');\n        }\n\n        this.collection = arr || [];\n        this.length = this.collection.length;\n\n        // pointer to the current location within the array\n        // we start with -1 so that the initial next points to the begining of the array\n        this.pointer = -1;\n    }\n\n    _.extend(Collection.prototype,{\n\n        first : function first(){\n            this.pointer = 0;\n            return this.collection[this.pointer];\n        },\n\n        last : function last(){\n            this.pointer = this.collection.length - 1;\n            return this.collection[this.pointer];\n        },\n\n        end : function end(){\n            this.pointer = this.collection.length;\n            return undefined;\n        },\n\n        current : function(){\n            return this.collection[this.pointer];\n        },\n\n        next : function(){\n            return this.collection[++this.pointer];\n        },\n\n        previous : function(){\n            return this.collection[--this.pointer];\n        },\n\n        // add list of items to the collection\n        add : function(list){\n            // dont allow adding nothing\n            if (!arguments.length) {\n                return this;\n            }\n\n            // make sure list is as an array\n            list = _.isArray(list) ? list : [list];\n            this.collection = this.collection.concat(list);\n\n            this.length = this.collection.length;\n\n            return this;\n        },\n\n        // return the item at index\n        at: function(index){\n            return this.collection[index];\n        }\n    });\n\n\n    // Stuff we took out of bootstrap that can augment the collection\n    // **************************************************************\n    var methods = ['where','filter'];\n    var slice = Array.prototype.slice;\n\n    // Mix in each Underscore method as a proxy to `Collection#models`.\n    _.each(methods, function(method) {\n        Collection.prototype[method] = function() {\n            var args = slice.call(arguments);\n            args.unshift(this.collection);\n            var coll = _[method].apply(_,args);\n            return new Collection(coll);\n        };\n    });\n\n    return Collection;\n}\n\n// @TODO: repeat currently repeats only the last element, we need repeat = 'set' or something in order to prevent re-randomizing of exRandom...\n\nRandomizerProvider.$inject = ['randomizeInt', 'randomizeRange', 'Collection'];\nfunction RandomizerProvider(randomizeInt, randomizeRange, Collection){\n\n    function Randomizer(){\n        this._cache = {\n            random : {},\n            exRandom : {},\n            sequential : {}\n        };\n    }\n\n    _.extend(Randomizer.prototype, {\n        random: random,\n        exRandom: exRandom,\n        sequential: sequential\n    });\n\n    return Randomizer;\n\n    function random(length, seed, repeat){\n        var cache  = this._cache.random;\n\n        if (repeat && !_.isUndefined(cache[seed])) {\n            return cache[seed];\n        }\n\n        // save result in cache\n        cache[seed] = randomizeInt(length);\n\n        return cache[seed];\n    }\n\n    function sequential(length, seed, repeat){\n        var cache = this._cache.sequential;\n        var coll = cache[seed];\n        var result;\n\n        // if needed create collection and set it in seed\n        if (_.isUndefined(coll)){\n            coll = cache[seed] = new Collection(_.range(length));\n            return coll.first();\n        }\n\n        if (coll.length !== length){\n            throw new Error('This seed  ('+ seed +') points to a collection with the wrong length, you can only use a seed for sets of the same length');\n        }\n\n        // if this is a repeated element:\n        if (repeat) {\n            return coll.current();\n        }\n\n        // if we've reached the end\n        result = coll.next();\n\n        // if we've reached the end of the collection (next)\n        if (_.isUndefined(result)){\n            return coll.first();\n        } else {\n            return result;\n        }\n    }\n\n    function exRandom(length, seed, repeat){\n        var cache = this._cache.exRandom;\n        var coll = cache[seed];\n        var result;\n\n        // if needed create collection and set it in seed\n        if (_.isUndefined(coll)){\n            coll = cache[seed] = new Collection(randomizeRange(length));\n            return coll.first();\n        }\n\n        if (coll.length !== length){\n            throw new Error('This seed  ('+ seed +') points to a collection with the wrong length, you can only use a seed for sets of the same length');\n        }\n\n        // if this is a repeated element:\n        if (repeat) {\n            return coll.current();\n        }\n\n        // if we've reached the end\n        result = coll.next();\n\n        // if we've reached the end of the collection (next)\n        // we should re-randomize\n        if (_.isUndefined(result)){\n            coll = cache[seed] = new Collection(randomizeRange(length));\n            return coll.first();\n        } else {\n            return result;\n        }\n    }\n\n}\n\n/*\n *\tThe store is a collection of collection devided into namespaces.\n *\tYou can think of every namespace/collection as a table.\n */\nstoreProvider$1.$inject = ['Collection'];\nfunction storeProvider$1(Collection){\n\n    function Store(){\n        this.store = {};\n    }\n\n    _.extend(Store.prototype, {\n        create: function create(nameSpace){\n            if (this.store[nameSpace]){\n                throw new Error('The name space ' + nameSpace + ' already exists');\n            }\n            this.store[nameSpace] = new Collection();\n            this.store[nameSpace].namespace = nameSpace;\n        },\n\n        read: function read(nameSpace){\n            if (!this.store[nameSpace]){\n                throw new Error('The name space ' + nameSpace + ' does not exist');\n            }\n            return this.store[nameSpace];\n        },\n\n        update: function update(nameSpace, data){\n            var coll = this.read(nameSpace);\n            coll.add(data);\n        },\n\n        del: function del(nameSpace){\n            this.store[nameSpace] = undefined;\n        }\n    });\n\n    return Store;\n}\n\nSequenceProvider.$inject = ['MixerSequence'];\nfunction SequenceProvider(MixerSequence){\n\n    /**\n     * Sequence Constructor:\n     * Manage the progression of a sequence, including parsing (mixing, inheritance and templating).\n     * @param  {String  } namespace [pages or questions (the type of db.Store)]\n     * @param  {Array   } arr       [a sequence to manage]\n     * @param  {Database} db        [the db itself]\n     */\n\n    function Sequence(namespace, arr,db){\n        this.namespace = namespace;\n        this.mixerSequence = new MixerSequence(arr);\n        this.db = db;\n    }\n\n    _.extend(Sequence.prototype, {\n        // only mix\n        next: function(context){\n            this.mixerSequence.next(context);\n            return this;\n        },\n\n        // anti mix\n        prev: function(context){\n            this.mixerSequence.prev(context);\n            return this;\n        },\n\n        /**\n         * Return the element currently in focus.\n         * It always returns either an element or undefined (mixers are abstrcted away)\n         * @param  {[type]} context [description]\n         * @return {[type]}         [description]\n         */\n        current: function(context, options){\n            context || (context = {});\n            // must returned an element or undefined\n            var obj = this.mixerSequence.current(context);\n\n            // in case this is the end of the sequence\n            if (!obj){\n                return obj;\n            }\n\n            return this.db.inflate(this.namespace, obj, context, options);\n        },\n\n        /**\n         * Returns an array of elements, created by proceeding through the whole sequence.\n         * @return {[type]} [description]\n         */\n        all: function(context, options){\n            var sequence = [];\n\n            var el = this.next().current(context, options);\n            while (el){\n                sequence.push(el);\n                el = this.next().current(context, options);\n            }\n\n            return sequence;\n        }\n    });\n\n    return Sequence;\n}\n\nDatabaseProvider.$inject = ['DatabaseStore', 'DatabaseRandomizer', 'databaseInflate', 'templateObj', 'databaseSequence'];\nfunction DatabaseProvider(Store, Randomizer, inflate, templateObj, DatabaseSequence){\n\n    function Database(){\n        this.store = new Store();\n        this.randomizer = new Randomizer();\n    }\n\n    _.extend(Database.prototype, {\n        createColl: function(namespace){\n            this.store.create(namespace);\n        },\n\n        getColl: function(namespace){\n            return this.store.read(namespace);\n        },\n\n        add: function(namespace, query){\n            var coll = this.store.read(namespace);\n            coll.add(query);\n        },\n\n        inflate: function(namespace, query, context, options){\n            var coll = this.getColl(namespace);\n            var result;\n\n            try {\n                // inherit\n                if (!query.$inflated || query.reinflate) {\n                    query.$inflated = inflate(query, coll, this.randomizer);\n                    query.$templated = null; // we have to retemplate after querying, who know what new templates we got here...\n                }\n\n                // template\n                if (!query.$templated || query.$inflated.regenerateTemplate){\n                    context[namespace + 'Meta'] = query.$meta;\n                    context[namespace + 'Data'] = templateObj(query.$inflated.data || {}, context, options); // make sure we support\n                    query.$templated = templateObj(query.$inflated, context, options);\n                }\n\n                result = query.$templated;\n            } catch(err) {\n                if (this.onError) this.onError(err);\n                throw err;\n            }\n\n            // set flags\n            if (context.global && result.addGlobal) _.extend(context.global, result.addGlobal);\n\n            if (context.current && result.addCurrent) _.extend(context.current, result.addCurrent);\n\n            return query.$templated;\n        },\n\n        sequence: function(namespace, arr){\n            if (!_.isArray(arr)){\n                throw new Error('Sequence must be an array.');\n            }\n            return new DatabaseSequence(namespace, arr, this);\n        }\n    });\n\n    return Database;\n}\n\nqueryProvider$1.$inject = ['Collection'];\nfunction queryProvider$1(Collection){\n\n    function queryFn(query, collection, randomizer){\n        var coll = new Collection(collection);\n\n        // shortcuts:\n        // ****************************\n\n        if (_.isFunction(query)) return query(collection);\n\n        if (_.isString(query) || _.isNumber(query)) query = {set:query, type:'random'};\n\n        // filter by set\n        // ****************************\n        if (query.set) coll = coll.where({set:query.set});\n\n        // filter by data\n        // ****************************\n        if (_.isString(query.data)){\n            coll = coll.filter(function(q){\n                return q.handle === query.data || (q.data && q.data.handle === query.data);\n            });\n        }\n\n        if (_.isPlainObject(query.data)) coll = coll.where({data:query.data});\n\n        if (_.isFunction(query.data)) coll = coll.filter(query.data);\n\n        // pick by type\n        // ****************************\n\n        // the default seed is namespace specific just to minimize the situations where seeds clash across namespaces\n        var seed = query.seed || ('$' + collection.namespace + query.set);\n        var length = coll.length;\n        var repeat = query.repeat;\n        var at;\n\n        switch (query.type){\n            case undefined:\n            case 'byData':\n            case 'random':\n                at = randomizer.random(length,seed,repeat);\n                break;\n            case 'exRandom':\n                at = randomizer.exRandom(length,seed,repeat);\n                break;\n            case 'sequential':\n                at = randomizer.sequential(length,seed,repeat);\n                break;\n            case 'first':\n                at = 0;\n                break;\n            case 'last':\n                at = length-1;\n                break;\n            default:\n                throw new Error('Unknow query type: ' + query.type);\n        }\n\n        if (_.isUndefined(coll.at(at))) throw new Error('Query failed, object (' + JSON.stringify(query) +\t') not found. If you are trying to apply a template, you should know that they are not supported for inheritance.');\n\n        return coll.at(at);\n    }\n\n    return queryFn;\n}\n\n/*\n * inflates an object\n * this function is responsible for inheritance\n *\n * function inflate(source,coll, randomizer, recursive, counter)\n * @param source: the object to inflate\n * @param coll: a collection to inherit from\n * @param randomizer: a randomizer object for the query\n * @param recursive: private use only, is this inside the recursion (true) or top level (false)\n * @param depth: private use only, a counter for the depth of the recursion\n */\ninflateProvider$1.$inject = ['databaseQuery','$rootScope'];\nfunction inflateProvider$1(query, $rootScope){\n\n    function customize(source){\n        // check for a custom function and run it if it exists\n        if (_.isFunction(source.customize)){\n            source.customize.apply(source, [source, $rootScope.global]);\n        }\n        return source;\n    }\n\n    // @param source - object to inflate\n    // @param type - trial stimulus or media\n    // @param recursive - whether this is a recursive call or not\n    function inflate(source, coll, randomizer, recursive, depth){\n\n        // protection against infinte loops\n        // ***********************************\n        depth = recursive ? --depth : 10;\n\n        if (!depth) throw new Error('Inheritance loop too deep, you can only inherit up to 10 levels down');\n\n        if (!_.isPlainObject(source)) throw new Error('You are trying to inflate a non object (' + JSON.stringify(source) + ')');\n\n        var parent;\n        var child = _.cloneDeep(source);\n        var inheritObj = child.inherit;\n\n        /*\n         * no inheritance\n         */\n\n        if (!child.inherit) {\n            if (!recursive) customize(child); // customize only on the last call (non recursive)\n            return child;\n        }\n\n        /*\n         * get parent\n         */\n        parent = query(inheritObj, coll, randomizer);\n\n        // if inherit target was not found\n        if (!parent) throw new Error('Query failed, object (' + JSON.stringify(inheritObj) +\t') not found.');\n\n        // inflate parent (recursively)\n        parent = inflate(\n            parent,\n            coll,\n            randomizer,\n            true,\n            depth\n        );\n\n        // extending the child\n        // ***********************************\n        if (inheritObj.merge && !_.isArray(inheritObj.merge)){\n            throw new Error('Inheritance error: inherit.merge must be an array.');\n        }\n\n        // start inflating child (we have to extend selectively...)\n        _.each(parent, function(value, key){\n            var childProp, parentProp;\n            // if this key is not set yet, copy it out of the parent\n            if (!(key in child)){\n                child[key] = _.isFunction(value) ? value : _.cloneDeep(value);\n                return;\n            }\n\n            // if we have a merge array,\n            if (_.indexOf(inheritObj.merge, key) != -1){\n                childProp = child[key];\n                parentProp = value;\n\n                if (_.isArray(childProp)){\n                    if (!_.isArray(parentProp)){\n                        throw new Error('Inheritance error: You tried merging an array with an non array (for \"' + key + '\")');\n                    }\n                    child[key] = childProp.concat(parentProp);\n                }\n\n                if (_.isPlainObject(childProp)){\n                    if (!_.isPlainObject(parentProp)){\n                        throw new Error('Inheritance error: You tried merging an object with an non object (for \"' + key + '\")');\n                    }\n                    child[key] = _.extend({},parentProp,childProp);\n                }\n\n            }\n        });\n\n        // we want to extend the childs data even if it already exists\n        // its ok to shallow extend here (because by definition parent was created for this inflation)\n        if (parent.data){\n            child.data = _.extend(parent.data, child.data || {});\n        }\n\n        // Personal customization functions - only if this is the last iteration of inflate\n        // This way the customize function gets called only once.\n        !recursive && customize(child);\n\n        // return inflated trial\n        return child;\n    }\n\n    return inflate;\n}\n\nvar global = window.piGlobal;\n\nvar collection = collectionService();\n\nvar DatabaseRandomizer = RandomizerProvider(\n    randomInt,// randomize int\n    randomArr,// randomize range\n    collection\n);\n\nvar databaseQuery = queryProvider$1(\n    collection,\n    piConsole\n);\n\nvar databaseInflate = inflateProvider$1(\n    databaseQuery,\n    {global: global}, // rootscope\n    piConsole\n);\n\nvar DatabaseStore = storeProvider$1(\n    collection\n);\n\nvar databaseSequence = SequenceProvider(\n    MixerSequence\n);\n\n\nvar Database = DatabaseProvider(\n    DatabaseStore,\n    DatabaseRandomizer,\n    databaseInflate,\n    templateObj,\n    databaseSequence\n);\n\nfunction randomArr(length){\n    return _.shuffle(_.range(length));\n}\n\nfunction randomInt(length){\n    return Math.floor(Math.random()*length);\n}\n\nfunction piConsole(){\n    return console;\n}\n\nreturn Database;\n\n})));\n//# sourceMappingURL=minno-sequencer.js.map\n","/* eslint-disable */\r\n;(function() {\r\n\"use strict\"\r\n/* eslint-enable */\r\n\r\nvar guid = 0, HALT = {}\r\nfunction createStream() {\r\n\tfunction stream() {\r\n\t\tif (arguments.length > 0 && arguments[0] !== HALT) updateStream(stream, arguments[0])\r\n\t\treturn stream._state.value\r\n\t}\r\n\tinitStream(stream)\r\n\r\n\tif (arguments.length > 0 && arguments[0] !== HALT) updateStream(stream, arguments[0])\r\n\r\n\treturn stream\r\n}\r\nfunction initStream(stream) {\r\n\tstream.constructor = createStream\r\n\tstream._state = {id: guid++, value: undefined, state: 0, derive: undefined, recover: undefined, deps: {}, parents: [], endStream: undefined, unregister: undefined}\r\n\tstream.map = stream[\"fantasy-land/map\"] = map, stream[\"fantasy-land/ap\"] = ap, stream[\"fantasy-land/of\"] = createStream\r\n\tstream.valueOf = valueOf, stream.toJSON = toJSON, stream.toString = valueOf\r\n\r\n\tObject.defineProperties(stream, {\r\n\t\tend: {get: function() {\r\n\t\t\tif (!stream._state.endStream) {\r\n\t\t\t\tvar endStream = createStream()\r\n\t\t\t\tendStream.map(function(value) {\r\n\t\t\t\t\tif (value === true) {\r\n\t\t\t\t\t\tunregisterStream(stream)\r\n\t\t\t\t\t\tendStream._state.unregister = function(){unregisterStream(endStream)}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn value\r\n\t\t\t\t})\r\n\t\t\t\tstream._state.endStream = endStream\r\n\t\t\t}\r\n\t\t\treturn stream._state.endStream\r\n\t\t}}\r\n\t})\r\n}\r\nfunction updateStream(stream, value) {\r\n\tupdateState(stream, value)\r\n\tfor (var id in stream._state.deps) updateDependency(stream._state.deps[id], false)\r\n\tif (stream._state.unregister != null) stream._state.unregister()\r\n\tfinalize(stream)\r\n}\r\nfunction updateState(stream, value) {\r\n\tstream._state.value = value\r\n\tstream._state.changed = true\r\n\tif (stream._state.state !== 2) stream._state.state = 1\r\n}\r\nfunction updateDependency(stream, mustSync) {\r\n\tvar state = stream._state, parents = state.parents\r\n\tif (parents.length > 0 && parents.every(active) && (mustSync || parents.some(changed))) {\r\n\t\tvar value = stream._state.derive()\r\n\t\tif (value === HALT) return false\r\n\t\tupdateState(stream, value)\r\n\t}\r\n}\r\nfunction finalize(stream) {\r\n\tstream._state.changed = false\r\n\tfor (var id in stream._state.deps) stream._state.deps[id]._state.changed = false\r\n}\r\n\r\nfunction combine(fn, streams) {\r\n\tif (!streams.every(valid)) throw new Error(\"Ensure that each item passed to stream.combine/stream.merge is a stream\")\r\n\treturn initDependency(createStream(), streams, function() {\r\n\t\treturn fn.apply(this, streams.concat([streams.filter(changed)]))\r\n\t})\r\n}\r\n\r\nfunction initDependency(dep, streams, derive) {\r\n\tvar state = dep._state\r\n\tstate.derive = derive\r\n\tstate.parents = streams.filter(notEnded)\r\n\r\n\tregisterDependency(dep, state.parents)\r\n\tupdateDependency(dep, true)\r\n\r\n\treturn dep\r\n}\r\nfunction registerDependency(stream, parents) {\r\n\tfor (var i = 0; i < parents.length; i++) {\r\n\t\tparents[i]._state.deps[stream._state.id] = stream\r\n\t\tregisterDependency(stream, parents[i]._state.parents)\r\n\t}\r\n}\r\nfunction unregisterStream(stream) {\r\n\tfor (var i = 0; i < stream._state.parents.length; i++) {\r\n\t\tvar parent = stream._state.parents[i]\r\n\t\tdelete parent._state.deps[stream._state.id]\r\n\t}\r\n\tfor (var id in stream._state.deps) {\r\n\t\tvar dependent = stream._state.deps[id]\r\n\t\tvar index = dependent._state.parents.indexOf(stream)\r\n\t\tif (index > -1) dependent._state.parents.splice(index, 1)\r\n\t}\r\n\tstream._state.state = 2 //ended\r\n\tstream._state.deps = {}\r\n}\r\n\r\nfunction map(fn) {return combine(function(stream) {return fn(stream())}, [this])}\r\nfunction ap(stream) {return combine(function(s1, s2) {return s1()(s2())}, [stream, this])}\r\nfunction valueOf() {return this._state.value}\r\nfunction toJSON() {return this._state.value != null && typeof this._state.value.toJSON === \"function\" ? this._state.value.toJSON() : this._state.value}\r\n\r\nfunction valid(stream) {return stream._state }\r\nfunction active(stream) {return stream._state.state === 1}\r\nfunction changed(stream) {return stream._state.changed}\r\nfunction notEnded(stream) {return stream._state.state !== 2}\r\n\r\nfunction merge(streams) {\r\n\treturn combine(function() {\r\n\t\treturn streams.map(function(s) {return s()})\r\n\t}, streams)\r\n}\r\n\r\nfunction scan(reducer, seed, stream) {\r\n\tvar newStream = combine(function (s) {\r\n\t\treturn seed = reducer(seed, s._state.value)\r\n\t}, [stream])\r\n\r\n\tif (newStream._state.state === 0) newStream(seed)\r\n\r\n\treturn newStream\r\n}\r\n\r\nfunction scanMerge(tuples, seed) {\r\n\tvar streams = tuples.map(function(tuple) {\r\n\t\tvar stream = tuple[0]\r\n\t\tif (stream._state.state === 0) stream(undefined)\r\n\t\treturn stream\r\n\t})\r\n\r\n\tvar newStream = combine(function() {\r\n\t\tvar changed = arguments[arguments.length - 1]\r\n\r\n\t\tstreams.forEach(function(stream, idx) {\r\n\t\t\tif (changed.indexOf(stream) > -1) {\r\n\t\t\t\tseed = tuples[idx][1](seed, stream._state.value)\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\treturn seed\r\n\t}, streams)\r\n\r\n\treturn newStream\r\n}\r\n\r\ncreateStream[\"fantasy-land/of\"] = createStream\r\ncreateStream.merge = merge\r\ncreateStream.combine = combine\r\ncreateStream.scan = scan\r\ncreateStream.scanMerge = scanMerge\r\ncreateStream.HALT = HALT\r\n\r\nif (typeof module !== \"undefined\") module[\"exports\"] = createStream\r\nelse if (typeof window.m === \"function\" && !(\"stream\" in window.m)) window.m.stream = createStream\r\nelse window.m = {stream : createStream}\r\n\r\n}());\r\n","!(function(win) {\n\n/**\n * FastDom\n *\n * Eliminates layout thrashing\n * by batching DOM read/write\n * interactions.\n *\n * @author Wilson Page <wilsonpage@me.com>\n * @author Kornel Lesinski <kornel.lesinski@ft.com>\n */\n\n'use strict';\n\n/**\n * Mini logger\n *\n * @return {Function}\n */\nvar debug = 0 ? console.log.bind(console, '[fastdom]') : function() {};\n\n/**\n * Normalized rAF\n *\n * @type {Function}\n */\nvar raf = win.requestAnimationFrame\n  || win.webkitRequestAnimationFrame\n  || win.mozRequestAnimationFrame\n  || win.msRequestAnimationFrame\n  || function(cb) { return setTimeout(cb, 16); };\n\n/**\n * Initialize a `FastDom`.\n *\n * @constructor\n */\nfunction FastDom() {\n  var self = this;\n  self.reads = [];\n  self.writes = [];\n  self.raf = raf.bind(win); // test hook\n  debug('initialized', self);\n}\n\nFastDom.prototype = {\n  constructor: FastDom,\n\n  /**\n   * Adds a job to the read batch and\n   * schedules a new frame if need be.\n   *\n   * @param  {Function} fn\n   * @public\n   */\n  measure: function(fn, ctx) {\n    debug('measure');\n    var task = !ctx ? fn : fn.bind(ctx);\n    this.reads.push(task);\n    scheduleFlush(this);\n    return task;\n  },\n\n  /**\n   * Adds a job to the\n   * write batch and schedules\n   * a new frame if need be.\n   *\n   * @param  {Function} fn\n   * @public\n   */\n  mutate: function(fn, ctx) {\n    debug('mutate');\n    var task = !ctx ? fn : fn.bind(ctx);\n    this.writes.push(task);\n    scheduleFlush(this);\n    return task;\n  },\n\n  /**\n   * Clears a scheduled 'read' or 'write' task.\n   *\n   * @param {Object} task\n   * @return {Boolean} success\n   * @public\n   */\n  clear: function(task) {\n    debug('clear', task);\n    return remove(this.reads, task) || remove(this.writes, task);\n  },\n\n  /**\n   * Extend this FastDom with some\n   * custom functionality.\n   *\n   * Because fastdom must *always* be a\n   * singleton, we're actually extending\n   * the fastdom instance. This means tasks\n   * scheduled by an extension still enter\n   * fastdom's global task queue.\n   *\n   * The 'super' instance can be accessed\n   * from `this.fastdom`.\n   *\n   * @example\n   *\n   * var myFastdom = fastdom.extend({\n   *   initialize: function() {\n   *     // runs on creation\n   *   },\n   *\n   *   // override a method\n   *   measure: function(fn) {\n   *     // do extra stuff ...\n   *\n   *     // then call the original\n   *     return this.fastdom.measure(fn);\n   *   },\n   *\n   *   ...\n   * });\n   *\n   * @param  {Object} props  properties to mixin\n   * @return {FastDom}\n   */\n  extend: function(props) {\n    debug('extend', props);\n    if (typeof props != 'object') throw new Error('expected object');\n\n    var child = Object.create(this);\n    mixin(child, props);\n    child.fastdom = this;\n\n    // run optional creation hook\n    if (child.initialize) child.initialize();\n\n    return child;\n  },\n\n  // override this with a function\n  // to prevent Errors in console\n  // when tasks throw\n  catch: null\n};\n\n/**\n * Schedules a new read/write\n * batch if one isn't pending.\n *\n * @private\n */\nfunction scheduleFlush(fastdom) {\n  if (!fastdom.scheduled) {\n    fastdom.scheduled = true;\n    fastdom.raf(flush.bind(null, fastdom));\n    debug('flush scheduled');\n  }\n}\n\n/**\n * Runs queued `read` and `write` tasks.\n *\n * Errors are caught and thrown by default.\n * If a `.catch` function has been defined\n * it is called instead.\n *\n * @private\n */\nfunction flush(fastdom) {\n  debug('flush');\n\n  var writes = fastdom.writes;\n  var reads = fastdom.reads;\n  var error;\n\n  try {\n    debug('flushing reads', reads.length);\n    runTasks(reads);\n    debug('flushing writes', writes.length);\n    runTasks(writes);\n  } catch (e) { error = e; }\n\n  fastdom.scheduled = false;\n\n  // If the batch errored we may still have tasks queued\n  if (reads.length || writes.length) scheduleFlush(fastdom);\n\n  if (error) {\n    debug('task errored', error.message);\n    if (fastdom.catch) fastdom.catch(error);\n    else throw error;\n  }\n}\n\n/**\n * We run this inside a try catch\n * so that if any jobs error, we\n * are able to recover and continue\n * to flush the batch until it's empty.\n *\n * @private\n */\nfunction runTasks(tasks) {\n  debug('run tasks');\n  var task; while (task = tasks.shift()) task();\n}\n\n/**\n * Remove an item from an Array.\n *\n * @param  {Array} array\n * @param  {*} item\n * @return {Boolean}\n */\nfunction remove(array, item) {\n  var index = array.indexOf(item);\n  return !!~index && !!array.splice(index, 1);\n}\n\n/**\n * Mixin own properties of source\n * object into the target.\n *\n * @param  {Object} target\n * @param  {Object} source\n */\nfunction mixin(target, source) {\n  for (var key in source) {\n    if (source.hasOwnProperty(key)) target[key] = source[key];\n  }\n}\n\n// There should never be more than\n// one instance of `FastDom` in an app\nvar exports = win.fastdom = (win.fastdom || new FastDom()); // jshint ignore:line\n\n// Expose to CJS & AMD\nif ((typeof define) == 'function') define(function() { return exports; });\nelse if ((typeof module) == 'object') module.exports = exports;\n\n})( typeof window !== 'undefined' ? window : this);\n","export default window.performance.now\n    ? window.performance.now.bind(window.performance)\n\n    // We aren't using the absoulte time anywhere so we can use raw Date.now as a replacement\n    // if we're not on IE9\n    : Date.now.bind(Date);\n","import _ from 'lodash';\nimport fastdom from 'fastdom';\nimport global from '../../global';\nimport applyCanvasStyles from '../../task/canvas/applyCanvasStyles';\n\nexport default actions;\n\n// @TODO: see if we can afford to change the signature of actions\n// I'd like to have the trial go first here (used almost always).\nvar actions = {\n    /*\n     * Stimulus actions\n     */\n    showStim: function(action, eventData, trial){\n        var handle = action.handle || action;\n        trial.stimulusCollection.stimuli.forEach(function(stim){\n            if (handle == 'All' || stim.handle == handle) stim.show();\n        });\n    },\n\n    hideStim: function(action, eventData, trial){\n        var handle = action.handle || action;\n        trial.stimulusCollection.stimuli.forEach(function(stim){\n            if (handle == 'All' || stim.handle == handle) stim.hide();\n        });\n    },\n\n    setStimAttr: function(action, eventData, trial){\n        var handle = action.handle;\n        var setter = action.setter;\n        trial.stimulusCollection.stimuli.forEach(function(stim){\n            if (handle == 'All' || stim.handle == handle) {\n                if (_.isFunction(setter)) setter.apply(stim);\n                else _.extend(stim.data, setter);\n            }\n        });\n    },\n\n    /*\n     * Trial actions\n     */\n\n    setTrialAttr: function(action, eventData, trial){\n        var setter = action.setter;\n        if (typeof setter == 'undefined') throw new Error('The setTrialAttr action requires a setter property');\n        if (_.isFunction(setter)) setter.apply(trial, [trial.data,eventData]);\n        else _.extend(trial.data,setter);\n    },\n\n    setInput: function(action, eventData, trial){\n        if (typeof action.input == 'undefined') throw new Error('The setInput action requires an input property');\n        trial.input.add(action.input);\n    },\n\n    trigger: function(action, eventData, trial){\n        if (typeof action.handle == 'undefined') throw new Error('The trigger action requires a handle property');\n        trial.input.add({handle:action.handle, on:'timeout', duration:+action.duration || 0});\n    },\n\n    removeInput: function(action, eventData, trial){\n        var input = trial.input;\n        var handleList = action.handle;\n        if (typeof handleList == 'undefined') throw new Error('The removeInput action requires a handle property');\n        if (handleList == 'All' || _.include(handleList,'All')) input.removeAll();\n        else input.remove(handleList);\n    },\n\n    goto: function(action, eventData, trial){\n        trial._next = [action.destination,action.properties];\n    },\n\n    endTrial: function(action, eventData, trial){\n        trial.end();\n    },\n\n    resetTimer: function(action,eventData,trial){\n        // when to reset timer\n        action.immidiate ? reset() :  fastdom.mutate(reset);\n\n        function reset(){\n            eventData.latency = 0;\n            trial.input.resetTimer();\n        }\n    },\n\n    /*\n     * Logger\n     */\n\n    log: function(action,eventData,trial){\n        trial.$logs(arguments);\n    },\n\n    /*\n     * Misc\n     */\n\n    setGlobalAttr: function(action){\n        switch (typeof action.setter){\n            case 'function':\n                action.setter.apply(null,[global(), action]);\n                break;\n            case 'object':\n                _.extend(global(), action.setter);\n                break;\n            default:\n                throw new Error('setGlobalAttr requires a \"setter\" property');\n        }\n    },\n\n    custom: function(action,eventData, trial){\n        if (typeof action.fn != 'function') throw new Error('The custom action requires a fn propery');\n        action.fn(action, eventData, trial);\n    },\n\n    canvas: function(action, eventData, trial){\n        var canvas = trial.cavnas;\n        var map = {\n            background \t\t\t: {element: document.body, property: 'backgroundColor'},\n            canvasBackground\t: {element: canvas, property:'backgroundColor'},\n            borderColor\t\t\t: {element: canvas, property:'borderColor'},\n            borderWidth\t\t\t: {element: canvas, property:'borderWidth'}\n        };\n\n        // settings activator\n        var off = applyCanvasStyles(map, _.pick(action,['background','canvasBackground','borderColor','borderWidth']));\n        trial.$end.map(off);\n    }\n\n};\n\n","import api from './APIConstructor';\n\nexport default api({\n    type: 'quest',\n    sets: ['pages', 'questions']\n});\n","\nimport angular from 'angular';\nimport Logger from './LoggerProvider';\n\nvar module = angular.module('logger', [consoleModule.name]);\nimport consoleModule from 'utils/console/consoleModule';\nmodule.provider('Logger', Logger);\n\nexport default module;\n","/**\n * An assortment of useful randomization functions.\n * Good so we can easily mock them...\n */\nimport angular from 'angular';\nimport _ from 'lodash';\nexport default module;\n\nvar module = angular.module('randomize', []);\n\n/**\n * Just plain random\n */\n\nmodule.value('randomizeRandom', Math.random);\n\n/**\n * Just lodash shuffle...\n */\nmodule.value('randomizeShuffle', _.shuffle);\n\n/*\n * a function that returns a random integer between 0 and length\n * @param length: the upper boundary to the randomization.\n */\nmodule.value('randomizeInt', function randomInt(length){\n    return Math.floor(Math.random()*length);\n});\n\n/**\n * a function that returns a random array of integers between 0 and length\n * @param length: the upper boundary to the randomization.\n */\nmodule.value('randomizeRange', function randomArr(length){\n    return _.shuffle(_.range(length));\n});\n\n","import angular from 'angular';\nimport randomizeModule from '../randomize/randomizeModule';\n\nimport mixer from './mixer';\nimport mixerSequential from './mixerSequential';\nimport mixerRecursive from './mixerRecursive';\nimport mixerSequenceProvider from './mixerSequenceProvider';\n\nimport dotNotation from './branching/dotNotation';\nimport mixerDotNotationProvider from './branching/mixerDotNotationProvider';\nimport mixerConditionProvider from './branching/mixerConditionProvider';\nimport mixerBranchingDecorator from './branching/mixerBranchingDecorator';\nimport mixerEvaluateProvider from './branching/mixerEvaluateProvider';\n\nexport default module;\n\nvar module = angular.module('mixer',[\n    randomizeModule.name\n]);\n\nmodule.service('mixer', mixer);\nmodule.service('mixerSequential', mixerSequential); // is this even in use?\nmodule.service('mixerRecursive', mixerRecursive); // is this even in use?\nmodule.service('MixerSequence', mixerSequenceProvider);\n\nmodule.value('dotNotation', dotNotation);\nmodule.service('mixerDotNotation', mixerDotNotationProvider);\nmodule.service('mixerCondition', mixerConditionProvider);\nmodule.service('mixerEvaluate', mixerEvaluateProvider);\nmodule.config(['$provide', function($provide){\n    $provide.decorator('mixer', mixerBranchingDecorator);\n}]);\nmodule.constant('mixerDefaultContext', {});\n","import angular from 'angular';\nimport templateFilter from './templateFilter';\nimport templateObjProvider from './templateObjProvider';\n\nexport default module;\n\nvar module = angular.module('template', []);\n\nmodule.filter('template', templateFilter);\nmodule.service('templateObj', templateObjProvider);\nmodule.constant('templateDefaultContext',{});\n","export default module;\n\nimport angular from 'angular';\nimport mixerModule from './mixer/mixerModule';\nimport templateModule from './template/templateModule';\nimport consoleModule from './console/consoleModule';\nimport randomizerProvider from './randomizer/randomizerProvider';\nimport collectionProvider from './collection/collectionProvider';\nimport inflateProvider from './inflateProvider';\nimport queryProvider from './queryProvider';\nimport databaseProvider from './databaseProvider';\nimport storeProvider from './store/storeProvider';\nimport databaseSequenceProvider from './databaseSequenceProvider';\n\nvar module = angular.module('database',[\n    mixerModule.name,\n    templateModule.name,\n    consoleModule.name\n])\n    .service('Collection', collectionProvider)\n    .service('DatabaseRandomizer', randomizerProvider)\n    .service('databaseQuery', queryProvider)\n    .service('databaseInflate', inflateProvider)\n    .service('DatabaseStore', storeProvider)\n    .service('Database', databaseProvider)\n    .service('databaseSequence', databaseSequenceProvider);\n","/* eslint-disable */\r\n;(function() {\r\n\"use strict\"\r\n/* eslint-enable */\r\n\r\nvar guid = 0, HALT = {}\r\nfunction createStream() {\r\n\tfunction stream() {\r\n\t\tif (arguments.length > 0 && arguments[0] !== HALT) updateStream(stream, arguments[0])\r\n\t\treturn stream._state.value\r\n\t}\r\n\tinitStream(stream)\r\n\r\n\tif (arguments.length > 0 && arguments[0] !== HALT) updateStream(stream, arguments[0])\r\n\r\n\treturn stream\r\n}\r\nfunction initStream(stream) {\r\n\tstream.constructor = createStream\r\n\tstream._state = {id: guid++, value: undefined, state: 0, derive: undefined, recover: undefined, deps: {}, parents: [], endStream: undefined, unregister: undefined}\r\n\tstream.map = stream[\"fantasy-land/map\"] = map, stream[\"fantasy-land/ap\"] = ap, stream[\"fantasy-land/of\"] = createStream\r\n\tstream.valueOf = valueOf, stream.toJSON = toJSON, stream.toString = valueOf\r\n\r\n\tObject.defineProperties(stream, {\r\n\t\tend: {get: function() {\r\n\t\t\tif (!stream._state.endStream) {\r\n\t\t\t\tvar endStream = createStream()\r\n\t\t\t\tendStream.map(function(value) {\r\n\t\t\t\t\tif (value === true) {\r\n\t\t\t\t\t\tunregisterStream(stream)\r\n\t\t\t\t\t\tendStream._state.unregister = function(){unregisterStream(endStream)}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn value\r\n\t\t\t\t})\r\n\t\t\t\tstream._state.endStream = endStream\r\n\t\t\t}\r\n\t\t\treturn stream._state.endStream\r\n\t\t}}\r\n\t})\r\n}\r\nfunction updateStream(stream, value) {\r\n\tupdateState(stream, value)\r\n\tfor (var id in stream._state.deps) updateDependency(stream._state.deps[id], false)\r\n\tif (stream._state.unregister != null) stream._state.unregister()\r\n\tfinalize(stream)\r\n}\r\nfunction updateState(stream, value) {\r\n\tstream._state.value = value\r\n\tstream._state.changed = true\r\n\tif (stream._state.state !== 2) stream._state.state = 1\r\n}\r\nfunction updateDependency(stream, mustSync) {\r\n\tvar state = stream._state, parents = state.parents\r\n\tif (parents.length > 0 && parents.every(active) && (mustSync || parents.some(changed))) {\r\n\t\tvar value = stream._state.derive()\r\n\t\tif (value === HALT) return false\r\n\t\tupdateState(stream, value)\r\n\t}\r\n}\r\nfunction finalize(stream) {\r\n\tstream._state.changed = false\r\n\tfor (var id in stream._state.deps) stream._state.deps[id]._state.changed = false\r\n}\r\n\r\nfunction combine(fn, streams) {\r\n\tif (!streams.every(valid)) throw new Error(\"Ensure that each item passed to stream.combine/stream.merge is a stream\")\r\n\treturn initDependency(createStream(), streams, function() {\r\n\t\treturn fn.apply(this, streams.concat([streams.filter(changed)]))\r\n\t})\r\n}\r\n\r\nfunction initDependency(dep, streams, derive) {\r\n\tvar state = dep._state\r\n\tstate.derive = derive\r\n\tstate.parents = streams.filter(notEnded)\r\n\r\n\tregisterDependency(dep, state.parents)\r\n\tupdateDependency(dep, true)\r\n\r\n\treturn dep\r\n}\r\nfunction registerDependency(stream, parents) {\r\n\tfor (var i = 0; i < parents.length; i++) {\r\n\t\tparents[i]._state.deps[stream._state.id] = stream\r\n\t\tregisterDependency(stream, parents[i]._state.parents)\r\n\t}\r\n}\r\nfunction unregisterStream(stream) {\r\n\tfor (var i = 0; i < stream._state.parents.length; i++) {\r\n\t\tvar parent = stream._state.parents[i]\r\n\t\tdelete parent._state.deps[stream._state.id]\r\n\t}\r\n\tfor (var id in stream._state.deps) {\r\n\t\tvar dependent = stream._state.deps[id]\r\n\t\tvar index = dependent._state.parents.indexOf(stream)\r\n\t\tif (index > -1) dependent._state.parents.splice(index, 1)\r\n\t}\r\n\tstream._state.state = 2 //ended\r\n\tstream._state.deps = {}\r\n}\r\n\r\nfunction map(fn) {return combine(function(stream) {return fn(stream())}, [this])}\r\nfunction ap(stream) {return combine(function(s1, s2) {return s1()(s2())}, [stream, this])}\r\nfunction valueOf() {return this._state.value}\r\nfunction toJSON() {return this._state.value != null && typeof this._state.value.toJSON === \"function\" ? this._state.value.toJSON() : this._state.value}\r\n\r\nfunction valid(stream) {return stream._state }\r\nfunction active(stream) {return stream._state.state === 1}\r\nfunction changed(stream) {return stream._state.changed}\r\nfunction notEnded(stream) {return stream._state.state !== 2}\r\n\r\nfunction merge(streams) {\r\n\treturn combine(function() {\r\n\t\treturn streams.map(function(s) {return s()})\r\n\t}, streams)\r\n}\r\n\r\nfunction scan(reducer, seed, stream) {\r\n\tvar newStream = combine(function (s) {\r\n\t\treturn seed = reducer(seed, s._state.value)\r\n\t}, [stream])\r\n\r\n\tif (newStream._state.state === 0) newStream(seed)\r\n\r\n\treturn newStream\r\n}\r\n\r\nfunction scanMerge(tuples, seed) {\r\n\tvar streams = tuples.map(function(tuple) {\r\n\t\tvar stream = tuple[0]\r\n\t\tif (stream._state.state === 0) stream(undefined)\r\n\t\treturn stream\r\n\t})\r\n\r\n\tvar newStream = combine(function() {\r\n\t\tvar changed = arguments[arguments.length - 1]\r\n\r\n\t\tstreams.forEach(function(stream, idx) {\r\n\t\t\tif (changed.indexOf(stream) > -1) {\r\n\t\t\t\tseed = tuples[idx][1](seed, stream._state.value)\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\treturn seed\r\n\t}, streams)\r\n\r\n\treturn newStream\r\n}\r\n\r\ncreateStream[\"fantasy-land/of\"] = createStream\r\ncreateStream.merge = merge\r\ncreateStream.combine = combine\r\ncreateStream.scan = scan\r\ncreateStream.scanMerge = scanMerge\r\ncreateStream.HALT = HALT\r\n\r\nif (typeof module !== \"undefined\") module[\"exports\"] = createStream\r\nelse if (typeof window.m === \"function\" && !(\"stream\" in window.m)) window.m.stream = createStream\r\nelse window.m = {stream : createStream}\r\n\r\n}());\r\n","import angular from 'angular';\nimport loggerModule from 'utils/logger/logger-module';\nimport databaseModule from 'minno-sequencer/src/databaseModule';\nimport consoleModule from 'utils/console/consoleModule';\nimport questSequenceProvider from './questSequenceProvider';\nimport questTaskProvider from './questTaskProvider';\nimport parseProvider from './parseProvider';\nimport dfltQuestLogger from './logger/dfltQuestLogger';\nimport createLogStream from './logger/createLogStream';\n\nvar module = angular.module('task', [\n    loggerModule.name,\n    databaseModule.name,\n    consoleModule.name\n]);\n\nmodule.service('QuestSequence', questSequenceProvider);\nmodule.service('QuestTask', questTaskProvider);\nmodule.service('taskParse', parseProvider);\nmodule.value('Logger', createLogStream);\n\nmodule.value('dfltQuestLogger', dfltQuestLogger);\n\nexport default module;\n","/* global performance */\n\n/**\n * Returns current time (uses performance if possible).\n * Notably, this function return either time since epoch or since startup. It is useful only for latency calculations.\n * @return {integer} [Time in ms]\n */\n\nvar nowFn;\n\n// if performance is set, look for the now function\nif (window.performance) {\n    nowFn = performance.now ||\n        performance.mozNow ||\n            performance.webkitNow ||\n                performance.msNow ||\n                    performance.oNow;\n}\n\n// if we have now proxy it (so it uses perfomance as \"this\")\n// otherwise use regular date/time\nexport default nowFn \n    ? function now(){ return nowFn.apply(performance);}\n    : function now(){ return +new Date();};\n","\nimport angular from 'angular';\nvar module = angular.module('timer',[]);\n\nmodule.service('timerStopper', timerStopper);\nimport timerStopper from './timerStopper';\nmodule.directive('piTimer', timerDirective);\nimport timerDirective from './timerDirective';\nmodule.value('timerNow', timerNow);\nimport timerNow from './timerNow';\n\nexport default module;\n","import angular from 'angular';\nimport _ from 'lodash';\n//import preloaderService from './preloaderService';\n//import preloaderDecorator from './preloaderDecorator';\nimport preloadImages from './preloadImages';\n\nvar module = angular.module('pi.utils',[]);\n\n// module.service('piPreloader', preloaderService);\n// module.config(['$provide', function($provide){\n// $provide.decorator('piPreloader', preloaderDecorator);\n// }]);\n\nmodule.value('piPreloadImages', preloadImages);\n\n/**\n * Wrapper for angular invoke.\n * Injects global and current automatically.\n *\n * @param {Function} fn The function to invoke\n * @param {Object} locals Locals to add to angualr invoke\n */\n\nmodule.service('piInvoke', ['$injector',function($injector){\n    var $rootScope = $injector.get('$rootScope');\n\n    function piInvoke(fn, locals){\n        var global = $rootScope.global || {};\n\n        // if fn is undefined don't get all mushy about it\n        if (!fn){\n            return;\n        }\n\n        $injector.invoke(fn, null, _.extend(locals, {\n            global: global,\n            current: global.current\n        }));\n    }\n\n    return piInvoke;\n}]);\n\nexport default module;\n","import angular from 'angular';\nexport default  angular\n    .module('ui.bootstrap.buttons', [])\n    .constant('buttonConfig', {\n        activeClass: 'active',\n        toggleEvent: 'click'\n    })\n\n    .controller('ButtonsController', ['buttonConfig', function(buttonConfig) {\n        this.activeClass = buttonConfig.activeClass || 'active';\n        this.toggleEvent = buttonConfig.toggleEvent || 'click';\n    }])\n\n    .directive('btnRadio', function () {\n        return {\n            require: ['btnRadio', 'ngModel'],\n            controller: 'ButtonsController',\n            link: function (scope, element, attrs, ctrls) {\n                var buttonsCtrl = ctrls[0], ngModelCtrl = ctrls[1];\n\n                //model -> UI\n                ngModelCtrl.$render = function () {\n                    element.toggleClass(buttonsCtrl.activeClass, angular.equals(ngModelCtrl.$modelValue, scope.$eval(attrs.btnRadio)));\n                };\n\n                //ui->model\n                element.bind(buttonsCtrl.toggleEvent, function () {\n                    var isActive = element.hasClass(buttonsCtrl.activeClass);\n\n                    if (!isActive || angular.isDefined(attrs.uncheckable)) {\n                        scope.$apply(function () {\n                            ngModelCtrl.$setViewValue(isActive ? null : scope.$eval(attrs.btnRadio));\n                            ngModelCtrl.$render();\n                        });\n                    }\n                });\n            }\n        };\n    })\n\n    .directive('btnCheckbox', function () {\n        return {\n            require: ['btnCheckbox', 'ngModel'],\n            controller: 'ButtonsController',\n            link: function (scope, element, attrs, ctrls) {\n                var buttonsCtrl = ctrls[0], ngModelCtrl = ctrls[1];\n\n                function getTrueValue() {\n                    return getCheckboxValue(attrs.btnCheckboxTrue, true);\n                }\n\n                function getFalseValue() {\n                    return getCheckboxValue(attrs.btnCheckboxFalse, false);\n                }\n\n                function getCheckboxValue(attributeValue, defaultValue) {\n                    var val = scope.$eval(attributeValue);\n                    return angular.isDefined(val) ? val : defaultValue;\n                }\n\n                //model -> UI\n                ngModelCtrl.$render = function () {\n                    element.toggleClass(buttonsCtrl.activeClass, angular.equals(ngModelCtrl.$modelValue, getTrueValue()));\n                };\n\n                //ui->model\n                element.bind(buttonsCtrl.toggleEvent, function () {\n                    scope.$apply(function () {\n                        ngModelCtrl.$setViewValue(element.hasClass(buttonsCtrl.activeClass) ? getFalseValue() : getTrueValue());\n                        ngModelCtrl.$render();\n                    });\n                });\n            }\n        };\n    });\n","\n\nimport angular from 'angular';\nvar module = angular.module('pi.modal',[]);\n\nmodule.service('piModal', modalService);\nimport modalService from './modalService';\n\nexport default module;\n","/*\n * The directive for creating textNumber inputs.\n */\n\n// This is the only way to get a non js file relatively\nimport template from './text-number.html';\n\nvar directive = function(){\n    return {\n        replace: true,\n        template:template,\n        require: ['form', 'ngModel', '^?piqPage'],\n        controller: 'questController',\n        controllerAs: 'ctrl',\n        scope:{\n            data: '=questData'\n        },\n        link: function(scope, element, attr, ctrls) {\n\n            var form = ctrls[0];\n            var input = element.find('input');\n            var ngModel = input.eq(0).controller('ngModel');\n\n            scope.form = form;\n\n            scope.ctrl.registerModel(ctrls[1], {\n                dflt: ''\n            });\n\n            scope.data.autoSubmit && element.bind('keydown keypress', function (event) {\n                if(event.which === 13) {\n                    scope.$apply(function(){\n                        scope.$emit('quest:submit:now');\n                    });\n                    event.preventDefault();\n                }\n            });\n\n            // we have a specific problem with min max that don't take internal\n            // http://stackoverflow.com/questions/15656617/validation-not-triggered-when-data-binding-a-number-inputs-min-max-attributes\n            var minValidator = function(value) {\n                var min = parseFloat(scope.data.min);\n                if (!isNaN(min) && value < min) {\n                    ngModel.$setValidity('qstMin', false);\n                    return undefined;\n                } else {\n                    ngModel.$setValidity('qstMin', true);\n                    return value;\n                }\n            };\n\n            ngModel.$parsers.push(minValidator);\n            ngModel.$formatters.push(minValidator);\n\n            var maxValidator = function(value) {\n                var max = parseFloat(scope.data.max);\n                if (!isNaN(max) && value > max) {\n                    ngModel.$setValidity('qstMax', false);\n                    return undefined;\n                } else {\n                    ngModel.$setValidity('qstMax', true);\n                    return value;\n                }\n            };\n\n            ngModel.$parsers.push(maxValidator);\n            ngModel.$formatters.push(maxValidator);\n        }\n    };\n};\n\nexport default directive;\n","module.exports = function atoa (a, n) { return Array.prototype.slice.call(a, n); }\n","var si = typeof setImmediate === 'function', tick;\nif (si) {\n  tick = function (fn) { setImmediate(fn); };\n} else if (typeof process !== 'undefined' && process.nextTick) {\n  tick = process.nextTick;\n} else {\n  tick = function (fn) { setTimeout(fn, 0); };\n}\n\nmodule.exports = tick;\n","'use strict';\n\nvar ticky = require('ticky');\n\nmodule.exports = function debounce (fn, args, ctx) {\n  if (!fn) { return; }\n  ticky(function run () {\n    fn.apply(ctx || null, args || []);\n  });\n};\n","'use strict';\n\nvar atoa = require('atoa');\nvar debounce = require('./debounce');\n\nmodule.exports = function emitter (thing, options) {\n  var opts = options || {};\n  var evt = {};\n  if (thing === undefined) { thing = {}; }\n  thing.on = function (type, fn) {\n    if (!evt[type]) {\n      evt[type] = [fn];\n    } else {\n      evt[type].push(fn);\n    }\n    return thing;\n  };\n  thing.once = function (type, fn) {\n    fn._once = true; // thing.off(fn) still works!\n    thing.on(type, fn);\n    return thing;\n  };\n  thing.off = function (type, fn) {\n    var c = arguments.length;\n    if (c === 1) {\n      delete evt[type];\n    } else if (c === 0) {\n      evt = {};\n    } else {\n      var et = evt[type];\n      if (!et) { return thing; }\n      et.splice(et.indexOf(fn), 1);\n    }\n    return thing;\n  };\n  thing.emit = function () {\n    var args = atoa(arguments);\n    return thing.emitterSnapshot(args.shift()).apply(this, args);\n  };\n  thing.emitterSnapshot = function (type) {\n    var et = (evt[type] || []).slice(0);\n    return function () {\n      var args = atoa(arguments);\n      var ctx = this || thing;\n      if (type === 'error' && opts.throws !== false && !et.length) { throw args.length === 1 ? args[0] : args; }\n      et.forEach(function emitter (listen) {\n        if (opts.async) { debounce(listen, args, ctx); } else { listen.apply(ctx, args); }\n        if (listen._once) { thing.off(type, listen); }\n      });\n      return thing;\n    };\n  };\n  return thing;\n};\n","'use strict';\n\nvar eventmap = [];\nvar eventname = '';\nvar ron = /^on/;\n\nfor (eventname in global) {\n  if (ron.test(eventname)) {\n    eventmap.push(eventname.slice(2));\n  }\n}\n\nmodule.exports = eventmap;\n","(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define([], factory);\n    } else {\n        /* global angular */\n        var app = angular.module('pi', []);\n        /* global angular:false */\n        app.directive('piSlider', factory(root.angular));\n    }\n}(this, function () {\n    var SLIDER_CHANGE_EVENT = 'slider:change';\n\n    sliderDirective.$inject = ['$document', '$sce'];\n    function sliderDirective($document) {\n        return {\n            scope: {\n                options: '=piSliderOptions'\n            },\n            replace: true,\n            require: 'ngModel',\n            template: ['<div class=\"slider\" ng-class=\"{\\'slider-ticks\\':options.showTicks}\" pi-pointerdown=\"onSliderMouseDown($event)\">',\n                '<div class=\"slider-label-left\" ng-style=\"options.leftLabelCss\">{{options.leftLabel}}</div>',\n                '<div class=\"slider-label-right\" ng-style=\"options.rightLabelCss\">{{options.rightLabel}}</div>',\n                '<div class=\"slider-container\">',\n                '<div class=\"slider-bar\">',\n                '<div class=\"slider-bar-highlight\" ng-style=\"highlightStyle\"></div>',\n                '</div>',\n                '<div class=\"slider-handle\" pi-pointerdown=\"onHandleMousedown($event)\" ng-style=\"handleStyle\"></div>',\n                '</div>',\n                '<ul class=\"slider-pips\" ng-if=\"!options.hidePips\">',\n                '<li ng-repeat=\"i in getNumber(steps) track by $index\" ng-style=\"{width: pipWidth + \\'%\\'}\" ng-class=\"{last:$last}\"></li>',\n                '</ul>',\n                '<ul class=\"slider-labels\">',\n                '<li ng-repeat=\"label in labels track by $index\" ng-style=\"{width: labelsWidth + \\'%\\'}\" ng-class=\"{first:$first, last:$last}\">{{label}}</li>',\n                '</ul>',\n                '</div>'].join('\\n'),\n\n            link: function(scope, element, attr, ngModel) {\n                var sliderHandleWidth;\n                var options = scope.options || {};\n\n                sliderHandleWidth = element[0].querySelector('.slider-handle').clientWidth;\n\n                scope.ngModel = ngModel;\n\n                scope.min = options.min || 0;\n                scope.max = options.max || (scope.min + 100);\n                scope.range = scope.max - scope.min;\n\n                scope.steps = options.steps ? options.steps - 1 : 0;\n                scope.pipWidth = options.steps && 100/scope.steps;\n\n                scope.labels = options.labels;\n                scope.labelsWidth = options.labels && 100 / options.labels.length;\n\n                ngModel.$isEmpty = isEmpty;\n                ngModel.$render = renderView;\n                ngModel.$formatters.push(toPercentage);\n                ngModel.$parsers.push(fromPercentage);\n\n                scope.onHandleMousedown = onHandleMousedown;\n                scope.onSliderMouseDown = onSliderMouseDown;\n\n                // helper for ngRepeat\n                // http://stackoverflow.com/questions/16824853/way-to-ng-repeat-defined-number-of-times-instead-of-repeating-over-array\n                scope.getNumber = function getNumber(num){return new Array(num);};\n\n                function setValue(percentage){\n                    ngModel.$setViewValue(percentage);\n                    ngModel.$render();\n                }\n\n                // limit percenatge by step size\n                function steppedPercentage(percentage){\n                    if (!scope.steps || ngModel.$isEmpty(percentage)){\n                        return percentage;\n                    }\n\n                    return Math.round(percentage * scope.steps) / scope.steps;\n                }\n\n                // manage placing the handle as well as the highlight correctly\n                function renderView() {\n                    var percentage = steppedPercentage(ngModel.$viewValue);\n                    var showHandle = !isNaN(percentage);\n                    var handleDisplay = showHandle ? 'block' : 'none';\n                    var highlightDisplay = showHandle && options.highlight ? 'block' : 'none';\n\n                    switch (options.highlightDirection) {\n                        case 'rtl':\n                            scope.highlightStyle = { left: percentage * 100 + '%', display: highlightDisplay};\n                            break;\n                        case 'center':\n                            if (percentage > 0.5) {\n                                scope.highlightStyle = { left: '50%', width:100 * (percentage -0.5) + '%', display: highlightDisplay};\n                            } else {\n                                scope.highlightStyle = { right: '50%', width:100 * (0.5 - percentage) + '%', display: highlightDisplay};\n                            }\n                            break;\n                        default:\n                            scope.highlightStyle = { right: (100 - percentage * 100) + '%', display: highlightDisplay};\n                    }\n\n                    scope.handleStyle = { left: (percentage * 100) + '%', display: handleDisplay};\n                }\n\n                // formater model => view\n                function toPercentage(modelValue){\n                    // if this isn't a number we can't compute percentage...\n                    if (ngModel.$isEmpty(modelValue)){\n                        return NaN;\n                    }\n\n                    // limit model size\n                    modelValue = Math.min(Math.max(modelValue, scope.min), scope.max);\n                    return (modelValue - scope.min) / scope.range;\n                }\n\n                // parser view => model\n                function fromPercentage(percentage){\n                    return +(scope.min + (steppedPercentage(percentage) * scope.range)).toFixed(4);\n                }\n\n                // handle drag\n                function onHandleMousedown(event) {\n                    fixEvent(event);\n                    var basePercentage, basePosition;\n                    event.preventDefault();\n                    event.stopPropagation(); // prevent propogation to slider so that change is fired for the beginin of a drag interaction\n                    basePosition = event.pageX;\n                    basePercentage = ngModel.$viewValue;\n\n                    $document.on('mousemove touchmove', mouseMove);\n                    $document.on('mouseup touchend', mouseUp);\n\n                    // drag\n                    function mouseMove(event) {\n                        fixEvent(event);\n                        event.preventDefault();\n                        var percentage = basePercentage + (event.pageX - basePosition) / (element.prop('clientWidth') - sliderHandleWidth);\n                        // don't allow extending beyond slider size\n                        percentage = Math.min(percentage, 1);\n                        percentage = Math.max(percentage, 0);\n\n                        scope.$apply(function(){\n                            setValue(percentage);\n                        });\n                    }\n\n                    // drop\n                    function mouseUp(event) {\n                        event.preventDefault();\n                        $document.off('mousemove touchmove', mouseMove);\n                        $document.off('mouseup touchend', mouseUp);\n                        scope.$emit(SLIDER_CHANGE_EVENT, ngModel.$modelValue); // emit only on mouse drop\n                    }\n                }\n\n                // slider click\n                function onSliderMouseDown(event){\n                    fixEvent(event);\n                    event.preventDefault();\n                    var sliderWidth = element.prop('clientWidth');\n                    var sliderPosition = element[0].getBoundingClientRect().left;\n                    var percentage = (event.pageX - sliderPosition - sliderHandleWidth/2) / (sliderWidth - sliderHandleWidth);\n                    // don't allow extending beyond slider size\n                    percentage = Math.min(percentage, 1);\n                    percentage = Math.max(percentage, 0);\n\n                    // auto \"$apply\" by ng-mousedown\n                    setValue(percentage);\n                    onHandleMousedown(event); // allow dragging after a slider click.\n                }\n\n\n            }\n        };\n    }\n\n    return sliderDirective;\n\n\n    function fixEvent(event){\n        var eventDoc, doc, body;\n\n        // fix IE8 events (missing pageX) - from jquery\n        // Calculate pageX/Y if missing and clientX/Y available\n        if ( event.pageX == null && event.clientX != null ) {\n            eventDoc = event.target.ownerDocument || document;\n            doc = eventDoc.documentElement;\n            body = eventDoc.body;\n\n            event.pageX = event.clientX + ( doc && doc.scrollLeft || body && body.scrollLeft || 0 ) - ( doc && doc.clientLeft || body && body.clientLeft || 0 );\n            event.pageY = event.clientY + ( doc && doc.scrollTop  || body && body.scrollTop  || 0 ) - ( doc && doc.clientTop  || body && body.clientTop  || 0 );\n        }\n\n        // pageX for android multi touch screens\n        // http://stackoverflow.com/questions/9585487/cant-get-coordinates-of-touchevents-in-javascript-on-android-devices\n        if (event.pageX == null && event.touches){\n            event.pageX = event.touches[0].pageX;\n            event.pageY = event.touches[0].pageY;\n        }\n    }\n\n    function isEmpty(n){\n        return isNaN(parseFloat(n)) || !isFinite(n);\n    }\n}));\n","import angular from 'angular';\nimport _ from 'lodash';\nimport timerModule from 'utils/timer/timer-module';\nimport utilsModule from 'utils/utils/utilsModule';\nimport buttons from './buttons/buttons';\nimport templateModule from 'minno-sequencer/src/template/templateModule';\nimport consoleModule from 'utils/console/consoleModule';\nimport modalModule from 'utils/modal/modalModule';\nimport questController from './questController';\nimport guid from './guid';\nimport piQuestDirective from './piQuest/piQuest-directive';\nimport piqPageDirective from './piQuest/piqPage-directive';\nimport wrapperDirective from './wrapper/wrapper-directive';\nimport textDirective from './text/textDirective';\nimport textNumberDirective from './text/text-number-directive';\nimport selectMixerProvider from './select/selectMixerProvider';\nimport dropdownDirective from './select/dropdownDirective';\nimport selectOneDirective from './select/selectOneDirective';\nimport selectMultiDirective from './select/selectMultiDirective';\nimport rankDirective from './rank/rankDirective';\nimport gridDirective from './grid/gridDirective';\nimport gridRowDirective from './grid/gridRowDirective';\nimport multiGridDirective from './multiGrid/multiGridDirective';\nimport multiGridRowDirective from './multiGrid/multiGridRowDirective';\n\nimport sliderDirective from './slider/sliderDirective';\nimport slider from './slider/slider';\nimport piPointerdown from './slider/piPointerdown';\nimport toRegexFilter from './toRegexFilter';\nimport dfltUnitsFilter from './dfltUnitsFilter';\n\nexport default module;\n\n// set modules that are requirements for the quest module\nvar module = angular.module('questDirectives',[\n    timerModule.name,\n    utilsModule.name,\n    buttons.name,\n    templateModule.name,\n    consoleModule.name,\n    modalModule.name\n]);\n\nmodule.controller('questController', questController);\nmodule.factory('questGuid', guid);\nmodule.directive('piQuest', piQuestDirective);\nmodule.directive('piqPage', piqPageDirective);\nmodule.directive('questWrapper', wrapperDirective);\nmodule.directive('questInfo', function(){return {};});\n\nmodule.directive('questText', textDirective);\nmodule.directive('questTextarea', textDirective); // uses the same directive as questText\nmodule.directive('questTextNumber', textNumberDirective);\n\nmodule.service('questSelectMixer', selectMixerProvider);\nmodule.directive('questDropdown',dropdownDirective);\nmodule.directive('questSelectOne',selectOneDirective);\nmodule.directive('questSelectMulti',selectMultiDirective);\n\nmodule.directive('questRank',rankDirective);\n\nmodule.value('questShuffle', _.shuffle); // we already have this in database but I don't want the directives to be too interdependant\nmodule.directive('questGrid', gridDirective);\nmodule.directive('questGridRow', gridRowDirective);\nmodule.directive('questMultiGrid', multiGridDirective);\nmodule.directive('questMultiGridRow', multiGridRowDirective);\nmodule.directive('questSlider',sliderDirective);\nmodule.directive('piSlider',slider);\nmodule.directive('piPointerdown',piPointerdown);\n\n\n// @TODO: move to utils or something\nmodule.config(['$sceProvider', function($sceProvider){\n    $sceProvider.enabled(false);\n}]);\n\nmodule.directive('piQuestValidation', function(){\n    return {\n        replace:true,\n        transclude: true,\n        scope: {unvalid:'=piQuestValidation',postSubmit:'=piPostSubmit'},\n        template: [\n            '<div class=\"alert alert-danger\" role=\"alert\" ng-show=\"unvalid && ($parent.$parent.$parent.submitAttempt || postSubmit)\">',\n            '<span class=\"glyphicon glyphicon-exclamation-sign\" aria-hidden=\"true\"></span>',\n            '<span ng-transclude></span>',\n            '</div>'\n        ].join('')\n    };\n});\n\n// filters\nmodule.filter('toRegex', toRegexFilter);\nmodule.filter('dfltUnits', dfltUnitsFilter);\n\n// auto focus on first input element\nmodule.directive('piqPage', function(){\n    return {\n        link: function(scope, element){\n            var page = scope.page;\n            // let page render before focusing\n            page.autoFocus && setTimeout(function(){\n                var wrapper = element[0].querySelector('[quest-wrapper]');\n                var el = wrapper && wrapper.querySelector('input, textArea, select, button');\n                if (el) el.focus();\n            });\n        }\n    };\n});\n","/*\n *\tOne module to rule them all.\n *\tThis module is responsible to pull together all the piquest components.\n *\tCalling it should suffice to activate the whole piquest stuff.\n */\n\n\nimport angular from 'angular';\nimport questTaskModule from './task/questTaskModule';\nimport questDirectivesModule from './directives/questDirectivesModule';\n\nexport default module;\n\nvar module = angular.module('piQuest', [\n    questDirectivesModule.name,\n    questTaskModule.name\n]);\n\n","import angular from 'angular';\nimport messageDirective from './messageDirective';\nimport messageDoneDirective from './messageDoneDirective';\nimport consoleModule from 'utils/console/consoleModule';\n\nvar module = angular.module('pi.message',[\n    consoleModule.name\n]);\n\nmodule.directive('piMessage', messageDirective);\nmodule.directive('piMessageDone', messageDoneDirective);\n\nexport default module;\n","/**\n * The module responsible for the single task.\n * It knows how to load a task and activate it.\n * It also supplies the basic task directive.\n * @return {module} pi.task module.\n */\n\n\nimport {requirejs} from 'requirejs/require.js';\nimport angular from 'angular';\nimport _ from 'lodash';\nimport taskActivateProvider from './taskActivateProvider';\nimport taskDirective from './taskDirective';\nimport time from 'minno-time';\n\nexport default module;\n\nvar module = angular.module('pi.task',[]);\nmodule.provider('taskActivate', taskActivateProvider);\nmodule.directive('piTask', taskDirective);\n\n\n// the tasks defined here essentialy activate the default players for quest/message/pip.\n\n/**\n * Quest\n */\nmodule.config(['taskActivateProvider', function(activateProvider){\n\n    activateQuest.$inject = ['done', '$element', '$scope', '$compile', 'script','task'];\n    function activateQuest(done, $canvas, $scope, $compile, script, task){\n        var $el;\n\n        // update script name\n        task.name && (script.name = task.name);\n\n        $scope.script = script;\n\n        $canvas.append('<div pi-quest></div>');\n        $el = $canvas.contents();\n        $compile($el)($scope);\n\n        // clean up piQuest\n        $el.controller('piQuest').task.promise['finally'](done);\n\n        return function questDestroy(){\n            $el.scope().$destroy();\n            $el.remove();\n        };\n    }\n\n    activateProvider.set('quest', activateQuest);\n}]);\n\nmodule.config(['taskActivateProvider', function(activateProvider){\n    activateMessage.$inject = ['done', '$element', 'task', '$scope','$compile'];\n    function activateMessage(done, $canvas, task, $scope, $compile){\n        var $el;\n\n        $scope.script = task;\n\n        $canvas.append('<div pi-message></div>');\n        $el = $canvas.contents();\n        $compile($el)($scope);\n\n        // clean up\n        $scope.$on('message:done', function(){\n            done();\n        });\n\n        return function destroyMessage(){\n            $scope.$destroy();\n            $el.remove();\n        };\n    }\n\n    activateProvider.set('message', activateMessage);\n}]);\n\n/**\n * Post\n */\nmodule.config(['taskActivateProvider', function(activateProvider){\n    activatePost.$inject = ['done', 'task', '$http','$q', '$rootScope'];\n    function activatePost(done, task, $http, $q, $rootScope){\n        var canceler = $q.defer(); // http://stackoverflow.com/questions/13928057/how-to-cancel-an-http-request-in-angularjs\n        var global = $rootScope.global;\n        var data = task.path ? _.get(global, task.path) : task.data;\n\n        $http\n            .post(task.url, data, {timeout: canceler.promise})\n            .then(done,done);\n\n        return canceler.resolve;\n    }\n\n    activateProvider.set('post', activatePost);\n}]);\n\n/**\n * Redirect\n */\nmodule.config(['taskActivateProvider', function(activateProvider){\n    activateRedirect.$inject = ['done', 'task', 'managerBeforeUnload'];\n    function activateRedirect(done, task, beforeUnload){\n        if (_.result(task,'condition',true)){\n            beforeUnload.deactivate();\n            location.href = task.url;\n        } else {\n            done();\n        }\n    }\n\n    activateProvider.set('redirect', activateRedirect);\n}]);\n\n/**\n * minno-time activator\n **/\nmodule.config(['taskActivateProvider', function(activateProvider){\n    activatePIP.$inject = ['done', '$element', 'task', 'script'];\n    function activatePIP(done, $canvas, task, script){\n        var $el, req;\n        var newVersion = task.version > 0.3;\n        var pipSink;\n\n        // load PIP\n        req = requirejs.config({\n            context: _.uniqueId(),\n            baseUrl: task.baseUrl || '../bower_components/PIPlayer/dist/js', // can't use packages yet as urls in pip aren't relative...\n            paths: {\n                //plugins\n                text: ['//cdnjs.cloudflare.com/ajax/libs/require-text/2.0.3/text.min', '../../bower_components/require-text/text'],\n\n                // Core Libraries\n                jquery: ['//cdnjs.cloudflare.com/ajax/libs/jquery/1.10.2/jquery.min','../../bower_components/jquery/dist/jquery.min'],\n                underscore: ['//cdnjs.cloudflare.com/ajax/libs/lodash.js/3.10.1/lodash.min','../../bower_components/lodash-compat/lodash.min'],\n                backbone: ['//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min', '../../bower_components/backbone/backbone']\n            },\n\n            deps: newVersion ? ['underscore'] : ['jquery', 'backbone', 'underscore']\n        });\n\n        // update script name\n        task.name && (script.name = task.name);\n\n        $canvas.append('<div pi-player></div>');\n        $el = $canvas.contents();\n        $el.addClass('pi-spinner');\n\n        req(['activatePIP'], function(activate){\n            $el.removeClass('pi-spinner');\n            if (newVersion) {\n                pipSink = activate($el[0], script);\n                pipSink.end.map(done);\n            }\n            else activate(script, done);\n        });\n\n        return function destroyPIP(){\n            $el.remove();\n            if (newVersion) pipSink.end(true);\n            else req(['app/task/main_view'], function(main){\n                main.deferred.resolve();\n                main.destroy();\n            });\n        };\n    }\n\n    activateProvider.set('pip', activatePIP);\n}]);\n\n/**\n * minno-time activator\n **/\nmodule.config(['taskActivateProvider', function(activateProvider){\n    activateTime.$inject = ['done', '$element', 'task', 'script'];\n    function activateTime(done, $canvas, task, script){\n        var $el;\n        var pipSink;\n\n        // update script name\n        task.name && (script.name = task.name);\n\n        $canvas.append('<div pi-player></div>');\n        $el = $canvas.contents();\n\n        pipSink = time($el[0], script);\n        pipSink.end.map(done);\n\n        return function destroyPIP(){\n            $el.remove();\n            pipSink.end(true);\n        };\n    }\n\n    activateProvider.set('time', activateTime);\n}]);\n","\n\nimport angular from 'angular';\nvar module = angular.module('pi.canvas',[]);\n\nmodule.service('managerCanvas', managerCanvasService);\nimport managerCanvasService from './managerCanvasService';\n\nexport default module;\n","\nimport angular from 'angular';\nvar module = angular.module('piHelperDirective', []);\n\nmodule.directive('piSwap', piSwapDirective);\nimport piSwapDirective from './piSwap/piSwapDirective';\nmodule.directive('piSpinner', piSpinnerDirective);\nimport piSpinnerDirective from './piSpinner/piSpinnerDirective';\n\nexport default module;\n","import angular from 'angular';\nimport taskModule from './task/taskModule';\nimport canvasModule from './canvas/canvasModule';\nimport utilsModule from 'utils/utils/utilsModule';\nimport helperDirectivesModule from 'utils/helperDirectives/helperDirectivesModule';\nimport consoleModule from 'utils/console/consoleModule';\nimport managerService from './managerService';\nimport managerSequence from './managerSequence';\nimport managerLoadService from './managerLoadService';\nimport managerGetScriptService from './managerGetScriptService';\nimport managerTaskLoadService from './managerTaskLoadService';\nimport beforeUnloadFactory from './beforeUnloadFactory';\nimport injectStyle from './injectStyle';\nimport managerDirective from './managerDirective';\nimport managerTaskDirective from './managerTaskDirective';\nimport piLinkDirective from './piLinkDirective';\n\nexport default module;\n\nvar module = angular.module('taskManager',[\n    taskModule.name,\n    canvasModule.name,\n    utilsModule.name,\n    helperDirectivesModule.name,\n    consoleModule.name\n]);\n\nmodule.service('managerService', managerService);\nmodule.service('managerSequence', managerSequence);\nmodule.service('managerLoad', managerLoadService);\nmodule.service('managerGetScript', managerGetScriptService);\nmodule.service('managerTaskLoad', managerTaskLoadService);\nmodule.factory('managerBeforeUnload', beforeUnloadFactory);\nmodule.constant('managerInjectStyle', injectStyle);\nmodule.directive('piManager', managerDirective);\nmodule.directive('piManagerTask', managerTaskDirective);\n\nmodule.directive('piLink', piLinkDirective);\n","// Adapted from https://gist.github.com/paulirish/1579671 which derived from\n// http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n// http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating\n\n// requestAnimationFrame polyfill by Erik Möller.\n// Fixes from Paul Irish, Tino Zijdel, Andrew Mao, Klemen Slavič, Darius Bacon\n\n// MIT license\n\nvar vendors = ['webkit', 'moz'];\nfor (var i = 0; i < vendors.length && !window.requestAnimationFrame; ++i) {\n    var vp = vendors[i];\n    window.requestAnimationFrame = window[vp+'RequestAnimationFrame'];\n    window.cancelAnimationFrame = (window[vp+'CancelAnimationFrame'] || window[vp+'CancelRequestAnimationFrame']);\n}\nif (\n    /iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent) || // iOS6 is buggy\n        !window.requestAnimationFrame || !window.cancelAnimationFrame\n) {\n    var lastTime = 0;\n    window.requestAnimationFrame = function(callback) {\n        var now = +new Date();\n        var nextTime = Math.max(lastTime + 16, now);\n        return setTimeout(function() { callback(lastTime = nextTime); }, nextTime - now);\n    };\n    window.cancelAnimationFrame = clearTimeout;\n}\n","import angular from 'angular';\nimport 'angular-animate';\nimport './rafPolyfill';\nimport dropInAnimation from './dropInAnimation';\nimport fadeAnimation from './fadeAnimation';\nimport slideAnimation from './slideAnimation';\n\nvar module = angular.module('pi.animate',['ngAnimate']);\n\nmodule.animation('.drop-in', dropInAnimation);\nmodule.animation('.fade', fadeAnimation);\nmodule.animation('.slide', slideAnimation);\n\nexport default module;\n","/**\n *\tThe main module that ties the whole application together.\n *\tEssentially, we are creating a module with dependencies on anything interesting...\n */\n\nimport _ from 'lodash';\nimport angular from 'angular';\nimport questModule from './quest/questModule';\nimport messageModule from './message/messageModule';\nimport managerModule from './taskManager/managerModule';\nimport animationModule from './utils/animations/animationModule';\nimport consoleModule from './utils/console/consoleModule';\nimport {require,define,requirejs} from 'requirejs/require';\n\nexport default app;\n\n// requirejs does not explicitly export these as globals\nwindow.require = require;\nwindow.requirejs = requirejs;\nwindow.define = define;\n\nvar submodules = [\n    questModule.name,\n    messageModule.name,\n    managerModule.name,\n    animationModule.name,\n    consoleModule.name\n];\n\nvar app = angular.module('piApp', submodules);\n\n// setup the global variable\napp.run(['$rootScope', '$rootElement', '$parse', '$window', function($rootScope, $rootElement, $parse, $window){\n    // @TODO: get these out of here (app.config? app.run?)\n    var globalAttr = $rootElement.attr('pi-global');\n    var piGlobal = $parse(globalAttr)($window);\n\n    // create the global object\n    window.piGlobal || (window.piGlobal = {});\n    $rootScope.global = window.piGlobal;\n\n    if (piGlobal){\n        _.extend($rootScope.global, piGlobal);\n    }\n}]);\n\n// monkey patch an IOS8 problem\n// https://github.com/angular/angular.js/issues/9128\napp.config(['$provide', function($provide) {\n\n    // http://ejohn.org/blog/objectgetprototypeof/\n    if ( typeof Object.getPrototypeOf !== 'function' ) {\n        if ( typeof 'test'.__proto__ === 'object' ) {\n            Object.getPrototypeOf = function(object){\n                return object.__proto__;\n            };\n        } else {\n            Object.getPrototypeOf = function(object){\n                // May break if the constructor has been tampered with\n                return object.constructor.prototype;\n            };\n        }\n    }\n\n\n\n    // Minification-safe hack.\n    var $$watchers = '$$watchers';\n    var $$nextSibling = '$$nextSibling';\n    var $$childHead = '$$childHead';\n    var $$childTail = '$$childTail';\n    var $$listeners = '$$listeners';\n    var $$listenerCount = '$$listenerCount';\n    var $id = '$id';\n    var $$childScopeClass = '$$childScopeClass';\n    var $parent = '$parent';\n    var $$prevSibling = '$$prevSibling';\n\n    $provide.decorator('$rootScope', ['$delegate', function($rootScope) {\n        var proto = Object.getPrototypeOf($rootScope);\n\n        function nextUid () {\n            return ++$rootScope.$id;\n        }\n\n        proto.$new = function(isolate) {\n            var child;\n\n            if (isolate) {\n                child = new proto.constructor();\n                child.$root = this.$root;\n                // ensure that there is just one async queue per $rootScope and its children\n                child.$$asyncQueue = this.$$asyncQueue;\n                child.$$postDigestQueue = this.$$postDigestQueue;\n            } else {\n                // Only create a child scope class if somebody asks for one,\n                // but cache it to allow the VM to optimize lookups.\n                if (!this.$$childScopeClass) {\n                    this.$$childScopeClass = function() {\n                        this[$$watchers] = this[$$nextSibling] = this[$$childHead] = this[$$childTail] = null;\n                        this[$$listeners] = {};\n                        this[$$listenerCount] = {};\n                        this[$id] = nextUid();\n                        this[$$childScopeClass] = null;\n                    };\n                    this.$$childScopeClass.prototype = this;\n                }\n                child = new this.$$childScopeClass();\n            }\n            child['this'] = child;\n            child[$parent] = this;\n            child[$$prevSibling] = this.$$childTail;\n            if (this.$$childHead) {\n                this.$$childTail.$$nextSibling = child;\n                this.$$childTail = child;\n            } else {\n                this.$$childHead = this.$$childTail = child;\n            }\n            return child;\n        };\n\n        $rootScope.$new = proto.$new;\n        return $rootScope;\n    }]);\n\n}]);\n\n\n"],"names":["APIconstructor","options","API","script","this","type","name","settings","current","sequence","_","forEach","sets","set","prototype","camelCase","add_set","extend","static","setName","addSettings","settingsObj","isPlainObject","addSequence","isArray","concat","addGlobal","obj","Error","merge","global","getGlobal","addCurrent","getCurrent","addScript","getScript","post","url","angular","injector","invoke","$http","shuffle","collection","setArr","list","targetSets","map","value","key","each","v","flatten","isString","push","apply","APIdecorator","constructor","save","globalMeta","window","piGlobal","$meta","meta","taskName","taskNumber","serial","arr","response","counter","Constructor","call","onPreTask","currentTask","$rootScope","beforeUnload","templateDefaultContext","managerSettings","error","reportNoConnection","message","document","createElement","className","innerHTML","body","insertBefore","firstChild","context","data","assign","number","taskURL","scriptUrl","templateUrl","last","sessionStatus","deactivate","$script","get","showFeedback","bind","showPanel","piTemplate","task","tasksData","content","$template","template","messageTemplateDebrief","messageTemplate","$mTurk","mturkUrl","isProduction","onPost","noop","every","prop","has","arguments","postRedirect","omit","_err","subtaskName","subtaskURL","posturl","path","params","method","form","setAttribute","hasOwnProperty","hiddenField","appendChild","submit","header","footer","messageTemplatePanel","defaults","pre","wrap","noFeedback","property","exclude","feedback","filter","hasProperty","isUndefined","notExcluded","indexOf","mapValues","reduce","result","log","console","glob","go","destination","properties","mixerSequence","where","prev","next","direction","curr","callback","createDB","db","Database","createColl","add","trialSets","stimulusSets","mediaSets","currentSequence","getSize","el","computedStyle","getComputedStyle","height","parse","offsetHeight","borderTopWidth","borderBottomWidth","width","offsetWidth","borderLeftWidth","borderRightWidth","num","parseFloat","adjust_canvas","canvas","resize","targetSize","getTargetSize","marginTop","style","fontSize","textSize","scrollTo","throttle","event","setTimeout","getProportions","proportions","docElement","documentElement","maxHeight","clientHeight","maxWidth","Math","min","clientWidth","parentNode","canvasContructor","offArr","rule","on","element","fn","old","css","str","replace","g","toUpperCase","setupCanvas","canvasSettings","$resize","stream","isElement","classList","off","applyCanvasStyles","background","canvasBackground","borderColor","borderWidth","pick","adjustCanvas","addEventListener","end","remove","removeEventListener","setup","canvasSetup","setupVars","logs","load","src","promise","srcStack","Promise","resolve","reject","requirejs","onload","onerror","then","stackDone","loader","defStack","buildUrl","baseUrl","test","isObject","length","preloadScript","getScriptMedia","media","image","preloader","getStimMedia","getTrialMedia","notMixer","flattenDeep","notUndefined","trial","input","stimuli","layout","stim","mixer","val","preloadPhase","emptyCanvas","removeChild","scriptPreloader","base_url","progress","barStyle","getElementsByClassName","fastdom","mutate","all","mouseEvents","eventName","inputObj","$listener","e","target","getAttribute","stimHandle","keypressed","keypressListener","keyDownArr","which","preventDefault","Array","charCodeAt","keyup","simpleRandomize","floor","random","isFunction","isNumber","max","timeout","timeoutID","duration","randomize","clearTimeout","inputBinder","css2","css1","position","left","opacity","right","top","bottom","createListener","getListener","isStream","logObj","handle","binder","toString","JSON","stringify","_state","interfaceFn","$events","listenerStack","baseTime","timestamp","Date","latency","now","i","splice","removeAll","resetTimer","getMedia","html","inlineTemplate","word","textContent","jquery","setSize","stimulus","size","font_size","isSet","setPlace","isNumeric","isNaN","location","undefined","YCLASS","XCLASS","attr","fixIE","xCenter","contains","yCenter","measure","transform","marginLeft","Stimulus","self","source","init","show","hide","mediaName","destroy","setupElement","isLayout","documentMode","alias","inherit","fullpath","stimCollection","toStim","_source","ready","getStimlist","getMedialist","nolog","index","getConditonFn","condition","conditionHash","begin","inputData","inputEquals","inputEqualsTrial","inputEqualsStim","searchObj","hasData","trialEquals","inputEqualsGlobal","globalEquals","globalEqualsTrial","globalProp","trialProp","globalEqualsStim","stimProp","inputEqualsCurrent","currentEquals","currentEqualsTrial","currentProp","currentEqualsStim","custom","stimulusCollection","some","conditionsEvaluate","conditions","getConditionFn","applyActions","actions","eventData","continueActions","action","actionFn","actionList","interactions","isDebug","DEBUG","interaction","conditionTrue","groupCollapsed","evaluate","activate","groupEnd","Trial","$logs","$end","_id","uniqueId","gid","_next","addTrialDetails","trialId","arrayWrap","nextTrial","goto","buildMedia","inflate","mediaData","mediaMeta","buildStim","skip","stimulusData","stimulusMeta","globalGetter","trialData","done","request","XMLHttpRequest","open","setRequestHeader","onreadystatechange","readyState","status","responseText","send","serialize","poster","serializedPost","newServelet","buildPost","buildPostOld","metaData","catch","cache","pulse","r","encodeURIComponent","join","createLogs","$sourceLogs","defaultLogMap","args","applyMap","logger","logMap","transformLogs","logStack","stimList","mediaList","log_serial","trial_id","responseHandle","playerPhase","sink","play","$source","$trial","oldTrial","start","activateTrial","composeLoggerSettings","onDone","onEnd","loggerSettings","playSink","playPhase","buildBaseUrl","isDev","version","$canvas","$el","req","pipSink","newVersion","append","contents","time","config","paths","text","underscore","backbone","deps","addClass","removeClass","main","deferred","loggerProvider","$q","piConsole","Logger","dfltLogFn","pending","sent","suppress","a","logFn","isEmpty","debug","logCounter","success","def","sendData","defer","suppressPulse","getCount","setSettings","consoleProvider","consolePrototype","Console","tags","force","$console","create","consolePrototypeProvider","$log","createLog","level","shouldLog","hideConsole","$emit","LOGFUNCTIONS","targetLevel","targetTags","LEVELS","intersection","directive","link","scope","reverse","$on","pretty","toJson","mixProvider","mix","mixerName","mixers","remix","$parsed","deepMixer","wrapper","seq","weightedChoose","n","total_weight","weights","cur","random_num","weight_sum","toFixed","generate","repeat","times","clone","choose","take","weightedRandom","mixerSequentialProvider","mixerSequential","depth","mixed","shift","mixerRecursiveProvider","mixerRecursive","mixerSequenceProvider","MixerSequence","stack","pointer","proceed","subSequence","isNext","pop","outOf","memo","sub","dotNotation","chain","split","mixerDotNotationProvider","mixerConditionProvider","getOperator","operator","operatorHash","eq","isTruthy","forceNumeric","cb","gt","greaterThan","gte","greaterThanOrEqual","equals","in","rearg","exactly","compare","to","info","negate","mixerBranchingDecorator","mixerDefaultContext","branch","elseData","multiBranch","row","find","branches","evaluateProvider","cond","and","nand","or","nor","templateFilter","defaultContext","templateObjProvider","expand","ctx","RandomizerProvider","randomizeInt","randomizeRange","Collection","Randomizer","_cache","exRandom","sequential","seed","coll","first","range","collectionService","previous","at","slice","unshift","inflateProvider","query","customize","randomizer","recursive","parent","child","cloneDeep","inheritObj","childProp","parentProp","queryProvider","q","namespace","DatabaseProvider","Store","templateObj","DatabaseSequence","store","getColl","read","$inflated","reinflate","$templated","regenerateTemplate","err","onError","storeProvider","nameSpace","update","del","SequenceProvider","Sequence","questionsArr","page","questions","pagesData","pagesMeta","TaskProvider","QuestSequence","dfltQuestLogger","Task","$logSource","quest","$logged","nextObj","parseProvider","pagesSets","questionsSets","pageData","declined","responseObj","stopperProvider","Stopper","startTime","timerController","$timeout","TimerStopper","tick","$scope","ctrl","stopper","timeLeft","targetTime","removeOnEnd","currentTime","milisToTime","timeoutId","secs","divisor_for_minutes","divisor_for_seconds","hours","minutes","seconds","ceil","milis","getScope","stop","cancel","timerDirective","$compile","controller","priority","$element","$attr","$timerElement","localScope","$new","prepend","zeroPad","preload","preloadFn","images","preloadImg","img","Image","modalConstructor","$rootElement","$document","modalCleanup","$destroy","$backDrop","close","button","$digest","questController","$parse","guid","dflt","NaN","registerModel","ngModel","correctValidator","correctValue","isEqual","$setValidity","ngModelGet","dfltValue","model","$parent","warn","$modelValue","$viewValue","$formatters","modelValue","$parsers","viewValue","pristineLatency","$watch","newValue","oldValue","$setViewValue","onChange","onDestroy","correct","onCreate","submitLatency","onSubmit","onDecline","onTimeout","guidFactory","id","piQuestCtrl","QuestTask","piModal","timerSetup","timerCtrl","timerProceed","$context","$animate","$injector","terminal","require","parentElement","ctrls","cleanupLastPage","previousElement","currentScope","currentElement","leave","newPage","newScope","tempElm","jqLite","addAnimations","animate","enter","animationsStr","animations","animation","piTimer","piqPageCtrl","harvest","lognow","skipValidation","valid","pageForm","$valid","submitAttempt","$broadcast","decline","$event","hasClass","timer","submitOnEnd","$window","$ctrl","pageValidation","capitaliseFirstLetter","string","charAt","questElement","children","attrName","PREFIX","kebabCase","textDirective","textTemplate","textareaTemplate","controllerAs","maxlengthLimit","limit","maxlength","autoSubmit","$apply","selectMixerProvider","answersArr","answers","answer","numericValues","order","chooseText","buttonConfig","requiredValidator","$isEmpty","required","buttons","listCss","listItemCss","listClass","listItemClass","lineHeight","minWidth","currentTarget","activeClass","chosen","pluck","useNative","p","NativeCustomEvent","detail","foo","addEventEasy","capturing","addEventHard","attachEvent","removeEventEasy","removeEventHard","listener","unwrap","detachEvent","fabricateEvent","eventmap","customEvent","doc","createEvent","initEvent","createEventObject","makeClassicEvent","dispatchEvent","fireEvent","wrapperFactory","originalEvent","srcElement","returnValue","stopPropagation","cancelBubble","keyCode","hardCache","item","lookupClass","cached","lastIndex","RegExp","rmClass","trim","dragula","initialContainers","isContainer","drake","containers","o","events","op","touchy","grab","release","eventualMovements","startBecauseMouseMoved","movements","crossvent","preventGrabbed","_grabbed","_moveX","clientX","_moveY","clientY","whichMouseButton","metaKey","ctrlKey","canStart","isInput","focus","ignoreInputTextSelection","getCoord","elementFromPoint","grabbed","offset","getOffset","_item","_offsetX","_offsetY","classes","_copy","renderMirrorImage","drag","dragging","_mirror","getParent","invalid","moves","nextEl","isCopy","cloneNode","emit","_initialSibling","_currentSibling","drop","ungrab","dropTarget","findDropTarget","getElementBehindPoint","copySortSource","removeOnSpill","isInitialPlacement","cleanup","revert","reverts","revertOnSpill","initial","removeMirrorImage","rm","_renderTimer","_lastDropTarget","s","sibling","elementBehindCursor","immediate","getImmediateChild","reference","getReference","accepts","accepted","moved","x","y","changed","rect","getBoundingClientRect","getRectWidth","getRectHeight","mirrorContainer","after","horizontal","inside","len","outside","container","copy","always","never","emitter","canMove","navigator","pointerEnabled","mouseup","mousedown","mousemove","msPointerEnabled","touches","getScroll","scrollProp","offsetProp","point","state","tagName","isEditable","contentEditable","nextElementSibling","nextSibling","nodeType","manually","getEventHost","targetTouches","changedTouches","coord","host","missMap","pageX","pageY","domIndexOf","updateOrder","arraymove","fromIndex","toIndex","$watchCollection","setupWatch","$evalAsync","reset","sortBy","move","dragIndex","dropIndex","hasAttribute","dragElm","dropElm","gridDirective","allCss","objects","toArray","mapColumns","columns","objectify","mapRows","rows","zerofill","thru","identity","stem","w","an","abs","digitCount","LN10","zeroString","pow","substr","grid","responses","total","isFinite","gridRow","column","noReverse","reverseValue","newVal","$response","multiGrid","multiGridRow","isValid","mapDefault","pattern","sliderDirective","slider","sliderResponse","piPointerdownDirective","compile","DIRECTIVENAME","EVENTNAME","toRegexFilter","isRegExp","dfltUnits","unit","suffix","String","onKeydown","keyArr","keys","empty","provider","activators","$get","taskActivateProvider","activator","$inject","annotate","activateTask","proceedListener","one","skipListener","proceedObject","bustCache","canvasOff","oldTitle","title","managerCanvasService","fontColor","canvasConstructor","swapControler","swapDirective","transclude","$ctrls","$transclude","cleanupLast","opts","postLeave","props","refresh","spinner","toCsv","createMatrix","getLogs","results","harvestTask","getIndex","GetIndex","headers","maxLength","normalizeLength","hash","matrice","buildRow","normalize","quotableRgx","managerService","ManagerSequence","taskLoad","manager","stylesOff","preloadImages","injectStyle","rootElement","skinClass","skin","csv","managerToCsv","postCsv","loadOptions","setBaseUrl","sequenceProvider","tasksSets","managerLoadService","when","getScriptProvider","isText","getTime","taskLoadService","managerGetScript","promises","leaveEvent","confirmationMessage","beforeunloadFactory","proto","head","querySelector","styleSheet","cssText","createTextNode","managerControler","ManagerService","managerLoad","taskSource","$eval","substring","lastIndexOf","getPath","locals","prevTask","$qSequence","swap","loading","prms","thisCtrl","piManager","ev","piManagerTask","piLinkDirective","managerBeforeUnload","topdx","raf","requestAnimationFrame","rafCancel","cancelAnimationFrame","deltaTime","proportion","cancelId","canceled","bootstrap","app","baseCompareAscending","other","valIsNull","valIsUndef","valIsReflexive","othIsNull","othIsUndef","othIsReflexive","baseFindIndex","array","predicate","fromRight","baseIndexOf","indexOfNaN","baseIsFunction","baseToString","charsLeftIndex","chars","charsRightIndex","compareAscending","object","criteria","compareMultiple","orders","objCriteria","othCriteria","ordersLength","deburrLetter","letter","deburredLetters","escapeHtmlChar","chr","htmlEscapes","escapeRegExpChar","leadingChar","whitespaceChar","regexpEscapes","stringEscapes","escapeStringChar","isObjectLike","isSpace","charCode","replaceHolders","placeholder","resIndex","PLACEHOLDER","sortedUniq","iteratee","seen","computed","trimmedLeftIndex","trimmedRightIndex","unescapeHtmlChar","htmlUnescapes","runInContext","lodash","LazyWrapper","LodashWrapper","wrapperClone","baseLodash","chainAll","__wrapped__","__actions__","__chain__","__dir__","__filtered__","__iteratees__","__takeCount__","POSITIVE_INFINITY","__views__","MapCache","__data__","SetCache","values","nativeCreate","Set","cacheIndexOf","arrayConcat","othIndex","othLength","arrayCopy","arrayEach","arrayEvery","arrayExtremum","comparator","exValue","arrayFilter","arrayMap","arrayPush","arrayReduce","accumulator","initFromArray","arraySome","arraySum","assignOwnDefaults","objectValue","sourceValue","assignWith","customizer","baseAssign","baseCopy","baseAt","isNil","isArr","isArrayLike","propsLength","isIndex","baseCallback","func","thisArg","argCount","bindCallback","baseMatches","baseMatchesProperty","baseClone","isDeep","stackA","stackB","initCloneArray","tag","objToString","isFunc","funcTag","objectTag","argsTag","cloneableTags","initCloneByTag","initCloneObject","baseForOwn","subValue","baseDelay","wait","TypeError","FUNC_ERROR_TEXT","baseDifference","getIndexOf","isCommon","LARGE_ARRAY_SIZE","createCache","valuesLength","outer","valuesIndex","baseEvery","baseEach","baseExtremum","baseFill","baseFilter","baseFind","eachFunc","retKey","baseFlatten","isStrict","isArguments","baseForIn","baseFor","keysIn","baseForOwnRight","baseForRight","baseFunctions","baseGet","pathKey","toObject","baseIsEqual","isLoose","baseIsEqualDeep","equalFunc","objIsArr","othIsArr","objTag","arrayTag","othTag","isTypedArray","objIsObj","othIsObj","isSameTag","equalByTag","objIsWrapped","othIsWrapped","equalArrays","equalObjects","baseIsMatch","matchData","noCustomizer","objValue","srcValue","baseMap","getMatchData","isKey","isStrictComparable","toPath","baseSlice","baseMerge","isSrcArr","baseMergeDeep","mergeFunc","toPlainObject","baseProperty","basePropertyDeep","basePullAt","indexes","baseRandom","nativeFloor","nativeRandom","baseReduce","initFromCollection","baseSome","baseSortBy","comparer","sort","baseSortByOrder","iteratees","getCallback","baseSum","baseUniq","isLarge","seenIndex","baseValues","baseWhile","isDrop","baseWrapperValue","binaryIndex","retHighest","low","high","HALF_MAX_ARRAY_LENGTH","mid","binaryIndexBy","valIsNaN","isDef","isReflexive","setLow","nativeMin","MAX_ARRAY_INDEX","bufferClone","buffer","ArrayBuffer","byteLength","Uint8Array","composeArgs","partials","holders","holdersLength","argsIndex","argsLength","nativeMax","leftIndex","leftLength","composeArgsRight","holdersIndex","rightIndex","rightLength","createAggregator","setter","initializer","createAssigner","assigner","restParam","sources","guard","isIterateeCall","createBaseEach","getLength","isLength","iterable","createBaseFor","keysFunc","createBindWrapper","root","Ctor","createCtorWrapper","createCompounder","words","deburr","thisBinding","baseCreate","createCurry","flag","curryFunc","arity","createWrapper","createDefaults","createExtremum","toIterable","createFind","createFindIndex","createFindKey","objectFunc","createFlow","funcs","getFuncName","funcName","getData","isLaziable","ARY_FLAG","CURRY_FLAG","PARTIAL_FLAG","REARG_FLAG","plant","createForEach","arrayFunc","createForIn","createForOwn","createObjectMapper","isMapKeys","mapped","createPadDir","createPadding","createPartial","partialFunc","createReduce","createHybridWrapper","bitmask","partialsRight","holdersRight","argPos","ary","isCurry","isCurryRight","argsHolders","newArgPos","newArity","PARTIAL_RIGHT_FLAG","isCurryBound","BIND_FLAG","BIND_KEY_FLAG","newData","setData","isBind","isBindKey","reorder","isAry","CURRY_BOUND_FLAG","CURRY_RIGHT_FLAG","strLength","nativeIsFinite","padLength","nativeCeil","createPartialWrapper","createRound","methodName","precision","createSortedIndex","mergeData","baseSetData","arrLength","arrValue","othValue","boolTag","dateTag","errorTag","numberTag","regexpTag","stringTag","objProps","objLength","skipCtor","objCtor","othCtor","realNames","otherFunc","pairs","getNative","isNative","getView","transforms","Object","arrayBufferTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","byteOffset","reFlags","exec","invokePath","reIsUint","MAX_SAFE_INTEGER","reIsPlainProp","reIsDeepProp","srcBitmask","newBitmask","isCombo","mergeDefaults","pickByArray","pickByCallback","oldArray","shimKeys","allowIndexes","rePropName","match","quote","reEscapeChar","dropRight","rest","uniq","isSorted","unzip","group","unzipWith","zipObject","interceptor","includes","sample","rand","before","temp","debounce","complete","isCalled","maxTimeoutId","trailingCall","lastCalled","delayed","remaining","stamp","maxDelayed","trailing","debounced","leading","maxWait","leadingCall","memoize","resolver","memoized","Cache","otherArgs","propertyIsEnumerable","isError","reIsNative","fnToString","reIsHostCtor","typedArrayTags","lt","functions","isProto","skipIndexes","reLatin1","reComboMark","reWords","matches","mixin","isObj","methodNames","contextProps","Function","Number","arrayProto","objectProto","stringProto","idCounter","oldDash","WeakMap","nativeIsArray","nativeKeys","nativeNow","nativeParseInt","parseInt","NEGATIVE_INFINITY","MAX_ARRAY_LENGTH","metaMap","support","templateSettings","escape","reEscape","reEvaluate","interpolate","reInterpolate","variable","imports","baseEachRight","count","HOT_SPAN","HOT_COUNT","difference","findIndex","findLastIndex","arrays","caches","pullAt","sortedIndex","sortedLastIndex","union","without","zip","zipWith","wrapperConcat","countBy","findLast","forEachRight","groupBy","indexBy","isProp","partition","reduceRight","sortByAll","bindAll","bindKey","curry","curryRight","delay","flow","flowRight","modArgs","partial","partialRight","defaultsDeep","findKey","findLastKey","forIn","forInRight","forOwn","forOwnRight","mapKeys","toLowerCase","padLeft","padRight","snakeCase","startCase","attempt","methodOf","round","chunk","compact","constant","dropRightWhile","dropWhile","fill","invert","multiValue","matchesProperty","once","propertyOf","pull","step","nested","sortByOrder","spread","takeRight","takeRightWhile","takeWhile","tap","valuesIn","xor","backflow","collect","compose","eachRight","methods","select","tail","unique","augend","addend","capitalize","endsWith","reHasUnescapedHtml","reUnescapedHtml","escapeRegExp","reHasRegExpChars","reRegExpChars","findWhere","defaultValue","inRange","isBoolean","isDate","isMatch","isNull","lte","noConflict","pad","radix","reHasHexPrefix","floating","noMin","noMax","startsWith","sum","otherOptions","isEscaping","isEvaluating","importsKeys","importsValues","reNoMatch","reDelimiters","reEsTemplate","sourceURL","templateCounter","escapeValue","interpolateValue","esTemplateValue","evaluateValue","reUnescapedString","reEmptyStringLeading","reEmptyStringMiddle","reEmptyStringTrailing","trimLeft","trimRight","trunc","DEFAULT_TRUNC_LENGTH","omission","DEFAULT_TRUNC_OMISSION","separator","search","newEnd","unescape","reHasEscapedHtml","reEscapedHtml","prefix","any","detect","foldl","foldr","include","inject","VERSION","filtered","isFilter","LAZY_MAP_FLAG","takeName","dropName","operationName","createCallback","checkIteratee","retUnwrapped","lodashFunc","isHybrid","isLazy","useLazy","onlyLazy","chainName","dir","isRight","view","iterLength","takeCount","iterIndex","LAZY_FILTER_FLAG","commit","wrapped","run","toJSON","valueOf","upper","lower","À","Á","Â","Ã","Ä","Å","à","á","â","ã","ä","å","Ç","ç","Ð","ð","È","É","Ê","Ë","è","é","ê","ë","Ì","Í","Î","Ï","ì","í","î","ï","Ñ","ñ","Ò","Ó","Ô","Õ","Ö","Ø","ò","ó","ô","õ","ö","ø","Ù","Ú","Û","Ü","ù","ú","û","ü","Ý","ý","ÿ","Æ","æ","Þ","þ","ß","&","<",">","\"","'","`","&amp;","&lt;","&gt;","&quot;","&#39;","&#96;","objectTypes","function","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","b","c","d","f","t","u","\\","\n","\r"," "," ","freeExports","exports","freeModule","module","freeGlobal","freeSelf","freeWindow","moduleExports","define","amd","PROGRESS_BAR","api","decorator","factory","addTrialSets","addTrialSet","addStimulusSets","addStimulusSet","addMediaSets","addMediaSet","table","vendors","vp","userAgent","lastTime","nextTime","PromisePolyfill","executor","handler","shouldAbsorb","execute","callAsync","resolvers","rejectors","instance","retry","executeOnce","rejectCurrent","runs","resolveCurrent","_instance","setImmediate","onFulfilled","onRejection","resolveNext","rejectNext","consume","race","require$$0","mixerDotNotationProvider$1","mixerConditionProvider$1","mixerBranchingDecorator$1","mixerSequenceProvider$1","templateObjProvider$1","storeProvider$1","queryProvider$1","inflateProvider$1","DatabaseRandomizer","databaseInflate","createStream","HALT","updateStream","initStream","derive","recover","parents","endStream","unregister","ap","defineProperties","unregisterStream","updateState","updateDependency","finalize","mustSync","active","combine","streams","initDependency","dep","notEnded","registerDependency","dependent","s1","s2","scan","reducer","newStream","scanMerge","tuples","tuple","idx","win","FastDom","reads","writes","scheduleFlush","scheduled","flush","runTasks","tasks","webkitRequestAnimationFrame","mozRequestAnimationFrame","msRequestAnimationFrame","clear","initialize","performance","showStim","hideStim","setStimAttr","setTrialAttr","setInput","trigger","removeInput","handleList","endTrial","immidiate","setGlobalAttr","cavnas","setVersion","ver","none","service","consoleDirective","consoleModule","module$3","randomizeModule","mixerEvaluateProvider","$provide","consoleProvider$3","directive$1","mixerModule","templateModule","collectionProvider","randomizerProvider","databaseProvider","databaseSequenceProvider","loggerModule","databaseModule","questSequenceProvider","questTaskProvider","createLogStream","nowFn","mozNow","webkitNow","msNow","oNow","timerStopper","module$11","timerNow","toggleEvent","attrs","buttonsCtrl","ngModelCtrl","$render","toggleClass","btnRadio","isActive","isDefined","uncheckable","getTrueValue","getCheckboxValue","btnCheckboxTrue","getFalseValue","btnCheckboxFalse","attributeValue","modalService","questController$1","minValidator","maxValidator","directive$6","directive$7","directive$8","si","process","nextTick","ticky","thing","evt","_once","et","atoa","emitterSnapshot","throws","listen","async","CustomEvent","initCustomEvent","bubbles","cancelable","Boolean","eventname","ron","addEvent","removeEvent","fabricate","setValue","percentage","steppedPercentage","steps","onHandleMousedown","mouseMove","fixEvent","basePercentage","basePosition","sliderHandleWidth","mouseUp","SLIDER_CHANGE_EVENT","pipWidth","labels","labelsWidth","showHandle","handleDisplay","highlightDisplay","highlight","highlightDirection","highlightStyle","display","handleStyle","onSliderMouseDown","sliderWidth","sliderPosition","getNumber","eventDoc","ownerDocument","scrollLeft","clientLeft","scrollTop","clientTop","timerModule","utilsModule","modalModule","piQuestDirective","piqPageDirective","wrapperDirective","textNumberDirective","dropdownDirective","selectOneDirective","selectMultiDirective","rankDirective","gridRowDirective","multiGridDirective","multiGridRowDirective","piPointerdown","$sceProvider","enabled","unvalid","postSubmit","dfltUnitsFilter","autoFocus","questDirectivesModule","questTaskModule","directive$10","messageDirective","messageDoneDirective","directive$12","taskDirective","activateProvider","activateQuest","activateMessage","activatePost","canceler","activateRedirect","href","activatePIP","activateTime","directive$13","piSwapDirective","module$18","piSpinnerDirective","chkevent","taskModule","canvasModule","helperDirectivesModule","managerSequence","managerGetScriptService","managerTaskLoadService","beforeUnloadFactory","managerDirective","managerTaskDirective","dropInAnimation","fadeAnimation","slideAnimation","consoleProvider$4","directive$16","submodules","questModule","messageModule","managerModule","animationModule","getPrototypeOf","__proto__","nextUid","$id","isolate","$root","$$asyncQueue","$$postDigestQueue","$$childScopeClass","$$childTail","$$childHead","$$nextSibling","$delegate","exception","cause","_errs","getElementById"],"mappings":"yHAiBA,SAASA,eAAeC,GAEpB,SAASC,IACL,IAAIC,EAASC,KAAKD,QACdE,KAAMJ,EAAQI,KACdC,KAAM,aAAeL,EAAQI,KAC7BE,YACAC,WACAC,aAGJL,KAAKG,SAAWJ,EAAOI,SAGvBG,OAAEC,QAAQV,EAAQW,KAAM,SAASC,GAC7BV,EAAOU,EAAM,aAsFrB,OAlFAH,OAAEC,QAAQV,EAAQW,KAAM,SAASC,GAC7BX,EAAIY,UAAUJ,OAAEK,UAAU,OAASF,EAAM,SAAWG,QAAQH,KAGhEH,OAAEO,OAAOf,EAAIY,UAAWb,EAAQiB,QAE5BC,QAAS,SAASb,GACdF,KAAKD,OAAOG,KAAOA,GAIvBc,YAAa,SAASd,EAAMe,GACxB,IAAId,EAWJ,OAPIG,OAAEY,cAAcD,IAChBd,EAAWH,KAAKG,SAASD,GAAQF,KAAKG,SAASD,OAC/CI,OAAEO,OAAOV,EAAUc,IAEnBjB,KAAKG,SAASD,GAAQe,EAGnBjB,MAGXmB,YAAa,SAASd,GAClB,IAAIN,EAASC,KAAKD,OAKlB,OAJAO,OAAEc,QAAQf,KAAcA,GAAYA,IAEpCN,EAAOM,SAAWN,EAAOM,SAASgB,OAAOhB,GAElCL,MAGXsB,UAAW,SAASC,GAChB,IAAKjB,OAAEY,cAAcK,GACjB,MAAM,IAAIC,MAAM,4BAEpB,OAAOlB,OAAEmB,MAAMC,SAAQH,IAG3BI,UAAW,WACP,OAAOD,UAGXE,WAAY,SAASL,GACjB,IAAKjB,OAAEY,cAAcK,GACjB,MAAM,IAAIC,MAAM,6BAEpB,OAAOlB,OAAEmB,MAAMzB,KAAKD,OAAOK,QAASmB,IAGxCM,WAAY,WACR,OAAO7B,KAAKD,OAAOK,SAIvB0B,UAAW,SAASP,GAChB,OAAOjB,OAAEmB,MAAMzB,KAAKD,OAAOwB,IAI/BQ,UAAW,WACP,OAAO/B,KAAKD,QAIhBiC,KAAM,SAASC,EAAKV,GAIhB,OAFgBW,QAAQC,UAAU,OAEjBC,QAAQ,QAAS,SAASC,GACvC,OAAOA,EAAML,KAAKC,EAAKV,OAI/Be,QAAS,SAASC,GACd,OAAOjC,OAAEgC,QAAQC,MAIlBzC,EASX,SAASc,QAAQX,GAoDb,OAnCA,SAAmBQ,EAAK+B,GAGpB,IACIC,EADAC,EAAa1C,KAAKD,OAAOE,EAAO,UAAYD,KAAKD,OAAOE,EAAO,YAG/DK,OAAEY,cAAcT,KAChBgC,EAAOnC,OAAEG,GAEJkC,IAAI,SAASC,EAAOC,GAGjB,OADAvC,OAAEwC,KAAKF,EAAO,SAASG,GAAGA,EAAEtC,IAAMoC,IAC3BD,IAEVI,UACAJ,SAGLtC,OAAEc,QAAQX,KACVgC,EAAOhC,GAGPH,OAAE2C,SAASxC,KACXgC,EAAOnC,OAAEc,QAAQoB,GAAUA,GAAUA,GACrCC,EAAOnC,OAAEqC,IAAIF,EAAM,SAASG,GAExB,OADAA,EAAMnC,IAAMA,EACLmC,KAMfF,EAAWQ,KAAKC,MAAMT,EAAYD,IC1K1C,SAASW,aAAaC,GAClBA,EAAY3C,UAAU4C,KAAOA,KAGjC,SAASA,KAAK/B,GACV,IAAIxB,EAASC,KAAKD,OAClB,IAAKO,OAAEY,cAAcK,GACjB,MAAM,IAAIC,MAAM,mCAGpB,IAAI+B,EAAcC,OAAOC,UAAYD,OAAOC,SAASC,UAEjDC,GACAC,SAAU7D,EAAOG,KACjB2D,WAAY9D,EAAO+D,QAAU,GAG7BC,EAAMzD,OAAEqC,IAAIpB,EAAK,SAASqB,EAAOC,GACjC,OAAOvC,OAAEO,QACLX,KAAM2C,EACNmB,SAAUpB,EACVkB,SAAUG,SACXN,EAAMJ,KAGb,OAAOvD,KAAKgC,KAAK,oBAAqB+B,GCjB1C,SAASjE,MACLoE,YAAYC,KAAKnE,MACjBA,KAAKG,SAASiE,UAAYA,UAoB9B,SAASA,UAAUC,EAAahC,EAAOiC,EAAYC,EAAcC,EAAuBC,GAuEpF,SAASC,IACL,IAAIC,EAAqBN,EAAYM,mBACrC,GAAIA,EAAmB,CACnB,IAAIC,EAAUC,SAASC,cAAc,OACrCF,EAAQG,UAAY,gBACpBH,EAAQI,UAAYL,EACpBE,SAASI,KAAKC,aAAaN,EAASC,SAASI,KAAKE,YAGtD,MAAM,IAAI3D,MAAM,2BA/EpB,IAAIE,EAAS4C,EAAW5C,OACpB0D,KACAC,EAAO/E,OAAEgF,UAAW5D,EAAOgC,OAAQE,SAAUS,EAAYnE,MAAQ,eAAgB2D,WAAYQ,EAAYX,MAAM6B,OAAQC,QAAQnB,EAAYoB,WAAapB,EAAYqB,cA0CxK,GAvCIrB,EAAYsB,OACZN,EAAKO,cAAgB,IACrBrB,EAAasB,cAIO,SAApBxB,EAAYpE,MAAuC,OAApBoE,EAAYpE,OAC3CoE,EAAYyB,QAAQhC,OAASO,EAAYX,MAAM6B,OAC/CjF,OAAEG,IAAI4D,EAAa,+BAAgC/D,OAAEgF,UAAWD,EAAM/E,OAAEyF,IAAI1B,EAAa,qCACzF/D,OAAEG,IAAI4D,EAAa,gCAAiCK,IAIxDpE,OAAEO,OAAO2D,GACLwB,aAAc1F,OAAE2F,KAAKD,aAAa,KAAKtE,GACvCwE,UAAWA,YAGS,WAApB7B,EAAYpE,MAAqBoE,EAAY8B,aAC7C7F,OAAEgF,OAAOF,EAASZ,GACd9C,OAAQA,EACRtB,QAASsB,EAAOtB,QAChBgG,KAAM/B,EACNgC,UAAW/F,OAAEyF,IAAI1B,EAAY,aAKjCe,EAAQkB,QAAUjC,EAAYkC,UAAYjG,OAAEkG,SAASnC,EAAYkC,UAAvBjG,CAAkC8E,GAE9C,WAA1Bf,EAAY8B,YACZ9B,EAAYkC,UAAYjG,OAAEkG,SAASC,uBAAXnG,CAAmC8E,GAC3Df,EAAYkC,UAAYjG,OAAEkG,SAASnC,EAAYkC,UAAvBjG,CAAkC8E,IAE1Df,EAAYkC,UAAYjG,OAAEkG,SAASE,gBAAXpG,CAA4B8E,IAKxDf,EAAYsB,MAAQjE,EAAOiF,OAAO,CAClC,IAAIA,EAASjF,EAAOiF,OAChBC,EAAWD,EAAOE,aAAgB,4CAA8C,uDAChFC,EAASzC,EAAYrC,MAAQ1B,OAAEyG,KAGnC,IAAKzG,OAAE0G,OAAO,eAAe,QAAQ,YAAa,SAASC,GAAM,OAAO3G,OAAE4G,IAAIP,EAAQM,KAClF,MAAM,IAAIzF,MAAO,sEAGrB6C,EAAYrC,KAAO,WACf8E,EAAO3D,MAAMnD,KAAMmH,WACnBC,aAAaR,EAAStG,OAAE+G,KAAKV,EAAO,kBAI5C,GAAInD,OAAO8D,MAAQ9D,OAAO8D,KAAK3D,KAAK,CAChC,IAAIA,EAAOH,OAAO8D,KAAK3D,KACvBA,EAAK4D,YAAclD,EAAYnE,KAC/ByD,EAAK6D,WAAanD,EAAYoB,WAAapB,EAAYqB,YAG3D,IAAI+B,EAAUnH,OAAEyF,IAAItB,EAAiB,aAAc,uBAEnD,OAAOpC,EAAML,KAAKyF,EAASpC,GAAa,MAAEX,GAe9C,SAAS0C,aAAaM,EAAMC,EAAQC,GAChCA,EAASA,GAAU,OAInB,IAAIC,EAAOhD,SAASC,cAAc,QAClC+C,EAAKC,aAAa,SAAUF,GAC5BC,EAAKC,aAAa,SAAUJ,GAE5B,IAAI,IAAI7E,KAAO8E,EACX,GAAGA,EAAOI,eAAelF,GAAM,CAC3B,IAAImF,EAAcnD,SAASC,cAAc,SACzCkD,EAAYF,aAAa,OAAQ,UACjCE,EAAYF,aAAa,OAAQjF,GACjCmF,EAAYF,aAAa,QAASH,EAAO9E,IAEzCgF,EAAKI,YAAYD,GAIzBnD,SAASI,KAAKgD,YAAYJ,GAC1BA,EAAKK,SAGT,SAAShC,UAAUI,EAAS6B,EAAQC,GAChC,OAAO9H,OAAEkG,SAAS6B,qBAAX/H,EACHgG,QAASA,EACT6B,OAAQA,EACRC,OAAQA,IAIhB,SAASpC,aAAatE,EAAQ7B,GAa1B,GAZAS,OAAEY,cAAcrB,KAAaA,MAE7BS,OAAEgI,SAASzI,GACP0I,IAAK,MACLvG,KAAM,OACNwG,MAAM,EACNL,OAAQ,GACRM,WAAY,+BACZC,SAAU,WACVC,cAGCrI,OAAEc,QAAQvB,EAAQ8I,SAAY,MAAMnH,MAAM,0CAE/C,IAAIoH,EAAWtI,OAAEoB,GACZmH,OAAO,SAASzC,EAAKxC,GAClB,IAAIkF,EAAexI,OAAEY,cAAckF,KAAU9F,OAAEyI,YAAY3C,EAAKvG,EAAQ6I,WACpEM,GAAwD,IAAzC1I,OAAE2I,QAAQpJ,EAAQ8I,QAAQ/E,IAAmC,YAAbA,EACnE,OAAOkF,GAAeE,IAEzBE,UAAU,SAAS9C,GAChB,OAAOvG,EAAQ0I,IAAMnC,EAAKvG,EAAQ6I,UAAY7I,EAAQmC,OAEzDmH,OAAO,SAASC,EAAQR,GACrB,OAAOQ,EAASR,GAClB,KAAO/I,EAAQ4I,WAErB,OAAO5I,EAAQ2I,KAAOtC,UAAU0C,EAAS/I,EAAQsI,OAAOtI,EAAQuI,QAAUQ,EClL9E,SAASS,MAAOC,QAAQD,IAAIlG,MAAMmG,QAASnC,WCG3C,SAASzF,WACL,OAAO6H,KCCX,SAGSC,KAAGC,EAAaC,EAAYtE,GACjC,IAAIuE,EAAgB3J,KAAK2J,cAEzB,OAAQF,GACJ,IAAK,YAGL,IAAK,gBACDG,MAAM,OAAQF,EAAYtE,EAASuE,GACnC,MACJ,IAAK,UAED,MACJ,IAAK,QACD,GAAIA,EAAcE,KAAKzE,SAAkBuE,EAAcvJ,QAAQgF,IAC/D,MACJ,IAAK,OACD,GAAIuE,EAAcG,KAAK1E,SAAkBuE,EAAcvJ,QAAQgF,IAC/DuE,EAAcE,OACd,MACJ,IAAK,MACD,GAAIF,EAAcG,KAAK1E,SAAkBuE,EAAcvJ,QAAQgF,IAC/D,MACJ,IAAK,OACDuE,EAAcG,KAAK1E,GACnB,MACJ,QACI,MAAM,IAAI5D,MAAM,uBAAyBiI,EAAc,eAG/D,OAAOzJ,KAGX,SAAS4J,MAAMG,EAAWL,EAAYtE,EAAS/E,GAC3C,IAAI2J,EAEJ,GACI3J,EAAS0J,KACTC,EAAO3J,EAASD,QAAQgF,SACnB4E,IAAS1J,SAAE2J,SAASP,EAAXpJ,CAAuB0J,EAAK3E,OC5ClD,SAMS6E,WAASnK,GACd,IAAIoK,EAAK,IAAIC,eASb,GARAD,EAAGE,WAAW,SACdF,EAAGE,WAAW,YACdF,EAAGE,WAAW,SAEdF,EAAGG,IAAI,QAASvK,EAAOwK,eACvBJ,EAAGG,IAAI,WAAYvK,EAAOyK,kBAC1BL,EAAGG,IAAI,QAASvK,EAAO0K,gBAElBnK,SAAEc,QAAQrB,EAAOM,UAAW,MAAM,IAAImB,MAAM,kCAEjD,IAAInB,EAAW8J,EAAG9J,SAAS,QAASN,EAAOM,UAG3C,OAFAA,EAASmJ,GAAKA,KACdW,EAAGO,gBAAkBrK,EACd8J,ECvBX,SAASQ,UAAQC,GACb,IAAIC,EAAgBrH,OAAOsH,iBAAiBF,GAC5C,OACIG,OAAYC,QAAMJ,EAAGK,cAAgBD,QAAMH,EAAcK,gBAAkBF,QAAMH,EAAcM,mBAC/FC,MAAWJ,QAAMJ,EAAGS,aAAeL,QAAMH,EAAcS,iBAAmBN,QAAMH,EAAcU,mBAItG,SAASP,QAAMQ,GAAM,OAAOC,WAAWD,EAAK,KAAO,ECAnD,SAASE,cAAcC,EAAQxL,GAU3B,SAASyL,IACL,IAAIC,EAAaC,cAAc3L,EAAUwL,GAIrCd,EAAgBrH,OAAOsH,iBAAiBa,GAC5CE,EAAWd,QAAUC,MAAMH,EAAcK,gBAAkBF,MAAMH,EAAcM,mBAAqBH,MAAMH,EAAckB,WACxHF,EAAWT,OAASJ,MAAMH,EAAcS,iBAAmBN,MAAMH,EAAcU,kBAG/EI,EAAOK,MAAMZ,MAAQS,EAAWT,MAAQ,KACxCO,EAAOK,MAAMjB,OAASc,EAAWd,OAAS,KAC1CY,EAAOK,MAAMC,SAAWJ,EAAWd,QAAQ5K,EAAS+L,UAAY,GAAG,IAAM,KAGzE1I,OAAO2I,SAAS,EAAG,GAvBvB,OAAO7L,SAAE8L,SAET,SAAuBC,GAED,qBAAdA,EAAMpM,KAA6BqM,WAAWV,EAAQ,KACrDA,KALwB,IA2BrC,SAASW,eAAepM,GAEpB,GAAIG,SAAEY,cAAcf,EAASqM,aAAc,CACvC,GAA2C,iBAAhCrM,EAASqM,YAAYzB,QAA6D,iBAA/B5K,EAASqM,YAAYpB,MAC/E,MAAM,IAAI5J,MAAM,iFAEpB,OAAOrB,EAASqM,YAAYzB,OAAO5K,EAASqM,YAAYpB,MAE5D,OAAOjL,EAASqM,aAAe,GAGnC,SAASV,cAAc3L,EAAUwL,GAE7B,IAAIa,EAAcD,eAAepM,GAIjC,GAAIA,EAASiL,MAAO,OAChBA,MAAOjL,EAASiL,MAChBL,OAAQ5K,EAASiL,MAAMoB,GAM3B,IAAIC,EAAajJ,OAAOqB,SAAS6H,gBAE7BC,EAAYF,EAAWG,aACvBC,EAAWC,KAAKC,IAAI5M,EAAS0M,SAAUJ,EAAWO,YAAarC,UAAQgB,EAAOsB,YAAY7B,OAG9F,OAAIuB,EAAYH,EAAcK,GAAmB9B,OAAQ8B,EAASL,EAAapB,MAAOyB,IACxE9B,OAAQ4B,EAAWvB,MAAOuB,EAAUH,GAGtD,SAASxB,MAAMQ,GAAM,OAAOC,WAAWD,EAAK,KAAO,ECnDnD,SAAS0B,iBAAiBvK,EAAKxC,GAC3B,IAAIgN,EAEJ,IAAK7M,SAAEY,cAAcyB,GAAM,MAAM,IAAInB,MAAM,oEAI3C,GAAIlB,SAAEyI,YAAY5I,GAAW,OAAOG,SAAEyG,KACtC,IAAKzG,SAAEY,cAAcf,GAAW,MAAM,IAAIqB,MAAM,uDAShD,OANA2L,EAAS7M,SAAEqC,IAAIxC,EAAU,SAASyC,EAAMC,GACpC,IAAIuK,EAAOzK,EAAIE,GACf,GAAIuK,EAAM,OAAOC,GAAGD,EAAKE,QAASF,EAAK1E,SAAU9F,GACjD,MAAM,IAAIpB,MAAM,UAAWqB,EAAK,qCAG7B,WACHvC,SAAEC,QAAQ4M,EAAQ,SAASI,GAAIA,EAAGpJ,UAI1C,SAASkJ,GAAGzC,EAAIlC,EAAU9F,GACtB,IAAI4K,EAAM5C,EAAGoB,MAAMtD,GAEnB,OADAkC,EAAGoB,MAAMtD,GAAY9F,EACd,WAAWgI,EAAGoB,MAAMtD,GAAY8E,GCvC3C,SAASC,IAAI7C,EAAIrJ,GACb,IAAIyK,EAAQpB,EAAGoB,MAEf,GAAKzK,EAEL,IAAK,IAAIsB,KAAOtB,EAAKyK,EAErB,SAAmB0B,GACf,OAAQA,EAAIC,QAAQ,YAAa,SAAUC,GAAK,OAAOA,EAAE,GAAGC,gBAHrClN,CAAUkC,IAAQtB,EAAIsB,GCPrD,SAASiL,YAAYnC,EAAQoC,GACzBA,IAAmBA,MACnB,IAAIC,EAAUC,SAEd,IAAK3N,SAAE4N,UAAUvC,GAAS,MAAM,IAAInK,MAAM,2CAE1CmK,EAAOwC,UAAU7D,IAAI,gBAGrB,IAOI8D,EAAMC,kBANNC,YAAiBhB,QAASzI,SAASI,KAAMyD,SAAU,mBACnD6F,kBAAoBjB,QAAS3B,EAAQjD,SAAS,mBAC9C8F,aAAiBlB,QAAS3B,EAAQjD,SAAS,eAC3C+F,aAAiBnB,QAAS3B,EAAQjD,SAAS,gBAGdpI,SAAEoO,KAAKX,GAAgB,aAAa,mBAAmB,cAAc,iBAqBtG,OAnBAA,EAAeN,KAAOA,MAAI9B,EAAQoC,EAAeN,KAGjDO,EAAQrL,IAAIgM,cAAahD,EAAQoC,IACjCC,MAEAxK,OAAOoL,iBAAiB,oBAAqBZ,GAC7CxK,OAAOoL,iBAAiB,SAAUZ,GAElCA,EAAQa,IACHlM,IAAI,WAAWgJ,EAAOwC,UAAUW,OAAO,kBACvCnM,IAAI,WACDa,OAAOuL,oBAAoB,oBAAoBf,GAC/CxK,OAAOuL,oBAAoB,SAAUf,KAExCrL,IAAIyL,GAIFJ,ECtCX,SAASgB,QAAMrD,EAAQ5L,GACnB,IAAIiO,EAAUiB,YAAYtD,EAAQrL,SAAEyF,IAAIhG,EAAQ,uBAC5CoK,EAAKD,WAASnK,GAGlB,OAFAmP,UAAUnP,IAGNoK,GAAGA,EACH6D,QAAQA,EACRrC,OAAQA,EACR5L,OAAQA,EACRI,SAAUJ,EAAOI,cAIzB,SAAS+O,UAAUnP,GAEf,IAAIwJ,EAAO7H,SAAOA,YACdxB,EAAOH,EAAOG,MAAQ,uBACtBE,EAAUL,EAAOK,QAAUL,EAAOK,WAEtCA,EAAQ+O,OAAS/O,EAAQ+O,SACzB5F,EAAKrJ,GAAQqJ,EAAKnJ,QAAUA,ECFhC,SAASgP,KAAKC,EAAKpP,GACf,IAAIqP,EAGJ,GAFArP,EAAOA,GAAQ,SAEgB,IAA3BsP,SAAStG,QAAQoG,GAAa,OAAO,EAGzC,OAAQpP,GACJ,IAAK,WACDqP,EAAU,IAAIE,QAAQ,SAASC,EAASC,GAEpCC,WAAW,QAAUN,GAAMI,EAAS,WAChCC,EAAO,IAAIlO,MAAM,uBAAyB6N,QAGlD,MACJ,IAAK,QAEL,QACIC,EAAU,IAAIE,QAAQ,SAASC,EAASC,GACpC,IAAI9E,EAAK/F,SAASC,cAAc,OAChC8F,EAAGgF,OAAS,WAAWH,EAAQ7E,IAC/BA,EAAGiF,QAAU,WAAWH,EAAO,IAAIlO,MAAM,oBAAsBoJ,EAAGyE,OAClEzE,EAAGyE,IAAMA,IAgBrB,OAVAC,EACKQ,KAAK,WAAWC,cAChBD,KAAK,WACFE,OAAOJ,QAAUI,OAAOJ,WAIhCK,SAAS/M,KAAKoM,GACdC,SAASrM,KAAKmM,GAEPC,ECnDX,SAAwBY,SAASC,EAASlO,EAAKhC,GAE3C,MAAY,SAARA,GAAmB,cAAcmQ,KAAKnO,GAAaA,GAGnD3B,SAAE+P,SAASF,KAAUA,EAAUA,EAAQlQ,IAGtCkQ,EACiC,KAA7BA,EAAQA,EAAQG,OAAO,KAAWH,GAAW,KADxCA,EAAU,GAGjBA,EAAUlO,GCrBrB,SAMSsO,cAAcxQ,EAAQoQ,GAE3B,OADAK,eAAezQ,GAAQQ,QAGvB,SAAmBkQ,GACVnQ,SAAEyI,YAAY0H,EAAMC,QAAQC,OAAUvB,KAAKc,SAASC,EAASM,EAAMC,MAAO,SAAS,SACnFpQ,SAAEyI,YAAY0H,EAAMjK,WAAWmK,OAAUvB,KAAKc,SAASC,EAASM,EAAMjK,SAAS,YAAY,cAJ7FmK,OAWX,SAAgBH,eAAezQ,GAC3B,IAAI0K,EAAY1K,EAAO0K,UACnBD,EAAelK,SAAEqC,IAAI5C,EAAOyK,aAAcoG,cAC1CrG,EAAYjK,SAAEqC,IAAI5C,EAAOwK,UAAWsG,eACpCxQ,EAAWC,SAAEuI,OAAO9I,EAAOM,SAASyQ,UAAUnO,IAAIkO,eAEtD,OAAOvQ,SAAEyQ,aAAatG,EAAWD,EAAcD,EAAWlK,IAAWwI,OAAOmI,cAGhF,SAASH,cAAcI,GACnB,OACI3Q,SAAEqC,IAAIsO,EAAMC,MAAO,SAASA,GAAQ,OAAOA,EAAM5D,UACjDhN,SAAEqC,IAAIsO,EAAME,QAASP,cACrBtQ,SAAEqC,IAAIsO,EAAMG,OAAQR,eAI5B,SAASA,aAAaS,GAAO,OAAOA,EAAKZ,MACzC,SAASK,SAASG,GAAQ,OAAQA,EAAMK,MACxC,SAASN,aAAaO,GAAM,OAAQjR,SAAEyI,YAAYwI,GCrClD,SAASC,eAAa7F,EAAQ5L,GAoB1B,SAAS0R,IACL,KAAO9F,EAAOxG,YAAYwG,EAAO+F,YAAY/F,EAAOxG,YApBxD,IAAIwL,EAAYgB,cAAgB5R,EAAQA,EAAO6R,UAE/C,GAA4B,GAAxBjB,EAAUkB,WAAiB,OAAOrC,QAAQC,UAAUK,KAAK2B,GAE7D9F,EAAO3G,UAAY,2EAEnB,IAAI8M,EAAWnG,EAAOoG,uBAAuB,sBAAsB,GAAG/F,MAQtE,OAPA8F,EAAS1G,MAAQuF,EAAUkB,WAAa,IACxClB,EAAUf,OAAS,WACfoC,QAAQC,OAAO,WACXH,EAAS1G,MAA6B,IAArBuF,EAAUkB,WAAiB,OAI7ClB,EAAUuB,MACZpC,KAAK2B,GAAoB,MAAE,SAASpC,GACjC,MAAM,IAAI7N,MAAM,2IAA6I6N,EAAK,OChB9K,SAAS8C,cAAYC,EAAUC,EAAU1G,GACrC,IAAI2G,EAAYrE,SACZX,EAAU+E,EAAS/E,QAYvB,OAVIA,IACAG,MAAIH,EAAS+E,EAAS5E,KACtBuE,QAAQC,OAAO,WACXtG,EAAO1D,YAAYqF,MAI3B3B,EAAOiD,iBAAiBwD,EAKxB,SAAuBG,GACnB,IAAIC,EAASD,EAAEC,OACf,OAAIlF,GAAWkF,IAAWlF,EAAgBgF,EAAUC,GAC/CjF,GAAWkF,EAAOC,aAAa,iBAAmBJ,EAASK,gBAAhE,EAAmFJ,EAAUC,KANjGD,EAAUzD,IAAIlM,IAUd,WACQ2K,GAAS3B,EAAO+F,YAAYpE,GAChC3B,EAAOoD,oBAAoBqD,EAAWE,KAXnCA,ECJX,SAASK,aAAWN,GAgBhB,SAASO,EAAiBL,GAClBM,WAAWN,EAAEO,SAAwC,IAA7BN,EAAOvJ,QAAQsJ,EAAEO,SAC7CP,EAAEQ,iBACFF,WAAWN,EAAEO,QAAS,EACtBR,EAAUC,IAnBd,IAAID,EAAYrE,SAMZuE,GAHOQ,MAAM5R,QAAQiR,EAASxP,KAAOwP,EAASxP,KAAOwP,EAASxP,MAGhDF,IAAI,SAASC,GAC3B,MAAuB,iBAATA,EAAoBA,EAAMiL,cAAcoF,WAAW,GAAKrQ,IAM1E,OAHAiC,SAAS+J,iBAAiB,UAAWgE,GAErCN,EAAUzD,IAAIlM,IAUd,WACIkC,SAASkK,oBAAoB,UAAW6D,KAVrCN,EC3BX,SAASY,QAAMb,GACX,IAAIC,EAAYrE,SAKZuE,GAHOQ,MAAM5R,QAAQiR,EAASxP,KAAOwP,EAASxP,KAAOwP,EAASxP,MAGhDF,IAAI,SAASC,GAC3B,MAAuB,iBAATA,EAAoBA,EAAMiL,cAAcoF,WAAW,GAAKrQ,IAM1E,OAHAiC,SAAS+J,iBAAiB,QAK1B,SAA0B2D,GACtB,IAAiC,IAA7BC,EAAOvJ,QAAQsJ,EAAEO,OAErB,OADAP,EAAEQ,iBACKT,EAAUC,KANrBD,EAAUzD,IAAIlM,IASd,WACIkC,SAASkK,oBAAoB,QAASuD,KATnCA,ECTX,SAISa,gBAAgBzJ,EAAYtE,GAEjC,GAAI9E,SAAEc,QAAQsI,GAEV,OAAOA,EADKoD,KAAKsG,MAAMtG,KAAKuG,SAAS3J,EAAW4G,SAIpD,GAAIhQ,SAAEgT,WAAW5J,GACb,OAAOA,EAAWvF,KAAKiB,GAI3B,GAAI9E,SAAEY,cAAcwI,GAAa,CAC7B,IAAKpJ,SAAEiT,SAAS7J,EAAWqD,OAASzM,SAAEiT,SAAS7J,EAAW8J,MAAQ9J,EAAWqD,IAAMrD,EAAW8J,IAC1F,MAAM,IAAIhS,MAAM,oGAEpB,OAAOkI,EAAWqD,KAAOrD,EAAW8J,IAAM9J,EAAWqD,KAAOD,KAAKuG,SAIrE,OAAO3J,EC1BX,SAAS+J,UAAQpB,GACb,IACIqB,EADApB,EAAYrE,SAEZ0F,EAAWC,gBAAUvB,EAASsB,WAAa,EAO/C,OALArB,EAAUzD,IAAIlM,IAOd,WACIkR,aAAaH,KANbC,EAAUrH,WAAWgG,EAAUrM,KAAK,SAAW0N,GAC9CrB,MAEEA,ECDX,SAASwB,YAAYzB,EAAU1G,GAqF3B,SAAS7G,EAAciP,EAAMC,GACzB,IAAIpJ,EAAK/F,SAASC,cAAc,OAGhC,OAFA2I,MAAI7C,EAAIoJ,GACRvG,MAAI7C,EAAImJ,GACDnJ,EAxFX,IAAIyC,EAAKgF,EAAShF,GAElB,OAAQA,GAEJ,IAAK,aAAe,OAAOsF,aAAWN,GAEtC,IAAK,QAAW,OAAOa,QAAMb,GAE7B,IAAK,QACL,IAAK,YACD,OAAOF,cAAY,YAAaE,EAAU1G,GAE9C,IAAK,UAAgB,OAAOwG,cAAY,UAAWE,EAAU1G,GAE7D,IAAK,aAAe,OAAOwG,cAAY,aAAcE,EAAU1G,GAE/D,IAAK,aAAe,OAAOwG,cAAY,aAAcE,EAAU1G,GAE/D,IAAK,UAAa,OAAO8H,UAAQpB,GAMjC,IAAK,QAAU,OAAOM,aAAWrS,SAAEgF,QAAQzC,IAAI,IAAIwP,IAEnD,IAAK,QAAU,OAAOM,aAAWrS,SAAEgF,QAAQzC,IAAI,IAAIwP,IAEnD,IAAK,MAAY,OAAOM,aAAWrS,SAAEgF,QAAQzC,IAAI,IAAIwP,IAErD,IAAK,YAUD,OATAA,EAAS/E,QAAUxI,EAAcuN,EAAS5E,KACtCwG,SAAU,WACVC,KAAM,EACN9I,MAAO,MACPL,OAAQ,OACRuD,WAAY,UACZ6F,QAAS,KAGNhC,cAAY,YAAaE,GAEpC,IAAK,aAUD,OATAA,EAAS/E,QAAUxI,EAAcuN,EAAS5E,KACtCwG,SAAU,WACVG,MAAO,EACPhJ,MAAO,MACPL,OAAQ,OACRuD,WAAY,UACZ6F,QAAS,KAGNhC,cAAY,YAAaE,GAEpC,IAAK,WAUD,OATAA,EAAS/E,QAAUxI,EAAcuN,EAAS5E,KACtCwG,SAAU,WACVI,IAAK,EACLjJ,MAAO,OACPL,OAAQ,MACRuD,WAAY,UACZ6F,QAAS,KAGNhC,cAAY,YAAaE,GAEpC,IAAK,cAUD,OATAA,EAAS/E,QAAUxI,EAAcuN,EAAS5E,KACtCwG,SAAU,WACVK,OAAQ,EACRlJ,MAAO,OACPL,OAAQ,MACRuD,WAAY,UACZ6F,QAAS,KAGNhC,cAAY,YAAaE,GAEpC,QACI,MAAM,IAAI7Q,MAAM,iEAAmE6L,ICxF/F,SAASkH,iBAAelC,EAAS1G,GAC7B,IAAI2G,EAAYkC,YAAYnC,EAAU1G,GAEtC,IAAK8I,SAASnC,GAAY,MAAM,IAAI9Q,MAAM,8CAAgDkT,OAAOrC,IAGjG,MAFI,WAAYA,IAAUC,EAAUqC,OAAStC,EAASsC,QAE/CrC,EAGX,SAASkC,YAAYnC,EAAU1G,GAC3B,IAAI2G,EAEJ,GAAIhS,SAAEgT,WAAWjB,GAAW,OAAOA,EAASA,EAAU1G,EAAQsC,QAE9D,GAAI3N,SAAEY,cAAcmR,GAAW,CAC3B,GAAI/R,SAAE2C,SAASoP,EAAShF,IAAK,OAAOuH,YAAOvC,EAAS1G,EAAOsC,QAEvD3N,SAAEgT,WAAWjB,EAAShF,MAAMiF,EAAYD,EAAShF,GAAGgF,EAAS1G,EAAOsC,SACpE3N,SAAEgT,WAAWjB,EAASjE,MAAMkE,EAAUzD,IAAIlM,IAAI0P,EAASjE,KAG/D,MAAM,IAAI5M,MAAM,kFAGpB,SAASkT,OAAOnT,GACZ,OAAOjB,SAAEgT,WAAW/R,GAAOA,EAAIsT,WAAaC,KAAKC,UAAUxT,GAI/D,SAASkT,SAASxG,GAAS,OAAOA,EAAO+G,OC7BzC,SAASC,YAAYC,EAASvJ,GAC1B,IAAIwJ,KACAC,EAAW,EAEf,OAAS9K,IAET,SAAa+H,GACT,IAAKA,EAAU,MAAM,IAAI7Q,MAAM,uDAC/B,IAAI8Q,EAAYiC,iBAAelC,EAAU1G,GACzC2G,EAAU3P,IAGV,SAAoB0J,GAChB,OACIsI,OAAcrC,EAAUqC,OACxBtI,MAAcA,EACdgJ,WAAa,IAAIC,KACjBC,QAAWC,MAAQJ,KARDzS,IAAIuS,GAC9BC,EAAcjS,KAAKoP,IANNxD,OAkBjB,SAAgB6F,GAGZ,IAAK,IAAIc,EAAIN,EAAc7E,OAAS,EAAGmF,GAAK,EAAIA,IAAI,CAChD,IAAInD,EAAY6C,EAAcM,GAC1BnD,EAAUqC,SAAWA,IACrBrC,EAAUzD,KAAI,GACdsG,EAAcO,OAAOD,EAAE,MAzBJE,UA8B/B,WACIR,EAAc5U,QAAQ,SAAS+R,GAC3BA,EAAUzD,KAAI,KAElBsG,EAAc7E,OAAS,GAlCwBsF,WAqCnD,WAAuBR,EAAWI,QC7CtC,SAASK,WAASpF,GAEd,IACI7F,EADApE,EAAWiK,EAAMqF,MAAQrF,EAAMsF,gBAAkBtF,EAAMjK,SAG3D,OAAIiK,EAAMuF,MACNpL,EAAK/F,SAASC,cAAc,OAC5B8F,EAAGqL,YAAcxF,EAAMuF,KAChBxG,QAAQC,QAAQ7E,IAGvB6F,EAAMC,MAGC,IAAIlB,QAAQ,SAASC,EAASC,IACjC9E,EAAK/F,SAASC,cAAc,QACzB8K,OAAS,WAAWH,EAAQ7E,IAC/BA,EAAGiF,QAAU,WAAWH,EAAO,IAAIlO,MAAM,oBAAsBoJ,EAAGyE,OAClEzE,EAAGyE,IAAMoB,EAAMC,SAInBD,EAAMyF,QAAQ1G,QAAQE,OAAO,IAAIlO,MAAM,gDAEvCgF,GACAoE,EAAK/F,SAASC,cAAc,OAC5B8F,EAAG5F,UAAYwB,EACRgJ,QAAQC,QAAQ7E,IAGpB4E,QAAQE,OAAO,IAAIlO,MAAM,6BC9BpC,SAAS2U,UAAQvL,EAAIwL,GACjB,IAAIpK,EAAQpB,EAAGoB,MACXqK,EAAOD,EAASC,SASpB,OAPIA,EAAKC,YAAWtK,EAAMC,SAAWoK,EAAKC,WAGtCC,MAAM,SAAUF,KAAUD,EAAS3F,MAAMuF,OAAMhK,EAAMjB,OAASsL,EAAKtL,OAAS,KAE5EwL,MAAM,QAASF,KAAOrK,EAAMZ,MAAQiL,EAAKjL,MAAQ,KAE9CR,EAGX,SAAS2L,MAAMtP,EAAM1F,GAAK,OAAO0F,KAAQ1F,ECTzC,SAASiV,WAAS5L,EAAGwL,GASjB,SAASK,EAAUlF,GAAM,OAAQmF,OAAOnF,GARxC,IAAIoF,EAAWP,EAASO,cAGJ,UAAhBA,EAAStC,KAAsC,UAAnBsC,EAASrC,aAAwCsC,IAAjBD,EAAStC,UAAyCuC,IAApBD,EAASrC,SAAuB1J,EAAGuD,UAAU7D,IAAIuM,SAC1H,UAAjBF,EAASzC,MAAsC,UAAlByC,EAASvC,YAAwCwC,IAAlBD,EAASzC,WAAyC0C,IAAnBD,EAASvC,QAAsBxJ,EAAGuD,UAAU7D,IAAIwM,SAE9I,MAAM,SAAS,OAAO,SAASvW,QAGhC,SAA4BwW,GAAWN,EAAUE,EAASI,MAAQnM,EAAGoB,MAAM+K,GAAQJ,EAASI,GAAQ,OAGxG,SAAgBC,MAAMpM,EAAI6E,GACtB,IAAIzD,EAAQpB,EAAGoB,MAGXiL,EAAUrM,EAAGuD,UAAU+I,SAASJ,QAChCK,EAAUvM,EAAGuD,UAAU+I,SAASL,QAEpC,IAAKI,IAAYE,EAAS,OAAO1H,EAAQ7E,GAEzCoH,QAAQoF,QAAQ,WACZ,IAAIvM,EAAgBrH,OAAOsH,iBAAiBF,GACxCQ,EAAQK,WAAWZ,EAAcO,OACjCL,EAASU,WAAWZ,EAAcE,QAEtCiH,QAAQC,OAAO,WAIXjG,EAAMqL,UAAY,OACdJ,IAASjL,EAAMsL,WAAa,IAAOlM,EAAM,EAAK,MAC9C+L,IAASnL,EAAMD,UAAY,IAAOhB,EAAO,EAAK,UChC9D,SAASwM,WAASnB,EAAUnF,EAAOtF,GAC/B,IAAI6L,GACA5M,GAAI,KACJ6M,OAAQrB,EACRnF,MAAOA,EACPtF,OAAQA,EACR+L,KAAMA,KACNC,KAAMA,KACNC,KAAMA,KACN1X,KAAMA,KACN2X,UAAWA,UACXC,QAASA,WASb,OALAN,EAAKnS,KAAO+Q,EAAS/Q,SAGrBmS,EAAK7C,OAAS6C,EAAKnS,KAAKsP,OAAS6C,EAAKnS,KAAKsP,QAAUyB,EAASzB,QAAUyB,EAAS3V,IAE1E+W,EAIX,SAASE,OACL,IAAK1X,KAAKyX,OAAOhH,MAAO,MAAM,IAAIjP,MAAM,gCAAkCxB,KAAKE,QAE/E,OAAO2V,WAAS7V,KAAKyX,OAAOhH,OACvBX,KAAKiI,aAAa9R,KAAKjG,KAAMA,KAAK2L,SAG3C,SAASoM,aAAapM,EAAQf,GAC1B,IAAI4M,EAAOxX,KAEX,OADAA,KAAK4K,GAAKA,EACH,IAAI4E,QAAQ,SAASC,GACxBuC,QAAQC,OAAO,WAEXrH,EAAGuD,UAAU7D,IAAI,kBACjBM,EAAG9C,aAAa,cAAe0P,EAAK7C,QACpCwB,UAAQvL,EAAI4M,EAAKC,QACjBjB,WAAS5L,EAAI4M,EAAKC,QAClBhK,MAAI7C,EAAI4M,EAAKC,OAAOhK,SAEhB+J,EAAKC,OAAOO,UAAUpN,EAAGuD,UAAU7D,IAAI,0BAG3CqB,EAAO1D,YAAY2C,GAEf/F,SAASoT,aAAcjB,MAAMpM,EAAI6E,GAChCA,EAAQ7E,OAKzB,SAAS+M,OACL,IAAI/M,EAAK5K,KAAK4K,GACd,IAAKA,EAAI,MAAM,IAAIpJ,MAAM,qDAEzBwQ,QAAQC,OAAO,WACXrH,EAAGuD,UAAU7D,IAAI,4BAIzB,SAASsN,OACL,IAAIhN,EAAK5K,KAAK4K,GACd,IAAKA,EAAI,MAAM,IAAIpJ,MAAM,sDAEzBwQ,QAAQC,OAAO,WACXrH,EAAGuD,UAAUW,OAAO,4BAI5B,SAASgJ,YACL,IAAIlN,EAAK5K,KAAK4K,GACVe,EAAS3L,KAAK2L,OAClBqG,QAAQC,OAAO,WACXtG,EAAO+F,YAAY9G,KAI3B,SAAS1K,OACL,IAAIuX,EAASzX,KAAKyX,OAElB,OAAIA,EAAOS,MAAeT,EAAOS,MAC7BlY,KAAKqF,KAAK6S,MAAelY,KAAKqF,KAAK6S,MAEnCT,EAAOU,SAAWV,EAAOU,QAAQ1X,IAAagX,EAAOU,QAAQ1X,IAC7DT,KAAK2U,OAAgB3U,KAAK2U,YAA9B,EAKJ,SAASkD,UAAUhY,GACf,IAAI4Q,EAAQzQ,KAAKyX,OAAOhH,MACpB2H,EAAWvY,GAAWA,EAAQuY,SAElC,GAAI3H,EAAMyH,MAAQ,OAAOzH,EAAMyH,MAE/B,IAAK,IAAIjR,KAAQwJ,EAAO,CACpB,GAAIyG,YAAU,QAAQ,YAAYjQ,GAAO,OAAOmR,EAAW3H,EAAMxJ,GAAQwJ,EAAMxJ,GAAM0G,QAAQ,WAAY,IAGzG,GAAIuJ,YAAU,OAAO,OAAO,kBAAkBjQ,IAASwJ,EAAMxJ,GAAO,OAAOwJ,EAAMxJ,IAMzF,SAASiQ,WAASnT,EAAKwN,GAAM,OAA4B,GAArBxN,EAAIkF,QAAQsI,GChHhD,SAAS8G,eAAepH,EAAOtF,GAiB3B,SAAS2M,EAAOjH,GAAO,OAAOkG,WAASlG,EAAMJ,EAAOtF,GAhBpD,IAAI8L,EAASxG,EAAMsH,QACfpH,EAAUsG,EAAOtG,QAAQxO,IAAI2V,GAC7BlH,EAASqG,EAAOrG,OAAOzO,IAe3B,SAAkB0O,GAA6B,OAAtBA,EAAK2G,UAAW,EAAa3G,IAfb1O,IAAI2V,GACzCE,EAAQhJ,QAAQ0C,IAAIf,EAAQ9P,OAAO+P,GAAQzO,IAAI,SAAS0O,GAAM,OAAOA,EAAKqG,UAW9E,OATI/L,OAAQA,EACRwF,QAASA,EACTC,OAAQA,EACRoH,MAAOA,EACPC,YAAaA,YACbC,aAAcA,aACdZ,QAASA,SASjB,SAASW,cACL,OAAOzY,KAAKmR,QACPtI,OAAO,SAASwI,GAAM,OAAQA,EAAKoG,OAAOkB,QAC1ChW,IAAI,SAAS0O,EAAMuH,GAAO,OAAOvH,EAAKnR,QAAW,OAAS0Y,IAGnE,SAASF,aAAa7Y,GAClB,OAAOG,KAAKmR,QACPtI,OAAO,SAASwI,GAAM,OAAQA,EAAKoG,OAAOkB,QAC1ChW,IAAI,SAAS0O,EAAMuH,GAAO,OAAOvH,EAAKwG,UAAUhY,IAAa,QAAU+Y,IAGhF,SAASd,UACL9X,KAAKmR,QAAQ9P,OAAOrB,KAAKoR,QAAQ7Q,QAAQ,SAAS8Q,GAAMA,EAAKyG,YCfjE,SAAwBe,cAAcC,GAClC,GAAIxY,SAAEgT,WAAWwF,GAAY,OAAOA,EACpC,GAAIxY,SAAEgT,WAAWyF,cAAcD,EAAU7Y,OAAQ,OAAO8Y,cAAcD,EAAU7Y,MAChF,MAAM,IAAIuB,MAAM,2BAA6BsT,KAAKC,UAAU+D,IAGhE,SAASE,MAAMC,GAAY,MAA0B,UAAnBA,EAAUhZ,KAE5C,SAASiZ,YAAYD,EAAWH,GAE5B,OAA6C,KADhC9F,MAAM5R,QAAQ0X,EAAUlW,OAASkW,EAAUlW,OAASkW,EAAUlW,QAC7DqG,QAAQgQ,EAAUtE,QAGpC,SAASwE,iBAAiBF,EAAWH,EAAW7H,GAAQ,OAAOgI,EAAUtE,SAAW1D,EAAM5L,KAAKyT,EAAUpQ,UAEzG,SAAS0Q,gBAAgBH,EAAWH,EAAW7H,GAE3C,IAAIoI,KAKJ,OAJIP,EAAUnE,SAAQ0E,EAAkB,OAAIP,EAAUnE,QACtD0E,EAAUP,EAAUpQ,UAAYuQ,EAAUtE,OAGnC2E,QAAQD,EAAUpI,GAG7B,SAASsI,YAAYN,EAAWH,EAAW7H,GACvC,QAAiC,IAAtB6H,EAAUpQ,eAAqD,IAAnBoQ,EAAUlW,MAAsB,MAAM,IAAIpB,MAAM,kEACvG,OAAOsX,EAAUlW,QAAUqO,EAAM5L,KAAKyT,EAAUpQ,UAGpD,SAAS8Q,kBAAkBP,EAAWH,GAClC,QAAiC,IAAtBA,EAAUpQ,SAAyB,MAAM,IAAIlH,MAAM,uDAC9D,OAAOyX,EAAUtE,SAAWjT,SAAOoX,EAAUpQ,UAGjD,SAAS+Q,aAAaR,EAAWH,GAC7B,QAAiC,IAAtBA,EAAUpQ,eAAqD,IAAnBoQ,EAAUlW,MAAsB,MAAM,IAAIpB,MAAM,mEACvG,OAAOsX,EAAUlW,QAAUlB,SAAOoX,EAAUpQ,UAGhD,SAASgR,kBAAkBT,EAAWH,EAAW7H,GAC7C,QAAmC,IAAxB6H,EAAUa,iBAA2D,IAAvBb,EAAUc,UAA0B,MAAM,IAAIpY,MAAM,8EAC7G,OAAOE,SAAOoX,EAAUa,cAAgB1I,EAAM5L,KAAKyT,EAAUc,WAGjE,SAASC,iBAAiBZ,EAAWH,EAAW7H,GAC5C,QAAmC,IAAxB6H,EAAUa,iBAA0D,IAAtBb,EAAUgB,SAAyB,MAAM,IAAItY,MAAM,4EAG5G,IAAI6X,KAKJ,OAJIP,EAAUnE,SAAQ0E,EAAkB,OAAIP,EAAUnE,QACtD0E,EAAUP,EAAUgB,UAAYpY,SAAOoX,EAAUa,YAG1CL,QAAQD,EAAUpI,GAG7B,SAAS8I,mBAAmBd,EAAWH,GACnC,IAAI1Y,EAAUsB,SAAOtB,QACrB,QAAiC,IAAtB0Y,EAAUpQ,SAAyB,MAAM,IAAIlH,MAAM,wDAC9D,OAAOyX,EAAUtE,SAAWvU,EAAQ0Y,EAAUpQ,UAElD,SAASsR,cAAcf,EAAWH,GAC9B,IAAI1Y,EAAUsB,SAAOtB,QACrB,QAAiC,IAAtB0Y,EAAUpQ,eAAqD,IAAnBoQ,EAAUlW,MAAsB,MAAM,IAAIpB,MAAM,oEACvG,OAAOsX,EAAUlW,QAAUxC,EAAQ0Y,EAAUpQ,UAGjD,SAASuR,mBAAmBhB,EAAWH,EAAW7H,GAC9C,IAAI7Q,EAAUsB,SAAOtB,QACrB,QAAoC,IAAzB0Y,EAAUoB,kBAA4D,IAAvBpB,EAAUc,UAA0B,MAAM,IAAIpY,MAAM,gFAC9G,OAAOpB,EAAQ0Y,EAAUoB,eAAiBjJ,EAAM5L,KAAKyT,EAAUc,WAGnE,SAASO,kBAAkBlB,EAAWH,EAAW7H,GAC7C,IAAI7Q,EAAUsB,SAAOtB,QACrB,QAAoC,IAAzB0Y,EAAUoB,kBAA2D,IAAtBpB,EAAUgB,SAAyB,MAAM,IAAItY,MAAM,8EAG7G,IAAI6X,KAKJ,OAJIP,EAAUnE,SAAQ0E,EAAkB,OAAIP,EAAUnE,QACtD0E,EAAUP,EAAUgB,UAAY1Z,EAAQ0Y,EAAUoB,aAG3CZ,QAAQD,EAAWpI,GAG9B,SAAS1D,GAAG0L,EAAWH,EAAW7H,GAC9B,OAAO6H,EAAUlW,MAAMO,MAAM8N,GAAO6H,EAAUG,EAAWhI,IAG7D,SAASmJ,OAAOnB,EAAWH,EAAW7H,GAClC,OAAO6H,EAAUvL,GAAGpK,MAAM,MAAO2V,EAAWG,EAAWhI,IAG3D,SAASqI,QAAQD,EAAWpI,GACxB,OAAOA,EAAMoJ,mBAAmBlJ,QAAQmJ,KAAK,SAASjJ,GAClD,IAAIhM,EAAOgM,EAAKhM,KAChB,IAAK,IAAIxC,KAAOwW,EACZ,GAAIA,EAAUxW,KAASwC,EAAKxC,GAAM,OAAO,EAE7C,OAAO,IC9Gf,SAIS0X,mBAAmBC,EAAYvB,EAAWhI,GAC/C,IAAKuJ,EAAY,MAAM,IAAIhZ,MAAM,gDAMjC,OAHAgZ,EAAaxH,MAAM5R,QAAQoZ,GAAcA,GAAcA,IAGjC,SAAlBvB,EAAUhZ,OAAmBua,EAAWxT,MAAM,SAAS8R,GAAW,MAAyB,SAAlBA,EAAU7Y,SAEhFua,EAAWxT,MAGlB,SAAwB8R,GACpB,OAAO2B,cAAe3B,EAAf2B,CAA0B3B,EAAWG,EAAWhI,KClB/D,SAKSyJ,aAAaC,EAASC,EAAW3J,GAEtC,IAAI4J,GAAkB,EAEtB,IAAKF,EAAS,MAAM,IAAInZ,MAAM,6CAa9B,OAXAmZ,EAAUra,SAAEc,QAAQuZ,GAAWA,GAAWA,GAE1Cra,SAAEC,QAAQoa,EAAQ,SAASG,GACvB,IAAIC,EAAWC,QAAWF,EAAO7a,MACjC,IAAK8a,EAAU,MAAM,IAAIvZ,MAAM,mBAAqBsZ,EAAO7a,MAGvC,aAAhB6a,EAAO7a,OAAqB4a,GAAkB,GAClDE,EAASD,EAAQF,EAAW3J,KAGzB4J,ECrBX,SAASI,eAAahK,GAClB,IAAIgK,EAAehK,EAAMsH,QAAQ0C,aAC7BC,EAAUjK,EAAMsH,QAAQ4C,OAAS3X,OAAO2X,MAI5C,OACA,SAAkB9O,GACd,IAAIoJ,EAAG2F,EAAaC,EAOpB,IAHIH,GAAS5R,QAAQgS,eAAe,WAAajP,EAAMsI,QAAUtI,EAAMpM,MAAOoM,GAGzEoJ,EAAE,EAAGA,EAAEwF,EAAa3K,SACrB8K,EAAcH,EAAaxF,GAC3B4F,EAAgBE,mBAASH,EAAYZ,WAAYnO,EAAO4E,GAGpDiK,GAAS5R,QAAQD,IAAIgS,EAAeD,EAAYZ,aAIhDa,GAAqBG,aAASJ,EAAYT,QAAStO,EAAO4E,IATjCwE,KAejC,OAFIyF,GAAS5R,QAAQmS,SAAS,WAAapP,EAAMsI,QAAUtI,EAAMpM,OAE1DoM,GCjCf,SAASqP,QAAMjE,EAAQ9L,EAAQxL,GAE3B,IAAKsX,EAAOwD,aAAc,MAAM,IAAIzZ,MAAM,4BAE1CxB,KAAK2L,OAASA,EACd3L,KAAKG,SAAWA,EAChBH,KAAKuY,QAAUd,EAEfzX,KAAK2b,MAAQ1N,SACbjO,KAAKkV,QAAUjH,SACfjO,KAAK4b,KAAO5b,KAAKkV,QAAQrG,IAGzB7O,KAAKqF,KAAOoS,EAAOpS,SAGnBrF,KAAK6b,IAAMvb,SAAEwb,SAAS,UACtB9b,KAAKiE,QAAU8X,MAEf/b,KAAKkR,MAAQA,YAAMlR,KAAKkV,QAASvJ,GACjC3L,KAAKqa,mBAAqBA,eAAmBra,KAAM2L,GAKnD3L,KAAKgc,OAAS,WAkDlB,SAASC,gBAAgBhL,GACrB,OAAO,SAAS5E,GACZ,OAAO/L,SAAEgF,OAAO+G,GACZ6P,QAAcjL,EAAM4K,IACpB5X,QAAcgN,EAAMhN,WAKhC,SAASkY,UAAUpY,GACf,OAAKA,EACEzD,SAAEc,QAAQ2C,GAAOA,GAAOA,MC3FnC,SAASqY,YAAUjS,EAAIhK,EAAUkc,GAmB7B,SAASC,EAAWjL,EAAMpK,EAAM7B,GAC5B,IAAImM,EAAMF,EAAKpK,GAEf,GAAI3G,SAAEyI,YAAYwI,GAAM,OAAO,EAC3BjR,SAAE2C,SAASsO,KAAMA,GAAOyE,KAAMzE,KAElCA,EAAMpH,EAAGoS,QAAQ,QAAShL,EAAKnM,IAIvBsL,QAAOa,EAAIb,MAAQR,SAAS/P,EAASyR,SAAUL,EAAIb,MAAO,UAE9Da,EAAI/K,WAEJ+K,EAAIwE,eAAiBpG,UAAU,QAAUO,SAAS/P,EAASyR,SAAUL,EAAI/K,SAAU,aACnF+K,EAAIwE,eAAiBzV,SAAEkG,SAAS+K,EAAIwE,eAAfzV,CAA+B8E,IAGxDiM,EAAKpK,GAAQsK,EAEbnM,EAAQoX,UAAY,KACpBpX,EAAQqX,UAAY,KAGxB,SAASC,EAAUrL,GACf,IAAIjM,EAAUpF,KAOd,OALAqR,EAAOlH,EAAGoS,QAAQ,WAAYlL,EAAMjM,GAAUuX,MAAM,QAAQ,gBAC5DL,EAAWjL,EAAM,QAASjM,GAC1BkX,EAAWjL,EAAM,aAAcjM,GAC/BA,EAAQwX,aAAe,KACvBxX,EAAQyX,aAAe,KAChBxL,EAlDX,IAIIoG,EAJAhO,EAAc4S,EAAK,GAAI3S,EAAa2S,EAAK,GACzChc,EAAW8J,EAAGO,gBACdhJ,EAASob,WACT1X,GAAW1D,OAAQA,EAAQtB,QAASsB,EAAOtB,SAM/C,OAHAC,EAASmJ,GAAGC,EAAaC,EAAYtE,IACrCqS,EAASpX,EAASD,QAAQgF,GAAUuX,MAAM,SAAS,eAInDlF,EAAOtG,QAAU7Q,SAAEqC,IAAI8U,EAAOtG,YAAeuL,EAAWtX,GACxDqS,EAAOrG,OAAS9Q,SAAEqC,IAAI8U,EAAOrG,WAAcsL,EAAWtX,GAEtDA,EAAQ2X,UAAY,MAEZna,MAAM6U,KAPOuF,MAAK,GCd9B,SAAShb,OAAKC,EAAKoD,GACf,OAAO,IAAImK,QAAQ,SAASC,EAASC,GACjC,IAAIuN,EAAU,IAAIC,eAClBD,EAAQE,KAAK,OAAOlb,GAAK,GACzBgb,EAAQG,iBAAiB,eAAgB,mCAEzCH,EAAQI,mBAAqB,WACD,IAApBrd,KAAKsd,aACDtd,KAAKud,QAAU,KAAOvd,KAAKud,OAAS,IAAK9N,EAAQzP,KAAKwd,cACrD9N,EAAO,IAAIlO,MAAM,sBAAwBS,MAItDgb,EAAQQ,KAAKC,YAAUrY,MAI/B,SAASqY,YAAUrY,GACf,MAAmB,iBAARA,EAAyBA,EAC7ByP,KAAKC,UAAU1P,GChB1B,SAASsY,SAAOhC,EAAOxb,GAsBnB,SAASsd,EAAKtO,GACV,IACIyO,GADYzd,EAASud,YAAcvd,EAAS0d,YAAcC,UAAYC,eAC3C5O,EAAMhP,EAAS6d,UAE9C,OAAOhc,OAAKC,EAAI2b,GACXK,MAAM,WAAkB,OAAOjc,OAAKC,EAAK2b,KACzCK,MAAM9d,EAASuE,OAASpE,SAAEyG,MA3BnC,IAAImX,KACAjc,EAAM9B,EAAS8B,IAEdA,IAEL0Z,EAAMhZ,IAGN,SAAiB0G,GACb6U,EAAMhb,KAAKmG,GACNlJ,EAASge,OACVD,EAAM5N,QAAUnQ,EAASge,QACzBV,EAAKS,GACLA,EAAM5N,OAAS,KAPvBqL,EAAM9M,IAAIlM,IAWV,WACQub,EAAM5N,QAAQmN,EAAKS,MAc/B,SAAgBJ,UAAU3O,EAAM6O,GAC5B,IAAI3Y,EAAO/E,SAAEgF,QAASD,KAAK8J,GAAQ6O,GACnC,OAAOlJ,KAAKC,UAAU1P,GAG1B,SAAgB0Y,aAAa5O,EAAM6O,GAC/B,IAAI3Y,EAAO,QAAUyP,KAAKC,UAAU5F,GAChCxL,EAAO+Z,UAAUM,GACrB,OAAO3Y,GAAQ1B,EAAO,IAAIA,EAAO,IAIrC,SAAS+Z,UAAUrY,GACf,IAAIxC,EAAKub,KACT,IAAKvb,KAAOwC,EAAM+Y,EAAElb,KAAKmb,mBAAmBxb,GAAO,IAAMwb,mBAAmBhZ,EAAKxC,KACjF,OAAOub,EAAEE,KAAK,KAAK3Q,QAAQ,OAAQ,KCjDvC,SAAS4Q,aAAWC,EAAare,EAAUse,GACvC,IAAI9C,EAAQ6C,EAAY7b,IAQxB,SAAkB4K,GACd,OAAO,SAASmR,GAAO,OAAOnR,EAAGpK,MAAM,KAAKub,IATpBC,CAASxe,EAASye,QAAUze,EAAS0e,QAAUJ,IAK3E,OAHIte,EAASwd,OAAQxd,EAASwd,OAAOhC,EAAOxb,EAAUwd,UACjDA,SAAOhC,EAAOxb,GAEZwb,ECNX,SAASmD,cAAchE,EAAOF,EAAU3J,GACpC,IAAIvP,EAAS8B,OAAOC,SAChBsZ,EAAY9L,EAAM5L,KAAM4T,EAAY2B,EAAWmE,EAAWrd,EAAOtB,QAAQ+O,KACzEiJ,EAAW9X,SAAEyF,IAAIkL,EAAO,4BAA4B,GAEpD+N,EAAW/N,EAAMoJ,mBAAmB5B,cACpCwG,EAAYhO,EAAMoJ,mBAAmB3B,cAAcN,SAASA,IAEhE,OACI8G,WAAaH,EAASzO,OACtB6O,SAAUlO,EAAMhN,QAChB/D,KAAM+Q,EAAM/Q,OACZkf,eAAgBnG,EAAUtE,OAC1BY,QAASzI,KAAKsG,MAAM6F,EAAU1D,SAC9BpE,QAAS6N,EACTvO,MAAOwO,EACP5Z,KAAM0X,GCFd,SAASsC,YAAYC,GAgCjB,SAASC,EAAKlD,GACV,IAAIvS,EAAOsS,YAAUjS,EAAIhK,EAAUkc,GAC/BvS,EAAKkT,KAAMwC,EAAQ3Q,KAAI,GACtB2Q,EAAQ1V,EAAKlH,OAlCtB,IAAI+I,EAAS2T,EAAK3T,OACdxB,EAAKmV,EAAKnV,GACVhK,EAAWmf,EAAKnf,SAEhBqf,EAAUvR,SACVwR,EAASD,EAAQ7c,IAgCrB,SAAuBub,GACnB,OACA,SAAkBzG,GACd,IAAIiI,EAAWxB,EACXjN,EAAQiN,EAAQ,IAAIxC,QAAMjE,EAAQ9L,EAAQxL,GAiB9C,OAhBA8Q,EAAM0K,MAAMhZ,IAAI6b,GAChBvN,EAAM2K,KACDjZ,IAAI,WACD4c,EAAKtO,EAAM+K,SAGnB/K,EAAM0O,QAEFD,GAGA1N,QAAQC,OAAO,WACXyN,EAASrF,mBAAmBvC,YAI7B7G,GArDU2O,IACrBpB,EAAcvQ,SACd0N,EAAQ4C,aAAWC,EAAaqB,sBAAsBP,EAAKvf,OAAQ2B,YAAW+c,eAElF9C,EAAMhZ,IAAI,SAAS0G,GACf3H,WAAStB,QAAQ+O,KAAKjM,KAAKmG,KAG/B,IAAIyW,EAASxf,SAAEyF,IAAI5F,EAAU,gBAAiBA,EAAS4f,OAASzf,SAAEyG,MAMlE,OAJAyY,EAAQ3Q,IACHlM,IAUL,WACI,IAAIsO,EAAQwO,IACRxO,GAAOA,EAAMoJ,mBAAmBvC,YAXnCnV,IAAImd,GAEFxf,SAAEO,QACL4e,OAAOA,EACP5Q,IAAK2Q,EAAQ3Q,IAAI5I,KAAK,MAAK,GAC3B0V,MAAOA,EACPgE,MAAOJ,EAAKtZ,KAAK,MAAO,aACzBqZ,GAwCP,SAAgBO,sBAAsB9f,EAAQ2B,GAC1C,IAAIse,EAAiB1f,SAAEgF,UAAWhF,SAAEyF,IAAIhG,EAAQ,oBAC5Cie,EAAW1d,SAAEgF,QAAQ1B,SAAS7D,EAAOG,MAAOwB,EAAOgC,MAAOsc,EAAehC,UAE7E,OADAgC,EAAehC,SAAWA,EACnBgC,ECzEX,SAASxE,WAAS7P,EAAQ5L,GACtB,IACIkgB,EAAWC,YADJlR,QAAMrD,EAAQ5L,IAQzB,OALAkgB,EAASR,OAAO5Q,IAAIlM,IAAIsd,EAASjS,QAAQa,IAAI5I,KAAK,MAAM,IAGxDuL,eAAa7F,EAAQ5L,GAAQ+P,KAAKmQ,EAASN,OAEpCM,ECVX,SAASngB,MAAII,GACTgE,MAAYC,KAAKnE,KAAME,GAEvB,IAAIC,EAAWH,KAAKG,SAChBJ,EAASC,KAAKD,OAElBI,EAASye,QACLT,MAAO,GACPlc,IAAM,4BAIVlC,EAAOwf,KAAOA,KAGdxf,EAAOogB,aAAeA,aAElBC,QAAUrgB,EAAOsgB,UAAStgB,EAAOsgB,QAAU,KAiBnD,SAASd,KAAKvC,EAAMsD,EAASvgB,EAAQqG,GACjC,IAAIma,EAAKC,EAAKrQ,EACVsQ,EADmBJ,EAAUja,EAAKia,SAAWrgB,KAAKqgB,QACzCK,EAAaL,EAAU,GAEpC,GAAkB,SAAdja,EAAKnG,KAUL,OARAmG,EAAKlG,OAASH,EAAOG,KAAOkG,EAAKlG,MAEjCogB,EAAQK,OAAO,yBACfJ,EAAMD,EAAQM,YAEdH,EAAUI,WAAKN,EAAI,GAAIxgB,IACf8O,IAAIlM,IAAIqa,GAET,WACHuD,EAAIzR,SACJ2R,EAAQ5R,KAAI,IAIpB,IAAKwR,EAAS,MAAM,IAAI7e,MAAM,sCAAwC4E,EAAKlG,MAAQH,EAAOG,OAsC1F,OApCAiQ,EAAUnQ,KAAKmgB,aAAaE,GAG5BG,EAAM7Q,UAAUmR,QACZ1b,QAAS9E,OAAEwb,WACX3L,QAASA,GAAUiQ,MAAQ,SAAW,aACtCW,OAEIC,MAAO,+DAAgE7Q,EAAQ,yCAG/E+F,QAAS,4DAA4D/F,EAAQ,4CAC7E8Q,YAAa,+DAA+D9Q,EAAQ,8CACpF+Q,UAAW,kEAAmE/Q,EAAQ,wCAG1FgR,KAAMT,GAAc,eAAiB,SAAU,WAAY,gBAI/Dta,EAAKlG,OAASH,EAAOG,KAAOkG,EAAKlG,MAEjCogB,EAAQK,OAAO,0BACfJ,EAAMD,EAAQM,YACVQ,SAAS,cAGbZ,GAAK,eAAgB,SAAShF,GAC1B+E,EAAIc,YAAY,cACZX,GACAD,EAAUjF,EAAS+E,EAAI,GAAIxgB,IACnB8O,IAAIlM,IAAIqa,GAEfxB,EAASzb,EAAQid,KAGnB,WACHuD,EAAIzR,SACA4R,EAAYD,EAAQ5R,KAAI,GACvB2R,GAAK,sBAAuB,SAASc,GACtCA,EAAKC,SAAS9R,UACd6R,EAAKxJ,aAUjB,SAASqI,aAAaE,GAClB,OAAOD,MAAQ,QAAU,+BAA+BC,EC/G5D,SAASvgB,QACLoE,cAAYC,KAAKnE,MACjBM,OAAEG,IAAIT,KAAM,sBAAuB,qBCUvC,SAASwhB,eAAenf,EAAOof,EAAIC,EAAUpd,GAMzC,SAASqd,EAAOC,GACZ5hB,KAAK6hB,WACL7hB,KAAK8hB,QACL9hB,KAAKG,YACLH,KAAK2D,QACL3D,KAAK+hB,UAAW,EAChB/hB,KAAK4hB,UAAYA,GAAa,SAASI,GAAG,OAAOA,GAXrD,IAAIxK,EAAOxX,KACP0B,EAAS4C,EAAW5C,OACpByN,KA4GJ,OA3GA7O,OAAEG,IAAIiB,EAAQ,eAAgByN,GAW9B7O,OAAEO,OAAO8gB,EAAOjhB,WACZ2I,IAAK,WACD,IAAIlJ,EAAWH,KAAKG,SAChBuU,GAAUvU,EAAS8hB,OAASjiB,KAAK4hB,WAAWze,MAAMhD,EAAUgH,WAEhE,IAAK7G,OAAE4hB,QAAQliB,KAAK2D,QAAUrD,OAAEY,cAAcwT,GAE1C,MADAgN,GAAW,WAAWS,MAAMzN,GACtB,IAAIlT,MAAM,6DAEpBlB,OAAEO,OAAO6T,EAAQ1U,KAAK2D,MAEtBwL,EAAKjM,KAAKwR,GAGVgN,GAAW,WAAWS,MAAM,WAAYzN,GAExC1U,KAAK6hB,QAAQ3e,KAAKwR,GAClB8C,EAAK4K,aACDjiB,EAASge,QAAUne,KAAK+hB,UAAY/hB,KAAK6hB,QAAQvR,QAAUnQ,EAASge,OAAOne,KAAKyd,QAGxFA,KAAM,WA8BF,SAAS4E,IACL,OAAOC,EAAI7S,UA9Bf,IAAIgG,EACAtV,EAAWH,KAAKG,SAChBoiB,EAAWviB,KAAK6hB,QAChBS,EAAMb,EAAGe,QAGb,GAAwB,IAApBD,EAASjS,OAET,OADAgS,EAAI7S,UACG6S,EAAIhT,QAIf,GAAoB,MAAhBnP,EAAS8B,IAET,OADAqgB,EAAI7S,UACG6S,EAAIhT,QASf,IALAtP,KAAK6hB,WAELxf,EAAML,KAAK7B,EAAS8B,IAAKsgB,GAAUzS,KAAKuS,EAaxC,WAEI,OAAOhgB,EAAML,KAAK7B,EAAS8B,IAAKsgB,GAAUzS,KAAKuS,EAAS,WACpDX,GAAW,WAAWhd,MAAM,8EAAgFvE,EAAS8B,IAAK,MAC1H,IAAIqN,EAAUhP,OAAE8I,OAAOjJ,EAAU,SACjC,OAAImP,GAAWhP,OAAEgT,WAAWhE,EAAQQ,MACzBR,EAAQQ,KAAKwS,EAAI7S,QAAS6S,EAAI5S,QAE9B4S,EAAI5S,aAlBlB+F,EAAI,EAAGA,EAAE8M,EAASjS,OAAQmF,IAC3BzV,KAAK8hB,KAAK5e,KAAKqf,EAAS9M,IAG5B,OAAO6M,EAAIhT,SAwBfmT,cAAe,SAAUV,GACrB/hB,KAAK+hB,WAAWzhB,OAAEyI,YAAYgZ,IAAmBA,GAGrDW,SAAU,WACN,OAAOlL,EAAK4K,YAGhBO,YAAa,SAASxiB,GAClB,GAAyB,IAArBgH,UAAUmJ,OAAc,OAAOtQ,KAAKG,SAKxC,GAFAH,KAAKG,SAAWG,OAAEgI,YAAanI,EAAUqX,EAAKrX,WAEzCG,OAAEyI,YAAY5I,EAASwD,QAAUrD,OAAEY,cAAcf,EAASwD,MAC3D,MAAM,IAAInC,MAAM,qCAIpBxB,KAAK2D,KAAOrD,OAAEgI,YAAanI,EAASwD,KAAM6T,EAAK7T,SAIhDge,EC3HX,SAASiB,gBAAgBC,GAOrB,SAASC,EAAQC,EAAMC,GACnB,IAAIC,EAAW3iB,OAAE4iB,OAAOL,GAOxB,OALAviB,OAAEO,OAAOoiB,GACLF,KAAMziB,OAAEc,QAAQ2hB,GAAQA,GAAQA,GAChCC,QAASA,IAGNC,EAVX,OAFAH,EAAQH,YAgBR,SAA6BxiB,GACzB0iB,EAAiB1iB,SAAWA,GAfzB2iB,ECOX,SAASK,yBAA0BC,EAAM9e,GAgErC,SAAS+e,EAAWC,GAChB,OAAO,WACH,IACI7N,EADAtV,EAAWH,KAAKG,SACbue,KAEP,GAAI1e,KAAKujB,UAAUD,GAAO,CAEtB,IAAK7N,EAAE,EAAGA,EAAItO,UAAUmJ,OAAQmF,IAAKiJ,EAAKjJ,GAAKtO,UAAUsO,GAKzD,GAFA2N,EAAKE,GAAOngB,MAAM,KAAMub,GAEpBve,EAASqjB,YAAa,OAG1Blf,EAAWmf,MAAM,eACb5C,KAAM,IAAIvL,KACVrV,KAAMqjB,EACN5E,KAAMA,EACNqE,KAAM/iB,KAAK+iB,SA/E3B,IAAIF,KAgBJ,OAbAviB,OAAEwC,KAAK4gB,aAAc,SAASJ,GAC1BT,EAAiBS,GAASD,EAAUC,KAIxCT,EAAiB1iB,YAGjB0iB,EAAiBU,UAcjB,SAAmBD,GACf,IAAIK,EAAc3jB,KAAKG,SAASmjB,OAAS,OACrCM,EAAa5jB,KAAKG,SAAS4iB,MAAQ,MACnCA,EAAO/iB,KAAK+iB,KAGhB,SAFY/iB,KAAKgjB,SAOX1iB,OAAE2I,QAAQya,aAAcC,GAM1BE,OAAOP,GAASO,OAAOF,IAKR,QAAfC,IAAyBtjB,OAAEwjB,aAAaf,EAAMziB,OAAEc,QAAQwiB,GAAcA,GAAcA,IAAatT,QAVjGtQ,KAAKG,SAASmjB,MAAQ,QACtBtjB,KAAK0E,MAAM,wBAA0Bif,EAAc,sDAC5C,MAvBRd,ECpCX,SAASkB,UAAUzf,GACf,OACIqJ,SAAS,EACTnH,SAASA,SACTwd,KAAM,SAASC,GACX,IAAI9U,EAAO8U,EAAM9U,QAEjB8U,EAAMnV,OAON,SAAgBzF,GACZ,IAAIuP,EAAQtY,OAAE2I,QAAQkG,EAAM9F,GACxBuP,GAAS,GACTzJ,EAAKuG,OAAOkD,EAAO,IAT3BqL,EAAMC,SAAU,EAEhB5f,EAAW6f,IAAI,cAAe,SAASF,EAAO5a,GAC1C8F,EAAKjM,KAAKmG,OCA1B,SAAS0L,UAAUnS,EAAOwhB,GACtB,GAAa,MAATxhB,EACA,MAAO,sCAEX,GAAc,KAAVA,EACA,MAAO,4CAGX,cAAeA,GACX,IAAK,SACD,MACJ,IAAK,SACDA,EAAQ,GAAKA,EACb,MACJ,IAAK,SAED,GAAIA,aAAiBpB,MAAM,CACvBoB,EAAQA,EAAMgC,QACd,MAGR,QAEIhC,EAAQ,gCAAkCV,QAAQmiB,OAAOzhB,IAASwhB,GAAU,OAGpF,OAAOxhB,ECtBX,SAAS0hB,YAAYhiB,EAAS+Q,GAE1B,SAASkR,EAAIhjB,GACT,IAAIijB,EAAYjjB,EAAI+P,MAIpB,KAAMhR,OAAEY,cAAcK,IAAQ,UAAWA,GACrC,OAAQA,GAGZ,GAAIjB,OAAEyI,YAAYwb,EAAIE,OAAOD,IACzB,MAAM,IAAIhjB,MAAM,8BAAgCgjB,GAGpD,IAAKjjB,EAAImjB,OAASnjB,EAAIojB,QAClB,OAAOpjB,EAAIojB,QAKf,GAFApjB,EAAIojB,QAAUJ,EAAIE,OAAOD,GAAWrhB,MAAM,KAAMgE,YAE3C7G,OAAEc,QAAQG,EAAIojB,SACf,MAAM,IAAInjB,MAAM,8CAAgDgjB,EAAY,KAGhF,OAAOjjB,EAAIojB,QAGf,SAASC,EAAUvkB,EAAU+E,GACzB,OAAO9E,OAAE6I,OAAO9I,EAAU,SAAS0D,EAAInB,GAEnC,GAAItC,OAAEY,cAAc0B,IAAU,UAAWA,GAAwB,WAAfA,EAAM0O,QAAuB1O,EAAMiiB,QAAQ,CACzF,IAAIC,EAAMF,EAAUL,EAAI3hB,EAAOwC,GAAUA,GACzC,OAAOrB,EAAI1C,OAAOyjB,GAElB,OAAO/gB,EAAI1C,QAAQuB,SA2C/B,SAASmiB,EAAexjB,EAAK6D,GACzB,IACIqQ,EADApV,EAAWkB,EAAI8D,KAAOuf,EAAUrjB,EAAI8D,KAAMD,MAE1C4f,EAAIzjB,EAAIyjB,GAAK,EACb5b,KACA6b,EAAe3kB,OAAE6I,OAAO5H,EAAI2jB,QAAQ,SAAUrb,EAAMsb,GACpD,OAAOtb,EAAOsb,IAGlB,IAAK1P,EAAI,EAAGA,EAAIuP,EAAGvP,IACfrM,EAAOlG,KAKX,WACI,IAAIuS,EACA2P,EAAa/R,IAAW4R,EACxBI,EAAa,EAEjB,IAAK5P,EAAI,EAAGA,EAAIpV,EAASiQ,OAAQmF,IAI7B,GAHA4P,GAAc9jB,EAAI2jB,QAAQzP,GAC1B4P,GAAcA,EAAWC,QAAQ,GAE7BF,GAAcC,EACd,OAAO9jB,EAAI8D,KAAKoQ,GAIxB,MAAM,IAAIjU,MAAM,mDAnBJ+jB,IAGhB,OAAOnc,EAfX,OAnCAmb,EAAIE,QACAI,QAAU,SAAStjB,GACf,OAAOA,EAAI8D,MAGfmgB,OAAQ,SAASjkB,GACb,IACiBkU,EADbpV,EAAWkB,EAAI8D,SACf+D,KACJ,IAAKqM,EAAE,EAAGA,EAAIlU,EAAIkkB,MAAOhQ,IACrBrM,EAASA,EAAO/H,OAAOf,OAAEolB,MAAMrlB,GAAS,IAE5C,OAAO+I,GAIXiK,OAAQ,SAAS9R,EAAK6D,GAClB,IAAI/E,EAAWkB,EAAI8D,KAAOuf,EAAUrjB,EAAI8D,KAAMD,MAC9C,OAAO9C,EAAQjC,IAGnBslB,OAAQ,SAASpkB,EAAK6D,GAClB,IAAI/E,EAAWkB,EAAI8D,KAAOuf,EAAUrjB,EAAI8D,KAAMD,MAC9C,OAAO9E,OAAEslB,KAAKtjB,EAAQjC,GAAWkB,EAAIyjB,EAAIzjB,EAAIyjB,EAAI,IAGrD5K,OAAQ,SAAS7Y,EAAK6D,GAClB,OAAO9E,OAAEgT,WAAW/R,EAAIgM,IAAMhM,EAAIgM,GAAGhM,EAAK6D,OAG9CygB,eAAgBd,EAChBA,eAAgBA,GAKbR,EC7FX,SAASuB,wBAAwBvB,GAC7B,SAASwB,EAAgB1lB,EAAU+E,EAAS4gB,GACxC,IAAIC,EACA1kB,EAAMlB,EAAS,GAGnB,GADA2lB,EAAQA,GAAS,EACbA,KAAW,GACX,MAAM,IAAIxkB,MAAM,iDAGpB,OAAIlB,OAAEyI,YAAYxH,EAAI+P,OACXjR,GAIX4lB,EAAQ1B,EAAIhjB,EAAK6D,GAGjB/E,EAAS6lB,QAGTD,EAAQA,EAAM5kB,OAAOhB,GAEdC,OAAEyI,YAAYkd,EAAM,KAAO3lB,OAAEyI,YAAYkd,EAAM,GAAG3U,OAAS2U,EAAQF,EAAgBE,EAAO7gB,EAAS4gB,IAG9G,OAAOD,EC1BX,SAASI,uBAAuB5B,GAC5B,SAAS6B,EAAe/lB,EAAU+E,EAAS4gB,GAIvC,GADAA,EAAQA,GAAS,EACbA,KAAW,GACX,MAAM,IAAIxkB,MAAM,iDAgBpB,OAbQlB,OAAED,GACLsC,IAAI,SAASpB,GAEV,OAAIjB,OAAEyI,YAAYxH,EAAI+P,OACX/P,EAIJ6kB,EAAe7B,EAAIhjB,EAAK6D,GAAUA,EAAS4gB,KAErDhjB,UACAJ,QAKT,OAAOwjB,ECzBX,SAASC,wBAAsB9B,GAM3B,SAAS+B,EAAcviB,GACnB/D,KAAKK,SAAW0D,EAChB/D,KAAKumB,SACLvmB,KAAKsK,IAAIvG,GACT/D,KAAKwmB,QAAU,EA0FnB,OAvFAlmB,OAAEO,OAAOylB,EAAc5lB,WAMnB4J,IAAK,SAASvG,EAAKmgB,GACflkB,KAAKumB,MAAMrjB,MAAMsjB,QAAQtC,EAAUngB,EAAIuM,QAAU,EAAEjQ,SAAS0D,KAGhE0iB,QAAS,SAAS1c,EAAW3E,GAEzB,IAAIshB,EAAc1mB,KAAKumB,MAAMvmB,KAAKumB,MAAMjW,OAAO,GAC3CqW,EAAwB,SAAd5c,EAId,IAAK2c,EACD,MAAM,IAAIllB,MAAO,wCAGrBklB,EAAYF,SAAWG,EAAS,GAAK,EAErC,IAAI/b,EAAK8b,EAAYrmB,SAASqmB,EAAYF,SAG1C,OAAIlmB,OAAEyI,YAAY6B,IAAO5K,KAAKumB,MAAMjW,OAAS,GACzCtQ,KAAKumB,MAAMK,MACJ5mB,KAAKymB,QAAQtiB,KAAKnE,KAAK+J,EAAU3E,IAIxCwF,GAAMA,EAAG0G,OACTtR,KAAKsK,IAAIia,EAAI3Z,EAAGxF,IAAWuhB,GACpB3mB,KAAKymB,QAAQtiB,KAAKnE,KAAK+J,EAAU3E,IAIrCpF,MAGX8J,KAAM,SAAS1E,GAEX,OADApF,KAAKwmB,UACExmB,KAAKymB,QAAQtiB,KAAKnE,KAAM,OAAOoF,IAG1CyE,KAAM,SAASzE,GAEX,OADApF,KAAKwmB,UACExmB,KAAKymB,QAAQtiB,KAAKnE,KAAM,OAAOoF,IAQ1ChF,QAAQ,WAEJ,IAAIsmB,EAAc1mB,KAAKumB,MAAMvmB,KAAKumB,MAAMjW,OAAO,GAE/C,IAAKoW,EACD,MAAM,IAAIllB,MAAO,wCAGrB,IAAIoJ,EAAK8b,EAAYrmB,SAASqmB,EAAYF,SAE1C,GAAK5b,EAOL,OAFAA,EAAGlH,MAAQ1D,KAAK2D,OAETiH,GAGXjH,KAAM,WACF,OACI4B,OAAQvF,KAAKwmB,QAGbK,MAAQvmB,OAAE6I,OAAOnJ,KAAKumB,MAAO,SAASO,EAAKC,GAAK,OAAOD,EAAOC,EAAI1mB,SAASiQ,OAAO,GAAI,GAAG,MAM9FgW,ECrGX,SAASU,cAAYC,EAAO1lB,GAExB,IAAIjB,OAAEyI,YAAYke,GAIlB,OAHI3mB,OAAE2C,SAASgkB,KAAQA,EAAQA,EAAMC,MAAM,MAGpCD,EAAM9d,OAAO,SAASC,EAAQ4a,GAEjC,GAAI1jB,OAAEY,cAAckI,IAAW9I,OAAEc,QAAQgI,GACrC,OAAOA,EAAO4a,IAKnBziB,GCbP,SAAS4lB,2BAAyBH,GAc9B,OAZA,SAA0BC,EAAO1lB,GAI7B,OAAKjB,OAAE2C,SAASgkB,GAFU,SAKA7W,KAAK6W,GAExBD,EAAYC,EAAO1lB,GAFoB0lB,EAAMtZ,QAAQ,KAAK,KAHlCsZ,GCLvC,SAASG,yBAAuBJ,GA6B5B,SAASK,EAAYvO,GACjB,IAAIwO,EAAWxO,EAAUwO,SACzB,OAAIhnB,OAAEgT,WAAWwF,GAAmBA,EAC/BxY,OAAE4G,IAAI4R,EAAW,YAClBxY,OAAEgT,WAAWgU,GAAkBA,EAC5BC,EAAaD,GAFsBhnB,OAAE4G,IAAI4R,EAAU,MAAQxY,OAAEknB,GAAKC,EAK7E,SAASA,EAASvT,GAAO,QAASA,EAElC,SAASwT,EAAaC,GAAK,OAAO,SAASzT,EAAKE,GAAQ,SAAQF,EAAKE,GAAOpN,MAAM1G,OAAEiT,WAAYoU,EAAGzT,EAAKE,IAtCxG,IAAImT,GACAK,GAAIF,EAAapnB,OAAEsnB,IACnBC,YAAaH,EAAapnB,OAAEsnB,IAC5BE,IAAKJ,EAAapnB,OAAEwnB,KACpBC,mBAAoBL,EAAapnB,OAAEwnB,KACnCE,OAAQ1nB,OAAEknB,GACVS,GAAM3nB,OAAE4nB,MAAM5nB,OAAE4W,SAAS,EAAE,GAC3BA,SAAU5W,OAAE4nB,MAAM5nB,OAAE4W,SAAS,EAAE,GAC/BiR,QA6BJ,SAAiBjU,EAAKE,GAAQ,OAAOF,IAASE,GA5B1CqT,SAAUA,GAed,OAZA,SAAwB3O,EAAW1T,GAC/B,IAAIkiB,EAAWD,EAAYvO,GACvB5E,EAAO8S,EAAYlO,EAAUsP,QAAQhjB,GACrCgP,EAAQ4S,EAAYlO,EAAUuP,GAAGjjB,GAIrC,OAFI0T,EAAUqC,OAAS7R,SAASA,QAAQgf,KAAK,cAAepU,EAAM4E,EAAUwO,UAAY,SAAUlT,EAAO0E,GAElGA,EAAUyP,QACVjB,EAASnkB,MAAMiC,GAAS8O,EAAME,EAAOhP,IACtCkiB,EAASnkB,MAAMiC,GAAS8O,EAAME,EAAOhP,KCjBnD,SAASojB,0BAAwBjE,EAAKhJ,EAAUkN,GAK5C,OAHAlE,EAAIE,OAAOiE,OASX,SAAgBnnB,EAAK6D,GAEjB,OADAA,EAAU9E,OAAEO,OAAOuE,MAAeqjB,GAC3BlN,EAASha,EAAIiZ,WAAYpV,GAAW7D,EAAI8D,SAAa9D,EAAIonB,cAVpEpE,EAAIE,OAAOmE,YAiBX,SAAqBrnB,EAAK6D,GACtBA,EAAU9E,OAAEO,OAAOuE,MAAeqjB,GAClC,IAAII,EAMJ,OAJAA,EAAMvoB,OAAEwoB,KAAKvnB,EAAIwnB,SAAU,SAASL,GAChC,OAAOnN,EAASmN,EAAOlO,WAAYpV,MAI5ByjB,EAAIxjB,SAGR9D,EAAIonB,cA3BRpE,ECXX,SAASyE,iBAAiBlQ,GAQtB,SAASyC,EAASf,EAAWpV,GAIzB,SAASgL,EAAK6Y,GAAM,OAAO1N,EAAS0N,EAAK7jB,GAGzC,OALA9E,OAAEc,QAAQoZ,KAAgBA,GAAc0O,IAAI1O,IAKxCA,EAAW0O,IACJ5oB,OAAE0G,MAAMwT,EAAW0O,IAAK9Y,GAE/BoK,EAAW2O,MACH7oB,OAAE0G,MAAMwT,EAAW2O,KAAM/Y,GAIjCoK,EAAW4O,GACJ9oB,OAAEga,KAAKE,EAAW4O,GAAIhZ,GAE7BoK,EAAW6O,KACH/oB,OAAEga,KAAKE,EAAW6O,IAAKjZ,GAG5B0I,EAAU0B,EAAYpV,GAGjC,OAAOmW,ECjCX,SAAS+N,iBAAelG,EAAMmG,GAuB1B,OArBA,SAAkBrY,EAAO9L,GAGrB,KAAM8L,EAAMjI,QAAQ,MAChB,OAAOiI,EAIX9L,EAAU9E,OAAEO,OAAOuE,MAAemkB,GAIlC,IACI,OAAOjpB,OAAEkG,SAAS0K,EAAX5Q,CAAkB8E,GAC3B,MAAMmN,GAEJ,OADA6Q,EAAK1e,MAAM,WAAa6N,EAAE3N,QAAU,gCAAiCsM,GAC9D,KClBnB,SAASsY,sBAAoBhlB,GA4BzB,OA1BA,SAAqBjD,EAAK6D,EAASvF,GAY/B,SAAS4pB,EAAO7mB,GACZ,OAAItC,OAAE2C,SAASL,GAAe4D,EAAS5D,GACnCtC,OAAEc,QAAQwB,GAAeA,EAAMD,IAAI8mB,GACnCnpB,OAAEY,cAAc0B,GAAetC,OAAE4I,UAAUtG,EAAO6mB,GAC/C7mB,EAGX,SAAS4D,EAAS0K,GAEd,OAAMA,EAAMjI,QAAQ,MACb3I,OAAEkG,SAAS0K,EAAX5Q,CAAkBopB,GADSxY,EApBtC,IAEIrO,EAFA8Z,EAAOrc,OAAEyF,IAAIlG,EAAS,WACtBuJ,KAEAsgB,EAAMppB,OAAEgF,UAAWF,EAASZ,GAEhC,IAAK3B,KAAOtB,EACR6H,EAAOvG,IAA8B,GAAtB8Z,EAAK1T,QAAQpG,GAAc4mB,EAAOloB,EAAIsB,IAAQtB,EAAIsB,GAGrE,OAAOuG,GCOf,SAAS+Z,2BAA0BC,EAAM9e,GAgErC,SAAS+e,EAAWC,GAChB,OAAO,WACH,IACI7N,EADAtV,EAAWH,KAAKG,SACbue,KAEP,GAAI1e,KAAKujB,UAAUD,GAAO,CAEtB,IAAK7N,EAAE,EAAGA,EAAItO,UAAUmJ,OAAQmF,IAAKiJ,EAAKjJ,GAAKtO,UAAUsO,GAKzD,GAFA2N,EAAKE,GAAOngB,MAAM,KAAMub,GAEpBve,EAASqjB,YAAa,OAG1Blf,EAAWmf,MAAM,eACb5C,KAAM,IAAIvL,KACVrV,KAAMqjB,EACN5E,KAAMA,EACNqE,KAAM/iB,KAAK+iB,SA/E3B,IAAIF,KAgBJ,OAbAviB,OAAEwC,KAAK4gB,eAAc,SAASJ,GAC1BT,EAAiBS,GAASD,EAAUC,KAIxCT,EAAiB1iB,YAGjB0iB,EAAiBU,UAcjB,SAAmBD,GACf,IAAIK,EAAc3jB,KAAKG,SAASmjB,OAAS,OACrCM,EAAa5jB,KAAKG,SAAS4iB,MAAQ,MACnCA,EAAO/iB,KAAK+iB,KAGhB,SAFY/iB,KAAKgjB,SAOX1iB,OAAE2I,QAAQya,eAAcC,GAM1BE,SAAOP,GAASO,SAAOF,IAKR,QAAfC,IAAyBtjB,OAAEwjB,aAAaf,EAAMziB,OAAEc,QAAQwiB,GAAcA,GAAcA,IAAatT,QAVjGtQ,KAAKG,SAASmjB,MAAQ,QACtBtjB,KAAK0E,MAAM,wBAA0Bif,EAAc,sDAC5C,MAvBRd,EChCX,SAASD,kBAAgBC,GAOrB,SAASC,EAAQC,EAAMC,GACnB,IAAIC,EAAW3iB,OAAE4iB,OAAOL,GAOxB,OALAviB,OAAEO,OAAOoiB,GACLF,KAAMziB,OAAEc,QAAQ2hB,GAAQA,GAAQA,GAChCC,QAASA,IAGNC,EAVX,OAFAH,EAAQH,YAgBR,SAA6BxiB,GACzB0iB,EAAiB1iB,SAAWA,GAfzB2iB,ECTX,SAASiB,YAAUzf,GACf,OACIqJ,SAAS,EACTnH,SAASA,WACTwd,KAAM,SAASC,GACX,IAAI9U,EAAO8U,EAAM9U,QAEjB8U,EAAMnV,OAON,SAAgBzF,GACZ,IAAIuP,EAAQtY,OAAE2I,QAAQkG,EAAM9F,GACxBuP,GAAS,GACTzJ,EAAKuG,OAAOkD,EAAO,IAT3BqL,EAAMC,SAAU,EAEhB5f,EAAW6f,IAAI,cAAe,SAASF,EAAO5a,GAC1C8F,EAAKjM,KAAKmG,OCA1B,SAAS0L,YAAUnS,EAAOwhB,GACtB,GAAa,MAATxhB,EACA,MAAO,sCAEX,GAAc,KAAVA,EACA,MAAO,4CAGX,cAAeA,GACX,IAAK,SACD,MACJ,IAAK,SACDA,EAAQ,GAAKA,EACb,MACJ,IAAK,SAED,GAAIA,aAAiBpB,MAAM,CACvBoB,EAAQA,EAAMgC,QACd,MAGR,QAEIhC,EAAQ,gCAAkCV,QAAQmiB,OAAOzhB,IAASwhB,GAAU,OAGpF,OAAOxhB,ECtCX,SAAS+mB,mBAAmBC,EAAcC,EAAgBC,GAEtD,SAASC,IACL/pB,KAAKgqB,QACD3W,UACA4W,YACAC,eAUR,OANA5pB,OAAEO,OAAOkpB,EAAWrpB,WAChB2S,OAOJ,SAAgB/C,EAAQ6Z,EAAM3E,GAC1B,IAAItH,EAASle,KAAKgqB,OAAO3W,OAEzB,OAAImS,IAAWllB,OAAEyI,YAAYmV,EAAMiM,IACxBjM,EAAMiM,IAIjBjM,EAAMiM,GAAQP,EAAatZ,GAEpB4N,EAAMiM,KAhBbF,SAkDJ,SAAkB3Z,EAAQ6Z,EAAM3E,GAC5B,IAEIpc,EAFA8U,EAAQle,KAAKgqB,OAAOC,SACpBG,EAAOlM,EAAMiM,GAIjB,GAAI7pB,OAAEyI,YAAYqhB,GAEd,OADAA,EAAOlM,EAAMiM,GAAQ,IAAIL,EAAWD,EAAevZ,KACvC+Z,QAGhB,GAAID,EAAK9Z,SAAWA,EAChB,MAAM,IAAI9O,MAAM,eAAgB2oB,EAAM,uGAI1C,OAAI3E,EACO4E,EAAKhqB,WAIhBgJ,EAASghB,EAAKtgB,OAIVxJ,OAAEyI,YAAYK,IACdghB,EAAOlM,EAAMiM,GAAQ,IAAIL,EAAWD,EAAevZ,KACvC+Z,QAELjhB,IA9EX8gB,WAkBJ,SAAoB5Z,EAAQ6Z,EAAM3E,GAC9B,IAEIpc,EAFA8U,EAAQle,KAAKgqB,OAAOE,WACpBE,EAAOlM,EAAMiM,GAIjB,GAAI7pB,OAAEyI,YAAYqhB,GAEd,OADAA,EAAOlM,EAAMiM,GAAQ,IAAIL,EAAWxpB,OAAEgqB,MAAMha,KAChC+Z,QAGhB,GAAID,EAAK9Z,SAAWA,EAChB,MAAM,IAAI9O,MAAM,eAAgB2oB,EAAM,uGAI1C,OAAI3E,EACO4E,EAAKhqB,WAIhBgJ,EAASghB,EAAKtgB,OAGVxJ,OAAEyI,YAAYK,GACPghB,EAAKC,QAELjhB,MA1CR2gB,EChBX,SAASQ,oBAEL,SAAST,EAAY/lB,GACjB,GAAIA,aAAe+lB,EACf,OAAO/lB,EAIX,KAAKzD,OAAEyI,YAAYhF,IAASzD,OAAEc,QAAQ2C,IAAUA,aAAe+lB,GAC3D,MAAM,IAAItoB,MAAM,mDAGpBxB,KAAKuC,WAAawB,MAClB/D,KAAKsQ,OAAStQ,KAAKuC,WAAW+N,OAI9BtQ,KAAKwmB,SAAW,EAGpBlmB,OAAEO,OAAOipB,EAAWppB,WAEhB2pB,MAAQ,WAEJ,OADArqB,KAAKwmB,QAAU,EACRxmB,KAAKuC,WAAWvC,KAAKwmB,UAGhC7gB,KAAO,WAEH,OADA3F,KAAKwmB,QAAUxmB,KAAKuC,WAAW+N,OAAS,EACjCtQ,KAAKuC,WAAWvC,KAAKwmB,UAGhC3X,IAAM,WACF7O,KAAKwmB,QAAUxmB,KAAKuC,WAAW+N,QAInClQ,QAAU,WACN,OAAOJ,KAAKuC,WAAWvC,KAAKwmB,UAGhC1c,KAAO,WACH,OAAO9J,KAAKuC,aAAavC,KAAKwmB,UAGlCgE,SAAW,WACP,OAAOxqB,KAAKuC,aAAavC,KAAKwmB,UAIlClc,IAAM,SAAS7H,GAEX,OAAK0E,UAAUmJ,QAKf7N,EAAOnC,OAAEc,QAAQqB,GAAQA,GAAQA,GACjCzC,KAAKuC,WAAavC,KAAKuC,WAAWlB,OAAOoB,GAEzCzC,KAAKsQ,OAAStQ,KAAKuC,WAAW+N,OAEvBtQ,MATIA,MAafyqB,GAAI,SAAS7R,GACT,OAAO5Y,KAAKuC,WAAWqW,MAO/B,IACI8R,EAAQ1X,MAAMtS,UAAUgqB,MAY5B,OATApqB,OAAEwC,MAJa,QAAQ,UAIP,SAAS8E,GACrBkiB,EAAWppB,UAAUkH,GAAU,WAC3B,IAAI8W,EAAOgM,EAAMvmB,KAAKgD,WAGtB,OAFAuX,EAAKiM,QAAQ3qB,KAAKuC,YAEX,IAAIunB,EADAxpB,OAAEsH,GAAQzE,MAAM7C,OAAEoe,OAK9BoL,EC9EX,SAASc,kBAAgBC,EAAOvmB,GAE5B,SAASwmB,EAAUrT,GAKf,OAHInX,OAAEgT,WAAWmE,EAAOqT,YACpBrT,EAAOqT,UAAU3nB,MAAMsU,GAASA,EAAQnT,EAAW5C,SAEhD+V,EAMX,SAAS8E,EAAQ9E,EAAQ2S,EAAMW,EAAYC,EAAWhF,GAMlD,KAFAA,EAAQgF,IAAchF,EAAQ,IAElB,MAAM,IAAIxkB,MAAM,wEAE5B,IAAKlB,OAAEY,cAAcuW,GAAS,MAAM,IAAIjW,MAAM,2CAA6CsT,KAAKC,UAAU0C,GAAU,KAEpH,IAAIwT,EACAC,EAAQ5qB,OAAE6qB,UAAU1T,GACpB2T,EAAaF,EAAM/S,QAMvB,IAAK+S,EAAM/S,QAEP,OADK6S,GAAWF,EAAUI,GACnBA,EASX,KAHAD,EAASJ,EAAMO,EAAYhB,EAAMW,IAGpB,MAAM,IAAIvpB,MAAM,yBAA2BsT,KAAKC,UAAUqW,GAAc,gBAarF,GAVAH,EAAS1O,EACL0O,EACAb,EACAW,GACA,EACA/E,GAKAoF,EAAW3pB,QAAUnB,OAAEc,QAAQgqB,EAAW3pB,OAC1C,MAAM,IAAID,MAAM,sDA6CpB,OAzCAlB,OAAEwC,KAAKmoB,EAAQ,SAASroB,EAAOC,GAC3B,IAAIwoB,EAAWC,EAEf,GAAMzoB,KAAOqoB,GAMb,IAAyC,GAArC5qB,OAAE2I,QAAQmiB,EAAW3pB,MAAOoB,GAAW,CAIvC,GAHAwoB,EAAYH,EAAMroB,GAClByoB,EAAa1oB,EAETtC,OAAEc,QAAQiqB,GAAW,CACrB,IAAK/qB,OAAEc,QAAQkqB,GACX,MAAM,IAAI9pB,MAAM,yEAA2EqB,EAAM,MAErGqoB,EAAMroB,GAAOwoB,EAAUhqB,OAAOiqB,GAGlC,GAAIhrB,OAAEY,cAAcmqB,GAAW,CAC3B,IAAK/qB,OAAEY,cAAcoqB,GACjB,MAAM,IAAI9pB,MAAM,2EAA6EqB,EAAM,MAEvGqoB,EAAMroB,GAAOvC,OAAEO,UAAUyqB,EAAWD,UApBxCH,EAAMroB,GAAOvC,OAAEgT,WAAW1Q,GAASA,EAAQtC,OAAE6qB,UAAUvoB,KA4B3DqoB,EAAO5lB,OACP6lB,EAAM7lB,KAAO/E,OAAEO,OAAOoqB,EAAO5lB,KAAM6lB,EAAM7lB,YAK5C2lB,GAAaF,EAAUI,GAGjBA,EAGX,OAAO3O,ECnHX,SAASgP,gBAAczB,GAgEnB,OA9DA,SAAiBe,EAAOtoB,EAAYwoB,GAChC,IAAIX,EAAO,IAAIN,EAAWvnB,GAK1B,GAAIjC,OAAEgT,WAAWuX,GAAQ,OAAOA,EAAMtoB,IAElCjC,OAAE2C,SAAS4nB,IAAUvqB,OAAEiT,SAASsX,MAAQA,GAASpqB,IAAIoqB,EAAO5qB,KAAK,WAIjE4qB,EAAMpqB,MAAK2pB,EAAOA,EAAKxgB,OAAOnJ,IAAIoqB,EAAMpqB,OAIxCH,OAAE2C,SAAS4nB,EAAMxlB,QACjB+kB,EAAOA,EAAKvhB,OAAO,SAAS2iB,GACxB,OAAOA,EAAE7W,SAAWkW,EAAMxlB,MAASmmB,EAAEnmB,MAAQmmB,EAAEnmB,KAAKsP,SAAWkW,EAAMxlB,QAIzE/E,OAAEY,cAAc2pB,EAAMxlB,QAAO+kB,EAAOA,EAAKxgB,OAAOvE,KAAKwlB,EAAMxlB,QAE3D/E,OAAEgT,WAAWuX,EAAMxlB,QAAO+kB,EAAOA,EAAKvhB,OAAOgiB,EAAMxlB,OAMvD,IAGIolB,EAHAN,EAAOU,EAAMV,MAAS,IAAM5nB,EAAWkpB,UAAYZ,EAAMpqB,IACzD6P,EAAS8Z,EAAK9Z,OACdkV,EAASqF,EAAMrF,OAGnB,OAAQqF,EAAM5qB,MACV,UAAK2W,EACL,IAAK,SACL,IAAK,SACD6T,EAAKM,EAAW1X,OAAO/C,EAAO6Z,EAAK3E,GACnC,MACJ,IAAK,WACDiF,EAAKM,EAAWd,SAAS3Z,EAAO6Z,EAAK3E,GACrC,MACJ,IAAK,aACDiF,EAAKM,EAAWb,WAAW5Z,EAAO6Z,EAAK3E,GACvC,MACJ,IAAK,QACDiF,EAAK,EACL,MACJ,IAAK,OACDA,EAAKna,EAAO,EACZ,MACJ,QACI,MAAM,IAAI9O,MAAM,sBAAwBqpB,EAAM5qB,MAGtD,GAAIK,OAAEyI,YAAYqhB,EAAKK,GAAGA,IAAM,MAAM,IAAIjpB,MAAM,yBAA2BsT,KAAKC,UAAU8V,GAAS,oHAEnG,OAAOT,EAAKK,GAAGA,IC7DvB,SAASiB,iBAAiBC,EAAO5B,EAAYxN,EAASqP,EAAaC,GAE/D,SAASzhB,IACLpK,KAAK8rB,MAAQ,IAAIH,EACjB3rB,KAAK+qB,WAAa,IAAIhB,EAyD1B,OAtDAzpB,OAAEO,OAAOuJ,EAAS1J,WACd2J,WAAY,SAASohB,GACjBzrB,KAAK8rB,MAAM5I,OAAOuI,IAGtBM,QAAS,SAASN,GACd,OAAOzrB,KAAK8rB,MAAME,KAAKP,IAG3BnhB,IAAK,SAASmhB,EAAWZ,GACV7qB,KAAK8rB,MAAME,KAAKP,GACtBnhB,IAAIugB,IAGbtO,QAAS,SAASkP,EAAWZ,EAAOzlB,EAASvF,GACzC,IACIuJ,EADAghB,EAAOpqB,KAAK+rB,QAAQN,GAGxB,IAESZ,EAAMoB,YAAapB,EAAMqB,YAC1BrB,EAAMoB,UAAY1P,EAAQsO,EAAOT,EAAMpqB,KAAK+qB,YAC5CF,EAAMsB,WAAa,MAIlBtB,EAAMsB,aAActB,EAAMoB,UAAUG,qBACrChnB,EAAQqmB,EAAY,QAAUZ,EAAMnnB,MACpC0B,EAAQqmB,EAAY,QAAUG,EAAYf,EAAMoB,UAAU5mB,SAAYD,EAASvF,GAC/EgrB,EAAMsB,WAAaP,EAAYf,EAAMoB,UAAW7mB,EAASvF,IAG7DuJ,EAASyhB,EAAMsB,WACjB,MAAME,GAEJ,MADIrsB,KAAKssB,SAAStsB,KAAKssB,QAAQD,GACzBA,EAQV,OAJIjnB,EAAQ1D,QAAU0H,EAAO9H,WAAWhB,OAAEO,OAAOuE,EAAQ1D,OAAQ0H,EAAO9H,WAEpE8D,EAAQhF,SAAWgJ,EAAOxH,YAAYtB,OAAEO,OAAOuE,EAAQhF,QAASgJ,EAAOxH,YAEpEipB,EAAMsB,YAGjB9rB,SAAU,SAASorB,EAAW1nB,GAC1B,IAAKzD,OAAEc,QAAQ2C,GACX,MAAM,IAAIvC,MAAM,8BAEpB,OAAO,IAAIqqB,EAAiBJ,EAAW1nB,EAAK/D,SAI7CoK,ECzDX,SAASmiB,gBAAczC,GAEnB,SAAS6B,IACL3rB,KAAK8rB,SA6BT,OA1BAxrB,OAAEO,OAAO8qB,EAAMjrB,WACXwiB,OAAQ,SAAgBsJ,GACpB,GAAIxsB,KAAK8rB,MAAMU,GACX,MAAM,IAAIhrB,MAAM,kBAAoBgrB,EAAY,mBAEpDxsB,KAAK8rB,MAAMU,GAAa,IAAI1C,EAC5B9pB,KAAK8rB,MAAMU,GAAWf,UAAYe,GAGtCR,KAAM,SAAcQ,GAChB,IAAKxsB,KAAK8rB,MAAMU,GACZ,MAAM,IAAIhrB,MAAM,kBAAoBgrB,EAAY,mBAEpD,OAAOxsB,KAAK8rB,MAAMU,IAGtBC,OAAQ,SAAgBD,EAAWnnB,GACpBrF,KAAKgsB,KAAKQ,GAChBliB,IAAIjF,IAGbqnB,IAAK,SAAaF,GACdxsB,KAAK8rB,MAAMU,QAAa5V,KAIzB+U,ECpCX,SAASgB,iBAAiBrG,GAUtB,SAASsG,EAASnB,EAAW1nB,EAAIoG,GAC7BnK,KAAKyrB,UAAYA,EACjBzrB,KAAK2J,cAAgB,IAAI2c,EAAcviB,GACvC/D,KAAKmK,GAAKA,EAoDd,OAjDA7J,OAAEO,OAAO+rB,EAASlsB,WAEdoJ,KAAM,SAAS1E,GAEX,OADApF,KAAK2J,cAAcG,KAAK1E,GACjBpF,MAIX6J,KAAM,SAASzE,GAEX,OADApF,KAAK2J,cAAcE,KAAKzE,GACjBpF,MASXI,QAAS,SAASgF,EAASvF,GACvBuF,IAAYA,MAEZ,IAAI7D,EAAMvB,KAAK2J,cAAcvJ,QAAQgF,GAGrC,OAAK7D,EAIEvB,KAAKmK,GAAGoS,QAAQvc,KAAKyrB,UAAWlqB,EAAK6D,EAASvF,GAH1C0B,GAUf2Q,IAAK,SAAS9M,EAASvF,GAInB,IAHA,IAAIQ,KAEAuK,EAAK5K,KAAK8J,OAAO1J,QAAQgF,EAASvF,GAC/B+K,GACHvK,EAAS6C,KAAK0H,GACdA,EAAK5K,KAAK8J,OAAO1J,QAAQgF,EAASvF,GAGtC,OAAOQ,KAIRusB,EClEX,SAASD,qBAEL,SAASC,EAAS7oB,EAAKoG,GACnB,IAAKA,EACD,MAAM,IAAI3I,MAAM,sDAGpBxB,KAAKK,SAAW8J,EAAG9J,SAAS,QAAS0D,GACrC/D,KAAKmK,GAAKA,EA0Cd,OAvCA7J,OAAEO,OAAO+rB,EAASlsB,WACdoJ,KAAM,SAAS1E,GAEX,OADApF,KAAKK,SAASyJ,KAAK1E,GACZpF,MAGX6J,KAAM,SAASzE,GAEX,OADApF,KAAKK,SAASwJ,KAAKzE,GACZpF,MAGXI,QAAS,SAASgF,GACd,IAAIynB,EACAC,EAAO9sB,KAAKK,SAASD,QAAQgF,GAAUuX,MAAM,eAEjD,IAAKmQ,EACD,OAAOA,EAIPD,EADAC,EAAKC,UACUzsB,OAAEc,QAAQ0rB,EAAKC,WAAaD,EAAKC,WAAaD,EAAKC,cAKtE,IAAIA,EAAY/sB,KAAKmK,GAAG9J,SAAS,YAAawsB,GAAc3a,KACxD8a,UAAWF,EAAKznB,KAChB4nB,UAAWH,EAAKppB,QAQpB,OAHAopB,EAAOxsB,OAAEolB,MAAMoH,GAAM,GACrBA,EAAKC,UAAYA,EAEVD,KAIRF,EChDX,SAASM,aAAazL,EAAIrX,EAAUuX,EAAQwL,EAAeniB,EAAOoiB,EAAgB9oB,GAC9E,SAAS+oB,EAAKttB,GACV,IAAIyX,EAAOxX,KACPG,EAAWJ,EAAOI,aAClBuB,EAAS4C,EAAW5C,OASxB,GANA1B,KAAKD,OAASA,EACdC,KAAKmK,GAAK,IAAIC,EACdpK,KAAKstB,WAAarf,WAClBjO,KAAK4e,OAAS,IAAI+C,EAAO3hB,KAAKstB,WAAYzN,EAAsB9f,EAAQ2B,GAAS0rB,GACjFptB,KAAKwrB,EAAI/J,EAAGe,SAEPliB,OAAEc,QAAQrB,EAAOM,UAAW,MAAM,IAAImB,MAAM,iCAEjDxB,KAAKK,SAAW,IAAI8sB,EAAcptB,EAAOM,SAAUL,KAAKmK,IAExDnK,KAAKsP,QAAUtP,KAAKwrB,EAAElc,QACjBQ,KAAK,WAEFxP,OAAEwC,KAAKwB,EAAWlE,QAAQ2sB,UAAW,SAASQ,GAC1C,GAAGA,EAAMC,QAAU,OAAO,EAC1BhW,EAAKnO,IAAIkkB,KAAW7rB,GACpB6rB,EAAMC,SAAU,IAEpBhW,EAAKoH,OAAO/P,KAAI,KACR,QAAE1O,EAAS4f,OAAS7d,QAAQ6E,MAE5CiE,EAAMjL,EAAQC,KAAKmK,IAIvB,SAAS0V,EAAsB9f,EAAQ2B,GACnC,IAAIse,EAAiB1f,OAAEgF,UAAWhF,OAAEyF,IAAIhG,EAAQ,oBAC5Cie,EAAW1d,OAAEgF,QAAQ1B,SAAS7D,EAAOG,MAAOwB,EAAOgC,MAAOsc,EAAehC,UAE7E,OADAgC,EAAehC,SAAWA,EACnBgC,EA4BX,OAzBA1f,OAAEO,OAAOwsB,EAAK3sB,WACV2I,IAAK,WACDrJ,KAAKstB,WAAWnpB,KAAK,QAASumB,MAAMvmB,KAAKgD,aAE7C/G,QAAS,WACL,IAAIqtB,EAAUztB,KAAKK,SAASD,UAM5B,OAJKqtB,GACDztB,KAAK6O,MAGF4e,GAEX3jB,KAAM,WACF,OAAO9J,KAAKK,SAASyJ,QAEzBD,KAAM,WACF,OAAO7J,KAAKK,SAASwJ,QAGzBgF,IAAK,WACD7O,KAAKwrB,EAAE/b,aAIR4d,ECpEX,SAASK,cAAchM,GAanB,OAZA,SAAe3hB,EAAQoK,GACnBA,EAAGE,WAAW,SACdF,EAAGE,WAAW,aAEdF,EAAGG,IAAI,QAASvK,EAAO4tB,eACvBxjB,EAAGG,IAAI,YAAavK,EAAO6tB,mBAE3B7tB,EAAOI,WAAaJ,EAAOI,aAE3BuhB,EAAUiB,YAAY5iB,EAAOI,SAASgb,YCT9C,SAASiS,gBAAgB/jB,EAAKwkB,EAAUnsB,GACpC,IACIgT,EAASpU,OAAEO,UAAUgtB,EAASxkB,GAIlC,OAHIqL,EAAOoZ,WACPpZ,EAAO1Q,SAAWqF,EAAI0kB,iBAAcnX,GAEjClC,ECNX,SAAS1S,OAAKC,EAAKoD,GACf,OAAO,IAAImK,QAAQ,SAASC,EAASC,GACjC,IAAIuN,EAAU,IAAIC,eAClBD,EAAQE,KAAK,OAAOlb,GAAK,GACzBgb,EAAQG,iBAAiB,eAAgB,mCAEzCH,EAAQI,mBAAqB,WACD,IAApBrd,KAAKsd,aACDtd,KAAKud,QAAU,KAAOvd,KAAKud,OAAS,IAAK9N,EAAQzP,KAAKwd,cACrD9N,EAAO,IAAIlO,MAAM,sBAAwBS,MAItDgb,EAAQQ,KAAKC,YAAUrY,MAI/B,SAASqY,YAAUrY,GACf,MAAmB,iBAARA,EAAyBA,EAC7ByP,KAAKC,UAAU1P,GChB1B,SAASsY,SAAOhC,EAAOxb,GAsBnB,SAASsd,EAAKtO,GACV,IACIyO,GADYzd,EAASud,YAAcvd,EAAS0d,YAAcC,YAAYC,iBAC3C5O,EAAMhP,EAAS6d,UAE9C,OAAOhc,OAAKC,EAAI2b,GACXK,MAAM,WAAkB,OAAOjc,OAAKC,EAAK2b,KACzCK,MAAM9d,EAASuE,OAASpE,OAAEyG,MA3BnC,IAAImX,KACAjc,EAAM9B,EAAS8B,IAEdA,IAEL0Z,EAAMhZ,IAGN,SAAiB0G,GACb6U,EAAMhb,KAAKmG,GACNlJ,EAASge,OACVD,EAAM5N,QAAUnQ,EAASge,QACzBV,EAAKS,GACLA,EAAM5N,OAAS,KAPvBqL,EAAM9M,IAAIlM,IAWV,WACQub,EAAM5N,QAAQmN,EAAKS,MAc/B,SAAgBJ,YAAU3O,EAAM6O,GAC5B,IAAI3Y,EAAO/E,OAAEgF,QAASD,KAAK8J,GAAQ6O,GACnC,OAAOlJ,KAAKC,UAAU1P,GAG1B,SAAgB0Y,eAAa5O,EAAM6O,GAC/B,IAAI3Y,EAAO,QAAUyP,KAAKC,UAAU5F,GAChCxL,EAAO+Z,YAAUM,GACrB,OAAO3Y,GAAQ1B,EAAO,IAAIA,EAAO,IAIrC,SAAS+Z,YAAUrY,GACf,IAAIxC,EAAKub,KACT,IAAKvb,KAAOwC,EAAM+Y,EAAElb,KAAKmb,mBAAmBxb,GAAO,IAAMwb,mBAAmBhZ,EAAKxC,KACjF,OAAOub,EAAEE,KAAK,KAAK3Q,QAAQ,OAAQ,KCjDvC,SAAS4Q,aAAWC,EAAare,EAAUse,GACvC,IAAI9C,EAAQ6C,EAAY7b,IAQxB,SAAkB4K,GACd,OAAO,SAASmR,GAAO,OAAOnR,EAAGpK,MAAM,KAAKub,IATpBC,CAASxe,EAASye,QAAUze,EAAS0e,QAAUJ,IAK3E,OAHIte,EAASwd,OAAQxd,EAASwd,OAAOhC,EAAOxb,EAAUwd,UACjDA,SAAOhC,EAAOxb,GAEZwb,ECLX,SAASqS,gBAAgBxY,GACrB,SAASyY,IACLjuB,KAAKkuB,UAAY1Y,IAOrB,OAJAyY,EAAQvtB,UAAU8U,IAAM,WACpB,OAAOA,IAAQxV,KAAKkuB,WAGjBD,ECGX,SAASE,gBAAgBC,EAAUC,GAsC/B,SAASC,IAEL,IACIzuB,EAAU0uB,EAAO1uB,QACjB2V,EAAMgZ,EAAKC,QAAQjZ,MACnBkZ,EAAWF,EAAKG,WAAanZ,EAGjC,GAAIA,GAAOgZ,EAAKG,WAGZ,OAFAJ,EAAO9K,MAAM,kBACb5jB,EAAQ+uB,aAAeJ,EAAK1f,UAKhC,IAAI+f,EAAoC,OAAtBhvB,EAAQkK,UAAqByL,EAAMkZ,EAGrDpuB,OAAEO,OAAO0tB,EAAQO,EAAYD,IAC7BL,EAAKO,UAAYX,EAASE,EAAMxhB,KAAKC,IAjBtB,IAiBmC2hB,IAClDH,EAAO9K,MAAM,cAGjB,SAASqL,EAAYjO,GACjB,IAAImO,EAAOliB,KAAKsG,MAAMyN,EAAK,KAGvBoO,EAAsBD,OAGtBE,EAAsBD,EAAsB,GAUhD,OANI7uB,QAASygB,EACTsO,MAVQriB,KAAKsG,MAAM4b,QAWnBI,QARUtiB,KAAKsG,MAAM6b,EAAsB,IAS3CI,QANUviB,KAAKwiB,KAAKJ,GAOpBK,MAAO1O,EAAO,KA3EtB,IAAI2N,EAAOxuB,KACPuuB,KACJC,EAAK7O,MAGL,SAAoB9f,GAChB,IAAKS,OAAEY,cAAcrB,GACjB,MAAM,IAAI2B,MAAM,oCAGpB+sB,EAASC,EAAKgB,YAEP3vB,QAAUS,OAAEgI,SAASzI,GACxBkK,UAAY,OACZvD,SAAW,SACXmR,MAAO,EACPiX,aAAc,EACdjb,SAAW,IAIf6a,EAAKC,QAAU,IAAIJ,EACnBG,EAAKG,WAAuC,IAA1BJ,EAAO1uB,QAAQ8T,SAEjC4a,EAAO1uB,QAAQ8X,MAAQ6W,EAAK7W,OAG5B2W,KAxBJE,EAAKiB,KA2BL,WACI,IAAI5vB,EAAU0uB,EAAO1uB,YACrB0uB,EAASC,EAAKgB,WACdpB,EAASsB,OAAOlB,EAAKO,WACrBlvB,EAAQ+uB,aAAeJ,EAAK1f,UAgDpC,SAAS6gB,eAAeC,GACpB,OACIC,WAAY1B,gBACZ2B,SAAU,IACV9L,KAAM,SAASuK,EAAQwB,EAASC,EAAMxB,GAkBlC,SAAS1f,IACLmhB,GAAiBA,EAAcnhB,SAC/BmhB,EAAgB,KAnBpB,IACIA,EADAzpB,EAAW,wHAEX0pB,EAAa3B,EAAO4B,OAExB3B,EAAK7W,KAOL,WACIsY,EAAgB/tB,QAAQoL,QAAQ9G,GAChCupB,EAASK,QAAQH,GACjBL,EAASK,EAAcrP,WAAvBgP,CAAmCM,IATvC1B,EAAK1f,OAASA,EACd0f,EAAKgB,SAAW,WAAW,OAAOU,GAElCA,EAAWG,QAAU,SAAarL,GAAG,OAAOA,EAAE,GAAK,IAAIA,EAAIA,GAC3DuJ,EAAOpK,IAAI,WAAWrV,KC5GlC,SAASwhB,QAAQC,EAAWC,GAQxB,SAAS1mB,IAAY1J,EAAUowB,EAAOlgB,QAAQigB,EAAUC,EAAOpwB,KAAY0J,GAP3E,IAAI1J,EAAU,EAEd0J,IACAA,IACAA,IACAA,IAKJ,SAAS2mB,WAAWxuB,EAAK0lB,GACrB,IAAI+I,EAAM,IAAIC,MACdD,EAAI9gB,OAAS+X,EACb+I,EAAI7gB,QAAU8X,EACd+I,EAAIrhB,IAAMpN,ECbd,SAAS2uB,iBAAiBtsB,EAAYusB,EAAcjB,EAAUnO,EAAIqP,GAO9D,SAASC,IACDhB,GACAA,EAASjhB,SAGTyf,GACAA,EAAOyC,WAGPzP,GACAA,EAAS9R,UAGbwhB,EAAUniB,SACVgiB,EAAU1iB,IAAI,UAAW2iB,GACzBF,EAAaxP,YAAY,cArB7B,IAAI0O,EAAUxB,EAAQhN,EAClB0P,EAAY/uB,QAAQoL,QAAQ,oCAEhCtN,KAAKmd,KAqBL,SAAqBtd,GACjB,IAAIuF,EAAUvF,EAAQuF,YA+BtB,OA5BA2rB,IAGAxP,EAAWE,EAAGe,QAGd+L,GAAU1uB,EAAQ0uB,QAAUjqB,GAAY6rB,OAGxC5B,EAAO2C,MAAQH,EACfD,EAAUzjB,GAAG,UAAW0jB,GAIxBxC,EAAOpmB,OAAS7H,OAAEkG,SAAS3G,EAAQsI,OAAnB7H,CAA2B8E,GAC3CmpB,EAAOtpB,KAAO3E,OAAEkG,SAAS3G,EAAQoF,KAAnB3E,CAAyB8E,GACvCmpB,EAAO4C,OAAS7wB,OAAEkG,SAAS3G,EAAQsxB,OAAnB7wB,CAA2B8E,GAG3C2qB,EAAW7tB,QAAQoL,QAAQ9G,YAC3BqqB,EAAazP,SAAS,cAGtByP,EAAaT,QAAQa,GACrBJ,EAAaT,QAAQL,GACrBH,EAASG,EAASnP,WAAlBgP,CAA8BrB,GAC9BA,EAAO6C,UAEA7P,EAASjS,SApDpBtP,KAAKkxB,MAAQH,ECFjB,SAASM,kBAAgB9C,EAAQN,EAASqD,EAAQtB,EAAOtO,EAAWtf,EAAQkC,EAAWitB,GACnF,IACIloB,EACAhE,EAFAmS,EAAOxX,KAGPsI,GACAkpB,KAAMC,IACNpsB,KAAMkpB,EAAOlpB,MAGjBrF,KAAKikB,MAAQsK,EACbvuB,KAAKyuB,QAAU,IAAIR,EAGnBjuB,KAAK0xB,cA+BL,SAAuBC,EAAS9xB,GA6E5B,SAAS+xB,EAAiBhvB,GACtB,IAAIoB,EAAWpB,EAAMoB,SACjB6tB,EAAexsB,EAAKwsB,aAYxB,OATAvxB,OAAEiT,SAASse,KAAkBA,GAAc,IAC3CvxB,OAAEiT,SAASvP,KAAcA,GAAU,IAE/B1D,OAAEwxB,QAAQD,EAAc7tB,GACxB2tB,EAAQI,aAAa,WAAW,GAEhCJ,EAAQI,aAAa,WAAW,GAG7BnvB,EA1FX/C,EAAUS,OAAEgI,SAASzI,MAAeyI,GACpCjD,EAAOxF,EAAQwF,KAEf,IAAI2sB,EAAaV,EAAOtB,EAAM2B,SAC1BM,EAAY5sB,EAAK0C,eAAe,QAAU1C,EAAKmsB,KAAO3xB,EAAQ2xB,KAGlEjD,EAAO2D,MAAQP,EAGftoB,EAAM2oB,EAAWzD,EAAO4D,SAKpB7xB,OAAEyI,YAAYM,IACdA,KACA2oB,EAAW1sB,OAAOipB,EAAO4D,QAAS9oB,IAElCqY,GAAW,aAAa0Q,KAAK,2CAA6C/oB,EAAInJ,KAAO,KAGpFmF,EAAKnF,MACNwhB,GAAW,aAAa0Q,KAAK,oFAIjC5a,EAAKnO,IAAMsoB,EAAQU,YAAchpB,EAEjC/I,OAAEgI,SAASe,GACPnJ,KAAMmF,EAAKnF,KACX8D,SAAUiuB,EACVnuB,OAAQytB,MAGZhD,EAAOvqB,SAAW2tB,EAAQW,WAAajpB,EAAIrF,SAI3C2tB,EAAQY,YAAYrvB,KAAK,SAASsvB,GAC9B,OAAOA,EAAWxuB,WAItB2tB,EAAQc,SAASvvB,KAAK,SAASwvB,GAC3B,IAAInd,EAAUiC,EAAKiX,QAAQjZ,MAU3B,OARAnM,EAAIrF,SAAW0uB,EACfrpB,EAAIkM,QAAUA,EAGTlM,EAAIspB,kBACLtpB,EAAIspB,gBAAkBpd,GAGnBlM,IAGXklB,EAAOqE,OAAO,WAAW,SAASC,EAAUC,GACnCxyB,OAAEwxB,QAAQe,EAAUC,KACrBnB,EAAQoB,cAAcF,GACtBzwB,EAAOiD,EAAK2tB,UAAW3pB,IAAIA,OAInCklB,EAAOpK,IAAI,WAAY,WACnB/hB,EAAOiD,EAAK4tB,WAAY5pB,IAAIA,MAG5BhE,EAAK6tB,UACLvB,EAAQc,SAASvvB,KAAK0uB,GACtBvsB,EAAKrB,SAAW4tB,EAAiB5xB,KAAKqJ,MAG1CjH,EAAOiD,EAAK8tB,UAAW9pB,IAAIA,KArG/BklB,EAAOpK,IAAI,eAAgB,SAAS9X,GAChCA,EAAM0G,iBACN1J,EAAIykB,cAAWlX,EACfvN,EAAI+pB,cAAgB5b,EAAKiX,QAAQjZ,MACjCpT,EAAOiD,EAAKguB,UAAWhqB,IAAIA,MAG/BklB,EAAOpK,IAAI,gBAAiB,SAAS9X,GACjCA,EAAM0G,iBACN1J,EAAIykB,UAAW,EACfzkB,EAAI+pB,cAAgB5b,EAAKiX,QAAQjZ,MACjCpT,EAAOiD,EAAKiuB,WAAYjqB,IAAIA,MAGhCklB,EAAOpK,IAAI,gBAAiB,SAAS9X,GACjCA,EAAM0G,iBACN1J,EAAIoK,SAAU,EACdrR,EAAOiD,EAAKkuB,WAAYlqB,IAAIA,MC5CpC,SAASmqB,cACL,IAAIC,EAAK,EACT,OAAO,WAAiB,OAAOA,KCgBnC,SAASC,YAAYnF,EAAQjqB,EAAYqvB,EAAWnvB,EAAwBikB,EAAqBmL,GAC7F,IACIrK,EADAnjB,EAAO,IAAIutB,EAAUpF,EAAOxuB,QAE5B2B,EAAS4C,EAAW5C,OACpBtB,EAAUkE,EAAWlE,YAEzBJ,KAAKoG,KAAOA,EACZpG,KAAK6zB,WAmCL,SAAqBC,GACjB,IAAI3zB,EAAWG,OAAEyF,IAAIwoB,EAAQ,yBACxBpuB,IAIL2zB,EAAUnU,MAAMxf,GAChB2zB,EAAUtE,WAAWrL,IAAI,YAAa,WAqBlC,SAAS4P,IACL3tB,EAAKyI,MArBT,IAAIjK,EAAUzE,EAASyE,QAGnBA,GAEAtE,OAAE2C,SAAS2B,KAAaA,GAAWK,KAAML,IAGzCtE,OAAEgI,SAAS1D,GACPuD,OAAQ,aACR6rB,SAAUzK,IAIdqK,EAAQzW,KAAKvY,GAASkL,KAAKikB,IAG3BA,MASRxF,EAAOpK,IAAI,WAAY7jB,OAAE2F,KAAK6tB,EAAUrE,KAAMqE,MAnElD1zB,EAAQ2sB,YAAc3sB,EAAQ2sB,cAG9BxD,GACI7nB,OAAQA,EACRtB,QAASA,EACT2sB,UAAW3sB,EAAQ2sB,WAIvBzsB,OAAEO,OAAO2D,EAAuB+kB,GAChCjpB,OAAEO,OAAO4nB,EAAoBc,GAG7BnjB,EAAK0D,OAELykB,EAAOpK,IAAI,aAOX,SAAc9X,EAAOmG,GACjBpM,EAAK0D,KAAK0I,GACV+b,EAAO9K,MAAM,mBARjB8K,EAAOpK,IAAI,aAWX,SAAc9X,EAAOmG,GACjBpM,EAAKyD,KAAK2I,GACV+b,EAAO9K,MAAM,mBAXjB8K,EAAOpK,IAAI,YAAa,SAAS9X,EAAOhD,EAAKwkB,GACzCznB,EAAKiD,IAAIA,EAAKwkB,EAAUU,EAAO7sB,UAqDvC,SAASqiB,YAAU6L,EAAUqE,EAAUC,EAAWxS,GAC9C,OACImO,WAAY6D,YACZS,UAAS,EACTxmB,SAAQ,EACRnH,SAAU,uBACV4tB,SAAU,UAAU,WACpBpQ,KAAM,SAASC,EAAOoQ,EAAetd,EAAMud,GAcvC,SAASC,IACFC,IACCA,EAAgB1lB,SAChB0lB,EAAkB,MAEnBC,IACCA,EAAazD,WACbyD,EAAe,MAEhBC,IACCT,EAASU,MAAMD,EAAgB,WAC3BF,EAAkB,OAEtBA,EAAkBE,EAClBA,EAAiB,MAIzB,SAASE,IACL,IAAI9H,EAAO1mB,EAAKhG,UAEhB,GAAI0sB,EAAK,CACL,IAAI+H,EAAW5Q,EAAMkM,OACjB2E,EAAUC,OAAOvuB,YAErBquB,EAAS/H,KAAOA,EAChBkI,EAAcF,EAAShI,EAAKmI,SAG5BV,IAGAG,EAAiB9E,EAASkF,EAATlF,CAAkBiF,GAEnCZ,EAASiB,MAAMR,EAAgBL,IAE/BI,EAAeI,GACFpR,MAAM,sBAEnB8Q,IAQR,SAASS,EAAc1nB,EAAS6nB,GAC5B,GAAKA,EAAL,CAIA,IAAIC,EAAaD,EAAcjO,MAAM,KAErC5mB,OAAEwC,KAAKsyB,EAAY,SAASC,GAEnBnB,EAAUhtB,IAAI,IAAMmuB,EAAY,eACjC3T,GAAW,OAAO,cAAchd,MAAM,4BAA8B2wB,EAAY,OAKxF/nB,EAAQ8T,SAAS+T,IA3ErB,IAGIV,EACAC,EACAF,EALAhG,EAAO8F,EAAM,GACbluB,EAAOooB,EAAKpoB,KACZkvB,EAAUhB,EAAM,GAKpB9F,EAAKqF,WAAWyB,GAEhBrR,EAAME,IAAI,gBA+CV,WACIsQ,EAAa3H,KAAO1mB,EAAKhG,YA/C7B6jB,EAAME,IAAI,gBAAiByQ,GAC3BA,MCtGZ,SAASW,YAAYhH,EAAOH,EAAU9pB,EAAYsvB,GAC9C,IAAIpc,EAAOxX,KAEXuuB,EAAO7sB,OAAS4C,EAAW5C,OAC3B6sB,EAAOnuB,QAAUkE,EAAWlE,QAO5BJ,KAAKw1B,QAAU,SAASC,GACpB,IAAI1I,EAAYwB,EAAOnuB,QAAQ2sB,UAE/BzsB,OAAEwC,KAAKyrB,EAAOzB,KAAKC,UAAW,SAASvB,GAEnC,GAAKA,EAAEtrB,OAAUu1B,GAAUjK,EAAEiK,QAA7B,CAGA,IAAIpsB,EAAM0jB,EAAUvB,EAAEtrB,MAGlBmJ,EAAImkB,UAGRe,EAAO9K,MAAM,YAAapa,EAAKmO,EAAKnO,KACpCA,EAAImkB,SAAU,OAUtBe,EAAOrmB,OAAS,SAASwtB,GAErB,IAAIC,EAAQpH,EAAOqH,SAASC,OAM5B,GAFAtH,EAAOuH,eAAgB,GAElBH,IAA4B,IAAnBD,EACV,OAAO,EAKXnH,EAAOwH,WAAW,gBAElBve,EAAKiP,UAGL8H,EAAO9K,MAAM,eAMjB8K,EAAOyH,QAAU,SAASC,GACtB,IAAI1V,EAAMre,QAAQoL,QAAQ2oB,EAAOzjB,QACW,WAAtBxS,KAAK8sB,KAAKkJ,SAIVzV,EAAI2V,SAAS,WAE/B3H,EAAOwH,WAAW,iBAClBve,EAAKiP,UACL8H,EAAO9K,MAAM,eAEblD,EAAIa,SAAS,WAOrBmN,EAAO1kB,KAAO,WAEV2N,EAAKiP,UACL8H,EAAO9K,MAAM,eASjBzjB,KAAKymB,QAAU,WAGXjP,EAAK2e,MAAM1G,OAGXjY,EAAKge,QAAQjH,EAAOzB,KAAK2I,SAG7Bz1B,KAAKgP,MAiBL,SAAmBmnB,GAmDf,SAASpC,KACQa,EAAQuB,MAAMC,aAAe91B,OAAEyI,YAAY6rB,EAAQuB,MAAMC,eAC5D7H,EAAOrmB,QAAO,GApD5B,IAAI0sB,EAAUrG,EAAOzB,KACrBtV,EAAK2e,MAAQA,EAGb3e,EAAKnO,KACDnJ,KAAM00B,EAAQ10B,KACdguB,WAAY,IAAI5Y,MAIhBsf,EAAQuB,QACRA,EAAMxW,MAAMiV,EAAQuB,OACpBA,EAAM3G,WAAWrL,IAAI,YAGzB,WACI,IACI/e,EADAR,EAAUgwB,EAAQuB,MAAMvxB,QAG5B4S,EAAKnO,IAAIoK,SAAU,EACnB8a,EAAOwH,WAAW,iBAGdnxB,GAEAQ,GACI6nB,UAAW2H,EAAQlxB,MACnBspB,UAAW4H,EAAQvvB,KACnB3D,OAAQ4C,EAAW5C,OACnBtB,QAASkE,EAAWlE,SAIxBE,OAAE2C,SAAS2B,KAAaA,GAAWK,KAAML,IAGzCtE,OAAEgI,SAAS1D,GACPuD,OAAQ,aACR6rB,SAAU5uB,EACVmpB,OAAQA,IAIZqF,EAAQzW,KAAKvY,GAASkL,KAAKikB,IAG3BA,QA5DZxF,EAAOqE,OAAO,oBASd,WACIrE,EAAO9K,MAAM,mBAV+B,GAGhD8K,EAAOpK,IAAI,mBAAoB,WAC3BoK,EAAOrmB,WAoEf,SAAS6b,YAAUsS,GACf,OACI1oB,SAAS,EACTkiB,WAAY0F,YACZ/uB,SAASA,WACT4tB,SAAU,UAAU,WACpBpQ,KAAM,SAASuK,EAAQhO,EAAKyP,EAAOsG,GAC/B,IAAIxJ,EAAOyB,EAAOzB,KAClBuJ,EAAQlqB,SAAS,EAAE,GAEnBmqB,EAAM,GAAGtnB,MAAMsnB,EAAM,IAGjBh2B,OAAEgT,WAAWwZ,EAAKyJ,iBAClBhI,EAAOqE,OAAO,WACVrE,EAAOqH,SAAS7D,aAAa,iBAAkBjF,EAAKyJ,eAAezJ,EAAMyB,EAAOnuB,cC7MpG,SAGSo2B,sBAAsBC,GAC3B,OAAOA,EAAOC,OAAO,GAAG7oB,cAAgB4oB,EAAO/L,MAAM,GAIzD,SAAS3G,YAAU6L,EAAUsE,GACzB,OACIvmB,SAAS,EACTnH,SAASA,WACTspB,SAAU,EACV7L,OACI5e,KAAM,aACNjF,QAAS,iBAEb4jB,KAAM,SAASC,EAAM3W,GACjB,IAAIrN,EAAOgkB,EAAM5e,KAAKpF,MAAQ,OAC1B02B,EAAerpB,EAAQspB,WAAWpP,GAAG,GACrCqP,EAAWC,OAASN,sBAAsBv2B,GAG9C,IAAKi0B,EAAUhtB,IAAI2vB,EAAW,aAC1B,MAAM,IAAIr1B,MAAO,2BAA6BvB,EAAO,KAIzD42B,EAAWv2B,OAAEy2B,UAAUF,GAGvBF,EAAa5f,KAAK8f,GAAS,GAC3BjH,EAAS+G,EAAT/G,CAAuB3L,KCjCnC,SAIS+S,gBACL,OACIrpB,SAAS,EACTnH,SAAU,SAASoE,EAAGmM,GAClB,MAAO,cAAeA,EAAOkgB,aAAeC,kBAEhD9C,SAAU,OAAQ,WAClBvE,WAAY,kBACZsH,aAAc,OACdlT,OACI5e,KAAM,cAEV2e,KAAM,SAASC,EAAO3W,EAASyJ,EAAMud,GACjC,IAAIzsB,EAAOysB,EAAM,GACb3C,EAAU2C,EAAM,GAChB9F,EAAOvK,EAAMuK,KACbnpB,EAAO4e,EAAM5e,KAEjB4e,EAAMpc,KAAOA,EACboc,EAAMmT,eAiBN,SAAwBnB,GACpB,IACIjyB,EADS9B,QAAQoL,QAAQ2oB,EAAOzjB,QACdjB,MAClB8lB,EAAQhyB,EAAKiyB,WAAatzB,EAASsM,OAEvC2T,EAAMjgB,SAAWA,EAAS0mB,MAAM,EAAE2M,IApBtC7I,EAAKkD,cAAcC,GACfH,KAAM,KAGVnsB,EAAKkyB,YAAcjqB,EAAQrH,KAAK,mBAAoB,SAAUoG,GACvC,KAAhBA,EAAMyG,QACLmR,EAAMuT,OAAO,WACTvT,EAAMR,MAAM,sBAEhBpX,EAAM0G,sBCpC1B,SAAS0kB,oBAAoBn1B,EAASgP,GAiClC,OA/BA,SAAqBomB,EAAY73B,GAC7B,IAAI83B,EAAUrmB,EAAMomB,GA2BpB,OAxBAC,EAAUr3B,OAAEqC,IAAIg1B,EAAS,SAASC,EAAQhf,GAStC,OAPKtY,OAAEY,cAAc02B,KACjBA,GAAU5W,KAAK4W,IAGft3B,OAAEyI,YAAY6uB,EAAOh1B,SACrBg1B,EAAOh1B,MAAQ/C,EAAQg4B,cAAgBjf,EAAQ,EAAIgf,EAAO5W,MAEvD4W,IAGP/3B,EAAQqkB,UACRyT,EAAUr3B,OAAEq3B,GAASzT,UAAUthB,SAG/B/C,EAAQ+T,YACR+jB,EAAUr1B,EAAQq1B,IAGtBr3B,OAAEwC,KAAK60B,EAAS,SAASC,EAAOhf,GAC5Bgf,EAAOE,MAAQlf,IAGZ+e,GCzBf,SAAS5T,YAAUzS,EAAM8c,GACrB,OACIzgB,SAAS,EACTnH,SAASA,WACT4tB,SAAU,UAAU,QACpBvE,WAAY,kBACZsH,aAAc,OACdlT,OACI5e,KAAM,cAEV2e,KAAM,SAASC,EAAO3W,EAASyJ,EAAMud,GACjC,IAAI3C,EAAU2C,EAAM,GAChB9F,EAAOvK,EAAMuK,KAEjBvK,EAAMpc,KAAOysB,EAAM,GAEnB9F,EAAKkD,cAAcC,GACfH,KAAMC,MAIVxN,EAAMsJ,OACFoK,QAASrmB,EAAM2S,EAAM5e,KAAKsyB,YAAe1T,EAAM5e,OAInD4e,EAAM8T,WAAa,eAAgB9T,EAAM5e,MAAQ4e,EAAM5e,KAAK0yB,WAK5D9T,EAAMsT,WAAa,WACfnJ,EAAS,WACLnK,EAAMR,MAAM,yBC7BhC,SAASM,YAAUzS,EAAO0mB,EAAcpI,GACpC,OACIjiB,SAAS,EACTymB,SAAU,WACVvE,WAAY,kBACZsH,aAAc,OACdlT,OACI5e,KAAM,cAEV2e,KAAM,SAASC,EAAO3W,EAASyJ,EAAMud,GA2FjC,SAAS2D,EAAkBr1B,GACvB,IAAI4rB,EAAOmD,EACX,OAAInD,EAAK0J,SAASt1B,QACd4rB,EAAKuD,aAAa,YAAY,IAG9BvD,EAAKuD,aAAa,YAAY,GACvBnvB,GAjGf,IAAI+uB,EAAU2C,EAAM,GAChB9F,EAAOvK,EAAMuK,KACbnpB,EAAO4e,EAAM5e,KAoDjB,OAjDAiI,EAAQwI,KAAKtP,YACbopB,EAAStiB,EAAQsT,WAAjBgP,CAA6B3L,GAE7BuK,EAAKkD,cAAcC,GACfH,KAAMC,MAIVxN,EAAMsJ,OACFoK,QAASrmB,EAAM2S,EAAM5e,KAAKsyB,YAAe1T,EAAM5e,OAInD4e,EAAM2O,OAAO,cAAc,SAASC,EAAUC,GACtCD,IAAaC,IAIjB7O,EAAMjgB,SAAW6uB,GAAYA,EAASjwB,SAStCqhB,EAAM5e,KAAK8yB,WACXxG,EAAQY,YAAYrvB,KAAK+0B,GACzBtG,EAAQc,SAAS9H,QAAQsN,GACzBA,EAAkBhU,EAAMjgB,WASxBigB,EAAM5e,KAAK+yB,QACXnU,EAAM5e,KAAK2G,MAAQ,aAEC,cAApBiY,EAAM5e,KAAK2G,QAA0BiY,EAAM5e,KAAK+yB,SAAU,GAI9DnU,EAAMoU,WACNpU,EAAMqU,eAEEjzB,EAAK2G,OACT,IAAK,aACDiY,EAAMsU,UAAY,6CAClBtU,EAAMuU,cAAgB,iBACtB,MACJ,IAAK,eACDvU,EAAMsU,UAAY,cAClBtU,EAAMuU,cAAgB,kBACtBvU,EAAMoU,QAAQI,WAAa,IAC3B,MACJ,IAAK,OAEL,QACIxU,EAAMsU,UAAY,aAClBtU,EAAMuU,cAAgB,kBAG9BnzB,EAAKqzB,WAAazU,EAAMqU,YAAYI,SAAWrzB,EAAKqzB,UAMpDzU,EAAMsT,WAAa,SAAShlB,GACnB0R,EAAM5e,KAAKkyB,YAIDr1B,QAAQoL,QAAQiF,EAAEomB,eAAezC,SAAS8B,EAAaY,cAIlE3U,EAAMR,MAAM,uBClGhC,SAASM,YAAUzS,GACf,OACI3D,SAAS,EACTnH,SAASA,WACT4tB,SAAU,YAAa,WACvBvE,WAAY,kBACZsH,aAAc,OACdlT,OACI5e,KAAM,cAEV2e,KAAM,SAASC,EAAO3W,EAASyJ,EAAMud,GAiFjC,SAAS2D,EAAkBr1B,GAEvB,OADA+uB,EAAQI,aAAa,YAAaJ,EAAQuG,SAASt1B,IAC5CA,EAlFX,IAAI4rB,EAAOvK,EAAMuK,KACbmD,EAAU2C,EAAM,GAChBjvB,EAAO4e,EAAM5e,KAuCjB,OArCAmpB,EAAKkD,cAAcC,GACfH,UAGJG,EAAQuG,SAAW,WACf,OAAO53B,OAAE4hB,QAAQyP,EAAQW,aAI7BrO,EAAMsJ,OACFoK,QAASrmB,EAAM2S,EAAM5e,KAAKsyB,YAAe1T,EAAM5e,OAInD/E,OAAEwC,KAAKmhB,EAAMsJ,MAAMoK,QAAS,SAASC,IAE5Bt3B,OAAE2I,QAAQgb,EAAMjgB,SAAU4zB,EAAOh1B,SAClCg1B,EAAOiB,QAAS,KAUpB5U,EAAM5e,KAAK+yB,QACXnU,EAAM5e,KAAK2G,MAAQ,aAEC,cAApBiY,EAAM5e,KAAK2G,QAA0BiY,EAAM5e,KAAK+yB,SAAU,GAI9DnU,EAAMoU,WACNpU,EAAMqU,eAEEjzB,EAAK2G,OACT,IAAK,aACDiY,EAAMsU,UAAY,6CAClBtU,EAAMuU,cAAgB,iBACtB,MACJ,IAAK,eACDvU,EAAMsU,UAAY,cAClBtU,EAAMuU,cAAgB,kBACtBvU,EAAMoU,QAAQI,WAAa,IAC3B,MACJ,IAAK,OAEL,QACIxU,EAAMsU,UAAY,aAClBtU,EAAMuU,cAAgB,kBAG9BnzB,EAAKqzB,WAAazU,EAAMqU,YAAYI,SAAWrzB,EAAKqzB,UAGhDrzB,EAAK8yB,WACLxG,EAAQc,SAAS9H,QAAQsN,GACzBA,EAAkBtG,EAAQW,aAK9BrO,EAAM2O,OAAO,gBAAgB,SAASC,EAAUC,GACxCD,IAAaC,IAKjB7O,EAAMjgB,SAAW1D,OAAEuyB,GACdhqB,OAAO,SAAS+uB,GAAQ,OAAOA,EAAOiB,SACtCC,MAAM,SACNl2B,WACP,KChGd,SAASm2B,YACP,IACE,IAAIC,EAAI,IAAIC,kBAAkB,OAASC,QAAUC,IAAK,SACtD,MAAQ,QAAUH,EAAE/4B,MAAQ,QAAU+4B,EAAEE,OAAOC,IAC/C,MAAO5mB,IAET,OAAO,ECWT,SAAS6mB,aAAcxuB,EAAI3K,EAAMsN,EAAI8rB,GACnC,OAAOzuB,EAAGgE,iBAAiB3O,EAAMsN,EAAI8rB,GAGvC,SAASC,aAAc1uB,EAAI3K,EAAMsN,GAC/B,OAAO3C,EAAG2uB,YAAY,KAAOt5B,EAAMuI,KAAKoC,EAAI3K,EAAMsN,IAGpD,SAASisB,gBAAiB5uB,EAAI3K,EAAMsN,EAAI8rB,GACtC,OAAOzuB,EAAGmE,oBAAoB9O,EAAMsN,EAAI8rB,GAG1C,SAASI,gBAAiB7uB,EAAI3K,EAAMsN,GAClC,IAAImsB,EAAWC,OAAO/uB,EAAI3K,EAAMsN,GAChC,GAAImsB,EACF,OAAO9uB,EAAGgvB,YAAY,KAAO35B,EAAMy5B,GAIvC,SAASG,eAAgBjvB,EAAI3K,EAAMiyB,GACjC,IAAI3f,GAAgC,IAA5BunB,WAAS7wB,QAAQhJ,GAiBhB,IAAI85B,YAAY95B,GAAQi5B,OAAQhH,IAXzC,WACE,IAAI3f,EAOJ,OANIynB,MAAIC,aACN1nB,EAAIynB,MAAIC,YAAY,UAClBC,UAAUj6B,GAAM,GAAM,GACf+5B,MAAIG,oBACb5nB,EAAIynB,MAAIG,qBAEH5nB,EAdmD6nB,GACxDxvB,EAAGyvB,cACLzvB,EAAGyvB,cAAc9nB,GAEjB3H,EAAG0vB,UAAU,KAAOr6B,EAAMsS,GAiB9B,SAASgoB,eAAgB3vB,EAAI3K,EAAMsN,GACjC,OAAO,SAAkBitB,GACvB,IAAIjoB,EAAIioB,GAAiB94B,eAAO2K,MAChCkG,EAAEC,OAASD,EAAEC,QAAUD,EAAEkoB,WACzBloB,EAAEQ,eAAiBR,EAAEQ,gBAAkB,WAA6BR,EAAEmoB,aAAc,GACpFnoB,EAAEooB,gBAAkBpoB,EAAEooB,iBAAmB,WAA8BpoB,EAAEqoB,cAAe,GACxFroB,EAAEO,MAAQP,EAAEO,OAASP,EAAEsoB,QACvBttB,EAAGpJ,KAAKyG,EAAI2H,IAIhB,SAAS/J,KAAMoC,EAAI3K,EAAMsN,GACvB,IAAIsX,EAAU8U,OAAO/uB,EAAI3K,EAAMsN,IAAOgtB,eAAe3vB,EAAI3K,EAAMsN,GAO/D,OANAutB,UAAU53B,MACR2hB,QAASA,EACTvX,QAAS1C,EACT3K,KAAMA,EACNsN,GAAIA,IAECsX,EAGT,SAAS8U,OAAQ/uB,EAAI3K,EAAMsN,GACzB,IAAIkI,EAAIqT,KAAKle,EAAI3K,EAAMsN,GACvB,GAAIkI,EAAG,CACL,IAAIoP,EAAUiW,UAAUrlB,GAAGoP,QAE3B,OADAiW,UAAUplB,OAAOD,EAAG,GACboP,GAIX,SAASiE,KAAMle,EAAI3K,EAAMsN,GACvB,IAAIkI,EAAGslB,EACP,IAAKtlB,EAAI,EAAGA,EAAIqlB,UAAUxqB,OAAQmF,IAEhC,IADAslB,EAAOD,UAAUrlB,IACRnI,UAAY1C,GAAMmwB,EAAK96B,OAASA,GAAQ86B,EAAKxtB,KAAOA,EAC3D,OAAOkI,EC3Fb,SAASulB,YAAaj2B,GACpB,IAAIk2B,EAAS/c,MAAMnZ,GAMnB,OALIk2B,EACFA,EAAOC,UAAY,EAEnBhd,MAAMnZ,GAAak2B,EAAS,IAAIE,OAAOxb,MAAQ5a,EAAY8J,IAAK,KAE3DosB,EAGT,SAAS7Z,SAAUxW,EAAI7F,GACrB,IAAI3E,EAAUwK,EAAG7F,UACZ3E,EAAQkQ,OAED0qB,YAAYj2B,GAAWqL,KAAKhQ,KACtCwK,EAAG7F,WAAa,IAAMA,GAFtB6F,EAAG7F,UAAYA,EAMnB,SAASq2B,QAASxwB,EAAI7F,GACpB6F,EAAG7F,UAAY6F,EAAG7F,UAAU4I,QAAQqtB,YAAYj2B,GAAY,KAAKs2B,OClBnE,SAASC,QAASC,EAAmB17B,GAqDnC,SAAS27B,EAAa5wB,GACpB,OAAyC,IAAlC6wB,EAAMC,WAAWzyB,QAAQ2B,IAAc+wB,EAAEH,YAAY5wB,GAG9D,SAASgxB,EAAQ9sB,GACf,IAAI+sB,EAAK/sB,EAAS,SAAW,MAC7BgtB,OAAOpvB,gBAAiBmvB,EAAI,YAAaE,GACzCD,OAAOpvB,gBAAiBmvB,EAAI,UAAWG,GAGzC,SAASC,EAAmBntB,GAE1BgtB,OAAOpvB,gBADEoC,EAAS,SAAW,MACD,YAAaotB,GAG3C,SAASC,EAAWrtB,GAClB,IAAI+sB,EAAK/sB,EAAS,SAAW,MAC7BstB,UAAUP,GAAInvB,gBAAiB,cAAe2vB,GAC9CD,UAAUP,GAAInvB,gBAAiB,QAAS2vB,GAQ1C,SAASA,EAAgB9pB,GACnB+pB,GACF/pB,EAAEQ,iBAIN,SAASgpB,EAAMxpB,GAKb,GAJAgqB,EAAShqB,EAAEiqB,QACXC,EAASlqB,EAAEmqB,UAE0B,IAAxBC,iBAAiBpqB,IAAYA,EAAEqqB,SAAWrqB,EAAEsqB,SACzD,CAGA,IAAI9B,EAAOxoB,EAAEC,OACTpN,EAAU03B,EAAS/B,GAClB31B,IAGLk3B,EAAWl3B,EACX62B,IACe,cAAX1pB,EAAEtS,OACA88B,QAAQhC,GACVA,EAAKiC,QAELzqB,EAAEQ,oBAKR,SAASmpB,EAAwB3pB,GAC/B,GAAK+pB,EAGL,GAA4B,IAAxBK,iBAAiBpqB,IAKrB,QAAkB,IAAdA,EAAEiqB,SAAsBjqB,EAAEiqB,UAAYD,QAAwB,IAAdhqB,EAAEmqB,SAAsBnqB,EAAEmqB,UAAYD,EAA1F,CAGA,GAAId,EAAEsB,yBAA0B,CAC9B,IAAIT,EAAUU,SAAS,UAAW3qB,GAC9BmqB,EAAUQ,SAAS,UAAW3qB,GAElC,GAAIwqB,QADsB/C,IAAImD,iBAAiBX,EAASE,IAEtD,OAIJ,IAAIU,EAAUd,EACdL,GAAkB,GAClBE,IACAttB,IACA8Q,EAAMyd,GAEN,IAAIC,EAASC,UAAUC,GACvBC,EAAWN,SAAS,QAAS3qB,GAAK8qB,EAAOnpB,KACzCupB,EAAWP,SAAS,QAAS3qB,GAAK8qB,EAAOhpB,IAEzCqpB,QAAQpzB,IAAIqzB,GAASJ,EAAO,cAC5BK,IACAC,EAAKtrB,SA5BHypB,MA+BJ,SAASc,EAAU/B,GACjB,KAAIU,EAAMqC,UAAYC,GAGlBvC,EAAYT,IAAhB,CAIA,IADA,IAAIpmB,EAASomB,EACNiD,UAAUjD,KAA0C,IAAjCS,EAAYwC,UAAUjD,KAAkB,CAChE,GAAIY,EAAEsC,QAAQlD,EAAMpmB,GAClB,OAGF,KADAomB,EAAOiD,UAAUjD,IAEf,OAGJ,IAAItjB,EAASumB,UAAUjD,GACvB,GAAKtjB,IAGDkkB,EAAEsC,QAAQlD,EAAMpmB,IAINgnB,EAAEuC,MAAMnD,EAAMtjB,EAAQ9C,EAAQwpB,OAAOpD,IAKnD,OACEA,KAAMA,EACNtjB,OAAQA,IAeZ,SAASkI,EAAOva,GACVg5B,EAAOh5B,EAAQ21B,KAAM31B,EAAQqS,UAC/BkmB,EAAQv4B,EAAQ21B,KAAKsD,WAAU,GAC/B5C,EAAM6C,KAAK,SAAUX,EAAOv4B,EAAQ21B,KAAM,SAG5CxiB,EAAUnT,EAAQqS,OAClB8lB,EAAQn4B,EAAQ21B,KAChBwD,EAAkBC,EAAkBL,OAAO/4B,EAAQ21B,MAEnDU,EAAMqC,UAAW,EACjBrC,EAAM6C,KAAK,OAAQf,EAAOhlB,GAO5B,SAAS1J,IACP,GAAK4sB,EAAMqC,SAAX,CAGA,IAAI/C,EAAO4C,GAASJ,EACpBkB,EAAK1D,EAAMiD,UAAUjD,KAGvB,SAAS2D,IACPpC,GAAW,EACXL,GAAkB,GAClBE,GAAU,GAGZ,SAASH,EAASzpB,GAGhB,GAFAmsB,IAEKjD,EAAMqC,SAAX,CAGA,IAAI/C,EAAO4C,GAASJ,EAChBf,EAAUU,SAAS,UAAW3qB,GAC9BmqB,EAAUQ,SAAS,UAAW3qB,GAE9BosB,EAAaC,EADSC,sBAAsBd,EAASvB,EAASE,GACbF,EAASE,GAC1DiC,IAAgBhB,GAAShC,EAAEmD,iBAAqBnB,GAASgB,IAAepmB,GAC1EkmB,EAAK1D,EAAM4D,GACFhD,EAAEoD,cACXjwB,IAEA4gB,KAIJ,SAAS+O,EAAM1D,EAAMvoB,GACnB,IAAIyY,EAAS+S,UAAUjD,GACnB4C,GAAShC,EAAEmD,gBAAkBtsB,IAAW+F,GAC1C0S,EAAOvZ,YAAY6rB,GAEjByB,EAAmBxsB,GACrBipB,EAAM6C,KAAK,SAAUvD,EAAMxiB,EAASA,GAEpCkjB,EAAM6C,KAAK,OAAQvD,EAAMvoB,EAAQ+F,EAASimB,GAE5CS,IAGF,SAASnwB,IACP,GAAK2sB,EAAMqC,SAAX,CAGA,IAAI/C,EAAO4C,GAASJ,EAChBtS,EAAS+S,UAAUjD,GACnB9P,GACFA,EAAOvZ,YAAYqpB,GAErBU,EAAM6C,KAAKX,EAAQ,SAAW,SAAU5C,EAAM9P,EAAQ1S,GACtD0mB,KAGF,SAASvP,EAAQwP,GACf,GAAKzD,EAAMqC,SAAX,CAGA,IAAIqB,EAAUh4B,UAAUmJ,OAAS,EAAI4uB,EAASvD,EAAEyD,cAC5CrE,EAAO4C,GAASJ,EAChBtS,EAAS+S,UAAUjD,GACnBsE,EAAUL,EAAmB/T,IACjB,IAAZoU,GAAqBF,IACnBxB,EACE1S,GACFA,EAAOvZ,YAAYisB,GAGrBplB,EAAQrT,aAAa61B,EAAMwD,IAG3Bc,GAAWF,EACb1D,EAAM6C,KAAK,SAAUvD,EAAMxiB,EAASA,GAEpCkjB,EAAM6C,KAAK,OAAQvD,EAAM9P,EAAQ1S,EAASimB,GAE5CS,KAGF,SAASA,IACP,IAAIlE,EAAO4C,GAASJ,EACpBmB,IACAY,IACIvE,GACF2C,QAAQ6B,GAAGxE,EAAM,cAEfyE,GACF3rB,aAAa2rB,GAEf/D,EAAMqC,UAAW,EACb2B,GACFhE,EAAM6C,KAAK,MAAOvD,EAAM0E,EAAiBlnB,GAE3CkjB,EAAM6C,KAAK,UAAWvD,GACtBxiB,EAAUglB,EAAQI,EAAQY,EAAkBC,EAAkBgB,EAAeC,EAAkB,KAGjG,SAAST,EAAoBxsB,EAAQktB,GACnC,IAAIC,EAQJ,OANEA,OADQ,IAAND,EACQA,EACD3B,EACCS,EAEAL,OAAOR,GAASJ,GAErB/qB,IAAW+F,GAAWonB,IAAYpB,EAG3C,SAASK,EAAgBgB,EAAqBpD,EAASE,GAErD,IADA,IAAIlqB,EAASotB,EACNptB,IAKP,WAEE,IAAkB,IADFgpB,EAAYhpB,GAE1B,OAAO,EAGT,IAAIqtB,EAAYC,EAAkBttB,EAAQotB,GACtCG,EAAYC,EAAaxtB,EAAQqtB,EAAWrD,EAASE,GAEzD,QADcsC,EAAmBxsB,EAAQutB,IAIlCpE,EAAEsE,QAAQ1C,EAAO/qB,EAAQ+F,EAASwnB,GAjBzBG,IAChB1tB,EAASwrB,UAAUxrB,GAErB,OAAOA,EAkBT,SAASqrB,EAAMtrB,GAoDb,SAAS4tB,EAAOlgC,GAAQw7B,EAAM6C,KAAKr+B,EAAM86B,EAAM0E,EAAiBlnB,GAnDhE,GAAKwlB,EAAL,CAGAxrB,EAAEQ,iBAEF,IAAIypB,EAAUU,SAAS,UAAW3qB,GAC9BmqB,EAAUQ,SAAS,UAAW3qB,GAC9B6tB,EAAI5D,EAAUgB,EACd6C,EAAI3D,EAAUe,EAElBM,EAAQ/xB,MAAMkI,KAAOksB,EAAI,KACzBrC,EAAQ/xB,MAAMqI,IAAMgsB,EAAI,KAExB,IAAItF,EAAO4C,GAASJ,EAChBqC,EAAsBf,sBAAsBd,EAASvB,EAASE,GAC9DiC,EAAaC,EAAegB,EAAqBpD,EAASE,GAC1D4D,EAAyB,OAAf3B,GAAuBA,IAAec,GAChDa,GAA0B,OAAf3B,KAoCOc,GAAmBU,EAAM,OAlC7CV,EAAkBd,EAiCG2B,GAAWH,EAAM,SA9BxC,IAAIlV,EAAS+S,UAAUjD,GACvB,GAAI4D,IAAepmB,IAAWolB,GAAUhC,EAAEmD,eAA1C,CAMA,IAAIiB,EACAF,EAAYC,EAAkBnB,EAAYiB,GAC9C,GAAkB,OAAdC,EACFE,EAAYC,EAAarB,EAAYkB,EAAWrD,EAASE,OACpD,CAAA,IAAwB,IAApBf,EAAEyD,eAA2BzB,EAOtC,YAHIA,GAAS1S,GACXA,EAAOvZ,YAAYqpB,IAJrBgF,EAAYxB,EACZI,EAAapmB,GAQE,OAAdwnB,GAAsBO,GACvBP,IAAchF,GACdgF,IAAc5B,OAAOpD,MAErByD,EAAkBuB,EAClBpB,EAAWz5B,aAAa61B,EAAMgF,GAC9BtE,EAAM6C,KAAK,SAAUvD,EAAM4D,EAAYpmB,SAzBnC0S,GACFA,EAAOvZ,YAAYqpB,IAuCzB,SAAS6C,IACP,IAAIG,EAAJ,CAGA,IAAIwC,EAAOhD,EAAMiD,yBACjBzC,EAAUR,EAAMc,WAAU,IAClBryB,MAAMZ,MAAQq1B,aAAaF,GAAQ,KAC3CxC,EAAQ/xB,MAAMjB,OAAS21B,cAAcH,GAAQ,KAC7C7C,QAAQ6B,GAAGxB,EAAS,cACpBL,QAAQpzB,IAAIyzB,EAAS,aACrBpC,EAAEgF,gBAAgB14B,YAAY81B,GAC9BjC,OAAOpvB,gBAAiB,MAAO,YAAamxB,GAC5CH,QAAQpzB,IAAIqxB,EAAEgF,gBAAiB,mBAC/BlF,EAAM6C,KAAK,SAAUP,EAASR,EAAO,WAGvC,SAAS+B,IACHvB,IACFL,QAAQ6B,GAAG5D,EAAEgF,gBAAiB,mBAC9B7E,OAAOpvB,gBAAiB,SAAU,YAAamxB,GAC/CG,UAAUD,GAASrsB,YAAYqsB,GAC/BA,EAAU,MAId,SAAS+B,EAAmBnB,EAAYnsB,GAEtC,IADA,IAAIqtB,EAAYrtB,EACTqtB,IAAclB,GAAcX,UAAU6B,KAAelB,GAC1DkB,EAAY7B,UAAU6B,GAExB,OAAIA,IAAcnzB,gBACT,KAEFmzB,EAGT,SAASG,EAAcrB,EAAYnsB,EAAQ4tB,EAAGC,GA2B5C,SAAS5wB,EAASmxB,GAChB,OAAOA,EAAQzC,OAAO3rB,GAAUA,EA3BlC,IAAIquB,EAA6B,eAAhBlF,EAAE5xB,UAEnB,OADgByI,IAAWmsB,EAiB3B,WACE,IAAI4B,EAAO/tB,EAAOguB,wBAClB,OACS/wB,EADLoxB,EACaT,EAAIG,EAAKrsB,KAAOusB,aAAaF,GAAQ,EAEvCF,EAAIE,EAAKlsB,IAAMqsB,cAAcH,GAAQ,GAtBdO,GAGxC,WACE,IACIrrB,EACA7K,EACA21B,EAHAQ,EAAMpC,EAAW/H,SAAStmB,OAI9B,IAAKmF,EAAI,EAAGA,EAAIsrB,EAAKtrB,IAAK,CAGxB,GAFA7K,EAAK+zB,EAAW/H,SAASnhB,GACzB8qB,EAAO31B,EAAG41B,wBACNK,GAAeN,EAAKrsB,KAAOqsB,EAAKn1B,MAAQ,EAAKg1B,EAAK,OAAOx1B,EAC7D,IAAKi2B,GAAeN,EAAKlsB,IAAMksB,EAAKx1B,OAAS,EAAKs1B,EAAK,OAAOz1B,EAEhE,OAAO,KAd0Co2B,GA8BrD,SAAS5C,EAAQrD,EAAMkG,GACrB,MAAyB,kBAAXtF,EAAEuF,KAAqBvF,EAAEuF,KAAOvF,EAAEuF,KAAKnG,EAAMkG,GAhejD,IADF95B,UAAUmJ,SACkC,IAArC0C,MAAM5R,QAAQm6B,KAC7B17B,EAAU07B,EACVA,MAEF,IAAIwC,EACAxlB,EACAglB,EACAC,EACAC,EACAlB,EACAE,EACA8B,EACAC,EACAb,EACA6B,EAEAlD,EADAmD,EAAkB,KAGlB9D,EAAI97B,WACQ,IAAZ87B,EAAEuC,QAAoBvC,EAAEuC,MAAQiD,aAClB,IAAdxF,EAAEsE,UAAsBtE,EAAEsE,QAAUkB,aACtB,IAAdxF,EAAEsC,UAAsBtC,EAAEsC,QAuL9B,WACE,OAAO,SAvLY,IAAjBtC,EAAED,aAAyBC,EAAED,WAAaH,YACxB,IAAlBI,EAAEH,cAA0BG,EAAEH,YAAc4F,YACjC,IAAXzF,EAAEuF,OAAmBvF,EAAEuF,MAAO,QACT,IAArBvF,EAAEmD,iBAA6BnD,EAAEmD,gBAAiB,QAC9B,IAApBnD,EAAEyD,gBAA4BzD,EAAEyD,eAAgB,QAC5B,IAApBzD,EAAEoD,gBAA4BpD,EAAEoD,eAAgB,QAChC,IAAhBpD,EAAE5xB,YAAwB4xB,EAAE5xB,UAAY,iBACT,IAA/B4xB,EAAEsB,2BAAuCtB,EAAEsB,0BAA2B,QAChD,IAAtBtB,EAAEgF,kBAA8BhF,EAAEgF,gBAAkB3G,IAAI/0B,MAE5D,IAAIw2B,EAAQ4F,SACV3F,WAAYC,EAAED,WACd/b,MAqJF,SAAsBob,GACpB,IAAI31B,EAAU03B,EAAS/B,GACnB31B,GACFua,EAAMva,IAvJRyJ,IAAKA,EACL6gB,OAAQA,EACR5gB,OAAQA,EACRgJ,QAkCF,WACE8jB,GAAO,GACPI,OAnCAsF,QA4IF,SAAkBvG,GAChB,QAAS+B,EAAS/B,IA5IlB+C,UAAU,IASZ,OANwB,IAApBnC,EAAEoD,eACJtD,EAAMpuB,GAAG,OAuWX,SAAoBzC,GAClB8yB,QAAQ6B,GAAG30B,EAAI,aAxWayC,GAAG,MA2WjC,SAAmBzC,GACb6wB,EAAMqC,UAAYJ,QAAQpzB,IAAIM,EAAI,aAzWxCgxB,IAEOH,EAmbT,SAASK,OAAQlxB,EAAIixB,EAAI57B,EAAMsN,GAgBzB7L,eAAO6/B,UAAUC,eACnBpF,UAAUP,GAAIjxB,GAVd62B,QAAS,YACTC,UAAW,cACXC,UAAW,eAQgB1hC,GAAOsN,GACzB7L,eAAO6/B,UAAUK,iBAC1BxF,UAAUP,GAAIjxB,GAPd62B,QAAS,cACTC,UAAW,gBACXC,UAAW,iBAKiB1hC,GAAOsN,IAEnC6uB,UAAUP,GAAIjxB,GAnBd62B,QAAS,WACTC,UAAW,aACXC,UAAW,aAiBa1hC,GAAOsN,GAC/B6uB,UAAUP,GAAIjxB,EAAI3K,EAAMsN,IAI5B,SAASovB,iBAAkBpqB,GACzB,QAAkB,IAAdA,EAAEsvB,QAAsB,OAAOtvB,EAAEsvB,QAAQvxB,OAC7C,QAAgB,IAAZiC,EAAEO,OAAgC,IAAZP,EAAEO,MAAe,OAAOP,EAAEO,MACpD,QAAkB,IAAdP,EAAE6lB,QAAsB,OAAO7lB,EAAE6lB,QACrC,IAAIjH,EAAS5e,EAAE4e,OACf,YAAe,IAAXA,EACc,EAATA,EAAa,EAAa,EAATA,EAAa,EAAc,EAATA,EAAa,EAAI,OAD7D,EAKF,SAASmM,UAAW1yB,GAClB,IAAI21B,EAAO31B,EAAG41B,wBACd,OACEtsB,KAAMqsB,EAAKrsB,KAAO4tB,UAAU,aAAc,eAC1CztB,IAAKksB,EAAKlsB,IAAMytB,UAAU,YAAa,gBAI3C,SAASA,UAAWC,EAAYC,GAC9B,YAAkC,IAAvBtgC,eAAOsgC,GACTtgC,eAAOsgC,GAEZt1B,gBAAgBE,aACXF,gBAAgBq1B,GAElB/H,IAAI/0B,KAAK88B,GAGlB,SAASlD,sBAAuBoD,EAAO7B,EAAGC,GACxC,IAEIz1B,EAFAouB,EAAIiJ,MACJC,EAAQlJ,EAAEj0B,UAKd,OAHAi0B,EAAEj0B,WAAa,WACf6F,EAAKovB,IAAImD,iBAAiBiD,EAAGC,GAC7BrH,EAAEj0B,UAAYm9B,EACPt3B,EAGT,SAASw2B,QAAW,OAAO,EAC3B,SAASD,SAAY,OAAO,EAC5B,SAASV,aAAcF,GAAQ,OAAOA,EAAKn1B,OAAUm1B,EAAKnsB,MAAQmsB,EAAKrsB,KACvE,SAASwsB,cAAeH,GAAQ,OAAOA,EAAKx1B,QAAWw1B,EAAKjsB,OAASisB,EAAKlsB,IAC1E,SAAS2pB,UAAWpzB,GAAM,OAAOA,EAAGqC,aAAe+sB,IAAM,KAAOpvB,EAAGqC,WACnE,SAAS8vB,QAASnyB,GAAM,MAAsB,UAAfA,EAAGu3B,SAAsC,aAAfv3B,EAAGu3B,SAAyC,WAAfv3B,EAAGu3B,SAAwBC,WAAWx3B,GAC5H,SAASw3B,WAAYx3B,GACnB,QAAKA,IACsB,UAAvBA,EAAGy3B,kBACoB,SAAvBz3B,EAAGy3B,iBACAD,WAAWpE,UAAUpzB,MAG9B,SAASuzB,OAAQvzB,GACf,OAAOA,EAAG03B,oBACV,WACE,IAAI3C,EAAU/0B,EACd,GACE+0B,EAAUA,EAAQ4C,kBACX5C,GAAgC,IAArBA,EAAQ6C,UAC5B,OAAO7C,EANuB8C,GAUlC,SAASC,aAAcnwB,GAIrB,OAAIA,EAAEowB,eAAiBpwB,EAAEowB,cAAcryB,OAC9BiC,EAAEowB,cAAc,GAErBpwB,EAAEqwB,gBAAkBrwB,EAAEqwB,eAAetyB,OAChCiC,EAAEqwB,eAAe,GAEnBrwB,EAGT,SAAS2qB,SAAU2F,EAAOtwB,GACxB,IAAIuwB,EAAOJ,aAAanwB,GACpBwwB,GACFC,MAAO,UACPC,MAAO,WAKT,OAHIJ,KAASE,KAAaF,KAASC,IAASC,EAAQF,KAAUC,IAC5DD,EAAQE,EAAQF,IAEXC,EAAKD,GCplBd,SAAS9e,cACL,OACIpW,SAAS,EACTymB,SAAU,WACVvE,WAAY,kBACZsH,aAAc,OACd3wB,SAAUA,YACVyd,OACI5e,KAAM,cAEV2e,KAAM,SAASC,EAAO3W,EAASyJ,EAAMud,GA0EjC,SAAS4O,EAAWhY,EAAOD,GACvB,OAAOjY,MAAMtS,UAAUuI,QAAQ9E,KAAKjC,QAAQoL,QAAQ2d,GAAQ2L,WAAY1L,GAe5E,SAASiY,EAAY1gC,GACjBA,EAAKlC,QAAQ,SAASqC,EAAOgW,GAAOhW,EAAMk1B,MAAQlf,IAGtD,SAASwqB,EAAUr/B,EAAKs/B,EAAWC,GAC/B,IAAIh2B,EAAUvJ,EAAIs/B,GAClBt/B,EAAI2R,OAAO2tB,EAAW,GACtBt/B,EAAI2R,OAAO4tB,EAAS,EAAGh2B,GAG3B,SAAS2qB,EAAkBr1B,GACvB,IAAI4rB,EAAOmD,EACX,OAAInD,EAAK0J,SAASt1B,QACd4rB,EAAKuD,aAAa,YAAY,IAG9BvD,EAAKuD,aAAa,YAAY,GACvBnvB,GA1Gf,IAAI+uB,EAAU2C,EAAM,GAChB9F,EAAOvK,EAAMuK,KACbnpB,EAAO4e,EAAM5e,KACbilB,EAAQhqB,OAAEc,QAAQiE,EAAK5C,OAAS4C,EAAK5C,KAAK6N,OAAShQ,OAAEgqB,MAAM,EAAGjlB,EAAK5C,KAAK6N,OAAQ,MAIpFke,EAAKkD,cAAcC,GACfH,KAAMlxB,OAAEyF,IAAIV,EAAK,aAAa,GAAQ/E,OAAEgC,QAAQgoB,GAASA,IAG7DqH,EAAQuG,SAAW,SAASt1B,GACxB,OAAOtC,OAAEwxB,QAAQlvB,EAAOtC,OAAEgqB,MAAM,EAAG7nB,EAAK6N,OAAQ,KASpD,IAAI7N,EAAOwhB,EAAMxhB,KAAO+rB,EAAKnlB,IAAIrF,SAASrB,IAAI,SAASC,EAAOgW,GAC1D,OAAQkf,MAAOlf,EAAO6a,GAAI7wB,EAAOoe,KAAM3b,EAAK5C,KAAKG,EAAM,MAI3DqhB,EAAMsf,iBAAiB,OAAQ,WAC3Btf,EAAMjgB,SAAW1D,OAAEw4B,MAAMr2B,EAAM,QAKnCwhB,EAAMuf,WAAa,SAASvf,GACxBA,EAAM2O,OAAO,mBAAoB,WAC7B3O,EAAMwf,WAAW,2BAMzBxf,EAAMyf,MAAQ,WACVjhC,EAAOwhB,EAAMxhB,KAAOnC,OAAEqjC,OAAOlhC,EAAM,OAGvCwhB,EAAM2f,KAAO,SAASP,EAAWC,GAC7BF,EAAU3gC,EAAM4gC,EAAWC,GAC3BH,EAAY1gC,IAOhB,IAAIohC,EAAWC,EACXrI,EAAQH,WAERE,YAAa,SAAS5wB,GAClB,OAAOA,EAAGm5B,aAAa,sBAAwBz2B,EAAQ,GAAG4J,SAAStM,MAI3E6wB,EAAMpuB,GAAG,OAAQ,SAAS22B,EAASvsB,GAC/BosB,EAAYX,EAAWc,EAASvsB,KAGpCgkB,EAAMpuB,GAAG,OAAQ,SAAS42B,EAASzxB,GAC/BsxB,EAAYZ,EAAWe,EAASzxB,GAChCyR,EAAM2f,KAAKC,EAAWC,GACtB7f,EAAMmN,YAGVnN,EAAME,IAAI,WAAWsX,EAAM3jB,SAYvBzS,EAAK8yB,WACLxG,EAAQY,YAAYrvB,KAAK+0B,GACzBtG,EAAQc,SAAS9H,QAAQsN,GACzBA,EAAkBhU,EAAMjgB,aCnGxC,SAASkgC,gBAAc5hC,GAsCnB,SAAS6hC,IACL,IAAIC,EAAU9jC,OAAE+jC,QAAQl9B,WAExB,OADAi9B,EAAQzZ,YACDrqB,OAAEO,OAAOsC,MAAM7C,OAAG8jC,GAG7B,SAASE,EAAWC,GAChB,OAAQA,OAAe5hC,IAAI6hC,GAG/B,SAASC,EAAQC,EAAMr/B,GACnB,OAAO/E,OAAEokC,OACJ/hC,IAAI6hC,GACJ1hC,KAAK,SAAoB+lB,EAAKjQ,GAC3BiQ,EAAI9gB,eAAe,UAAY8gB,EAAI3oB,KAAOmF,EAAKnF,KAAOykC,EAAS/rB,EAAM,EAAE,MAE1EgsB,KAAKv/B,EAAK/C,QAAUA,EAAUhC,OAAEukC,UAChCjiC,QAGT,SAAS4hC,EAAUhyB,GACf,OAAOlS,OAAEY,cAAcsR,GAAUA,GAAUsyB,KAAKtyB,GAapD,SAASmyB,EAAS3f,EAAG+f,GACjB,IAAIC,EAAKl4B,KAAKm4B,IAAIjgB,GACdkgB,EAAa,EAAIp4B,KAAKsG,MAAMtG,KAAKzD,IAAI27B,GAAMl4B,KAAKq4B,MACpD,GAAID,GAAcH,EACd,OAAO/f,EAEX,IAAIogB,EAAat4B,KAAKu4B,IAAI,GAAIN,EAAIG,GAAYrwB,WAAWywB,OAAO,GAChE,OAAOtgB,EAAI,EAAI,IAAMogB,EAAaJ,EAAKI,EAAaJ,EA9ExD,OACIr3B,SAAS,EACTnH,SAAU++B,KACVnR,SAAU,UAAU,QACpBvE,WAAY,kBACZsH,aAAc,OACdlT,OACI5e,KAAM,aACNjF,QAAS,iBAEb4jB,KAAM,SAASC,EAAO3W,EAASyJ,EAAMud,GACjC,IAAI3C,EAAU2C,EAAM,GAChB9F,EAAOvK,EAAMuK,KACbnpB,EAAO4e,EAAM5e,KAEjB4e,EAAMpc,KAAOysB,EAAM,GAEnBrQ,EAAMsgB,QAAUD,EAAWj/B,EAAKk/B,SAChCtgB,EAAMygB,KAAOD,EAAQp/B,EAAKq/B,KAAMr/B,GAChC4e,EAAMkgB,OAASA,EAGflgB,EAAMsf,iBAAiB,WACnB,OAAOjjC,OAAEw4B,MAAM7U,EAAMygB,KAAM,cAC5B,SAAsBc,GACrBvhB,EAAMjgB,SAAW1D,OAAE6I,OAAOq8B,EAAW,SAASC,EAAOzhC,GACjD,OAAO1D,OAAEolC,SAAS1hC,GAAYyhC,EAAQzhC,EAAWyhC,GACnD,KAGNjX,EAAKkD,cAAcC,GACfH,KAAM,oCChClB,OACI7jB,SAAS,EACTnH,SAAUm/B,QACVvR,SAAU,WACVvE,WAAY,kBACZsH,aAAc,OACdlT,OACI4E,IAAK,gBACLxjB,KAAM,kBAEV2e,KAAM,SAASC,EAAO3W,EAASyJ,EAAMud,GACjC,IAAI3C,EAAU2C,EAAM,GAChB9F,EAAOvK,EAAMuK,KACb+V,EAAUtgB,EAAMsgB,QAAUtgB,EAAMkO,QAAQoS,QACvC5hC,IAAI,SAASijC,EAAQhtB,GAClB,OAAOtY,OAAEyF,IAAIke,EAAO,iBAAmBrL,EAAQ,MAAQgtB,IAE1DjjC,IAAI,SAASijC,GAYV,OAXAA,EAAO79B,eAAe,UAAY69B,EAAO3lC,KAAO,YAE7B,YAAf2lC,EAAO3lC,OACPK,OAAEc,QAAQwkC,EAAOjO,WAAaiO,EAAOjO,YACrCiO,EAAOjO,QAAUiO,EAAOjO,QAAQh1B,IAAI,SAASkmB,EAAKjQ,GAG9C,OAFKtY,OAAE+P,SAASwY,KAAMA,GAAO7H,KAAM6H,IAC7B,UAAWA,IAAMA,EAAIjmB,MAAQgW,EAAM,GAClCiQ,KAIR+c,IAIfrB,EACK17B,OAAO,SAAkB+8B,GAAQ,MAAsB,QAAfA,EAAO3lC,OAC/CM,QAAQ,SAAkBqlC,EAAQhtB,GAC/BgtB,EAAO79B,eAAe,WAAa69B,EAAOhjC,MAAQgW,EAAM,KAIhE2rB,EACK17B,OAAO,SAAS+8B,GAAQ,OAAQA,EAAOC,YACvCh9B,OAAO,SAAkB+8B,GAAQ,MAAsB,QAAfA,EAAO3lC,OAC/CM,QAAQ,SAASqlC,EAAQhtB,EAAO2rB,GAC7BqB,EAAOE,aAAevB,EAAQA,EAAQj0B,OAASsI,EAAQ,GAAGhW,QAGlEqhB,EAAMiO,MAAQP,EAGd1N,EAAM2O,OAAO,WAAY,SAASmT,GAC9B9hB,EAAM4E,IAAImd,UAAYD,IAG1BvX,EAAKkD,cAAcC,GACftsB,KAAM4e,EAAM4E,QCvD5B,SAASqb,gBAAc5hC,GAwBnB,SAAS6hC,IACL,IAAIC,EAAU9jC,OAAE+jC,QAAQl9B,WAExB,OADAi9B,EAAQzZ,YACDrqB,OAAEO,OAAOsC,MAAM7C,OAAG8jC,GAG7B,SAASE,EAAWC,GAChB,OAAQA,OAAe5hC,IAAI6hC,GAG/B,SAASC,EAAQC,EAAMr/B,GACnB,OAAO/E,OAAEokC,OACJ/hC,IAAI6hC,GACJ1hC,KAAK,SAAoB+lB,EAAKjQ,GAC3BiQ,EAAI9gB,eAAe,UAAY8gB,EAAI3oB,KAAOmF,EAAKnF,KAAOykC,EAAS/rB,EAAM,EAAE,MAE1EgsB,KAAKv/B,EAAK/C,QAAUA,EAAUhC,OAAEukC,UAChCjiC,QAGT,SAAS4hC,EAAUhyB,GACf,OAAOlS,OAAEY,cAAcsR,GAAUA,GAAUsyB,KAAKtyB,GAapD,SAASmyB,EAAS3f,EAAG+f,GACjB,IAAIC,EAAKl4B,KAAKm4B,IAAIjgB,GACdkgB,EAAa,EAAIp4B,KAAKsG,MAAMtG,KAAKzD,IAAI27B,GAAMl4B,KAAKq4B,MACpD,GAAID,GAAcH,EACd,OAAO/f,EAEX,IAAIogB,EAAat4B,KAAKu4B,IAAI,GAAIN,EAAIG,GAAYrwB,WAAWywB,OAAO,GAChE,OAAOtgB,EAAI,EAAI,IAAMogB,EAAaJ,EAAKI,EAAaJ,EAhExD,OACIr3B,SAAS,EACTnH,SAAUy/B,UACV7R,SAAU,UAAU,QAEpB+C,aAAc,OACdlT,OACI5e,KAAM,aACNjF,QAAS,iBAEb4jB,KAAM,SAASC,EAAO3W,EAASyJ,EAAMud,GACjC,IAAIjvB,EAAO4e,EAAM5e,KAEjB4e,EAAMpc,KAAOysB,EAAM,GAEnBrQ,EAAMsgB,QAAUD,EAAWj/B,EAAKk/B,SAChCtgB,EAAMygB,KAAOD,EAAQp/B,EAAKq/B,KAAMr/B,GAEhC4e,EAAMkgB,OAASA,kCCnBvB,OACIx2B,SAAS,EACTnH,SAAU0/B,aACV9R,SAAU,WACVvE,WAAY,kBACZsH,aAAc,OACdlT,OACI4E,IAAK,qBACLxjB,KAAM,uBAEV2e,KAAM,SAASC,EAAO3W,EAASyJ,EAAMud,GAmCjC,SAAS2D,EAAkBr1B,GACvB,IAAIujC,EAAUliB,EAAMsgB,QAAQv9B,MAI5B,SAAgB4+B,EAAQhtB,GACpB,IAAIrH,EAAM3O,EAAMgW,GAEhB,IAAKqL,EAAM5e,KAAK8yB,WAAalU,EAAM4E,IAAIsP,WAAayN,EAAOzN,SAAU,OAAO,EAC5E,OAAQyN,EAAO3lC,MACX,IAAK,OAAQ,OAAO,EACpB,IAAK,QAAS,MAAe,KAARsR,EACrB,IAAK,WAAY,OAAQmF,MAAMnF,IAAgB,OAARA,EACvC,QAAS,OAAOA,KAVxB,OADAogB,EAAQI,aAAa,WAAYoU,GAC1BvjC,EArCX,IAAI+uB,EAAU2C,EAAM,GAChB9F,EAAOvK,EAAMuK,KAEjBvK,EAAMiO,MAAQP,EACd1N,EAAMsgB,QAAUtgB,EAAMkO,QAAQoS,QACzB5hC,IAAI,SAASijC,EAAQhtB,GAClB,OAAOtY,OAAEyF,IAAIke,EAAO,iBAAmBrL,EAAQ,IAAIgtB,KAEtDjjC,IAAI,SAAiBijC,GAYlB,OAXAA,EAAO79B,eAAe,UAAY69B,EAAO3lC,KAAO,YAE7B,YAAf2lC,EAAO3lC,OACPK,OAAEc,QAAQwkC,EAAOjO,WAAaiO,EAAOjO,YACrCiO,EAAOjO,QAAUiO,EAAOjO,QAAQh1B,IAAI,SAASkmB,EAAKjQ,GAG9C,OAFKtY,OAAE+P,SAASwY,KAAMA,GAAO7H,KAAM6H,IAC7B,UAAWA,IAAMA,EAAIjmB,MAAQgW,EAAM,GAClCiQ,KAIR+c,IAGfpX,EAAKkD,cAAcC,GACftsB,KAAM4e,EAAM4E,IACZ2I,MAAOvN,EAAMsgB,aAAe5hC,IAAIyjC,cAIpCzU,EAAQc,SAAS9H,QAAQsN,GACzBtG,EAAQc,SAAS9H,QAsBjB,SAA0B/nB,GACtB,IAAIujC,EAAUliB,EAAMsgB,QAAQv9B,MAI5B,SAAqB4+B,EAAQhtB,GACzB,IAAIrH,EAAM3O,EAAMgW,GAChB,MAAoB,UAAhBgtB,EAAO3lC,OAAqB2lC,EAAOS,YACnC/lC,OAAEiT,SAAShC,KAAQjR,OAAE2C,SAASsO,KACvB,IAAK4pB,OAAOyK,EAAOS,SAAUj2B,KAAKmB,KANjD,OADAogB,EAAQI,aAAa,UAAWoU,GACzBvjC,IAxBXq1B,EAAkBtG,EAAQW,YAC1BrO,EAAMsf,iBAAiB,WAAY,SAAS3gC,GAAO+uB,EAAQoB,cAAcnwB,EAAM8nB,aAsC3F,SAAS0b,WAAWR,GAChB,MAAsB,iBAAXA,IACS,SAAhBA,EAAO3lC,KAAwB,KACf,UAAhB2lC,EAAO3lC,KAAyB,GAChB,aAAhB2lC,EAAO3lC,MAA4BwxB,KCtF3C,SAAS6U,oBACL,OACI34B,SAAS,EACTnH,SAAU+/B,OAAOzwB,KACjBse,SAAU,OAAQ,WAClBvE,WAAY,kBACZsH,aAAc,OACdlT,OACI5e,KAAM,cAEV2e,KAAM,SAASC,EAAO3W,EAASyJ,EAAMud,GACjC,IAAIzsB,EAAOysB,EAAM,GACb3C,EAAU2C,EAAM,GAChB9F,EAAOvK,EAAMuK,KACbnpB,EAAO4e,EAAM5e,KAEjB4e,EAAMpc,KAAOA,EAEb2mB,EAAKkD,cAAcC,GAAWH,UAAM5a,IAGpCqN,EAAMuiB,eAAiBviB,EAAMjgB,SAG7BigB,EAAME,IAAI,gBAAiB,SAAS5R,EAAGsgB,GACnC5O,EAAMuT,OAAO,WACTvT,EAAMjgB,SAAW6uB,EACjBxtB,EAAKkyB,YAActT,EAAMR,MAAM,0BC3BnD,SAASgjB,uBAAuBnV,GAC5B,OACIoV,QAAS,SAAS3W,EAAUhZ,GAKxB,IAAIxJ,EAAK+jB,EAAOva,EAAK4vB,gBAAsC,GAC3D,OAAO,SAAwB1iB,EAAO3W,GAMlC,SAASosB,EAASrtB,GACd4X,EAAMuT,OAAO,WACTjqB,EAAG0W,GAAQgS,OAAO5pB,MAP1BiB,EAAQD,GAAGu5B,UAAWlN,GACtBzV,EAAME,IAAI,WAAY,WAClB7W,EAAQc,IAAIw4B,UAAWlN,QCb3C,SAASmN,cAAc5jB,GACnB,OAEA,SAAiBrgB,GACb,IAAIypB,EAEJ,GAAI/rB,OAAEyI,YAAYnG,GACd,MAAO,OAGX,GAAItC,OAAEwmC,SAASlkC,IAAUtC,OAAE2C,SAASL,GAChC,OAAO,IAAIu4B,OAAOv4B,GAIlB,MAFAypB,EAAM,IAAI7qB,MAAM,sDAChByhB,EAAS,QAAQve,MAAM2nB,EAAKzpB,GACtBypB,GCZlB,SAAS0a,UAAUnkC,EAAOokC,GACtB,IAAIC,EAGJ,OAAKrkC,GAAmB,IAAVA,GAAyB,MAAVA,EAEzB6T,UAAU7T,IACVqkC,EAAS3mC,OAAEyI,YAAYi+B,GAAQ,KAAOE,OAAOF,GACtCpkC,EAAQqkC,GAGZrkC,EAP4C,GAWvD,SAAS6T,UAAUlV,GACf,OAAQjB,OAAEc,QAASG,IAAUA,EAAMkK,WAAYlK,GAAQ,GAAM,ECdjE,SAASwiB,aAAU6L,EAAUtrB,EAAYwsB,EAAW7N,GAChD,OACIe,KAAM,SAASuK,EAAQwB,GAqCnB,SAASoX,EAAU50B,GAEf,IAAI60B,EAAS9mC,OAAEc,QAAQrB,EAAOsnC,MAAQtnC,EAAOsnC,MAAQtnC,EAAOsnC,MACxDA,EAAO/mC,OAAEqC,IAAIykC,EAAO,SAASxkC,GAC7B,OAAOtC,OAAE2C,SAASL,GAASA,EAAMiL,cAAcoF,WAAW,GAAKrQ,KAK9DtC,OAAE2I,QAAQo+B,EAAM90B,EAAEO,QACnByb,EAAOvR,OA9Cf,IAGIxW,EAFAzG,EAASwuB,EAAOxuB,OAChB80B,EAAWtG,EAAOsG,SAAWtG,EAAO4B,OAEpC/qB,GACA1D,OAAS4C,EAAW5C,OACpBtB,QAAUkE,EAAWlE,QACrBgG,KAAMrG,EACNsG,UAAW/F,OAAEyF,IAAIhG,EAAQ,YAGL,MAApBA,EAAOwG,WACP0c,EAAS,WAAWve,MAAM,+BAAgC3E,EAAOG,MAAQH,EAAOoY,SAIpF,IACI3R,EAAWlG,OAAEkG,SAASzG,EAAOwG,UAAlBjG,CAA6B8E,GAC1C,MAAMmN,GACJ/L,EAAWzG,EAAOwG,UAClB0c,EAAS,WAAWve,MAAM,4BAA6B6N,GAG3DjS,OAAEO,OAAO0tB,EAAQnpB,GACjBmpB,EAAOvR,KA0BP,WACI6X,EAAS7D,WACTjB,EAASuX,QACT/Y,EAAO9K,MAAM,iBA1BjBqN,EAAUzjB,GA3BG,UA2BQ85B,GACrB5Y,EAAOpK,IAAI,WAAW,WAClB2M,EAAU1iB,IA7BD,UA6Ba+4B,KAG1BpX,EAASja,KAAKtP,GACdopB,EAASG,EAASnP,WAAlBgP,CAA8BiF,KCvC1C,SAAS9Q,eACL,OACIC,KAAM,SAASuK,EAAQwB,GACnBA,EAAS1iB,GAAG,QAAS,WACjBkhB,EAAOvR,WCJvB,SAGSuqB,WACL,IAAIC,KAEJxnC,KAAKynC,KAAOC,qBAEZ1nC,KAAKS,IAAM,SAAaP,EAAMqN,GAC1Bi6B,EAAWtnC,GAAQqN,GAGvBvN,KAAK+F,IAAM,SAAS7F,GAChB,OAAOsnC,EAAWtnC,IAM1B,SAASwnC,qBAAqBjmB,EAAGnd,EAAY4vB,GACzC,IAAI1c,EAAOxX,KAyDX,OAvDA,SAAsBoG,EAAM2pB,EAAUxB,GAClC,IAAIoZ,EAIA7vB,EAHAwK,EAAMb,EAAGe,QACT9gB,EAAS4C,EAAW5C,OACpB3B,EAASqG,EAAKN,QAwBlB,IApBIxF,OAAEgT,WAAWvT,IAAWO,OAAEc,QAAQrB,MAClC4nC,EAAY5nC,IAGX4nC,GAAa5nC,GAAUO,OAAEgT,WAAWvT,EAAOwf,SAC5CooB,EAAYrnC,OAAE2F,KAAKlG,EAAOwf,KAAMxf,IACtB6nC,QAAU1T,EAAU2T,SAAS9nC,EAAOwf,QAG7CooB,GAAa5nC,GAAUO,OAAEc,QAAQrB,EAAOwf,SACzCooB,EAAYrnC,OAAE2F,KAAKlG,EAAOwf,KAAKxf,EAAOwf,KAAKjP,OAAO,GAAIvQ,IAC5C6nC,QAAU1T,EAAU2T,SAAS9nC,EAAOwf,QAI7CooB,GAAavhC,EAAKnG,OACnB0nC,EAAYnwB,EAAKzR,IAAIK,EAAKnG,QAIzB0nC,EACD,MAAM,IAAInmC,MAAM,yCAA2C4E,EAAKnG,KAAO,UAuB3E,OAZA6X,EAAUoc,EAAU9xB,OAAOulC,EAAW,MAClC3qB,KAAM1c,OAAE2F,KAAKqc,EAAI7S,QAAQ6S,GACzBlc,KAAMA,EACNrG,OAAQA,EACRgwB,SAAUA,EACVxB,OAAQA,EACR7sB,OAAQA,IAIRpB,OAAEgT,WAAWwE,IAAUwK,EAAIhT,QAAiB,QAAEwI,GAE3CwK,GCvEf,SAASyB,aAAU+jB,EAAcn8B,EAAQmlB,EAAWuF,EAAS/xB,EAAYod,GACrE,OACIuC,OACI7d,KAAM,WAEV4d,KAAM,SAASuK,EAAQwB,GAwEnB,SAASgY,EAAgBx1B,GACrB,IAAIO,EAAQP,EAAEO,OAASP,EAAEsoB,QACrBh4B,GAAO0P,EAAE1P,KAAO,IAAIgL,cAGV,IAATiF,GAAsB,KAAPjQ,IAAe0P,EAAEsqB,UACjCpW,EAAQlU,EAAG,WACXA,EAAEQ,kBAIM,IAATD,GACCge,EAAUkX,IAAI,UAAWC,GAKjC,SAASA,EAAa11B,GAClB,IAAIO,EAAQP,EAAEO,OAASP,EAAEsoB,QACZ,IAAT/nB,GAAc2T,EAAQlU,EAAG,QAChB,IAATO,GAAc2T,EAAQlU,EAAG,QAIjC,SAASkU,EAAQlU,EAAGC,GAChBD,EAAEQ,iBACFm1B,GAAiBjoC,KAAKuS,EAAQ21B,WAAU,GACxC7lB,EAAI7S,UAlGR,IACI24B,EAAWC,EACX/lB,EACAhT,EACA44B,EAJA9hC,EAAOmoB,EAAOnoB,KAKdjG,EAAWouB,EAAO4D,QAAQhyB,aAC1BJ,EAASqG,EAAKN,YACdlC,EAAWwC,EAAKlG,MAAQH,EAAOG,KAC/BuD,EAAWD,OAAOC,SAEjB2C,IAODjG,EAASwc,OAAyB,IAAjBnZ,OAAO2X,QACxB2V,EAAUzjB,GAAG,UAAU06B,GACvBxZ,EAAOpK,IAAI,WAAY,WACnB2M,EAAU1iB,IAAI,UAAW25B,GACzBjX,EAAU1iB,IAAI,UAAW65B,MAOjC3jC,EAAWlE,QAAUqD,EAASrD,QAAUL,EAAOK,YAC3CwD,IACIH,EAASG,IACT8d,GAAW,SAAS0Q,KAAK,2CAA6CxuB,EAAW,KAGrFtD,OAAEO,OAAOyD,EAAWlE,QAASqD,EAASG,QAEtCyyB,EAAQ5yB,SAASG,GAAY7D,EAAOK,SAOxCkP,GADAgT,EAAMwlB,EAAa1hC,EAAM2pB,EAAUxB,EAAO4B,SAC5B7gB,QAKd84B,EAAYz8B,EAAOvF,EAAKuF,QACxB2D,EAAiB,QAAE84B,GAMfhiC,EAAKkiC,QACLD,EAAWvX,EAAU,GAAGwX,MACxBxX,EAAU,GAAGwX,MAAQliC,EAAKkiC,MAC1Bh5B,EAAiB,QAAE,WAAWwhB,EAAU,GAAGwX,MAAQD,KAGvD/4B,EAAiB,QAAE,WACfif,EAAO9K,MAAM,YAAaykB,QCzD1C,SAASh7B,mBAAiBvK,EAAKxC,GAC3B,IAAIgN,EAEJ,IAAK7M,OAAEY,cAAcyB,GACjB,MAAM,IAAInB,MAAM,oEAKpB,GAAIlB,OAAEyI,YAAY5I,GACd,OAAOG,OAAEyG,KAGb,IAAKzG,OAAEY,cAAcf,GACjB,MAAM,IAAIqB,MAAM,uDAapB,OATA2L,EAAS7M,OAAEqC,IAAIxC,EAAU,SAASyC,EAAMC,GACpC,IAAIuK,EAAOzK,EAAIE,GACf,GAAIuK,EACA,OAAOC,KAAGD,EAAKE,QAASF,EAAK1E,SAAU9F,GAEvC,MAAM,IAAIpB,MAAM,UAAWqB,EAAK,qCAIjC,WACHvC,OAAEC,QAAQ4M,EAAQ,SAASI,GAAIA,EAAGpJ,UAI1C,SAASkJ,KAAGkT,EAAK7X,EAAU9F,GACvB,IAAI4K,EAAM+S,EAAI9S,IAAI/E,GAElB,OADA6X,EAAI9S,IAAI/E,EAAU9F,GACXtC,OAAE2F,KAAKsa,EAAI9S,IAAK8S,EAAK7X,EAAU8E,GC/C1C,SAAS+6B,qBAAqB1X,EAAcC,GACxC,IAEInuB,GACA2L,YAAiBhB,QAHTpL,QAAQoL,QAAQwjB,EAAU,GAAG7rB,MAGJyD,SAAU,mBAC3C6F,kBAAoBjB,QAASujB,EAAcnoB,SAAS,mBACpDuD,UAAeqB,QAASujB,EAAcnoB,SAAS,YAC/C8/B,WAAgBl7B,QAASujB,EAAcnoB,SAAS,UAGpD,OAAOpI,OAAE2F,KAAKwiC,mBAAmB,KAAM9lC,GCH3C,SAAS+lC,cAAcna,GACnBvuB,KAAKuuB,OAASA,EAmBlB,SAASoa,cAAc/Y,EAAUqE,EAAUC,GACvC,OAEI0U,YAAY,EACZ/Y,WAAY6Y,cACZvR,aAAc,OACduP,QAAS,WACL,OACIn+B,IAAKvI,KAAKuI,IACVvG,KAAM,eAGduG,IAAK,SAASgmB,EAAQwB,EAAUC,EAAO6Y,EAAQC,GAU3C,SAASC,EAAYC,GACjB,IAAInpC,EAAUmpC,MAEXxU,IACCA,EAAgB1lB,SAChB0lB,EAAkB,MAEnBC,IACCA,EAAazD,WACbyD,EAAe,MAEhBC,IACCT,EAASU,MAAMD,EAAgB,WAC3BF,EAAkB,KAClB30B,EAAQopC,WAAappC,EAAQopC,cAEjCzU,EAAkBE,EAClBA,EAAiB,MAyCzB,SAASM,EAAc1nB,EAAS6nB,GAC5B,GAAKA,EAAL,CAIA,IAAIC,EAAaD,EAAcjO,MAAM,KAErC5mB,OAAEwC,KAAKsyB,EAAY,SAASC,GAExB,IAAKnB,EAAUhtB,IAAI,IAAMmuB,EAAY,cACjC,MAAM,IAAI7zB,MAAM,4BAA8B6zB,EAAY,OAKlE/nB,EAAQ8T,SAAS+T,IAlFrB5G,EAAO2G,MA8BP,SAAegU,EAAOF,GAClB,IAAInpC,EAAUmpC,MAGd,GAFAnpC,EAAQ0I,KAAO1I,EAAQ0I,OAElB2gC,EACD,OAAOH,EAAYlpC,GAIvB,IAAIg1B,EAAWv0B,OAAEO,OAAO0tB,EAAO4B,OAAQ+Y,GAGvCJ,EAAYjU,EAAU,SAASnP,GAI3BsP,EAActP,EAAO7lB,EAAQo1B,SAG7B8T,EAAYlpC,GAGZ60B,EAAiBhP,EAEjB+O,EAAeI,EAGfZ,EAASiB,MAAMR,EAAgBL,EAAe,KAAM,WAChDx0B,EAAQmC,MAAQnC,EAAQmC,YAzDpCusB,EAAO+Y,MAAQyB,EACfxa,EAAO4a,QA6DP,SAAiBD,GACb5oC,OAAEO,OAAO4zB,EAAcyU,IA5D3B,IAAIzU,EACAC,EACAF,EACAH,EAAgBtE,IC9ChC,SAAShM,eACL,OACI6kB,YAAY,EACZj7B,SAAS,EACTnH,SAASA,YACT4tB,WAGAnQ,OACImlB,QAAS,eCdrB,SAAS5T,QAAQ9zB,GAGb,OAAO2nC,MADMC,aADFC,QAAQ7nC,KAQvB,SAAS6nC,QAAQ7nC,GACb,OAAOpB,OAAE6I,OAAOzH,EAChB,SAAiB8nC,EAASpjC,EAAMxC,GAAW,OAAO4lC,EAAQnoC,OAAOooC,YAAY7lC,EAAUwC,SAG3F,SAASqjC,YAAY7lC,EAAUwC,GAC3B,MAAiB,YAAbxC,GAA0BtD,OAAEY,cAAckF,IAAS4M,MAAM5R,QAAQgF,EAAK+I,MAAc/I,EAAK+I,KAAKxM,IAGlG,SAAqBpB,GAA+B,OAAzBA,EAAIqC,SAAWA,EAAiBrC,OAM/D,SAAS+nC,aAAan6B,GAClB,IAAIu6B,EAAWC,WACXjF,EAAOv1B,EAAKxM,IAOhB,SAAgB0G,GACZ,IAAIwf,KAEJ,OADAvoB,OAAEC,QAAQ8I,EAGV,SAAuBzG,EAAOC,GAAMgmB,EAAI6gB,EAAS7mC,IAAyB,iBAAVD,EAAqBkS,KAAKC,UAAUnS,GAASA,IAFtGimB,IATP+gB,EAAUF,IAId,OAFAhF,EAAKnkC,QAYL,SAAyBspC,GACrB,OAAO,SAAS9lC,GAAMA,EAAIuM,OAASu5B,GAb1BC,CAAgBF,EAAQt5B,UAE7Bs5B,GAASvoC,OAAOqjC,GAe5B,SAASiF,WACL,IAAII,GAAQnmC,SAAS,GACjBgV,EAAQ,EACZ,OAEA,SAAkB/V,GACd,OAAKsE,UAAUmJ,OACXzN,KAAOknC,EAAaA,EAAKlnC,GACtBknC,EAAKlnC,GAAO+V,IAFWtY,OAAE+mC,KAAK0C,IAa7C,SAASV,MAAMW,GAAU,OAAOA,EAAQrnC,IAAIsnC,UAAU3rB,KAAK,MAC3D,SAAS2rB,SAASlmC,GAAM,OAAOA,EAAIpB,IAAIunC,WAAW5rB,KAAK,KACvD,SAAS4rB,UAAU34B,GAEf,OAAI44B,YAAY/5B,KAAKmB,GAAa,IAAMA,EAAI5D,QAAQ,KAAM,MAAQ,IAC3D4D,ECpEX,SAAS64B,eAAe9lC,EAAYmd,EAAI4oB,EAAiBC,EAAUpW,GAiB/D,SAASqW,EAAQhc,EAAQxuB,GACrB,IAAIyX,EAAOxX,KACPG,EAAWJ,EAAOI,aAGtB,KAAMH,gBAAgBuqC,GAElB,OAAO,IAAIA,EAAQhc,EAAOxuB,GAI9BC,KAAKuuB,OAASA,EACdvuB,KAAKD,OAASA,EAGdC,KAAKK,SAAW,IAAIgqC,EAAgBtqC,GAGpCiP,EAAMuf,EAAQpuB,GAEdouB,EAAOpK,IAAI,eAAgB,SAAS9X,EAAOmG,GAEvC,OADAA,IAAWA,GAAUvS,KAAK,SAClBuS,EAAOvS,MACX,IAAK,UACDuX,EAAKpI,KAAKoD,GACV,MACJ,IAAK,OACDgF,EAAK3N,KAAK2I,GACV,MACJ,IAAK,OAEL,QACIgF,EAAK1N,KAAK0I,MAGtB+b,EAAOpK,IAAI,eAAgB,WAAW3M,EAAK3N,SA8C/C,SAASmF,EAAMuf,EAAQpuB,GACnB,IAOIioC,EAAWoC,EAPX7+B,EAASuoB,EAAUnuB,IAAI,iBACvB+qB,EAAYoD,EAAUnuB,IAAI,aAC1B0kC,EAAgBvW,EAAUnuB,IAAI,mBAC9BxB,EAAe2vB,EAAUnuB,IAAI,uBAC7B2kC,EAAcxW,EAAUnuB,IAAI,sBAC5B4kC,EAAczW,EAAUnuB,IAAI,gBAC5B1D,EAAQ6xB,EAAUnuB,IAAI,SACA6kC,EAAYzqC,EAAS0qC,MAAQ,UAIvDtmC,EAAaiX,WACb+S,EAAOpK,IAAI,WAAY5f,EAAasB,YAGpCuiC,EAAYz8B,EAAOxL,EAASwL,QAC5B4iB,EAAOpK,IAAI,WAAYikB,GAGvBoC,EAAYE,EAAYvqC,EAASuqC,aACjCnc,EAAOpK,IAAI,WAAYqmB,GAGvBC,EAActqC,EAASsqC,mBAGnBtqC,EAASmoC,QAAOxX,EAAU,GAAGwX,MAAQnoC,EAASmoC,OAG9ChoC,OAAEyF,IAAI5F,EAAU,kBAAkB,IAAQouB,EAAOpK,IAAI,WAAY,WACjE,IAAI2mB,EAAMC,QAAazmC,EAAW5C,QAClCW,EAAML,KAAK7B,EAASye,OAAOosB,QAASF,KAGxCH,EAAYvpB,SAASwpB,EAAY,SAtCrC,OAvCAtqC,OAAEO,OAAO0pC,EAAQ7pC,WACboJ,KAAM,SAAS0I,GACXxS,KAAKK,SAASyJ,OACd9J,KAAKoP,KAAKoD,IAGd3I,KAAM,SAAS2I,GACXxS,KAAKK,SAASwJ,OACd7J,KAAKoP,KAAKoD,IAGdpS,QAAS,WAEL,OAAOJ,KAAKK,SAASD,WAGzBgP,KAAM,SAASoD,GACX,IAAIpM,EAAOpG,KAAKI,UACZmuB,EAASvuB,KAAKuuB,OACd0c,GACA96B,QAASnQ,KAAKmQ,QACdg4B,UAAW31B,GAAUA,EAAO21B,WAG5B/hC,EACAkkC,EAASlkC,EAAM6kC,GAAan7B,KAAK,WAC7Bye,EAAO9K,MAAM,oBAIjB8K,EAAO9K,MAAM,mBAIrBynB,WAAY,SAAS/6B,GACjBnQ,KAAKmQ,QAAUA,KAIhBo6B,EChGX,SAASY,iBAAiB/gC,EAAU9F,EAAYmkB,EAAqBjkB,GAOjE,SAASnE,EAASN,GACd,IAAIoK,EAAI/E,EAER,KAAMpF,gBAAgBK,GAElB,OAAO,IAAIA,EAASN,IAKxBoK,EAAKnK,KAAKmK,GAAK,IAAIC,GAChBC,WAAW,SACdF,EAAGG,IAAI,QAASvK,EAAOqrC,eAGvBhmC,GAAW1D,OAAQ4C,EAAW5C,QAC9BpB,OAAEO,OAAO4nB,EAAqBrjB,GAC9B9E,OAAEO,OAAO2D,EAAwBY,GAGjCpF,KAAKK,SAAW8J,EAAG9J,SAAS,QAASN,EAAOM,UAmBhD,OAhBAC,OAAEO,OAAOR,EAASK,WACdoJ,KAAM,WAEF,OADA9J,KAAKK,SAASyJ,OACP9J,MAGX6J,KAAM,WAEF,OADA7J,KAAKK,SAASwJ,OACP7J,MAGXI,QAAS,WACL,OAAOJ,KAAKK,SAASD,aAItBC,ECzCX,SAASgrC,mBAAmB5pB,EAAI1f,GAO5B,OALA,SAA2B0V,GACvB,IAAInI,EAAUhP,OAAE2C,SAASwU,GAAU1V,EAAU0V,GAAUA,EACvD,OAAOgK,EAAG6pB,KAAKh8B,ICTvB,SAASi8B,kBAAkB9pB,GAwBvB,OArBA,SAAmBxf,EAAKpC,GACpBA,IAAYA,MACZ,IAAIyiB,EAAMb,EAAGe,QAAShQ,EAAS,GAgB/B,MAbA,QAAQpC,KAAKnO,KAASuQ,GAAU3S,EAAQsQ,QAAUtQ,EAAQsQ,QAAU,IAAM,IAE1EqC,GAAUvQ,EAEVpC,EAAQ2rC,SAAWh5B,EAAS,GAAKA,GACjC3S,EAAQsoC,YAAc31B,GAAU,UAAW,IAAK8C,MAAQm2B,WAExDrX,SAAS5hB,GAAS,SAASzS,GACvBuiB,EAAI7S,QAAQ1P,IACb,SAASssB,GACR/J,EAAI5S,OAAO2c,KAGR/J,EAAIhT,SCjBnB,SAASo8B,gBAAgBjqB,EAAIkqB,EAAkB1oB,GAE3C,SAASlhB,EAAUE,EAAKpC,GACpB,OAAO8rC,EAAiB1pC,EAAKpC,GAGxBiQ,KAAK,SAAS/P,GACX,IAAIwS,EACJ,GAAIjS,OAAEyI,YAAYhJ,GAGd,MAFAwS,EAAI,IAAI/Q,MAAM,QAAUS,EAAM,uHAC9BghB,EAAS,QAAQve,MAAM6N,GACjBA,EAGV,OAAOxS,IAkCnB,OA9BA,SAAkBqG,EAAMvG,GACpB,IAAIyP,EAASvP,EAAQyG,EA0BrB,OAtBIzG,EADAqG,EAAKX,UACI1D,EAAUqE,EAAKX,UAAW5F,GAE1BuG,EAAKrG,OAKdyG,EADAJ,EAAKV,YACM3D,EAAUqE,EAAKV,YAAapF,OAAEO,QAAQ2qC,QAAO,GAAM3rC,IAEnDuG,EAAKI,UAGpB8I,EAAUmS,EAAGvP,KAAKnS,OAAQ0hB,EAAG6pB,KAAKvrC,GAASyG,SAAUib,EAAG6pB,KAAK9kC,MAErDsJ,KAAK,SAAS87B,GAGlB,OAFAxlC,EAAKN,QAAU8lC,EAAS7rC,OACxBqG,EAAKG,UAAYqlC,EAASplC,SACnBJ,GACR,SAASmM,GACR0Q,EAAS,QAAQve,MAAM,uHAAwH6N,KAG5IjD,GCtCf,SAASu8B,WAAWt5B,GAChB,IAAIu5B,EAAsB,iFAE1B,OADCv5B,GAAK/O,OAAO6I,OAAOquB,YAAcoR,EAC3BA,EAGX,SAAwBC,sBACpB,OAAOzrC,OAAE4iB,OAAO8oB,OCnBpB,SAAStB,YAAYj9B,GACjB,IAAIw+B,EAAOpnC,SAASonC,MAAQpnC,SAASqnC,cAAc,QAC/ClgC,EAAQnH,SAASC,cAAc,SAYnC,OAVAkH,EAAM/L,KAAO,WAET+L,EAAMmgC,WACNngC,EAAMmgC,WAAWC,QAAU3+B,EAE3BzB,EAAM/D,YAAYpD,SAASwnC,eAAe5+B,IAG9Cw+B,EAAKhkC,YAAY+D,GAEV,WACHigC,EAAKv6B,YAAY1F,ICNzB,SAASsgC,iBAAiB/d,EAAQge,EAAgBC,EAAa9qB,GAC3D1hB,KAAK0X,KAGL,SAAcD,GACV,IACIg1B,EADAje,EAAOxuB,KAGX,IACIysC,EAAale,EAAOme,MAAMj1B,GAC5B,MAAMlF,YAGJk6B,IAAeA,EAAah1B,GAGhC+0B,EAAYC,GAAY38B,KAExB,SAAiB/P,GAYbwuB,EAAOxuB,OAASA,EAChBwuB,EAAOpuB,SAAYJ,GAAUA,EAAOI,aAGpCquB,EAAK+b,QAAU,IAAIgC,EAAehe,EAAQxuB,GAC1CyuB,EAAK+b,QAAQW,WAfb,SAAiBxjC,GAEb,OAAKpH,OAAE2C,SAASyE,GAGLA,EAAKilC,UAAU,EAAGjlC,EAAKklC,YAAY,WAF1C,EAYgBC,CAAQJ,IAGhCle,EAAO9K,MAAM,iBAGjB,SAAelR,GACXmP,EAAU,WAAWhd,MAAM,kBAAoB+nC,EAAYl6B,MAMvE,SAASwR,aAAUtC,EAAIyS,EAAUxS,GAC7B,OACIoO,SAAU,IACVniB,SAAQ,EACRnH,UACI,6DACA,0CACA,6BACA,2CACA,UACF8X,KAAK,MACPuR,WAAYyc,iBACZlY,SAAU,YAAa,UACvBpQ,KAAO,SAASuK,EAAQwB,EAAUhZ,EAAMyX,GAwBpC,SAAS/H,IACL,IAAIqmB,GAAUC,SAAUA,EAAU1oC,YAAaA,EAAaI,gBAAiB8pB,EAAOpuB,UACpF6sC,GACIze,EAAOpuB,SAASiE,UAChB9D,OAAEyF,IAAIgnC,EAAS,QACf1oC,EAAYkE,IACZjI,OAAE2F,KAAKgnC,EAAKnjC,KAAMmjC,GAAO7mC,KAAK/B,EAAalE,SAASouB,EAAOpuB,WAC3DkE,EAAY+K,KACZ,WACImf,EAAO2e,SAAU,IAEtBJ,GAGP,SAAS9vB,IACL,IAAI8vB,GAAUC,SAAUA,EAAU1oC,YAAaA,GAC/C2oC,GACID,GAAYA,EAAS/qC,KACrB1B,OAAE2F,KAAKgnC,EAAK3F,MAAO2F,GACnB1e,EAAOpuB,SAAS4f,MAChB,WACIwO,EAAO2e,SAAU,EACjB3e,EAAO9K,MAAM,gBACb8K,EAAOyC,aAEZ8b,GAoBP,SAASE,EAAWjpC,EAAK+oC,GACrB,IAAIx9B,EAAUmS,EAAG6pB,OAEjBhrC,OAAEyD,GAEGpB,IAAI,SAASC,GACV,OAAO,WACH,IAAIuqC,EAAO7sC,OAAEgT,WAAW1Q,GAASsxB,EAAU9xB,OAAOQ,EAAM,KAAKkqC,OAAclqC,EAC3E,OAAO6e,EAAG6pB,KAAK6B,MAGtBhkC,OAAO,SAASmG,EAAS/B,GACtB,OAAO+B,EAAQQ,KAAKvC,EAAI,SAASgF,GAC7BmP,EAAU,WAAWhd,MAAM,4CAA4C6N,MAE5EjD,GAnFX,IACIjL,EAAa0oC,EADbE,EAAOze,EAAK,GAAI4e,EAAW5e,EAAK,GAGpC4e,EAAS11B,KAAKX,EAAKs2B,WAEnB9e,EAAOpK,IAAI,iBAIX,WACIoK,EAAO2e,SAAU,EAGjBH,EAAW1oC,EAGXA,EAAc+oC,EAAS7C,QAAQnqC,UAC/BshB,EAAU,WAAWS,MAAM,sBAAuB9d,GAGlDA,EAAcoiB,IAAYzJ,MAd9BuR,EAAOpK,IAAI,YAmDX,SAAkBmpB,EAAI5uB,GAClB4uB,EAAG3S,kBACHpM,EAAO2e,SAAU,EACjB3e,EAAO9K,MAAM,eAAgB/E,KArDjC6P,EAAO2e,SAAU,ICjF7B,SAASnpB,eACL,OACI+L,SAAU,IACVtpB,SAAU,kCACVkgC,QAAS,WACL,OAEIn+B,IAAK,SAASgmB,EAAQwB,EAAUC,GAC5B,IAAIyc,EACAh1B,EAASuY,EAAMud,cACnB,IACId,EAAale,EAAOme,MAAMj1B,GAC5B,MAAMlF,IAER,IAAInM,EAAQqmC,IAA2BhnC,UAAUgS,GAEjD8W,EAAOxuB,QACHM,WACKN,QAAQ,OAAQ,sBAAuB,SAASid,EAAMzY,GAAcA,EAAasB,aAAcmX,OAChG5W,QClB5B,SAASonC,gBAAgBC,GACrB,OACIzpB,KAAM,SAASuK,EAAQwB,GACnBA,EAAS1iB,GAAG,QAAS,WACjBogC,EAAoB5nC,iBCLpC,SAASwvB,UAAUgB,EAAS7gB,GAExB,IAAIk4B,EAAQ,GACR/5B,EAAW,IACXg6B,EAAMtX,EAAQuX,sBACdC,EAAYxX,EAAQyX,qBAExB,OACI5Y,MAAO,SAAS5nB,EAAS0P,GAoBrB,SAASkY,IACL,IAAI6Y,EAAYv4B,IAAQmK,EACpBquB,EAAaD,EAAUp6B,EAG3B,GAAIo6B,EAAYp6B,EAIZ,OAHA/I,EAAGoB,MAAMqI,IAAM,EACfw5B,EAAUI,QACVjxB,IAIJpS,EAAGoB,MAAMqI,IAAOq5B,GAASM,EAAW,GAAM,KAC1CC,EAAWN,EAAIzY,GAhCnB,IACI+Y,EADArjC,EAAK0C,EAAQ,GAEbqS,EAAQnK,IAUZ,OAPAlI,EAAQG,KACJ4G,KAAMq5B,EAAO,OAIjBO,EAAWN,EAAIzY,GAER,SAASgZ,GACRA,IACAL,EAAUI,GACV3gC,EAAQG,KAAK4G,IAAK,WAqB9BsgB,MAAO,SAASrnB,EAAS0P,GAcrB,SAAS2X,IACL,IAAIoZ,EAAYv4B,IAAQmK,EACpBquB,EAAa,EAAED,EAAUp6B,EAG7B,GAAIo6B,EAAYp6B,EAGZ,OAFAk6B,EAAUI,QACVjxB,IAIJpS,EAAGoB,MAAMqI,IAAOq5B,GAASM,EAAW,GAAM,KAC1CC,EAAWN,EAAIhZ,GAzBnB,IACIsZ,EADArjC,EAAK0C,EAAQ,GAEbqS,EAAQnK,IAKZ,OAFAy4B,EAAWN,EAAIhZ,GAER,SAASuZ,GACRA,GACAL,EAAUI,MCvD9B,SAAS5Y,YAAUgB,EAAS7gB,GAExB,IAAI7B,EAAW,IACXg6B,EAAMtX,EAAQuX,sBACdC,EAAYxX,EAAQyX,qBAExB,OACI5Y,MAAO,SAAS5nB,EAAS0P,GAkBrB,SAASkY,IACL,IAAI6Y,EAAYv4B,IAAQmK,EACpBquB,EAAaD,EAAUp6B,EAG3B,GAAIo6B,EAAYp6B,EAIZ,OAHA/I,EAAGoB,MAAMmI,QAAU,EACnB05B,EAAUI,QACVjxB,IAIJpS,EAAGoB,MAAMmI,QAAU65B,EACnBC,EAAWN,EAAIzY,GA9BnB,IACI+Y,EADArjC,EAAK0C,EAAQ,GAEbqS,EAAQnK,IAQZ,OALA5K,EAAGoB,MAAMmI,QAAU,EAGnB85B,EAAWN,EAAIzY,GAER,SAASgZ,GACRA,IACAL,EAAUI,GACVrjC,EAAGoB,MAAMmI,QAAU,KAqB/BwgB,MAAO,SAASrnB,EAAS0P,GAerB,SAAS2X,IACL,IAAIoZ,EAAYv4B,IAAQmK,EACpBquB,EAAa,EAAED,EAAUp6B,EAG7B,GAAIo6B,EAAYp6B,EAIZ,OAHA/I,EAAGoB,MAAMmI,QAAU,EACnB05B,EAAUI,QACVjxB,IAIJpS,EAAGoB,MAAMmI,QAAU65B,EACnBC,EAAWN,EAAIhZ,GA3BnB,IACIsZ,EADArjC,EAAK0C,EAAQ,GAEbqS,EAAQnK,IAKZ,OAFAy4B,EAAWN,EAAIhZ,GAER,SAASuZ,GACRA,IACAL,EAAUI,GACVrjC,EAAGoB,MAAMmI,QAAU,MCrDvC,SAASkhB,YAAUgB,EAAS7gB,GAExB,IAAI7B,EAAW,IACXg6B,EAAMtX,EAAQuX,sBACdC,EAAYxX,EAAQyX,qBAExB,OACI5Y,MAAO,SAAS5nB,EAAS0P,GAkBrB,SAASkY,IACL,IAAI6Y,EAAYv4B,IAAQmK,EACpBquB,EAAa,EAAID,EAAUp6B,EAG/B,GAAIo6B,EAAYp6B,EAIZ,OAHA/I,EAAGoB,MAAMkI,KAAO,KAChB25B,EAAUI,QACVjxB,IAIJpS,EAAGoB,MAAMkI,KAAoB,KAAX85B,EAAkB,IAEpCC,EAAWN,EAAIzY,GA/BnB,IACI+Y,EADArjC,EAAK0C,EAAQ,GAEbqS,EAAQnK,IAQZ,OALA5K,EAAGoB,MAAMkI,KAAO,QAGhB+5B,EAAWN,EAAIzY,GAER,SAASgZ,GACRA,IACAL,EAAUI,GACVrjC,EAAGoB,MAAMkI,KAAO,QAsB5BygB,MAAO,SAASrnB,EAAS0P,GAerB,SAAS2X,IACL,IAAIoZ,EAAYv4B,IAAQmK,EACpBquB,EAAaD,EAAUp6B,EAG3B,GAAIo6B,EAAYp6B,EAIZ,OAHA/I,EAAGoB,MAAMkI,KAAO,OAChB25B,EAAUI,QACVjxB,IAIJpS,EAAGoB,MAAMkI,KAAmB,IAAX85B,EAAkB,IACnCC,EAAWN,EAAIhZ,GA3BnB,IACIsZ,EADArjC,EAAK0C,EAAQ,GAEbqS,EAAQnK,IAKZ,OAFAy4B,EAAWN,EAAIhZ,GAER,SAASuZ,GACRA,IACAL,EAAUI,GACVrjC,EAAGoB,MAAMkI,KAAO,WC5CpC,SAAS0O,kBAAgBC,GAOrB,SAASC,EAAQC,EAAMC,GACnB,IAAIC,EAAW3iB,OAAE4iB,OAAOL,GAOxB,OALAviB,OAAEO,OAAOoiB,GACLF,KAAMziB,OAAEc,QAAQ2hB,GAAQA,GAAQA,GAChCC,QAASA,IAGNC,EAVX,OAFAH,EAAQH,YAgBR,SAA6BxiB,GACzB0iB,EAAiB1iB,SAAWA,GAfzB2iB,ECOX,SAASK,2BAA0BC,EAAM9e,GAgErC,SAAS+e,EAAWC,GAChB,OAAO,WACH,IACI7N,EADAtV,EAAWH,KAAKG,SACbue,KAEP,GAAI1e,KAAKujB,UAAUD,GAAO,CAEtB,IAAK7N,EAAE,EAAGA,EAAItO,UAAUmJ,OAAQmF,IAAKiJ,EAAKjJ,GAAKtO,UAAUsO,GAKzD,GAFA2N,EAAKE,GAAOngB,MAAM,KAAMub,GAEpBve,EAASqjB,YAAa,OAG1Blf,EAAWmf,MAAM,eACb5C,KAAM,IAAIvL,KACVrV,KAAMqjB,EACN5E,KAAMA,EACNqE,KAAM/iB,KAAK+iB,SA/E3B,IAAIF,KAgBJ,OAbAviB,OAAEwC,KAAK4gB,eAAc,SAASJ,GAC1BT,EAAiBS,GAASD,EAAUC,KAIxCT,EAAiB1iB,YAGjB0iB,EAAiBU,UAcjB,SAAmBD,GACf,IAAIK,EAAc3jB,KAAKG,SAASmjB,OAAS,OACrCM,EAAa5jB,KAAKG,SAAS4iB,MAAQ,MACnCA,EAAO/iB,KAAK+iB,KAGhB,SAFY/iB,KAAKgjB,SAOX1iB,OAAE2I,QAAQya,eAAcC,GAM1BE,SAAOP,GAASO,SAAOF,IAKR,QAAfC,IAAyBtjB,OAAEwjB,aAAaf,EAAMziB,OAAEc,QAAQwiB,GAAcA,GAAcA,IAAatT,QAVjGtQ,KAAKG,SAASmjB,MAAQ,QACtBtjB,KAAK0E,MAAM,wBAA0Bif,EAAc,sDAC5C,MAvBRd,ECpCX,SAASkB,aAAUzf,GACf,OACIqJ,SAAS,EACTnH,SAASA,YACTwd,KAAM,SAASC,GACX,IAAI9U,EAAO8U,EAAM9U,QAEjB8U,EAAMnV,OAON,SAAgBzF,GACZ,IAAIuP,EAAQtY,OAAE2I,QAAQkG,EAAM9F,GACxBuP,GAAS,GACTzJ,EAAKuG,OAAOkD,EAAO,IAT3BqL,EAAMC,SAAU,EAEhB5f,EAAW6f,IAAI,cAAe,SAASF,EAAO5a,GAC1C8F,EAAKjM,KAAKmG,OCA1B,SAAS0L,YAAUnS,EAAOwhB,GACtB,GAAa,MAATxhB,EACA,MAAO,sCAEX,GAAc,KAAVA,EACA,MAAO,4CAGX,cAAeA,GACX,IAAK,SACD,MACJ,IAAK,SACDA,EAAQ,GAAKA,EACb,MACJ,IAAK,SAED,GAAIA,aAAiBpB,MAAM,CACvBoB,EAAQA,EAAMgC,QACd,MAGR,QAEIhC,EAAQ,gCAAkCV,QAAQmiB,OAAOzhB,IAASwhB,GAAU,OAGpF,OAAOxhB,ECPX,SAAS4Y,SAAS5Q,GACd1I,QAAQisC,UAAUvjC,GAAKwjC,MAAIluC,858GC5B7B,WAqRA,SAASmuC,EAAqBzrC,EAAO0rC,GACnC,GAAI1rC,IAAU0rC,EAAO,CACnB,IAAIC,EAAsB,OAAV3rC,EACZ4rC,EAAa5rC,IAAUgU,EACvB63B,EAAiB7rC,GAAUA,EAE3B8rC,EAAsB,OAAVJ,EACZK,EAAaL,IAAU13B,EACvBg4B,EAAiBN,GAAUA,EAE/B,GAAK1rC,EAAQ0rC,IAAUI,IAAeD,GACjCF,IAAcI,GAAcC,GAC5BJ,GAAcI,EACjB,OAAO,EAET,GAAKhsC,EAAQ0rC,IAAUC,IAAeK,GACjCF,IAAcF,GAAcC,GAC5BE,GAAcF,EACjB,OAAQ,EAGZ,OAAO,EAaT,SAASI,EAAcC,EAAOC,EAAWC,GAIvC,IAHA,IAAI1+B,EAASw+B,EAAMx+B,OACfsI,EAAQo2B,EAAY1+B,GAAU,EAE1B0+B,EAAYp2B,MAAYA,EAAQtI,GACtC,GAAIy+B,EAAUD,EAAMl2B,GAAQA,EAAOk2B,GACjC,OAAOl2B,EAGX,OAAQ,EAYV,SAASq2B,EAAYH,EAAOlsC,EAAOygC,GACjC,GAAIzgC,GAAUA,EACZ,OAAOssC,EAAWJ,EAAOzL,GAK3B,IAHA,IAAIzqB,EAAQyqB,EAAY,EACpB/yB,EAASw+B,EAAMx+B,SAEVsI,EAAQtI,GACf,GAAIw+B,EAAMl2B,KAAWhW,EACnB,OAAOgW,EAGX,OAAQ,EAWV,SAASu2B,EAAevsC,GAGtB,MAAuB,mBAATA,IAAuB,EAWvC,SAASwsC,EAAaxsC,GACpB,OAAgB,MAATA,EAAgB,GAAMA,EAAQ,GAYvC,SAASysC,EAAe5Y,EAAQ6Y,GAI9B,IAHA,IAAI12B,GAAS,EACTtI,EAASmmB,EAAOnmB,SAEXsI,EAAQtI,GAAUg/B,EAAMrmC,QAAQwtB,EAAOC,OAAO9d,KAAW,IAClE,OAAOA,EAYT,SAAS22B,EAAgB9Y,EAAQ6Y,GAG/B,IAFA,IAAI12B,EAAQ6d,EAAOnmB,OAEZsI,KAAW02B,EAAMrmC,QAAQwtB,EAAOC,OAAO9d,KAAW,IACzD,OAAOA,EAYT,SAAS42B,EAAiBC,EAAQnB,GAChC,OAAOD,EAAqBoB,EAAOC,SAAUpB,EAAMoB,WAAcD,EAAO72B,MAAQ01B,EAAM11B,MAiBxF,SAAS+2B,EAAgBF,EAAQnB,EAAOsB,GAOtC,IANA,IAAIh3B,GAAS,EACTi3B,EAAcJ,EAAOC,SACrBI,EAAcxB,EAAMoB,SACpBp/B,EAASu/B,EAAYv/B,OACrBy/B,EAAeH,EAAOt/B,SAEjBsI,EAAQtI,GAAQ,CACvB,IAAIlH,EAASilC,EAAqBwB,EAAYj3B,GAAQk3B,EAAYl3B,IAClE,GAAIxP,EAAQ,CACV,GAAIwP,GAASm3B,EACX,OAAO3mC,EAET,IAAI0uB,EAAQ8X,EAAOh3B,GACnB,OAAOxP,GAAqB,QAAV0uB,IAA6B,IAAVA,EAAkB,GAAK,IAUhE,OAAO2X,EAAO72B,MAAQ01B,EAAM11B,MAU9B,SAASo3B,EAAaC,GACpB,OAAOC,GAAgBD,GAUzB,SAASE,EAAeC,GACtB,OAAOC,GAAYD,GAYrB,SAASE,EAAiBF,EAAKG,EAAaC,GAM1C,OALID,EACFH,EAAMK,GAAcL,GACXI,IACTJ,EAAMM,GAAcN,IAEf,KAAOA,EAUhB,SAASO,EAAiBP,GACxB,MAAO,KAAOM,GAAcN,GAY9B,SAASlB,EAAWJ,EAAOzL,EAAW2L,GAIpC,IAHA,IAAI1+B,EAASw+B,EAAMx+B,OACfsI,EAAQyqB,GAAa2L,EAAY,GAAK,GAElCA,EAAYp2B,MAAYA,EAAQtI,GAAS,CAC/C,IAAIg+B,EAAQQ,EAAMl2B,GAClB,GAAI01B,GAAUA,EACZ,OAAO11B,EAGX,OAAQ,EAUV,SAASg4B,EAAahuC,GACpB,QAASA,GAAyB,iBAATA,EAW3B,SAASiuC,EAAQC,GACf,OAASA,GAAY,KAAQA,GAAY,GAAKA,GAAY,IAAmB,IAAZA,GAA8B,KAAZA,GAAgC,MAAZA,GAAgC,MAAZA,GACxHA,GAAY,OAASA,GAAY,MAAoB,MAAZA,GAAgC,MAAZA,GAAgC,MAAZA,GAAgC,MAAZA,GAAgC,OAAZA,GAAiC,OAAZA,GAYnJ,SAASC,EAAejC,EAAOkC,GAM7B,IALA,IAAIp4B,GAAS,EACTtI,EAASw+B,EAAMx+B,OACf2gC,GAAY,EACZ7nC,OAEKwP,EAAQtI,GACXw+B,EAAMl2B,KAAWo4B,IACnBlC,EAAMl2B,GAASs4B,EACf9nC,IAAS6nC,GAAYr4B,GAGzB,OAAOxP,EAYT,SAAS+nC,EAAWrC,EAAOsC,GAOzB,IANA,IAAIC,EACAz4B,GAAS,EACTtI,EAASw+B,EAAMx+B,OACf2gC,GAAY,EACZ7nC,OAEKwP,EAAQtI,GAAQ,CACvB,IAAI1N,EAAQksC,EAAMl2B,GACd04B,EAAWF,EAAWA,EAASxuC,EAAOgW,EAAOk2B,GAASlsC,EAErDgW,GAASy4B,IAASC,IACrBD,EAAOC,EACPloC,IAAS6nC,GAAYruC,GAGzB,OAAOwG,EAWT,SAASmoC,EAAiB9a,GAIxB,IAHA,IAAI7d,GAAS,EACTtI,EAASmmB,EAAOnmB,SAEXsI,EAAQtI,GAAUugC,EAAQpa,EAAOxjB,WAAW2F,MACrD,OAAOA,EAWT,SAAS44B,EAAkB/a,GAGzB,IAFA,IAAI7d,EAAQ6d,EAAOnmB,OAEZsI,KAAWi4B,EAAQpa,EAAOxjB,WAAW2F,MAC5C,OAAOA,EAUT,SAAS64B,EAAiBrB,GACxB,OAAOsB,GAActB,GAwCvB,SAASuB,EAAavsC,GAgMpB,SAASwsC,EAAOhvC,GACd,GAAIguC,EAAahuC,KAAWxB,GAAQwB,MAAYA,aAAiBivC,IAAc,CAC7E,GAAIjvC,aAAiBkvC,GACnB,OAAOlvC,EAET,GAAImF,GAAe5D,KAAKvB,EAAO,cAAgBmF,GAAe5D,KAAKvB,EAAO,eACxE,OAAOmvC,GAAanvC,GAGxB,OAAO,IAAIkvC,GAAclvC,GAQ3B,SAASovC,KAYT,SAASF,GAAclvC,EAAOqvC,EAAUt3B,GACtC3a,KAAKkyC,YAActvC,EACnB5C,KAAKmyC,YAAcx3B,MACnB3a,KAAKoyC,YAAcH,EAiFrB,SAASJ,GAAYjvC,GACnB5C,KAAKkyC,YAActvC,EACnB5C,KAAKmyC,eACLnyC,KAAKqyC,QAAU,EACfryC,KAAKsyC,cAAe,EACpBtyC,KAAKuyC,iBACLvyC,KAAKwyC,cAAgBC,GACrBzyC,KAAK0yC,aA6GP,SAASC,KACP3yC,KAAK4yC,YAoEP,SAASC,GAASC,GAChB,IAAIxiC,EAASwiC,EAASA,EAAOxiC,OAAS,EAGtC,IADAtQ,KAAKqF,MAAS0kC,KAAQgJ,GAAa,MAAOtyC,IAAO,IAAIuyC,IAC9C1iC,KACLtQ,KAAKkD,KAAK4vC,EAAOxiC,IAarB,SAAS2iC,GAAa/0B,EAAOtb,GAC3B,IAAIyC,EAAO6Y,EAAM7Y,KAGjB,OAF8B,iBAATzC,GAAqByN,GAASzN,GAAUyC,EAAK5E,IAAIyG,IAAItE,GAASyC,EAAK0kC,KAAKnnC,IAE7E,GAAK,EA8BvB,SAASswC,GAAYpE,EAAOR,GAO1B,IANA,IAAI11B,GAAS,EACTtI,EAASw+B,EAAMx+B,OACf6iC,GAAY,EACZC,EAAY9E,EAAMh+B,OAClBlH,EAAS4J,GAAM1C,EAAS8iC,KAEnBx6B,EAAQtI,GACflH,EAAOwP,GAASk2B,EAAMl2B,GAExB,OAASu6B,EAAWC,GAClBhqC,EAAOwP,KAAW01B,EAAM6E,GAE1B,OAAO/pC,EAWT,SAASiqC,GAAU57B,EAAQq3B,GACzB,IAAIl2B,GAAS,EACTtI,EAASmH,EAAOnH,OAGpB,IADAw+B,IAAUA,EAAQ97B,GAAM1C,MACfsI,EAAQtI,GACfw+B,EAAMl2B,GAASnB,EAAOmB,GAExB,OAAOk2B,EAYT,SAASwE,GAAUxE,EAAOsC,GAIxB,IAHA,IAAIx4B,GAAS,EACTtI,EAASw+B,EAAMx+B,SAEVsI,EAAQtI,IAC8B,IAAzC8gC,EAAStC,EAAMl2B,GAAQA,EAAOk2B,KAIpC,OAAOA,EAiCT,SAASyE,GAAWzE,EAAOC,GAIzB,IAHA,IAAIn2B,GAAS,EACTtI,EAASw+B,EAAMx+B,SAEVsI,EAAQtI,GACf,IAAKy+B,EAAUD,EAAMl2B,GAAQA,EAAOk2B,GAClC,OAAO,EAGX,OAAO,EAcT,SAAS0E,GAAc1E,EAAOsC,EAAUqC,EAAYC,GAMlD,IALA,IAAI96B,GAAS,EACTtI,EAASw+B,EAAMx+B,OACfghC,EAAWoC,EACXtqC,EAASkoC,IAEJ14B,EAAQtI,GAAQ,CACvB,IAAI1N,EAAQksC,EAAMl2B,GACdxY,GAAWgxC,EAASxuC,GAEpB6wC,EAAWrzC,EAASkxC,KACtBA,EAAWlxC,EACXgJ,EAASxG,GAGb,OAAOwG,EAYT,SAASuqC,GAAY7E,EAAOC,GAM1B,IALA,IAAIn2B,GAAS,EACTtI,EAASw+B,EAAMx+B,OACf2gC,GAAY,EACZ7nC,OAEKwP,EAAQtI,GAAQ,CACvB,IAAI1N,EAAQksC,EAAMl2B,GACdm2B,EAAUnsC,EAAOgW,EAAOk2B,KAC1B1lC,IAAS6nC,GAAYruC,GAGzB,OAAOwG,EAYT,SAASwqC,GAAS9E,EAAOsC,GAKvB,IAJA,IAAIx4B,GAAS,EACTtI,EAASw+B,EAAMx+B,OACflH,EAAS4J,GAAM1C,KAEVsI,EAAQtI,GACflH,EAAOwP,GAASw4B,EAAStC,EAAMl2B,GAAQA,EAAOk2B,GAEhD,OAAO1lC,EAWT,SAASyqC,GAAU/E,EAAOgE,GAKxB,IAJA,IAAIl6B,GAAS,EACTtI,EAASwiC,EAAOxiC,OAChB+sB,EAASyR,EAAMx+B,SAEVsI,EAAQtI,GACfw+B,EAAMzR,EAASzkB,GAASk6B,EAAOl6B,GAEjC,OAAOk2B,EAeT,SAASgF,GAAYhF,EAAOsC,EAAU2C,EAAaC,GACjD,IAAIp7B,GAAS,EACTtI,EAASw+B,EAAMx+B,OAKnB,IAHI0jC,GAAiB1jC,IACnByjC,EAAcjF,IAAQl2B,MAEfA,EAAQtI,GACfyjC,EAAc3C,EAAS2C,EAAajF,EAAMl2B,GAAQA,EAAOk2B,GAE3D,OAAOiF,EAoCT,SAASE,GAAUnF,EAAOC,GAIxB,IAHA,IAAIn2B,GAAS,EACTtI,EAASw+B,EAAMx+B,SAEVsI,EAAQtI,GACf,GAAIy+B,EAAUD,EAAMl2B,GAAQA,EAAOk2B,GACjC,OAAO,EAGX,OAAO,EAYT,SAASoF,GAASpF,EAAOsC,GAIvB,IAHA,IAAI9gC,EAASw+B,EAAMx+B,OACflH,EAAS,EAENkH,KACLlH,IAAWgoC,EAAStC,EAAMx+B,KAAY,EAExC,OAAOlH,EA4BT,SAAS+qC,GAAkBC,EAAaC,EAAaxxC,EAAK4sC,GACxD,OAAQ2E,IAAgBx9B,GAAc7O,GAAe5D,KAAKsrC,EAAQ5sC,GAE9DuxC,EADAC,EAeN,SAASC,GAAW7E,EAAQh4B,EAAQ88B,GAKlC,IAJA,IAAI37B,GAAS,EACTswB,EAAQ7B,GAAK5vB,GACbnH,EAAS44B,EAAM54B,SAEVsI,EAAQtI,GAAQ,CACvB,IAAIzN,EAAMqmC,EAAMtwB,GACZhW,EAAQ6sC,EAAO5sC,GACfuG,EAASmrC,EAAW3xC,EAAO6U,EAAO5U,GAAMA,EAAK4sC,EAAQh4B,IAEpDrO,GAAWA,EAAUA,IAAWxG,EAAUA,GAAUA,KACpDA,IAAUgU,GAAe/T,KAAO4sC,KACnCA,EAAO5sC,GAAOuG,GAGlB,OAAOqmC,EAYT,SAAS+E,GAAW/E,EAAQh4B,GAC1B,OAAiB,MAAVA,EACHg4B,EACAgF,GAASh9B,EAAQ4vB,GAAK5vB,GAASg4B,GAYrC,SAASiF,GAAOnyC,EAAY2mC,GAQ1B,IAPA,IAAItwB,GAAS,EACT+7B,EAAsB,MAAdpyC,EACRqyC,GAASD,GAASE,GAAYtyC,GAC9B+N,EAASskC,EAAQryC,EAAW+N,OAAS,EACrCwkC,EAAc5L,EAAM54B,OACpBlH,EAAS4J,GAAM8hC,KAEXl8B,EAAQk8B,GAAa,CAC3B,IAAIjyC,EAAMqmC,EAAMtwB,GAEdxP,EAAOwP,GADLg8B,EACcG,GAAQlyC,EAAKyN,GAAU/N,EAAWM,GAAO+T,EAEzC+9B,EAAQ/9B,EAAYrU,EAAWM,GAGnD,OAAOuG,EAYT,SAASqrC,GAASh9B,EAAQyxB,EAAOuG,GAC/BA,IAAWA,MAKX,IAHA,IAAI72B,GAAS,EACTtI,EAAS44B,EAAM54B,SAEVsI,EAAQtI,GAAQ,CACvB,IAAIzN,EAAMqmC,EAAMtwB,GAChB62B,EAAO5sC,GAAO4U,EAAO5U,GAEvB,OAAO4sC,EAaT,SAASuF,GAAaC,EAAMC,EAASC,GACnC,IAAIl1C,SAAcg1C,EAClB,MAAY,YAARh1C,EACKi1C,IAAYt+B,EACfq+B,EACAG,GAAaH,EAAMC,EAASC,GAEtB,MAARF,EACKpQ,GAEG,UAAR5kC,EACKo1C,GAAYJ,GAEdC,IAAYt+B,EACflO,GAASusC,GACTK,GAAoBL,EAAMC,GAiBhC,SAASK,GAAU3yC,EAAO4yC,EAAQjB,EAAY1xC,EAAK4sC,EAAQgG,EAAQC,GACjE,IAAItsC,EAIJ,GAHImrC,IACFnrC,EAASqmC,EAAS8E,EAAW3xC,EAAOC,EAAK4sC,GAAU8E,EAAW3xC,IAE5DwG,IAAWwN,EACb,OAAOxN,EAET,IAAKiH,GAASzN,GACZ,OAAOA,EAET,IAAIgyC,EAAQxzC,GAAQwB,GACpB,GAAIgyC,GAEF,GADAxrC,EAASusC,GAAe/yC,IACnB4yC,EACH,OAAOnC,GAAUzwC,EAAOwG,OAErB,CACL,IAAIwsC,EAAMC,GAAY1xC,KAAKvB,GACvBkzC,EAASF,GAAOG,EAEpB,GAAIH,GAAOI,GAAaJ,GAAOK,KAAYH,GAAWrG,GAMpD,OAAOyG,GAAcN,GACjBO,GAAevzC,EAAOgzC,EAAKJ,GAC1B/F,EAAS7sC,KANd,GADAwG,EAASgtC,GAAgBN,KAAclzC,IAClC4yC,EACH,OAAOhB,GAAWprC,EAAQxG,GAShC6yC,IAAWA,MACXC,IAAWA,MAGX,IADA,IAAIplC,EAASmlC,EAAOnlC,OACbA,KACL,GAAImlC,EAAOnlC,IAAW1N,EACpB,OAAO8yC,EAAOplC,GAWlB,OAPAmlC,EAAOvyC,KAAKN,GACZ8yC,EAAOxyC,KAAKkG,IAGXwrC,EAAQtB,GAAY+C,IAAYzzC,EAAO,SAAS0zC,EAAUzzC,GACzDuG,EAAOvG,GAAO0yC,GAAUe,EAAUd,EAAQjB,EAAY1xC,EAAKD,EAAO6yC,EAAQC,KAErEtsC,EAiCT,SAASmtC,GAAUtB,EAAMuB,EAAM93B,GAC7B,GAAmB,mBAARu2B,EACT,MAAM,IAAIwB,GAAUC,GAEtB,OAAOpqC,GAAW,WAAa2oC,EAAK9xC,MAAMyT,EAAW8H,IAAU83B,GAYjE,SAASG,GAAe7H,EAAOgE,GAC7B,IAAIxiC,EAASw+B,EAAQA,EAAMx+B,OAAS,EAChClH,KAEJ,IAAKkH,EACH,OAAOlH,EAET,IAAIwP,GAAS,EACT3P,EAAU2tC,KACVC,EAAW5tC,GAAWgmC,EACtB/wB,EAAS24B,GAAY/D,EAAOxiC,QAAUwmC,EAAoBC,GAAYjE,GAAU,KAChFkE,EAAelE,EAAOxiC,OAEtB4N,IACFjV,EAAUgqC,GACV4D,GAAW,EACX/D,EAAS50B,GAEX+4B,EACA,OAASr+B,EAAQtI,GAAQ,CACvB,IAAI1N,EAAQksC,EAAMl2B,GAElB,GAAIi+B,GAAYj0C,GAAUA,EAAO,CAE/B,IADA,IAAIs0C,EAAcF,EACXE,KACL,GAAIpE,EAAOoE,KAAiBt0C,EAC1B,SAASq0C,EAGb7tC,EAAOlG,KAAKN,QAELqG,EAAQ6pC,EAAQlwC,EAAO,GAAK,GACnCwG,EAAOlG,KAAKN,GAGhB,OAAOwG,EAmCT,SAAS+tC,GAAU50C,EAAYwsC,GAC7B,IAAI3lC,GAAS,EAKb,OAJAguC,GAAS70C,EAAY,SAASK,EAAOgW,EAAOrW,GAE1C,OADA6G,IAAW2lC,EAAUnsC,EAAOgW,EAAOrW,KAG9B6G,EAeT,SAASiuC,GAAa90C,EAAY6uC,EAAUqC,EAAYC,GACtD,IAAIpC,EAAWoC,EACXtqC,EAASkoC,EASb,OAPA8F,GAAS70C,EAAY,SAASK,EAAOgW,EAAOrW,GAC1C,IAAInC,GAAWgxC,EAASxuC,EAAOgW,EAAOrW,IAClCkxC,EAAWrzC,EAASkxC,IAAclxC,IAAYszC,GAAWtzC,IAAYgJ,KACvEkoC,EAAWlxC,EACXgJ,EAASxG,KAGNwG,EAaT,SAASkuC,GAASxI,EAAOlsC,EAAO+c,EAAO9Q,GACrC,IAAIyB,EAASw+B,EAAMx+B,OAanB,KAXAqP,EAAiB,MAATA,EAAgB,GAAMA,GAAS,GAC3B,IACVA,GAASA,EAAQrP,EAAS,EAAKA,EAASqP,IAE1C9Q,EAAOA,IAAQ+H,GAAa/H,EAAMyB,EAAUA,GAAWzB,GAAO,GACpD,IACRA,GAAOyB,GAETA,EAASqP,EAAQ9Q,EAAM,EAAKA,IAAQ,EACpC8Q,KAAW,EAEJA,EAAQrP,GACbw+B,EAAMnvB,KAAW/c,EAEnB,OAAOksC,EAYT,SAASyI,GAAWh1C,EAAYwsC,GAC9B,IAAI3lC,KAMJ,OALAguC,GAAS70C,EAAY,SAASK,EAAOgW,EAAOrW,GACtCwsC,EAAUnsC,EAAOgW,EAAOrW,IAC1B6G,EAAOlG,KAAKN,KAGTwG,EAgBT,SAASouC,GAASj1C,EAAYwsC,EAAW0I,EAAUC,GACjD,IAAItuC,EAOJ,OANAquC,EAASl1C,EAAY,SAASK,EAAOC,EAAKN,GACxC,GAAIwsC,EAAUnsC,EAAOC,EAAKN,GAExB,OADA6G,EAASsuC,EAAS70C,EAAMD,GACjB,IAGJwG,EAcT,SAASuuC,GAAY7I,EAAO0G,EAAQoC,EAAUxuC,GAC5CA,IAAWA,MAKX,IAHA,IAAIwP,GAAS,EACTtI,EAASw+B,EAAMx+B,SAEVsI,EAAQtI,GAAQ,CACvB,IAAI1N,EAAQksC,EAAMl2B,GACdg4B,EAAahuC,IAAUiyC,GAAYjyC,KAClCg1C,GAAYx2C,GAAQwB,IAAUi1C,GAAYj1C,IACzC4yC,EAEFmC,GAAY/0C,EAAO4yC,EAAQoC,EAAUxuC,GAErCyqC,GAAUzqC,EAAQxG,GAEVg1C,IACVxuC,EAAOA,EAAOkH,QAAU1N,GAG5B,OAAOwG,EAsCT,SAAS0uC,GAAUrI,EAAQ2B,GACzB,OAAO2G,GAAQtI,EAAQ2B,EAAU4G,IAYnC,SAAS3B,GAAW5G,EAAQ2B,GAC1B,OAAO2G,GAAQtI,EAAQ2B,EAAU/J,IAYnC,SAAS4Q,GAAgBxI,EAAQ2B,GAC/B,OAAO8G,GAAazI,EAAQ2B,EAAU/J,IAYxC,SAAS8Q,GAAc1I,EAAQvG,GAM7B,IALA,IAAItwB,GAAS,EACTtI,EAAS44B,EAAM54B,OACf2gC,GAAY,EACZ7nC,OAEKwP,EAAQtI,GAAQ,CACvB,IAAIzN,EAAMqmC,EAAMtwB,GACZtF,GAAWm8B,EAAO5sC,MACpBuG,IAAS6nC,GAAYpuC,GAGzB,OAAOuG,EAaT,SAASgvC,GAAQ3I,EAAQ/nC,EAAM2wC,GAC7B,GAAc,MAAV5I,EAAJ,CAGI4I,IAAYzhC,GAAayhC,KAAWC,GAAS7I,KAC/C/nC,GAAQ2wC,IAKV,IAHA,IAAIz/B,EAAQ,EACRtI,EAAS5I,EAAK4I,OAED,MAAVm/B,GAAkB72B,EAAQtI,GAC/Bm/B,EAASA,EAAO/nC,EAAKkR,MAEvB,OAAQA,GAASA,GAAStI,EAAUm/B,EAAS74B,GAgB/C,SAAS2hC,GAAY31C,EAAO0rC,EAAOiG,EAAYiE,EAAS/C,EAAQC,GAC9D,OAAI9yC,IAAU0rC,IAGD,MAAT1rC,GAA0B,MAAT0rC,IAAmBj+B,GAASzN,KAAWguC,EAAatC,GAChE1rC,GAAUA,GAAS0rC,GAAUA,EAE/BmK,GAAgB71C,EAAO0rC,EAAOiK,GAAahE,EAAYiE,EAAS/C,EAAQC,IAkBjF,SAAS+C,GAAgBhJ,EAAQnB,EAAOoK,EAAWnE,EAAYiE,EAAS/C,EAAQC,GAC9E,IAAIiD,EAAWv3C,GAAQquC,GACnBmJ,EAAWx3C,GAAQktC,GACnBuK,EAASC,EACTC,EAASD,EAERH,KACHE,EAAShD,GAAY1xC,KAAKsrC,KACZwG,EACZ4C,EAAS7C,EACA6C,GAAU7C,IACnB2C,EAAWK,GAAavJ,KAGvBmJ,KACHG,EAASlD,GAAY1xC,KAAKmqC,KACZ2H,EACZ8C,EAAS/C,EACA+C,GAAU/C,IACnB4C,EAAWI,GAAa1K,KAG5B,IAAI2K,EAAWJ,GAAU7C,EACrBkD,EAAWH,GAAU/C,EACrBmD,EAAYN,GAAUE,EAE1B,GAAII,IAAeR,IAAYM,EAC7B,OAAOG,GAAW3J,EAAQnB,EAAOuK,GAEnC,IAAKL,EAAS,CACZ,IAAIa,EAAeJ,GAAYlxC,GAAe5D,KAAKsrC,EAAQ,eACvD6J,EAAeJ,GAAYnxC,GAAe5D,KAAKmqC,EAAO,eAE1D,GAAI+K,GAAgBC,EAClB,OAAOZ,EAAUW,EAAe5J,EAAO7sC,QAAU6sC,EAAQ6J,EAAehL,EAAM1rC,QAAU0rC,EAAOiG,EAAYiE,EAAS/C,EAAQC,GAGhI,IAAKyD,EACH,OAAO,EAIT1D,IAAWA,MACXC,IAAWA,MAGX,IADA,IAAIplC,EAASmlC,EAAOnlC,OACbA,KACL,GAAImlC,EAAOnlC,IAAWm/B,EACpB,OAAOiG,EAAOplC,IAAWg+B,EAI7BmH,EAAOvyC,KAAKusC,GACZiG,EAAOxyC,KAAKorC,GAEZ,IAAIllC,GAAUuvC,EAAWY,GAAcC,IAAc/J,EAAQnB,EAAOoK,EAAWnE,EAAYiE,EAAS/C,EAAQC,GAK5G,OAHAD,EAAO7uB,MACP8uB,EAAO9uB,MAEAxd,EAaT,SAASqwC,GAAYhK,EAAQiK,EAAWnF,GACtC,IAAI37B,EAAQ8gC,EAAUppC,OAClBA,EAASsI,EACT+gC,GAAgBpF,EAEpB,GAAc,MAAV9E,EACF,OAAQn/B,EAGV,IADAm/B,EAAS6I,GAAS7I,GACX72B,KAAS,CACd,IAAIvT,EAAOq0C,EAAU9gC,GACrB,GAAK+gC,GAAgBt0C,EAAK,GAClBA,EAAK,KAAOoqC,EAAOpqC,EAAK,MACtBA,EAAK,KAAMoqC,GAEnB,OAAO,EAGX,OAAS72B,EAAQtI,GAAQ,CAEvB,IAAIzN,GADJwC,EAAOq0C,EAAU9gC,IACF,GACXghC,EAAWnK,EAAO5sC,GAClBg3C,EAAWx0C,EAAK,GAEpB,GAAIs0C,GAAgBt0C,EAAK,IACvB,GAAIu0C,IAAahjC,KAAe/T,KAAO4sC,GACrC,OAAO,MAEJ,CACL,IAAIrmC,EAASmrC,EAAaA,EAAWqF,EAAUC,EAAUh3C,GAAO+T,EAChE,KAAMxN,IAAWwN,EAAY2hC,GAAYsB,EAAUD,EAAUrF,GAAY,GAAQnrC,GAC/E,OAAO,GAIb,OAAO,EAYT,SAAS0wC,GAAQv3C,EAAY6uC,GAC3B,IAAIx4B,GAAS,EACTxP,EAASyrC,GAAYtyC,GAAcyQ,GAAMzQ,EAAW+N,WAKxD,OAHA8mC,GAAS70C,EAAY,SAASK,EAAOC,EAAKN,GACxC6G,IAASwP,GAASw4B,EAASxuC,EAAOC,EAAKN,KAElC6G,EAUT,SAASisC,GAAY59B,GACnB,IAAIiiC,EAAYK,GAAatiC,GAC7B,GAAwB,GAApBiiC,EAAUppC,QAAeopC,EAAU,GAAG,GAAI,CAC5C,IAAI72C,EAAM62C,EAAU,GAAG,GACnB92C,EAAQ82C,EAAU,GAAG,GAEzB,OAAO,SAASjK,GACd,OAAc,MAAVA,IAGGA,EAAO5sC,KAASD,IAAUA,IAAUgU,GAAc/T,KAAOy1C,GAAS7I,MAG7E,OAAO,SAASA,GACd,OAAOgK,GAAYhK,EAAQiK,IAY/B,SAASpE,GAAoB5tC,EAAMmyC,GACjC,IAAIjF,EAAQxzC,GAAQsG,GAChBmvC,EAAWmD,GAAMtyC,IAASuyC,GAAmBJ,GAC7CxB,EAAW3wC,EAAO,GAGtB,OADAA,EAAOwyC,GAAOxyC,GACP,SAAS+nC,GACd,GAAc,MAAVA,EACF,OAAO,EAET,IAAI5sC,EAAMw1C,EAEV,GADA5I,EAAS6I,GAAS7I,IACbmF,IAAUiC,MAAeh0C,KAAO4sC,GAAS,CAE5C,GAAc,OADdA,EAAwB,GAAf/nC,EAAK4I,OAAcm/B,EAAS2I,GAAQ3I,EAAQ0K,GAAUzyC,EAAM,GAAI,KAEvE,OAAO,EAET7E,EAAM8C,GAAK+B,GACX+nC,EAAS6I,GAAS7I,GAEpB,OAAOA,EAAO5sC,KAASg3C,EAClBA,IAAajjC,GAAc/T,KAAO4sC,EACnC8I,GAAYsB,EAAUpK,EAAO5sC,GAAM+T,GAAW,IAgBtD,SAASwjC,GAAU3K,EAAQh4B,EAAQ88B,EAAYkB,EAAQC,GACrD,IAAKrlC,GAASo/B,GACZ,OAAOA,EAET,IAAI4K,EAAWxF,GAAYp9B,KAAYrW,GAAQqW,IAAWuhC,GAAavhC,IACnEyxB,EAAQmR,EAAWzjC,EAAYywB,GAAK5vB,GA0BxC,OAxBA67B,GAAUpK,GAASzxB,EAAQ,SAASoiC,EAAUh3C,GAK5C,GAJIqmC,IAEF2Q,EAAWpiC,EADX5U,EAAMg3C,IAGJjJ,EAAaiJ,GACfpE,IAAWA,MACXC,IAAWA,MACX4E,GAAc7K,EAAQh4B,EAAQ5U,EAAKu3C,GAAW7F,EAAYkB,EAAQC,OAE/D,CACH,IAAI9yC,EAAQ6sC,EAAO5sC,GACfuG,EAASmrC,EAAaA,EAAW3xC,EAAOi3C,EAAUh3C,EAAK4sC,EAAQh4B,GAAUb,EACzEigC,EAAWztC,IAAWwN,EAEtBigC,IACFztC,EAASywC,GAENzwC,IAAWwN,KAAcyjC,GAAcx3C,KAAO4sC,KAC9CoH,IAAaztC,GAAWA,EAAUA,IAAWxG,EAAUA,GAAUA,KACpE6sC,EAAO5sC,GAAOuG,MAIbqmC,EAkBT,SAAS6K,GAAc7K,EAAQh4B,EAAQ5U,EAAK03C,EAAWhG,EAAYkB,EAAQC,GAIzE,IAHA,IAAIplC,EAASmlC,EAAOnlC,OAChBupC,EAAWpiC,EAAO5U,GAEfyN,KACL,GAAImlC,EAAOnlC,IAAWupC,EAEpB,YADApK,EAAO5sC,GAAO6yC,EAAOplC,IAIzB,IAAI1N,EAAQ6sC,EAAO5sC,GACfuG,EAASmrC,EAAaA,EAAW3xC,EAAOi3C,EAAUh3C,EAAK4sC,EAAQh4B,GAAUb,EACzEigC,EAAWztC,IAAWwN,EAEtBigC,IACFztC,EAASywC,EACLhF,GAAYgF,KAAcz4C,GAAQy4C,IAAab,GAAaa,IAC9DzwC,EAAShI,GAAQwB,GACbA,EACCiyC,GAAYjyC,GAASywC,GAAUzwC,MAE7B1B,GAAc24C,IAAahC,GAAYgC,GAC9CzwC,EAASyuC,GAAYj1C,GACjB43C,GAAc53C,GACb1B,GAAc0B,GAASA,KAG5Bi0C,GAAW,GAKfpB,EAAOvyC,KAAK22C,GACZnE,EAAOxyC,KAAKkG,GAERytC,EAEFpH,EAAO5sC,GAAO03C,EAAUnxC,EAAQywC,EAAUtF,EAAYkB,EAAQC,IACrDtsC,GAAWA,EAAUA,IAAWxG,EAAUA,GAAUA,KAC7D6sC,EAAO5sC,GAAOuG,GAWlB,SAASqxC,GAAa53C,GACpB,OAAO,SAAS4sC,GACd,OAAiB,MAAVA,EAAiB74B,EAAY64B,EAAO5sC,IAW/C,SAAS63C,GAAiBhzC,GACxB,IAAI2wC,EAAW3wC,EAAO,GAEtB,OADAA,EAAOwyC,GAAOxyC,GACP,SAAS+nC,GACd,OAAO2I,GAAQ3I,EAAQ/nC,EAAM2wC,IAajC,SAASsC,GAAW7L,EAAO8L,GAEzB,IADA,IAAItqC,EAASw+B,EAAQ8L,EAAQtqC,OAAS,EAC/BA,KAAU,CACf,IAAIsI,EAAQgiC,EAAQtqC,GACpB,GAAIsI,GAAS4R,GAAYuqB,GAAQn8B,GAAQ,CACvC,IAAI4R,EAAW5R,EACflD,GAAOvR,KAAK2qC,EAAOl2B,EAAO,IAG9B,OAAOk2B,EAYT,SAAS+L,GAAW9tC,EAAKyG,GACvB,OAAOzG,EAAM+tC,GAAYC,MAAkBvnC,EAAMzG,EAAM,IAiBzD,SAASiuC,GAAWz4C,EAAY6uC,EAAU2C,EAAakH,EAAoBxD,GAMzE,OALAA,EAASl1C,EAAY,SAASK,EAAOgW,EAAOrW,GAC1CwxC,EAAckH,GACTA,GAAqB,EAAOr4C,GAC7BwuC,EAAS2C,EAAanxC,EAAOgW,EAAOrW,KAEnCwxC,EAyBT,SAASoG,GAAUrL,EAAOnvB,EAAO9Q,GAC/B,IAAI+J,GAAS,EACTtI,EAASw+B,EAAMx+B,QAEnBqP,EAAiB,MAATA,EAAgB,GAAMA,GAAS,GAC3B,IACVA,GAASA,EAAQrP,EAAS,EAAKA,EAASqP,IAE1C9Q,EAAOA,IAAQ+H,GAAa/H,EAAMyB,EAAUA,GAAWzB,GAAO,GACpD,IACRA,GAAOyB,GAETA,EAASqP,EAAQ9Q,EAAM,EAAMA,EAAM8Q,IAAW,EAC9CA,KAAW,EAGX,IADA,IAAIvW,EAAS4J,GAAM1C,KACVsI,EAAQtI,GACflH,EAAOwP,GAASk2B,EAAMl2B,EAAQ+G,GAEhC,OAAOvW,EAaT,SAAS8xC,GAAS34C,EAAYwsC,GAC5B,IAAI3lC,EAMJ,OAJAguC,GAAS70C,EAAY,SAASK,EAAOgW,EAAOrW,GAE1C,QADA6G,EAAS2lC,EAAUnsC,EAAOgW,EAAOrW,QAG1B6G,EAaX,SAAS+xC,GAAWrM,EAAOsM,GACzB,IAAI9qC,EAASw+B,EAAMx+B,OAGnB,IADAw+B,EAAMuM,KAAKD,GACJ9qC,KACLw+B,EAAMx+B,GAAUw+B,EAAMx+B,GAAQ1N,MAEhC,OAAOksC,EAYT,SAASwM,GAAgB/4C,EAAYg5C,EAAW3L,GAC9C,IAAI3lC,EAAWuxC,KACX5iC,GAAS,EASb,OAPA2iC,EAAY3H,GAAS2H,EAAW,SAASnK,GAAY,OAAOnnC,EAASmnC,KAO9D+J,GALMrB,GAAQv3C,EAAY,SAASK,GAExC,OAAS8sC,SADMkE,GAAS2H,EAAW,SAASnK,GAAY,OAAOA,EAASxuC,KACzCgW,QAAWA,EAAOhW,MAASA,KAGlC,SAAS6sC,EAAQnB,GACzC,OAAOqB,EAAgBF,EAAQnB,EAAOsB,KAa1C,SAAS6L,GAAQl5C,EAAY6uC,GAC3B,IAAIhoC,EAAS,EAIb,OAHAguC,GAAS70C,EAAY,SAASK,EAAOgW,EAAOrW,GAC1C6G,IAAWgoC,EAASxuC,EAAOgW,EAAOrW,IAAe,IAE5C6G,EAYT,SAASsyC,GAAS5M,EAAOsC,GACvB,IAAIx4B,GAAS,EACT3P,EAAU2tC,KACVtmC,EAASw+B,EAAMx+B,OACfumC,EAAW5tC,GAAWgmC,EACtB0M,EAAU9E,GAAYvmC,GAAUwmC,EAChCzF,EAAOsK,EAAU5E,KAAgB,KACjC3tC,KAEAioC,GACFpoC,EAAUgqC,GACV4D,GAAW,IAEX8E,GAAU,EACVtK,EAAOD,KAAgBhoC,GAEzB6tC,EACA,OAASr+B,EAAQtI,GAAQ,CACvB,IAAI1N,EAAQksC,EAAMl2B,GACd04B,EAAWF,EAAWA,EAASxuC,EAAOgW,EAAOk2B,GAASlsC,EAE1D,GAAIi0C,GAAYj0C,GAAUA,EAAO,CAE/B,IADA,IAAIg5C,EAAYvK,EAAK/gC,OACdsrC,KACL,GAAIvK,EAAKuK,KAAetK,EACtB,SAAS2F,EAGT7F,GACFC,EAAKnuC,KAAKouC,GAEZloC,EAAOlG,KAAKN,QAELqG,EAAQooC,EAAMC,EAAU,GAAK,KAChCF,GAAYuK,IACdtK,EAAKnuC,KAAKouC,GAEZloC,EAAOlG,KAAKN,IAGhB,OAAOwG,EAaT,SAASyyC,GAAWpM,EAAQvG,GAK1B,IAJA,IAAItwB,GAAS,EACTtI,EAAS44B,EAAM54B,OACflH,EAAS4J,GAAM1C,KAEVsI,EAAQtI,GACflH,EAAOwP,GAAS62B,EAAOvG,EAAMtwB,IAE/B,OAAOxP,EAcT,SAAS0yC,GAAUhN,EAAOC,EAAWgN,EAAQ/M,GAI3C,IAHA,IAAI1+B,EAASw+B,EAAMx+B,OACfsI,EAAQo2B,EAAY1+B,GAAU,GAE1B0+B,EAAYp2B,MAAYA,EAAQtI,IAAWy+B,EAAUD,EAAMl2B,GAAQA,EAAOk2B,KAClF,OAAOiN,EACH5B,GAAUrL,EAAQE,EAAY,EAAIp2B,EAASo2B,EAAYp2B,EAAQ,EAAItI,GACnE6pC,GAAUrL,EAAQE,EAAYp2B,EAAQ,EAAI,EAAKo2B,EAAY1+B,EAASsI,GAa1E,SAASojC,GAAiBp5C,EAAO+X,GAC/B,IAAIvR,EAASxG,EACTwG,aAAkByoC,KACpBzoC,EAASA,EAAOxG,SAKlB,IAHA,IAAIgW,GAAS,EACTtI,EAASqK,EAAQrK,SAEZsI,EAAQtI,GAAQ,CACvB,IAAIwK,EAASH,EAAQ/B,GACrBxP,EAAS0R,EAAOm6B,KAAK9xC,MAAM2X,EAAOo6B,QAASrB,IAAWzqC,GAAS0R,EAAO4D,OAExE,OAAOtV,EAcT,SAAS6yC,GAAYnN,EAAOlsC,EAAOs5C,GACjC,IAAIC,EAAM,EACNC,EAAOtN,EAAQA,EAAMx+B,OAAS6rC,EAElC,GAAoB,iBAATv5C,GAAqBA,GAAUA,GAASw5C,GAAQC,GAAuB,CAChF,KAAOF,EAAMC,GAAM,CACjB,IAAIE,EAAOH,EAAMC,IAAU,EACvB9K,EAAWxC,EAAMwN,IAEhBJ,EAAc5K,GAAY1uC,EAAU0uC,EAAW1uC,IAAwB,OAAb0uC,EAC7D6K,EAAMG,EAAM,EAEZF,EAAOE,EAGX,OAAOF,EAET,OAAOG,GAAczN,EAAOlsC,EAAOiiC,GAAUqX,GAgB/C,SAASK,GAAczN,EAAOlsC,EAAOwuC,EAAU8K,GAC7Ct5C,EAAQwuC,EAASxuC,GAQjB,IANA,IAAIu5C,EAAM,EACNC,EAAOtN,EAAQA,EAAMx+B,OAAS,EAC9BksC,EAAW55C,GAAUA,EACrB2rC,EAAsB,OAAV3rC,EACZ4rC,EAAa5rC,IAAUgU,EAEpBulC,EAAMC,GAAM,CACjB,IAAIE,EAAMxB,IAAaqB,EAAMC,GAAQ,GACjC9K,EAAWF,EAAStC,EAAMwN,IAC1BG,EAAQnL,IAAa16B,EACrB8lC,EAAcpL,GAAaA,EAE/B,GAAIkL,EACF,IAAIG,EAASD,GAAeR,OAE5BS,EADSpO,EACAmO,GAAeD,IAAUP,GAA0B,MAAZ5K,GACvC9C,EACAkO,IAAgBR,GAAcO,GAClB,MAAZnL,IAGA4K,EAAc5K,GAAY1uC,EAAU0uC,EAAW1uC,GAEtD+5C,EACFR,EAAMG,EAAM,EAEZF,EAAOE,EAGX,OAAOM,GAAUR,EAAMS,IAazB,SAASzH,GAAaH,EAAMC,EAASC,GACnC,GAAmB,mBAARF,EACT,OAAOpQ,GAET,GAAIqQ,IAAYt+B,EACd,OAAOq+B,EAET,OAAQE,GACN,KAAK,EAAG,OAAO,SAASvyC,GACtB,OAAOqyC,EAAK9wC,KAAK+wC,EAAStyC,IAE5B,KAAK,EAAG,OAAO,SAASA,EAAOgW,EAAOrW,GACpC,OAAO0yC,EAAK9wC,KAAK+wC,EAAStyC,EAAOgW,EAAOrW,IAE1C,KAAK,EAAG,OAAO,SAASwxC,EAAanxC,EAAOgW,EAAOrW,GACjD,OAAO0yC,EAAK9wC,KAAK+wC,EAASnB,EAAanxC,EAAOgW,EAAOrW,IAEvD,KAAK,EAAG,OAAO,SAASK,EAAO0rC,EAAOzrC,EAAK4sC,EAAQh4B,GACjD,OAAOw9B,EAAK9wC,KAAK+wC,EAAStyC,EAAO0rC,EAAOzrC,EAAK4sC,EAAQh4B,IAGzD,OAAO,WACL,OAAOw9B,EAAK9xC,MAAM+xC,EAAS/tC,YAW/B,SAAS21C,GAAYC,GACnB,IAAI3zC,EAAS,IAAI4zC,GAAYD,EAAOE,YAIpC,OAHW,IAAIC,GAAW9zC,GAErB3I,IAAI,IAAIy8C,GAAWH,IACjB3zC,EAaT,SAAS+zC,GAAYz+B,EAAM0+B,EAAUC,GAQnC,IAPA,IAAIC,EAAgBD,EAAQ/sC,OACxBitC,GAAa,EACbC,EAAaC,GAAU/+B,EAAKpO,OAASgtC,EAAe,GACpDI,GAAa,EACbC,EAAaP,EAAS9sC,OACtBlH,EAAS4J,GAAM2qC,EAAaH,KAEvBE,EAAYC,GACnBv0C,EAAOs0C,GAAaN,EAASM,GAE/B,OAASH,EAAYD,GACnBl0C,EAAOi0C,EAAQE,IAAc7+B,EAAK6+B,GAEpC,KAAOC,KACLp0C,EAAOs0C,KAAeh/B,EAAK6+B,KAE7B,OAAOn0C,EAaT,SAASw0C,GAAiBl/B,EAAM0+B,EAAUC,GASxC,IARA,IAAIQ,GAAgB,EAChBP,EAAgBD,EAAQ/sC,OACxBitC,GAAa,EACbC,EAAaC,GAAU/+B,EAAKpO,OAASgtC,EAAe,GACpDQ,GAAc,EACdC,EAAcX,EAAS9sC,OACvBlH,EAAS4J,GAAMwqC,EAAaO,KAEvBR,EAAYC,GACnBp0C,EAAOm0C,GAAa7+B,EAAK6+B,GAG3B,IADA,IAAIlgB,EAASkgB,IACJO,EAAaC,GACpB30C,EAAOi0B,EAASygB,GAAcV,EAASU,GAEzC,OAASD,EAAeP,GACtBl0C,EAAOi0B,EAASggB,EAAQQ,IAAiBn/B,EAAK6+B,KAEhD,OAAOn0C,EAWT,SAAS40C,GAAiBC,EAAQC,GAChC,OAAO,SAAS37C,EAAY6uC,EAAU8D,GACpC,IAAI9rC,EAAS80C,EAAcA,OAG3B,GAFA9M,EAAWoK,GAAYpK,EAAU8D,EAAS,GAEtC9zC,GAAQmB,GAIV,IAHA,IAAIqW,GAAS,EACTtI,EAAS/N,EAAW+N,SAEfsI,EAAQtI,GAAQ,CACvB,IAAI1N,EAAQL,EAAWqW,GACvBqlC,EAAO70C,EAAQxG,EAAOwuC,EAASxuC,EAAOgW,EAAOrW,GAAaA,QAG5D60C,GAAS70C,EAAY,SAASK,EAAOC,EAAKN,GACxC07C,EAAO70C,EAAQxG,EAAOwuC,EAASxuC,EAAOC,EAAKN,GAAaA,KAG5D,OAAO6G,GAWX,SAAS+0C,GAAeC,GACtB,OAAOC,GAAU,SAAS5O,EAAQ6O,GAChC,IAAI1lC,GAAS,EACTtI,EAAmB,MAAVm/B,EAAiB,EAAI6O,EAAQhuC,OACtCikC,EAAajkC,EAAS,EAAIguC,EAAQhuC,EAAS,GAAKsG,EAChD2nC,EAAQjuC,EAAS,EAAIguC,EAAQ,GAAK1nC,EAClCs+B,EAAU5kC,EAAS,EAAIguC,EAAQhuC,EAAS,GAAKsG,EAajD,IAXyB,mBAAd29B,GACTA,EAAaa,GAAab,EAAYW,EAAS,GAC/C5kC,GAAU,GAGVA,IADAikC,EAA+B,mBAAXW,EAAwBA,EAAUt+B,GAC9B,EAAI,EAE1B2nC,GAASC,GAAeF,EAAQ,GAAIA,EAAQ,GAAIC,KAClDhK,EAAajkC,EAAS,EAAIsG,EAAY29B,EACtCjkC,EAAS,KAEFsI,EAAQtI,GAAQ,CACvB,IAAImH,EAAS6mC,EAAQ1lC,GACjBnB,GACF2mC,EAAS3O,EAAQh4B,EAAQ88B,GAG7B,OAAO9E,IAYX,SAASgP,GAAehH,EAAUzI,GAChC,OAAO,SAASzsC,EAAY6uC,GAC1B,IAAI9gC,EAAS/N,EAAam8C,GAAUn8C,GAAc,EAClD,IAAKo8C,GAASruC,GACZ,OAAOmnC,EAASl1C,EAAY6uC,GAK9B,IAHA,IAAIx4B,EAAQo2B,EAAY1+B,GAAU,EAC9BsuC,EAAWtG,GAAS/1C,IAEhBysC,EAAYp2B,MAAYA,EAAQtI,KACa,IAA/C8gC,EAASwN,EAAShmC,GAAQA,EAAOgmC,KAIvC,OAAOr8C,GAWX,SAASs8C,GAAc7P,GACrB,OAAO,SAASS,EAAQ2B,EAAU0N,GAMhC,IALA,IAAIF,EAAWtG,GAAS7I,GACpBvG,EAAQ4V,EAASrP,GACjBn/B,EAAS44B,EAAM54B,OACfsI,EAAQo2B,EAAY1+B,GAAU,EAE1B0+B,EAAYp2B,MAAYA,EAAQtI,GAAS,CAC/C,IAAIzN,EAAMqmC,EAAMtwB,GAChB,IAA+C,IAA3Cw4B,EAASwN,EAAS/7C,GAAMA,EAAK+7C,GAC/B,MAGJ,OAAOnP,GAaX,SAASsP,GAAkB9J,EAAMC,GAG/B,SAASrwB,IAEP,OADU7kB,MAAQA,OAASg/C,IAAQh/C,gBAAgB6kB,EAAWo6B,EAAOhK,GAC3D9xC,MAAM+xC,EAAS/tC,WAJ3B,IAAI83C,EAAOC,GAAkBjK,GAM7B,OAAOpwB,EAUT,SAASkyB,GAAYjE,GACnB,OAAQC,IAAgBC,GAAO,IAAIH,GAASC,GAAU,KAWxD,SAASqM,GAAiBl1C,GACxB,OAAO,SAASwsB,GAMd,IALA,IAAI7d,GAAS,EACTk2B,EAAQsQ,GAAMC,GAAO5oB,IACrBnmB,EAASw+B,EAAMx+B,OACflH,EAAS,KAEJwP,EAAQtI,GACflH,EAASa,EAASb,EAAQ0lC,EAAMl2B,GAAQA,GAE1C,OAAOxP,GAYX,SAAS81C,GAAkBD,GACzB,OAAO,WAIL,IAAIvgC,EAAOvX,UACX,OAAQuX,EAAKpO,QACX,KAAK,EAAG,OAAO,IAAI2uC,EACnB,KAAK,EAAG,OAAO,IAAIA,EAAKvgC,EAAK,IAC7B,KAAK,EAAG,OAAO,IAAIugC,EAAKvgC,EAAK,GAAIA,EAAK,IACtC,KAAK,EAAG,OAAO,IAAIugC,EAAKvgC,EAAK,GAAIA,EAAK,GAAIA,EAAK,IAC/C,KAAK,EAAG,OAAO,IAAIugC,EAAKvgC,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,IACxD,KAAK,EAAG,OAAO,IAAIugC,EAAKvgC,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,IACjE,KAAK,EAAG,OAAO,IAAIugC,EAAKvgC,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,IAC1E,KAAK,EAAG,OAAO,IAAIugC,EAAKvgC,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,IAErF,IAAI4gC,EAAcC,GAAWN,EAAKv+C,WAC9B0I,EAAS61C,EAAK97C,MAAMm8C,EAAa5gC,GAIrC,OAAOrO,GAASjH,GAAUA,EAASk2C,GAWvC,SAASE,GAAYC,GACnB,SAASC,EAAUzK,EAAM0K,EAAOpB,GAC1BA,GAASC,GAAevJ,EAAM0K,EAAOpB,KACvCoB,EAAQ/oC,GAEV,IAAIxN,EAASw2C,GAAc3K,EAAMwK,EAAM7oC,EAAWA,EAAWA,EAAWA,EAAWA,EAAW+oC,GAE9F,OADAv2C,EAAO4nC,YAAc0O,EAAU1O,YACxB5nC,EAET,OAAOs2C,EAWT,SAASG,GAAezB,EAAU7J,GAChC,OAAO8J,GAAU,SAAS3/B,GACxB,IAAI+wB,EAAS/wB,EAAK,GAClB,OAAc,MAAV+wB,EACKA,GAET/wB,EAAKxb,KAAKqxC,GACH6J,EAASj7C,MAAMyT,EAAW8H,MAYrC,SAASohC,GAAerM,EAAYC,GAClC,OAAO,SAASnxC,EAAY6uC,EAAU8D,GAKpC,GAJIA,GAAWsJ,GAAej8C,EAAY6uC,EAAU8D,KAClD9D,EAAWx6B,GAGU,IADvBw6B,EAAWoK,GAAYpK,EAAU8D,EAAS,IAC7B5kC,OAAa,CAExB,IAAIlH,EAASoqC,GADbjxC,EAAanB,GAAQmB,GAAcA,EAAaw9C,GAAWx9C,GACpB6uC,EAAUqC,EAAYC,GAC7D,IAAMnxC,EAAW+N,QAAUlH,IAAWsqC,EACpC,OAAOtqC,EAGX,OAAOiuC,GAAa90C,EAAY6uC,EAAUqC,EAAYC,IAY1D,SAASsM,GAAWvI,EAAUzI,GAC5B,OAAO,SAASzsC,EAAYwsC,EAAWmG,GAErC,GADAnG,EAAYyM,GAAYzM,EAAWmG,EAAS,GACxC9zC,GAAQmB,GAAa,CACvB,IAAIqW,EAAQi2B,EAActsC,EAAYwsC,EAAWC,GACjD,OAAOp2B,GAAS,EAAIrW,EAAWqW,GAAShC,EAE1C,OAAO4gC,GAASj1C,EAAYwsC,EAAW0I,IAW3C,SAASwI,GAAgBjR,GACvB,OAAO,SAASF,EAAOC,EAAWmG,GAChC,OAAMpG,GAASA,EAAMx+B,QAGrBy+B,EAAYyM,GAAYzM,EAAWmG,EAAS,GACrCrG,EAAcC,EAAOC,EAAWC,KAH7B,GAcd,SAASkR,GAAcC,GACrB,OAAO,SAAS1Q,EAAQV,EAAWmG,GAEjC,OADAnG,EAAYyM,GAAYzM,EAAWmG,EAAS,GACrCsC,GAAS/H,EAAQV,EAAWoR,GAAY,IAWnD,SAASC,GAAWpR,GAClB,OAAO,WAOL,IANA,IAAInqB,EACAvU,EAASnJ,UAAUmJ,OACnBsI,EAAQo2B,EAAY1+B,GAAU,EAC9BotC,EAAY,EACZ2C,EAAQrtC,GAAM1C,GAEV0+B,EAAYp2B,MAAYA,EAAQtI,GAAS,CAC/C,IAAI2kC,EAAOoL,EAAM3C,KAAev2C,UAAUyR,GAC1C,GAAmB,mBAARq8B,EACT,MAAM,IAAIwB,GAAUC,IAEjB7xB,GAAWitB,GAAcpxC,UAAUkkC,MAA6B,WAArB0b,GAAYrL,KAC1DpwB,EAAU,IAAIitB,OAAkB,IAIpC,IADAl5B,EAAQiM,GAAW,EAAIvU,IACdsI,EAAQtI,GAAQ,CAGvB,IAAIiwC,EAAWD,GAFfrL,EAAOoL,EAAMznC,IAGTvT,EAAmB,WAAZk7C,EAAwBC,GAAQvL,GAAQr+B,EAGjDiO,EADExf,GAAQo7C,GAAWp7C,EAAK,KAAOA,EAAK,KAAOq7C,EAAWC,EAAaC,EAAeC,KAAgBx7C,EAAK,GAAGiL,QAAqB,GAAXjL,EAAK,GACjHwf,EAAQy7B,GAAYj7C,EAAK,KAAKlC,MAAM0hB,EAASxf,EAAK,IAElC,GAAf4vC,EAAK3kC,QAAemwC,GAAWxL,GAASpwB,EAAQ07B,KAAc17B,EAAQ+f,KAAKqQ,GAG1F,OAAO,WACL,IAAIv2B,EAAOvX,UACPvE,EAAQ8b,EAAK,GAEjB,GAAImG,GAA0B,GAAfnG,EAAKpO,QAAelP,GAAQwB,IAAUA,EAAM0N,QAAUwmC,EACnE,OAAOjyB,EAAQi8B,MAAMl+C,GAAOA,QAK9B,IAHA,IAAIgW,EAAQ,EACRxP,EAASkH,EAAS+vC,EAAMznC,GAAOzV,MAAMnD,KAAM0e,GAAQ9b,IAE9CgW,EAAQtI,GACflH,EAASi3C,EAAMznC,GAAOzU,KAAKnE,KAAMoJ,GAEnC,OAAOA,IAab,SAAS23C,GAAcC,EAAWvJ,GAChC,OAAO,SAASl1C,EAAY6uC,EAAU8D,GACpC,MAA2B,mBAAZ9D,GAA0B8D,IAAYt+B,GAAaxV,GAAQmB,GACtEy+C,EAAUz+C,EAAY6uC,GACtBqG,EAASl1C,EAAY6yC,GAAahE,EAAU8D,EAAS,KAW7D,SAAS+L,GAAYd,GACnB,OAAO,SAAS1Q,EAAQ2B,EAAU8D,GAIhC,MAHuB,mBAAZ9D,GAA0B8D,IAAYt+B,IAC/Cw6B,EAAWgE,GAAahE,EAAU8D,EAAS,IAEtCiL,EAAW1Q,EAAQ2B,EAAU4G,KAWxC,SAASkJ,GAAaf,GACpB,OAAO,SAAS1Q,EAAQ2B,EAAU8D,GAIhC,MAHuB,mBAAZ9D,GAA0B8D,IAAYt+B,IAC/Cw6B,EAAWgE,GAAahE,EAAU8D,EAAS,IAEtCiL,EAAW1Q,EAAQ2B,IAW9B,SAAS+P,GAAmBC,GAC1B,OAAO,SAAS3R,EAAQ2B,EAAU8D,GAChC,IAAI9rC,KASJ,OARAgoC,EAAWoK,GAAYpK,EAAU8D,EAAS,GAE1CmB,GAAW5G,EAAQ,SAAS7sC,EAAOC,EAAK4sC,GACtC,IAAI4R,EAASjQ,EAASxuC,EAAOC,EAAK4sC,GAClC5sC,EAAMu+C,EAAYC,EAASx+C,EAC3BD,EAAQw+C,EAAYx+C,EAAQy+C,EAC5Bj4C,EAAOvG,GAAOD,IAETwG,GAWX,SAASk4C,GAAatS,GACpB,OAAO,SAASvY,EAAQnmB,EAAQg/B,GAE9B,OADA7Y,EAAS2Y,EAAa3Y,IACduY,EAAYvY,EAAS,IAAM8qB,GAAc9qB,EAAQnmB,EAAQg/B,IAAUN,EAAY,GAAKvY,IAWhG,SAAS+qB,GAAc/B,GACrB,IAAIgC,EAAcpD,GAAU,SAASpJ,EAAMmI,GACzC,IAAIC,EAAUtM,EAAeqM,EAAUqE,EAAYzQ,aACnD,OAAO4O,GAAc3K,EAAMwK,EAAM7oC,EAAWwmC,EAAUC,KAExD,OAAOoE,EAWT,SAASC,GAAaV,EAAWvJ,GAC/B,OAAO,SAASl1C,EAAY6uC,EAAU2C,EAAamB,GACjD,IAAIlB,EAAgB7sC,UAAUmJ,OAAS,EACvC,MAA2B,mBAAZ8gC,GAA0B8D,IAAYt+B,GAAaxV,GAAQmB,GACtEy+C,EAAUz+C,EAAY6uC,EAAU2C,EAAaC,GAC7CgH,GAAWz4C,EAAYi5C,GAAYpK,EAAU8D,EAAS,GAAInB,EAAaC,EAAeyD,IAqB9F,SAASkK,GAAoB1M,EAAM2M,EAAS1M,EAASkI,EAAUC,EAASwE,EAAeC,EAAcC,EAAQC,EAAKrC,GAShH,SAAS96B,IAOP,IAJA,IAAIvU,EAASnJ,UAAUmJ,OACnBsI,EAAQtI,EACRoO,EAAO1L,GAAM1C,GAEVsI,KACL8F,EAAK9F,GAASzR,UAAUyR,GAQ1B,GANIwkC,IACF1+B,EAAOy+B,GAAYz+B,EAAM0+B,EAAUC,IAEjCwE,IACFnjC,EAAOk/B,GAAiBl/B,EAAMmjC,EAAeC,IAE3CG,GAAWC,EAAc,CAC3B,IAAIlR,EAAcnsB,EAAQmsB,YACtBmR,EAAcpR,EAAeryB,EAAMsyB,GAGvC,IADA1gC,GAAU6xC,EAAY7xC,QACTqvC,EAAO,CAClB,IAAIyC,EAAYL,EAAS1O,GAAU0O,GAAUnrC,EACzCyrC,EAAW5E,GAAUkC,EAAQrvC,EAAQ,GAMzCsxC,GAAYK,EAAUrB,EAAe0B,EACrCV,KAAaK,EAAUK,EAAqB1B,GAEvC2B,IACHX,KAAaY,EAAYC,IAE3B,IAAIC,GAAWzN,EAAM2M,EAAS1M,EATZ+M,EAAUvjC,EAAO9H,EAFjBqrC,EAAUE,EAAcvrC,EAGnBqrC,EAAUrrC,EAAY8H,EAFvBujC,EAAUrrC,EAAYurC,EAUwDC,EAAWJ,EAAKK,GAChHj5C,EAASu4C,GAAoBx+C,MAAMyT,EAAW8rC,GAMlD,OAJIjC,GAAWxL,IACb0N,GAAQv5C,EAAQs5C,GAElBt5C,EAAO4nC,YAAcA,EACd5nC,GAGX,IAAIk2C,EAAcsD,EAAS1N,EAAUl1C,KACjCuN,EAAKs1C,EAAYvD,EAAYrK,GAAQA,EAWzC,OATI8M,IACFrjC,EAAOokC,GAAQpkC,EAAMqjC,IAEnBgB,GAASf,EAAMtjC,EAAKpO,SACtBoO,EAAKpO,OAAS0xC,GAEZhiD,MAAQA,OAASg/C,IAAQh/C,gBAAgB6kB,IAC3CtX,EAAK0xC,GAAQC,GAAkBjK,IAE1B1nC,EAAGpK,MAAMm8C,EAAa5gC,GAjE/B,IAAIqkC,EAAQnB,EAAUlB,EAClBkC,EAAShB,EAAUY,EACnBK,EAAYjB,EAAUa,EACtBR,EAAUL,EAAUjB,EACpB4B,EAAeX,EAAUoB,EACzBd,EAAeN,EAAUqB,EACzBhE,EAAO4D,EAAYjsC,EAAYsoC,GAAkBjK,GA6DrD,OAAOpwB,EAaT,SAAS08B,GAAc9qB,EAAQnmB,EAAQg/B,GACrC,IAAI4T,EAAYzsB,EAAOnmB,OAGvB,GAFAA,GAAUA,EAEN4yC,GAAa5yC,IAAW6yC,GAAe7yC,GACzC,MAAO,GAET,IAAI8yC,EAAY9yC,EAAS4yC,EAEzB,OADA5T,EAAiB,MAATA,EAAgB,IAAOA,EAAQ,GAChC9pB,GAAO8pB,EAAO+T,GAAWD,EAAY9T,EAAMh/B,SAASoa,MAAM,EAAG04B,GAetE,SAASE,GAAqBrO,EAAM2M,EAAS1M,EAASkI,GAIpD,SAASv4B,IASP,IANA,IAAI04B,GAAa,EACbC,EAAar2C,UAAUmJ,OACvBotC,GAAa,EACbC,EAAaP,EAAS9sC,OACtBoO,EAAO1L,GAAM2qC,EAAaH,KAErBE,EAAYC,GACnBj/B,EAAKg/B,GAAaN,EAASM,GAE7B,KAAOF,KACL9+B,EAAKg/B,KAAev2C,YAAYo2C,GAGlC,OADUv9C,MAAQA,OAASg/C,IAAQh/C,gBAAgB6kB,EAAWo6B,EAAOhK,GAC3D9xC,MAAMy/C,EAAS1N,EAAUl1C,KAAM0e,GAnB3C,IAAIkkC,EAAShB,EAAUY,EACnBvD,EAAOC,GAAkBjK,GAoB7B,OAAOpwB,EAUT,SAAS0+B,GAAYC,GACnB,IAAIvO,EAAOnoC,GAAK02C,GAChB,OAAO,SAASj+C,EAAQk+C,GAEtB,OADAA,EAAYA,IAAc7sC,EAAY,GAAM6sC,GAAa,IAEvDA,EAAYpe,GAAI,GAAIoe,GACbxO,EAAK1vC,EAASk+C,GAAaA,GAE7BxO,EAAK1vC,IAWhB,SAASm+C,GAAkBxH,GACzB,OAAO,SAASpN,EAAOlsC,EAAOwuC,EAAU8D,GACtC,IAAIjrC,EAAWuxC,GAAYpK,GAC3B,OAAoB,MAAZA,GAAoBnnC,IAAa+qC,GACrCiH,GAAYnN,EAAOlsC,EAAOs5C,GAC1BK,GAAczN,EAAOlsC,EAAOqH,EAASmnC,EAAU8D,EAAS,GAAIgH,IA6BpE,SAAS0D,GAAc3K,EAAM2M,EAAS1M,EAASkI,EAAUC,EAAS0E,EAAQC,EAAKrC,GAC7E,IAAIkD,EAAYjB,EAAUa,EAC1B,IAAKI,GAA4B,mBAAR5N,EACvB,MAAM,IAAIwB,GAAUC,GAEtB,IAAIpmC,EAAS8sC,EAAWA,EAAS9sC,OAAS,EAM1C,GALKA,IACHsxC,KAAahB,EAAe0B,GAC5BlF,EAAWC,EAAUzmC,GAEvBtG,GAAW+sC,EAAUA,EAAQ/sC,OAAS,EAClCsxC,EAAUU,EAAoB,CAChC,IAAIT,EAAgBzE,EAChB0E,EAAezE,EAEnBD,EAAWC,EAAUzmC,EAEvB,IAAIvR,EAAOw9C,EAAYjsC,EAAY4pC,GAAQvL,GACvCyN,GAAWzN,EAAM2M,EAAS1M,EAASkI,EAAUC,EAASwE,EAAeC,EAAcC,EAAQC,EAAKrC,GAWpG,GATIt6C,IACFs+C,GAAUjB,EAASr9C,GACnBu8C,EAAUc,EAAQ,GAClB/C,EAAQ+C,EAAQ,IAElBA,EAAQ,GAAc,MAAT/C,EACRkD,EAAY,EAAI5N,EAAK3kC,OACrBmtC,GAAUkC,EAAQrvC,EAAQ,IAAM,EAEjCsxC,GAAWY,EACb,IAAIp5C,EAAS21C,GAAkB2D,EAAQ,GAAIA,EAAQ,SAInDt5C,EAHUw4C,GAAWhB,GAAgBgB,IAAYY,EAAY5B,IAAmB8B,EAAQ,GAAGpyC,OAGlFqxC,GAAoBx+C,MAAMyT,EAAW8rC,GAFrCY,GAAqBngD,MAAMyT,EAAW8rC,GAKjD,OADar9C,EAAOu+C,GAAcjB,IACpBv5C,EAAQs5C,GAiBxB,SAASnJ,GAAYzK,EAAOR,EAAOoK,EAAWnE,EAAYiE,EAAS/C,EAAQC,GACzE,IAAI98B,GAAS,EACTirC,EAAY/U,EAAMx+B,OAClB8iC,EAAY9E,EAAMh+B,OAEtB,GAAIuzC,GAAazQ,KAAeoF,GAAWpF,EAAYyQ,GACrD,OAAO,EAGT,OAASjrC,EAAQirC,GAAW,CAC1B,IAAIC,EAAWhV,EAAMl2B,GACjBmrC,EAAWzV,EAAM11B,GACjBxP,EAASmrC,EAAaA,EAAWiE,EAAUuL,EAAWD,EAAUtL,EAAUsL,EAAWC,EAAUnrC,GAAShC,EAE5G,GAAIxN,IAAWwN,EAAW,CACxB,GAAIxN,EACF,SAEF,OAAO,EAGT,GAAIovC,GACF,IAAKvE,GAAU3F,EAAO,SAASyV,GACzB,OAAOD,IAAaC,GAAYrL,EAAUoL,EAAUC,EAAUxP,EAAYiE,EAAS/C,EAAQC,KAE/F,OAAO,OAEJ,GAAMoO,IAAaC,IAAYrL,EAAUoL,EAAUC,EAAUxP,EAAYiE,EAAS/C,EAAQC,GAC/F,OAAO,EAGX,OAAO,EAgBT,SAAS0D,GAAW3J,EAAQnB,EAAOsH,GACjC,OAAQA,GACN,KAAKoO,EACL,KAAKC,EAGH,OAAQxU,IAAWnB,EAErB,KAAK4V,EACH,OAAOzU,EAAOvvC,MAAQouC,EAAMpuC,MAAQuvC,EAAO7qC,SAAW0pC,EAAM1pC,QAE9D,KAAKu/C,EAEH,OAAQ1U,IAAWA,EACfnB,IAAUA,EACVmB,IAAWnB,EAEjB,KAAK8V,EACL,KAAKC,EAGH,OAAO5U,GAAWnB,EAAQ,GAE9B,OAAO,EAiBT,SAASkL,GAAa/J,EAAQnB,EAAOoK,EAAWnE,EAAYiE,EAAS/C,EAAQC,GAC3E,IAAI4O,EAAWjd,GAAKoI,GAChB8U,EAAYD,EAASh0C,OAIzB,GAAIi0C,GAHWld,GAAKiH,GACKh+B,SAEMkoC,EAC7B,OAAO,EAGT,IADA,IAAI5/B,EAAQ2rC,EACL3rC,KAAS,CACd,IAAI/V,EAAMyhD,EAAS1rC,GACnB,KAAM4/B,EAAU31C,KAAOyrC,EAAQvmC,GAAe5D,KAAKmqC,EAAOzrC,IACxD,OAAO,EAIX,IADA,IAAI2hD,EAAWhM,IACN5/B,EAAQ2rC,GAAW,CAE1B,IAAI3K,EAAWnK,EADf5sC,EAAMyhD,EAAS1rC,IAEXmrC,EAAWzV,EAAMzrC,GACjBuG,EAASmrC,EAAaA,EAAWiE,EAAUuL,EAAWnK,EAAUpB,EAASoB,EAAWmK,EAAUlhD,GAAO+T,EAGzG,KAAMxN,IAAWwN,EAAY8hC,EAAUkB,EAAUmK,EAAUxP,EAAYiE,EAAS/C,EAAQC,GAAUtsC,GAChG,OAAO,EAETo7C,IAAaA,EAAkB,eAAP3hD,GAE1B,IAAK2hD,EAAU,CACb,IAAIC,EAAUhV,EAAOpsC,YACjBqhD,EAAUpW,EAAMjrC,YAGpB,GAAIohD,GAAWC,GACV,gBAAiBjV,GAAU,gBAAiBnB,KACzB,mBAAXmW,GAAyBA,aAAmBA,GACjC,mBAAXC,GAAyBA,aAAmBA,GACvD,OAAO,EAGX,OAAO,EAYT,SAASlJ,GAAYvG,EAAMC,EAASC,GAClC,IAAI/rC,EAASwoC,EAAO3nC,UAAYA,GAEhC,OADAb,EAASA,IAAWa,GAAW+qC,GAAe5rC,EACvC+rC,EAAW/rC,EAAO6rC,EAAMC,EAASC,GAAY/rC,EAqBtD,SAASk3C,GAAYrL,GAKnB,IAJA,IAAI7rC,EAAS6rC,EAAK/0C,KACd4uC,EAAQ6V,GAAUv7C,GAClBkH,EAASw+B,EAAQA,EAAMx+B,OAAS,EAE7BA,KAAU,CACf,IAAIjL,EAAOypC,EAAMx+B,GACbs0C,EAAYv/C,EAAK4vC,KACrB,GAAiB,MAAb2P,GAAqBA,GAAa3P,EACpC,OAAO5vC,EAAKnF,KAGhB,OAAOkJ,EAYT,SAASwtC,GAAWr0C,EAAYiQ,EAAQ6wB,GACtC,IAAIj6B,EAASwoC,EAAO3oC,SAAWA,GAE/B,OADAG,EAASA,IAAWH,GAAUgmC,EAAc7lC,EACrC7G,EAAa6G,EAAO7G,EAAYiQ,EAAQ6wB,GAAaj6B,EAsB9D,SAAS2wC,GAAatK,GAIpB,IAHA,IAAIrmC,EAASy7C,GAAMpV,GACfn/B,EAASlH,EAAOkH,OAEbA,KACLlH,EAAOkH,GAAQ,GAAK2pC,GAAmB7wC,EAAOkH,GAAQ,IAExD,OAAOlH,EAWT,SAAS07C,GAAUrV,EAAQ5sC,GACzB,IAAID,EAAkB,MAAV6sC,EAAiB74B,EAAY64B,EAAO5sC,GAChD,OAAOkiD,GAASniD,GAASA,EAAQgU,EAanC,SAASouC,GAAQrlC,EAAO9Q,EAAKo2C,GAI3B,IAHA,IAAIrsC,GAAS,EACTtI,EAAS20C,EAAW30C,SAEfsI,EAAQtI,GAAQ,CACvB,IAAIjL,EAAO4/C,EAAWrsC,GAClBvC,EAAOhR,EAAKgR,KAEhB,OAAQhR,EAAKpF,MACX,IAAK,OAAa0f,GAAStJ,EAAM,MACjC,IAAK,YAAaxH,GAAOwH,EAAM,MAC/B,IAAK,OAAaxH,EAAM+tC,GAAU/tC,EAAK8Q,EAAQtJ,GAAO,MACtD,IAAK,YAAasJ,EAAQ89B,GAAU99B,EAAO9Q,EAAMwH,IAGrD,OAASsJ,MAASA,EAAO9Q,IAAOA,GAUlC,SAAS8mC,GAAe7G,GACtB,IAAIx+B,EAASw+B,EAAMx+B,OACflH,EAAS,IAAI0lC,EAAMzrC,YAAYiN,GAOnC,OAJIA,GAA6B,iBAAZw+B,EAAM,IAAkB/mC,GAAe5D,KAAK2qC,EAAO,WACtE1lC,EAAOwP,MAAQk2B,EAAMl2B,MACrBxP,EAAO8H,MAAQ49B,EAAM59B,OAEhB9H,EAUT,SAASgtC,GAAgB3G,GACvB,IAAIwP,EAAOxP,EAAOpsC,YAIlB,MAHqB,mBAAR47C,GAAsBA,aAAgBA,IACjDA,EAAOiG,IAEF,IAAIjG,EAeb,SAAS9I,GAAe1G,EAAQmG,EAAKJ,GACnC,IAAIyJ,EAAOxP,EAAOpsC,YAClB,OAAQuyC,GACN,KAAKuP,GACH,OAAOrI,GAAYrN,GAErB,KAAKuU,EACL,KAAKC,EACH,OAAO,IAAIhF,GAAMxP,GAEnB,KAAK2V,GAAY,KAAKC,GACtB,KAAKC,GAAS,KAAKC,GAAU,KAAKC,GAClC,KAAKC,GAAU,KAAKC,GAAiB,KAAKC,GAAW,KAAKC,GACxD,IAAI7I,EAAStN,EAAOsN,OACpB,OAAO,IAAIkC,EAAKzJ,EAASsH,GAAYC,GAAUA,EAAQtN,EAAOoW,WAAYpW,EAAOn/B,QAEnF,KAAK6zC,EACL,KAAKE,EACH,OAAO,IAAIpF,EAAKxP,GAElB,KAAK2U,EACH,IAAIh7C,EAAS,IAAI61C,EAAKxP,EAAOh4B,OAAQquC,GAAQC,KAAKtW,IAClDrmC,EAAO8xB,UAAYuU,EAAOvU,UAE9B,OAAO9xB,EAYT,SAAS48C,GAAWvW,EAAQ/nC,EAAMgX,GAClB,MAAV+wB,GAAmBuK,GAAMtyC,EAAM+nC,KAEjCA,EAAwB,IADxB/nC,EAAOwyC,GAAOxyC,IACA4I,OAAcm/B,EAAS2I,GAAQ3I,EAAQ0K,GAAUzyC,EAAM,GAAI,IACzEA,EAAO/B,GAAK+B,IAEd,IAAIutC,EAAiB,MAAVxF,EAAiBA,EAASA,EAAO/nC,GAC5C,OAAe,MAARutC,EAAer+B,EAAYq+B,EAAK9xC,MAAMssC,EAAQ/wB,GAUvD,SAASm2B,GAAYjyC,GACnB,OAAgB,MAATA,GAAiB+7C,GAASD,GAAU97C,IAW7C,SAASmyC,GAAQnyC,EAAO0N,GAGtB,OAFA1N,EAAyB,iBAATA,GAAqBqjD,GAAS71C,KAAKxN,IAAWA,GAAS,EACvE0N,EAAmB,MAAVA,EAAiB41C,GAAmB51C,EACtC1N,GAAS,GAAKA,EAAQ,GAAK,GAAKA,EAAQ0N,EAYjD,SAASkuC,GAAe57C,EAAOgW,EAAO62B,GACpC,IAAKp/B,GAASo/B,GACZ,OAAO,EAET,IAAIxvC,SAAc2Y,EAClB,GAAY,UAAR3Y,EACG40C,GAAYpF,IAAWsF,GAAQn8B,EAAO62B,EAAOn/B,QACrC,UAARrQ,GAAoB2Y,KAAS62B,EAAS,CAC3C,IAAInB,EAAQmB,EAAO72B,GACnB,OAAOhW,GAAUA,EAASA,IAAU0rC,EAAUA,GAAUA,EAE1D,OAAO,EAWT,SAAS0L,GAAMp3C,EAAO6sC,GACpB,IAAIxvC,SAAc2C,EAClB,SAAa,UAAR3C,GAAoBkmD,GAAc/1C,KAAKxN,IAAmB,UAAR3C,KAGnDmB,GAAQwB,MAGEwjD,GAAah2C,KAAKxN,IACJ,MAAV6sC,GAAkB7sC,KAAS01C,GAAS7I,IAUxD,SAASgR,GAAWxL,GAClB,IAAIsL,EAAWD,GAAYrL,GAC3B,KAAMsL,KAAY1O,GAAYnxC,WAC5B,OAAO,EAET,IAAI4tC,EAAQsD,EAAO2O,GACnB,GAAItL,IAAS3G,EACX,OAAO,EAET,IAAIjpC,EAAOm7C,GAAQlS,GACnB,QAASjpC,GAAQ4vC,IAAS5vC,EAAK,GAYjC,SAASs5C,GAAS/7C,GAChB,MAAuB,iBAATA,GAAqBA,GAAS,GAAKA,EAAQ,GAAK,GAAKA,GAASsjD,GAW9E,SAASjM,GAAmBr3C,GAC1B,OAAOA,GAAUA,IAAUyN,GAASzN,GAkBtC,SAAS+gD,GAAUt+C,EAAMoS,GACvB,IAAImqC,EAAUv8C,EAAK,GACfghD,EAAa5uC,EAAO,GACpB6uC,EAAa1E,EAAUyE,EACvBxP,EAAWyP,EAAa5F,EAExB6F,EACDF,GAAc3F,GAAYkB,GAAWjB,GACrC0F,GAAc3F,GAAYkB,GAAWf,GAAcx7C,EAAK,GAAGiL,QAAUmH,EAAO,IAC5E4uC,IAAe3F,EAAWG,IAAee,GAAWjB,EAGvD,IAAM9J,IAAY0P,EAChB,OAAOlhD,EAGLghD,EAAa7D,IACfn9C,EAAK,GAAKoS,EAAO,GAEjB6uC,GAAe1E,EAAUY,EAAa,EAAIQ,GAG5C,IAAIpgD,EAAQ6U,EAAO,GACnB,GAAI7U,EAAO,CACT,IAAIw6C,EAAW/3C,EAAK,GACpBA,EAAK,GAAK+3C,EAAWD,GAAYC,EAAUx6C,EAAO6U,EAAO,IAAM47B,GAAUzwC,GACzEyC,EAAK,GAAK+3C,EAAWrM,EAAe1rC,EAAK,GAAI6rC,GAAemC,GAAU57B,EAAO,IA0B/E,OAvBA7U,EAAQ6U,EAAO,MAEb2lC,EAAW/3C,EAAK,GAChBA,EAAK,GAAK+3C,EAAWQ,GAAiBR,EAAUx6C,EAAO6U,EAAO,IAAM47B,GAAUzwC,GAC9EyC,EAAK,GAAK+3C,EAAWrM,EAAe1rC,EAAK,GAAI6rC,GAAemC,GAAU57B,EAAO,MAG/E7U,EAAQ6U,EAAO,MAEbpS,EAAK,GAAKguC,GAAUzwC,IAGlByjD,EAAa3F,IACfr7C,EAAK,GAAgB,MAAXA,EAAK,GAAaoS,EAAO,GAAKmlC,GAAUv3C,EAAK,GAAIoS,EAAO,KAGrD,MAAXpS,EAAK,KACPA,EAAK,GAAKoS,EAAO,IAGnBpS,EAAK,GAAKoS,EAAO,GACjBpS,EAAK,GAAKihD,EAEHjhD,EAWT,SAASmhD,GAAcpS,EAAaC,GAClC,OAAOD,IAAgBx9B,EAAYy9B,EAAc5yC,GAAM2yC,EAAaC,EAAamS,IAYnF,SAASC,GAAYhX,EAAQvG,GAC3BuG,EAAS6I,GAAS7I,GAMlB,IAJA,IAAI72B,GAAS,EACTtI,EAAS44B,EAAM54B,OACflH,OAEKwP,EAAQtI,GAAQ,CACvB,IAAIzN,EAAMqmC,EAAMtwB,GACZ/V,KAAO4sC,IACTrmC,EAAOvG,GAAO4sC,EAAO5sC,IAGzB,OAAOuG,EAYT,SAASs9C,GAAejX,EAAQV,GAC9B,IAAI3lC,KAMJ,OALA0uC,GAAUrI,EAAQ,SAAS7sC,EAAOC,EAAK4sC,GACjCV,EAAUnsC,EAAOC,EAAK4sC,KACxBrmC,EAAOvG,GAAOD,KAGXwG,EAaT,SAAS05C,GAAQhU,EAAO8L,GAKtB,IAJA,IAAIiJ,EAAY/U,EAAMx+B,OAClBA,EAASssC,GAAUhC,EAAQtqC,OAAQuzC,GACnC8C,EAAWtT,GAAUvE,GAElBx+B,KAAU,CACf,IAAIsI,EAAQgiC,EAAQtqC,GACpBw+B,EAAMx+B,GAAUykC,GAAQn8B,EAAOirC,GAAa8C,EAAS/tC,GAAShC,EAEhE,OAAOk4B,EA4CT,SAAS8X,GAASnX,GAWhB,IAVA,IAAIvG,EAAQ8O,GAAOvI,GACfqF,EAAc5L,EAAM54B,OACpBA,EAASwkC,GAAerF,EAAOn/B,OAE/Bu2C,IAAiBv2C,GAAUquC,GAASruC,KACrClP,GAAQquC,IAAWoI,GAAYpI,IAE9B72B,GAAS,EACTxP,OAEKwP,EAAQk8B,GAAa,CAC5B,IAAIjyC,EAAMqmC,EAAMtwB,IACXiuC,GAAgB9R,GAAQlyC,EAAKyN,IAAYvI,GAAe5D,KAAKsrC,EAAQ5sC,KACxEuG,EAAOlG,KAAKL,GAGhB,OAAOuG,EAUT,SAAS22C,GAAWn9C,GAClB,OAAa,MAATA,KAGCiyC,GAAYjyC,GAGVyN,GAASzN,GAASA,EAAQsiD,GAAOtiD,GAF/BkwC,GAAOlwC,GAYlB,SAAS01C,GAAS11C,GAChB,OAAOyN,GAASzN,GAASA,EAAQsiD,GAAOtiD,GAU1C,SAASs3C,GAAOt3C,GACd,GAAIxB,GAAQwB,GACV,OAAOA,EAET,IAAIwG,KAIJ,OAHAgmC,EAAaxsC,GAAO+K,QAAQm5C,GAAY,SAASC,EAAOxhD,EAAQyhD,EAAOvwB,GACrErtB,EAAOlG,KAAK8jD,EAAQvwB,EAAO9oB,QAAQs5C,GAAc,MAAS1hD,GAAUwhD,KAE/D39C,EAUT,SAAS2oC,GAAaltB,GACpB,OAAOA,aAAmBgtB,GACtBhtB,EAAQa,QACR,IAAIosB,GAAcjtB,EAAQqtB,YAAartB,EAAQutB,UAAWiB,GAAUxuB,EAAQstB,cAqHlF,SAAS1T,GAAKqQ,EAAO9pB,EAAGu5B,GAEtB,OADazP,EAAQA,EAAMx+B,OAAS,KAIhCiuC,EAAQC,GAAe1P,EAAO9pB,EAAGu5B,GAAc,MAALv5B,KAC5CA,EAAI,GAECm1B,GAAUrL,EAAO9pB,EAAI,EAAI,EAAIA,OA2BtC,SAASkiC,GAAUpY,EAAO9pB,EAAGu5B,GAC3B,IAAIjuC,EAASw+B,EAAQA,EAAMx+B,OAAS,EACpC,OAAKA,IAGDiuC,EAAQC,GAAe1P,EAAO9pB,EAAGu5B,GAAc,MAALv5B,KAC5CA,EAAI,GAENA,EAAI1U,IAAW0U,GAAK,GACbm1B,GAAUrL,EAAO,EAAG9pB,EAAI,EAAI,EAAIA,OA8QzC,SAASqF,GAAMykB,GACb,OAAOA,EAAQA,EAAM,GAAKl4B,EA6E5B,SAAS3N,GAAQ6lC,EAAOlsC,EAAOygC,GAC7B,IAAI/yB,EAASw+B,EAAQA,EAAMx+B,OAAS,EACpC,IAAKA,EACH,OAAQ,EAEV,GAAwB,iBAAb+yB,EACTA,EAAYA,EAAY,EAAIoa,GAAUntC,EAAS+yB,EAAW,GAAKA,OAC1D,GAAIA,EAAW,CACpB,IAAIzqB,EAAQqjC,GAAYnN,EAAOlsC,GAC/B,OAAIgW,EAAQtI,IACP1N,GAAUA,EAASA,IAAUksC,EAAMl2B,GAAWk2B,EAAMl2B,IAAWk2B,EAAMl2B,IACjEA,GAED,EAEV,OAAOq2B,EAAYH,EAAOlsC,EAAOygC,GAAa,GAoFhD,SAAS19B,GAAKmpC,GACZ,IAAIx+B,EAASw+B,EAAQA,EAAMx+B,OAAS,EACpC,OAAOA,EAASw+B,EAAMx+B,EAAS,GAAKsG,EA6MtC,SAASuwC,GAAKrY,GACZ,OAAOrQ,GAAKqQ,EAAO,GA8VrB,SAASsY,GAAKtY,EAAOuY,EAAUjW,EAAU8D,GAEvC,KADapG,EAAQA,EAAMx+B,OAAS,GAElC,SAEc,MAAZ+2C,GAAuC,kBAAZA,IAE7BjW,EAAWoN,GAAe1P,EAAOuY,EADjCnS,EAAU9D,GAC4Cx6B,EAAYywC,EAClEA,GAAW,GAEb,IAAIp9C,EAAWuxC,KAIf,OAHkB,MAAZpK,GAAoBnnC,IAAa+qC,KACrC5D,EAAWnnC,EAASmnC,EAAU8D,EAAS,IAEjCmS,GAAYzQ,MAAgB3H,EAChCkC,EAAWrC,EAAOsC,GAClBsK,GAAS5M,EAAOsC,GAqBtB,SAASkW,GAAMxY,GACb,IAAMA,IAASA,EAAMx+B,OACnB,SAEF,IAAIsI,GAAS,EACTtI,EAAS,EAEbw+B,EAAQ6E,GAAY7E,EAAO,SAASyY,GAClC,GAAI1S,GAAY0S,GAEd,OADAj3C,EAASmtC,GAAU8J,EAAMj3C,OAAQA,IAC1B,IAIX,IADA,IAAIlH,EAAS4J,GAAM1C,KACVsI,EAAQtI,GACflH,EAAOwP,GAASg7B,GAAS9E,EAAO2L,GAAa7hC,IAE/C,OAAOxP,EAuBT,SAASo+C,GAAU1Y,EAAOsC,EAAU8D,GAElC,KADapG,EAAQA,EAAMx+B,OAAS,GAElC,SAEF,IAAIlH,EAASk+C,GAAMxY,GACnB,OAAgB,MAAZsC,EACKhoC,GAETgoC,EAAWgE,GAAahE,EAAU8D,EAAS,GACpCtB,GAASxqC,EAAQ,SAASm+C,GAC/B,OAAOzT,GAAYyT,EAAOnW,EAAUx6B,GAAW,MA6FnD,SAAS6wC,GAAUve,EAAO4J,GACxB,IAAIl6B,GAAS,EACTtI,EAAS44B,EAAQA,EAAM54B,OAAS,EAChClH,KAKJ,KAHIkH,GAAWwiC,GAAW1xC,GAAQ8nC,EAAM,MACtC4J,QAEOl6B,EAAQtI,GAAQ,CACvB,IAAIzN,EAAMqmC,EAAMtwB,GACZk6B,EACF1pC,EAAOvG,GAAOiwC,EAAOl6B,GACZ/V,IACTuG,EAAOvG,EAAI,IAAMA,EAAI,IAGzB,OAAOuG,EA+DT,SAAS6d,GAAMrkB,GACb,IAAIwG,EAASwoC,EAAOhvC,GAEpB,OADAwG,EAAOgpC,WAAY,EACZhpC,EAoDT,SAASw7B,GAAKhiC,EAAO8kD,EAAaxS,GAChC,OAAOwS,EAAYvjD,KAAK+wC,EAAStyC,GA+TnC,SAASoE,GAAMzE,EAAYwsC,EAAWmG,GACpC,IAAID,EAAO7zC,GAAQmB,GAAcgxC,GAAa4D,GAO9C,OANIjC,GAAWsJ,GAAej8C,EAAYwsC,EAAWmG,KACnDnG,EAAYn4B,GAEU,mBAAbm4B,GAA2BmG,IAAYt+B,IAChDm4B,EAAYyM,GAAYzM,EAAWmG,EAAS,IAEvCD,EAAK1yC,EAAYwsC,GAoD1B,SAASlmC,GAAOtG,EAAYwsC,EAAWmG,GACrC,IAAID,EAAO7zC,GAAQmB,GAAcoxC,GAAc4D,GAE/C,OADAxI,EAAYyM,GAAYzM,EAAWmG,EAAS,GACrCD,EAAK1yC,EAAYwsC,GAiP1B,SAAS4Y,GAASplD,EAAYiQ,EAAQ6wB,EAAWkb,GAC/C,IAAIjuC,EAAS/N,EAAam8C,GAAUn8C,GAAc,EAUlD,OATKo8C,GAASruC,KAEZA,GADA/N,EAAauwC,GAAOvwC,IACA+N,QAGpB+yB,EADsB,iBAAbA,GAA0Bkb,GAASC,GAAehsC,EAAQ6wB,EAAWkb,GAClE,EAEAlb,EAAY,EAAIoa,GAAUntC,EAAS+yB,EAAW,GAAMA,GAAa,EAElD,iBAAd9gC,IAA2BnB,GAAQmB,IAAeU,GAASV,GACrE8gC,GAAa/yB,GAAU/N,EAAW0G,QAAQuJ,EAAQ6wB,IAAc,IAC9D/yB,GAAUsmC,GAAWr0C,EAAYiQ,EAAQ6wB,IAAc,EAgJhE,SAAS1gC,GAAIJ,EAAY6uC,EAAU8D,GACjC,IAAID,EAAO7zC,GAAQmB,GAAcqxC,GAAWkG,GAE5C,OADA1I,EAAWoK,GAAYpK,EAAU8D,EAAS,GACnCD,EAAK1yC,EAAY6uC,GA0N1B,SAASwW,GAAOrlD,EAAYyiB,EAAGu5B,GAC7B,GAAIA,EAAQC,GAAej8C,EAAYyiB,EAAGu5B,GAAc,MAALv5B,EAGjD,OADI1U,GADJ/N,EAAaw9C,GAAWx9C,IACA+N,QACR,EAAI/N,EAAWs4C,GAAW,EAAGvqC,EAAS,IAAMsG,EAE9D,IAAIgC,GAAS,EACTxP,EAASi7B,GAAQ9hC,GACjB+N,EAASlH,EAAOkH,OAChB4qB,EAAY5qB,EAAS,EAGzB,IADA0U,EAAI43B,GAAU53B,EAAI,EAAI,GAAMA,GAAK,EAAI1U,KAC5BsI,EAAQoM,GAAG,CAClB,IAAI6iC,EAAOhN,GAAWjiC,EAAOsiB,GACzBt4B,EAAQwG,EAAOy+C,GAEnBz+C,EAAOy+C,GAAQz+C,EAAOwP,GACtBxP,EAAOwP,GAAShW,EAGlB,OADAwG,EAAOkH,OAAS0U,EACT5b,EA+FT,SAASkR,GAAK/X,EAAYwsC,EAAWmG,GACnC,IAAID,EAAO7zC,GAAQmB,GAAc0xC,GAAYiH,GAO7C,OANIhG,GAAWsJ,GAAej8C,EAAYwsC,EAAWmG,KACnDnG,EAAYn4B,GAEU,mBAAbm4B,GAA2BmG,IAAYt+B,IAChDm4B,EAAYyM,GAAYzM,EAAWmG,EAAS,IAEvCD,EAAK1yC,EAAYwsC,GA2S1B,SAAS+Y,GAAO9iC,EAAGiwB,GACjB,IAAI7rC,EACJ,GAAmB,mBAAR6rC,EAAoB,CAC7B,GAAgB,mBAALjwB,EAKT,MAAM,IAAIyxB,GAAUC,GAJpB,IAAIqR,EAAO/iC,EACXA,EAAIiwB,EACJA,EAAO8S,EAKX,OAAO,WAOL,QANM/iC,EAAI,IACR5b,EAAS6rC,EAAK9xC,MAAMnD,KAAMmH,YAExB6d,GAAK,IACPiwB,EAAOr+B,GAEFxN,GA8RX,SAAS4+C,GAAS/S,EAAMuB,EAAM32C,GAoC5B,SAASooD,EAASC,EAAUz0B,GACtBA,GACF5f,GAAa4f,GAEf00B,EAAep5B,EAAYq5B,EAAexxC,EACtCsxC,IACFG,EAAa7yC,KACbpM,EAAS6rC,EAAK9xC,MAAM+xC,EAASx2B,GACxBqQ,GAAco5B,IACjBzpC,EAAOw2B,EAAUt+B,IAKvB,SAAS0xC,IACP,IAAIC,EAAY/R,GAAQhhC,KAAQgzC,GAC5BD,GAAa,GAAKA,EAAY/R,EAChCyR,EAASG,EAAcD,GAEvBp5B,EAAYziB,GAAWg8C,EAASC,GAIpC,SAASE,IACPR,EAASS,EAAU35B,GAGrB,SAAS45B,IAMP,GALAjqC,EAAOvX,UACPqhD,EAAQhzC,KACR0/B,EAAUl1C,KACVooD,EAAeM,IAAa35B,IAAc65B,IAE1B,IAAZC,EACF,IAAIC,EAAcF,IAAY75B,MACzB,CACAo5B,GAAiBS,IACpBP,EAAaG,GAEf,IAAID,EAAYM,GAAWL,EAAQH,GAC/BH,EAAWK,GAAa,GAAKA,EAAYM,EAEzCX,GACEC,IACFA,EAAet0C,GAAas0C,IAE9BE,EAAaG,EACbp/C,EAAS6rC,EAAK9xC,MAAM+xC,EAASx2B,IAErBypC,IACRA,EAAe77C,GAAWm8C,EAAYF,IAgB1C,OAbIL,GAAYn5B,EACdA,EAAYlb,GAAakb,GAEjBA,GAAaynB,IAASqS,IAC9B95B,EAAYziB,GAAWg8C,EAAS9R,IAE9BsS,IACFZ,GAAW,EACX9+C,EAAS6rC,EAAK9xC,MAAM+xC,EAASx2B,KAE3BwpC,GAAan5B,GAAco5B,IAC7BzpC,EAAOw2B,EAAUt+B,GAEZxN,EArGT,IAAIsV,EACAypC,EACA/+C,EACAo/C,EACAtT,EACAnmB,EACAq5B,EACAC,EAAa,EACbQ,GAAU,EACVH,GAAW,EAEf,GAAmB,mBAARzT,EACT,MAAM,IAAIwB,GAAUC,GAGtB,GADAF,EAAOA,EAAO,EAAI,GAAMA,GAAQ,GAChB,IAAZ32C,EAAkB,CACpB,IAAI+oD,GAAU,EACdF,GAAW,OACFr4C,GAASxQ,KAClB+oD,IAAY/oD,EAAQ+oD,QACpBC,EAAU,YAAahpD,GAAW49C,IAAW59C,EAAQgpD,SAAW,EAAGrS,GACnEkS,EAAW,aAAc7oD,IAAYA,EAAQ6oD,SAAWA,GAmF1D,OADAC,EAAUj5B,OA/EV,WACMX,GACFlb,GAAakb,GAEXo5B,GACFt0C,GAAas0C,GAEfE,EAAa,EACbF,EAAep5B,EAAYq5B,EAAexxC,GAwErC+xC,EA6IT,SAASI,GAAQ9T,EAAM+T,GACrB,GAAmB,mBAAR/T,GAAuB+T,GAA+B,mBAAZA,EACnD,MAAM,IAAIvS,GAAUC,GAEtB,IAAIuS,EAAW,WACb,IAAIvqC,EAAOvX,UACPtE,EAAMmmD,EAAWA,EAAS7lD,MAAMnD,KAAM0e,GAAQA,EAAK,GACnDR,EAAQ+qC,EAAS/qC,MAErB,GAAIA,EAAMhX,IAAIrE,GACZ,OAAOqb,EAAMnY,IAAIlD,GAEnB,IAAIuG,EAAS6rC,EAAK9xC,MAAMnD,KAAM0e,GAE9B,OADAuqC,EAAS/qC,MAAQA,EAAMzd,IAAIoC,EAAKuG,GACzBA,GAGT,OADA6/C,EAAS/qC,MAAQ,IAAI6qC,GAAQG,MACtBD,EA2NT,SAAS5K,GAAUpJ,EAAMt1B,GACvB,GAAmB,mBAARs1B,EACT,MAAM,IAAIwB,GAAUC,GAGtB,OADA/2B,EAAQ89B,GAAU99B,IAAU/I,EAAaq+B,EAAK3kC,OAAS,GAAOqP,GAAS,EAAI,GACpE,WAML,IALA,IAAIjB,EAAOvX,UACPyR,GAAS,EACTtI,EAASmtC,GAAU/+B,EAAKpO,OAASqP,EAAO,GACxCwnC,EAAOn0C,GAAM1C,KAERsI,EAAQtI,GACf62C,EAAKvuC,GAAS8F,EAAKiB,EAAQ/G,GAE7B,OAAQ+G,GACN,KAAK,EAAG,OAAOs1B,EAAK9wC,KAAKnE,KAAMmnD,GAC/B,KAAK,EAAG,OAAOlS,EAAK9wC,KAAKnE,KAAM0e,EAAK,GAAIyoC,GACxC,KAAK,EAAG,OAAOlS,EAAK9wC,KAAKnE,KAAM0e,EAAK,GAAIA,EAAK,GAAIyoC,GAEnD,IAAIgC,EAAYn2C,GAAM2M,EAAQ,GAE9B,IADA/G,GAAS,IACAA,EAAQ+G,GACfwpC,EAAUvwC,GAAS8F,EAAK9F,GAG1B,OADAuwC,EAAUxpC,GAASwnC,EACZlS,EAAK9xC,MAAMnD,KAAMmpD,IAuQ5B,SAASvhC,GAAGhlB,EAAO0rC,GACjB,OAAO1rC,EAAQ0rC,EA2CjB,SAASuJ,GAAYj1C,GACnB,OAAOguC,EAAahuC,IAAUiyC,GAAYjyC,IACxCmF,GAAe5D,KAAKvB,EAAO,YAAcwmD,GAAqBjlD,KAAKvB,EAAO,UAqK9E,SAASkvB,GAAQlvB,EAAO0rC,EAAOiG,EAAYW,GAEzC,IAAI9rC,GADJmrC,EAAkC,mBAAdA,EAA2Ba,GAAab,EAAYW,EAAS,GAAKt+B,GAC5D29B,EAAW3xC,EAAO0rC,GAAS13B,EACrD,OAAQxN,IAAWwN,EAAY2hC,GAAY31C,EAAO0rC,EAAOiG,KAAgBnrC,EAoB3E,SAASigD,GAAQzmD,GACf,OAAOguC,EAAahuC,IAAkC,iBAAjBA,EAAMgC,SAAuBixC,GAAY1xC,KAAKvB,IAAUshD,EAkD/F,SAAS5wC,GAAW1Q,GAIlB,OAAOyN,GAASzN,IAAUizC,GAAY1xC,KAAKvB,IAAUmzC,EAuBvD,SAAS1lC,GAASzN,GAGhB,IAAI3C,SAAc2C,EAClB,QAASA,IAAkB,UAAR3C,GAA4B,YAARA,GA8FzC,SAAS8kD,GAASniD,GAChB,OAAa,MAATA,IAGA0Q,GAAW1Q,GACN0mD,GAAWl5C,KAAKm5C,GAAWplD,KAAKvB,IAElCguC,EAAahuC,IAAU4mD,GAAap5C,KAAKxN,IA6ClD,SAAS2Q,GAAS3Q,GAChB,MAAuB,iBAATA,GAAsBguC,EAAahuC,IAAUizC,GAAY1xC,KAAKvB,IAAUuhD,EAiCxF,SAASjjD,GAAc0B,GACrB,IAAIq8C,EAGJ,IAAMrO,EAAahuC,IAAUizC,GAAY1xC,KAAKvB,IAAUozC,GAAc6B,GAAYj1C,KAC5EmF,GAAe5D,KAAKvB,EAAO,gBAA4D,mBAAzCq8C,EAAOr8C,EAAMS,gBAA4C47C,aAAgBA,GAC3H,OAAO,EAKT,IAAI71C,EAOJ,OAHA0uC,GAAUl1C,EAAO,SAAS0zC,EAAUzzC,GAClCuG,EAASvG,IAEJuG,IAAWwN,GAAa7O,GAAe5D,KAAKvB,EAAOwG,GAmB5D,SAAS09B,GAASlkC,GAChB,OAAOyN,GAASzN,IAAUizC,GAAY1xC,KAAKvB,IAAUwhD,EAmBvD,SAASnhD,GAASL,GAChB,MAAuB,iBAATA,GAAsBguC,EAAahuC,IAAUizC,GAAY1xC,KAAKvB,IAAUyhD,EAmBxF,SAASrL,GAAap2C,GACpB,OAAOguC,EAAahuC,IAAU+7C,GAAS/7C,EAAM0N,WAAam5C,GAAe5T,GAAY1xC,KAAKvB,IA2C5F,SAAS8mD,GAAG9mD,EAAO0rC,GACjB,OAAO1rC,EAAQ0rC,EA0CjB,SAASjK,GAAQzhC,GACf,IAAI0N,EAAS1N,EAAQ87C,GAAU97C,GAAS,EACxC,OAAK+7C,GAASruC,GAGTA,EAGE+iC,GAAUzwC,MALRkwC,GAAOlwC,GA+BlB,SAAS43C,GAAc53C,GACrB,OAAO6xC,GAAS7xC,EAAOo1C,GAAOp1C,IAkZhC,SAAS+mD,GAAUla,GACjB,OAAO0I,GAAc1I,EAAQuI,GAAOvI,IAoLtC,SAASuI,GAAOvI,GACd,GAAc,MAAVA,EACF,SAEGp/B,GAASo/B,KACZA,EAASyV,GAAOzV,IAElB,IAAIn/B,EAASm/B,EAAOn/B,OACpBA,EAAUA,GAAUquC,GAASruC,KAC1BlP,GAAQquC,IAAWoI,GAAYpI,KAAYn/B,GAAW,EAQzD,IANA,IAAI2uC,EAAOxP,EAAOpsC,YACduV,GAAS,EACTgxC,EAAyB,mBAAR3K,GAAsBA,EAAKv+C,YAAc+uC,EAC1DrmC,EAAS4J,GAAM1C,GACfu5C,EAAcv5C,EAAS,IAElBsI,EAAQtI,GACflH,EAAOwP,GAAUA,EAAQ,GAE3B,IAAK,IAAI/V,KAAO4sC,EACRoa,GAAe9U,GAAQlyC,EAAKyN,IACrB,eAAPzN,IAAyB+mD,IAAY7hD,GAAe5D,KAAKsrC,EAAQ5sC,KACrEuG,EAAOlG,KAAKL,GAGhB,OAAOuG,EAuHT,SAASy7C,GAAMpV,GACbA,EAAS6I,GAAS7I,GAOlB,IALA,IAAI72B,GAAS,EACTswB,EAAQ7B,GAAKoI,GACbn/B,EAAS44B,EAAM54B,OACflH,EAAS4J,GAAM1C,KAEVsI,EAAQtI,GAAQ,CACvB,IAAIzN,EAAMqmC,EAAMtwB,GAChBxP,EAAOwP,IAAU/V,EAAK4sC,EAAO5sC,IAE/B,OAAOuG,EA4MT,SAAS0pC,GAAOrD,GACd,OAAOoM,GAAWpM,EAAQpI,GAAKoI,IAkMjC,SAAS4P,GAAO5oB,GAEd,OADAA,EAAS2Y,EAAa3Y,KACLA,EAAO9oB,QAAQm8C,GAAU9Z,GAAcriC,QAAQo8C,GAAa,IAuQ/E,SAASvkC,GAAOiR,EAAQzR,GACtB,IAAI5b,EAAS,GAGb,GAFAqtB,EAAS2Y,EAAa3Y,IACtBzR,GAAKA,GACG,IAAMyR,IAAW0sB,GAAen+B,GACtC,OAAO5b,EAIT,GACM4b,EAAI,IACN5b,GAAUqtB,GAEZzR,EAAI81B,GAAY91B,EAAI,GACpByR,GAAUA,QACHzR,GAET,OAAO5b,EA8ST,SAASiyB,GAAK5E,EAAQ6Y,EAAOiP,GAC3B,IAAI37C,EAAQ6zB,EAEZ,OADAA,EAAS2Y,EAAa3Y,KAIlB8nB,EAAQC,GAAe57C,EAAO0sC,EAAOiP,GAAkB,MAATjP,GACzC7Y,EAAO/L,MAAM6mB,EAAiB9a,GAAS+a,EAAkB/a,GAAU,IAE5E6Y,GAAiB,GACV7Y,EAAO/L,MAAM2kB,EAAe5Y,EAAQ6Y,GAAQC,EAAgB9Y,EAAQ6Y,GAAS,IAN3E7Y,EA4MX,SAAS2oB,GAAM3oB,EAAQ4P,EAASkY,GAK9B,OAJIA,GAASC,GAAe/nB,EAAQ4P,EAASkY,KAC3ClY,EAAUzvB,IAEZ6f,EAAS2Y,EAAa3Y,IACRswB,MAAM1gB,GAAW2jB,QAuEjC,SAAS//C,GAASgrC,EAAMC,EAASqJ,GAI/B,OAHIA,GAASC,GAAevJ,EAAMC,EAASqJ,KACzCrJ,EAAUt+B,GAELg6B,EAAaqE,GAChBgV,GAAQhV,GACRD,GAAaC,EAAMC,GAwCzB,SAASrQ,GAASjiC,GAChB,OAAOA,EA4BT,SAASqnD,GAAQxyC,GACf,OAAO49B,GAAYE,GAAU99B,GAAQ,IA4HvC,SAASyyC,GAAMza,EAAQh4B,EAAQ5X,GAC7B,GAAe,MAAXA,EAAiB,CACnB,IAAIsqD,EAAQ95C,GAASoH,GACjByxB,EAAQihB,EAAQ9iB,GAAK5vB,GAAUb,EAC/BwzC,EAAelhB,GAASA,EAAM54B,OAAU6nC,GAAc1gC,EAAQyxB,GAAStyB,GAErEwzC,EAAcA,EAAY95C,OAAS65C,KACvCC,GAAc,EACdvqD,EAAU4X,EACVA,EAASg4B,EACTA,EAASzvC,MAGRoqD,IACHA,EAAcjS,GAAc1gC,EAAQ4vB,GAAK5vB,KAE3C,IAAIwP,GAAQ,EACRrO,GAAS,EACTk9B,EAASxiC,GAAWm8B,GACpBn/B,EAAS85C,EAAY95C,QAET,IAAZzQ,EACFonB,GAAQ,EACC5W,GAASxQ,IAAY,UAAWA,IACzConB,EAAQpnB,EAAQonB,OAElB,OAASrO,EAAQtI,GAAQ,CACvB,IAAIkzC,EAAa4G,EAAYxxC,GACzBq8B,EAAOx9B,EAAO+rC,GAElB/T,EAAO+T,GAAcvO,EACjBa,IACFrG,EAAO/uC,UAAU8iD,GAAe,SAASvO,GACvC,OAAO,WACL,IAAIhD,EAAWjyC,KAAKoyC,UACpB,GAAInrB,GAASgrB,EAAU,CACrB,IAAI7oC,EAASqmC,EAAOzvC,KAAKkyC,aAKzB,OAJc9oC,EAAO+oC,YAAckB,GAAUrzC,KAAKmyC,cAE1CjvC,MAAO+xC,KAAQA,EAAMv2B,KAAQvX,UAAW+tC,QAAWzF,IAC3DrmC,EAAOgpC,UAAYH,EACZ7oC,EAET,OAAO6rC,EAAK9xC,MAAMssC,EAAQoE,IAAW7zC,KAAK4C,SAAUuE,cAEtD8tC,IAGN,OAAOxF,EAkCT,SAAS1oC,MA0BT,SAAS2B,GAAShB,GAChB,OAAOsyC,GAAMtyC,GAAQ+yC,GAAa/yC,GAAQgzC,GAAiBhzC,GAz+U7D,IAAIsL,IAHJ5N,EAAUA,EAAU9E,GAAEgI,SAAS02C,GAAKkG,SAAU9/C,EAAS9E,GAAEoO,KAAKswC,GAAMqL,KAAiBrL,IAGjEhsC,MAChBsC,GAAOlQ,EAAQkQ,KACf9T,GAAQ4D,EAAQ5D,MAChB8oD,GAAWllD,EAAQklD,SACnBx9C,GAAO1H,EAAQ0H,KACfy9C,GAASnlD,EAAQmlD,OACjBrF,GAAS9/C,EAAQ8/C,OACjB/pB,GAAS/1B,EAAQ+1B,OACjB+L,GAAS9hC,EAAQ8hC,OACjBuP,GAAYrxC,EAAQqxC,UAGpB+T,GAAax3C,GAAMtS,UACnB+pD,GAAcvF,GAAOxkD,UACrBgqD,GAAcxjB,GAAOxmC,UAGrB6oD,GAAae,GAAS5pD,UAAUmU,SAGhC9M,GAAiB0iD,GAAY1iD,eAG7B4iD,GAAY,EAMZ9U,GAAc4U,GAAY51C,SAG1B+1C,GAAU5L,GAAK1+C,EAGfgpD,GAAanuB,GAAO,IACtBouB,GAAWplD,KAAK4D,IAAgB4F,QAAQ,sBAAuB,QAC9DA,QAAQ,yDAA0D,SAAW,KAI5EqvC,GAAc53C,EAAQ43C,YACtBnpC,GAAezO,EAAQyO,aACvBpI,GAAarG,EAAQqG,WACrB45B,GAAMv4B,GAAKu4B,IACX+jB,GAAuBqB,GAAYrB,qBACnCpW,GAAM8R,GAAU1/C,EAAS,OACzBkH,GAAalH,EAAQkH,WACrBoJ,GAAS80C,GAAW90C,OACpBwnC,GAAa93C,EAAQ83C,WACrB2N,GAAU/F,GAAU1/C,EAAS,WAG7Bi+C,GAAav2C,GAAKwiB,KAClByjB,GAAe+R,GAAUI,GAAQ,UACjCpK,GAAchuC,GAAKsG,MACnB03C,GAAgBhG,GAAU9xC,GAAO,WACjCmwC,GAAiB/9C,EAAQsgC,SACzBqlB,GAAajG,GAAUI,GAAQ,QAC/BzH,GAAY3wC,GAAK0G,IACjBopC,GAAY9vC,GAAKC,IACjBi+C,GAAYlG,GAAUxvC,GAAM,OAC5B21C,GAAiB7lD,EAAQ8lD,SACzBnQ,GAAejuC,GAAKuG,OAGpB83C,GAAoBZ,GAAOY,kBAC3B1Y,GAAoB8X,GAAO9X,kBAG3B2Y,GAAmB,WACnBvO,GAAkBuO,GAAmB,EACrC/O,GAAwB+O,KAAqB,EAM7ClF,GAAmB,iBAGnBmF,GAAUR,IAAW,IAAIA,GAGzBlG,MA8IU/S,EAAO0Z,WAWrB1Z,EAAO2Z,kBAQLC,OAAUC,GAQVlwC,SAAYmwC,GAQZC,YAAeC,GAQfC,SAAY,GAQZC,SAQExrD,EAAKsxC,IAovBT,IAAI2N,GAAc,WAChB,SAAS9P,KACT,OAAO,SAAS/uC,GACd,GAAI2P,GAAS3P,GAAY,CACvB+uC,EAAO/uC,UAAYA,EACnB,IAAI0I,EAAS,IAAIqmC,EACjBA,EAAO/uC,UAAYkW,EAErB,OAAOxN,UA6EPguC,GAAWqH,GAAepI,IAW1B0V,GAAgBtN,GAAexG,IAAiB,GAsKhDF,GAAU8G,KAYV3G,GAAe2G,IAAc,GAmgB7B+E,GAAeyH,GAAqB,SAASpW,EAAM5vC,GAErD,OADAgmD,GAAQ5qD,IAAIw0C,EAAM5vC,GACX4vC,GAFoBpQ,GAgzCzB2b,GAAW6K,GAAiB,SAASpW,GACvC,OAAOoW,GAAQtlD,IAAIkvC,IADIluC,GAmDrB23C,GAAYjE,GAAa,UA0azBkI,GAAW,WACb,IAAIqJ,EAAQ,EACR3D,EAAa,EAEjB,OAAO,SAASxlD,EAAKD,GACnB,IAAI4lD,EAAQhzC,KACR+yC,EAAY0D,GAAYzD,EAAQH,GAGpC,GADAA,EAAaG,EACTD,EAAY,GACd,KAAMyD,GAASE,EACb,OAAOrpD,OAGTmpD,EAAQ,EAEV,OAAOpI,GAAY/gD,EAAKD,OA+KxBupD,GAAa9N,GAAU,SAASvP,EAAOgE,GACzC,OAAQlC,EAAa9B,IAAU+F,GAAY/F,GACvC6H,GAAe7H,EAAO6I,GAAY7E,GAAQ,GAAO,SAiRnDsZ,GAAYnM,KAkDZoM,GAAgBpM,IAAgB,GAkJhCn8B,GAAeu6B,GAAU,SAASiO,GAQpC,IAPA,IAAIlZ,EAAYkZ,EAAOh8C,OACnB6iC,EAAWC,EACXmZ,EAASv5C,GAAM1C,GACfrH,EAAU2tC,KACVC,EAAW5tC,GAAWgmC,EACtB7lC,KAEG+pC,KAAY,CACjB,IAAIvwC,EAAQ0pD,EAAOnZ,GAAY0B,GAAYjyC,EAAQ0pD,EAAOnZ,IAAavwC,KACvE2pD,EAAOpZ,GAAa0D,GAAYj0C,EAAM0N,QAAU,IAAOymC,GAAY5D,GAAYvwC,GAAS,KAE1F,IAAIksC,EAAQwd,EAAO,GACf1zC,GAAS,EACTtI,EAASw+B,EAAQA,EAAMx+B,OAAS,EAChC+gC,EAAOkb,EAAO,GAElBtV,EACA,OAASr+B,EAAQtI,GAEf,GADA1N,EAAQksC,EAAMl2B,IACTy4B,EAAO4B,GAAa5B,EAAMzuC,GAASqG,EAAQG,EAAQxG,EAAO,IAAM,EAAG,CAEtE,IADIuwC,EAAWC,IACND,GAAU,CACjB,IAAIj1B,EAAQquC,EAAOpZ,GACnB,IAAKj1B,EAAQ+0B,GAAa/0B,EAAOtb,GAASqG,EAAQqjD,EAAOnZ,GAAWvwC,EAAO,IAAM,EAC/E,SAASq0C,EAGT5F,GACFA,EAAKnuC,KAAKN,GAEZwG,EAAOlG,KAAKN,GAGhB,OAAOwG,IA6ILojD,GAASnO,GAAU,SAASvP,EAAO8L,GAGrC,IAAIxxC,EAASsrC,GAAO5F,EAFpB8L,EAAUjD,GAAYiD,IAItB,OADAD,GAAW7L,EAAO8L,EAAQS,KAAKhN,IACxBjlC,IA2JLqjD,GAAc/I,KAsBdgJ,GAAkBhJ,IAAkB,GAsMpCiJ,GAAQtO,GAAU,SAASiO,GAC7B,OAAO5Q,GAAS/D,GAAY2U,GAAQ,GAAO,MAgKzCM,GAAUvO,GAAU,SAASvP,EAAOgE,GACtC,OAAO+B,GAAY/F,GACf6H,GAAe7H,EAAOgE,QAgDxB+Z,GAAMxO,GAAUiJ,IA2DhBwF,GAAUzO,GAAU,SAASiO,GAC/B,IAAIh8C,EAASg8C,EAAOh8C,OAChB8gC,EAAW9gC,EAAS,EAAIg8C,EAAOh8C,EAAS,GAAKsG,EAC7Cs+B,EAAU5kC,EAAS,EAAIg8C,EAAOh8C,EAAS,GAAKsG,EAShD,OAPItG,EAAS,GAAwB,mBAAZ8gC,EACvB9gC,GAAU,GAEV8gC,EAAY9gC,EAAS,GAAuB,mBAAX4kC,KAA4B5kC,EAAQ4kC,GAAWt+B,EAChFs+B,EAAUt+B,GAEZ01C,EAAOh8C,OAASA,EACTk3C,GAAU8E,EAAQlb,EAAU8D,KAwKjC6X,GAAgB1O,GAAU,SAASvL,GAErC,OADAA,EAAS6E,GAAY7E,GACd9yC,KAAK4kC,KAAK,SAASkK,GACxB,OAAOoE,GAAY9xC,GAAQ0tC,GAASA,GAASwJ,GAASxJ,IAASgE,OA0I/DroB,GAAK4zB,GAAU,SAAS97C,EAAY2mC,GACtC,OAAOwL,GAAOnyC,EAAYo1C,GAAYzO,MA4CpC8jB,GAAUhP,GAAiB,SAAS50C,EAAQxG,EAAOC,GACrDkF,GAAe5D,KAAKiF,EAAQvG,KAASuG,EAAOvG,GAAQuG,EAAOvG,GAAO,IAuKhEimB,GAAOk3B,GAAW5I,IAqBlB6V,GAAWjN,GAAW+L,IAAe,GAiErCxrD,GAAUwgD,GAAczN,GAAW8D,IAqBnC8V,GAAenM,GA5iKnB,SAAwBjS,EAAOsC,GAG7B,IAFA,IAAI9gC,EAASw+B,EAAMx+B,OAEZA,MAC0C,IAA3C8gC,EAAStC,EAAMx+B,GAASA,EAAQw+B,KAItC,OAAOA,GAoiKwCid,IA4C7CoB,GAAUnP,GAAiB,SAAS50C,EAAQxG,EAAOC,GACjDkF,GAAe5D,KAAKiF,EAAQvG,GAC9BuG,EAAOvG,GAAKK,KAAKN,GAEjBwG,EAAOvG,IAAQD,KA+FfwqD,GAAUpP,GAAiB,SAAS50C,EAAQxG,EAAOC,GACrDuG,EAAOvG,GAAOD,IAyBZR,GAASi8C,GAAU,SAAS97C,EAAYmF,EAAMgX,GAChD,IAAI9F,GAAS,EACTk9B,EAAwB,mBAARpuC,EAChB2lD,EAASrT,GAAMtyC,GACf0B,EAASyrC,GAAYtyC,GAAcyQ,GAAMzQ,EAAW+N,WAMxD,OAJA8mC,GAAS70C,EAAY,SAASK,GAC5B,IAAIqyC,EAAOa,EAASpuC,EAAS2lD,GAAmB,MAATzqD,EAAiBA,EAAM8E,GAAQkP,EACtExN,IAASwP,GAASq8B,EAAOA,EAAK9xC,MAAMP,EAAO8b,GAAQsnC,GAAWpjD,EAAO8E,EAAMgX,KAEtEtV,IA4HLkkD,GAAYtP,GAAiB,SAAS50C,EAAQxG,EAAOC,GACvDuG,EAAOvG,EAAM,EAAI,GAAGK,KAAKN,IACxB,WAAa,gBAkEZuG,GAASu4C,GAAa5N,GAAasD,IAwBnCmW,GAAc7L,GArxKlB,SAA0B5S,EAAOsC,EAAU2C,EAAaC,GACtD,IAAI1jC,EAASw+B,EAAMx+B,OAInB,IAHI0jC,GAAiB1jC,IACnByjC,EAAcjF,IAAQx+B,IAEjBA,KACLyjC,EAAc3C,EAAS2C,EAAajF,EAAMx+B,GAASA,EAAQw+B,GAE7D,OAAOiF,GA6wKwCgY,IAiS7CyB,GAAYnP,GAAU,SAAS97C,EAAYg5C,GAC7C,GAAkB,MAAdh5C,EACF,SAEF,IAAIg8C,EAAQhD,EAAU,GAItB,OAHIgD,GAASC,GAAejD,EAAU,GAAIA,EAAU,GAAIgD,KACtDhD,EAAUjrC,OAAS,GAEdgrC,GAAgB/4C,EAAYo1C,GAAY4D,SAsG7C/lC,GAAMw1C,IAAa,WACrB,OAAO,IAAI11C,IAAOm2B,WA+IhBxlC,GAAOo4C,GAAU,SAASpJ,EAAMC,EAASkI,GAC3C,IAAIwE,EAAUY,EACd,GAAIpF,EAAS9sC,OAAQ,CACnB,IAAI+sC,EAAUtM,EAAeqM,EAAUn3C,GAAK+qC,aAC5C4Q,GAAWhB,EAEb,OAAOhB,GAAc3K,EAAM2M,EAAS1M,EAASkI,EAAUC,KA+BrDoQ,GAAUpP,GAAU,SAAS5O,EAAQ2a,GAMvC,IAHA,IAAIxxC,GAAS,EACTtI,GAHJ85C,EAAcA,EAAY95C,OAASqnC,GAAYyS,GAAeT,GAAUla,IAG/Cn/B,SAEhBsI,EAAQtI,GAAQ,CACvB,IAAIzN,EAAMunD,EAAYxxC,GACtB62B,EAAO5sC,GAAO+8C,GAAcnQ,EAAO5sC,GAAM2/C,EAAW/S,GAEtD,OAAOA,IA+CLie,GAAUrP,GAAU,SAAS5O,EAAQ5sC,EAAKu6C,GAC5C,IAAIwE,EAAUY,EAAYC,EAC1B,GAAIrF,EAAS9sC,OAAQ,CACnB,IAAI+sC,EAAUtM,EAAeqM,EAAUsQ,GAAQ1c,aAC/C4Q,GAAWhB,EAEb,OAAOhB,GAAc/8C,EAAK++C,EAASnS,EAAQ2N,EAAUC,KA2CnDsQ,GAAQnO,GAAYmB,GAuCpBiN,GAAapO,GAAYyD,GA8LzBzgC,GAAQ67B,GAAU,SAASpJ,EAAMv2B,GACnC,OAAO63B,GAAUtB,EAAM,EAAGv2B,KAqBxBmvC,GAAQxP,GAAU,SAASpJ,EAAMuB,EAAM93B,GACzC,OAAO63B,GAAUtB,EAAMuB,EAAM93B,KAuB3BovC,GAAO1N,KAsBP2N,GAAY3N,IAAW,GAwGvB4N,GAAU3P,GAAU,SAASpJ,EAAMgQ,GAErC,GADAA,EAAatN,GAAYsN,GACN,mBAARhQ,IAAuB1B,GAAW0R,EAAY9V,GACvD,MAAM,IAAIsH,GAAUC,GAEtB,IAAIpmC,EAAS20C,EAAW30C,OACxB,OAAO+tC,GAAU,SAAS3/B,GAExB,IADA,IAAI9F,EAAQgkC,GAAUl+B,EAAKpO,OAAQA,GAC5BsI,KACL8F,EAAK9F,GAASqsC,EAAWrsC,GAAO8F,EAAK9F,IAEvC,OAAOq8B,EAAK9xC,MAAMnD,KAAM0e,OAqFxBuvC,GAAUzM,GAAcZ,GAiCxBsN,GAAe1M,GAAcc,GA8B7Bp6B,GAAQm2B,GAAU,SAASpJ,EAAM2F,GACnC,OAAOgF,GAAc3K,EAAM4L,EAAYjqC,EAAWA,EAAWA,EAAW+gC,GAAYiD,MA0XlFx5C,GAAU0pD,IAAiB,SAASloD,GACtC,OAAOguC,EAAahuC,IAAU+7C,GAAS/7C,EAAM0N,SAAWulC,GAAY1xC,KAAKvB,IAAUk2C,GA0qBjFr3C,GAAQ08C,GAAe/D,IAkCvB90C,GAAS64C,GAAe,SAAS1O,EAAQh4B,EAAQ88B,GACnD,OAAOA,EACHD,GAAW7E,EAAQh4B,EAAQ88B,GAC3BC,GAAW/E,EAAQh4B,KA+DrBnP,GAAWu3C,GAAev6C,GAjkP9B,SAAwB8uC,EAAaC,GACnC,OAAOD,IAAgBx9B,EAAYy9B,EAAcD,IAolP/C+Z,GAAetO,GAAep+C,GAAO+kD,IAkDrC4H,GAAUlO,GAAc7J,IAkDxBgY,GAAcnO,GAAcjI,IA6B5BqW,GAAQrN,GAAYlJ,IA2BpBwW,GAAatN,GAAY/I,IA6BzBsW,GAAStN,GAAa7K,IA2BtBoY,GAAcvN,GAAajJ,IAuK3B5Q,GAAQ0jB,GAAwB,SAAStb,GAC3C,IAAIwP,EAAiB,MAAVxP,EAAiB74B,EAAY64B,EAAOpsC,YAC/C,MAAoB,mBAAR47C,GAAsBA,EAAKv+C,YAAc+uC,GAC/B,mBAAVA,GAAwBoF,GAAYpF,GACvCmX,GAASnX,GAEXp/B,GAASo/B,GAAUsb,GAAWtb,OANdmX,GAgFrB8H,GAAUvN,IAAmB,GA2C7Bj4C,GAAYi4C,KAyBZ95C,GAAOg3C,GAAU,SAAS5O,EAAQvG,GACpC,GAAc,MAAVuG,EACF,SAEF,GAAuB,mBAAZvG,EAAM,GAAkB,CACjC,IAAIA,EAAQ0K,GAAS+D,GAAYzO,GAAQhC,IACzC,OAAOuf,GAAYhX,EAAQkH,GAAeqB,GAAOvI,GAASvG,IAE5D,IAAI6F,EAAYqG,GAAalM,EAAM,GAAIA,EAAM,GAAI,GACjD,OAAOwd,GAAejX,EAAQ,SAAS7sC,EAAOC,EAAK4sC,GACjD,OAAQV,EAAUnsC,EAAOC,EAAK4sC,OA2D9B/gC,GAAO2vC,GAAU,SAAS5O,EAAQvG,GACpC,OAAc,MAAVuG,KAGsB,mBAAZvG,EAAM,GAChBwd,GAAejX,EAAQ2F,GAAalM,EAAM,GAAIA,EAAM,GAAI,IACxDud,GAAYhX,EAAQkI,GAAYzO,MAuUlCvoC,GAAYw+C,GAAiB,SAAS/1C,EAAQ4M,EAAM4C,GAEtD,OADA5C,EAAOA,EAAK24C,cACLvlD,GAAUwP,EAAS5C,EAAK0gB,OAAO,GAAG7oB,cAAgBmI,EAAK0U,MAAM,GAAM1U,KA0JxE+gB,GAAYooB,GAAiB,SAAS/1C,EAAQ4M,EAAM4C,GACtD,OAAOxP,GAAUwP,EAAQ,IAAM,IAAM5C,EAAK24C,gBA+DxCC,GAAUtN,KAwBVuN,GAAWvN,IAAa,GAiGxBwN,GAAY3P,GAAiB,SAAS/1C,EAAQ4M,EAAM4C,GACtD,OAAOxP,GAAUwP,EAAQ,IAAM,IAAM5C,EAAK24C,gBAsBxCI,GAAY5P,GAAiB,SAAS/1C,EAAQ4M,EAAM4C,GACtD,OAAOxP,GAAUwP,EAAQ,IAAM,KAAO5C,EAAK0gB,OAAO,GAAG7oB,cAAgBmI,EAAK0U,MAAM,MA8e9EskC,GAAU3Q,GAAU,SAASpJ,EAAMv2B,GACrC,IACE,OAAOu2B,EAAK9xC,MAAMyT,EAAW8H,GAC7B,MAAMnM,GACN,OAAO82C,GAAQ92C,GAAKA,EAAI,IAAI/Q,GAAM+Q,MA4KlC3K,GAASy2C,GAAU,SAAS32C,EAAMgX,GACpC,OAAO,SAAS+wB,GACd,OAAOuW,GAAWvW,EAAQ/nC,EAAMgX,MA0BhCuwC,GAAW5Q,GAAU,SAAS5O,EAAQ/wB,GACxC,OAAO,SAAShX,GACd,OAAOs+C,GAAWvW,EAAQ/nC,EAAMgX,MA2VhC4Q,GAAOi0B,GAAY,QAsBnBnwC,GAAQmwC,GAAY,SAiDpB/vC,GAAMssC,GAAel4B,GAAIujC,IAiDzBp+C,GAAM+yC,GAAe4J,GAAIjX,IAsBzByc,GAAQ3L,GAAY,SA2hBxB,OA5eA3R,EAAOlxC,UAAYsxC,EAAWtxC,UAE9BoxC,GAAcpxC,UAAY6+C,GAAWvN,EAAWtxC,WAChDoxC,GAAcpxC,UAAU2C,YAAcyuC,GAEtCD,GAAYnxC,UAAY6+C,GAAWvN,EAAWtxC,WAC9CmxC,GAAYnxC,UAAU2C,YAAcwuC,GAGpCc,GAASjyC,UAAkB,OA38U3B,SAAmBmC,GACjB,OAAO7C,KAAKkH,IAAIrE,WAAe7C,KAAK4yC,SAAS/vC,IA28U/C8vC,GAASjyC,UAAUqF,IA/7UnB,SAAgBlD,GACd,MAAc,aAAPA,EAAqB+T,EAAY5W,KAAK4yC,SAAS/vC,IA+7UxD8vC,GAASjyC,UAAUwG,IAn7UnB,SAAgBrE,GACd,MAAc,aAAPA,GAAsBkF,GAAe5D,KAAKnE,KAAK4yC,SAAU/vC,IAm7UlE8vC,GAASjyC,UAAUD,IAt6UnB,SAAgBoC,EAAKD,GAInB,MAHW,aAAPC,IACF7C,KAAK4yC,SAAS/vC,GAAOD,GAEhB5C,MAq6UT6yC,GAASnyC,UAAUwC,KAx3UnB,SAAmBN,GACjB,IAAIyC,EAAOrF,KAAKqF,KACI,iBAATzC,GAAqByN,GAASzN,GACvCyC,EAAK5E,IAAI6J,IAAI1H,GAEbyC,EAAK0kC,KAAKnnC,IAAS,GAs3UvBmmD,GAAQG,MAAQvW,GAGhBf,EAAOhR,MAv8IP,SAAe5b,EAAGiwB,GAChB,GAAmB,mBAARA,EAAoB,CAC7B,GAAgB,mBAALjwB,EAKT,MAAM,IAAIyxB,GAAUC,GAJpB,IAAIqR,EAAO/iC,EACXA,EAAIiwB,EACJA,EAAO8S,EAMX,OADA/iC,EAAIm+B,GAAen+B,GAAKA,GAAKA,EAAI,EAC1B,WACL,KAAMA,EAAI,EACR,OAAOiwB,EAAK9xC,MAAMnD,KAAMmH,aA27I9ByqC,EAAOoQ,IAt6IP,SAAa/M,EAAMjwB,EAAGu5B,GAKpB,OAJIA,GAASC,GAAevJ,EAAMjwB,EAAGu5B,KACnCv5B,EAAIpO,GAENoO,EAAKiwB,GAAa,MAALjwB,EAAaiwB,EAAK3kC,OAASmtC,IAAWz4B,GAAK,EAAG,GACpD46B,GAAc3K,EAAMyL,EAAU9pC,EAAWA,EAAWA,EAAWA,EAAWoO,IAk6InF4sB,EAAOtsC,OAASA,GAChBssC,EAAOnnB,GAAKA,GACZmnB,EAAOkW,OAASA,GAChBlW,EAAO3rC,KAAOA,GACd2rC,EAAO6b,QAAUA,GACjB7b,EAAO8b,QAAUA,GACjB9b,EAAO3nC,SAAWA,GAClB2nC,EAAO3qB,MAAQA,GACf2qB,EAAOud,MAvtOP,SAAergB,EAAOz4B,EAAMkoC,GAExBloC,GADEkoC,EAAQC,GAAe1P,EAAOz4B,EAAMkoC,GAAiB,MAARloC,GACxC,EAEAonC,GAAU3C,GAAYzkC,IAAS,EAAG,GAO3C,IALA,IAAIuC,EAAQ,EACRtI,EAASw+B,EAAQA,EAAMx+B,OAAS,EAChC2gC,GAAY,EACZ7nC,EAAS4J,GAAMqwC,GAAW/yC,EAAS+F,IAEhCuC,EAAQtI,GACblH,IAAS6nC,GAAYkJ,GAAUrL,EAAOl2B,EAAQA,GAASvC,GAEzD,OAAOjN,GA0sOTwoC,EAAOwd,QAzrOP,SAAiBtgB,GAMf,IALA,IAAIl2B,GAAS,EACTtI,EAASw+B,EAAQA,EAAMx+B,OAAS,EAChC2gC,GAAY,EACZ7nC,OAEKwP,EAAQtI,GAAQ,CACvB,IAAI1N,EAAQksC,EAAMl2B,GACdhW,IACFwG,IAAS6nC,GAAYruC,GAGzB,OAAOwG,GA8qOTwoC,EAAOyd,SAhsBP,SAAkBzsD,GAChB,OAAO,WACL,OAAOA,IA+rBXgvC,EAAOob,QAAUA,GACjBpb,EAAO1uB,OAnjFP,SAAgBxiB,EAAWgJ,EAAY60C,GACrC,IAAIn1C,EAASm2C,GAAW7+C,GAIxB,OAHI69C,GAASC,GAAe99C,EAAWgJ,EAAY60C,KACjD70C,EAAakN,GAERlN,EAAa8qC,GAAWprC,EAAQM,GAAcN,GA+iFvDwoC,EAAO+b,MAAQA,GACf/b,EAAOgc,WAAaA,GACpBhc,EAAOoW,SAAWA,GAClBpW,EAAOtpC,SAAWA,GAClBspC,EAAOuc,aAAeA,GACtBvc,EAAOpvB,MAAQA,GACfovB,EAAOic,MAAQA,GACfjc,EAAOua,WAAaA,GACpBva,EAAOnT,KAAOA,GACdmT,EAAOsV,UAAYA,GACnBtV,EAAO0d,eA1iOP,SAAwBxgB,EAAOC,EAAWmG,GACxC,OAAQpG,GAASA,EAAMx+B,OACnBwrC,GAAUhN,EAAO0M,GAAYzM,EAAWmG,EAAS,IAAI,GAAM,OAyiOjEtD,EAAO2d,UAp/NP,SAAmBzgB,EAAOC,EAAWmG,GACnC,OAAQpG,GAASA,EAAMx+B,OACnBwrC,GAAUhN,EAAO0M,GAAYzM,EAAWmG,EAAS,IAAI,OAm/N3DtD,EAAO4d,KAn9NP,SAAc1gB,EAAOlsC,EAAO+c,EAAO9Q,GACjC,IAAIyB,EAASw+B,EAAQA,EAAMx+B,OAAS,EACpC,OAAKA,GAGDqP,GAAyB,iBAATA,GAAqB6+B,GAAe1P,EAAOlsC,EAAO+c,KACpEA,EAAQ,EACR9Q,EAAMyB,GAEDgnC,GAASxI,EAAOlsC,EAAO+c,EAAO9Q,QA28NvC+iC,EAAO/oC,OAASA,GAChB+oC,EAAO5uC,QA5zNP,SAAiB8rC,EAAO0G,EAAQ+I,GAC9B,IAAIjuC,EAASw+B,EAAQA,EAAMx+B,OAAS,EAIpC,OAHIiuC,GAASC,GAAe1P,EAAO0G,EAAQ+I,KACzC/I,GAAS,GAEJllC,EAASqnC,GAAY7I,EAAO0G,OAwzNrC5D,EAAO7gC,YAxyNP,SAAqB+9B,GAEnB,OADaA,EAAQA,EAAMx+B,OAAS,GACpBqnC,GAAY7I,GAAO,OAuyNrC8C,EAAOkc,KAAOA,GACdlc,EAAOmc,UAAYA,GACnBnc,EAAOrxC,QAAUA,GACjBqxC,EAAOsb,aAAeA,GACtBtb,EAAO0c,MAAQA,GACf1c,EAAO2c,WAAaA,GACpB3c,EAAO4c,OAASA,GAChB5c,EAAO6c,YAAcA,GACrB7c,EAAO+X,UAAYA,GACnB/X,EAAOub,QAAUA,GACjBvb,EAAOwb,QAAUA,GACjBxb,EAAOvS,QApvNP,SAAiByP,GACf,OAAOoY,GAAUpY,EAAO,IAovN1B8C,EAAO9tB,aAAeA,GACtB8tB,EAAO6d,OA9tEP,SAAgBhgB,EAAQigB,EAAYnR,GAC9BA,GAASC,GAAe/O,EAAQigB,EAAYnR,KAC9CmR,EAAa94C,GAOf,IALA,IAAIgC,GAAS,EACTswB,EAAQ7B,GAAKoI,GACbn/B,EAAS44B,EAAM54B,OACflH,OAEKwP,EAAQtI,GAAQ,CACvB,IAAIzN,EAAMqmC,EAAMtwB,GACZhW,EAAQ6sC,EAAO5sC,GAEf6sD,EACE3nD,GAAe5D,KAAKiF,EAAQxG,GAC9BwG,EAAOxG,GAAOM,KAAKL,GAEnBuG,EAAOxG,IAAUC,GAInBuG,EAAOxG,GAASC,EAGpB,OAAOuG,GAusETwoC,EAAOxvC,OAASA,GAChBwvC,EAAOvK,KAAOA,GACduK,EAAOoG,OAASA,GAChBpG,EAAOjvC,IAAMA,GACbivC,EAAO8c,QAAUA,GACjB9c,EAAO1oC,UAAYA,GACnB0oC,EAAOqY,QAAUA,GACjBrY,EAAO+d,gBA1pBP,SAAyBjoD,EAAMmyC,GAC7B,OAAOvE,GAAoB5tC,EAAM6tC,GAAUsE,GAAU,KA0pBvDjI,EAAOmX,QAAUA,GACjBnX,EAAOnwC,MAAQA,GACfmwC,EAAOhqC,OAASA,GAChBgqC,EAAOqd,SAAWA,GAClBrd,EAAOsY,MAAQA,GACftY,EAAOoc,QAAUA,GACjBpc,EAAOrpB,OA70HP,SAAgBwmB,GACd,GAAwB,mBAAbA,EACT,MAAM,IAAI0H,GAAUC,GAEtB,OAAO,WACL,OAAQ3H,EAAU5rC,MAAMnD,KAAMmH,aAy0HlCyqC,EAAOvqC,KAAOA,GACduqC,EAAOge,KArzHP,SAAc3a,GACZ,OAAO6S,GAAO,EAAG7S,IAqzHnBrD,EAAOiT,MAAQA,GACfjT,EAAOqc,QAAUA,GACjBrc,EAAOsc,aAAeA,GACtBtc,EAAO0b,UAAYA,GACnB1b,EAAOljC,KAAOA,GACdkjC,EAAO9Y,MAv/JP,SAAev2B,EAAYmF,GACzB,OAAO/E,GAAIJ,EAAYmG,GAAShB,KAu/JlCkqC,EAAOlpC,SAAWA,GAClBkpC,EAAOie,WAtcP,SAAoBpgB,GAClB,OAAO,SAAS/nC,GACd,OAAO0wC,GAAQ3I,EAAQyK,GAAOxyC,GAAOA,EAAO,MAqchDkqC,EAAOke,KA9nNP,WACE,IAAIpxC,EAAOvX,UACP2nC,EAAQpwB,EAAK,GAEjB,IAAMowB,IAASA,EAAMx+B,OACnB,OAAOw+B,EAMT,IAJA,IAAIl2B,EAAQ,EACR3P,EAAU2tC,KACVtmC,EAASoO,EAAKpO,SAETsI,EAAQtI,GAIf,IAHA,IAAI+yB,EAAY,EACZzgC,EAAQ8b,EAAK9F,IAETyqB,EAAYp6B,EAAQ6lC,EAAOlsC,EAAOygC,KAAe,GACvD3tB,GAAOvR,KAAK2qC,EAAOzL,EAAW,GAGlC,OAAOyL,GA4mNT8C,EAAO4a,OAASA,GAChB5a,EAAOtnB,MAlaP,SAAe3K,EAAO9Q,EAAKkhD,GACrBA,GAAQvR,GAAe7+B,EAAO9Q,EAAKkhD,KACrClhD,EAAMkhD,EAAOn5C,GAEf+I,GAASA,GAAS,EAClBowC,EAAe,MAARA,EAAe,GAAMA,GAAQ,EAEzB,MAAPlhD,GACFA,EAAM8Q,EACNA,EAAQ,GAER9Q,GAAOA,GAAO,EAQhB,IAJA,IAAI+J,GAAS,EACTtI,EAASmtC,GAAU4F,IAAYx0C,EAAM8Q,IAAUowC,GAAQ,IAAK,GAC5D3mD,EAAS4J,GAAM1C,KAEVsI,EAAQtI,GACflH,EAAOwP,GAAS+G,EAChBA,GAASowC,EAEX,OAAO3mD,GA4YTwoC,EAAO1pB,MAAQA,GACf0pB,EAAOliC,OAv5JP,SAAgBnN,EAAYwsC,EAAWmG,GACrC,IAAID,EAAO7zC,GAAQmB,GAAcoxC,GAAc4D,GAE/C,OADAxI,EAAYyM,GAAYzM,EAAWmG,EAAS,GACrCD,EAAK1yC,EAAY,SAASK,EAAOgW,EAAOrW,GAC7C,OAAQwsC,EAAUnsC,EAAOgW,EAAOrW,MAo5JpCqvC,EAAO9iC,OAriNP,SAAgBggC,EAAOC,EAAWmG,GAChC,IAAI9rC,KACJ,IAAM0lC,IAASA,EAAMx+B,OACnB,OAAOlH,EAET,IAAIwP,GAAS,EACTgiC,KACAtqC,EAASw+B,EAAMx+B,OAGnB,IADAy+B,EAAYyM,GAAYzM,EAAWmG,EAAS,KACnCt8B,EAAQtI,GAAQ,CACvB,IAAI1N,EAAQksC,EAAMl2B,GACdm2B,EAAUnsC,EAAOgW,EAAOk2B,KAC1B1lC,EAAOlG,KAAKN,GACZg4C,EAAQ13C,KAAK0V,IAIjB,OADA+hC,GAAW7L,EAAO8L,GACXxxC,GAohNTwoC,EAAOuV,KAAOA,GACdvV,EAAOyM,UAAYA,GACnBzM,EAAOnxC,IAx6DP,SAAagvC,EAAQ/nC,EAAM9E,GACzB,GAAc,MAAV6sC,EACF,OAAOA,EAUT,IALA,IAHI4I,EAAW3wC,EAAO,GAGlBkR,GAAS,EACTtI,GAHJ5I,EAA2B,MAAnB+nC,EAAO4I,IAAoB2B,GAAMtyC,EAAM+nC,IAAY4I,GAAW6B,GAAOxyC,IAG3D4I,OACd4qB,EAAY5qB,EAAS,EACrB0/C,EAASvgB,EAEI,MAAVugB,KAAoBp3C,EAAQtI,GAAQ,CACzC,IAAIzN,EAAM6E,EAAKkR,GACXvI,GAAS2/C,KACPp3C,GAASsiB,EACX80B,EAAOntD,GAAOD,EACU,MAAfotD,EAAOntD,KAChBmtD,EAAOntD,GAAOkyC,GAAQrtC,EAAKkR,EAAQ,YAGvCo3C,EAASA,EAAOntD,GAElB,OAAO4sC,GAk5DTmC,EAAOtvC,QA71JP,SAAiBC,GACf,OAAOqlD,GAAOrlD,EAAYkwC,KA61J5Bb,EAAOlnB,MAr/MP,SAAeokB,EAAOnvB,EAAO9Q,GAC3B,IAAIyB,EAASw+B,EAAQA,EAAMx+B,OAAS,EACpC,OAAKA,GAGDzB,GAAqB,iBAAPA,GAAmB2vC,GAAe1P,EAAOnvB,EAAO9Q,KAChE8Q,EAAQ,EACR9Q,EAAMyB,GAED6pC,GAAUrL,EAAOnvB,EAAO9Q,QA6+MjC+iC,EAAOjO,OAttJP,SAAgBphC,EAAY6uC,EAAU8D,GACpC,GAAkB,MAAd3yC,EACF,SAEE2yC,GAAWsJ,GAAej8C,EAAY6uC,EAAU8D,KAClD9D,EAAWx6B,GAEb,IAAIgC,GAAS,EAMb,OALAw4B,EAAWoK,GAAYpK,EAAU8D,EAAS,GAKnCiG,GAHMrB,GAAQv3C,EAAY,SAASK,EAAOC,EAAKN,GACpD,OAASmtC,SAAY0B,EAASxuC,EAAOC,EAAKN,GAAaqW,QAAWA,EAAOhW,MAASA,KAE1D4sC,IA0sJ5BoC,EAAO4b,UAAYA,GACnB5b,EAAOqe,YAxnJP,SAAqB1tD,EAAYg5C,EAAW3L,EAAQ2O,GAClD,OAAkB,MAAdh8C,MAGAg8C,GAASC,GAAejD,EAAW3L,EAAQ2O,KAC7C3O,EAASh5B,GAENxV,GAAQm6C,KACXA,EAAyB,MAAbA,MAA0BA,IAEnCn6C,GAAQwuC,KACXA,EAAmB,MAAVA,MAAuBA,IAE3B0L,GAAgB/4C,EAAYg5C,EAAW3L,KA4mJhDgC,EAAOse,OAnpHP,SAAgBjb,GACd,GAAmB,mBAARA,EACT,MAAM,IAAIwB,GAAUC,GAEtB,OAAO,SAAS5H,GACd,OAAOmG,EAAK9xC,MAAMnD,KAAM8uC,KA+oH5B8C,EAAOhsB,KA94MP,SAAckpB,EAAO9pB,EAAGu5B,GAEtB,OADazP,EAAQA,EAAMx+B,OAAS,KAIhCiuC,EAAQC,GAAe1P,EAAO9pB,EAAGu5B,GAAc,MAALv5B,KAC5CA,EAAI,GAECm1B,GAAUrL,EAAO,EAAG9pB,EAAI,EAAI,EAAIA,QAu4MzC4sB,EAAOue,UA52MP,SAAmBrhB,EAAO9pB,EAAGu5B,GAC3B,IAAIjuC,EAASw+B,EAAQA,EAAMx+B,OAAS,EACpC,OAAKA,IAGDiuC,EAAQC,GAAe1P,EAAO9pB,EAAGu5B,GAAc,MAALv5B,KAC5CA,EAAI,GAENA,EAAI1U,IAAW0U,GAAK,GACbm1B,GAAUrL,EAAO9pB,EAAI,EAAI,EAAIA,QAo2MtC4sB,EAAOwe,eAhzMP,SAAwBthB,EAAOC,EAAWmG,GACxC,OAAQpG,GAASA,EAAMx+B,OACnBwrC,GAAUhN,EAAO0M,GAAYzM,EAAWmG,EAAS,IAAI,GAAO,OA+yMlEtD,EAAOye,UA1vMP,SAAmBvhB,EAAOC,EAAWmG,GACnC,OAAQpG,GAASA,EAAMx+B,OACnBwrC,GAAUhN,EAAO0M,GAAYzM,EAAWmG,EAAS,QAyvMvDtD,EAAO0e,IAh5LP,SAAa1tD,EAAO8kD,EAAaxS,GAE/B,OADAwS,EAAYvjD,KAAK+wC,EAAStyC,GACnBA,GA+4LTgvC,EAAOxlC,SAzmHP,SAAkB6oC,EAAMuB,EAAM32C,GAC5B,IAAI+oD,GAAU,EACVF,GAAW,EAEf,GAAmB,mBAARzT,EACT,MAAM,IAAIwB,GAAUC,GAQtB,OANgB,IAAZ72C,EACF+oD,GAAU,EACDv4C,GAASxQ,KAClB+oD,EAAU,YAAa/oD,IAAYA,EAAQ+oD,QAAUA,EACrDF,EAAW,aAAc7oD,IAAYA,EAAQ6oD,SAAWA,GAEnDV,GAAS/S,EAAMuB,GAAQoS,QAAWA,EAASC,SAAYrS,EAAMkS,SAAYA,KA6lHlF9W,EAAOhN,KAAOA,GACdgN,EAAOnsB,MAjYP,SAAeT,EAAGosB,EAAU8D,GAK1B,IAJAlwB,EAAI81B,GAAY91B,IAIR,IAAMm+B,GAAen+B,GAC3B,SAEF,IAAIpM,GAAS,EACTxP,EAAS4J,GAAM4pC,GAAU53B,EAAGomC,KAGhC,IADAha,EAAWgE,GAAahE,EAAU8D,EAAS,KAClCt8B,EAAQoM,GACXpM,EAAQwyC,GACVhiD,EAAOwP,GAASw4B,EAASx4B,GAEzBw4B,EAASx4B,GAGb,OAAOxP,GA+WTwoC,EAAOvN,QAAUA,GACjBuN,EAAO4I,cAAgBA,GACvB5I,EAAOv6B,UAl4DP,SAAmBo4B,EAAQ2B,EAAU2C,EAAamB,GAChD,IAAIN,EAAQxzC,GAAQquC,IAAWuJ,GAAavJ,GAG5C,GAFA2B,EAAWoK,GAAYpK,EAAU8D,EAAS,GAEvB,MAAfnB,EACF,GAAIa,GAASvkC,GAASo/B,GAAS,CAC7B,IAAIwP,EAAOxP,EAAOpsC,YAEhB0wC,EADEa,EACYxzC,GAAQquC,GAAU,IAAIwP,KAEtBM,GAAWjsC,GAAW2rC,GAAQA,EAAKv+C,UAAYkW,QAG/Dm9B,KAMJ,OAHCa,EAAQtB,GAAY+C,IAAY5G,EAAQ,SAAS7sC,EAAOgW,EAAO62B,GAC9D,OAAO2B,EAAS2C,EAAanxC,EAAOgW,EAAO62B,KAEtCsE,GAg3DTnC,EAAO+a,MAAQA,GACf/a,EAAOwV,KAAOA,GACdxV,EAAO0V,MAAQA,GACf1V,EAAO4V,UAAYA,GACnB5V,EAAOkB,OAASA,GAChBlB,EAAO2e,SA9zDP,SAAkB9gB,GAChB,OAAOoM,GAAWpM,EAAQuI,GAAOvI,KA8zDnCmC,EAAOhoC,MA9lJP,SAAerH,EAAYkV,GACzB,OAAO5O,GAAOtG,EAAY8yC,GAAY59B,KA8lJxCm6B,EAAOgb,QAAUA,GACjBhb,EAAOppC,KAllHP,SAAc5F,EAAOiiB,GAEnB,OADAA,EAAqB,MAAXA,EAAkBggB,GAAWhgB,EAChC+6B,GAAc/6B,EAAS+7B,EAAchqC,GAAYhU,QAilH1DgvC,EAAO4e,IAjkMP,WAIE,IAHA,IAAI53C,GAAS,EACTtI,EAASnJ,UAAUmJ,SAEdsI,EAAQtI,GAAQ,CACvB,IAAIw+B,EAAQ3nC,UAAUyR,GACtB,GAAIi8B,GAAY/F,GACd,IAAI1lC,EAASA,EACTyqC,GAAU8C,GAAevtC,EAAQ0lC,GAAQ6H,GAAe7H,EAAO1lC,IAC/D0lC,EAGR,OAAO1lC,EAASsyC,GAAStyC,OAsjM3BwoC,EAAOib,IAAMA,GACbjb,EAAO6V,UAAYA,GACnB7V,EAAOkb,QAAUA,GAGjBlb,EAAO6e,SAAW1C,GAClBnc,EAAO8e,QAAU/tD,GACjBivC,EAAO+e,QAAU5C,GACjBnc,EAAO9uC,KAAOvC,GACdqxC,EAAOgf,UAAY1D,GACnBtb,EAAO/wC,OAASyE,GAChBssC,EAAOR,SAAWnnC,GAClB2nC,EAAOif,QAAUlH,GACjB/X,EAAOnC,OAASgY,GAChB7V,EAAOkf,OAASjoD,GAChB+oC,EAAOmf,KAAO5J,GACdvV,EAAOof,OAAS5J,GAGhB8C,GAAMtY,EAAQA,GAKdA,EAAOtnC,IA5WP,SAAa2mD,EAAQC,GACnB,QAASD,GAAU,KAAOC,GAAU,IA4WtCtf,EAAOod,QAAUA,GACjBpd,EAAOjxC,UAAYA,GACnBixC,EAAOuf,WAzsDP,SAAoB16B,GAElB,OADAA,EAAS2Y,EAAa3Y,KACJA,EAAOC,OAAO,GAAG7oB,cAAgB4oB,EAAO/L,MAAM,IAwsDlEknB,EAAOtiB,KAAOA,GACdsiB,EAAOlsB,MAvjHP,SAAe9iB,EAAO4yC,EAAQjB,EAAYW,GASxC,OARIM,GAA2B,kBAAVA,GAAuBgJ,GAAe57C,EAAO4yC,EAAQjB,GACxEiB,GAAS,EAEe,mBAAVA,IACdN,EAAUX,EACVA,EAAaiB,EACbA,GAAS,GAEiB,mBAAdjB,EACVgB,GAAU3yC,EAAO4yC,EAAQJ,GAAab,EAAYW,EAAS,IAC3DK,GAAU3yC,EAAO4yC,IA6iHvB5D,EAAOzmB,UA7/GP,SAAmBvoB,EAAO2xC,EAAYW,GACpC,MAA4B,mBAAdX,EACVgB,GAAU3yC,GAAO,EAAMwyC,GAAab,EAAYW,EAAS,IACzDK,GAAU3yC,GAAO,IA2/GvBgvC,EAAOyN,OAASA,GAChBzN,EAAOwf,SAjqDP,SAAkB36B,EAAQjkB,EAAQyB,GAEhCzB,GAAmB,GAEnB,IAAIlC,GAHJmmB,EAAS2Y,EAAa3Y,IAGFnmB,OAMpB,OALA2D,EAAWA,IAAa2C,EACpBtG,EACAssC,GAAU3oC,EAAW,EAAI,GAAMA,GAAY,EAAI3D,IAEnD2D,GAAYzB,EAAOlC,SACA,GAAKmmB,EAAOxtB,QAAQuJ,EAAQyB,IAAaA,GAwpD9D29B,EAAO4Z,OArnDP,SAAgB/0B,GAGd,OADAA,EAAS2Y,EAAa3Y,KACJ46B,GAAmBjhD,KAAKqmB,GACtCA,EAAO9oB,QAAQ2jD,GAAiBnhB,GAChC1Z,GAinDNmb,EAAO2f,aAhmDP,SAAsB96B,GAEpB,OADAA,EAAS2Y,EAAa3Y,KACJ+6B,GAAiBphD,KAAKqmB,GACpCA,EAAO9oB,QAAQ8jD,GAAenhB,GAC7B7Z,GAAU,QA6lDjBmb,EAAO5qC,MAAQA,GACf4qC,EAAO9oB,KAAOA,GACd8oB,EAAOwa,UAAYA,GACnBxa,EAAOwc,QAAUA,GACjBxc,EAAOqb,SAAWA,GAClBrb,EAAOya,cAAgBA,GACvBza,EAAOyc,YAAcA,GACrBzc,EAAO8f,UAz8KP,SAAmBnvD,EAAYkV,GAC7B,OAAOqR,GAAKvmB,EAAY8yC,GAAY59B,KAy8KtCm6B,EAAOvnB,MAAQA,GACfunB,EAAOx+B,MAAQA,GACfw+B,EAAO7rC,IA74EP,SAAa0pC,EAAQ/nC,EAAMiqD,GACzB,IAAIvoD,EAAmB,MAAVqmC,EAAiB74B,EAAYwhC,GAAQ3I,EAAQyK,GAAOxyC,GAAOA,EAAO,IAC/E,OAAO0B,IAAWwN,EAAY+6C,EAAevoD,GA44E/CwoC,EAAOhqB,GAAKA,GACZgqB,EAAO9pB,IA59GP,SAAallB,EAAO0rC,GAClB,OAAO1rC,GAAS0rC,GA49GlBsD,EAAO1qC,IAr3EP,SAAauoC,EAAQ/nC,GACnB,GAAc,MAAV+nC,EACF,OAAO,EAET,IAAIrmC,EAASrB,GAAe5D,KAAKsrC,EAAQ/nC,GACzC,IAAK0B,IAAW4wC,GAAMtyC,GAAO,CAG3B,GAFAA,EAAOwyC,GAAOxyC,GAEA,OADd+nC,EAAwB,GAAf/nC,EAAK4I,OAAcm/B,EAAS2I,GAAQ3I,EAAQ0K,GAAUzyC,EAAM,GAAI,KAEvE,OAAO,EAETA,EAAO/B,GAAK+B,GACZ0B,EAASrB,GAAe5D,KAAKsrC,EAAQ/nC,GAEvC,OAAO0B,GAAWu1C,GAASlP,EAAOn/B,SAAWykC,GAAQrtC,EAAM+nC,EAAOn/B,UAC/DlP,GAAQquC,IAAWoI,GAAYpI,KAu2EpCmC,EAAO/M,SAAWA,GAClB+M,EAAO+V,SAAWA,GAClB/V,EAAO3oC,QAAUA,GACjB2oC,EAAOggB,QAl1DP,SAAiBhvD,EAAO+c,EAAO9Q,GAQ7B,OAPA8Q,GAASA,GAAS,EACd9Q,IAAQ+H,GACV/H,EAAM8Q,EACNA,EAAQ,GAER9Q,GAAOA,GAAO,EAETjM,GAASg6C,GAAUj9B,EAAO9Q,IAAQjM,EAAQ66C,GAAU99B,EAAO9Q,IA20DpE+iC,EAAOiG,YAAcA,GACrBjG,EAAOxwC,QAAUA,GACjBwwC,EAAOigB,UAv6GP,SAAmBjvD,GACjB,OAAiB,IAAVA,IAA4B,IAAVA,GAAoBguC,EAAahuC,IAAUizC,GAAY1xC,KAAKvB,IAAUohD,GAu6GjGpS,EAAOkgB,OAp5GP,SAAgBlvD,GACd,OAAOguC,EAAahuC,IAAUizC,GAAY1xC,KAAKvB,IAAUqhD,GAo5G3DrS,EAAO1jC,UAj4GP,SAAmBtL,GACjB,QAASA,GAA4B,IAAnBA,EAAM4/B,UAAkBoO,EAAahuC,KAAW1B,GAAc0B,IAi4GlFgvC,EAAO1vB,QAn2GP,SAAiBtf,GACf,OAAa,MAATA,IAGAiyC,GAAYjyC,KAAWxB,GAAQwB,IAAUK,GAASL,IAAUi1C,GAAYj1C,IACvEguC,EAAahuC,IAAU0Q,GAAW1Q,EAAM8S,UACnC9S,EAAM0N,QAER+2B,GAAKzkC,GAAO0N,SA41GtBshC,EAAO9f,QAAUA,GACjB8f,EAAOyX,QAAUA,GACjBzX,EAAOlM,SAzvGP,SAAkB9iC,GAChB,MAAuB,iBAATA,GAAqBugD,GAAevgD,IAyvGpDgvC,EAAOt+B,WAAaA,GACpBs+B,EAAOmgB,QA9pGP,SAAiBtiB,EAAQh4B,EAAQ88B,EAAYW,GAE3C,OADAX,EAAkC,mBAAdA,EAA2Ba,GAAab,EAAYW,EAAS,GAAKt+B,EAC/E6iC,GAAYhK,EAAQsK,GAAatiC,GAAS88B,IA6pGnD3C,EAAOl7B,MAjoGP,SAAe9T,GAGb,OAAO2Q,GAAS3Q,IAAUA,IAAUA,GA+nGtCgvC,EAAOmT,SAAWA,GAClBnT,EAAOogB,OAnlGP,SAAgBpvD,GACd,OAAiB,OAAVA,GAmlGTgvC,EAAOr+B,SAAWA,GAClBq+B,EAAOvhC,SAAWA,GAClBuhC,EAAO1wC,cAAgBA,GACvB0wC,EAAO9K,SAAWA,GAClB8K,EAAO3uC,SAAWA,GAClB2uC,EAAOoH,aAAeA,GACtBpH,EAAO7oC,YA77FP,SAAqBnG,GACnB,OAAOA,IAAUgU,GA67FnBg7B,EAAO7a,UAAYA,GACnB6a,EAAOjsC,KAAOA,GACdisC,EAAOhF,YA9xNP,SAAqBkC,EAAOlsC,EAAOygC,GACjC,IAAI/yB,EAASw+B,EAAQA,EAAMx+B,OAAS,EACpC,IAAKA,EACH,OAAQ,EAEV,IAAIsI,EAAQtI,EACZ,GAAwB,iBAAb+yB,EACTzqB,GAASyqB,EAAY,EAAIoa,GAAUntC,EAAS+yB,EAAW,GAAKuZ,GAAUvZ,GAAa,EAAG/yB,EAAS,IAAM,OAChG,GAAI+yB,EAAW,CAEpB,IAAIiL,EAAQQ,EADZl2B,EAAQqjC,GAAYnN,EAAOlsC,GAAO,GAAQ,GAE1C,OAAIA,GAAUA,EAASA,IAAU0rC,EAAUA,GAAUA,GAC5C11B,GAED,EAEV,GAAIhW,GAAUA,EACZ,OAAOssC,EAAWJ,EAAOl2B,GAAO,GAElC,KAAOA,KACL,GAAIk2B,EAAMl2B,KAAWhW,EACnB,OAAOgW,EAGX,OAAQ,GAuwNVg5B,EAAO8X,GAAKA,GACZ9X,EAAOqgB,IAl5FP,SAAarvD,EAAO0rC,GAClB,OAAO1rC,GAAS0rC,GAk5FlBsD,EAAOp+B,IAAMA,GACbo+B,EAAO7kC,IAAMA,GACb6kC,EAAOsgB,WAjoBP,WAEE,OADAlT,GAAK1+C,EAAIsqD,GACF5qD,MAgoBT4xC,EAAO7qC,KAAOA,GACd6qC,EAAOp8B,IAAMA,GACbo8B,EAAOugB,IA9lDP,SAAa17B,EAAQnmB,EAAQg/B,GAE3Bh/B,GAAUA,EAEV,IAAI4yC,GAHJzsB,EAAS2Y,EAAa3Y,IAGCnmB,OACvB,GAAI4yC,GAAa5yC,IAAW6yC,GAAe7yC,GACzC,OAAOmmB,EAET,IAAI6lB,GAAOhsC,EAAS4yC,GAAa,EAC7BvF,EAAa7C,GAAYwB,GAI7B,OADAhN,EAAQiS,GAAc,GAFJ8B,GAAW/G,GAEUhN,IAC1B5kB,MAAM,EAAGizB,GAAclnB,EAAS6Y,GAklD/CsC,EAAOgd,QAAUA,GACjBhd,EAAOid,SAAWA,GAClBjd,EAAOsZ,SA1gDP,SAAkBz0B,EAAQ27B,EAAO7T,GAU/B,OANIA,EAAQC,GAAe/nB,EAAQ27B,EAAO7T,GAAkB,MAAT6T,GACjDA,EAAQ,EACCA,IACTA,GAASA,GAEX37B,EAAS4E,GAAK5E,GACPw0B,GAAex0B,EAAQ27B,IAAUC,GAAejiD,KAAKqmB,GAAU,GAAK,MAigD7Emb,EAAOv+B,OAh1DP,SAAgBtG,EAAKyG,EAAK8+C,GACpBA,GAAY9T,GAAezxC,EAAKyG,EAAK8+C,KACvC9+C,EAAM8+C,EAAW17C,GAEnB,IAAI27C,EAAe,MAAPxlD,EACRylD,EAAe,MAAPh/C,EAuBZ,GArBgB,MAAZ8+C,IACEE,GAAuB,kBAAPzlD,GAClBulD,EAAWvlD,EACXA,EAAM,GAEe,kBAAPyG,IACd8+C,EAAW9+C,EACXg/C,GAAQ,IAGRD,GAASC,IACXh/C,EAAM,EACNg/C,GAAQ,GAEVzlD,GAAOA,GAAO,EACVylD,GACFh/C,EAAMzG,EACNA,EAAM,GAENyG,GAAOA,GAAO,EAEZ8+C,GAAYvlD,EAAM,GAAKyG,EAAM,EAAG,CAClC,IAAIq0C,EAAO9M,KACX,OAAO6B,GAAU7vC,EAAO86C,GAAQr0C,EAAMzG,EAAMtB,GAAW,QAAUo8C,EAAO,IAAIv3C,OAAS,KAAOkD,GAE9F,OAAOqnC,GAAW9tC,EAAKyG,IAizDzBo+B,EAAOzoC,OAASA,GAChByoC,EAAO2b,YAAcA,GACrB3b,EAAOpsB,OAASA,GAChBosB,EAAOxoC,OApkEP,SAAgBqmC,EAAQ/nC,EAAMiqD,GAC5B,IAAIvoD,EAAmB,MAAVqmC,EAAiB74B,EAAY64B,EAAO/nC,GASjD,OARI0B,IAAWwN,IACC,MAAV64B,GAAmBuK,GAAMtyC,EAAM+nC,KAGjCrmC,EAAmB,OADnBqmC,EAAwB,IADxB/nC,EAAOwyC,GAAOxyC,IACA4I,OAAcm/B,EAAS2I,GAAQ3I,EAAQ0K,GAAUzyC,EAAM,GAAI,KAC/CkP,EAAY64B,EAAO9pC,GAAK+B,KAEpD0B,EAASA,IAAWwN,EAAY+6C,EAAevoD,GAE1CkK,GAAWlK,GAAUA,EAAOjF,KAAKsrC,GAAUrmC,GA2jEpDwoC,EAAOsd,MAAQA,GACftd,EAAOD,aAAeA,EACtBC,EAAOv7B,KA/7JP,SAAc9T,GACZ,IAAI+N,EAAS/N,EAAam8C,GAAUn8C,GAAc,EAClD,OAAOo8C,GAASruC,GAAUA,EAAS+2B,GAAK9kC,GAAY+N,QA87JtDshC,EAAOkd,UAAYA,GACnBld,EAAOt3B,KAAOA,GACds3B,EAAO6a,YAAcA,GACrB7a,EAAO8a,gBAAkBA,GACzB9a,EAAOmd,UAAYA,GACnBnd,EAAO6gB,WAh6CP,SAAoBh8B,EAAQjkB,EAAQyB,GAMlC,OALAwiB,EAAS2Y,EAAa3Y,GACtBxiB,EAAuB,MAAZA,EACP,EACA2oC,GAAU3oC,EAAW,EAAI,GAAMA,GAAY,EAAIwiB,EAAOnmB,QAEnDmmB,EAAOmW,YAAYp6B,EAAQyB,IAAaA,GA25CjD29B,EAAO8gB,IAlPP,SAAanwD,EAAY6uC,EAAU8D,GAKjC,OAJIA,GAAWsJ,GAAej8C,EAAY6uC,EAAU8D,KAClD9D,EAAWx6B,GAGa,IAD1Bw6B,EAAWoK,GAAYpK,EAAU8D,EAAS,IAC1B5kC,OACZ4jC,GAAS9yC,GAAQmB,GAAcA,EAAaw9C,GAAWx9C,GAAa6uC,GACpEqK,GAAQl5C,EAAY6uC,IA4O1BQ,EAAOprC,SAzzCP,SAAkBiwB,EAAQ52B,EAAS8yD,GAGjC,IAAIxyD,EAAWyxC,EAAO2Z,iBAElBoH,GAAgBnU,GAAe/nB,EAAQ52B,EAAS8yD,KAClD9yD,EAAU8yD,EAAe/7C,GAE3B6f,EAAS2Y,EAAa3Y,GAGtB,IAIIm8B,EACAC,EALA/G,EAAUxX,GAAWE,OAFzB30C,EAAUy0C,GAAWE,MAAeme,GAAgB9yD,GAAUM,EAAUg0C,KAExB2X,SAAU3rD,EAAS2rD,QAAS3X,IACxE2e,EAAczrB,GAAKykB,GACnBiH,EAAgBlX,GAAWiQ,EAASgH,GAIpCl6C,EAAQ,EACR+yC,EAAc9rD,EAAQ8rD,aAAeqH,GACrCv7C,EAAS,WAGTw7C,EAAe93B,IAChBt7B,EAAQ2rD,QAAUwH,IAAWv7C,OAAS,IACvCk0C,EAAYl0C,OAAS,KACpBk0C,IAAgBC,GAAgBsH,GAAeF,IAAWv7C,OAAS,KACnE5X,EAAQ0b,UAAYy3C,IAAWv7C,OAAS,KACzC,KAGE07C,EAAY,kBACb,cAAetzD,EACZA,EAAQszD,UACP,6BAA+BC,GAAmB,KACnD,KAEN38B,EAAO9oB,QAAQslD,EAAc,SAASlM,EAAOsM,EAAaC,EAAkBC,EAAiBC,EAAen2B,GAsB1G,OArBAi2B,IAAqBA,EAAmBC,GAGxC97C,GAAUgf,EAAO/L,MAAM9R,EAAOykB,GAAQ1vB,QAAQ8lD,GAAmB9iB,GAG7D0iB,IACFT,GAAa,EACbn7C,GAAU,YAAc47C,EAAc,UAEpCG,IACFX,GAAe,EACfp7C,GAAU,OAAS+7C,EAAgB,eAEjCF,IACF77C,GAAU,iBAAmB67C,EAAmB,+BAElD16C,EAAQykB,EAAS0pB,EAAMz2C,OAIhBy2C,IAGTtvC,GAAU,OAIV,IAAIo0C,EAAWhsD,EAAQgsD,SAClBA,IACHp0C,EAAS,iBAAmBA,EAAS,SAGvCA,GAAUo7C,EAAep7C,EAAO9J,QAAQ+lD,GAAsB,IAAMj8C,GACjE9J,QAAQgmD,GAAqB,MAC7BhmD,QAAQimD,GAAuB,OAGlCn8C,EAAS,aAAeo0C,GAAY,OAAS,SAC1CA,EACG,GACA,wBAEJ,qBACC+G,EACI,mBACA,KAEJC,EACG,uFAEA,OAEJp7C,EACA,gBAEF,IAAIrO,EAAS4lD,GAAQ,WACnB,OAAO1E,GAASwI,EAAaK,EAAY,UAAY17C,GAAQtU,MAAMyT,EAAWm8C,KAMhF,GADA3pD,EAAOqO,OAASA,EACZ4xC,GAAQjgD,GACV,MAAMA,EAER,OAAOA,GAmtCTwoC,EAAOvW,KAAOA,GACduW,EAAOiiB,SA7pCP,SAAkBp9B,EAAQ6Y,EAAOiP,GAC/B,IAAI37C,EAAQ6zB,EAEZ,OADAA,EAAS2Y,EAAa3Y,KAIlB8nB,EAAQC,GAAe57C,EAAO0sC,EAAOiP,GAAkB,MAATjP,GACzC7Y,EAAO/L,MAAM6mB,EAAiB9a,IAEhCA,EAAO/L,MAAM2kB,EAAe5Y,EAAS6Y,EAAQ,KAL3C7Y,GA0pCXmb,EAAOkiB,UAhoCP,SAAmBr9B,EAAQ6Y,EAAOiP,GAChC,IAAI37C,EAAQ6zB,EAEZ,OADAA,EAAS2Y,EAAa3Y,KAIlB8nB,EAAQC,GAAe57C,EAAO0sC,EAAOiP,GAAkB,MAATjP,GACzC7Y,EAAO/L,MAAM,EAAG8mB,EAAkB/a,GAAU,GAE9CA,EAAO/L,MAAM,EAAG6kB,EAAgB9Y,EAAS6Y,EAAQ,IAAO,GALtD7Y,GA6nCXmb,EAAOmiB,MA7kCP,SAAet9B,EAAQ52B,EAAS0+C,GAC1BA,GAASC,GAAe/nB,EAAQ52B,EAAS0+C,KAC3C1+C,EAAU+W,GAEZ,IAAItG,EAAS0jD,EACTC,EAAWC,EAEf,GAAe,MAAXr0D,EACF,GAAIwQ,GAASxQ,GAAU,CACrB,IAAIs0D,EAAY,cAAet0D,EAAUA,EAAQs0D,UAAYA,EAC7D7jD,EAAS,WAAYzQ,GAAYA,EAAQyQ,QAAU,EAAKA,EACxD2jD,EAAW,aAAcp0D,EAAUuvC,EAAavvC,EAAQo0D,UAAYA,OAEpE3jD,GAAUzQ,GAAW,EAIzB,GADA42B,EAAS2Y,EAAa3Y,GAClBnmB,GAAUmmB,EAAOnmB,OACnB,OAAOmmB,EAET,IAAI5nB,EAAMyB,EAAS2jD,EAAS3jD,OAC5B,GAAIzB,EAAM,EACR,OAAOolD,EAET,IAAI7qD,EAASqtB,EAAO/L,MAAM,EAAG7b,GAC7B,GAAiB,MAAbslD,EACF,OAAO/qD,EAAS6qD,EAElB,GAAIntB,GAASqtB,IACX,GAAI19B,EAAO/L,MAAM7b,GAAKulD,OAAOD,GAAY,CACvC,IAAIpN,EACAsN,EACA1nB,EAAYlW,EAAO/L,MAAM,EAAG7b,GAMhC,IAJKslD,EAAUzyD,SACbyyD,EAAYh5B,GAAOg5B,EAAU18C,QAASquC,GAAQC,KAAKoO,IAAc,IAAM,MAEzEA,EAAUj5B,UAAY,EACd6rB,EAAQoN,EAAUpO,KAAKpZ,IAC7B0nB,EAAStN,EAAMnuC,MAEjBxP,EAASA,EAAOshB,MAAM,EAAa,MAAV2pC,EAAiBxlD,EAAMwlD,SAE7C,GAAI59B,EAAOxtB,QAAQkrD,EAAWtlD,IAAQA,EAAK,CAChD,IAAI+J,EAAQxP,EAAOwjC,YAAYunB,GAC3Bv7C,GAAS,IACXxP,EAASA,EAAOshB,MAAM,EAAG9R,IAG7B,OAAOxP,EAAS6qD,GA6hClBriB,EAAO0iB,SAxgCP,SAAkB79B,GAEhB,OADAA,EAAS2Y,EAAa3Y,KACJ89B,GAAiBnkD,KAAKqmB,GACpCA,EAAO9oB,QAAQ6mD,GAAe/iB,GAC9Bhb,GAqgCNmb,EAAO91B,SAtdP,SAAkB24C,GAChB,IAAIhhC,IAAOk3B,GACX,OAAOvb,EAAaqlB,GAAUhhC,GAqdhCme,EAAOwN,MAAQA,GAGfxN,EAAO1/B,IAAMlL,GACb4qC,EAAO8iB,IAAMp6C,GACbs3B,EAAO16B,SAAWywC,GAClB/V,EAAOpqB,GAAKsK,GACZ8f,EAAO+iB,OAAS7rC,GAChB8oB,EAAOgjB,MAAQzrD,GACfyoC,EAAOijB,MAAQtH,GACf3b,EAAO3F,KAAO5hB,GACdunB,EAAOkjB,QAAUnN,GACjB/V,EAAOmjB,OAAS5rD,GAEhB+gD,GAAMtY,EAAS,WACb,IAAIn6B,KAMJ,OALA4+B,GAAWzE,EAAQ,SAASqD,EAAMuO,GAC3B5R,EAAOlxC,UAAU8iD,KACpB/rC,EAAO+rC,GAAcvO,KAGlBx9B,MACH,GAKNm6B,EAAOgW,OAASA,GAEhBhW,EAAOlxC,UAAUknD,OAAS,SAAS5iC,GACjC,OAAKhlB,KAAKoyC,WAAkB,MAALptB,EAGhBhlB,KAAK4kC,KAAK,SAAShiC,GACxB,OAAOglD,GAAOhlD,EAAOoiB,KAHd4iC,GAAO5nD,KAAK4C,UAgBvBgvC,EAAOojB,QAAUA,EAGjB1hB,IAAW,OAAQ,UAAW,QAAS,aAAc,UAAW,gBAAiB,SAASkQ,GACxF5R,EAAO4R,GAAYxS,YAAcY,IAInC0B,IAAW,OAAQ,QAAS,SAASkQ,EAAY5qC,GAC/Ci5B,GAAYnxC,UAAU8iD,GAAc,SAASx+B,GAC3C,IAAIiwC,EAAWj1D,KAAKsyC,aACpB,GAAI2iB,IAAar8C,EACf,OAAO,IAAIi5B,GAAY7xC,MAEzBglB,EAAS,MAALA,EAAY,EAAIy4B,GAAU3C,GAAY91B,IAAM,EAAG,GAEnD,IAAI5b,EAASpJ,KAAK0lB,QAMlB,OALIuvC,EACF7rD,EAAOopC,cAAgBoK,GAAUxzC,EAAOopC,cAAextB,GAEvD5b,EAAOspC,UAAUxvC,MAAOmT,KAAQ2O,EAAG/kB,KAAQujD,GAAcp6C,EAAOipC,QAAU,EAAI,QAAU,MAEnFjpC,GAGTyoC,GAAYnxC,UAAU8iD,EAAa,SAAW,SAASx+B,GACrD,OAAOhlB,KAAKkkB,UAAUs/B,GAAYx+B,GAAGd,aAKzCovB,IAAW,SAAU,MAAO,aAAc,SAASkQ,EAAY5qC,GAC7D,IAAI3Y,EAAO2Y,EAAQ,EACfs8C,EAAWj1D,GAAQk1D,EAEvBtjB,GAAYnxC,UAAU8iD,GAAc,SAASpS,EAAU8D,GACrD,IAAI9rC,EAASpJ,KAAK0lB,QAGlB,OAFAtc,EAAOmpC,cAAcrvC,MAAOkuC,SAAYoK,GAAYpK,EAAU8D,EAAS,GAAIj1C,KAAQA,IACnFmJ,EAAOkpC,aAAelpC,EAAOkpC,cAAgB4iB,EACtC9rD,KAKXkqC,IAAW,QAAS,QAAS,SAASkQ,EAAY5qC,GAChD,IAAIw8C,EAAW,QAAUx8C,EAAQ,QAAU,IAE3Ci5B,GAAYnxC,UAAU8iD,GAAc,WAClC,OAAOxjD,KAAKo1D,GAAU,GAAGxyD,QAAQ,MAKrC0wC,IAAW,UAAW,QAAS,SAASkQ,EAAY5qC,GAClD,IAAIy8C,EAAW,QAAUz8C,EAAQ,GAAK,SAEtCi5B,GAAYnxC,UAAU8iD,GAAc,WAClC,OAAOxjD,KAAKsyC,aAAe,IAAIT,GAAY7xC,MAAQA,KAAKq1D,GAAU,MAKtE/hB,IAAW,QAAS,SAAU,SAASkQ,EAAY5qC,GACjD,IAAI08C,EAAgB18C,EAAQ,SAAW,MACnC28C,EAAiB38C,EAAQy8B,GAAc3sC,GAE3CmpC,GAAYnxC,UAAU8iD,GAAc,SAAS5gD,GAC3C,OAAO5C,KAAKs1D,GAAeC,EAAe3yD,OAI9CivC,GAAYnxC,UAAU0uD,QAAU,WAC9B,OAAOpvD,KAAK6I,OAAOg8B,KAGrBgN,GAAYnxC,UAAUgP,OAAS,SAASq/B,EAAWmG,GAEjD,OADAnG,EAAYyM,GAAYzM,EAAWmG,EAAS,GACrCl1C,KAAK6I,OAAO,SAASjG,GAC1B,OAAQmsC,EAAUnsC,MAItBivC,GAAYnxC,UAAUgqB,MAAQ,SAAS/K,EAAO9Q,GAC5C8Q,EAAiB,MAATA,EAAgB,GAAMA,GAAS,EAEvC,IAAIvW,EAASpJ,KACb,OAAIoJ,EAAOkpC,eAAiB3yB,EAAQ,GAAK9Q,EAAM,GACtC,IAAIgjC,GAAYzoC,IAErBuW,EAAQ,EACVvW,EAASA,EAAO+mD,WAAWxwC,GAClBA,IACTvW,EAASA,EAAOq1B,KAAK9e,IAEnB9Q,IAAQ+H,IAEVxN,GADAyF,GAAQA,GAAO,GACA,EAAIzF,EAAO89C,WAAWr4C,GAAOzF,EAAOwc,KAAK/W,EAAM8Q,IAEzDvW,IAGTyoC,GAAYnxC,UAAU0vD,eAAiB,SAASrhB,EAAWmG,GACzD,OAAOl1C,KAAKkkB,UAAUmsC,UAAUthB,EAAWmG,GAAShxB,WAGtD2tB,GAAYnxC,UAAU2jC,QAAU,WAC9B,OAAOrkC,KAAK4lB,KAAK6sB,KAInB4D,GAAWxE,GAAYnxC,UAAW,SAASu0C,EAAMuO,GAC/C,IAAIgS,EAAgB,gCAAgCplD,KAAKozC,GACrDiS,EAAe,mBAAmBrlD,KAAKozC,GACvCkS,EAAa9jB,EAAO6jB,EAAgB,QAAwB,QAAdjS,EAAuB,QAAU,IAAOA,GAErFkS,IAGL9jB,EAAOlxC,UAAU8iD,GAAc,WAC7B,IAAI9kC,EAAO+2C,GAAgB,GAAKtuD,UAC5B8qC,EAAWjyC,KAAKoyC,UAChBxvC,EAAQ5C,KAAKkyC,YACbyjB,IAAa31D,KAAKmyC,YAAY7hC,OAC9BslD,EAAShzD,aAAiBivC,GAC1BT,EAAW1yB,EAAK,GAChBm3C,EAAUD,GAAUx0D,GAAQwB,GAE5BizD,GAAWL,GAAoC,mBAAZpkB,GAA6C,GAAnBA,EAAS9gC,SAExEslD,EAASC,GAAU,GAErB,IAAInO,EAAc,SAAS9kD,GACzB,OAAQ6yD,GAAgBxjB,EACpByjB,EAAW9yD,EAAO,GAAG,GACrB8yD,EAAWvyD,MAAMyT,EAAWi9B,IAAWjxC,GAAQ8b,KAGjD5D,GAAWm6B,KAAQrQ,GAAMlmB,MAASgpC,GAAcxS,QAAWt+B,GAC3Dk/C,EAAWF,IAAWD,EAE1B,GAAIF,IAAiBxjB,EACnB,OAAI6jB,IACFlzD,EAAQA,EAAM8iB,SACRysB,YAAYjvC,KAAK4X,GAChBm6B,EAAK9wC,KAAKvB,IAEZ8yD,EAAWvxD,KAAKyS,EAAW5W,KAAK4C,SAAS,GAElD,IAAK6yD,GAAgBI,EAAS,CAC5BjzD,EAAQkzD,EAAWlzD,EAAQ,IAAIivC,GAAY7xC,MAC3C,IAAIoJ,EAAS6rC,EAAK9xC,MAAMP,EAAO8b,GAE/B,OADAtV,EAAO+oC,YAAYjvC,KAAK4X,GACjB,IAAIg3B,GAAc1oC,EAAQ6oC,GAEnC,OAAOjyC,KAAK4kC,KAAK8iB,OAKrBpU,IAAW,OAAQ,MAAO,OAAQ,UAAW,QAAS,OAAQ,SAAU,QAAS,WAAY,SAASkQ,GACpG,IAAIvO,GAAQ,sBAAsB7kC,KAAKozC,GAAckH,GAAcF,IAAYhH,GAC3EuS,EAAY,0BAA0B3lD,KAAKozC,GAAc,MAAQ,OACjEiS,EAAe,+BAA+BrlD,KAAKozC,GAEvD5R,EAAOlxC,UAAU8iD,GAAc,WAC7B,IAAI9kC,EAAOvX,UACX,OAAIsuD,IAAiBz1D,KAAKoyC,UACjB6C,EAAK9xC,MAAMnD,KAAK4C,QAAS8b,GAE3B1e,KAAK+1D,GAAW,SAASnzD,GAC9B,OAAOqyC,EAAK9xC,MAAMP,EAAO8b,QAM/B23B,GAAWxE,GAAYnxC,UAAW,SAASu0C,EAAMuO,GAC/C,IAAIkS,EAAa9jB,EAAO4R,GACxB,GAAIkS,EAAY,CACd,IAAI7yD,EAAM6yD,EAAWx1D,MACTykD,GAAU9hD,KAAS8hD,GAAU9hD,QAEnCK,MAAOhD,KAAQsjD,EAAYvO,KAAQygB,OAI7C/Q,GAAUhD,GAAoB/qC,EAAW6rC,GAAeviD,QAAWA,KAAQ,UAAW+0C,KAAQr+B,IAG9Fi7B,GAAYnxC,UAAUglB,MA1gWtB,WACE,IAAItc,EAAS,IAAIyoC,GAAY7xC,KAAKkyC,aAOlC,OANA9oC,EAAO+oC,YAAckB,GAAUrzC,KAAKmyC,aACpC/oC,EAAOipC,QAAUryC,KAAKqyC,QACtBjpC,EAAOkpC,aAAetyC,KAAKsyC,aAC3BlpC,EAAOmpC,cAAgBc,GAAUrzC,KAAKuyC,eACtCnpC,EAAOopC,cAAgBxyC,KAAKwyC,cAC5BppC,EAAOspC,UAAYW,GAAUrzC,KAAK0yC,WAC3BtpC,GAmgWTyoC,GAAYnxC,UAAUwjB,QAx/VtB,WACE,GAAIlkB,KAAKsyC,aAAc,CACrB,IAAIlpC,EAAS,IAAIyoC,GAAY7xC,MAC7BoJ,EAAOipC,SAAW,EAClBjpC,EAAOkpC,cAAe,OAEtBlpC,EAASpJ,KAAK0lB,SACP2sB,UAAY,EAErB,OAAOjpC,GAg/VTyoC,GAAYnxC,UAAUkC,MAr+VtB,WACE,IAAIksC,EAAQ9uC,KAAKkyC,YAAYtvC,QACzBozD,EAAMh2D,KAAKqyC,QACXuC,EAAQxzC,GAAQ0tC,GAChBmnB,EAAUD,EAAM,EAChBnS,EAAYjP,EAAQ9F,EAAMx+B,OAAS,EACnC4lD,EAAOlR,GAAQ,EAAGnB,EAAW7jD,KAAK0yC,WAClC/yB,EAAQu2C,EAAKv2C,MACb9Q,EAAMqnD,EAAKrnD,IACXyB,EAASzB,EAAM8Q,EACf/G,EAAQq9C,EAAUpnD,EAAO8Q,EAAQ,EACjC47B,EAAYv7C,KAAKuyC,cACjB4jB,EAAa5a,EAAUjrC,OACvB2gC,EAAW,EACXmlB,EAAYxZ,GAAUtsC,EAAQtQ,KAAKwyC,eAEvC,IAAKoC,GAASiP,EAAY/M,GAAqB+M,GAAavzC,GAAU8lD,GAAa9lD,EACjF,OAAO0rC,GAAkBia,GAAWrhB,EAAS9F,EAAM5qB,UAAY4qB,EAAO9uC,KAAKmyC,aAE7E,IAAI/oC,KAEJ6tC,EACA,KAAO3mC,KAAY2gC,EAAWmlB,GAAW,CAMvC,IAHA,IAAIC,GAAa,EACbzzD,EAAQksC,EAHZl2B,GAASo9C,KAKAK,EAAYF,GAAY,CAC/B,IAAI9wD,EAAOk2C,EAAU8a,GACjBjlB,EAAW/rC,EAAK+rC,SAChBnxC,EAAOoF,EAAKpF,KACZqxC,EAAWF,EAASxuC,GAExB,GAAI3C,GAAQk1D,EACVvyD,EAAQ0uC,OACH,IAAKA,EAAU,CACpB,GAAIrxC,GAAQq2D,EACV,SAASrf,EAET,MAAMA,GAIZ7tC,EAAO6nC,KAAcruC,EAEvB,OAAOwG,GA07VTwoC,EAAOlxC,UAAUumB,MAzsMjB,WACE,OAAOA,GAAMjnB,OAysMf4xC,EAAOlxC,UAAU61D,OA7qMjB,WACE,OAAO,IAAIzkB,GAAc9xC,KAAK4C,QAAS5C,KAAKoyC,YA6qM9CR,EAAOlxC,UAAUW,OAAS0rD,GAC1Bnb,EAAOlxC,UAAUogD,MAznMjB,SAAsBl+C,GAIpB,IAHA,IAAIwG,EACA6hB,EAASjrB,KAENirB,aAAkB+mB,GAAY,CACnC,IAAItsB,EAAQqsB,GAAa9mB,GACrB7hB,EACFohB,EAAS0nB,YAAcxsB,EAEvBtc,EAASsc,EAEX,IAAI8E,EAAW9E,EACfuF,EAASA,EAAOinB,YAGlB,OADA1nB,EAAS0nB,YAActvC,EAChBwG,GA2mMTwoC,EAAOlxC,UAAUwjB,QAplMjB,WACE,IAAIthB,EAAQ5C,KAAKkyC,YAEbwV,EAAc,SAAS9kD,GACzB,OAAQ4zD,GAAWA,EAAQnkB,QAAU,EAAKzvC,EAAQA,EAAMshB,WAE1D,GAAIthB,aAAiBivC,GAAa,CAChC,IAAI2kB,EAAU5zD,EAMd,OALI5C,KAAKmyC,YAAY7hC,SACnBkmD,EAAU,IAAI3kB,GAAY7xC,QAE5Bw2D,EAAUA,EAAQtyC,WACViuB,YAAYjvC,MAAO+xC,KAAQrQ,GAAMlmB,MAASgpC,GAAcxS,QAAWt+B,IACpE,IAAIk7B,GAAc0kB,EAASx2D,KAAKoyC,WAEzC,OAAOpyC,KAAK4kC,KAAK8iB,IAskMnB9V,EAAOlxC,UAAUmU,SAvjMjB,WACE,OAAQ7U,KAAK4C,QAAU,IAujMzBgvC,EAAOlxC,UAAU+1D,IAAM7kB,EAAOlxC,UAAUg2D,OAAS9kB,EAAOlxC,UAAUi2D,QAAU/kB,EAAOlxC,UAAUkC,MAviM7F,WACE,OAAOo5C,GAAiBh8C,KAAKkyC,YAAalyC,KAAKmyC,cAyiMjDP,EAAOlxC,UAAUgwD,QAAU9e,EAAOlxC,UAAUiC,IAC5CivC,EAAOlxC,UAAUurC,KAAO2F,EAAOlxC,UAAU2pB,MACzCunB,EAAOlxC,UAAUowD,OAASlf,EAAOlxC,UAAUmI,OAC3C+oC,EAAOlxC,UAAUqwD,KAAOnf,EAAOlxC,UAAUymD,KAElCvV,EA7gYT,IAAIh7B,EAGAo+C,EAAU,SAGVxS,EAAY,EACZC,EAAgB,EAChBO,EAAmB,EACnBrC,EAAa,EACbsC,EAAmB,GACnBrC,EAAe,GACf0B,EAAqB,GACrB5B,EAAW,IACXG,EAAa,IAGbmT,EAAuB,GACvBE,EAAyB,MAGzBhI,EAAY,IACZD,EAAW,GAGXnV,EAAmB,IAGnBwf,EAAmB,EACnBnB,EAAgB,EAGhBze,EAAkB,sBAGlBxF,EAAc,yBAGd+E,EAAU,qBACV6C,EAAW,iBACXkL,EAAU,mBACVC,EAAU,gBACVC,EAAW,iBACXnO,EAAU,oBAEVoO,EAAY,kBACZnO,EAAY,kBACZoO,EAAY,kBAEZC,EAAY,kBAGZc,GAAiB,uBACjBC,GAAa,wBACbC,GAAa,wBACbC,GAAU,qBACVC,GAAW,sBACXC,GAAW,sBACXC,GAAW,sBACXC,GAAkB,6BAClBC,GAAY,uBACZC,GAAY,uBAGZ8N,GAAuB,iBACvBC,GAAsB,qBACtBC,GAAwB,gCAGxBY,GAAgB,gCAChBlD,GAAkB,YAClBiD,GAAmBp5B,OAAOq5B,GAAc/8C,QACxC45C,GAAqBl2B,OAAOm2B,GAAgB75C,QAG5Cg0C,GAAW,mBACXC,GAAa,kBACbE,GAAgB,mBAGhBxF,GAAe,qDACfD,GAAgB,QAChBW,GAAa,wEAMb2K,GAAgB,yEAChBD,GAAmBr2B,OAAOs2B,GAAch6C,QAGxCsyC,GAAc,gCAGd9C,GAAe,WAGfiM,GAAe,kCAGfpN,GAAU,OAGVuM,GAAiB,SAGjB7I,GAAe,8BAGfvD,GAAW,QAGX6D,GAAW,0CAGXkJ,GAAY,OAGZS,GAAoB,yBAGpBzJ,GAAW,WACb,IAAI4M,EAAQ,8BACRC,EAAQ,+BAEZ,OAAO17B,OAAOy7B,EAAQ,OAASA,EAAQC,EAAQ,KAAOD,EAAQ,IAAMC,EAAQ,IAAMD,EAAQ,WAAY,QAIpGvM,IACF,QAAS,cAAe,OAAQ,QAAS,eAAgB,eACzD,WAAY,YAAa,aAAc,aAAc,OAAQ,SAC7D,SAAU,SAAU,MAAO,SAAU,IAAK,eAAgB,WAC1D,aAAc,WAAY,aAAc,YAAa,aACrD,oBAAqB,cAAe,cAAe,WAIjD+I,IAAmB,EAGnB3J,MACJA,GAAerE,IAAcqE,GAAepE,IAC5CoE,GAAenE,IAAWmE,GAAelE,IACzCkE,GAAejE,IAAYiE,GAAehE,IAC1CgE,GAAe/D,IAAmB+D,GAAe9D,IACjD8D,GAAe7D,KAAa,EAC5B6D,GAAexT,GAAWwT,GAAe3Q,GACzC2Q,GAAetE,IAAkBsE,GAAezF,GAChDyF,GAAexF,GAAWwF,GAAevF,GACzCuF,GAAe1T,GAAW0T,GA3Gb,gBA4GbA,GAAetF,GAAasF,GAAezT,GAC3CyT,GAAerF,GAAaqF,GAzGf,gBA0GbA,GAAepF,GAAaoF,GAxGX,qBAwGwC,EAGzD,IAAIvT,MACJA,GAAcD,GAAWC,GAAc4C,GACvC5C,GAAciP,IAAkBjP,GAAc8N,GAC9C9N,GAAc+N,GAAW/N,GAAckP,IACvClP,GAAcmP,IAAcnP,GAAcoP,IAC1CpP,GAAcqP,IAAYrP,GAAcsP,IACxCtP,GAAciO,GAAajO,GAAcF,GACzCE,GAAckO,GAAalO,GAAcmO,GACzCnO,GAAcuP,IAAYvP,GAAcwP,IACxCxP,GAAcyP,IAAazP,GAAc0P,KAAa,EACtD1P,GAAcgO,GAAYhO,GAAcH,GACxCG,GA5Ha,gBA4HWA,GAxHX,gBAyHbA,GAvHiB,qBAuHW,EAG5B,IAAIhG,IACF4mB,IAAQ,IAAMC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAC1EC,IAAQ,IAAMC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAC1EC,IAAQ,IAAMC,IAAQ,IACtBC,IAAQ,IAAMC,IAAQ,IACtBC,IAAQ,IAAMC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAChDC,IAAQ,IAAMC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAChDC,IAAQ,IAAMC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAChDC,IAAQ,IAAMC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAChDC,IAAQ,IAAMC,IAAQ,IACtBC,IAAQ,IAAMC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAC1EC,IAAQ,IAAMC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAC1EC,IAAQ,IAAMC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAChDC,IAAQ,IAAMC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAChDC,IAAQ,IAAMC,IAAQ,IAAKC,IAAQ,IACnCC,IAAQ,KAAMC,IAAQ,KACtBC,IAAQ,KAAMC,IAAQ,KACtBC,IAAQ,MAINtqB,IACFuqB,IAAK,QACLC,IAAK,OACLC,IAAK,OACLC,IAAK,SACLC,IAAK,QACLC,IAAK,SAIHvpB,IACFwpB,QAAS,IACTC,OAAQ,IACRC,OAAQ,IACRC,SAAU,IACVC,QAAS,IACTC,QAAS,KAIPC,IACFC,UAAY,EACZhsB,QAAU,GAIRgB,IACFirB,EAAK,MAAOC,EAAK,MAAOC,EAAK,MAAOC,EAAK,MAAOC,EAAK,MACrDC,EAAK,MAAOC,EAAK,MAAOC,EAAK,MAAOC,EAAK,MAAOC,EAAK,MACrDC,EAAK,MAAOC,EAAK,MAAOC,EAAK,MAAOC,EAAK,MAAOC,EAAK,MAAOC,EAAK,MACjEz6C,EAAK,MAAO06C,EAAK,MAAOC,EAAK,MAAOC,EAAK,MAAOrqD,EAAK,MAAOsqD,EAAK,MACjE73C,EAAK,MAAO5G,EAAK,MAAO0+C,EAAK,MAAOC,EAAK,MAAOh6D,EAAK,MAAOq9B,EAAK,OAI/DsQ,IACFssB,KAAM,KACNhC,IAAK,IACLiC,KAAM,IACNC,KAAM,IACNC,SAAU,QACVC,SAAU,SAIRC,GAAc7B,GAA0B,QAAK8B,IAAYA,EAAQ96B,UAAY86B,EAG7EC,GAAa/B,GAAyB,QAAKgC,IAAWA,EAAOh7B,UAAYg7B,EAGzEC,GAAaJ,IAAeE,IAA+B,iBAAV77D,gBAAsBA,gBAAUA,eAAOwjD,QAAUxjD,eAGlGg8D,GAAWlC,UAAmBhkD,OAASA,MAAQA,KAAK0tC,QAAU1tC,KAG9DmmD,GAAanC,UAAmBh4D,SAAWA,QAAUA,OAAO0hD,QAAU1hD,OAGtEo6D,GAAgBL,IAAcA,GAAWD,UAAYD,IAAeA,GAQpEre,GAAOye,IAAgBE,MAAgB39D,MAAQA,KAAKwD,SAAYm6D,IAAeD,IAAY19D,KA8wX3FM,GAAIqxC,IAGa,mBAAVksB,GAA6C,iBAAdA,EAAOC,KAAmBD,EAAOC,KAKzE9e,GAAK1+C,EAAIA,GAITu9D,EAAO,WACL,OAAOv9D,MAIF+8D,IAAeE,GAElBK,IACDL,GAAWD,QAAUh9D,IAAGA,EAAIA,GAI7B+8D,GAAY/8D,EAAIA,GAKlB0+C,GAAK1+C,EAAIA,KAEX6D,KAAKnE,kBpI9jYPwD,OAAOC,WAAaD,OAAOC,aAE3B,IAKI/B,SAAS8B,OAAOC,SqIJhBs6D,cAAgB,yCAChB,6FACA,mCACA,yBACA,oGACA,SACA,SACA,UACFz/C,KAAK,kBAEQ0/C,gBACX/9D,KAAM,UACNO,MAAO,SACPM,QAASi9D,aAAaA,gBpIZtB95D,QAAU,krLCedg6D,aAAUn+D,KAGVQ,OAAEO,OAAOf,IAAIY,UAAWwD,YAAYxD,WAGpC0D,UAAUwjC,SAAW,cAAe,QAAQ,aAAa,sBAAsB,yBAA0B,mBoItBzG,IAAIo2B,MAAME,gBACNj+D,KAAM,MACNO,MAAO,QAAS,WAAW,WAG/Bw9D,MAAIt9D,UAAUy9D,aAAeH,MAAIt9D,UAAU09D,YAC3CJ,MAAIt9D,UAAU29D,gBAAkBL,MAAIt9D,UAAU49D,eAC9CN,MAAIt9D,UAAU69D,aAAeP,MAAIt9D,UAAU89D,YAE3CR,MAAIt9D,UAAU6oC,QAAU,WACpB,OAAOvpC,KAAKD,OAAOK,QAAQ+O,MnIb1BmG,KAAKE,MAAKF,KAAKE,IAAM,WAAa,OAAO,IAAIF,MAAOm2B,YAGpDniC,QAAQi+C,QAAOj+C,QAAQi+C,MAAQl+C,KAC/BC,QAAQgS,iBAAgBhS,QAAQgS,eAAiBjS,KACjDC,QAAQmS,WAAUnS,QAAQmS,SAAWpS,KACrCC,QAAQm1D,QAAOn1D,QAAQm1D,MAAQp1D,KAGnC,WAIG,IAAK,IADDq1D,GAAW,SAAU,OAChBjpD,EAAI,EAAGA,EAAIipD,EAAQpuD,SAAW9M,OAAOoqC,wBAAyBn4B,EAAG,CACtE,IAAIkpD,EAAKD,EAAQjpD,GACjBjS,OAAOoqC,sBAAwBpqC,OAAOm7D,EAAG,yBACzCn7D,OAAOsqC,qBAAwBtqC,OAAOm7D,EAAG,yBAClCn7D,OAAOm7D,EAAG,+BAGrB,GAAI,uBAAuBvuD,KAAK5M,OAAO+9B,UAAUq9B,aAAep7D,OAAOoqC,wBAA0BpqC,OAAOsqC,qBAAsB,CAC1H,IAAI+wB,EAAW,EACfr7D,OAAOoqC,sBAAwB,SAAS3jC,GACpC,IAAIuL,EAAMF,KAAKE,MACXspD,EAAWhyD,KAAK0G,IAAIqrD,EAAW,GAAIrpD,GACvC,OAAOlJ,WAAW,WAAarC,EAAS40D,EAAWC,IACjCA,EAAWtpD,IAEjChS,OAAOsqC,qBAAuBj6B,cAnBtC,GA0BA,IAAIkrD,gBAAkB,SAASC,GAOnB,SAASC,EAAQx8D,EAAMy8D,GACnB,OAAO,SAASC,EAAQv8D,GACpB,IAAIkN,EACJ,IACI,IAAIovD,GAAyB,MAATt8D,GAAmC,iBAAVA,GAAuC,mBAAVA,GAAwD,mBAAvBkN,EAAOlN,EAAMkN,MAKpHsvD,EAAU,WACDF,GAAgC,IAAhBz8D,EAAK6N,QAAchH,QAAQ5E,MAAM,wCAAyC9B,GAC3F,IAAK,IAAI6S,EAAI,EAAGA,EAAIhT,EAAK6N,OAAQmF,IAAKhT,EAAKgT,GAAG7S,GAC1Cy8D,EAAU/uD,OAAS,EAAGgvD,EAAUhvD,OAAS,EACjDivD,EAASr9B,MAAQg9B,EACjBK,EAASC,MAAQ,WAAYL,EAAQv8D,UAViG,CAC1I,GAAIA,IAAU4U,EAAM,MAAM,IAAIi/B,UAAU,uCACpCgpB,EAAY3vD,EAAK7J,KAAKrD,KAYlC,MAAO2P,GACHmtD,EAAcntD,KAI1B,SAASktD,EAAY3vD,GAEjB,SAAS2mD,EAAIlpD,GACT,OAAO,SAAS3K,GACR+8D,IAAS,GACbpyD,EAAG3K,IAJX,IAAI+8D,EAAO,EAOP9vD,EAAU4mD,EAAIiJ,GAClB,IAAK5vD,EAAK2mD,EAAImJ,GAAiB/vD,GAAU,MAAO0C,GAAI1C,EAAQ0C,IAtCxE,KAAMvS,gBAAgB++D,iBAAkB,MAAM,IAAIv9D,MAAM,qCACpD,GAAwB,mBAAbw9D,EAAyB,MAAM,IAAIvoB,UAAU,+BAEpD,IAAIj/B,EAAOxX,KAAMq/D,KAAgBC,KAAgBM,EAAiBX,EAAQI,GAAW,GAAOK,EAAgBT,EAAQK,GAAW,GAC3HC,EAAW/nD,EAAKqoD,WAAaR,UAAWA,EAAWC,UAAWA,GAC9DF,EAAoC,mBAAjBU,aAA8BA,aAAexzD,WAoCpEmzD,EAAYT,IAExBD,gBAAgBr+D,UAAUoP,KAAO,SAASiwD,EAAaC,GAEnD,SAASrrD,EAAO1K,EAAUxH,EAAMqH,EAAMo4B,GAClCz/B,EAAKS,KAAK,SAASN,GACf,GAAwB,mBAAbqH,EAAyBH,EAAKlH,QAChC,IAAKq9D,EAAYh2D,EAASrH,IAAS,MAAO2P,GAAQ2tD,GAAYA,EAAW3tD,MAExD,mBAAnBgtD,EAASC,OAAwBt9B,IAAUq9B,EAASr9B,OAAOq9B,EAASC,QANnF,IAQAS,EAAaC,EARIX,EAANv/D,KAAsB6/D,UASjCvwD,EAAU,IAAIyvD,gBAAgB,SAAStvD,EAASC,GAASuwD,EAAcxwD,EAASywD,EAAaxwD,IAEjG,OADAiF,EAAOorD,EAAaR,EAASF,UAAWY,GAAa,GAAOtrD,EAAOqrD,EAAaT,EAASD,UAAWY,GAAY,GACzG5wD,GAEPyvD,gBAAgBr+D,UAAUud,MAAQ,SAAS+hD,GACvC,OAAOhgE,KAAK8P,KAAK,KAAMkwD,IAE3BjB,gBAAgBtvD,QAAU,SAAS7M,GAC/B,OAAIA,aAAiBm8D,gBAAwBn8D,EACtC,IAAIm8D,gBAAgB,SAAStvD,GAAUA,EAAQ7M,MAE1Dm8D,gBAAgBrvD,OAAS,SAAS9M,GAC9B,OAAO,IAAIm8D,gBAAgB,SAAStvD,EAASC,GAASA,EAAO9M,MAEjEm8D,gBAAgB7sD,IAAM,SAASzP,GAC3B,OAAO,IAAIs8D,gBAAgB,SAAStvD,EAASC,GACzC,IAAI+1B,EAAQhjC,EAAK6N,OAAQ07C,EAAQ,EAAGlZ,KACpC,GAAoB,IAAhBrwC,EAAK6N,OAAcb,WACd,IAAK,IAAIgG,EAAI,EAAGA,EAAIhT,EAAK6N,OAAQmF,KAClC,SAAUA,GACN,SAAS0qD,EAAQv9D,GACbopD,IACIlZ,EAAOr9B,GAAK7S,EACRopD,IAAUvmB,GAAOh2B,EAAQqjC,GAE1B,MAAXrwC,EAAKgT,IAAkC,iBAAZhT,EAAKgT,IAAsC,mBAAZhT,EAAKgT,IAA8C,mBAAjBhT,EAAKgT,GAAG3F,KAGnGqwD,EAAQ19D,EAAKgT,IAFdhT,EAAKgT,GAAG3F,KAAKqwD,EAASzwD,GAP1B,CAUG+F,MAInBspD,gBAAgBqB,KAAO,SAAS39D,GAC5B,OAAO,IAAIs8D,gBAAgB,SAAStvD,EAASC,GACzC,IAAK,IAAI+F,EAAI,EAAGA,EAAIhT,EAAK6N,OAAQmF,IAC7BhT,EAAKgT,GAAG3F,KAAKL,EAASC,WAKJ,IAAnBlM,OAAOgM,UAAyBhM,OAAOgM,QAAUuvD,kEoIzH1D,WAqRA,SAAS1wB,EAAqBzrC,EAAO0rC,GACnC,GAAI1rC,IAAU0rC,EAAO,CACnB,IAAIC,EAAsB,OAAV3rC,EACZ4rC,EAAa5rC,IAAUgU,EACvB63B,EAAiB7rC,GAAUA,EAE3B8rC,EAAsB,OAAVJ,EACZK,EAAaL,IAAU13B,EACvBg4B,EAAiBN,GAAUA,EAE/B,GAAK1rC,EAAQ0rC,IAAUI,IAAeD,GACjCF,IAAcI,GAAcC,GAC5BJ,GAAcI,EACjB,OAAO,EAET,GAAKhsC,EAAQ0rC,IAAUC,IAAeK,GACjCF,IAAcF,GAAcC,GAC5BE,GAAcF,EACjB,OAAQ,EAGZ,OAAO,EAaT,SAASI,EAAcC,EAAOC,EAAWC,GAIvC,IAHA,IAAI1+B,EAASw+B,EAAMx+B,OACfsI,EAAQo2B,EAAY1+B,GAAU,EAE1B0+B,EAAYp2B,MAAYA,EAAQtI,GACtC,GAAIy+B,EAAUD,EAAMl2B,GAAQA,EAAOk2B,GACjC,OAAOl2B,EAGX,OAAQ,EAYV,SAASq2B,EAAYH,EAAOlsC,EAAOygC,GACjC,GAAIzgC,GAAUA,EACZ,OAAOssC,EAAWJ,EAAOzL,GAK3B,IAHA,IAAIzqB,EAAQyqB,EAAY,EACpB/yB,EAASw+B,EAAMx+B,SAEVsI,EAAQtI,GACf,GAAIw+B,EAAMl2B,KAAWhW,EACnB,OAAOgW,EAGX,OAAQ,EAWV,SAASu2B,EAAevsC,GAGtB,MAAuB,mBAATA,IAAuB,EAWvC,SAASwsC,EAAaxsC,GACpB,OAAgB,MAATA,EAAgB,GAAMA,EAAQ,GAYvC,SAASysC,EAAe5Y,EAAQ6Y,GAI9B,IAHA,IAAI12B,GAAS,EACTtI,EAASmmB,EAAOnmB,SAEXsI,EAAQtI,GAAUg/B,EAAMrmC,QAAQwtB,EAAOC,OAAO9d,KAAW,IAClE,OAAOA,EAYT,SAAS22B,EAAgB9Y,EAAQ6Y,GAG/B,IAFA,IAAI12B,EAAQ6d,EAAOnmB,OAEZsI,KAAW02B,EAAMrmC,QAAQwtB,EAAOC,OAAO9d,KAAW,IACzD,OAAOA,EAYT,SAAS42B,EAAiBC,EAAQnB,GAChC,OAAOD,EAAqBoB,EAAOC,SAAUpB,EAAMoB,WAAcD,EAAO72B,MAAQ01B,EAAM11B,MAiBxF,SAAS+2B,EAAgBF,EAAQnB,EAAOsB,GAOtC,IANA,IAAIh3B,GAAS,EACTi3B,EAAcJ,EAAOC,SACrBI,EAAcxB,EAAMoB,SACpBp/B,EAASu/B,EAAYv/B,OACrBy/B,EAAeH,EAAOt/B,SAEjBsI,EAAQtI,GAAQ,CACvB,IAAIlH,EAASilC,EAAqBwB,EAAYj3B,GAAQk3B,EAAYl3B,IAClE,GAAIxP,EAAQ,CACV,GAAIwP,GAASm3B,EACX,OAAO3mC,EAET,IAAI0uB,EAAQ8X,EAAOh3B,GACnB,OAAOxP,GAAqB,QAAV0uB,IAA6B,IAAVA,EAAkB,GAAK,IAUhE,OAAO2X,EAAO72B,MAAQ01B,EAAM11B,MAU9B,SAASo3B,EAAaC,GACpB,OAAOC,GAAgBD,GAUzB,SAASE,EAAeC,GACtB,OAAOC,GAAYD,GAYrB,SAASE,EAAiBF,EAAKG,EAAaC,GAM1C,OALID,EACFH,EAAMK,GAAcL,GACXI,IACTJ,EAAMM,GAAcN,IAEf,KAAOA,EAUhB,SAASO,EAAiBP,GACxB,MAAO,KAAOM,GAAcN,GAY9B,SAASlB,EAAWJ,EAAOzL,EAAW2L,GAIpC,IAHA,IAAI1+B,EAASw+B,EAAMx+B,OACfsI,EAAQyqB,GAAa2L,EAAY,GAAK,GAElCA,EAAYp2B,MAAYA,EAAQtI,GAAS,CAC/C,IAAIg+B,EAAQQ,EAAMl2B,GAClB,GAAI01B,GAAUA,EACZ,OAAO11B,EAGX,OAAQ,EAUV,SAASg4B,EAAahuC,GACpB,QAASA,GAAyB,iBAATA,EAW3B,SAASiuC,EAAQC,GACf,OAASA,GAAY,KAAQA,GAAY,GAAKA,GAAY,IAAmB,IAAZA,GAA8B,KAAZA,GAAgC,MAAZA,GAAgC,MAAZA,GACxHA,GAAY,OAASA,GAAY,MAAoB,MAAZA,GAAgC,MAAZA,GAAgC,MAAZA,GAAgC,MAAZA,GAAgC,OAAZA,GAAiC,OAAZA,GAYnJ,SAASC,EAAejC,EAAOkC,GAM7B,IALA,IAAIp4B,GAAS,EACTtI,EAASw+B,EAAMx+B,OACf2gC,GAAY,EACZ7nC,OAEKwP,EAAQtI,GACXw+B,EAAMl2B,KAAWo4B,IACnBlC,EAAMl2B,GAASs4B,EACf9nC,IAAS6nC,GAAYr4B,GAGzB,OAAOxP,EAYT,SAAS+nC,EAAWrC,EAAOsC,GAOzB,IANA,IAAIC,EACAz4B,GAAS,EACTtI,EAASw+B,EAAMx+B,OACf2gC,GAAY,EACZ7nC,OAEKwP,EAAQtI,GAAQ,CACvB,IAAI1N,EAAQksC,EAAMl2B,GACd04B,EAAWF,EAAWA,EAASxuC,EAAOgW,EAAOk2B,GAASlsC,EAErDgW,GAASy4B,IAASC,IACrBD,EAAOC,EACPloC,IAAS6nC,GAAYruC,GAGzB,OAAOwG,EAWT,SAASmoC,EAAiB9a,GAIxB,IAHA,IAAI7d,GAAS,EACTtI,EAASmmB,EAAOnmB,SAEXsI,EAAQtI,GAAUugC,EAAQpa,EAAOxjB,WAAW2F,MACrD,OAAOA,EAWT,SAAS44B,EAAkB/a,GAGzB,IAFA,IAAI7d,EAAQ6d,EAAOnmB,OAEZsI,KAAWi4B,EAAQpa,EAAOxjB,WAAW2F,MAC5C,OAAOA,EAUT,SAAS64B,EAAiBrB,GACxB,OAAOsB,GAActB,GAwCvB,SAASuB,EAAavsC,GAgMpB,SAASwsC,EAAOhvC,GACd,GAAIguC,EAAahuC,KAAWxB,GAAQwB,MAAYA,aAAiBivC,IAAc,CAC7E,GAAIjvC,aAAiBkvC,GACnB,OAAOlvC,EAET,GAAImF,GAAe5D,KAAKvB,EAAO,cAAgBmF,GAAe5D,KAAKvB,EAAO,eACxE,OAAOmvC,GAAanvC,GAGxB,OAAO,IAAIkvC,GAAclvC,GAQ3B,SAASovC,KAYT,SAASF,GAAclvC,EAAOqvC,EAAUt3B,GACtC3a,KAAKkyC,YAActvC,EACnB5C,KAAKmyC,YAAcx3B,MACnB3a,KAAKoyC,YAAcH,EAiFrB,SAASJ,GAAYjvC,GACnB5C,KAAKkyC,YAActvC,EACnB5C,KAAKmyC,eACLnyC,KAAKqyC,QAAU,EACfryC,KAAKsyC,cAAe,EACpBtyC,KAAKuyC,iBACLvyC,KAAKwyC,cAAgBC,GACrBzyC,KAAK0yC,aA6GP,SAASC,KACP3yC,KAAK4yC,YAoEP,SAASC,GAASC,GAChB,IAAIxiC,EAASwiC,EAASA,EAAOxiC,OAAS,EAGtC,IADAtQ,KAAKqF,MAAS0kC,KAAQgJ,GAAa,MAAOtyC,IAAO,IAAIuyC,IAC9C1iC,KACLtQ,KAAKkD,KAAK4vC,EAAOxiC,IAarB,SAAS2iC,GAAa/0B,EAAOtb,GAC3B,IAAIyC,EAAO6Y,EAAM7Y,KAGjB,OAF8B,iBAATzC,GAAqByN,GAASzN,GAAUyC,EAAK5E,IAAIyG,IAAItE,GAASyC,EAAK0kC,KAAKnnC,IAE7E,GAAK,EA8BvB,SAASswC,GAAYpE,EAAOR,GAO1B,IANA,IAAI11B,GAAS,EACTtI,EAASw+B,EAAMx+B,OACf6iC,GAAY,EACZC,EAAY9E,EAAMh+B,OAClBlH,EAAS4J,GAAM1C,EAAS8iC,KAEnBx6B,EAAQtI,GACflH,EAAOwP,GAASk2B,EAAMl2B,GAExB,OAASu6B,EAAWC,GAClBhqC,EAAOwP,KAAW01B,EAAM6E,GAE1B,OAAO/pC,EAWT,SAASiqC,GAAU57B,EAAQq3B,GACzB,IAAIl2B,GAAS,EACTtI,EAASmH,EAAOnH,OAGpB,IADAw+B,IAAUA,EAAQ97B,GAAM1C,MACfsI,EAAQtI,GACfw+B,EAAMl2B,GAASnB,EAAOmB,GAExB,OAAOk2B,EAYT,SAASwE,GAAUxE,EAAOsC,GAIxB,IAHA,IAAIx4B,GAAS,EACTtI,EAASw+B,EAAMx+B,SAEVsI,EAAQtI,IAC8B,IAAzC8gC,EAAStC,EAAMl2B,GAAQA,EAAOk2B,KAIpC,OAAOA,EAiCT,SAASyE,GAAWzE,EAAOC,GAIzB,IAHA,IAAIn2B,GAAS,EACTtI,EAASw+B,EAAMx+B,SAEVsI,EAAQtI,GACf,IAAKy+B,EAAUD,EAAMl2B,GAAQA,EAAOk2B,GAClC,OAAO,EAGX,OAAO,EAcT,SAAS0E,GAAc1E,EAAOsC,EAAUqC,EAAYC,GAMlD,IALA,IAAI96B,GAAS,EACTtI,EAASw+B,EAAMx+B,OACfghC,EAAWoC,EACXtqC,EAASkoC,IAEJ14B,EAAQtI,GAAQ,CACvB,IAAI1N,EAAQksC,EAAMl2B,GACdxY,GAAWgxC,EAASxuC,GAEpB6wC,EAAWrzC,EAASkxC,KACtBA,EAAWlxC,EACXgJ,EAASxG,GAGb,OAAOwG,EAYT,SAASuqC,GAAY7E,EAAOC,GAM1B,IALA,IAAIn2B,GAAS,EACTtI,EAASw+B,EAAMx+B,OACf2gC,GAAY,EACZ7nC,OAEKwP,EAAQtI,GAAQ,CACvB,IAAI1N,EAAQksC,EAAMl2B,GACdm2B,EAAUnsC,EAAOgW,EAAOk2B,KAC1B1lC,IAAS6nC,GAAYruC,GAGzB,OAAOwG,EAYT,SAASwqC,GAAS9E,EAAOsC,GAKvB,IAJA,IAAIx4B,GAAS,EACTtI,EAASw+B,EAAMx+B,OACflH,EAAS4J,GAAM1C,KAEVsI,EAAQtI,GACflH,EAAOwP,GAASw4B,EAAStC,EAAMl2B,GAAQA,EAAOk2B,GAEhD,OAAO1lC,EAWT,SAASyqC,GAAU/E,EAAOgE,GAKxB,IAJA,IAAIl6B,GAAS,EACTtI,EAASwiC,EAAOxiC,OAChB+sB,EAASyR,EAAMx+B,SAEVsI,EAAQtI,GACfw+B,EAAMzR,EAASzkB,GAASk6B,EAAOl6B,GAEjC,OAAOk2B,EAeT,SAASgF,GAAYhF,EAAOsC,EAAU2C,EAAaC,GACjD,IAAIp7B,GAAS,EACTtI,EAASw+B,EAAMx+B,OAKnB,IAHI0jC,GAAiB1jC,IACnByjC,EAAcjF,IAAQl2B,MAEfA,EAAQtI,GACfyjC,EAAc3C,EAAS2C,EAAajF,EAAMl2B,GAAQA,EAAOk2B,GAE3D,OAAOiF,EAoCT,SAASE,GAAUnF,EAAOC,GAIxB,IAHA,IAAIn2B,GAAS,EACTtI,EAASw+B,EAAMx+B,SAEVsI,EAAQtI,GACf,GAAIy+B,EAAUD,EAAMl2B,GAAQA,EAAOk2B,GACjC,OAAO,EAGX,OAAO,EAYT,SAASoF,GAASpF,EAAOsC,GAIvB,IAHA,IAAI9gC,EAASw+B,EAAMx+B,OACflH,EAAS,EAENkH,KACLlH,IAAWgoC,EAAStC,EAAMx+B,KAAY,EAExC,OAAOlH,EA4BT,SAAS+qC,GAAkBC,EAAaC,EAAaxxC,EAAK4sC,GACxD,OAAQ2E,IAAgBx9B,GAAc7O,GAAe5D,KAAKsrC,EAAQ5sC,GAE9DuxC,EADAC,EAeN,SAASC,GAAW7E,EAAQh4B,EAAQ88B,GAKlC,IAJA,IAAI37B,GAAS,EACTswB,EAAQ7B,GAAK5vB,GACbnH,EAAS44B,EAAM54B,SAEVsI,EAAQtI,GAAQ,CACvB,IAAIzN,EAAMqmC,EAAMtwB,GACZhW,EAAQ6sC,EAAO5sC,GACfuG,EAASmrC,EAAW3xC,EAAO6U,EAAO5U,GAAMA,EAAK4sC,EAAQh4B,IAEpDrO,GAAWA,EAAUA,IAAWxG,EAAUA,GAAUA,KACpDA,IAAUgU,GAAe/T,KAAO4sC,KACnCA,EAAO5sC,GAAOuG,GAGlB,OAAOqmC,EAYT,SAAS+E,GAAW/E,EAAQh4B,GAC1B,OAAiB,MAAVA,EACHg4B,EACAgF,GAASh9B,EAAQ4vB,GAAK5vB,GAASg4B,GAYrC,SAASiF,GAAOnyC,EAAY2mC,GAQ1B,IAPA,IAAItwB,GAAS,EACT+7B,EAAsB,MAAdpyC,EACRqyC,GAASD,GAASE,GAAYtyC,GAC9B+N,EAASskC,EAAQryC,EAAW+N,OAAS,EACrCwkC,EAAc5L,EAAM54B,OACpBlH,EAAS4J,GAAM8hC,KAEXl8B,EAAQk8B,GAAa,CAC3B,IAAIjyC,EAAMqmC,EAAMtwB,GAEdxP,EAAOwP,GADLg8B,EACcG,GAAQlyC,EAAKyN,GAAU/N,EAAWM,GAAO+T,EAEzC+9B,EAAQ/9B,EAAYrU,EAAWM,GAGnD,OAAOuG,EAYT,SAASqrC,GAASh9B,EAAQyxB,EAAOuG,GAC/BA,IAAWA,MAKX,IAHA,IAAI72B,GAAS,EACTtI,EAAS44B,EAAM54B,SAEVsI,EAAQtI,GAAQ,CACvB,IAAIzN,EAAMqmC,EAAMtwB,GAChB62B,EAAO5sC,GAAO4U,EAAO5U,GAEvB,OAAO4sC,EAaT,SAASuF,GAAaC,EAAMC,EAASC,GACnC,IAAIl1C,SAAcg1C,EAClB,MAAY,YAARh1C,EACKi1C,IAAYt+B,EACfq+B,EACAG,GAAaH,EAAMC,EAASC,GAEtB,MAARF,EACKpQ,GAEG,UAAR5kC,EACKo1C,GAAYJ,GAEdC,IAAYt+B,EACflO,GAASusC,GACTK,GAAoBL,EAAMC,GAiBhC,SAASK,GAAU3yC,EAAO4yC,EAAQjB,EAAY1xC,EAAK4sC,EAAQgG,EAAQC,GACjE,IAAItsC,EAIJ,GAHImrC,IACFnrC,EAASqmC,EAAS8E,EAAW3xC,EAAOC,EAAK4sC,GAAU8E,EAAW3xC,IAE5DwG,IAAWwN,EACb,OAAOxN,EAET,IAAKiH,GAASzN,GACZ,OAAOA,EAET,IAAIgyC,EAAQxzC,GAAQwB,GACpB,GAAIgyC,GAEF,GADAxrC,EAASusC,GAAe/yC,IACnB4yC,EACH,OAAOnC,GAAUzwC,EAAOwG,OAErB,CACL,IAAIwsC,EAAMC,GAAY1xC,KAAKvB,GACvBkzC,EAASF,GAAOG,EAEpB,GAAIH,GAAOI,GAAaJ,GAAOK,KAAYH,GAAWrG,GAMpD,OAAOyG,GAAcN,GACjBO,GAAevzC,EAAOgzC,EAAKJ,GAC1B/F,EAAS7sC,KANd,GADAwG,EAASgtC,GAAgBN,KAAclzC,IAClC4yC,EACH,OAAOhB,GAAWprC,EAAQxG,GAShC6yC,IAAWA,MACXC,IAAWA,MAGX,IADA,IAAIplC,EAASmlC,EAAOnlC,OACbA,KACL,GAAImlC,EAAOnlC,IAAW1N,EACpB,OAAO8yC,EAAOplC,GAWlB,OAPAmlC,EAAOvyC,KAAKN,GACZ8yC,EAAOxyC,KAAKkG,IAGXwrC,EAAQtB,GAAY+C,IAAYzzC,EAAO,SAAS0zC,EAAUzzC,GACzDuG,EAAOvG,GAAO0yC,GAAUe,EAAUd,EAAQjB,EAAY1xC,EAAKD,EAAO6yC,EAAQC,KAErEtsC,EAiCT,SAASmtC,GAAUtB,EAAMuB,EAAM93B,GAC7B,GAAmB,mBAARu2B,EACT,MAAM,IAAIwB,GAAUC,GAEtB,OAAOpqC,GAAW,WAAa2oC,EAAK9xC,MAAMyT,EAAW8H,IAAU83B,GAYjE,SAASG,GAAe7H,EAAOgE,GAC7B,IAAIxiC,EAASw+B,EAAQA,EAAMx+B,OAAS,EAChClH,KAEJ,IAAKkH,EACH,OAAOlH,EAET,IAAIwP,GAAS,EACT3P,EAAU2tC,KACVC,EAAW5tC,GAAWgmC,EACtB/wB,EAAS24B,GAAY/D,EAAOxiC,QAAUwmC,EAAoBC,GAAYjE,GAAU,KAChFkE,EAAelE,EAAOxiC,OAEtB4N,IACFjV,EAAUgqC,GACV4D,GAAW,EACX/D,EAAS50B,GAEX+4B,EACA,OAASr+B,EAAQtI,GAAQ,CACvB,IAAI1N,EAAQksC,EAAMl2B,GAElB,GAAIi+B,GAAYj0C,GAAUA,EAAO,CAE/B,IADA,IAAIs0C,EAAcF,EACXE,KACL,GAAIpE,EAAOoE,KAAiBt0C,EAC1B,SAASq0C,EAGb7tC,EAAOlG,KAAKN,QAELqG,EAAQ6pC,EAAQlwC,EAAO,GAAK,GACnCwG,EAAOlG,KAAKN,GAGhB,OAAOwG,EAmCT,SAAS+tC,GAAU50C,EAAYwsC,GAC7B,IAAI3lC,GAAS,EAKb,OAJAguC,GAAS70C,EAAY,SAASK,EAAOgW,EAAOrW,GAE1C,OADA6G,IAAW2lC,EAAUnsC,EAAOgW,EAAOrW,KAG9B6G,EAeT,SAASiuC,GAAa90C,EAAY6uC,EAAUqC,EAAYC,GACtD,IAAIpC,EAAWoC,EACXtqC,EAASkoC,EASb,OAPA8F,GAAS70C,EAAY,SAASK,EAAOgW,EAAOrW,GAC1C,IAAInC,GAAWgxC,EAASxuC,EAAOgW,EAAOrW,IAClCkxC,EAAWrzC,EAASkxC,IAAclxC,IAAYszC,GAAWtzC,IAAYgJ,KACvEkoC,EAAWlxC,EACXgJ,EAASxG,KAGNwG,EAaT,SAASkuC,GAASxI,EAAOlsC,EAAO+c,EAAO9Q,GACrC,IAAIyB,EAASw+B,EAAMx+B,OAanB,KAXAqP,EAAiB,MAATA,EAAgB,GAAMA,GAAS,GAC3B,IACVA,GAASA,EAAQrP,EAAS,EAAKA,EAASqP,IAE1C9Q,EAAOA,IAAQ+H,GAAa/H,EAAMyB,EAAUA,GAAWzB,GAAO,GACpD,IACRA,GAAOyB,GAETA,EAASqP,EAAQ9Q,EAAM,EAAKA,IAAQ,EACpC8Q,KAAW,EAEJA,EAAQrP,GACbw+B,EAAMnvB,KAAW/c,EAEnB,OAAOksC,EAYT,SAASyI,GAAWh1C,EAAYwsC,GAC9B,IAAI3lC,KAMJ,OALAguC,GAAS70C,EAAY,SAASK,EAAOgW,EAAOrW,GACtCwsC,EAAUnsC,EAAOgW,EAAOrW,IAC1B6G,EAAOlG,KAAKN,KAGTwG,EAgBT,SAASouC,GAASj1C,EAAYwsC,EAAW0I,EAAUC,GACjD,IAAItuC,EAOJ,OANAquC,EAASl1C,EAAY,SAASK,EAAOC,EAAKN,GACxC,GAAIwsC,EAAUnsC,EAAOC,EAAKN,GAExB,OADA6G,EAASsuC,EAAS70C,EAAMD,GACjB,IAGJwG,EAcT,SAASuuC,GAAY7I,EAAO0G,EAAQoC,EAAUxuC,GAC5CA,IAAWA,MAKX,IAHA,IAAIwP,GAAS,EACTtI,EAASw+B,EAAMx+B,SAEVsI,EAAQtI,GAAQ,CACvB,IAAI1N,EAAQksC,EAAMl2B,GACdg4B,EAAahuC,IAAUiyC,GAAYjyC,KAClCg1C,GAAYx2C,GAAQwB,IAAUi1C,GAAYj1C,IACzC4yC,EAEFmC,GAAY/0C,EAAO4yC,EAAQoC,EAAUxuC,GAErCyqC,GAAUzqC,EAAQxG,GAEVg1C,IACVxuC,EAAOA,EAAOkH,QAAU1N,GAG5B,OAAOwG,EAsCT,SAAS0uC,GAAUrI,EAAQ2B,GACzB,OAAO2G,GAAQtI,EAAQ2B,EAAU4G,IAYnC,SAAS3B,GAAW5G,EAAQ2B,GAC1B,OAAO2G,GAAQtI,EAAQ2B,EAAU/J,IAYnC,SAAS4Q,GAAgBxI,EAAQ2B,GAC/B,OAAO8G,GAAazI,EAAQ2B,EAAU/J,IAYxC,SAAS8Q,GAAc1I,EAAQvG,GAM7B,IALA,IAAItwB,GAAS,EACTtI,EAAS44B,EAAM54B,OACf2gC,GAAY,EACZ7nC,OAEKwP,EAAQtI,GAAQ,CACvB,IAAIzN,EAAMqmC,EAAMtwB,GACZtF,GAAWm8B,EAAO5sC,MACpBuG,IAAS6nC,GAAYpuC,GAGzB,OAAOuG,EAaT,SAASgvC,GAAQ3I,EAAQ/nC,EAAM2wC,GAC7B,GAAc,MAAV5I,EAAJ,CAGI4I,IAAYzhC,GAAayhC,KAAWC,GAAS7I,KAC/C/nC,GAAQ2wC,IAKV,IAHA,IAAIz/B,EAAQ,EACRtI,EAAS5I,EAAK4I,OAED,MAAVm/B,GAAkB72B,EAAQtI,GAC/Bm/B,EAASA,EAAO/nC,EAAKkR,MAEvB,OAAQA,GAASA,GAAStI,EAAUm/B,EAAS74B,GAgB/C,SAAS2hC,GAAY31C,EAAO0rC,EAAOiG,EAAYiE,EAAS/C,EAAQC,GAC9D,OAAI9yC,IAAU0rC,IAGD,MAAT1rC,GAA0B,MAAT0rC,IAAmBj+B,GAASzN,KAAWguC,EAAatC,GAChE1rC,GAAUA,GAAS0rC,GAAUA,EAE/BmK,GAAgB71C,EAAO0rC,EAAOiK,GAAahE,EAAYiE,EAAS/C,EAAQC,IAkBjF,SAAS+C,GAAgBhJ,EAAQnB,EAAOoK,EAAWnE,EAAYiE,EAAS/C,EAAQC,GAC9E,IAAIiD,EAAWv3C,GAAQquC,GACnBmJ,EAAWx3C,GAAQktC,GACnBuK,EAASC,EACTC,EAASD,EAERH,KACHE,EAAShD,GAAY1xC,KAAKsrC,KACZwG,EACZ4C,EAAS7C,EACA6C,GAAU7C,IACnB2C,EAAWK,GAAavJ,KAGvBmJ,KACHG,EAASlD,GAAY1xC,KAAKmqC,KACZ2H,EACZ8C,EAAS/C,EACA+C,GAAU/C,IACnB4C,EAAWI,GAAa1K,KAG5B,IAAI2K,EAAWJ,GAAU7C,EACrBkD,EAAWH,GAAU/C,EACrBmD,EAAYN,GAAUE,EAE1B,GAAII,IAAeR,IAAYM,EAC7B,OAAOG,GAAW3J,EAAQnB,EAAOuK,GAEnC,IAAKL,EAAS,CACZ,IAAIa,EAAeJ,GAAYlxC,GAAe5D,KAAKsrC,EAAQ,eACvD6J,EAAeJ,GAAYnxC,GAAe5D,KAAKmqC,EAAO,eAE1D,GAAI+K,GAAgBC,EAClB,OAAOZ,EAAUW,EAAe5J,EAAO7sC,QAAU6sC,EAAQ6J,EAAehL,EAAM1rC,QAAU0rC,EAAOiG,EAAYiE,EAAS/C,EAAQC,GAGhI,IAAKyD,EACH,OAAO,EAIT1D,IAAWA,MACXC,IAAWA,MAGX,IADA,IAAIplC,EAASmlC,EAAOnlC,OACbA,KACL,GAAImlC,EAAOnlC,IAAWm/B,EACpB,OAAOiG,EAAOplC,IAAWg+B,EAI7BmH,EAAOvyC,KAAKusC,GACZiG,EAAOxyC,KAAKorC,GAEZ,IAAIllC,GAAUuvC,EAAWY,GAAcC,IAAc/J,EAAQnB,EAAOoK,EAAWnE,EAAYiE,EAAS/C,EAAQC,GAK5G,OAHAD,EAAO7uB,MACP8uB,EAAO9uB,MAEAxd,EAaT,SAASqwC,GAAYhK,EAAQiK,EAAWnF,GACtC,IAAI37B,EAAQ8gC,EAAUppC,OAClBA,EAASsI,EACT+gC,GAAgBpF,EAEpB,GAAc,MAAV9E,EACF,OAAQn/B,EAGV,IADAm/B,EAAS6I,GAAS7I,GACX72B,KAAS,CACd,IAAIvT,EAAOq0C,EAAU9gC,GACrB,GAAK+gC,GAAgBt0C,EAAK,GAClBA,EAAK,KAAOoqC,EAAOpqC,EAAK,MACtBA,EAAK,KAAMoqC,GAEnB,OAAO,EAGX,OAAS72B,EAAQtI,GAAQ,CAEvB,IAAIzN,GADJwC,EAAOq0C,EAAU9gC,IACF,GACXghC,EAAWnK,EAAO5sC,GAClBg3C,EAAWx0C,EAAK,GAEpB,GAAIs0C,GAAgBt0C,EAAK,IACvB,GAAIu0C,IAAahjC,KAAe/T,KAAO4sC,GACrC,OAAO,MAEJ,CACL,IAAIrmC,EAASmrC,EAAaA,EAAWqF,EAAUC,EAAUh3C,GAAO+T,EAChE,KAAMxN,IAAWwN,EAAY2hC,GAAYsB,EAAUD,EAAUrF,GAAY,GAAQnrC,GAC/E,OAAO,GAIb,OAAO,EAYT,SAAS0wC,GAAQv3C,EAAY6uC,GAC3B,IAAIx4B,GAAS,EACTxP,EAASyrC,GAAYtyC,GAAcyQ,GAAMzQ,EAAW+N,WAKxD,OAHA8mC,GAAS70C,EAAY,SAASK,EAAOC,EAAKN,GACxC6G,IAASwP,GAASw4B,EAASxuC,EAAOC,EAAKN,KAElC6G,EAUT,SAASisC,GAAY59B,GACnB,IAAIiiC,EAAYK,GAAatiC,GAC7B,GAAwB,GAApBiiC,EAAUppC,QAAeopC,EAAU,GAAG,GAAI,CAC5C,IAAI72C,EAAM62C,EAAU,GAAG,GACnB92C,EAAQ82C,EAAU,GAAG,GAEzB,OAAO,SAASjK,GACd,OAAc,MAAVA,IAGGA,EAAO5sC,KAASD,IAAUA,IAAUgU,GAAc/T,KAAOy1C,GAAS7I,MAG7E,OAAO,SAASA,GACd,OAAOgK,GAAYhK,EAAQiK,IAY/B,SAASpE,GAAoB5tC,EAAMmyC,GACjC,IAAIjF,EAAQxzC,GAAQsG,GAChBmvC,EAAWmD,GAAMtyC,IAASuyC,GAAmBJ,GAC7CxB,EAAW3wC,EAAO,GAGtB,OADAA,EAAOwyC,GAAOxyC,GACP,SAAS+nC,GACd,GAAc,MAAVA,EACF,OAAO,EAET,IAAI5sC,EAAMw1C,EAEV,GADA5I,EAAS6I,GAAS7I,IACbmF,IAAUiC,MAAeh0C,KAAO4sC,GAAS,CAE5C,GAAc,OADdA,EAAwB,GAAf/nC,EAAK4I,OAAcm/B,EAAS2I,GAAQ3I,EAAQ0K,GAAUzyC,EAAM,GAAI,KAEvE,OAAO,EAET7E,EAAM8C,GAAK+B,GACX+nC,EAAS6I,GAAS7I,GAEpB,OAAOA,EAAO5sC,KAASg3C,EAClBA,IAAajjC,GAAc/T,KAAO4sC,EACnC8I,GAAYsB,EAAUpK,EAAO5sC,GAAM+T,GAAW,IAgBtD,SAASwjC,GAAU3K,EAAQh4B,EAAQ88B,EAAYkB,EAAQC,GACrD,IAAKrlC,GAASo/B,GACZ,OAAOA,EAET,IAAI4K,EAAWxF,GAAYp9B,KAAYrW,GAAQqW,IAAWuhC,GAAavhC,IACnEyxB,EAAQmR,EAAWzjC,EAAYywB,GAAK5vB,GA0BxC,OAxBA67B,GAAUpK,GAASzxB,EAAQ,SAASoiC,EAAUh3C,GAK5C,GAJIqmC,IAEF2Q,EAAWpiC,EADX5U,EAAMg3C,IAGJjJ,EAAaiJ,GACfpE,IAAWA,MACXC,IAAWA,MACX4E,GAAc7K,EAAQh4B,EAAQ5U,EAAKu3C,GAAW7F,EAAYkB,EAAQC,OAE/D,CACH,IAAI9yC,EAAQ6sC,EAAO5sC,GACfuG,EAASmrC,EAAaA,EAAW3xC,EAAOi3C,EAAUh3C,EAAK4sC,EAAQh4B,GAAUb,EACzEigC,EAAWztC,IAAWwN,EAEtBigC,IACFztC,EAASywC,GAENzwC,IAAWwN,KAAcyjC,GAAcx3C,KAAO4sC,KAC9CoH,IAAaztC,GAAWA,EAAUA,IAAWxG,EAAUA,GAAUA,KACpE6sC,EAAO5sC,GAAOuG,MAIbqmC,EAkBT,SAAS6K,GAAc7K,EAAQh4B,EAAQ5U,EAAK03C,EAAWhG,EAAYkB,EAAQC,GAIzE,IAHA,IAAIplC,EAASmlC,EAAOnlC,OAChBupC,EAAWpiC,EAAO5U,GAEfyN,KACL,GAAImlC,EAAOnlC,IAAWupC,EAEpB,YADApK,EAAO5sC,GAAO6yC,EAAOplC,IAIzB,IAAI1N,EAAQ6sC,EAAO5sC,GACfuG,EAASmrC,EAAaA,EAAW3xC,EAAOi3C,EAAUh3C,EAAK4sC,EAAQh4B,GAAUb,EACzEigC,EAAWztC,IAAWwN,EAEtBigC,IACFztC,EAASywC,EACLhF,GAAYgF,KAAcz4C,GAAQy4C,IAAab,GAAaa,IAC9DzwC,EAAShI,GAAQwB,GACbA,EACCiyC,GAAYjyC,GAASywC,GAAUzwC,MAE7B1B,GAAc24C,IAAahC,GAAYgC,GAC9CzwC,EAASyuC,GAAYj1C,GACjB43C,GAAc53C,GACb1B,GAAc0B,GAASA,KAG5Bi0C,GAAW,GAKfpB,EAAOvyC,KAAK22C,GACZnE,EAAOxyC,KAAKkG,GAERytC,EAEFpH,EAAO5sC,GAAO03C,EAAUnxC,EAAQywC,EAAUtF,EAAYkB,EAAQC,IACrDtsC,GAAWA,EAAUA,IAAWxG,EAAUA,GAAUA,KAC7D6sC,EAAO5sC,GAAOuG,GAWlB,SAASqxC,GAAa53C,GACpB,OAAO,SAAS4sC,GACd,OAAiB,MAAVA,EAAiB74B,EAAY64B,EAAO5sC,IAW/C,SAAS63C,GAAiBhzC,GACxB,IAAI2wC,EAAW3wC,EAAO,GAEtB,OADAA,EAAOwyC,GAAOxyC,GACP,SAAS+nC,GACd,OAAO2I,GAAQ3I,EAAQ/nC,EAAM2wC,IAajC,SAASsC,GAAW7L,EAAO8L,GAEzB,IADA,IAAItqC,EAASw+B,EAAQ8L,EAAQtqC,OAAS,EAC/BA,KAAU,CACf,IAAIsI,EAAQgiC,EAAQtqC,GACpB,GAAIsI,GAAS4R,GAAYuqB,GAAQn8B,GAAQ,CACvC,IAAI4R,EAAW5R,EACflD,GAAOvR,KAAK2qC,EAAOl2B,EAAO,IAG9B,OAAOk2B,EAYT,SAAS+L,GAAW9tC,EAAKyG,GACvB,OAAOzG,EAAM+tC,GAAYC,MAAkBvnC,EAAMzG,EAAM,IAiBzD,SAASiuC,GAAWz4C,EAAY6uC,EAAU2C,EAAakH,EAAoBxD,GAMzE,OALAA,EAASl1C,EAAY,SAASK,EAAOgW,EAAOrW,GAC1CwxC,EAAckH,GACTA,GAAqB,EAAOr4C,GAC7BwuC,EAAS2C,EAAanxC,EAAOgW,EAAOrW,KAEnCwxC,EAyBT,SAASoG,GAAUrL,EAAOnvB,EAAO9Q,GAC/B,IAAI+J,GAAS,EACTtI,EAASw+B,EAAMx+B,QAEnBqP,EAAiB,MAATA,EAAgB,GAAMA,GAAS,GAC3B,IACVA,GAASA,EAAQrP,EAAS,EAAKA,EAASqP,IAE1C9Q,EAAOA,IAAQ+H,GAAa/H,EAAMyB,EAAUA,GAAWzB,GAAO,GACpD,IACRA,GAAOyB,GAETA,EAASqP,EAAQ9Q,EAAM,EAAMA,EAAM8Q,IAAW,EAC9CA,KAAW,EAGX,IADA,IAAIvW,EAAS4J,GAAM1C,KACVsI,EAAQtI,GACflH,EAAOwP,GAASk2B,EAAMl2B,EAAQ+G,GAEhC,OAAOvW,EAaT,SAAS8xC,GAAS34C,EAAYwsC,GAC5B,IAAI3lC,EAMJ,OAJAguC,GAAS70C,EAAY,SAASK,EAAOgW,EAAOrW,GAE1C,QADA6G,EAAS2lC,EAAUnsC,EAAOgW,EAAOrW,QAG1B6G,EAaX,SAAS+xC,GAAWrM,EAAOsM,GACzB,IAAI9qC,EAASw+B,EAAMx+B,OAGnB,IADAw+B,EAAMuM,KAAKD,GACJ9qC,KACLw+B,EAAMx+B,GAAUw+B,EAAMx+B,GAAQ1N,MAEhC,OAAOksC,EAYT,SAASwM,GAAgB/4C,EAAYg5C,EAAW3L,GAC9C,IAAI3lC,EAAWuxC,KACX5iC,GAAS,EASb,OAPA2iC,EAAY3H,GAAS2H,EAAW,SAASnK,GAAY,OAAOnnC,EAASmnC,KAO9D+J,GALMrB,GAAQv3C,EAAY,SAASK,GAExC,OAAS8sC,SADMkE,GAAS2H,EAAW,SAASnK,GAAY,OAAOA,EAASxuC,KACzCgW,QAAWA,EAAOhW,MAASA,KAGlC,SAAS6sC,EAAQnB,GACzC,OAAOqB,EAAgBF,EAAQnB,EAAOsB,KAa1C,SAAS6L,GAAQl5C,EAAY6uC,GAC3B,IAAIhoC,EAAS,EAIb,OAHAguC,GAAS70C,EAAY,SAASK,EAAOgW,EAAOrW,GAC1C6G,IAAWgoC,EAASxuC,EAAOgW,EAAOrW,IAAe,IAE5C6G,EAYT,SAASsyC,GAAS5M,EAAOsC,GACvB,IAAIx4B,GAAS,EACT3P,EAAU2tC,KACVtmC,EAASw+B,EAAMx+B,OACfumC,EAAW5tC,GAAWgmC,EACtB0M,EAAU9E,GAAYvmC,GAAUwmC,EAChCzF,EAAOsK,EAAU5E,KAAgB,KACjC3tC,KAEAioC,GACFpoC,EAAUgqC,GACV4D,GAAW,IAEX8E,GAAU,EACVtK,EAAOD,KAAgBhoC,GAEzB6tC,EACA,OAASr+B,EAAQtI,GAAQ,CACvB,IAAI1N,EAAQksC,EAAMl2B,GACd04B,EAAWF,EAAWA,EAASxuC,EAAOgW,EAAOk2B,GAASlsC,EAE1D,GAAIi0C,GAAYj0C,GAAUA,EAAO,CAE/B,IADA,IAAIg5C,EAAYvK,EAAK/gC,OACdsrC,KACL,GAAIvK,EAAKuK,KAAetK,EACtB,SAAS2F,EAGT7F,GACFC,EAAKnuC,KAAKouC,GAEZloC,EAAOlG,KAAKN,QAELqG,EAAQooC,EAAMC,EAAU,GAAK,KAChCF,GAAYuK,IACdtK,EAAKnuC,KAAKouC,GAEZloC,EAAOlG,KAAKN,IAGhB,OAAOwG,EAaT,SAASyyC,GAAWpM,EAAQvG,GAK1B,IAJA,IAAItwB,GAAS,EACTtI,EAAS44B,EAAM54B,OACflH,EAAS4J,GAAM1C,KAEVsI,EAAQtI,GACflH,EAAOwP,GAAS62B,EAAOvG,EAAMtwB,IAE/B,OAAOxP,EAcT,SAAS0yC,GAAUhN,EAAOC,EAAWgN,EAAQ/M,GAI3C,IAHA,IAAI1+B,EAASw+B,EAAMx+B,OACfsI,EAAQo2B,EAAY1+B,GAAU,GAE1B0+B,EAAYp2B,MAAYA,EAAQtI,IAAWy+B,EAAUD,EAAMl2B,GAAQA,EAAOk2B,KAClF,OAAOiN,EACH5B,GAAUrL,EAAQE,EAAY,EAAIp2B,EAASo2B,EAAYp2B,EAAQ,EAAItI,GACnE6pC,GAAUrL,EAAQE,EAAYp2B,EAAQ,EAAI,EAAKo2B,EAAY1+B,EAASsI,GAa1E,SAASojC,GAAiBp5C,EAAO+X,GAC/B,IAAIvR,EAASxG,EACTwG,aAAkByoC,KACpBzoC,EAASA,EAAOxG,SAKlB,IAHA,IAAIgW,GAAS,EACTtI,EAASqK,EAAQrK,SAEZsI,EAAQtI,GAAQ,CACvB,IAAIwK,EAASH,EAAQ/B,GACrBxP,EAAS0R,EAAOm6B,KAAK9xC,MAAM2X,EAAOo6B,QAASrB,IAAWzqC,GAAS0R,EAAO4D,OAExE,OAAOtV,EAcT,SAAS6yC,GAAYnN,EAAOlsC,EAAOs5C,GACjC,IAAIC,EAAM,EACNC,EAAOtN,EAAQA,EAAMx+B,OAAS6rC,EAElC,GAAoB,iBAATv5C,GAAqBA,GAAUA,GAASw5C,GAAQC,GAAuB,CAChF,KAAOF,EAAMC,GAAM,CACjB,IAAIE,EAAOH,EAAMC,IAAU,EACvB9K,EAAWxC,EAAMwN,IAEhBJ,EAAc5K,GAAY1uC,EAAU0uC,EAAW1uC,IAAwB,OAAb0uC,EAC7D6K,EAAMG,EAAM,EAEZF,EAAOE,EAGX,OAAOF,EAET,OAAOG,GAAczN,EAAOlsC,EAAOiiC,GAAUqX,GAgB/C,SAASK,GAAczN,EAAOlsC,EAAOwuC,EAAU8K,GAC7Ct5C,EAAQwuC,EAASxuC,GAQjB,IANA,IAAIu5C,EAAM,EACNC,EAAOtN,EAAQA,EAAMx+B,OAAS,EAC9BksC,EAAW55C,GAAUA,EACrB2rC,EAAsB,OAAV3rC,EACZ4rC,EAAa5rC,IAAUgU,EAEpBulC,EAAMC,GAAM,CACjB,IAAIE,EAAMxB,IAAaqB,EAAMC,GAAQ,GACjC9K,EAAWF,EAAStC,EAAMwN,IAC1BG,EAAQnL,IAAa16B,EACrB8lC,EAAcpL,GAAaA,EAE/B,GAAIkL,EACF,IAAIG,EAASD,GAAeR,OAE5BS,EADSpO,EACAmO,GAAeD,IAAUP,GAA0B,MAAZ5K,GACvC9C,EACAkO,IAAgBR,GAAcO,GAClB,MAAZnL,IAGA4K,EAAc5K,GAAY1uC,EAAU0uC,EAAW1uC,GAEtD+5C,EACFR,EAAMG,EAAM,EAEZF,EAAOE,EAGX,OAAOM,GAAUR,EAAMS,IAazB,SAASzH,GAAaH,EAAMC,EAASC,GACnC,GAAmB,mBAARF,EACT,OAAOpQ,GAET,GAAIqQ,IAAYt+B,EACd,OAAOq+B,EAET,OAAQE,GACN,KAAK,EAAG,OAAO,SAASvyC,GACtB,OAAOqyC,EAAK9wC,KAAK+wC,EAAStyC,IAE5B,KAAK,EAAG,OAAO,SAASA,EAAOgW,EAAOrW,GACpC,OAAO0yC,EAAK9wC,KAAK+wC,EAAStyC,EAAOgW,EAAOrW,IAE1C,KAAK,EAAG,OAAO,SAASwxC,EAAanxC,EAAOgW,EAAOrW,GACjD,OAAO0yC,EAAK9wC,KAAK+wC,EAASnB,EAAanxC,EAAOgW,EAAOrW,IAEvD,KAAK,EAAG,OAAO,SAASK,EAAO0rC,EAAOzrC,EAAK4sC,EAAQh4B,GACjD,OAAOw9B,EAAK9wC,KAAK+wC,EAAStyC,EAAO0rC,EAAOzrC,EAAK4sC,EAAQh4B,IAGzD,OAAO,WACL,OAAOw9B,EAAK9xC,MAAM+xC,EAAS/tC,YAW/B,SAAS21C,GAAYC,GACnB,IAAI3zC,EAAS,IAAI4zC,GAAYD,EAAOE,YAIpC,OAHW,IAAIC,GAAW9zC,GAErB3I,IAAI,IAAIy8C,GAAWH,IACjB3zC,EAaT,SAAS+zC,GAAYz+B,EAAM0+B,EAAUC,GAQnC,IAPA,IAAIC,EAAgBD,EAAQ/sC,OACxBitC,GAAa,EACbC,EAAaC,GAAU/+B,EAAKpO,OAASgtC,EAAe,GACpDI,GAAa,EACbC,EAAaP,EAAS9sC,OACtBlH,EAAS4J,GAAM2qC,EAAaH,KAEvBE,EAAYC,GACnBv0C,EAAOs0C,GAAaN,EAASM,GAE/B,OAASH,EAAYD,GACnBl0C,EAAOi0C,EAAQE,IAAc7+B,EAAK6+B,GAEpC,KAAOC,KACLp0C,EAAOs0C,KAAeh/B,EAAK6+B,KAE7B,OAAOn0C,EAaT,SAASw0C,GAAiBl/B,EAAM0+B,EAAUC,GASxC,IARA,IAAIQ,GAAgB,EAChBP,EAAgBD,EAAQ/sC,OACxBitC,GAAa,EACbC,EAAaC,GAAU/+B,EAAKpO,OAASgtC,EAAe,GACpDQ,GAAc,EACdC,EAAcX,EAAS9sC,OACvBlH,EAAS4J,GAAMwqC,EAAaO,KAEvBR,EAAYC,GACnBp0C,EAAOm0C,GAAa7+B,EAAK6+B,GAG3B,IADA,IAAIlgB,EAASkgB,IACJO,EAAaC,GACpB30C,EAAOi0B,EAASygB,GAAcV,EAASU,GAEzC,OAASD,EAAeP,GACtBl0C,EAAOi0B,EAASggB,EAAQQ,IAAiBn/B,EAAK6+B,KAEhD,OAAOn0C,EAWT,SAAS40C,GAAiBC,EAAQC,GAChC,OAAO,SAAS37C,EAAY6uC,EAAU8D,GACpC,IAAI9rC,EAAS80C,EAAcA,OAG3B,GAFA9M,EAAWoK,GAAYpK,EAAU8D,EAAS,GAEtC9zC,GAAQmB,GAIV,IAHA,IAAIqW,GAAS,EACTtI,EAAS/N,EAAW+N,SAEfsI,EAAQtI,GAAQ,CACvB,IAAI1N,EAAQL,EAAWqW,GACvBqlC,EAAO70C,EAAQxG,EAAOwuC,EAASxuC,EAAOgW,EAAOrW,GAAaA,QAG5D60C,GAAS70C,EAAY,SAASK,EAAOC,EAAKN,GACxC07C,EAAO70C,EAAQxG,EAAOwuC,EAASxuC,EAAOC,EAAKN,GAAaA,KAG5D,OAAO6G,GAWX,SAAS+0C,GAAeC,GACtB,OAAOC,GAAU,SAAS5O,EAAQ6O,GAChC,IAAI1lC,GAAS,EACTtI,EAAmB,MAAVm/B,EAAiB,EAAI6O,EAAQhuC,OACtCikC,EAAajkC,EAAS,EAAIguC,EAAQhuC,EAAS,GAAKsG,EAChD2nC,EAAQjuC,EAAS,EAAIguC,EAAQ,GAAK1nC,EAClCs+B,EAAU5kC,EAAS,EAAIguC,EAAQhuC,EAAS,GAAKsG,EAajD,IAXyB,mBAAd29B,GACTA,EAAaa,GAAab,EAAYW,EAAS,GAC/C5kC,GAAU,GAGVA,IADAikC,EAA+B,mBAAXW,EAAwBA,EAAUt+B,GAC9B,EAAI,EAE1B2nC,GAASC,GAAeF,EAAQ,GAAIA,EAAQ,GAAIC,KAClDhK,EAAajkC,EAAS,EAAIsG,EAAY29B,EACtCjkC,EAAS,KAEFsI,EAAQtI,GAAQ,CACvB,IAAImH,EAAS6mC,EAAQ1lC,GACjBnB,GACF2mC,EAAS3O,EAAQh4B,EAAQ88B,GAG7B,OAAO9E,IAYX,SAASgP,GAAehH,EAAUzI,GAChC,OAAO,SAASzsC,EAAY6uC,GAC1B,IAAI9gC,EAAS/N,EAAam8C,GAAUn8C,GAAc,EAClD,IAAKo8C,GAASruC,GACZ,OAAOmnC,EAASl1C,EAAY6uC,GAK9B,IAHA,IAAIx4B,EAAQo2B,EAAY1+B,GAAU,EAC9BsuC,EAAWtG,GAAS/1C,IAEhBysC,EAAYp2B,MAAYA,EAAQtI,KACa,IAA/C8gC,EAASwN,EAAShmC,GAAQA,EAAOgmC,KAIvC,OAAOr8C,GAWX,SAASs8C,GAAc7P,GACrB,OAAO,SAASS,EAAQ2B,EAAU0N,GAMhC,IALA,IAAIF,EAAWtG,GAAS7I,GACpBvG,EAAQ4V,EAASrP,GACjBn/B,EAAS44B,EAAM54B,OACfsI,EAAQo2B,EAAY1+B,GAAU,EAE1B0+B,EAAYp2B,MAAYA,EAAQtI,GAAS,CAC/C,IAAIzN,EAAMqmC,EAAMtwB,GAChB,IAA+C,IAA3Cw4B,EAASwN,EAAS/7C,GAAMA,EAAK+7C,GAC/B,MAGJ,OAAOnP,GAaX,SAASsP,GAAkB9J,EAAMC,GAG/B,SAASrwB,IAEP,OADU7kB,MAAQA,OAASg/C,IAAQh/C,gBAAgB6kB,EAAWo6B,EAAOhK,GAC3D9xC,MAAM+xC,EAAS/tC,WAJ3B,IAAI83C,EAAOC,GAAkBjK,GAM7B,OAAOpwB,EAUT,SAASkyB,GAAYjE,GACnB,OAAQC,IAAgBC,GAAO,IAAIH,GAASC,GAAU,KAWxD,SAASqM,GAAiBl1C,GACxB,OAAO,SAASwsB,GAMd,IALA,IAAI7d,GAAS,EACTk2B,EAAQsQ,GAAMC,GAAO5oB,IACrBnmB,EAASw+B,EAAMx+B,OACflH,EAAS,KAEJwP,EAAQtI,GACflH,EAASa,EAASb,EAAQ0lC,EAAMl2B,GAAQA,GAE1C,OAAOxP,GAYX,SAAS81C,GAAkBD,GACzB,OAAO,WAIL,IAAIvgC,EAAOvX,UACX,OAAQuX,EAAKpO,QACX,KAAK,EAAG,OAAO,IAAI2uC,EACnB,KAAK,EAAG,OAAO,IAAIA,EAAKvgC,EAAK,IAC7B,KAAK,EAAG,OAAO,IAAIugC,EAAKvgC,EAAK,GAAIA,EAAK,IACtC,KAAK,EAAG,OAAO,IAAIugC,EAAKvgC,EAAK,GAAIA,EAAK,GAAIA,EAAK,IAC/C,KAAK,EAAG,OAAO,IAAIugC,EAAKvgC,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,IACxD,KAAK,EAAG,OAAO,IAAIugC,EAAKvgC,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,IACjE,KAAK,EAAG,OAAO,IAAIugC,EAAKvgC,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,IAC1E,KAAK,EAAG,OAAO,IAAIugC,EAAKvgC,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,IAErF,IAAI4gC,EAAcC,GAAWN,EAAKv+C,WAC9B0I,EAAS61C,EAAK97C,MAAMm8C,EAAa5gC,GAIrC,OAAOrO,GAASjH,GAAUA,EAASk2C,GAWvC,SAASE,GAAYC,GACnB,SAASC,EAAUzK,EAAM0K,EAAOpB,GAC1BA,GAASC,GAAevJ,EAAM0K,EAAOpB,KACvCoB,EAAQ/oC,GAEV,IAAIxN,EAASw2C,GAAc3K,EAAMwK,EAAM7oC,EAAWA,EAAWA,EAAWA,EAAWA,EAAW+oC,GAE9F,OADAv2C,EAAO4nC,YAAc0O,EAAU1O,YACxB5nC,EAET,OAAOs2C,EAWT,SAASG,GAAezB,EAAU7J,GAChC,OAAO8J,GAAU,SAAS3/B,GACxB,IAAI+wB,EAAS/wB,EAAK,GAClB,OAAc,MAAV+wB,EACKA,GAET/wB,EAAKxb,KAAKqxC,GACH6J,EAASj7C,MAAMyT,EAAW8H,MAYrC,SAASohC,GAAerM,EAAYC,GAClC,OAAO,SAASnxC,EAAY6uC,EAAU8D,GAKpC,GAJIA,GAAWsJ,GAAej8C,EAAY6uC,EAAU8D,KAClD9D,EAAWx6B,GAGU,IADvBw6B,EAAWoK,GAAYpK,EAAU8D,EAAS,IAC7B5kC,OAAa,CAExB,IAAIlH,EAASoqC,GADbjxC,EAAanB,GAAQmB,GAAcA,EAAaw9C,GAAWx9C,GACpB6uC,EAAUqC,EAAYC,GAC7D,IAAMnxC,EAAW+N,QAAUlH,IAAWsqC,EACpC,OAAOtqC,EAGX,OAAOiuC,GAAa90C,EAAY6uC,EAAUqC,EAAYC,IAY1D,SAASsM,GAAWvI,EAAUzI,GAC5B,OAAO,SAASzsC,EAAYwsC,EAAWmG,GAErC,GADAnG,EAAYyM,GAAYzM,EAAWmG,EAAS,GACxC9zC,GAAQmB,GAAa,CACvB,IAAIqW,EAAQi2B,EAActsC,EAAYwsC,EAAWC,GACjD,OAAOp2B,GAAS,EAAIrW,EAAWqW,GAAShC,EAE1C,OAAO4gC,GAASj1C,EAAYwsC,EAAW0I,IAW3C,SAASwI,GAAgBjR,GACvB,OAAO,SAASF,EAAOC,EAAWmG,GAChC,OAAMpG,GAASA,EAAMx+B,QAGrBy+B,EAAYyM,GAAYzM,EAAWmG,EAAS,GACrCrG,EAAcC,EAAOC,EAAWC,KAH7B,GAcd,SAASkR,GAAcC,GACrB,OAAO,SAAS1Q,EAAQV,EAAWmG,GAEjC,OADAnG,EAAYyM,GAAYzM,EAAWmG,EAAS,GACrCsC,GAAS/H,EAAQV,EAAWoR,GAAY,IAWnD,SAASC,GAAWpR,GAClB,OAAO,WAOL,IANA,IAAInqB,EACAvU,EAASnJ,UAAUmJ,OACnBsI,EAAQo2B,EAAY1+B,GAAU,EAC9BotC,EAAY,EACZ2C,EAAQrtC,GAAM1C,GAEV0+B,EAAYp2B,MAAYA,EAAQtI,GAAS,CAC/C,IAAI2kC,EAAOoL,EAAM3C,KAAev2C,UAAUyR,GAC1C,GAAmB,mBAARq8B,EACT,MAAM,IAAIwB,GAAUC,IAEjB7xB,GAAWitB,GAAcpxC,UAAUkkC,MAA6B,WAArB0b,GAAYrL,KAC1DpwB,EAAU,IAAIitB,OAAkB,IAIpC,IADAl5B,EAAQiM,GAAW,EAAIvU,IACdsI,EAAQtI,GAAQ,CAGvB,IAAIiwC,EAAWD,GAFfrL,EAAOoL,EAAMznC,IAGTvT,EAAmB,WAAZk7C,EAAwBC,GAAQvL,GAAQr+B,EAGjDiO,EADExf,GAAQo7C,GAAWp7C,EAAK,KAAOA,EAAK,KAAOq7C,EAAWC,EAAaC,EAAeC,KAAgBx7C,EAAK,GAAGiL,QAAqB,GAAXjL,EAAK,GACjHwf,EAAQy7B,GAAYj7C,EAAK,KAAKlC,MAAM0hB,EAASxf,EAAK,IAElC,GAAf4vC,EAAK3kC,QAAemwC,GAAWxL,GAASpwB,EAAQ07B,KAAc17B,EAAQ+f,KAAKqQ,GAG1F,OAAO,WACL,IAAIv2B,EAAOvX,UACPvE,EAAQ8b,EAAK,GAEjB,GAAImG,GAA0B,GAAfnG,EAAKpO,QAAelP,GAAQwB,IAAUA,EAAM0N,QAAUwmC,EACnE,OAAOjyB,EAAQi8B,MAAMl+C,GAAOA,QAK9B,IAHA,IAAIgW,EAAQ,EACRxP,EAASkH,EAAS+vC,EAAMznC,GAAOzV,MAAMnD,KAAM0e,GAAQ9b,IAE9CgW,EAAQtI,GACflH,EAASi3C,EAAMznC,GAAOzU,KAAKnE,KAAMoJ,GAEnC,OAAOA,IAab,SAAS23C,GAAcC,EAAWvJ,GAChC,OAAO,SAASl1C,EAAY6uC,EAAU8D,GACpC,MAA2B,mBAAZ9D,GAA0B8D,IAAYt+B,GAAaxV,GAAQmB,GACtEy+C,EAAUz+C,EAAY6uC,GACtBqG,EAASl1C,EAAY6yC,GAAahE,EAAU8D,EAAS,KAW7D,SAAS+L,GAAYd,GACnB,OAAO,SAAS1Q,EAAQ2B,EAAU8D,GAIhC,MAHuB,mBAAZ9D,GAA0B8D,IAAYt+B,IAC/Cw6B,EAAWgE,GAAahE,EAAU8D,EAAS,IAEtCiL,EAAW1Q,EAAQ2B,EAAU4G,KAWxC,SAASkJ,GAAaf,GACpB,OAAO,SAAS1Q,EAAQ2B,EAAU8D,GAIhC,MAHuB,mBAAZ9D,GAA0B8D,IAAYt+B,IAC/Cw6B,EAAWgE,GAAahE,EAAU8D,EAAS,IAEtCiL,EAAW1Q,EAAQ2B,IAW9B,SAAS+P,GAAmBC,GAC1B,OAAO,SAAS3R,EAAQ2B,EAAU8D,GAChC,IAAI9rC,KASJ,OARAgoC,EAAWoK,GAAYpK,EAAU8D,EAAS,GAE1CmB,GAAW5G,EAAQ,SAAS7sC,EAAOC,EAAK4sC,GACtC,IAAI4R,EAASjQ,EAASxuC,EAAOC,EAAK4sC,GAClC5sC,EAAMu+C,EAAYC,EAASx+C,EAC3BD,EAAQw+C,EAAYx+C,EAAQy+C,EAC5Bj4C,EAAOvG,GAAOD,IAETwG,GAWX,SAASk4C,GAAatS,GACpB,OAAO,SAASvY,EAAQnmB,EAAQg/B,GAE9B,OADA7Y,EAAS2Y,EAAa3Y,IACduY,EAAYvY,EAAS,IAAM8qB,GAAc9qB,EAAQnmB,EAAQg/B,IAAUN,EAAY,GAAKvY,IAWhG,SAAS+qB,GAAc/B,GACrB,IAAIgC,EAAcpD,GAAU,SAASpJ,EAAMmI,GACzC,IAAIC,EAAUtM,EAAeqM,EAAUqE,EAAYzQ,aACnD,OAAO4O,GAAc3K,EAAMwK,EAAM7oC,EAAWwmC,EAAUC,KAExD,OAAOoE,EAWT,SAASC,GAAaV,EAAWvJ,GAC/B,OAAO,SAASl1C,EAAY6uC,EAAU2C,EAAamB,GACjD,IAAIlB,EAAgB7sC,UAAUmJ,OAAS,EACvC,MAA2B,mBAAZ8gC,GAA0B8D,IAAYt+B,GAAaxV,GAAQmB,GACtEy+C,EAAUz+C,EAAY6uC,EAAU2C,EAAaC,GAC7CgH,GAAWz4C,EAAYi5C,GAAYpK,EAAU8D,EAAS,GAAInB,EAAaC,EAAeyD,IAqB9F,SAASkK,GAAoB1M,EAAM2M,EAAS1M,EAASkI,EAAUC,EAASwE,EAAeC,EAAcC,EAAQC,EAAKrC,GAShH,SAAS96B,IAOP,IAJA,IAAIvU,EAASnJ,UAAUmJ,OACnBsI,EAAQtI,EACRoO,EAAO1L,GAAM1C,GAEVsI,KACL8F,EAAK9F,GAASzR,UAAUyR,GAQ1B,GANIwkC,IACF1+B,EAAOy+B,GAAYz+B,EAAM0+B,EAAUC,IAEjCwE,IACFnjC,EAAOk/B,GAAiBl/B,EAAMmjC,EAAeC,IAE3CG,GAAWC,EAAc,CAC3B,IAAIlR,EAAcnsB,EAAQmsB,YACtBmR,EAAcpR,EAAeryB,EAAMsyB,GAGvC,IADA1gC,GAAU6xC,EAAY7xC,QACTqvC,EAAO,CAClB,IAAIyC,EAAYL,EAAS1O,GAAU0O,GAAUnrC,EACzCyrC,EAAW5E,GAAUkC,EAAQrvC,EAAQ,GAMzCsxC,GAAYK,EAAUrB,EAAe0B,EACrCV,KAAaK,EAAUK,EAAqB1B,GAEvC2B,IACHX,KAAaY,EAAYC,IAE3B,IAAIC,GAAWzN,EAAM2M,EAAS1M,EATZ+M,EAAUvjC,EAAO9H,EAFjBqrC,EAAUE,EAAcvrC,EAGnBqrC,EAAUrrC,EAAY8H,EAFvBujC,EAAUrrC,EAAYurC,EAUwDC,EAAWJ,EAAKK,GAChHj5C,EAASu4C,GAAoBx+C,MAAMyT,EAAW8rC,GAMlD,OAJIjC,GAAWxL,IACb0N,GAAQv5C,EAAQs5C,GAElBt5C,EAAO4nC,YAAcA,EACd5nC,GAGX,IAAIk2C,EAAcsD,EAAS1N,EAAUl1C,KACjCuN,EAAKs1C,EAAYvD,EAAYrK,GAAQA,EAWzC,OATI8M,IACFrjC,EAAOokC,GAAQpkC,EAAMqjC,IAEnBgB,GAASf,EAAMtjC,EAAKpO,SACtBoO,EAAKpO,OAAS0xC,GAEZhiD,MAAQA,OAASg/C,IAAQh/C,gBAAgB6kB,IAC3CtX,EAAK0xC,GAAQC,GAAkBjK,IAE1B1nC,EAAGpK,MAAMm8C,EAAa5gC,GAjE/B,IAAIqkC,EAAQnB,EAAUlB,EAClBkC,EAAShB,EAAUY,EACnBK,EAAYjB,EAAUa,EACtBR,EAAUL,EAAUjB,EACpB4B,EAAeX,EAAUoB,EACzBd,EAAeN,EAAUqB,EACzBhE,EAAO4D,EAAYjsC,EAAYsoC,GAAkBjK,GA6DrD,OAAOpwB,EAaT,SAAS08B,GAAc9qB,EAAQnmB,EAAQg/B,GACrC,IAAI4T,EAAYzsB,EAAOnmB,OAGvB,GAFAA,GAAUA,EAEN4yC,GAAa5yC,IAAW6yC,GAAe7yC,GACzC,MAAO,GAET,IAAI8yC,EAAY9yC,EAAS4yC,EAEzB,OADA5T,EAAiB,MAATA,EAAgB,IAAOA,EAAQ,GAChC9pB,GAAO8pB,EAAO+T,GAAWD,EAAY9T,EAAMh/B,SAASoa,MAAM,EAAG04B,GAetE,SAASE,GAAqBrO,EAAM2M,EAAS1M,EAASkI,GAIpD,SAASv4B,IASP,IANA,IAAI04B,GAAa,EACbC,EAAar2C,UAAUmJ,OACvBotC,GAAa,EACbC,EAAaP,EAAS9sC,OACtBoO,EAAO1L,GAAM2qC,EAAaH,KAErBE,EAAYC,GACnBj/B,EAAKg/B,GAAaN,EAASM,GAE7B,KAAOF,KACL9+B,EAAKg/B,KAAev2C,YAAYo2C,GAGlC,OADUv9C,MAAQA,OAASg/C,IAAQh/C,gBAAgB6kB,EAAWo6B,EAAOhK,GAC3D9xC,MAAMy/C,EAAS1N,EAAUl1C,KAAM0e,GAnB3C,IAAIkkC,EAAShB,EAAUY,EACnBvD,EAAOC,GAAkBjK,GAoB7B,OAAOpwB,EAUT,SAAS0+B,GAAYC,GACnB,IAAIvO,EAAOnoC,GAAK02C,GAChB,OAAO,SAASj+C,EAAQk+C,GAEtB,OADAA,EAAYA,IAAc7sC,EAAY,GAAM6sC,GAAa,IAEvDA,EAAYpe,GAAI,GAAIoe,GACbxO,EAAK1vC,EAASk+C,GAAaA,GAE7BxO,EAAK1vC,IAWhB,SAASm+C,GAAkBxH,GACzB,OAAO,SAASpN,EAAOlsC,EAAOwuC,EAAU8D,GACtC,IAAIjrC,EAAWuxC,GAAYpK,GAC3B,OAAoB,MAAZA,GAAoBnnC,IAAa+qC,GACrCiH,GAAYnN,EAAOlsC,EAAOs5C,GAC1BK,GAAczN,EAAOlsC,EAAOqH,EAASmnC,EAAU8D,EAAS,GAAIgH,IA6BpE,SAAS0D,GAAc3K,EAAM2M,EAAS1M,EAASkI,EAAUC,EAAS0E,EAAQC,EAAKrC,GAC7E,IAAIkD,EAAYjB,EAAUa,EAC1B,IAAKI,GAA4B,mBAAR5N,EACvB,MAAM,IAAIwB,GAAUC,GAEtB,IAAIpmC,EAAS8sC,EAAWA,EAAS9sC,OAAS,EAM1C,GALKA,IACHsxC,KAAahB,EAAe0B,GAC5BlF,EAAWC,EAAUzmC,GAEvBtG,GAAW+sC,EAAUA,EAAQ/sC,OAAS,EAClCsxC,EAAUU,EAAoB,CAChC,IAAIT,EAAgBzE,EAChB0E,EAAezE,EAEnBD,EAAWC,EAAUzmC,EAEvB,IAAIvR,EAAOw9C,EAAYjsC,EAAY4pC,GAAQvL,GACvCyN,GAAWzN,EAAM2M,EAAS1M,EAASkI,EAAUC,EAASwE,EAAeC,EAAcC,EAAQC,EAAKrC,GAWpG,GATIt6C,IACFs+C,GAAUjB,EAASr9C,GACnBu8C,EAAUc,EAAQ,GAClB/C,EAAQ+C,EAAQ,IAElBA,EAAQ,GAAc,MAAT/C,EACRkD,EAAY,EAAI5N,EAAK3kC,OACrBmtC,GAAUkC,EAAQrvC,EAAQ,IAAM,EAEjCsxC,GAAWY,EACb,IAAIp5C,EAAS21C,GAAkB2D,EAAQ,GAAIA,EAAQ,SAInDt5C,EAHUw4C,GAAWhB,GAAgBgB,IAAYY,EAAY5B,IAAmB8B,EAAQ,GAAGpyC,OAGlFqxC,GAAoBx+C,MAAMyT,EAAW8rC,GAFrCY,GAAqBngD,MAAMyT,EAAW8rC,GAKjD,OADar9C,EAAOu+C,GAAcjB,IACpBv5C,EAAQs5C,GAiBxB,SAASnJ,GAAYzK,EAAOR,EAAOoK,EAAWnE,EAAYiE,EAAS/C,EAAQC,GACzE,IAAI98B,GAAS,EACTirC,EAAY/U,EAAMx+B,OAClB8iC,EAAY9E,EAAMh+B,OAEtB,GAAIuzC,GAAazQ,KAAeoF,GAAWpF,EAAYyQ,GACrD,OAAO,EAGT,OAASjrC,EAAQirC,GAAW,CAC1B,IAAIC,EAAWhV,EAAMl2B,GACjBmrC,EAAWzV,EAAM11B,GACjBxP,EAASmrC,EAAaA,EAAWiE,EAAUuL,EAAWD,EAAUtL,EAAUsL,EAAWC,EAAUnrC,GAAShC,EAE5G,GAAIxN,IAAWwN,EAAW,CACxB,GAAIxN,EACF,SAEF,OAAO,EAGT,GAAIovC,GACF,IAAKvE,GAAU3F,EAAO,SAASyV,GACzB,OAAOD,IAAaC,GAAYrL,EAAUoL,EAAUC,EAAUxP,EAAYiE,EAAS/C,EAAQC,KAE/F,OAAO,OAEJ,GAAMoO,IAAaC,IAAYrL,EAAUoL,EAAUC,EAAUxP,EAAYiE,EAAS/C,EAAQC,GAC/F,OAAO,EAGX,OAAO,EAgBT,SAAS0D,GAAW3J,EAAQnB,EAAOsH,GACjC,OAAQA,GACN,KAAKoO,EACL,KAAKC,EAGH,OAAQxU,IAAWnB,EAErB,KAAK4V,EACH,OAAOzU,EAAOvvC,MAAQouC,EAAMpuC,MAAQuvC,EAAO7qC,SAAW0pC,EAAM1pC,QAE9D,KAAKu/C,EAEH,OAAQ1U,IAAWA,EACfnB,IAAUA,EACVmB,IAAWnB,EAEjB,KAAK8V,EACL,KAAKC,EAGH,OAAO5U,GAAWnB,EAAQ,GAE9B,OAAO,EAiBT,SAASkL,GAAa/J,EAAQnB,EAAOoK,EAAWnE,EAAYiE,EAAS/C,EAAQC,GAC3E,IAAI4O,EAAWjd,GAAKoI,GAChB8U,EAAYD,EAASh0C,OAIzB,GAAIi0C,GAHWld,GAAKiH,GACKh+B,SAEMkoC,EAC7B,OAAO,EAGT,IADA,IAAI5/B,EAAQ2rC,EACL3rC,KAAS,CACd,IAAI/V,EAAMyhD,EAAS1rC,GACnB,KAAM4/B,EAAU31C,KAAOyrC,EAAQvmC,GAAe5D,KAAKmqC,EAAOzrC,IACxD,OAAO,EAIX,IADA,IAAI2hD,EAAWhM,IACN5/B,EAAQ2rC,GAAW,CAE1B,IAAI3K,EAAWnK,EADf5sC,EAAMyhD,EAAS1rC,IAEXmrC,EAAWzV,EAAMzrC,GACjBuG,EAASmrC,EAAaA,EAAWiE,EAAUuL,EAAWnK,EAAUpB,EAASoB,EAAWmK,EAAUlhD,GAAO+T,EAGzG,KAAMxN,IAAWwN,EAAY8hC,EAAUkB,EAAUmK,EAAUxP,EAAYiE,EAAS/C,EAAQC,GAAUtsC,GAChG,OAAO,EAETo7C,IAAaA,EAAkB,eAAP3hD,GAE1B,IAAK2hD,EAAU,CACb,IAAIC,EAAUhV,EAAOpsC,YACjBqhD,EAAUpW,EAAMjrC,YAGpB,GAAIohD,GAAWC,GACV,gBAAiBjV,GAAU,gBAAiBnB,KACzB,mBAAXmW,GAAyBA,aAAmBA,GACjC,mBAAXC,GAAyBA,aAAmBA,GACvD,OAAO,EAGX,OAAO,EAYT,SAASlJ,GAAYvG,EAAMC,EAASC,GAClC,IAAI/rC,EAASwoC,EAAO3nC,UAAYA,GAEhC,OADAb,EAASA,IAAWa,GAAW+qC,GAAe5rC,EACvC+rC,EAAW/rC,EAAO6rC,EAAMC,EAASC,GAAY/rC,EAqBtD,SAASk3C,GAAYrL,GAKnB,IAJA,IAAI7rC,EAAS6rC,EAAK/0C,KACd4uC,EAAQ6V,GAAUv7C,GAClBkH,EAASw+B,EAAQA,EAAMx+B,OAAS,EAE7BA,KAAU,CACf,IAAIjL,EAAOypC,EAAMx+B,GACbs0C,EAAYv/C,EAAK4vC,KACrB,GAAiB,MAAb2P,GAAqBA,GAAa3P,EACpC,OAAO5vC,EAAKnF,KAGhB,OAAOkJ,EAYT,SAASwtC,GAAWr0C,EAAYiQ,EAAQ6wB,GACtC,IAAIj6B,EAASwoC,EAAO3oC,SAAWA,GAE/B,OADAG,EAASA,IAAWH,GAAUgmC,EAAc7lC,EACrC7G,EAAa6G,EAAO7G,EAAYiQ,EAAQ6wB,GAAaj6B,EAsB9D,SAAS2wC,GAAatK,GAIpB,IAHA,IAAIrmC,EAASy7C,GAAMpV,GACfn/B,EAASlH,EAAOkH,OAEbA,KACLlH,EAAOkH,GAAQ,GAAK2pC,GAAmB7wC,EAAOkH,GAAQ,IAExD,OAAOlH,EAWT,SAAS07C,GAAUrV,EAAQ5sC,GACzB,IAAID,EAAkB,MAAV6sC,EAAiB74B,EAAY64B,EAAO5sC,GAChD,OAAOkiD,GAASniD,GAASA,EAAQgU,EAanC,SAASouC,GAAQrlC,EAAO9Q,EAAKo2C,GAI3B,IAHA,IAAIrsC,GAAS,EACTtI,EAAS20C,EAAW30C,SAEfsI,EAAQtI,GAAQ,CACvB,IAAIjL,EAAO4/C,EAAWrsC,GAClBvC,EAAOhR,EAAKgR,KAEhB,OAAQhR,EAAKpF,MACX,IAAK,OAAa0f,GAAStJ,EAAM,MACjC,IAAK,YAAaxH,GAAOwH,EAAM,MAC/B,IAAK,OAAaxH,EAAM+tC,GAAU/tC,EAAK8Q,EAAQtJ,GAAO,MACtD,IAAK,YAAasJ,EAAQ89B,GAAU99B,EAAO9Q,EAAMwH,IAGrD,OAASsJ,MAASA,EAAO9Q,IAAOA,GAUlC,SAAS8mC,GAAe7G,GACtB,IAAIx+B,EAASw+B,EAAMx+B,OACflH,EAAS,IAAI0lC,EAAMzrC,YAAYiN,GAOnC,OAJIA,GAA6B,iBAAZw+B,EAAM,IAAkB/mC,GAAe5D,KAAK2qC,EAAO,WACtE1lC,EAAOwP,MAAQk2B,EAAMl2B,MACrBxP,EAAO8H,MAAQ49B,EAAM59B,OAEhB9H,EAUT,SAASgtC,GAAgB3G,GACvB,IAAIwP,EAAOxP,EAAOpsC,YAIlB,MAHqB,mBAAR47C,GAAsBA,aAAgBA,IACjDA,EAAOiG,IAEF,IAAIjG,EAeb,SAAS9I,GAAe1G,EAAQmG,EAAKJ,GACnC,IAAIyJ,EAAOxP,EAAOpsC,YAClB,OAAQuyC,GACN,KAAKuP,GACH,OAAOrI,GAAYrN,GAErB,KAAKuU,EACL,KAAKC,EACH,OAAO,IAAIhF,GAAMxP,GAEnB,KAAK2V,GAAY,KAAKC,GACtB,KAAKC,GAAS,KAAKC,GAAU,KAAKC,GAClC,KAAKC,GAAU,KAAKC,GAAiB,KAAKC,GAAW,KAAKC,GACxD,IAAI7I,EAAStN,EAAOsN,OACpB,OAAO,IAAIkC,EAAKzJ,EAASsH,GAAYC,GAAUA,EAAQtN,EAAOoW,WAAYpW,EAAOn/B,QAEnF,KAAK6zC,EACL,KAAKE,EACH,OAAO,IAAIpF,EAAKxP,GAElB,KAAK2U,EACH,IAAIh7C,EAAS,IAAI61C,EAAKxP,EAAOh4B,OAAQquC,GAAQC,KAAKtW,IAClDrmC,EAAO8xB,UAAYuU,EAAOvU,UAE9B,OAAO9xB,EAYT,SAAS48C,GAAWvW,EAAQ/nC,EAAMgX,GAClB,MAAV+wB,GAAmBuK,GAAMtyC,EAAM+nC,KAEjCA,EAAwB,IADxB/nC,EAAOwyC,GAAOxyC,IACA4I,OAAcm/B,EAAS2I,GAAQ3I,EAAQ0K,GAAUzyC,EAAM,GAAI,IACzEA,EAAO/B,GAAK+B,IAEd,IAAIutC,EAAiB,MAAVxF,EAAiBA,EAASA,EAAO/nC,GAC5C,OAAe,MAARutC,EAAer+B,EAAYq+B,EAAK9xC,MAAMssC,EAAQ/wB,GAUvD,SAASm2B,GAAYjyC,GACnB,OAAgB,MAATA,GAAiB+7C,GAASD,GAAU97C,IAW7C,SAASmyC,GAAQnyC,EAAO0N,GAGtB,OAFA1N,EAAyB,iBAATA,GAAqBqjD,GAAS71C,KAAKxN,IAAWA,GAAS,EACvE0N,EAAmB,MAAVA,EAAiB41C,GAAmB51C,EACtC1N,GAAS,GAAKA,EAAQ,GAAK,GAAKA,EAAQ0N,EAYjD,SAASkuC,GAAe57C,EAAOgW,EAAO62B,GACpC,IAAKp/B,GAASo/B,GACZ,OAAO,EAET,IAAIxvC,SAAc2Y,EAClB,GAAY,UAAR3Y,EACG40C,GAAYpF,IAAWsF,GAAQn8B,EAAO62B,EAAOn/B,QACrC,UAARrQ,GAAoB2Y,KAAS62B,EAAS,CAC3C,IAAInB,EAAQmB,EAAO72B,GACnB,OAAOhW,GAAUA,EAASA,IAAU0rC,EAAUA,GAAUA,EAE1D,OAAO,EAWT,SAAS0L,GAAMp3C,EAAO6sC,GACpB,IAAIxvC,SAAc2C,EAClB,SAAa,UAAR3C,GAAoBkmD,GAAc/1C,KAAKxN,IAAmB,UAAR3C,KAGnDmB,GAAQwB,MAGEwjD,GAAah2C,KAAKxN,IACJ,MAAV6sC,GAAkB7sC,KAAS01C,GAAS7I,IAUxD,SAASgR,GAAWxL,GAClB,IAAIsL,EAAWD,GAAYrL,GAC3B,KAAMsL,KAAY1O,GAAYnxC,WAC5B,OAAO,EAET,IAAI4tC,EAAQsD,EAAO2O,GACnB,GAAItL,IAAS3G,EACX,OAAO,EAET,IAAIjpC,EAAOm7C,GAAQlS,GACnB,QAASjpC,GAAQ4vC,IAAS5vC,EAAK,GAYjC,SAASs5C,GAAS/7C,GAChB,MAAuB,iBAATA,GAAqBA,GAAS,GAAKA,EAAQ,GAAK,GAAKA,GAASsjD,GAW9E,SAASjM,GAAmBr3C,GAC1B,OAAOA,GAAUA,IAAUyN,GAASzN,GAkBtC,SAAS+gD,GAAUt+C,EAAMoS,GACvB,IAAImqC,EAAUv8C,EAAK,GACfghD,EAAa5uC,EAAO,GACpB6uC,EAAa1E,EAAUyE,EACvBxP,EAAWyP,EAAa5F,EAExB6F,EACDF,GAAc3F,GAAYkB,GAAWjB,GACrC0F,GAAc3F,GAAYkB,GAAWf,GAAcx7C,EAAK,GAAGiL,QAAUmH,EAAO,IAC5E4uC,IAAe3F,EAAWG,IAAee,GAAWjB,EAGvD,IAAM9J,IAAY0P,EAChB,OAAOlhD,EAGLghD,EAAa7D,IACfn9C,EAAK,GAAKoS,EAAO,GAEjB6uC,GAAe1E,EAAUY,EAAa,EAAIQ,GAG5C,IAAIpgD,EAAQ6U,EAAO,GACnB,GAAI7U,EAAO,CACT,IAAIw6C,EAAW/3C,EAAK,GACpBA,EAAK,GAAK+3C,EAAWD,GAAYC,EAAUx6C,EAAO6U,EAAO,IAAM47B,GAAUzwC,GACzEyC,EAAK,GAAK+3C,EAAWrM,EAAe1rC,EAAK,GAAI6rC,GAAemC,GAAU57B,EAAO,IA0B/E,OAvBA7U,EAAQ6U,EAAO,MAEb2lC,EAAW/3C,EAAK,GAChBA,EAAK,GAAK+3C,EAAWQ,GAAiBR,EAAUx6C,EAAO6U,EAAO,IAAM47B,GAAUzwC,GAC9EyC,EAAK,GAAK+3C,EAAWrM,EAAe1rC,EAAK,GAAI6rC,GAAemC,GAAU57B,EAAO,MAG/E7U,EAAQ6U,EAAO,MAEbpS,EAAK,GAAKguC,GAAUzwC,IAGlByjD,EAAa3F,IACfr7C,EAAK,GAAgB,MAAXA,EAAK,GAAaoS,EAAO,GAAKmlC,GAAUv3C,EAAK,GAAIoS,EAAO,KAGrD,MAAXpS,EAAK,KACPA,EAAK,GAAKoS,EAAO,IAGnBpS,EAAK,GAAKoS,EAAO,GACjBpS,EAAK,GAAKihD,EAEHjhD,EAWT,SAASmhD,GAAcpS,EAAaC,GAClC,OAAOD,IAAgBx9B,EAAYy9B,EAAc5yC,GAAM2yC,EAAaC,EAAamS,IAYnF,SAASC,GAAYhX,EAAQvG,GAC3BuG,EAAS6I,GAAS7I,GAMlB,IAJA,IAAI72B,GAAS,EACTtI,EAAS44B,EAAM54B,OACflH,OAEKwP,EAAQtI,GAAQ,CACvB,IAAIzN,EAAMqmC,EAAMtwB,GACZ/V,KAAO4sC,IACTrmC,EAAOvG,GAAO4sC,EAAO5sC,IAGzB,OAAOuG,EAYT,SAASs9C,GAAejX,EAAQV,GAC9B,IAAI3lC,KAMJ,OALA0uC,GAAUrI,EAAQ,SAAS7sC,EAAOC,EAAK4sC,GACjCV,EAAUnsC,EAAOC,EAAK4sC,KACxBrmC,EAAOvG,GAAOD,KAGXwG,EAaT,SAAS05C,GAAQhU,EAAO8L,GAKtB,IAJA,IAAIiJ,EAAY/U,EAAMx+B,OAClBA,EAASssC,GAAUhC,EAAQtqC,OAAQuzC,GACnC8C,EAAWtT,GAAUvE,GAElBx+B,KAAU,CACf,IAAIsI,EAAQgiC,EAAQtqC,GACpBw+B,EAAMx+B,GAAUykC,GAAQn8B,EAAOirC,GAAa8C,EAAS/tC,GAAShC,EAEhE,OAAOk4B,EA4CT,SAAS8X,GAASnX,GAWhB,IAVA,IAAIvG,EAAQ8O,GAAOvI,GACfqF,EAAc5L,EAAM54B,OACpBA,EAASwkC,GAAerF,EAAOn/B,OAE/Bu2C,IAAiBv2C,GAAUquC,GAASruC,KACrClP,GAAQquC,IAAWoI,GAAYpI,IAE9B72B,GAAS,EACTxP,OAEKwP,EAAQk8B,GAAa,CAC5B,IAAIjyC,EAAMqmC,EAAMtwB,IACXiuC,GAAgB9R,GAAQlyC,EAAKyN,IAAYvI,GAAe5D,KAAKsrC,EAAQ5sC,KACxEuG,EAAOlG,KAAKL,GAGhB,OAAOuG,EAUT,SAAS22C,GAAWn9C,GAClB,OAAa,MAATA,KAGCiyC,GAAYjyC,GAGVyN,GAASzN,GAASA,EAAQsiD,GAAOtiD,GAF/BkwC,GAAOlwC,GAYlB,SAAS01C,GAAS11C,GAChB,OAAOyN,GAASzN,GAASA,EAAQsiD,GAAOtiD,GAU1C,SAASs3C,GAAOt3C,GACd,GAAIxB,GAAQwB,GACV,OAAOA,EAET,IAAIwG,KAIJ,OAHAgmC,EAAaxsC,GAAO+K,QAAQm5C,GAAY,SAASC,EAAOxhD,EAAQyhD,EAAOvwB,GACrErtB,EAAOlG,KAAK8jD,EAAQvwB,EAAO9oB,QAAQs5C,GAAc,MAAS1hD,GAAUwhD,KAE/D39C,EAUT,SAAS2oC,GAAaltB,GACpB,OAAOA,aAAmBgtB,GACtBhtB,EAAQa,QACR,IAAIosB,GAAcjtB,EAAQqtB,YAAartB,EAAQutB,UAAWiB,GAAUxuB,EAAQstB,cAqHlF,SAAS1T,GAAKqQ,EAAO9pB,EAAGu5B,GAEtB,OADazP,EAAQA,EAAMx+B,OAAS,KAIhCiuC,EAAQC,GAAe1P,EAAO9pB,EAAGu5B,GAAc,MAALv5B,KAC5CA,EAAI,GAECm1B,GAAUrL,EAAO9pB,EAAI,EAAI,EAAIA,OA2BtC,SAASkiC,GAAUpY,EAAO9pB,EAAGu5B,GAC3B,IAAIjuC,EAASw+B,EAAQA,EAAMx+B,OAAS,EACpC,OAAKA,IAGDiuC,EAAQC,GAAe1P,EAAO9pB,EAAGu5B,GAAc,MAALv5B,KAC5CA,EAAI,GAENA,EAAI1U,IAAW0U,GAAK,GACbm1B,GAAUrL,EAAO,EAAG9pB,EAAI,EAAI,EAAIA,OA8QzC,SAASqF,GAAMykB,GACb,OAAOA,EAAQA,EAAM,GAAKl4B,EA6E5B,SAAS3N,GAAQ6lC,EAAOlsC,EAAOygC,GAC7B,IAAI/yB,EAASw+B,EAAQA,EAAMx+B,OAAS,EACpC,IAAKA,EACH,OAAQ,EAEV,GAAwB,iBAAb+yB,EACTA,EAAYA,EAAY,EAAIoa,GAAUntC,EAAS+yB,EAAW,GAAKA,OAC1D,GAAIA,EAAW,CACpB,IAAIzqB,EAAQqjC,GAAYnN,EAAOlsC,GAC/B,OAAIgW,EAAQtI,IACP1N,GAAUA,EAASA,IAAUksC,EAAMl2B,GAAWk2B,EAAMl2B,IAAWk2B,EAAMl2B,IACjEA,GAED,EAEV,OAAOq2B,EAAYH,EAAOlsC,EAAOygC,GAAa,GAoFhD,SAAS19B,GAAKmpC,GACZ,IAAIx+B,EAASw+B,EAAQA,EAAMx+B,OAAS,EACpC,OAAOA,EAASw+B,EAAMx+B,EAAS,GAAKsG,EA6MtC,SAASuwC,GAAKrY,GACZ,OAAOrQ,GAAKqQ,EAAO,GA8VrB,SAASsY,GAAKtY,EAAOuY,EAAUjW,EAAU8D,GAEvC,KADapG,EAAQA,EAAMx+B,OAAS,GAElC,SAEc,MAAZ+2C,GAAuC,kBAAZA,IAE7BjW,EAAWoN,GAAe1P,EAAOuY,EADjCnS,EAAU9D,GAC4Cx6B,EAAYywC,EAClEA,GAAW,GAEb,IAAIp9C,EAAWuxC,KAIf,OAHkB,MAAZpK,GAAoBnnC,IAAa+qC,KACrC5D,EAAWnnC,EAASmnC,EAAU8D,EAAS,IAEjCmS,GAAYzQ,MAAgB3H,EAChCkC,EAAWrC,EAAOsC,GAClBsK,GAAS5M,EAAOsC,GAqBtB,SAASkW,GAAMxY,GACb,IAAMA,IAASA,EAAMx+B,OACnB,SAEF,IAAIsI,GAAS,EACTtI,EAAS,EAEbw+B,EAAQ6E,GAAY7E,EAAO,SAASyY,GAClC,GAAI1S,GAAY0S,GAEd,OADAj3C,EAASmtC,GAAU8J,EAAMj3C,OAAQA,IAC1B,IAIX,IADA,IAAIlH,EAAS4J,GAAM1C,KACVsI,EAAQtI,GACflH,EAAOwP,GAASg7B,GAAS9E,EAAO2L,GAAa7hC,IAE/C,OAAOxP,EAuBT,SAASo+C,GAAU1Y,EAAOsC,EAAU8D,GAElC,KADapG,EAAQA,EAAMx+B,OAAS,GAElC,SAEF,IAAIlH,EAASk+C,GAAMxY,GACnB,OAAgB,MAAZsC,EACKhoC,GAETgoC,EAAWgE,GAAahE,EAAU8D,EAAS,GACpCtB,GAASxqC,EAAQ,SAASm+C,GAC/B,OAAOzT,GAAYyT,EAAOnW,EAAUx6B,GAAW,MA6FnD,SAAS6wC,GAAUve,EAAO4J,GACxB,IAAIl6B,GAAS,EACTtI,EAAS44B,EAAQA,EAAM54B,OAAS,EAChClH,KAKJ,KAHIkH,GAAWwiC,GAAW1xC,GAAQ8nC,EAAM,MACtC4J,QAEOl6B,EAAQtI,GAAQ,CACvB,IAAIzN,EAAMqmC,EAAMtwB,GACZk6B,EACF1pC,EAAOvG,GAAOiwC,EAAOl6B,GACZ/V,IACTuG,EAAOvG,EAAI,IAAMA,EAAI,IAGzB,OAAOuG,EA+DT,SAAS6d,GAAMrkB,GACb,IAAIwG,EAASwoC,EAAOhvC,GAEpB,OADAwG,EAAOgpC,WAAY,EACZhpC,EAoDT,SAASw7B,GAAKhiC,EAAO8kD,EAAaxS,GAChC,OAAOwS,EAAYvjD,KAAK+wC,EAAStyC,GA+TnC,SAASoE,GAAMzE,EAAYwsC,EAAWmG,GACpC,IAAID,EAAO7zC,GAAQmB,GAAcgxC,GAAa4D,GAO9C,OANIjC,GAAWsJ,GAAej8C,EAAYwsC,EAAWmG,KACnDnG,EAAYn4B,GAEU,mBAAbm4B,GAA2BmG,IAAYt+B,IAChDm4B,EAAYyM,GAAYzM,EAAWmG,EAAS,IAEvCD,EAAK1yC,EAAYwsC,GAoD1B,SAASlmC,GAAOtG,EAAYwsC,EAAWmG,GACrC,IAAID,EAAO7zC,GAAQmB,GAAcoxC,GAAc4D,GAE/C,OADAxI,EAAYyM,GAAYzM,EAAWmG,EAAS,GACrCD,EAAK1yC,EAAYwsC,GAiP1B,SAAS4Y,GAASplD,EAAYiQ,EAAQ6wB,EAAWkb,GAC/C,IAAIjuC,EAAS/N,EAAam8C,GAAUn8C,GAAc,EAUlD,OATKo8C,GAASruC,KAEZA,GADA/N,EAAauwC,GAAOvwC,IACA+N,QAGpB+yB,EADsB,iBAAbA,GAA0Bkb,GAASC,GAAehsC,EAAQ6wB,EAAWkb,GAClE,EAEAlb,EAAY,EAAIoa,GAAUntC,EAAS+yB,EAAW,GAAMA,GAAa,EAElD,iBAAd9gC,IAA2BnB,GAAQmB,IAAeU,GAASV,GACrE8gC,GAAa/yB,GAAU/N,EAAW0G,QAAQuJ,EAAQ6wB,IAAc,IAC9D/yB,GAAUsmC,GAAWr0C,EAAYiQ,EAAQ6wB,IAAc,EAgJhE,SAAS1gC,GAAIJ,EAAY6uC,EAAU8D,GACjC,IAAID,EAAO7zC,GAAQmB,GAAcqxC,GAAWkG,GAE5C,OADA1I,EAAWoK,GAAYpK,EAAU8D,EAAS,GACnCD,EAAK1yC,EAAY6uC,GA0N1B,SAASwW,GAAOrlD,EAAYyiB,EAAGu5B,GAC7B,GAAIA,EAAQC,GAAej8C,EAAYyiB,EAAGu5B,GAAc,MAALv5B,EAGjD,OADI1U,GADJ/N,EAAaw9C,GAAWx9C,IACA+N,QACR,EAAI/N,EAAWs4C,GAAW,EAAGvqC,EAAS,IAAMsG,EAE9D,IAAIgC,GAAS,EACTxP,EAASi7B,GAAQ9hC,GACjB+N,EAASlH,EAAOkH,OAChB4qB,EAAY5qB,EAAS,EAGzB,IADA0U,EAAI43B,GAAU53B,EAAI,EAAI,GAAMA,GAAK,EAAI1U,KAC5BsI,EAAQoM,GAAG,CAClB,IAAI6iC,EAAOhN,GAAWjiC,EAAOsiB,GACzBt4B,EAAQwG,EAAOy+C,GAEnBz+C,EAAOy+C,GAAQz+C,EAAOwP,GACtBxP,EAAOwP,GAAShW,EAGlB,OADAwG,EAAOkH,OAAS0U,EACT5b,EA+FT,SAASkR,GAAK/X,EAAYwsC,EAAWmG,GACnC,IAAID,EAAO7zC,GAAQmB,GAAc0xC,GAAYiH,GAO7C,OANIhG,GAAWsJ,GAAej8C,EAAYwsC,EAAWmG,KACnDnG,EAAYn4B,GAEU,mBAAbm4B,GAA2BmG,IAAYt+B,IAChDm4B,EAAYyM,GAAYzM,EAAWmG,EAAS,IAEvCD,EAAK1yC,EAAYwsC,GA2S1B,SAAS+Y,GAAO9iC,EAAGiwB,GACjB,IAAI7rC,EACJ,GAAmB,mBAAR6rC,EAAoB,CAC7B,GAAgB,mBAALjwB,EAKT,MAAM,IAAIyxB,GAAUC,GAJpB,IAAIqR,EAAO/iC,EACXA,EAAIiwB,EACJA,EAAO8S,EAKX,OAAO,WAOL,QANM/iC,EAAI,IACR5b,EAAS6rC,EAAK9xC,MAAMnD,KAAMmH,YAExB6d,GAAK,IACPiwB,EAAOr+B,GAEFxN,GA8RX,SAAS4+C,GAAS/S,EAAMuB,EAAM32C,GAoC5B,SAASooD,EAASC,EAAUz0B,GACtBA,GACF5f,GAAa4f,GAEf00B,EAAep5B,EAAYq5B,EAAexxC,EACtCsxC,IACFG,EAAa7yC,KACbpM,EAAS6rC,EAAK9xC,MAAM+xC,EAASx2B,GACxBqQ,GAAco5B,IACjBzpC,EAAOw2B,EAAUt+B,IAKvB,SAAS0xC,IACP,IAAIC,EAAY/R,GAAQhhC,KAAQgzC,GAC5BD,GAAa,GAAKA,EAAY/R,EAChCyR,EAASG,EAAcD,GAEvBp5B,EAAYziB,GAAWg8C,EAASC,GAIpC,SAASE,IACPR,EAASS,EAAU35B,GAGrB,SAAS45B,IAMP,GALAjqC,EAAOvX,UACPqhD,EAAQhzC,KACR0/B,EAAUl1C,KACVooD,EAAeM,IAAa35B,IAAc65B,IAE1B,IAAZC,EACF,IAAIC,EAAcF,IAAY75B,MACzB,CACAo5B,GAAiBS,IACpBP,EAAaG,GAEf,IAAID,EAAYM,GAAWL,EAAQH,GAC/BH,EAAWK,GAAa,GAAKA,EAAYM,EAEzCX,GACEC,IACFA,EAAet0C,GAAas0C,IAE9BE,EAAaG,EACbp/C,EAAS6rC,EAAK9xC,MAAM+xC,EAASx2B,IAErBypC,IACRA,EAAe77C,GAAWm8C,EAAYF,IAgB1C,OAbIL,GAAYn5B,EACdA,EAAYlb,GAAakb,GAEjBA,GAAaynB,IAASqS,IAC9B95B,EAAYziB,GAAWg8C,EAAS9R,IAE9BsS,IACFZ,GAAW,EACX9+C,EAAS6rC,EAAK9xC,MAAM+xC,EAASx2B,KAE3BwpC,GAAan5B,GAAco5B,IAC7BzpC,EAAOw2B,EAAUt+B,GAEZxN,EArGT,IAAIsV,EACAypC,EACA/+C,EACAo/C,EACAtT,EACAnmB,EACAq5B,EACAC,EAAa,EACbQ,GAAU,EACVH,GAAW,EAEf,GAAmB,mBAARzT,EACT,MAAM,IAAIwB,GAAUC,GAGtB,GADAF,EAAOA,EAAO,EAAI,GAAMA,GAAQ,GAChB,IAAZ32C,EAAkB,CACpB,IAAI+oD,GAAU,EACdF,GAAW,OACFr4C,GAASxQ,KAClB+oD,IAAY/oD,EAAQ+oD,QACpBC,EAAU,YAAahpD,GAAW49C,IAAW59C,EAAQgpD,SAAW,EAAGrS,GACnEkS,EAAW,aAAc7oD,IAAYA,EAAQ6oD,SAAWA,GAmF1D,OADAC,EAAUj5B,OA/EV,WACMX,GACFlb,GAAakb,GAEXo5B,GACFt0C,GAAas0C,GAEfE,EAAa,EACbF,EAAep5B,EAAYq5B,EAAexxC,GAwErC+xC,EA6IT,SAASI,GAAQ9T,EAAM+T,GACrB,GAAmB,mBAAR/T,GAAuB+T,GAA+B,mBAAZA,EACnD,MAAM,IAAIvS,GAAUC,GAEtB,IAAIuS,EAAW,WACb,IAAIvqC,EAAOvX,UACPtE,EAAMmmD,EAAWA,EAAS7lD,MAAMnD,KAAM0e,GAAQA,EAAK,GACnDR,EAAQ+qC,EAAS/qC,MAErB,GAAIA,EAAMhX,IAAIrE,GACZ,OAAOqb,EAAMnY,IAAIlD,GAEnB,IAAIuG,EAAS6rC,EAAK9xC,MAAMnD,KAAM0e,GAE9B,OADAuqC,EAAS/qC,MAAQA,EAAMzd,IAAIoC,EAAKuG,GACzBA,GAGT,OADA6/C,EAAS/qC,MAAQ,IAAI6qC,GAAQG,MACtBD,EA2NT,SAAS5K,GAAUpJ,EAAMt1B,GACvB,GAAmB,mBAARs1B,EACT,MAAM,IAAIwB,GAAUC,GAGtB,OADA/2B,EAAQ89B,GAAU99B,IAAU/I,EAAaq+B,EAAK3kC,OAAS,GAAOqP,GAAS,EAAI,GACpE,WAML,IALA,IAAIjB,EAAOvX,UACPyR,GAAS,EACTtI,EAASmtC,GAAU/+B,EAAKpO,OAASqP,EAAO,GACxCwnC,EAAOn0C,GAAM1C,KAERsI,EAAQtI,GACf62C,EAAKvuC,GAAS8F,EAAKiB,EAAQ/G,GAE7B,OAAQ+G,GACN,KAAK,EAAG,OAAOs1B,EAAK9wC,KAAKnE,KAAMmnD,GAC/B,KAAK,EAAG,OAAOlS,EAAK9wC,KAAKnE,KAAM0e,EAAK,GAAIyoC,GACxC,KAAK,EAAG,OAAOlS,EAAK9wC,KAAKnE,KAAM0e,EAAK,GAAIA,EAAK,GAAIyoC,GAEnD,IAAIgC,EAAYn2C,GAAM2M,EAAQ,GAE9B,IADA/G,GAAS,IACAA,EAAQ+G,GACfwpC,EAAUvwC,GAAS8F,EAAK9F,GAG1B,OADAuwC,EAAUxpC,GAASwnC,EACZlS,EAAK9xC,MAAMnD,KAAMmpD,IAuQ5B,SAASvhC,GAAGhlB,EAAO0rC,GACjB,OAAO1rC,EAAQ0rC,EA2CjB,SAASuJ,GAAYj1C,GACnB,OAAOguC,EAAahuC,IAAUiyC,GAAYjyC,IACxCmF,GAAe5D,KAAKvB,EAAO,YAAcwmD,GAAqBjlD,KAAKvB,EAAO,UAqK9E,SAASkvB,GAAQlvB,EAAO0rC,EAAOiG,EAAYW,GAEzC,IAAI9rC,GADJmrC,EAAkC,mBAAdA,EAA2Ba,GAAab,EAAYW,EAAS,GAAKt+B,GAC5D29B,EAAW3xC,EAAO0rC,GAAS13B,EACrD,OAAQxN,IAAWwN,EAAY2hC,GAAY31C,EAAO0rC,EAAOiG,KAAgBnrC,EAoB3E,SAASigD,GAAQzmD,GACf,OAAOguC,EAAahuC,IAAkC,iBAAjBA,EAAMgC,SAAuBixC,GAAY1xC,KAAKvB,IAAUshD,EAkD/F,SAAS5wC,GAAW1Q,GAIlB,OAAOyN,GAASzN,IAAUizC,GAAY1xC,KAAKvB,IAAUmzC,EAuBvD,SAAS1lC,GAASzN,GAGhB,IAAI3C,SAAc2C,EAClB,QAASA,IAAkB,UAAR3C,GAA4B,YAARA,GA8FzC,SAAS8kD,GAASniD,GAChB,OAAa,MAATA,IAGA0Q,GAAW1Q,GACN0mD,GAAWl5C,KAAKm5C,GAAWplD,KAAKvB,IAElCguC,EAAahuC,IAAU4mD,GAAap5C,KAAKxN,IA6ClD,SAAS2Q,GAAS3Q,GAChB,MAAuB,iBAATA,GAAsBguC,EAAahuC,IAAUizC,GAAY1xC,KAAKvB,IAAUuhD,EAiCxF,SAASjjD,GAAc0B,GACrB,IAAIq8C,EAGJ,IAAMrO,EAAahuC,IAAUizC,GAAY1xC,KAAKvB,IAAUozC,GAAc6B,GAAYj1C,KAC5EmF,GAAe5D,KAAKvB,EAAO,gBAA4D,mBAAzCq8C,EAAOr8C,EAAMS,gBAA4C47C,aAAgBA,GAC3H,OAAO,EAKT,IAAI71C,EAOJ,OAHA0uC,GAAUl1C,EAAO,SAAS0zC,EAAUzzC,GAClCuG,EAASvG,IAEJuG,IAAWwN,GAAa7O,GAAe5D,KAAKvB,EAAOwG,GAmB5D,SAAS09B,GAASlkC,GAChB,OAAOyN,GAASzN,IAAUizC,GAAY1xC,KAAKvB,IAAUwhD,EAmBvD,SAASnhD,GAASL,GAChB,MAAuB,iBAATA,GAAsBguC,EAAahuC,IAAUizC,GAAY1xC,KAAKvB,IAAUyhD,EAmBxF,SAASrL,GAAap2C,GACpB,OAAOguC,EAAahuC,IAAU+7C,GAAS/7C,EAAM0N,WAAam5C,GAAe5T,GAAY1xC,KAAKvB,IA2C5F,SAAS8mD,GAAG9mD,EAAO0rC,GACjB,OAAO1rC,EAAQ0rC,EA0CjB,SAASjK,GAAQzhC,GACf,IAAI0N,EAAS1N,EAAQ87C,GAAU97C,GAAS,EACxC,OAAK+7C,GAASruC,GAGTA,EAGE+iC,GAAUzwC,MALRkwC,GAAOlwC,GA+BlB,SAAS43C,GAAc53C,GACrB,OAAO6xC,GAAS7xC,EAAOo1C,GAAOp1C,IAkZhC,SAAS+mD,GAAUla,GACjB,OAAO0I,GAAc1I,EAAQuI,GAAOvI,IAoLtC,SAASuI,GAAOvI,GACd,GAAc,MAAVA,EACF,SAEGp/B,GAASo/B,KACZA,EAASyV,GAAOzV,IAElB,IAAIn/B,EAASm/B,EAAOn/B,OACpBA,EAAUA,GAAUquC,GAASruC,KAC1BlP,GAAQquC,IAAWoI,GAAYpI,KAAYn/B,GAAW,EAQzD,IANA,IAAI2uC,EAAOxP,EAAOpsC,YACduV,GAAS,EACTgxC,EAAyB,mBAAR3K,GAAsBA,EAAKv+C,YAAc+uC,EAC1DrmC,EAAS4J,GAAM1C,GACfu5C,EAAcv5C,EAAS,IAElBsI,EAAQtI,GACflH,EAAOwP,GAAUA,EAAQ,GAE3B,IAAK,IAAI/V,KAAO4sC,EACRoa,GAAe9U,GAAQlyC,EAAKyN,IACrB,eAAPzN,IAAyB+mD,IAAY7hD,GAAe5D,KAAKsrC,EAAQ5sC,KACrEuG,EAAOlG,KAAKL,GAGhB,OAAOuG,EAuHT,SAASy7C,GAAMpV,GACbA,EAAS6I,GAAS7I,GAOlB,IALA,IAAI72B,GAAS,EACTswB,EAAQ7B,GAAKoI,GACbn/B,EAAS44B,EAAM54B,OACflH,EAAS4J,GAAM1C,KAEVsI,EAAQtI,GAAQ,CACvB,IAAIzN,EAAMqmC,EAAMtwB,GAChBxP,EAAOwP,IAAU/V,EAAK4sC,EAAO5sC,IAE/B,OAAOuG,EA4MT,SAAS0pC,GAAOrD,GACd,OAAOoM,GAAWpM,EAAQpI,GAAKoI,IAkMjC,SAAS4P,GAAO5oB,GAEd,OADAA,EAAS2Y,EAAa3Y,KACLA,EAAO9oB,QAAQm8C,GAAU9Z,GAAcriC,QAAQo8C,GAAa,IAuQ/E,SAASvkC,GAAOiR,EAAQzR,GACtB,IAAI5b,EAAS,GAGb,GAFAqtB,EAAS2Y,EAAa3Y,IACtBzR,GAAKA,GACG,IAAMyR,IAAW0sB,GAAen+B,GACtC,OAAO5b,EAIT,GACM4b,EAAI,IACN5b,GAAUqtB,GAEZzR,EAAI81B,GAAY91B,EAAI,GACpByR,GAAUA,QACHzR,GAET,OAAO5b,EA8ST,SAASiyB,GAAK5E,EAAQ6Y,EAAOiP,GAC3B,IAAI37C,EAAQ6zB,EAEZ,OADAA,EAAS2Y,EAAa3Y,KAIlB8nB,EAAQC,GAAe57C,EAAO0sC,EAAOiP,GAAkB,MAATjP,GACzC7Y,EAAO/L,MAAM6mB,EAAiB9a,GAAS+a,EAAkB/a,GAAU,IAE5E6Y,GAAiB,GACV7Y,EAAO/L,MAAM2kB,EAAe5Y,EAAQ6Y,GAAQC,EAAgB9Y,EAAQ6Y,GAAS,IAN3E7Y,EA4MX,SAAS2oB,GAAM3oB,EAAQ4P,EAASkY,GAK9B,OAJIA,GAASC,GAAe/nB,EAAQ4P,EAASkY,KAC3ClY,EAAUzvB,IAEZ6f,EAAS2Y,EAAa3Y,IACRswB,MAAM1gB,GAAW2jB,QAuEjC,SAAS//C,GAASgrC,EAAMC,EAASqJ,GAI/B,OAHIA,GAASC,GAAevJ,EAAMC,EAASqJ,KACzCrJ,EAAUt+B,GAELg6B,EAAaqE,GAChBgV,GAAQhV,GACRD,GAAaC,EAAMC,GAwCzB,SAASrQ,GAASjiC,GAChB,OAAOA,EA4BT,SAASqnD,GAAQxyC,GACf,OAAO49B,GAAYE,GAAU99B,GAAQ,IA4HvC,SAASyyC,GAAMza,EAAQh4B,EAAQ5X,GAC7B,GAAe,MAAXA,EAAiB,CACnB,IAAIsqD,EAAQ95C,GAASoH,GACjByxB,EAAQihB,EAAQ9iB,GAAK5vB,GAAUb,EAC/BwzC,EAAelhB,GAASA,EAAM54B,OAAU6nC,GAAc1gC,EAAQyxB,GAAStyB,GAErEwzC,EAAcA,EAAY95C,OAAS65C,KACvCC,GAAc,EACdvqD,EAAU4X,EACVA,EAASg4B,EACTA,EAASzvC,MAGRoqD,IACHA,EAAcjS,GAAc1gC,EAAQ4vB,GAAK5vB,KAE3C,IAAIwP,GAAQ,EACRrO,GAAS,EACTk9B,EAASxiC,GAAWm8B,GACpBn/B,EAAS85C,EAAY95C,QAET,IAAZzQ,EACFonB,GAAQ,EACC5W,GAASxQ,IAAY,UAAWA,IACzConB,EAAQpnB,EAAQonB,OAElB,OAASrO,EAAQtI,GAAQ,CACvB,IAAIkzC,EAAa4G,EAAYxxC,GACzBq8B,EAAOx9B,EAAO+rC,GAElB/T,EAAO+T,GAAcvO,EACjBa,IACFrG,EAAO/uC,UAAU8iD,GAAe,SAASvO,GACvC,OAAO,WACL,IAAIhD,EAAWjyC,KAAKoyC,UACpB,GAAInrB,GAASgrB,EAAU,CACrB,IAAI7oC,EAASqmC,EAAOzvC,KAAKkyC,aAKzB,OAJc9oC,EAAO+oC,YAAckB,GAAUrzC,KAAKmyC,cAE1CjvC,MAAO+xC,KAAQA,EAAMv2B,KAAQvX,UAAW+tC,QAAWzF,IAC3DrmC,EAAOgpC,UAAYH,EACZ7oC,EAET,OAAO6rC,EAAK9xC,MAAMssC,EAAQoE,IAAW7zC,KAAK4C,SAAUuE,cAEtD8tC,IAGN,OAAOxF,EAkCT,SAAS1oC,MA0BT,SAAS2B,GAAShB,GAChB,OAAOsyC,GAAMtyC,GAAQ+yC,GAAa/yC,GAAQgzC,GAAiBhzC,GAz+U7D,IAAIsL,IAHJ5N,EAAUA,EAAU9E,GAAEgI,SAAS02C,GAAKkG,SAAU9/C,EAAS9E,GAAEoO,KAAKswC,GAAMqL,KAAiBrL,IAGjEhsC,MAChBsC,GAAOlQ,EAAQkQ,KACf9T,GAAQ4D,EAAQ5D,MAChB8oD,GAAWllD,EAAQklD,SACnBx9C,GAAO1H,EAAQ0H,KACfy9C,GAASnlD,EAAQmlD,OACjBrF,GAAS9/C,EAAQ8/C,OACjB/pB,GAAS/1B,EAAQ+1B,OACjB+L,GAAS9hC,EAAQ8hC,OACjBuP,GAAYrxC,EAAQqxC,UAGpB+T,GAAax3C,GAAMtS,UACnB+pD,GAAcvF,GAAOxkD,UACrBgqD,GAAcxjB,GAAOxmC,UAGrB6oD,GAAae,GAAS5pD,UAAUmU,SAGhC9M,GAAiB0iD,GAAY1iD,eAG7B4iD,GAAY,EAMZ9U,GAAc4U,GAAY51C,SAG1B+1C,GAAU5L,GAAK1+C,EAGfgpD,GAAanuB,GAAO,IACtBouB,GAAWplD,KAAK4D,IAAgB4F,QAAQ,sBAAuB,QAC9DA,QAAQ,yDAA0D,SAAW,KAI5EqvC,GAAc53C,EAAQ43C,YACtBnpC,GAAezO,EAAQyO,aACvBpI,GAAarG,EAAQqG,WACrB45B,GAAMv4B,GAAKu4B,IACX+jB,GAAuBqB,GAAYrB,qBACnCpW,GAAM8R,GAAU1/C,EAAS,OACzBkH,GAAalH,EAAQkH,WACrBoJ,GAAS80C,GAAW90C,OACpBwnC,GAAa93C,EAAQ83C,WACrB2N,GAAU/F,GAAU1/C,EAAS,WAG7Bi+C,GAAav2C,GAAKwiB,KAClByjB,GAAe+R,GAAUI,GAAQ,UACjCpK,GAAchuC,GAAKsG,MACnB03C,GAAgBhG,GAAU9xC,GAAO,WACjCmwC,GAAiB/9C,EAAQsgC,SACzBqlB,GAAajG,GAAUI,GAAQ,QAC/BzH,GAAY3wC,GAAK0G,IACjBopC,GAAY9vC,GAAKC,IACjBi+C,GAAYlG,GAAUxvC,GAAM,OAC5B21C,GAAiB7lD,EAAQ8lD,SACzBnQ,GAAejuC,GAAKuG,OAGpB83C,GAAoBZ,GAAOY,kBAC3B1Y,GAAoB8X,GAAO9X,kBAG3B2Y,GAAmB,WACnBvO,GAAkBuO,GAAmB,EACrC/O,GAAwB+O,KAAqB,EAM7ClF,GAAmB,iBAGnBmF,GAAUR,IAAW,IAAIA,GAGzBlG,MA8IU/S,EAAO0Z,WAWrB1Z,EAAO2Z,kBAQLC,OAAUC,GAQVlwC,SAAYmwC,GAQZC,YAAeC,GAQfC,SAAY,GAQZC,SAQExrD,EAAKsxC,IAovBT,IAAI2N,GAAc,WAChB,SAAS9P,KACT,OAAO,SAAS/uC,GACd,GAAI2P,GAAS3P,GAAY,CACvB+uC,EAAO/uC,UAAYA,EACnB,IAAI0I,EAAS,IAAIqmC,EACjBA,EAAO/uC,UAAYkW,EAErB,OAAOxN,UA6EPguC,GAAWqH,GAAepI,IAW1B0V,GAAgBtN,GAAexG,IAAiB,GAsKhDF,GAAU8G,KAYV3G,GAAe2G,IAAc,GAmgB7B+E,GAAeyH,GAAqB,SAASpW,EAAM5vC,GAErD,OADAgmD,GAAQ5qD,IAAIw0C,EAAM5vC,GACX4vC,GAFoBpQ,GAgzCzB2b,GAAW6K,GAAiB,SAASpW,GACvC,OAAOoW,GAAQtlD,IAAIkvC,IADIluC,GAmDrB23C,GAAYjE,GAAa,UA0azBkI,GAAW,WACb,IAAIqJ,EAAQ,EACR3D,EAAa,EAEjB,OAAO,SAASxlD,EAAKD,GACnB,IAAI4lD,EAAQhzC,KACR+yC,EAAY0D,GAAYzD,EAAQH,GAGpC,GADAA,EAAaG,EACTD,EAAY,GACd,KAAMyD,GAASE,EACb,OAAOrpD,OAGTmpD,EAAQ,EAEV,OAAOpI,GAAY/gD,EAAKD,OA+KxBupD,GAAa9N,GAAU,SAASvP,EAAOgE,GACzC,OAAQlC,EAAa9B,IAAU+F,GAAY/F,GACvC6H,GAAe7H,EAAO6I,GAAY7E,GAAQ,GAAO,SAiRnDsZ,GAAYnM,KAkDZoM,GAAgBpM,IAAgB,GAkJhCn8B,GAAeu6B,GAAU,SAASiO,GAQpC,IAPA,IAAIlZ,EAAYkZ,EAAOh8C,OACnB6iC,EAAWC,EACXmZ,EAASv5C,GAAM1C,GACfrH,EAAU2tC,KACVC,EAAW5tC,GAAWgmC,EACtB7lC,KAEG+pC,KAAY,CACjB,IAAIvwC,EAAQ0pD,EAAOnZ,GAAY0B,GAAYjyC,EAAQ0pD,EAAOnZ,IAAavwC,KACvE2pD,EAAOpZ,GAAa0D,GAAYj0C,EAAM0N,QAAU,IAAOymC,GAAY5D,GAAYvwC,GAAS,KAE1F,IAAIksC,EAAQwd,EAAO,GACf1zC,GAAS,EACTtI,EAASw+B,EAAQA,EAAMx+B,OAAS,EAChC+gC,EAAOkb,EAAO,GAElBtV,EACA,OAASr+B,EAAQtI,GAEf,GADA1N,EAAQksC,EAAMl2B,IACTy4B,EAAO4B,GAAa5B,EAAMzuC,GAASqG,EAAQG,EAAQxG,EAAO,IAAM,EAAG,CAEtE,IADIuwC,EAAWC,IACND,GAAU,CACjB,IAAIj1B,EAAQquC,EAAOpZ,GACnB,IAAKj1B,EAAQ+0B,GAAa/0B,EAAOtb,GAASqG,EAAQqjD,EAAOnZ,GAAWvwC,EAAO,IAAM,EAC/E,SAASq0C,EAGT5F,GACFA,EAAKnuC,KAAKN,GAEZwG,EAAOlG,KAAKN,GAGhB,OAAOwG,IA6ILojD,GAASnO,GAAU,SAASvP,EAAO8L,GAGrC,IAAIxxC,EAASsrC,GAAO5F,EAFpB8L,EAAUjD,GAAYiD,IAItB,OADAD,GAAW7L,EAAO8L,EAAQS,KAAKhN,IACxBjlC,IA2JLqjD,GAAc/I,KAsBdgJ,GAAkBhJ,IAAkB,GAsMpCiJ,GAAQtO,GAAU,SAASiO,GAC7B,OAAO5Q,GAAS/D,GAAY2U,GAAQ,GAAO,MAgKzCM,GAAUvO,GAAU,SAASvP,EAAOgE,GACtC,OAAO+B,GAAY/F,GACf6H,GAAe7H,EAAOgE,QAgDxB+Z,GAAMxO,GAAUiJ,IA2DhBwF,GAAUzO,GAAU,SAASiO,GAC/B,IAAIh8C,EAASg8C,EAAOh8C,OAChB8gC,EAAW9gC,EAAS,EAAIg8C,EAAOh8C,EAAS,GAAKsG,EAC7Cs+B,EAAU5kC,EAAS,EAAIg8C,EAAOh8C,EAAS,GAAKsG,EAShD,OAPItG,EAAS,GAAwB,mBAAZ8gC,EACvB9gC,GAAU,GAEV8gC,EAAY9gC,EAAS,GAAuB,mBAAX4kC,KAA4B5kC,EAAQ4kC,GAAWt+B,EAChFs+B,EAAUt+B,GAEZ01C,EAAOh8C,OAASA,EACTk3C,GAAU8E,EAAQlb,EAAU8D,KAwKjC6X,GAAgB1O,GAAU,SAASvL,GAErC,OADAA,EAAS6E,GAAY7E,GACd9yC,KAAK4kC,KAAK,SAASkK,GACxB,OAAOoE,GAAY9xC,GAAQ0tC,GAASA,GAASwJ,GAASxJ,IAASgE,OA0I/DroB,GAAK4zB,GAAU,SAAS97C,EAAY2mC,GACtC,OAAOwL,GAAOnyC,EAAYo1C,GAAYzO,MA4CpC8jB,GAAUhP,GAAiB,SAAS50C,EAAQxG,EAAOC,GACrDkF,GAAe5D,KAAKiF,EAAQvG,KAASuG,EAAOvG,GAAQuG,EAAOvG,GAAO,IAuKhEimB,GAAOk3B,GAAW5I,IAqBlB6V,GAAWjN,GAAW+L,IAAe,GAiErCxrD,GAAUwgD,GAAczN,GAAW8D,IAqBnC8V,GAAenM,GA5iKnB,SAAwBjS,EAAOsC,GAG7B,IAFA,IAAI9gC,EAASw+B,EAAMx+B,OAEZA,MAC0C,IAA3C8gC,EAAStC,EAAMx+B,GAASA,EAAQw+B,KAItC,OAAOA,GAoiKwCid,IA4C7CoB,GAAUnP,GAAiB,SAAS50C,EAAQxG,EAAOC,GACjDkF,GAAe5D,KAAKiF,EAAQvG,GAC9BuG,EAAOvG,GAAKK,KAAKN,GAEjBwG,EAAOvG,IAAQD,KA+FfwqD,GAAUpP,GAAiB,SAAS50C,EAAQxG,EAAOC,GACrDuG,EAAOvG,GAAOD,IAyBZR,GAASi8C,GAAU,SAAS97C,EAAYmF,EAAMgX,GAChD,IAAI9F,GAAS,EACTk9B,EAAwB,mBAARpuC,EAChB2lD,EAASrT,GAAMtyC,GACf0B,EAASyrC,GAAYtyC,GAAcyQ,GAAMzQ,EAAW+N,WAMxD,OAJA8mC,GAAS70C,EAAY,SAASK,GAC5B,IAAIqyC,EAAOa,EAASpuC,EAAS2lD,GAAmB,MAATzqD,EAAiBA,EAAM8E,GAAQkP,EACtExN,IAASwP,GAASq8B,EAAOA,EAAK9xC,MAAMP,EAAO8b,GAAQsnC,GAAWpjD,EAAO8E,EAAMgX,KAEtEtV,IA4HLkkD,GAAYtP,GAAiB,SAAS50C,EAAQxG,EAAOC,GACvDuG,EAAOvG,EAAM,EAAI,GAAGK,KAAKN,IACxB,WAAa,gBAkEZuG,GAASu4C,GAAa5N,GAAasD,IAwBnCmW,GAAc7L,GArxKlB,SAA0B5S,EAAOsC,EAAU2C,EAAaC,GACtD,IAAI1jC,EAASw+B,EAAMx+B,OAInB,IAHI0jC,GAAiB1jC,IACnByjC,EAAcjF,IAAQx+B,IAEjBA,KACLyjC,EAAc3C,EAAS2C,EAAajF,EAAMx+B,GAASA,EAAQw+B,GAE7D,OAAOiF,GA6wKwCgY,IAiS7CyB,GAAYnP,GAAU,SAAS97C,EAAYg5C,GAC7C,GAAkB,MAAdh5C,EACF,SAEF,IAAIg8C,EAAQhD,EAAU,GAItB,OAHIgD,GAASC,GAAejD,EAAU,GAAIA,EAAU,GAAIgD,KACtDhD,EAAUjrC,OAAS,GAEdgrC,GAAgB/4C,EAAYo1C,GAAY4D,SAsG7C/lC,GAAMw1C,IAAa,WACrB,OAAO,IAAI11C,IAAOm2B,WA+IhBxlC,GAAOo4C,GAAU,SAASpJ,EAAMC,EAASkI,GAC3C,IAAIwE,EAAUY,EACd,GAAIpF,EAAS9sC,OAAQ,CACnB,IAAI+sC,EAAUtM,EAAeqM,EAAUn3C,GAAK+qC,aAC5C4Q,GAAWhB,EAEb,OAAOhB,GAAc3K,EAAM2M,EAAS1M,EAASkI,EAAUC,KA+BrDoQ,GAAUpP,GAAU,SAAS5O,EAAQ2a,GAMvC,IAHA,IAAIxxC,GAAS,EACTtI,GAHJ85C,EAAcA,EAAY95C,OAASqnC,GAAYyS,GAAeT,GAAUla,IAG/Cn/B,SAEhBsI,EAAQtI,GAAQ,CACvB,IAAIzN,EAAMunD,EAAYxxC,GACtB62B,EAAO5sC,GAAO+8C,GAAcnQ,EAAO5sC,GAAM2/C,EAAW/S,GAEtD,OAAOA,IA+CLie,GAAUrP,GAAU,SAAS5O,EAAQ5sC,EAAKu6C,GAC5C,IAAIwE,EAAUY,EAAYC,EAC1B,GAAIrF,EAAS9sC,OAAQ,CACnB,IAAI+sC,EAAUtM,EAAeqM,EAAUsQ,GAAQ1c,aAC/C4Q,GAAWhB,EAEb,OAAOhB,GAAc/8C,EAAK++C,EAASnS,EAAQ2N,EAAUC,KA2CnDsQ,GAAQnO,GAAYmB,GAuCpBiN,GAAapO,GAAYyD,GA8LzBzgC,GAAQ67B,GAAU,SAASpJ,EAAMv2B,GACnC,OAAO63B,GAAUtB,EAAM,EAAGv2B,KAqBxBmvC,GAAQxP,GAAU,SAASpJ,EAAMuB,EAAM93B,GACzC,OAAO63B,GAAUtB,EAAMuB,EAAM93B,KAuB3BovC,GAAO1N,KAsBP2N,GAAY3N,IAAW,GAwGvB4N,GAAU3P,GAAU,SAASpJ,EAAMgQ,GAErC,GADAA,EAAatN,GAAYsN,GACN,mBAARhQ,IAAuB1B,GAAW0R,EAAY9V,GACvD,MAAM,IAAIsH,GAAUC,GAEtB,IAAIpmC,EAAS20C,EAAW30C,OACxB,OAAO+tC,GAAU,SAAS3/B,GAExB,IADA,IAAI9F,EAAQgkC,GAAUl+B,EAAKpO,OAAQA,GAC5BsI,KACL8F,EAAK9F,GAASqsC,EAAWrsC,GAAO8F,EAAK9F,IAEvC,OAAOq8B,EAAK9xC,MAAMnD,KAAM0e,OAqFxBuvC,GAAUzM,GAAcZ,GAiCxBsN,GAAe1M,GAAcc,GA8B7Bp6B,GAAQm2B,GAAU,SAASpJ,EAAM2F,GACnC,OAAOgF,GAAc3K,EAAM4L,EAAYjqC,EAAWA,EAAWA,EAAW+gC,GAAYiD,MA0XlFx5C,GAAU0pD,IAAiB,SAASloD,GACtC,OAAOguC,EAAahuC,IAAU+7C,GAAS/7C,EAAM0N,SAAWulC,GAAY1xC,KAAKvB,IAAUk2C,GA0qBjFr3C,GAAQ08C,GAAe/D,IAkCvB90C,GAAS64C,GAAe,SAAS1O,EAAQh4B,EAAQ88B,GACnD,OAAOA,EACHD,GAAW7E,EAAQh4B,EAAQ88B,GAC3BC,GAAW/E,EAAQh4B,KA+DrBnP,GAAWu3C,GAAev6C,GAjkP9B,SAAwB8uC,EAAaC,GACnC,OAAOD,IAAgBx9B,EAAYy9B,EAAcD,IAolP/C+Z,GAAetO,GAAep+C,GAAO+kD,IAkDrC4H,GAAUlO,GAAc7J,IAkDxBgY,GAAcnO,GAAcjI,IA6B5BqW,GAAQrN,GAAYlJ,IA2BpBwW,GAAatN,GAAY/I,IA6BzBsW,GAAStN,GAAa7K,IA2BtBoY,GAAcvN,GAAajJ,IAuK3B5Q,GAAQ0jB,GAAwB,SAAStb,GAC3C,IAAIwP,EAAiB,MAAVxP,EAAiB74B,EAAY64B,EAAOpsC,YAC/C,MAAoB,mBAAR47C,GAAsBA,EAAKv+C,YAAc+uC,GAC/B,mBAAVA,GAAwBoF,GAAYpF,GACvCmX,GAASnX,GAEXp/B,GAASo/B,GAAUsb,GAAWtb,OANdmX,GAgFrB8H,GAAUvN,IAAmB,GA2C7Bj4C,GAAYi4C,KAyBZ95C,GAAOg3C,GAAU,SAAS5O,EAAQvG,GACpC,GAAc,MAAVuG,EACF,SAEF,GAAuB,mBAAZvG,EAAM,GAAkB,CACjC,IAAIA,EAAQ0K,GAAS+D,GAAYzO,GAAQhC,IACzC,OAAOuf,GAAYhX,EAAQkH,GAAeqB,GAAOvI,GAASvG,IAE5D,IAAI6F,EAAYqG,GAAalM,EAAM,GAAIA,EAAM,GAAI,GACjD,OAAOwd,GAAejX,EAAQ,SAAS7sC,EAAOC,EAAK4sC,GACjD,OAAQV,EAAUnsC,EAAOC,EAAK4sC,OA2D9B/gC,GAAO2vC,GAAU,SAAS5O,EAAQvG,GACpC,OAAc,MAAVuG,KAGsB,mBAAZvG,EAAM,GAChBwd,GAAejX,EAAQ2F,GAAalM,EAAM,GAAIA,EAAM,GAAI,IACxDud,GAAYhX,EAAQkI,GAAYzO,MAuUlCvoC,GAAYw+C,GAAiB,SAAS/1C,EAAQ4M,EAAM4C,GAEtD,OADA5C,EAAOA,EAAK24C,cACLvlD,GAAUwP,EAAS5C,EAAK0gB,OAAO,GAAG7oB,cAAgBmI,EAAK0U,MAAM,GAAM1U,KA0JxE+gB,GAAYooB,GAAiB,SAAS/1C,EAAQ4M,EAAM4C,GACtD,OAAOxP,GAAUwP,EAAQ,IAAM,IAAM5C,EAAK24C,gBA+DxCC,GAAUtN,KAwBVuN,GAAWvN,IAAa,GAiGxBwN,GAAY3P,GAAiB,SAAS/1C,EAAQ4M,EAAM4C,GACtD,OAAOxP,GAAUwP,EAAQ,IAAM,IAAM5C,EAAK24C,gBAsBxCI,GAAY5P,GAAiB,SAAS/1C,EAAQ4M,EAAM4C,GACtD,OAAOxP,GAAUwP,EAAQ,IAAM,KAAO5C,EAAK0gB,OAAO,GAAG7oB,cAAgBmI,EAAK0U,MAAM,MA8e9EskC,GAAU3Q,GAAU,SAASpJ,EAAMv2B,GACrC,IACE,OAAOu2B,EAAK9xC,MAAMyT,EAAW8H,GAC7B,MAAMnM,GACN,OAAO82C,GAAQ92C,GAAKA,EAAI,IAAI/Q,GAAM+Q,MA4KlC3K,GAASy2C,GAAU,SAAS32C,EAAMgX,GACpC,OAAO,SAAS+wB,GACd,OAAOuW,GAAWvW,EAAQ/nC,EAAMgX,MA0BhCuwC,GAAW5Q,GAAU,SAAS5O,EAAQ/wB,GACxC,OAAO,SAAShX,GACd,OAAOs+C,GAAWvW,EAAQ/nC,EAAMgX,MA2VhC4Q,GAAOi0B,GAAY,QAsBnBnwC,GAAQmwC,GAAY,SAiDpB/vC,GAAMssC,GAAel4B,GAAIujC,IAiDzBp+C,GAAM+yC,GAAe4J,GAAIjX,IAsBzByc,GAAQ3L,GAAY,SA2hBxB,OA5eA3R,EAAOlxC,UAAYsxC,EAAWtxC,UAE9BoxC,GAAcpxC,UAAY6+C,GAAWvN,EAAWtxC,WAChDoxC,GAAcpxC,UAAU2C,YAAcyuC,GAEtCD,GAAYnxC,UAAY6+C,GAAWvN,EAAWtxC,WAC9CmxC,GAAYnxC,UAAU2C,YAAcwuC,GAGpCc,GAASjyC,UAAkB,OA38U3B,SAAmBmC,GACjB,OAAO7C,KAAKkH,IAAIrE,WAAe7C,KAAK4yC,SAAS/vC,IA28U/C8vC,GAASjyC,UAAUqF,IA/7UnB,SAAgBlD,GACd,MAAc,aAAPA,EAAqB+T,EAAY5W,KAAK4yC,SAAS/vC,IA+7UxD8vC,GAASjyC,UAAUwG,IAn7UnB,SAAgBrE,GACd,MAAc,aAAPA,GAAsBkF,GAAe5D,KAAKnE,KAAK4yC,SAAU/vC,IAm7UlE8vC,GAASjyC,UAAUD,IAt6UnB,SAAgBoC,EAAKD,GAInB,MAHW,aAAPC,IACF7C,KAAK4yC,SAAS/vC,GAAOD,GAEhB5C,MAq6UT6yC,GAASnyC,UAAUwC,KAx3UnB,SAAmBN,GACjB,IAAIyC,EAAOrF,KAAKqF,KACI,iBAATzC,GAAqByN,GAASzN,GACvCyC,EAAK5E,IAAI6J,IAAI1H,GAEbyC,EAAK0kC,KAAKnnC,IAAS,GAs3UvBmmD,GAAQG,MAAQvW,GAGhBf,EAAOhR,MAv8IP,SAAe5b,EAAGiwB,GAChB,GAAmB,mBAARA,EAAoB,CAC7B,GAAgB,mBAALjwB,EAKT,MAAM,IAAIyxB,GAAUC,GAJpB,IAAIqR,EAAO/iC,EACXA,EAAIiwB,EACJA,EAAO8S,EAMX,OADA/iC,EAAIm+B,GAAen+B,GAAKA,GAAKA,EAAI,EAC1B,WACL,KAAMA,EAAI,EACR,OAAOiwB,EAAK9xC,MAAMnD,KAAMmH,aA27I9ByqC,EAAOoQ,IAt6IP,SAAa/M,EAAMjwB,EAAGu5B,GAKpB,OAJIA,GAASC,GAAevJ,EAAMjwB,EAAGu5B,KACnCv5B,EAAIpO,GAENoO,EAAKiwB,GAAa,MAALjwB,EAAaiwB,EAAK3kC,OAASmtC,IAAWz4B,GAAK,EAAG,GACpD46B,GAAc3K,EAAMyL,EAAU9pC,EAAWA,EAAWA,EAAWA,EAAWoO,IAk6InF4sB,EAAOtsC,OAASA,GAChBssC,EAAOnnB,GAAKA,GACZmnB,EAAOkW,OAASA,GAChBlW,EAAO3rC,KAAOA,GACd2rC,EAAO6b,QAAUA,GACjB7b,EAAO8b,QAAUA,GACjB9b,EAAO3nC,SAAWA,GAClB2nC,EAAO3qB,MAAQA,GACf2qB,EAAOud,MAvtOP,SAAergB,EAAOz4B,EAAMkoC,GAExBloC,GADEkoC,EAAQC,GAAe1P,EAAOz4B,EAAMkoC,GAAiB,MAARloC,GACxC,EAEAonC,GAAU3C,GAAYzkC,IAAS,EAAG,GAO3C,IALA,IAAIuC,EAAQ,EACRtI,EAASw+B,EAAQA,EAAMx+B,OAAS,EAChC2gC,GAAY,EACZ7nC,EAAS4J,GAAMqwC,GAAW/yC,EAAS+F,IAEhCuC,EAAQtI,GACblH,IAAS6nC,GAAYkJ,GAAUrL,EAAOl2B,EAAQA,GAASvC,GAEzD,OAAOjN,GA0sOTwoC,EAAOwd,QAzrOP,SAAiBtgB,GAMf,IALA,IAAIl2B,GAAS,EACTtI,EAASw+B,EAAQA,EAAMx+B,OAAS,EAChC2gC,GAAY,EACZ7nC,OAEKwP,EAAQtI,GAAQ,CACvB,IAAI1N,EAAQksC,EAAMl2B,GACdhW,IACFwG,IAAS6nC,GAAYruC,GAGzB,OAAOwG,GA8qOTwoC,EAAOyd,SAhsBP,SAAkBzsD,GAChB,OAAO,WACL,OAAOA,IA+rBXgvC,EAAOob,QAAUA,GACjBpb,EAAO1uB,OAnjFP,SAAgBxiB,EAAWgJ,EAAY60C,GACrC,IAAIn1C,EAASm2C,GAAW7+C,GAIxB,OAHI69C,GAASC,GAAe99C,EAAWgJ,EAAY60C,KACjD70C,EAAakN,GAERlN,EAAa8qC,GAAWprC,EAAQM,GAAcN,GA+iFvDwoC,EAAO+b,MAAQA,GACf/b,EAAOgc,WAAaA,GACpBhc,EAAOoW,SAAWA,GAClBpW,EAAOtpC,SAAWA,GAClBspC,EAAOuc,aAAeA,GACtBvc,EAAOpvB,MAAQA,GACfovB,EAAOic,MAAQA,GACfjc,EAAOua,WAAaA,GACpBva,EAAOnT,KAAOA,GACdmT,EAAOsV,UAAYA,GACnBtV,EAAO0d,eA1iOP,SAAwBxgB,EAAOC,EAAWmG,GACxC,OAAQpG,GAASA,EAAMx+B,OACnBwrC,GAAUhN,EAAO0M,GAAYzM,EAAWmG,EAAS,IAAI,GAAM,OAyiOjEtD,EAAO2d,UAp/NP,SAAmBzgB,EAAOC,EAAWmG,GACnC,OAAQpG,GAASA,EAAMx+B,OACnBwrC,GAAUhN,EAAO0M,GAAYzM,EAAWmG,EAAS,IAAI,OAm/N3DtD,EAAO4d,KAn9NP,SAAc1gB,EAAOlsC,EAAO+c,EAAO9Q,GACjC,IAAIyB,EAASw+B,EAAQA,EAAMx+B,OAAS,EACpC,OAAKA,GAGDqP,GAAyB,iBAATA,GAAqB6+B,GAAe1P,EAAOlsC,EAAO+c,KACpEA,EAAQ,EACR9Q,EAAMyB,GAEDgnC,GAASxI,EAAOlsC,EAAO+c,EAAO9Q,QA28NvC+iC,EAAO/oC,OAASA,GAChB+oC,EAAO5uC,QA5zNP,SAAiB8rC,EAAO0G,EAAQ+I,GAC9B,IAAIjuC,EAASw+B,EAAQA,EAAMx+B,OAAS,EAIpC,OAHIiuC,GAASC,GAAe1P,EAAO0G,EAAQ+I,KACzC/I,GAAS,GAEJllC,EAASqnC,GAAY7I,EAAO0G,OAwzNrC5D,EAAO7gC,YAxyNP,SAAqB+9B,GAEnB,OADaA,EAAQA,EAAMx+B,OAAS,GACpBqnC,GAAY7I,GAAO,OAuyNrC8C,EAAOkc,KAAOA,GACdlc,EAAOmc,UAAYA,GACnBnc,EAAOrxC,QAAUA,GACjBqxC,EAAOsb,aAAeA,GACtBtb,EAAO0c,MAAQA,GACf1c,EAAO2c,WAAaA,GACpB3c,EAAO4c,OAASA,GAChB5c,EAAO6c,YAAcA,GACrB7c,EAAO+X,UAAYA,GACnB/X,EAAOub,QAAUA,GACjBvb,EAAOwb,QAAUA,GACjBxb,EAAOvS,QApvNP,SAAiByP,GACf,OAAOoY,GAAUpY,EAAO,IAovN1B8C,EAAO9tB,aAAeA,GACtB8tB,EAAO6d,OA9tEP,SAAgBhgB,EAAQigB,EAAYnR,GAC9BA,GAASC,GAAe/O,EAAQigB,EAAYnR,KAC9CmR,EAAa94C,GAOf,IALA,IAAIgC,GAAS,EACTswB,EAAQ7B,GAAKoI,GACbn/B,EAAS44B,EAAM54B,OACflH,OAEKwP,EAAQtI,GAAQ,CACvB,IAAIzN,EAAMqmC,EAAMtwB,GACZhW,EAAQ6sC,EAAO5sC,GAEf6sD,EACE3nD,GAAe5D,KAAKiF,EAAQxG,GAC9BwG,EAAOxG,GAAOM,KAAKL,GAEnBuG,EAAOxG,IAAUC,GAInBuG,EAAOxG,GAASC,EAGpB,OAAOuG,GAusETwoC,EAAOxvC,OAASA,GAChBwvC,EAAOvK,KAAOA,GACduK,EAAOoG,OAASA,GAChBpG,EAAOjvC,IAAMA,GACbivC,EAAO8c,QAAUA,GACjB9c,EAAO1oC,UAAYA,GACnB0oC,EAAOqY,QAAUA,GACjBrY,EAAO+d,gBA1pBP,SAAyBjoD,EAAMmyC,GAC7B,OAAOvE,GAAoB5tC,EAAM6tC,GAAUsE,GAAU,KA0pBvDjI,EAAOmX,QAAUA,GACjBnX,EAAOnwC,MAAQA,GACfmwC,EAAOhqC,OAASA,GAChBgqC,EAAOqd,SAAWA,GAClBrd,EAAOsY,MAAQA,GACftY,EAAOoc,QAAUA,GACjBpc,EAAOrpB,OA70HP,SAAgBwmB,GACd,GAAwB,mBAAbA,EACT,MAAM,IAAI0H,GAAUC,GAEtB,OAAO,WACL,OAAQ3H,EAAU5rC,MAAMnD,KAAMmH,aAy0HlCyqC,EAAOvqC,KAAOA,GACduqC,EAAOge,KArzHP,SAAc3a,GACZ,OAAO6S,GAAO,EAAG7S,IAqzHnBrD,EAAOiT,MAAQA,GACfjT,EAAOqc,QAAUA,GACjBrc,EAAOsc,aAAeA,GACtBtc,EAAO0b,UAAYA,GACnB1b,EAAOljC,KAAOA,GACdkjC,EAAO9Y,MAv/JP,SAAev2B,EAAYmF,GACzB,OAAO/E,GAAIJ,EAAYmG,GAAShB,KAu/JlCkqC,EAAOlpC,SAAWA,GAClBkpC,EAAOie,WAtcP,SAAoBpgB,GAClB,OAAO,SAAS/nC,GACd,OAAO0wC,GAAQ3I,EAAQyK,GAAOxyC,GAAOA,EAAO,MAqchDkqC,EAAOke,KA9nNP,WACE,IAAIpxC,EAAOvX,UACP2nC,EAAQpwB,EAAK,GAEjB,IAAMowB,IAASA,EAAMx+B,OACnB,OAAOw+B,EAMT,IAJA,IAAIl2B,EAAQ,EACR3P,EAAU2tC,KACVtmC,EAASoO,EAAKpO,SAETsI,EAAQtI,GAIf,IAHA,IAAI+yB,EAAY,EACZzgC,EAAQ8b,EAAK9F,IAETyqB,EAAYp6B,EAAQ6lC,EAAOlsC,EAAOygC,KAAe,GACvD3tB,GAAOvR,KAAK2qC,EAAOzL,EAAW,GAGlC,OAAOyL,GA4mNT8C,EAAO4a,OAASA,GAChB5a,EAAOtnB,MAlaP,SAAe3K,EAAO9Q,EAAKkhD,GACrBA,GAAQvR,GAAe7+B,EAAO9Q,EAAKkhD,KACrClhD,EAAMkhD,EAAOn5C,GAEf+I,GAASA,GAAS,EAClBowC,EAAe,MAARA,EAAe,GAAMA,GAAQ,EAEzB,MAAPlhD,GACFA,EAAM8Q,EACNA,EAAQ,GAER9Q,GAAOA,GAAO,EAQhB,IAJA,IAAI+J,GAAS,EACTtI,EAASmtC,GAAU4F,IAAYx0C,EAAM8Q,IAAUowC,GAAQ,IAAK,GAC5D3mD,EAAS4J,GAAM1C,KAEVsI,EAAQtI,GACflH,EAAOwP,GAAS+G,EAChBA,GAASowC,EAEX,OAAO3mD,GA4YTwoC,EAAO1pB,MAAQA,GACf0pB,EAAOliC,OAv5JP,SAAgBnN,EAAYwsC,EAAWmG,GACrC,IAAID,EAAO7zC,GAAQmB,GAAcoxC,GAAc4D,GAE/C,OADAxI,EAAYyM,GAAYzM,EAAWmG,EAAS,GACrCD,EAAK1yC,EAAY,SAASK,EAAOgW,EAAOrW,GAC7C,OAAQwsC,EAAUnsC,EAAOgW,EAAOrW,MAo5JpCqvC,EAAO9iC,OAriNP,SAAgBggC,EAAOC,EAAWmG,GAChC,IAAI9rC,KACJ,IAAM0lC,IAASA,EAAMx+B,OACnB,OAAOlH,EAET,IAAIwP,GAAS,EACTgiC,KACAtqC,EAASw+B,EAAMx+B,OAGnB,IADAy+B,EAAYyM,GAAYzM,EAAWmG,EAAS,KACnCt8B,EAAQtI,GAAQ,CACvB,IAAI1N,EAAQksC,EAAMl2B,GACdm2B,EAAUnsC,EAAOgW,EAAOk2B,KAC1B1lC,EAAOlG,KAAKN,GACZg4C,EAAQ13C,KAAK0V,IAIjB,OADA+hC,GAAW7L,EAAO8L,GACXxxC,GAohNTwoC,EAAOuV,KAAOA,GACdvV,EAAOyM,UAAYA,GACnBzM,EAAOnxC,IAx6DP,SAAagvC,EAAQ/nC,EAAM9E,GACzB,GAAc,MAAV6sC,EACF,OAAOA,EAUT,IALA,IAHI4I,EAAW3wC,EAAO,GAGlBkR,GAAS,EACTtI,GAHJ5I,EAA2B,MAAnB+nC,EAAO4I,IAAoB2B,GAAMtyC,EAAM+nC,IAAY4I,GAAW6B,GAAOxyC,IAG3D4I,OACd4qB,EAAY5qB,EAAS,EACrB0/C,EAASvgB,EAEI,MAAVugB,KAAoBp3C,EAAQtI,GAAQ,CACzC,IAAIzN,EAAM6E,EAAKkR,GACXvI,GAAS2/C,KACPp3C,GAASsiB,EACX80B,EAAOntD,GAAOD,EACU,MAAfotD,EAAOntD,KAChBmtD,EAAOntD,GAAOkyC,GAAQrtC,EAAKkR,EAAQ,YAGvCo3C,EAASA,EAAOntD,GAElB,OAAO4sC,GAk5DTmC,EAAOtvC,QA71JP,SAAiBC,GACf,OAAOqlD,GAAOrlD,EAAYkwC,KA61J5Bb,EAAOlnB,MAr/MP,SAAeokB,EAAOnvB,EAAO9Q,GAC3B,IAAIyB,EAASw+B,EAAQA,EAAMx+B,OAAS,EACpC,OAAKA,GAGDzB,GAAqB,iBAAPA,GAAmB2vC,GAAe1P,EAAOnvB,EAAO9Q,KAChE8Q,EAAQ,EACR9Q,EAAMyB,GAED6pC,GAAUrL,EAAOnvB,EAAO9Q,QA6+MjC+iC,EAAOjO,OAttJP,SAAgBphC,EAAY6uC,EAAU8D,GACpC,GAAkB,MAAd3yC,EACF,SAEE2yC,GAAWsJ,GAAej8C,EAAY6uC,EAAU8D,KAClD9D,EAAWx6B,GAEb,IAAIgC,GAAS,EAMb,OALAw4B,EAAWoK,GAAYpK,EAAU8D,EAAS,GAKnCiG,GAHMrB,GAAQv3C,EAAY,SAASK,EAAOC,EAAKN,GACpD,OAASmtC,SAAY0B,EAASxuC,EAAOC,EAAKN,GAAaqW,QAAWA,EAAOhW,MAASA,KAE1D4sC,IA0sJ5BoC,EAAO4b,UAAYA,GACnB5b,EAAOqe,YAxnJP,SAAqB1tD,EAAYg5C,EAAW3L,EAAQ2O,GAClD,OAAkB,MAAdh8C,MAGAg8C,GAASC,GAAejD,EAAW3L,EAAQ2O,KAC7C3O,EAASh5B,GAENxV,GAAQm6C,KACXA,EAAyB,MAAbA,MAA0BA,IAEnCn6C,GAAQwuC,KACXA,EAAmB,MAAVA,MAAuBA,IAE3B0L,GAAgB/4C,EAAYg5C,EAAW3L,KA4mJhDgC,EAAOse,OAnpHP,SAAgBjb,GACd,GAAmB,mBAARA,EACT,MAAM,IAAIwB,GAAUC,GAEtB,OAAO,SAAS5H,GACd,OAAOmG,EAAK9xC,MAAMnD,KAAM8uC,KA+oH5B8C,EAAOhsB,KA94MP,SAAckpB,EAAO9pB,EAAGu5B,GAEtB,OADazP,EAAQA,EAAMx+B,OAAS,KAIhCiuC,EAAQC,GAAe1P,EAAO9pB,EAAGu5B,GAAc,MAALv5B,KAC5CA,EAAI,GAECm1B,GAAUrL,EAAO,EAAG9pB,EAAI,EAAI,EAAIA,QAu4MzC4sB,EAAOue,UA52MP,SAAmBrhB,EAAO9pB,EAAGu5B,GAC3B,IAAIjuC,EAASw+B,EAAQA,EAAMx+B,OAAS,EACpC,OAAKA,IAGDiuC,EAAQC,GAAe1P,EAAO9pB,EAAGu5B,GAAc,MAALv5B,KAC5CA,EAAI,GAENA,EAAI1U,IAAW0U,GAAK,GACbm1B,GAAUrL,EAAO9pB,EAAI,EAAI,EAAIA,QAo2MtC4sB,EAAOwe,eAhzMP,SAAwBthB,EAAOC,EAAWmG,GACxC,OAAQpG,GAASA,EAAMx+B,OACnBwrC,GAAUhN,EAAO0M,GAAYzM,EAAWmG,EAAS,IAAI,GAAO,OA+yMlEtD,EAAOye,UA1vMP,SAAmBvhB,EAAOC,EAAWmG,GACnC,OAAQpG,GAASA,EAAMx+B,OACnBwrC,GAAUhN,EAAO0M,GAAYzM,EAAWmG,EAAS,QAyvMvDtD,EAAO0e,IAh5LP,SAAa1tD,EAAO8kD,EAAaxS,GAE/B,OADAwS,EAAYvjD,KAAK+wC,EAAStyC,GACnBA,GA+4LTgvC,EAAOxlC,SAzmHP,SAAkB6oC,EAAMuB,EAAM32C,GAC5B,IAAI+oD,GAAU,EACVF,GAAW,EAEf,GAAmB,mBAARzT,EACT,MAAM,IAAIwB,GAAUC,GAQtB,OANgB,IAAZ72C,EACF+oD,GAAU,EACDv4C,GAASxQ,KAClB+oD,EAAU,YAAa/oD,IAAYA,EAAQ+oD,QAAUA,EACrDF,EAAW,aAAc7oD,IAAYA,EAAQ6oD,SAAWA,GAEnDV,GAAS/S,EAAMuB,GAAQoS,QAAWA,EAASC,SAAYrS,EAAMkS,SAAYA,KA6lHlF9W,EAAOhN,KAAOA,GACdgN,EAAOnsB,MAjYP,SAAeT,EAAGosB,EAAU8D,GAK1B,IAJAlwB,EAAI81B,GAAY91B,IAIR,IAAMm+B,GAAen+B,GAC3B,SAEF,IAAIpM,GAAS,EACTxP,EAAS4J,GAAM4pC,GAAU53B,EAAGomC,KAGhC,IADAha,EAAWgE,GAAahE,EAAU8D,EAAS,KAClCt8B,EAAQoM,GACXpM,EAAQwyC,GACVhiD,EAAOwP,GAASw4B,EAASx4B,GAEzBw4B,EAASx4B,GAGb,OAAOxP,GA+WTwoC,EAAOvN,QAAUA,GACjBuN,EAAO4I,cAAgBA,GACvB5I,EAAOv6B,UAl4DP,SAAmBo4B,EAAQ2B,EAAU2C,EAAamB,GAChD,IAAIN,EAAQxzC,GAAQquC,IAAWuJ,GAAavJ,GAG5C,GAFA2B,EAAWoK,GAAYpK,EAAU8D,EAAS,GAEvB,MAAfnB,EACF,GAAIa,GAASvkC,GAASo/B,GAAS,CAC7B,IAAIwP,EAAOxP,EAAOpsC,YAEhB0wC,EADEa,EACYxzC,GAAQquC,GAAU,IAAIwP,KAEtBM,GAAWjsC,GAAW2rC,GAAQA,EAAKv+C,UAAYkW,QAG/Dm9B,KAMJ,OAHCa,EAAQtB,GAAY+C,IAAY5G,EAAQ,SAAS7sC,EAAOgW,EAAO62B,GAC9D,OAAO2B,EAAS2C,EAAanxC,EAAOgW,EAAO62B,KAEtCsE,GAg3DTnC,EAAO+a,MAAQA,GACf/a,EAAOwV,KAAOA,GACdxV,EAAO0V,MAAQA,GACf1V,EAAO4V,UAAYA,GACnB5V,EAAOkB,OAASA,GAChBlB,EAAO2e,SA9zDP,SAAkB9gB,GAChB,OAAOoM,GAAWpM,EAAQuI,GAAOvI,KA8zDnCmC,EAAOhoC,MA9lJP,SAAerH,EAAYkV,GACzB,OAAO5O,GAAOtG,EAAY8yC,GAAY59B,KA8lJxCm6B,EAAOgb,QAAUA,GACjBhb,EAAOppC,KAllHP,SAAc5F,EAAOiiB,GAEnB,OADAA,EAAqB,MAAXA,EAAkBggB,GAAWhgB,EAChC+6B,GAAc/6B,EAAS+7B,EAAchqC,GAAYhU,QAilH1DgvC,EAAO4e,IAjkMP,WAIE,IAHA,IAAI53C,GAAS,EACTtI,EAASnJ,UAAUmJ,SAEdsI,EAAQtI,GAAQ,CACvB,IAAIw+B,EAAQ3nC,UAAUyR,GACtB,GAAIi8B,GAAY/F,GACd,IAAI1lC,EAASA,EACTyqC,GAAU8C,GAAevtC,EAAQ0lC,GAAQ6H,GAAe7H,EAAO1lC,IAC/D0lC,EAGR,OAAO1lC,EAASsyC,GAAStyC,OAsjM3BwoC,EAAOib,IAAMA,GACbjb,EAAO6V,UAAYA,GACnB7V,EAAOkb,QAAUA,GAGjBlb,EAAO6e,SAAW1C,GAClBnc,EAAO8e,QAAU/tD,GACjBivC,EAAO+e,QAAU5C,GACjBnc,EAAO9uC,KAAOvC,GACdqxC,EAAOgf,UAAY1D,GACnBtb,EAAO/wC,OAASyE,GAChBssC,EAAOR,SAAWnnC,GAClB2nC,EAAOif,QAAUlH,GACjB/X,EAAOnC,OAASgY,GAChB7V,EAAOkf,OAASjoD,GAChB+oC,EAAOmf,KAAO5J,GACdvV,EAAOof,OAAS5J,GAGhB8C,GAAMtY,EAAQA,GAKdA,EAAOtnC,IA5WP,SAAa2mD,EAAQC,GACnB,QAASD,GAAU,KAAOC,GAAU,IA4WtCtf,EAAOod,QAAUA,GACjBpd,EAAOjxC,UAAYA,GACnBixC,EAAOuf,WAzsDP,SAAoB16B,GAElB,OADAA,EAAS2Y,EAAa3Y,KACJA,EAAOC,OAAO,GAAG7oB,cAAgB4oB,EAAO/L,MAAM,IAwsDlEknB,EAAOtiB,KAAOA,GACdsiB,EAAOlsB,MAvjHP,SAAe9iB,EAAO4yC,EAAQjB,EAAYW,GASxC,OARIM,GAA2B,kBAAVA,GAAuBgJ,GAAe57C,EAAO4yC,EAAQjB,GACxEiB,GAAS,EAEe,mBAAVA,IACdN,EAAUX,EACVA,EAAaiB,EACbA,GAAS,GAEiB,mBAAdjB,EACVgB,GAAU3yC,EAAO4yC,EAAQJ,GAAab,EAAYW,EAAS,IAC3DK,GAAU3yC,EAAO4yC,IA6iHvB5D,EAAOzmB,UA7/GP,SAAmBvoB,EAAO2xC,EAAYW,GACpC,MAA4B,mBAAdX,EACVgB,GAAU3yC,GAAO,EAAMwyC,GAAab,EAAYW,EAAS,IACzDK,GAAU3yC,GAAO,IA2/GvBgvC,EAAOyN,OAASA,GAChBzN,EAAOwf,SAjqDP,SAAkB36B,EAAQjkB,EAAQyB,GAEhCzB,GAAmB,GAEnB,IAAIlC,GAHJmmB,EAAS2Y,EAAa3Y,IAGFnmB,OAMpB,OALA2D,EAAWA,IAAa2C,EACpBtG,EACAssC,GAAU3oC,EAAW,EAAI,GAAMA,GAAY,EAAI3D,IAEnD2D,GAAYzB,EAAOlC,SACA,GAAKmmB,EAAOxtB,QAAQuJ,EAAQyB,IAAaA,GAwpD9D29B,EAAO4Z,OArnDP,SAAgB/0B,GAGd,OADAA,EAAS2Y,EAAa3Y,KACJ46B,GAAmBjhD,KAAKqmB,GACtCA,EAAO9oB,QAAQ2jD,GAAiBnhB,GAChC1Z,GAinDNmb,EAAO2f,aAhmDP,SAAsB96B,GAEpB,OADAA,EAAS2Y,EAAa3Y,KACJ+6B,GAAiBphD,KAAKqmB,GACpCA,EAAO9oB,QAAQ8jD,GAAenhB,GAC7B7Z,GAAU,QA6lDjBmb,EAAO5qC,MAAQA,GACf4qC,EAAO9oB,KAAOA,GACd8oB,EAAOwa,UAAYA,GACnBxa,EAAOwc,QAAUA,GACjBxc,EAAOqb,SAAWA,GAClBrb,EAAOya,cAAgBA,GACvBza,EAAOyc,YAAcA,GACrBzc,EAAO8f,UAz8KP,SAAmBnvD,EAAYkV,GAC7B,OAAOqR,GAAKvmB,EAAY8yC,GAAY59B,KAy8KtCm6B,EAAOvnB,MAAQA,GACfunB,EAAOx+B,MAAQA,GACfw+B,EAAO7rC,IA74EP,SAAa0pC,EAAQ/nC,EAAMiqD,GACzB,IAAIvoD,EAAmB,MAAVqmC,EAAiB74B,EAAYwhC,GAAQ3I,EAAQyK,GAAOxyC,GAAOA,EAAO,IAC/E,OAAO0B,IAAWwN,EAAY+6C,EAAevoD,GA44E/CwoC,EAAOhqB,GAAKA,GACZgqB,EAAO9pB,IA59GP,SAAallB,EAAO0rC,GAClB,OAAO1rC,GAAS0rC,GA49GlBsD,EAAO1qC,IAr3EP,SAAauoC,EAAQ/nC,GACnB,GAAc,MAAV+nC,EACF,OAAO,EAET,IAAIrmC,EAASrB,GAAe5D,KAAKsrC,EAAQ/nC,GACzC,IAAK0B,IAAW4wC,GAAMtyC,GAAO,CAG3B,GAFAA,EAAOwyC,GAAOxyC,GAEA,OADd+nC,EAAwB,GAAf/nC,EAAK4I,OAAcm/B,EAAS2I,GAAQ3I,EAAQ0K,GAAUzyC,EAAM,GAAI,KAEvE,OAAO,EAETA,EAAO/B,GAAK+B,GACZ0B,EAASrB,GAAe5D,KAAKsrC,EAAQ/nC,GAEvC,OAAO0B,GAAWu1C,GAASlP,EAAOn/B,SAAWykC,GAAQrtC,EAAM+nC,EAAOn/B,UAC/DlP,GAAQquC,IAAWoI,GAAYpI,KAu2EpCmC,EAAO/M,SAAWA,GAClB+M,EAAO+V,SAAWA,GAClB/V,EAAO3oC,QAAUA,GACjB2oC,EAAOggB,QAl1DP,SAAiBhvD,EAAO+c,EAAO9Q,GAQ7B,OAPA8Q,GAASA,GAAS,EACd9Q,IAAQ+H,GACV/H,EAAM8Q,EACNA,EAAQ,GAER9Q,GAAOA,GAAO,EAETjM,GAASg6C,GAAUj9B,EAAO9Q,IAAQjM,EAAQ66C,GAAU99B,EAAO9Q,IA20DpE+iC,EAAOiG,YAAcA,GACrBjG,EAAOxwC,QAAUA,GACjBwwC,EAAOigB,UAv6GP,SAAmBjvD,GACjB,OAAiB,IAAVA,IAA4B,IAAVA,GAAoBguC,EAAahuC,IAAUizC,GAAY1xC,KAAKvB,IAAUohD,GAu6GjGpS,EAAOkgB,OAp5GP,SAAgBlvD,GACd,OAAOguC,EAAahuC,IAAUizC,GAAY1xC,KAAKvB,IAAUqhD,GAo5G3DrS,EAAO1jC,UAj4GP,SAAmBtL,GACjB,QAASA,GAA4B,IAAnBA,EAAM4/B,UAAkBoO,EAAahuC,KAAW1B,GAAc0B,IAi4GlFgvC,EAAO1vB,QAn2GP,SAAiBtf,GACf,OAAa,MAATA,IAGAiyC,GAAYjyC,KAAWxB,GAAQwB,IAAUK,GAASL,IAAUi1C,GAAYj1C,IACvEguC,EAAahuC,IAAU0Q,GAAW1Q,EAAM8S,UACnC9S,EAAM0N,QAER+2B,GAAKzkC,GAAO0N,SA41GtBshC,EAAO9f,QAAUA,GACjB8f,EAAOyX,QAAUA,GACjBzX,EAAOlM,SAzvGP,SAAkB9iC,GAChB,MAAuB,iBAATA,GAAqBugD,GAAevgD,IAyvGpDgvC,EAAOt+B,WAAaA,GACpBs+B,EAAOmgB,QA9pGP,SAAiBtiB,EAAQh4B,EAAQ88B,EAAYW,GAE3C,OADAX,EAAkC,mBAAdA,EAA2Ba,GAAab,EAAYW,EAAS,GAAKt+B,EAC/E6iC,GAAYhK,EAAQsK,GAAatiC,GAAS88B,IA6pGnD3C,EAAOl7B,MAjoGP,SAAe9T,GAGb,OAAO2Q,GAAS3Q,IAAUA,IAAUA,GA+nGtCgvC,EAAOmT,SAAWA,GAClBnT,EAAOogB,OAnlGP,SAAgBpvD,GACd,OAAiB,OAAVA,GAmlGTgvC,EAAOr+B,SAAWA,GAClBq+B,EAAOvhC,SAAWA,GAClBuhC,EAAO1wC,cAAgBA,GACvB0wC,EAAO9K,SAAWA,GAClB8K,EAAO3uC,SAAWA,GAClB2uC,EAAOoH,aAAeA,GACtBpH,EAAO7oC,YA77FP,SAAqBnG,GACnB,OAAOA,IAAUgU,GA67FnBg7B,EAAO7a,UAAYA,GACnB6a,EAAOjsC,KAAOA,GACdisC,EAAOhF,YA9xNP,SAAqBkC,EAAOlsC,EAAOygC,GACjC,IAAI/yB,EAASw+B,EAAQA,EAAMx+B,OAAS,EACpC,IAAKA,EACH,OAAQ,EAEV,IAAIsI,EAAQtI,EACZ,GAAwB,iBAAb+yB,EACTzqB,GAASyqB,EAAY,EAAIoa,GAAUntC,EAAS+yB,EAAW,GAAKuZ,GAAUvZ,GAAa,EAAG/yB,EAAS,IAAM,OAChG,GAAI+yB,EAAW,CAEpB,IAAIiL,EAAQQ,EADZl2B,EAAQqjC,GAAYnN,EAAOlsC,GAAO,GAAQ,GAE1C,OAAIA,GAAUA,EAASA,IAAU0rC,EAAUA,GAAUA,GAC5C11B,GAED,EAEV,GAAIhW,GAAUA,EACZ,OAAOssC,EAAWJ,EAAOl2B,GAAO,GAElC,KAAOA,KACL,GAAIk2B,EAAMl2B,KAAWhW,EACnB,OAAOgW,EAGX,OAAQ,GAuwNVg5B,EAAO8X,GAAKA,GACZ9X,EAAOqgB,IAl5FP,SAAarvD,EAAO0rC,GAClB,OAAO1rC,GAAS0rC,GAk5FlBsD,EAAOp+B,IAAMA,GACbo+B,EAAO7kC,IAAMA,GACb6kC,EAAOsgB,WAjoBP,WAEE,OADAlT,GAAK1+C,EAAIsqD,GACF5qD,MAgoBT4xC,EAAO7qC,KAAOA,GACd6qC,EAAOp8B,IAAMA,GACbo8B,EAAOugB,IA9lDP,SAAa17B,EAAQnmB,EAAQg/B,GAE3Bh/B,GAAUA,EAEV,IAAI4yC,GAHJzsB,EAAS2Y,EAAa3Y,IAGCnmB,OACvB,GAAI4yC,GAAa5yC,IAAW6yC,GAAe7yC,GACzC,OAAOmmB,EAET,IAAI6lB,GAAOhsC,EAAS4yC,GAAa,EAC7BvF,EAAa7C,GAAYwB,GAI7B,OADAhN,EAAQiS,GAAc,GAFJ8B,GAAW/G,GAEUhN,IAC1B5kB,MAAM,EAAGizB,GAAclnB,EAAS6Y,GAklD/CsC,EAAOgd,QAAUA,GACjBhd,EAAOid,SAAWA,GAClBjd,EAAOsZ,SA1gDP,SAAkBz0B,EAAQ27B,EAAO7T,GAU/B,OANIA,EAAQC,GAAe/nB,EAAQ27B,EAAO7T,GAAkB,MAAT6T,GACjDA,EAAQ,EACCA,IACTA,GAASA,GAEX37B,EAAS4E,GAAK5E,GACPw0B,GAAex0B,EAAQ27B,IAAUC,GAAejiD,KAAKqmB,GAAU,GAAK,MAigD7Emb,EAAOv+B,OAh1DP,SAAgBtG,EAAKyG,EAAK8+C,GACpBA,GAAY9T,GAAezxC,EAAKyG,EAAK8+C,KACvC9+C,EAAM8+C,EAAW17C,GAEnB,IAAI27C,EAAe,MAAPxlD,EACRylD,EAAe,MAAPh/C,EAuBZ,GArBgB,MAAZ8+C,IACEE,GAAuB,kBAAPzlD,GAClBulD,EAAWvlD,EACXA,EAAM,GAEe,kBAAPyG,IACd8+C,EAAW9+C,EACXg/C,GAAQ,IAGRD,GAASC,IACXh/C,EAAM,EACNg/C,GAAQ,GAEVzlD,GAAOA,GAAO,EACVylD,GACFh/C,EAAMzG,EACNA,EAAM,GAENyG,GAAOA,GAAO,EAEZ8+C,GAAYvlD,EAAM,GAAKyG,EAAM,EAAG,CAClC,IAAIq0C,EAAO9M,KACX,OAAO6B,GAAU7vC,EAAO86C,GAAQr0C,EAAMzG,EAAMtB,GAAW,QAAUo8C,EAAO,IAAIv3C,OAAS,KAAOkD,GAE9F,OAAOqnC,GAAW9tC,EAAKyG,IAizDzBo+B,EAAOzoC,OAASA,GAChByoC,EAAO2b,YAAcA,GACrB3b,EAAOpsB,OAASA,GAChBosB,EAAOxoC,OApkEP,SAAgBqmC,EAAQ/nC,EAAMiqD,GAC5B,IAAIvoD,EAAmB,MAAVqmC,EAAiB74B,EAAY64B,EAAO/nC,GASjD,OARI0B,IAAWwN,IACC,MAAV64B,GAAmBuK,GAAMtyC,EAAM+nC,KAGjCrmC,EAAmB,OADnBqmC,EAAwB,IADxB/nC,EAAOwyC,GAAOxyC,IACA4I,OAAcm/B,EAAS2I,GAAQ3I,EAAQ0K,GAAUzyC,EAAM,GAAI,KAC/CkP,EAAY64B,EAAO9pC,GAAK+B,KAEpD0B,EAASA,IAAWwN,EAAY+6C,EAAevoD,GAE1CkK,GAAWlK,GAAUA,EAAOjF,KAAKsrC,GAAUrmC,GA2jEpDwoC,EAAOsd,MAAQA,GACftd,EAAOD,aAAeA,EACtBC,EAAOv7B,KA/7JP,SAAc9T,GACZ,IAAI+N,EAAS/N,EAAam8C,GAAUn8C,GAAc,EAClD,OAAOo8C,GAASruC,GAAUA,EAAS+2B,GAAK9kC,GAAY+N,QA87JtDshC,EAAOkd,UAAYA,GACnBld,EAAOt3B,KAAOA,GACds3B,EAAO6a,YAAcA,GACrB7a,EAAO8a,gBAAkBA,GACzB9a,EAAOmd,UAAYA,GACnBnd,EAAO6gB,WAh6CP,SAAoBh8B,EAAQjkB,EAAQyB,GAMlC,OALAwiB,EAAS2Y,EAAa3Y,GACtBxiB,EAAuB,MAAZA,EACP,EACA2oC,GAAU3oC,EAAW,EAAI,GAAMA,GAAY,EAAIwiB,EAAOnmB,QAEnDmmB,EAAOmW,YAAYp6B,EAAQyB,IAAaA,GA25CjD29B,EAAO8gB,IAlPP,SAAanwD,EAAY6uC,EAAU8D,GAKjC,OAJIA,GAAWsJ,GAAej8C,EAAY6uC,EAAU8D,KAClD9D,EAAWx6B,GAGa,IAD1Bw6B,EAAWoK,GAAYpK,EAAU8D,EAAS,IAC1B5kC,OACZ4jC,GAAS9yC,GAAQmB,GAAcA,EAAaw9C,GAAWx9C,GAAa6uC,GACpEqK,GAAQl5C,EAAY6uC,IA4O1BQ,EAAOprC,SAzzCP,SAAkBiwB,EAAQ52B,EAAS8yD,GAGjC,IAAIxyD,EAAWyxC,EAAO2Z,iBAElBoH,GAAgBnU,GAAe/nB,EAAQ52B,EAAS8yD,KAClD9yD,EAAU8yD,EAAe/7C,GAE3B6f,EAAS2Y,EAAa3Y,GAGtB,IAIIm8B,EACAC,EALA/G,EAAUxX,GAAWE,OAFzB30C,EAAUy0C,GAAWE,MAAeme,GAAgB9yD,GAAUM,EAAUg0C,KAExB2X,SAAU3rD,EAAS2rD,QAAS3X,IACxE2e,EAAczrB,GAAKykB,GACnBiH,EAAgBlX,GAAWiQ,EAASgH,GAIpCl6C,EAAQ,EACR+yC,EAAc9rD,EAAQ8rD,aAAeqH,GACrCv7C,EAAS,WAGTw7C,EAAe93B,IAChBt7B,EAAQ2rD,QAAUwH,IAAWv7C,OAAS,IACvCk0C,EAAYl0C,OAAS,KACpBk0C,IAAgBC,GAAgBsH,GAAeF,IAAWv7C,OAAS,KACnE5X,EAAQ0b,UAAYy3C,IAAWv7C,OAAS,KACzC,KAGE07C,EAAY,kBACb,cAAetzD,EACZA,EAAQszD,UACP,6BAA+BC,GAAmB,KACnD,KAEN38B,EAAO9oB,QAAQslD,EAAc,SAASlM,EAAOsM,EAAaC,EAAkBC,EAAiBC,EAAen2B,GAsB1G,OArBAi2B,IAAqBA,EAAmBC,GAGxC97C,GAAUgf,EAAO/L,MAAM9R,EAAOykB,GAAQ1vB,QAAQ8lD,GAAmB9iB,GAG7D0iB,IACFT,GAAa,EACbn7C,GAAU,YAAc47C,EAAc,UAEpCG,IACFX,GAAe,EACfp7C,GAAU,OAAS+7C,EAAgB,eAEjCF,IACF77C,GAAU,iBAAmB67C,EAAmB,+BAElD16C,EAAQykB,EAAS0pB,EAAMz2C,OAIhBy2C,IAGTtvC,GAAU,OAIV,IAAIo0C,EAAWhsD,EAAQgsD,SAClBA,IACHp0C,EAAS,iBAAmBA,EAAS,SAGvCA,GAAUo7C,EAAep7C,EAAO9J,QAAQ+lD,GAAsB,IAAMj8C,GACjE9J,QAAQgmD,GAAqB,MAC7BhmD,QAAQimD,GAAuB,OAGlCn8C,EAAS,aAAeo0C,GAAY,OAAS,SAC1CA,EACG,GACA,wBAEJ,qBACC+G,EACI,mBACA,KAEJC,EACG,uFAEA,OAEJp7C,EACA,gBAEF,IAAIrO,EAAS4lD,GAAQ,WACnB,OAAO1E,GAASwI,EAAaK,EAAY,UAAY17C,GAAQtU,MAAMyT,EAAWm8C,KAMhF,GADA3pD,EAAOqO,OAASA,EACZ4xC,GAAQjgD,GACV,MAAMA,EAER,OAAOA,GAmtCTwoC,EAAOvW,KAAOA,GACduW,EAAOiiB,SA7pCP,SAAkBp9B,EAAQ6Y,EAAOiP,GAC/B,IAAI37C,EAAQ6zB,EAEZ,OADAA,EAAS2Y,EAAa3Y,KAIlB8nB,EAAQC,GAAe57C,EAAO0sC,EAAOiP,GAAkB,MAATjP,GACzC7Y,EAAO/L,MAAM6mB,EAAiB9a,IAEhCA,EAAO/L,MAAM2kB,EAAe5Y,EAAS6Y,EAAQ,KAL3C7Y,GA0pCXmb,EAAOkiB,UAhoCP,SAAmBr9B,EAAQ6Y,EAAOiP,GAChC,IAAI37C,EAAQ6zB,EAEZ,OADAA,EAAS2Y,EAAa3Y,KAIlB8nB,EAAQC,GAAe57C,EAAO0sC,EAAOiP,GAAkB,MAATjP,GACzC7Y,EAAO/L,MAAM,EAAG8mB,EAAkB/a,GAAU,GAE9CA,EAAO/L,MAAM,EAAG6kB,EAAgB9Y,EAAS6Y,EAAQ,IAAO,GALtD7Y,GA6nCXmb,EAAOmiB,MA7kCP,SAAet9B,EAAQ52B,EAAS0+C,GAC1BA,GAASC,GAAe/nB,EAAQ52B,EAAS0+C,KAC3C1+C,EAAU+W,GAEZ,IAAItG,EAAS0jD,EACTC,EAAWC,EAEf,GAAe,MAAXr0D,EACF,GAAIwQ,GAASxQ,GAAU,CACrB,IAAIs0D,EAAY,cAAet0D,EAAUA,EAAQs0D,UAAYA,EAC7D7jD,EAAS,WAAYzQ,GAAYA,EAAQyQ,QAAU,EAAKA,EACxD2jD,EAAW,aAAcp0D,EAAUuvC,EAAavvC,EAAQo0D,UAAYA,OAEpE3jD,GAAUzQ,GAAW,EAIzB,GADA42B,EAAS2Y,EAAa3Y,GAClBnmB,GAAUmmB,EAAOnmB,OACnB,OAAOmmB,EAET,IAAI5nB,EAAMyB,EAAS2jD,EAAS3jD,OAC5B,GAAIzB,EAAM,EACR,OAAOolD,EAET,IAAI7qD,EAASqtB,EAAO/L,MAAM,EAAG7b,GAC7B,GAAiB,MAAbslD,EACF,OAAO/qD,EAAS6qD,EAElB,GAAIntB,GAASqtB,IACX,GAAI19B,EAAO/L,MAAM7b,GAAKulD,OAAOD,GAAY,CACvC,IAAIpN,EACAsN,EACA1nB,EAAYlW,EAAO/L,MAAM,EAAG7b,GAMhC,IAJKslD,EAAUzyD,SACbyyD,EAAYh5B,GAAOg5B,EAAU18C,QAASquC,GAAQC,KAAKoO,IAAc,IAAM,MAEzEA,EAAUj5B,UAAY,EACd6rB,EAAQoN,EAAUpO,KAAKpZ,IAC7B0nB,EAAStN,EAAMnuC,MAEjBxP,EAASA,EAAOshB,MAAM,EAAa,MAAV2pC,EAAiBxlD,EAAMwlD,SAE7C,GAAI59B,EAAOxtB,QAAQkrD,EAAWtlD,IAAQA,EAAK,CAChD,IAAI+J,EAAQxP,EAAOwjC,YAAYunB,GAC3Bv7C,GAAS,IACXxP,EAASA,EAAOshB,MAAM,EAAG9R,IAG7B,OAAOxP,EAAS6qD,GA6hClBriB,EAAO0iB,SAxgCP,SAAkB79B,GAEhB,OADAA,EAAS2Y,EAAa3Y,KACJ89B,GAAiBnkD,KAAKqmB,GACpCA,EAAO9oB,QAAQ6mD,GAAe/iB,GAC9Bhb,GAqgCNmb,EAAO91B,SAtdP,SAAkB24C,GAChB,IAAIhhC,IAAOk3B,GACX,OAAOvb,EAAaqlB,GAAUhhC,GAqdhCme,EAAOwN,MAAQA,GAGfxN,EAAO1/B,IAAMlL,GACb4qC,EAAO8iB,IAAMp6C,GACbs3B,EAAO16B,SAAWywC,GAClB/V,EAAOpqB,GAAKsK,GACZ8f,EAAO+iB,OAAS7rC,GAChB8oB,EAAOgjB,MAAQzrD,GACfyoC,EAAOijB,MAAQtH,GACf3b,EAAO3F,KAAO5hB,GACdunB,EAAOkjB,QAAUnN,GACjB/V,EAAOmjB,OAAS5rD,GAEhB+gD,GAAMtY,EAAS,WACb,IAAIn6B,KAMJ,OALA4+B,GAAWzE,EAAQ,SAASqD,EAAMuO,GAC3B5R,EAAOlxC,UAAU8iD,KACpB/rC,EAAO+rC,GAAcvO,KAGlBx9B,MACH,GAKNm6B,EAAOgW,OAASA,GAEhBhW,EAAOlxC,UAAUknD,OAAS,SAAS5iC,GACjC,OAAKhlB,KAAKoyC,WAAkB,MAALptB,EAGhBhlB,KAAK4kC,KAAK,SAAShiC,GACxB,OAAOglD,GAAOhlD,EAAOoiB,KAHd4iC,GAAO5nD,KAAK4C,UAgBvBgvC,EAAOojB,QAAUA,EAGjB1hB,IAAW,OAAQ,UAAW,QAAS,aAAc,UAAW,gBAAiB,SAASkQ,GACxF5R,EAAO4R,GAAYxS,YAAcY,IAInC0B,IAAW,OAAQ,QAAS,SAASkQ,EAAY5qC,GAC/Ci5B,GAAYnxC,UAAU8iD,GAAc,SAASx+B,GAC3C,IAAIiwC,EAAWj1D,KAAKsyC,aACpB,GAAI2iB,IAAar8C,EACf,OAAO,IAAIi5B,GAAY7xC,MAEzBglB,EAAS,MAALA,EAAY,EAAIy4B,GAAU3C,GAAY91B,IAAM,EAAG,GAEnD,IAAI5b,EAASpJ,KAAK0lB,QAMlB,OALIuvC,EACF7rD,EAAOopC,cAAgBoK,GAAUxzC,EAAOopC,cAAextB,GAEvD5b,EAAOspC,UAAUxvC,MAAOmT,KAAQ2O,EAAG/kB,KAAQujD,GAAcp6C,EAAOipC,QAAU,EAAI,QAAU,MAEnFjpC,GAGTyoC,GAAYnxC,UAAU8iD,EAAa,SAAW,SAASx+B,GACrD,OAAOhlB,KAAKkkB,UAAUs/B,GAAYx+B,GAAGd,aAKzCovB,IAAW,SAAU,MAAO,aAAc,SAASkQ,EAAY5qC,GAC7D,IAAI3Y,EAAO2Y,EAAQ,EACfs8C,EAAWj1D,GAAQk1D,EAEvBtjB,GAAYnxC,UAAU8iD,GAAc,SAASpS,EAAU8D,GACrD,IAAI9rC,EAASpJ,KAAK0lB,QAGlB,OAFAtc,EAAOmpC,cAAcrvC,MAAOkuC,SAAYoK,GAAYpK,EAAU8D,EAAS,GAAIj1C,KAAQA,IACnFmJ,EAAOkpC,aAAelpC,EAAOkpC,cAAgB4iB,EACtC9rD,KAKXkqC,IAAW,QAAS,QAAS,SAASkQ,EAAY5qC,GAChD,IAAIw8C,EAAW,QAAUx8C,EAAQ,QAAU,IAE3Ci5B,GAAYnxC,UAAU8iD,GAAc,WAClC,OAAOxjD,KAAKo1D,GAAU,GAAGxyD,QAAQ,MAKrC0wC,IAAW,UAAW,QAAS,SAASkQ,EAAY5qC,GAClD,IAAIy8C,EAAW,QAAUz8C,EAAQ,GAAK,SAEtCi5B,GAAYnxC,UAAU8iD,GAAc,WAClC,OAAOxjD,KAAKsyC,aAAe,IAAIT,GAAY7xC,MAAQA,KAAKq1D,GAAU,MAKtE/hB,IAAW,QAAS,SAAU,SAASkQ,EAAY5qC,GACjD,IAAI08C,EAAgB18C,EAAQ,SAAW,MACnC28C,EAAiB38C,EAAQy8B,GAAc3sC,GAE3CmpC,GAAYnxC,UAAU8iD,GAAc,SAAS5gD,GAC3C,OAAO5C,KAAKs1D,GAAeC,EAAe3yD,OAI9CivC,GAAYnxC,UAAU0uD,QAAU,WAC9B,OAAOpvD,KAAK6I,OAAOg8B,KAGrBgN,GAAYnxC,UAAUgP,OAAS,SAASq/B,EAAWmG,GAEjD,OADAnG,EAAYyM,GAAYzM,EAAWmG,EAAS,GACrCl1C,KAAK6I,OAAO,SAASjG,GAC1B,OAAQmsC,EAAUnsC,MAItBivC,GAAYnxC,UAAUgqB,MAAQ,SAAS/K,EAAO9Q,GAC5C8Q,EAAiB,MAATA,EAAgB,GAAMA,GAAS,EAEvC,IAAIvW,EAASpJ,KACb,OAAIoJ,EAAOkpC,eAAiB3yB,EAAQ,GAAK9Q,EAAM,GACtC,IAAIgjC,GAAYzoC,IAErBuW,EAAQ,EACVvW,EAASA,EAAO+mD,WAAWxwC,GAClBA,IACTvW,EAASA,EAAOq1B,KAAK9e,IAEnB9Q,IAAQ+H,IAEVxN,GADAyF,GAAQA,GAAO,GACA,EAAIzF,EAAO89C,WAAWr4C,GAAOzF,EAAOwc,KAAK/W,EAAM8Q,IAEzDvW,IAGTyoC,GAAYnxC,UAAU0vD,eAAiB,SAASrhB,EAAWmG,GACzD,OAAOl1C,KAAKkkB,UAAUmsC,UAAUthB,EAAWmG,GAAShxB,WAGtD2tB,GAAYnxC,UAAU2jC,QAAU,WAC9B,OAAOrkC,KAAK4lB,KAAK6sB,KAInB4D,GAAWxE,GAAYnxC,UAAW,SAASu0C,EAAMuO,GAC/C,IAAIgS,EAAgB,gCAAgCplD,KAAKozC,GACrDiS,EAAe,mBAAmBrlD,KAAKozC,GACvCkS,EAAa9jB,EAAO6jB,EAAgB,QAAwB,QAAdjS,EAAuB,QAAU,IAAOA,GAErFkS,IAGL9jB,EAAOlxC,UAAU8iD,GAAc,WAC7B,IAAI9kC,EAAO+2C,GAAgB,GAAKtuD,UAC5B8qC,EAAWjyC,KAAKoyC,UAChBxvC,EAAQ5C,KAAKkyC,YACbyjB,IAAa31D,KAAKmyC,YAAY7hC,OAC9BslD,EAAShzD,aAAiBivC,GAC1BT,EAAW1yB,EAAK,GAChBm3C,EAAUD,GAAUx0D,GAAQwB,GAE5BizD,GAAWL,GAAoC,mBAAZpkB,GAA6C,GAAnBA,EAAS9gC,SAExEslD,EAASC,GAAU,GAErB,IAAInO,EAAc,SAAS9kD,GACzB,OAAQ6yD,GAAgBxjB,EACpByjB,EAAW9yD,EAAO,GAAG,GACrB8yD,EAAWvyD,MAAMyT,EAAWi9B,IAAWjxC,GAAQ8b,KAGjD5D,GAAWm6B,KAAQrQ,GAAMlmB,MAASgpC,GAAcxS,QAAWt+B,GAC3Dk/C,EAAWF,IAAWD,EAE1B,GAAIF,IAAiBxjB,EACnB,OAAI6jB,IACFlzD,EAAQA,EAAM8iB,SACRysB,YAAYjvC,KAAK4X,GAChBm6B,EAAK9wC,KAAKvB,IAEZ8yD,EAAWvxD,KAAKyS,EAAW5W,KAAK4C,SAAS,GAElD,IAAK6yD,GAAgBI,EAAS,CAC5BjzD,EAAQkzD,EAAWlzD,EAAQ,IAAIivC,GAAY7xC,MAC3C,IAAIoJ,EAAS6rC,EAAK9xC,MAAMP,EAAO8b,GAE/B,OADAtV,EAAO+oC,YAAYjvC,KAAK4X,GACjB,IAAIg3B,GAAc1oC,EAAQ6oC,GAEnC,OAAOjyC,KAAK4kC,KAAK8iB,OAKrBpU,IAAW,OAAQ,MAAO,OAAQ,UAAW,QAAS,OAAQ,SAAU,QAAS,WAAY,SAASkQ,GACpG,IAAIvO,GAAQ,sBAAsB7kC,KAAKozC,GAAckH,GAAcF,IAAYhH,GAC3EuS,EAAY,0BAA0B3lD,KAAKozC,GAAc,MAAQ,OACjEiS,EAAe,+BAA+BrlD,KAAKozC,GAEvD5R,EAAOlxC,UAAU8iD,GAAc,WAC7B,IAAI9kC,EAAOvX,UACX,OAAIsuD,IAAiBz1D,KAAKoyC,UACjB6C,EAAK9xC,MAAMnD,KAAK4C,QAAS8b,GAE3B1e,KAAK+1D,GAAW,SAASnzD,GAC9B,OAAOqyC,EAAK9xC,MAAMP,EAAO8b,QAM/B23B,GAAWxE,GAAYnxC,UAAW,SAASu0C,EAAMuO,GAC/C,IAAIkS,EAAa9jB,EAAO4R,GACxB,GAAIkS,EAAY,CACd,IAAI7yD,EAAM6yD,EAAWx1D,MACTykD,GAAU9hD,KAAS8hD,GAAU9hD,QAEnCK,MAAOhD,KAAQsjD,EAAYvO,KAAQygB,OAI7C/Q,GAAUhD,GAAoB/qC,EAAW6rC,GAAeviD,QAAWA,KAAQ,UAAW+0C,KAAQr+B,IAG9Fi7B,GAAYnxC,UAAUglB,MA1gWtB,WACE,IAAItc,EAAS,IAAIyoC,GAAY7xC,KAAKkyC,aAOlC,OANA9oC,EAAO+oC,YAAckB,GAAUrzC,KAAKmyC,aACpC/oC,EAAOipC,QAAUryC,KAAKqyC,QACtBjpC,EAAOkpC,aAAetyC,KAAKsyC,aAC3BlpC,EAAOmpC,cAAgBc,GAAUrzC,KAAKuyC,eACtCnpC,EAAOopC,cAAgBxyC,KAAKwyC,cAC5BppC,EAAOspC,UAAYW,GAAUrzC,KAAK0yC,WAC3BtpC,GAmgWTyoC,GAAYnxC,UAAUwjB,QAx/VtB,WACE,GAAIlkB,KAAKsyC,aAAc,CACrB,IAAIlpC,EAAS,IAAIyoC,GAAY7xC,MAC7BoJ,EAAOipC,SAAW,EAClBjpC,EAAOkpC,cAAe,OAEtBlpC,EAASpJ,KAAK0lB,SACP2sB,UAAY,EAErB,OAAOjpC,GAg/VTyoC,GAAYnxC,UAAUkC,MAr+VtB,WACE,IAAIksC,EAAQ9uC,KAAKkyC,YAAYtvC,QACzBozD,EAAMh2D,KAAKqyC,QACXuC,EAAQxzC,GAAQ0tC,GAChBmnB,EAAUD,EAAM,EAChBnS,EAAYjP,EAAQ9F,EAAMx+B,OAAS,EACnC4lD,EAAOlR,GAAQ,EAAGnB,EAAW7jD,KAAK0yC,WAClC/yB,EAAQu2C,EAAKv2C,MACb9Q,EAAMqnD,EAAKrnD,IACXyB,EAASzB,EAAM8Q,EACf/G,EAAQq9C,EAAUpnD,EAAO8Q,EAAQ,EACjC47B,EAAYv7C,KAAKuyC,cACjB4jB,EAAa5a,EAAUjrC,OACvB2gC,EAAW,EACXmlB,EAAYxZ,GAAUtsC,EAAQtQ,KAAKwyC,eAEvC,IAAKoC,GAASiP,EAAY/M,GAAqB+M,GAAavzC,GAAU8lD,GAAa9lD,EACjF,OAAO0rC,GAAkBia,GAAWrhB,EAAS9F,EAAM5qB,UAAY4qB,EAAO9uC,KAAKmyC,aAE7E,IAAI/oC,KAEJ6tC,EACA,KAAO3mC,KAAY2gC,EAAWmlB,GAAW,CAMvC,IAHA,IAAIC,GAAa,EACbzzD,EAAQksC,EAHZl2B,GAASo9C,KAKAK,EAAYF,GAAY,CAC/B,IAAI9wD,EAAOk2C,EAAU8a,GACjBjlB,EAAW/rC,EAAK+rC,SAChBnxC,EAAOoF,EAAKpF,KACZqxC,EAAWF,EAASxuC,GAExB,GAAI3C,GAAQk1D,EACVvyD,EAAQ0uC,OACH,IAAKA,EAAU,CACpB,GAAIrxC,GAAQq2D,EACV,SAASrf,EAET,MAAMA,GAIZ7tC,EAAO6nC,KAAcruC,EAEvB,OAAOwG,GA07VTwoC,EAAOlxC,UAAUumB,MAzsMjB,WACE,OAAOA,GAAMjnB,OAysMf4xC,EAAOlxC,UAAU61D,OA7qMjB,WACE,OAAO,IAAIzkB,GAAc9xC,KAAK4C,QAAS5C,KAAKoyC,YA6qM9CR,EAAOlxC,UAAUW,OAAS0rD,GAC1Bnb,EAAOlxC,UAAUogD,MAznMjB,SAAsBl+C,GAIpB,IAHA,IAAIwG,EACA6hB,EAASjrB,KAENirB,aAAkB+mB,GAAY,CACnC,IAAItsB,EAAQqsB,GAAa9mB,GACrB7hB,EACFohB,EAAS0nB,YAAcxsB,EAEvBtc,EAASsc,EAEX,IAAI8E,EAAW9E,EACfuF,EAASA,EAAOinB,YAGlB,OADA1nB,EAAS0nB,YAActvC,EAChBwG,GA2mMTwoC,EAAOlxC,UAAUwjB,QAplMjB,WACE,IAAIthB,EAAQ5C,KAAKkyC,YAEbwV,EAAc,SAAS9kD,GACzB,OAAQ4zD,GAAWA,EAAQnkB,QAAU,EAAKzvC,EAAQA,EAAMshB,WAE1D,GAAIthB,aAAiBivC,GAAa,CAChC,IAAI2kB,EAAU5zD,EAMd,OALI5C,KAAKmyC,YAAY7hC,SACnBkmD,EAAU,IAAI3kB,GAAY7xC,QAE5Bw2D,EAAUA,EAAQtyC,WACViuB,YAAYjvC,MAAO+xC,KAAQrQ,GAAMlmB,MAASgpC,GAAcxS,QAAWt+B,IACpE,IAAIk7B,GAAc0kB,EAASx2D,KAAKoyC,WAEzC,OAAOpyC,KAAK4kC,KAAK8iB,IAskMnB9V,EAAOlxC,UAAUmU,SAvjMjB,WACE,OAAQ7U,KAAK4C,QAAU,IAujMzBgvC,EAAOlxC,UAAU+1D,IAAM7kB,EAAOlxC,UAAUg2D,OAAS9kB,EAAOlxC,UAAUi2D,QAAU/kB,EAAOlxC,UAAUkC,MAviM7F,WACE,OAAOo5C,GAAiBh8C,KAAKkyC,YAAalyC,KAAKmyC,cAyiMjDP,EAAOlxC,UAAUgwD,QAAU9e,EAAOlxC,UAAUiC,IAC5CivC,EAAOlxC,UAAUurC,KAAO2F,EAAOlxC,UAAU2pB,MACzCunB,EAAOlxC,UAAUowD,OAASlf,EAAOlxC,UAAUmI,OAC3C+oC,EAAOlxC,UAAUqwD,KAAOnf,EAAOlxC,UAAUymD,KAElCvV,EA7gYT,IAAIh7B,EAGAo+C,EAAU,SAGVxS,EAAY,EACZC,EAAgB,EAChBO,EAAmB,EACnBrC,EAAa,EACbsC,EAAmB,GACnBrC,EAAe,GACf0B,EAAqB,GACrB5B,EAAW,IACXG,EAAa,IAGbmT,EAAuB,GACvBE,EAAyB,MAGzBhI,EAAY,IACZD,EAAW,GAGXnV,EAAmB,IAGnBwf,EAAmB,EACnBnB,EAAgB,EAGhBze,EAAkB,sBAGlBxF,EAAc,yBAGd+E,EAAU,qBACV6C,EAAW,iBACXkL,EAAU,mBACVC,EAAU,gBACVC,EAAW,iBACXnO,EAAU,oBAEVoO,EAAY,kBACZnO,EAAY,kBACZoO,EAAY,kBAEZC,EAAY,kBAGZc,GAAiB,uBACjBC,GAAa,wBACbC,GAAa,wBACbC,GAAU,qBACVC,GAAW,sBACXC,GAAW,sBACXC,GAAW,sBACXC,GAAkB,6BAClBC,GAAY,uBACZC,GAAY,uBAGZ8N,GAAuB,iBACvBC,GAAsB,qBACtBC,GAAwB,gCAGxBY,GAAgB,gCAChBlD,GAAkB,YAClBiD,GAAmBp5B,OAAOq5B,GAAc/8C,QACxC45C,GAAqBl2B,OAAOm2B,GAAgB75C,QAG5Cg0C,GAAW,mBACXC,GAAa,kBACbE,GAAgB,mBAGhBxF,GAAe,qDACfD,GAAgB,QAChBW,GAAa,wEAMb2K,GAAgB,yEAChBD,GAAmBr2B,OAAOs2B,GAAch6C,QAGxCsyC,GAAc,gCAGd9C,GAAe,WAGfiM,GAAe,kCAGfpN,GAAU,OAGVuM,GAAiB,SAGjB7I,GAAe,8BAGfvD,GAAW,QAGX6D,GAAW,0CAGXkJ,GAAY,OAGZS,GAAoB,yBAGpBzJ,GAAW,WACb,IAAI4M,EAAQ,8BACRC,EAAQ,+BAEZ,OAAO17B,OAAOy7B,EAAQ,OAASA,EAAQC,EAAQ,KAAOD,EAAQ,IAAMC,EAAQ,IAAMD,EAAQ,WAAY,QAIpGvM,IACF,QAAS,cAAe,OAAQ,QAAS,eAAgB,eACzD,WAAY,YAAa,aAAc,aAAc,OAAQ,SAC7D,SAAU,SAAU,MAAO,SAAU,IAAK,eAAgB,WAC1D,aAAc,WAAY,aAAc,YAAa,aACrD,oBAAqB,cAAe,cAAe,WAIjD+I,IAAmB,EAGnB3J,MACJA,GAAerE,IAAcqE,GAAepE,IAC5CoE,GAAenE,IAAWmE,GAAelE,IACzCkE,GAAejE,IAAYiE,GAAehE,IAC1CgE,GAAe/D,IAAmB+D,GAAe9D,IACjD8D,GAAe7D,KAAa,EAC5B6D,GAAexT,GAAWwT,GAAe3Q,GACzC2Q,GAAetE,IAAkBsE,GAAezF,GAChDyF,GAAexF,GAAWwF,GAAevF,GACzCuF,GAAe1T,GAAW0T,GA3Gb,gBA4GbA,GAAetF,GAAasF,GAAezT,GAC3CyT,GAAerF,GAAaqF,GAzGf,gBA0GbA,GAAepF,GAAaoF,GAxGX,qBAwGwC,EAGzD,IAAIvT,MACJA,GAAcD,GAAWC,GAAc4C,GACvC5C,GAAciP,IAAkBjP,GAAc8N,GAC9C9N,GAAc+N,GAAW/N,GAAckP,IACvClP,GAAcmP,IAAcnP,GAAcoP,IAC1CpP,GAAcqP,IAAYrP,GAAcsP,IACxCtP,GAAciO,GAAajO,GAAcF,GACzCE,GAAckO,GAAalO,GAAcmO,GACzCnO,GAAcuP,IAAYvP,GAAcwP,IACxCxP,GAAcyP,IAAazP,GAAc0P,KAAa,EACtD1P,GAAcgO,GAAYhO,GAAcH,GACxCG,GA5Ha,gBA4HWA,GAxHX,gBAyHbA,GAvHiB,qBAuHW,EAG5B,IAAIhG,IACF4mB,IAAQ,IAAMC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAC1EC,IAAQ,IAAMC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAC1EC,IAAQ,IAAMC,IAAQ,IACtBC,IAAQ,IAAMC,IAAQ,IACtBC,IAAQ,IAAMC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAChDC,IAAQ,IAAMC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAChDC,IAAQ,IAAMC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAChDC,IAAQ,IAAMC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAChDC,IAAQ,IAAMC,IAAQ,IACtBC,IAAQ,IAAMC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAC1EC,IAAQ,IAAMC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAC1EC,IAAQ,IAAMC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAChDC,IAAQ,IAAMC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAChDC,IAAQ,IAAMC,IAAQ,IAAKC,IAAQ,IACnCC,IAAQ,KAAMC,IAAQ,KACtBC,IAAQ,KAAMC,IAAQ,KACtBC,IAAQ,MAINtqB,IACFuqB,IAAK,QACLC,IAAK,OACLC,IAAK,OACLC,IAAK,SACLC,IAAK,QACLC,IAAK,SAIHvpB,IACFwpB,QAAS,IACTC,OAAQ,IACRC,OAAQ,IACRC,SAAU,IACVC,QAAS,IACTC,QAAS,KAIPC,IACFC,UAAY,EACZhsB,QAAU,GAIRgB,IACFirB,EAAK,MAAOC,EAAK,MAAOC,EAAK,MAAOC,EAAK,MAAOC,EAAK,MACrDC,EAAK,MAAOC,EAAK,MAAOC,EAAK,MAAOC,EAAK,MAAOC,EAAK,MACrDC,EAAK,MAAOC,EAAK,MAAOC,EAAK,MAAOC,EAAK,MAAOC,EAAK,MAAOC,EAAK,MACjEz6C,EAAK,MAAO06C,EAAK,MAAOC,EAAK,MAAOC,EAAK,MAAOrqD,EAAK,MAAOsqD,EAAK,MACjE73C,EAAK,MAAO5G,EAAK,MAAO0+C,EAAK,MAAOC,EAAK,MAAOh6D,EAAK,MAAOq9B,EAAK,OAI/DsQ,IACFssB,KAAM,KACNhC,IAAK,IACLiC,KAAM,IACNC,KAAM,IACNC,SAAU,QACVC,SAAU,SAIRC,GAAc7B,GAA0B,QAAK8B,IAAYA,EAAQ96B,UAAY86B,EAG7EC,GAAa/B,GAAyB,QAAKgC,IAAWA,EAAOh7B,UAAYg7B,EAGzEC,GAAaJ,IAAeE,IAA+B,iBAAV77D,gBAAsBA,gBAAUA,eAAOwjD,QAAUxjD,eAGlGg8D,GAAWlC,UAAmBhkD,OAASA,MAAQA,KAAK0tC,QAAU1tC,KAG9DmmD,GAAanC,UAAmBh4D,SAAWA,QAAUA,OAAO0hD,QAAU1hD,OAGtEo6D,GAAgBL,IAAcA,GAAWD,UAAYD,IAAeA,GAQpEre,GAAOye,IAAgBE,MAAgB39D,MAAQA,KAAKwD,SAAYm6D,IAAeD,IAAY19D,KA8wX3FM,GAAIqxC,IAGa,mBAAVksB,GAA6C,iBAAdA,EAAOC,KAAmBD,EAAOC,KAKzE9e,GAAK1+C,EAAIA,GAITu9D,EAAO,WACL,OAAOv9D,MAIF+8D,IAAeE,GAElBK,IACDL,GAAWD,QAAUh9D,IAAGA,EAAIA,GAI7B+8D,GAAY/8D,EAAIA,GAKlB0+C,GAAK1+C,EAAIA,KAEX6D,KAAKnE,kBnI3jYHuJ,KAAO/F,OAAOC,WAAaD,OAAOC,gEoIHrC,SAAU/B,EAAQw8D,GAClBV,UAAgFU,EAAQmC,UADzF,CAIErgE,WAAiBM,GAsBnB,SAASgkB,EAAYhiB,EAAS+Q,GAE1B,SAASkR,EAAIhjB,GACT,IAAIijB,EAAYjjB,EAAI+P,MAIpB,KAAMhR,EAAEY,cAAcK,IAAQ,UAAWA,GACrC,OAAQA,GAGZ,GAAIjB,EAAEyI,YAAYwb,EAAIE,OAAOD,IACzB,MAAM,IAAIhjB,MAAM,8BAAgCgjB,GAGpD,IAAKjjB,EAAImjB,OAASnjB,EAAIojB,QAClB,OAAOpjB,EAAIojB,QAKf,GAFApjB,EAAIojB,QAAUJ,EAAIE,OAAOD,GAAWrhB,MAAM,KAAMgE,YAE3C7G,EAAEc,QAAQG,EAAIojB,SACf,MAAM,IAAInjB,MAAM,8CAAgDgjB,EAAY,KAGhF,OAAOjjB,EAAIojB,QAGf,SAASC,EAAUvkB,EAAU+E,GACzB,OAAO9E,EAAE6I,OAAO9I,EAAU,SAAS0D,EAAInB,GAEnC,GAAItC,EAAEY,cAAc0B,IAAU,UAAWA,GAAwB,WAAfA,EAAM0O,QAAuB1O,EAAMiiB,QAAQ,CACzF,IAAIC,EAAMF,EAAUL,EAAI3hB,EAAOwC,GAAUA,GACzC,OAAOrB,EAAI1C,OAAOyjB,GAElB,OAAO/gB,EAAI1C,QAAQuB,SA2C/B,SAASmiB,EAAexjB,EAAK6D,GACzB,IACIqQ,EADApV,EAAWkB,EAAI8D,KAAOuf,EAAUrjB,EAAI8D,KAAMD,MAE1C4f,EAAIzjB,EAAIyjB,GAAK,EACb5b,KACA6b,EAAe3kB,EAAE6I,OAAO5H,EAAI2jB,QAAQ,SAAUrb,EAAMsb,GACpD,OAAOtb,EAAOsb,IAGlB,IAAK1P,EAAI,EAAGA,EAAIuP,EAAGvP,IACfrM,EAAOlG,KAKX,WACI,IAAIuS,EACA2P,EAAa/R,IAAW4R,EACxBI,EAAa,EAEjB,IAAK5P,EAAI,EAAGA,EAAIpV,EAASiQ,OAAQmF,IAI7B,GAHA4P,GAAc9jB,EAAI2jB,QAAQzP,GAC1B4P,GAAcA,EAAWC,QAAQ,GAE7BF,GAAcC,EACd,OAAO9jB,EAAI8D,KAAKoQ,GAIxB,MAAM,IAAIjU,MAAM,mDAnBJ+jB,IAGhB,OAAOnc,EAfX,OAnCAmb,EAAIE,QACAI,QAAU,SAAStjB,GACf,OAAOA,EAAI8D,MAGfmgB,OAAQ,SAASjkB,GACb,IACiBkU,EADbpV,EAAWkB,EAAI8D,SACf+D,KACJ,IAAKqM,EAAE,EAAGA,EAAIlU,EAAIkkB,MAAOhQ,IACrBrM,EAASA,EAAO/H,OAAOf,EAAEolB,MAAMrlB,GAAS,IAE5C,OAAO+I,GAIXiK,OAAQ,SAAS9R,EAAK6D,GAClB,IAAI/E,EAAWkB,EAAI8D,KAAOuf,EAAUrjB,EAAI8D,KAAMD,MAC9C,OAAO9C,EAAQjC,IAGnBslB,OAAQ,SAASpkB,EAAK6D,GAClB,IAAI/E,EAAWkB,EAAI8D,KAAOuf,EAAUrjB,EAAI8D,KAAMD,MAC9C,OAAO9E,EAAEslB,KAAKtjB,EAAQjC,GAAWkB,EAAIyjB,EAAIzjB,EAAIyjB,EAAI,IAGrD5K,OAAQ,SAAS7Y,EAAK6D,GAClB,OAAO9E,EAAEgT,WAAW/R,EAAIgM,IAAMhM,EAAIgM,GAAGhM,EAAK6D,OAG9CygB,eAAgBd,EAChBA,eAAgBA,GAKbR,EAsCX,SAAS+7C,EAA2Bt5C,GAchC,OAZA,SAA0BC,EAAO1lB,GAI7B,OAAKjB,EAAE2C,SAASgkB,GAFU,SAKA7W,KAAK6W,GAExBD,EAAYC,EAAO1lB,GAFoB0lB,EAAMtZ,QAAQ,KAAK,KAHlCsZ,GAYvC,SAASs5C,EAAyBv5C,GA6B9B,SAASK,EAAYvO,GACjB,IAAIwO,EAAWxO,EAAUwO,SACzB,OAAIhnB,EAAEgT,WAAWwF,GAAmBA,EAC/BxY,EAAE4G,IAAI4R,EAAW,YAClBxY,EAAEgT,WAAWgU,GAAkBA,EAC5BC,EAAaD,GAFsBhnB,EAAE4G,IAAI4R,EAAU,MAAQxY,EAAEknB,GAAKC,EAK7E,SAASA,EAASvT,GAAO,QAASA,EAElC,SAASwT,EAAaC,GAAK,OAAO,SAASzT,EAAKE,GAAQ,SAAQF,EAAKE,GAAOpN,MAAM1G,EAAEiT,WAAYoU,EAAGzT,EAAKE,IAtCxG,IAAImT,GACAK,GAAIF,EAAapnB,EAAEsnB,IACnBC,YAAaH,EAAapnB,EAAEsnB,IAC5BE,IAAKJ,EAAapnB,EAAEwnB,KACpBC,mBAAoBL,EAAapnB,EAAEwnB,KACnCE,OAAQ1nB,EAAEknB,GACVS,GAAM3nB,EAAE4nB,MAAM5nB,EAAE4W,SAAS,EAAE,GAC3BA,SAAU5W,EAAE4nB,MAAM5nB,EAAE4W,SAAS,EAAE,GAC/BiR,QA6BJ,SAAiBjU,EAAKE,GAAQ,OAAOF,IAASE,GA5B1CqT,SAAUA,GAed,OAZA,SAAwB3O,EAAW1T,GAC/B,IAAIkiB,EAAWD,EAAYvO,GACvB5E,EAAO8S,EAAYlO,EAAUsP,QAAQhjB,GACrCgP,EAAQ4S,EAAYlO,EAAUuP,GAAGjjB,GAIrC,OAFI0T,EAAUqC,OAAS7R,SAASA,QAAQgf,KAAK,cAAepU,EAAM4E,EAAUwO,UAAY,SAAUlT,EAAO0E,GAElGA,EAAUyP,QACVjB,EAASnkB,MAAMiC,GAAS8O,EAAME,EAAOhP,IACtCkiB,EAASnkB,MAAMiC,GAAS8O,EAAME,EAAOhP,KAsBnD,SAAS4jB,EAAiBlQ,GAQtB,SAASyC,EAASf,EAAWpV,GAIzB,SAASgL,EAAK6Y,GAAM,OAAO1N,EAAS0N,EAAK7jB,GAGzC,OALA9E,EAAEc,QAAQoZ,KAAgBA,GAAc0O,IAAI1O,IAKxCA,EAAW0O,IACJ5oB,EAAE0G,MAAMwT,EAAW0O,IAAK9Y,GAE/BoK,EAAW2O,MACH7oB,EAAE0G,MAAMwT,EAAW2O,KAAM/Y,GAIjCoK,EAAW4O,GACJ9oB,EAAEga,KAAKE,EAAW4O,GAAIhZ,GAE7BoK,EAAW6O,KACH/oB,EAAEga,KAAKE,EAAW6O,IAAKjZ,GAG5B0I,EAAU0B,EAAYpV,GAGjC,OAAOmW,EASX,SAASilD,EAA0Bj8C,EAAKhJ,EAAUkN,GAK9C,OAHAlE,EAAIE,OAAOiE,OASX,SAAgBnnB,EAAK6D,GAEjB,OADAA,EAAU9E,EAAEO,OAAOuE,MAAeqjB,GAC3BlN,EAASha,EAAIiZ,WAAYpV,GAAW7D,EAAI8D,SAAa9D,EAAIonB,cAVpEpE,EAAIE,OAAOmE,YAiBX,SAAqBrnB,EAAK6D,GACtBA,EAAU9E,EAAEO,OAAOuE,MAAeqjB,GAClC,IAAII,EAMJ,OAJAA,EAAMvoB,EAAEwoB,KAAKvnB,EAAIwnB,SAAU,SAASL,GAChC,OAAOnN,EAASmN,EAAOlO,WAAYpV,MAI5ByjB,EAAIxjB,SAGR9D,EAAIonB,cA3BRpE,EAgCX,SAASk8C,EAAwBl8C,GAM7B,SAAS+B,EAAcviB,GACnB/D,KAAKK,SAAW0D,EAChB/D,KAAKumB,SACLvmB,KAAKsK,IAAIvG,GACT/D,KAAKwmB,QAAU,EA0FnB,OAvFAlmB,EAAEO,OAAOylB,EAAc5lB,WAMnB4J,IAAK,SAASvG,EAAKmgB,GACflkB,KAAKumB,MAAMrjB,MAAMsjB,QAAQtC,EAAUngB,EAAIuM,QAAU,EAAEjQ,SAAS0D,KAGhE0iB,QAAS,SAAS1c,EAAW3E,GAEzB,IAAIshB,EAAc1mB,KAAKumB,MAAMvmB,KAAKumB,MAAMjW,OAAO,GAC3CqW,EAAwB,SAAd5c,EAId,IAAK2c,EACD,MAAM,IAAIllB,MAAO,wCAGrBklB,EAAYF,SAAWG,EAAS,GAAK,EAErC,IAAI/b,EAAK8b,EAAYrmB,SAASqmB,EAAYF,SAG1C,OAAIlmB,EAAEyI,YAAY6B,IAAO5K,KAAKumB,MAAMjW,OAAS,GACzCtQ,KAAKumB,MAAMK,MACJ5mB,KAAKymB,QAAQtiB,KAAKnE,KAAK+J,EAAU3E,IAIxCwF,GAAMA,EAAG0G,OACTtR,KAAKsK,IAAIia,EAAI3Z,EAAGxF,IAAWuhB,GACpB3mB,KAAKymB,QAAQtiB,KAAKnE,KAAK+J,EAAU3E,IAIrCpF,MAGX8J,KAAM,SAAS1E,GAEX,OADApF,KAAKwmB,UACExmB,KAAKymB,QAAQtiB,KAAKnE,KAAM,OAAOoF,IAG1CyE,KAAM,SAASzE,GAEX,OADApF,KAAKwmB,UACExmB,KAAKymB,QAAQtiB,KAAKnE,KAAM,OAAOoF,IAQ1ChF,QAAQ,WAEJ,IAAIsmB,EAAc1mB,KAAKumB,MAAMvmB,KAAKumB,MAAMjW,OAAO,GAE/C,IAAKoW,EACD,MAAM,IAAIllB,MAAO,wCAGrB,IAAIoJ,EAAK8b,EAAYrmB,SAASqmB,EAAYF,SAE1C,GAAK5b,EAOL,OAFAA,EAAGlH,MAAQ1D,KAAK2D,OAETiH,GAGXjH,KAAM,WACF,OACI4B,OAAQvF,KAAKwmB,QAGbK,MAAQvmB,EAAE6I,OAAOnJ,KAAKumB,MAAO,SAASO,EAAKC,GAAK,OAAOD,EAAOC,EAAI1mB,SAASiQ,OAAO,GAAI,GAAG,MAM9FgW,EAgDX,SAASo6C,EAAsBl8D,GA4B3B,OA1BA,SAAqBjD,EAAK6D,EAASvF,GAY/B,SAAS4pB,EAAO7mB,GACZ,OAAItC,EAAE2C,SAASL,GAAe4D,EAAS5D,GACnCtC,EAAEc,QAAQwB,GAAeA,EAAMD,IAAI8mB,GACnCnpB,EAAEY,cAAc0B,GAAetC,EAAE4I,UAAUtG,EAAO6mB,GAC/C7mB,EAGX,SAAS4D,EAAS0K,GAEd,OAAMA,EAAMjI,QAAQ,MACb3I,EAAEkG,SAAS0K,EAAX5Q,CAAkBopB,GADSxY,EApBtC,IAEIrO,EAFA8Z,EAAOrc,EAAEyF,IAAIlG,EAAS,WACtBuJ,KAEAsgB,EAAMppB,EAAEgF,UAAWF,EAASZ,GAEhC,IAAK3B,KAAOtB,EACR6H,EAAOvG,IAA8B,GAAtB8Z,EAAK1T,QAAQpG,GAAc4mB,EAAOloB,EAAIsB,IAAQtB,EAAIsB,GAGrE,OAAOuG,GAsHf,SAASugB,EAAmBC,EAAcC,EAAgBC,GAEtD,SAASC,IACL/pB,KAAKgqB,QACD3W,UACA4W,YACAC,eAUR,OANA5pB,EAAEO,OAAOkpB,EAAWrpB,WAChB2S,OAOJ,SAAgB/C,EAAQ6Z,EAAM3E,GAC1B,IAAItH,EAASle,KAAKgqB,OAAO3W,OAEzB,OAAImS,IAAWllB,EAAEyI,YAAYmV,EAAMiM,IACxBjM,EAAMiM,IAIjBjM,EAAMiM,GAAQP,EAAatZ,GAEpB4N,EAAMiM,KAhBbF,SAkDJ,SAAkB3Z,EAAQ6Z,EAAM3E,GAC5B,IAEIpc,EAFA8U,EAAQle,KAAKgqB,OAAOC,SACpBG,EAAOlM,EAAMiM,GAIjB,GAAI7pB,EAAEyI,YAAYqhB,GAEd,OADAA,EAAOlM,EAAMiM,GAAQ,IAAIL,EAAWD,EAAevZ,KACvC+Z,QAGhB,GAAID,EAAK9Z,SAAWA,EAChB,MAAM,IAAI9O,MAAM,eAAgB2oB,EAAM,uGAI1C,OAAI3E,EACO4E,EAAKhqB,WAIhBgJ,EAASghB,EAAKtgB,OAIVxJ,EAAEyI,YAAYK,IACdghB,EAAOlM,EAAMiM,GAAQ,IAAIL,EAAWD,EAAevZ,KACvC+Z,QAELjhB,IA9EX8gB,WAkBJ,SAAoB5Z,EAAQ6Z,EAAM3E,GAC9B,IAEIpc,EAFA8U,EAAQle,KAAKgqB,OAAOE,WACpBE,EAAOlM,EAAMiM,GAIjB,GAAI7pB,EAAEyI,YAAYqhB,GAEd,OADAA,EAAOlM,EAAMiM,GAAQ,IAAIL,EAAWxpB,EAAEgqB,MAAMha,KAChC+Z,QAGhB,GAAID,EAAK9Z,SAAWA,EAChB,MAAM,IAAI9O,MAAM,eAAgB2oB,EAAM,uGAI1C,OAAI3E,EACO4E,EAAKhqB,WAIhBgJ,EAASghB,EAAKtgB,OAGVxJ,EAAEyI,YAAYK,GACPghB,EAAKC,QAELjhB,MA1CR2gB,EAsFX,SAAS42C,EAAgB72C,GAErB,SAAS6B,IACL3rB,KAAK8rB,SA6BT,OA1BAxrB,EAAEO,OAAO8qB,EAAMjrB,WACXwiB,OAAQ,SAAgBsJ,GACpB,GAAIxsB,KAAK8rB,MAAMU,GACX,MAAM,IAAIhrB,MAAM,kBAAoBgrB,EAAY,mBAEpDxsB,KAAK8rB,MAAMU,GAAa,IAAI1C,EAC5B9pB,KAAK8rB,MAAMU,GAAWf,UAAYe,GAGtCR,KAAM,SAAcQ,GAChB,IAAKxsB,KAAK8rB,MAAMU,GACZ,MAAM,IAAIhrB,MAAM,kBAAoBgrB,EAAY,mBAEpD,OAAOxsB,KAAK8rB,MAAMU,IAGtBC,OAAQ,SAAgBD,EAAWnnB,GACpBrF,KAAKgsB,KAAKQ,GAChBliB,IAAIjF,IAGbqnB,IAAK,SAAaF,GACdxsB,KAAK8rB,MAAMU,QAAa5V,KAIzB+U,EAIX,SAASgB,EAAiBrG,GAUtB,SAASsG,EAASnB,EAAW1nB,EAAIoG,GAC7BnK,KAAKyrB,UAAYA,EACjBzrB,KAAK2J,cAAgB,IAAI2c,EAAcviB,GACvC/D,KAAKmK,GAAKA,EAoDd,OAjDA7J,EAAEO,OAAO+rB,EAASlsB,WAEdoJ,KAAM,SAAS1E,GAEX,OADApF,KAAK2J,cAAcG,KAAK1E,GACjBpF,MAIX6J,KAAM,SAASzE,GAEX,OADApF,KAAK2J,cAAcE,KAAKzE,GACjBpF,MASXI,QAAS,SAASgF,EAASvF,GACvBuF,IAAYA,MAEZ,IAAI7D,EAAMvB,KAAK2J,cAAcvJ,QAAQgF,GAGrC,OAAK7D,EAIEvB,KAAKmK,GAAGoS,QAAQvc,KAAKyrB,UAAWlqB,EAAK6D,EAASvF,GAH1C0B,GAUf2Q,IAAK,SAAS9M,EAASvF,GAInB,IAHA,IAAIQ,KAEAuK,EAAK5K,KAAK8J,OAAO1J,QAAQgF,EAASvF,GAC/B+K,GACHvK,EAAS6C,KAAK0H,GACdA,EAAK5K,KAAK8J,OAAO1J,QAAQgF,EAASvF,GAGtC,OAAOQ,KAIRusB,EAIX,SAASlB,EAAiBC,EAAO5B,EAAYxN,EAASqP,EAAaC,GAE/D,SAASzhB,IACLpK,KAAK8rB,MAAQ,IAAIH,EACjB3rB,KAAK+qB,WAAa,IAAIhB,EAyD1B,OAtDAzpB,EAAEO,OAAOuJ,EAAS1J,WACd2J,WAAY,SAASohB,GACjBzrB,KAAK8rB,MAAM5I,OAAOuI,IAGtBM,QAAS,SAASN,GACd,OAAOzrB,KAAK8rB,MAAME,KAAKP,IAG3BnhB,IAAK,SAASmhB,EAAWZ,GACV7qB,KAAK8rB,MAAME,KAAKP,GACtBnhB,IAAIugB,IAGbtO,QAAS,SAASkP,EAAWZ,EAAOzlB,EAASvF,GACzC,IACIuJ,EADAghB,EAAOpqB,KAAK+rB,QAAQN,GAGxB,IAESZ,EAAMoB,YAAapB,EAAMqB,YAC1BrB,EAAMoB,UAAY1P,EAAQsO,EAAOT,EAAMpqB,KAAK+qB,YAC5CF,EAAMsB,WAAa,MAIlBtB,EAAMsB,aAActB,EAAMoB,UAAUG,qBACrChnB,EAAQqmB,EAAY,QAAUZ,EAAMnnB,MACpC0B,EAAQqmB,EAAY,QAAUG,EAAYf,EAAMoB,UAAU5mB,SAAYD,EAASvF,GAC/EgrB,EAAMsB,WAAaP,EAAYf,EAAMoB,UAAW7mB,EAASvF,IAG7DuJ,EAASyhB,EAAMsB,WACjB,MAAME,GAEJ,MADIrsB,KAAKssB,SAAStsB,KAAKssB,QAAQD,GACzBA,EAQV,OAJIjnB,EAAQ1D,QAAU0H,EAAO9H,WAAWhB,EAAEO,OAAOuE,EAAQ1D,OAAQ0H,EAAO9H,WAEpE8D,EAAQhF,SAAWgJ,EAAOxH,YAAYtB,EAAEO,OAAOuE,EAAQhF,QAASgJ,EAAOxH,YAEpEipB,EAAMsB,YAGjB9rB,SAAU,SAASorB,EAAW1nB,GAC1B,IAAKzD,EAAEc,QAAQ2C,GACX,MAAM,IAAIvC,MAAM,8BAEpB,OAAO,IAAIqqB,EAAiBJ,EAAW1nB,EAAK/D,SAI7CoK,EAIX,SAASw2D,EAAgB92C,GAgErB,OA9DA,SAAiBe,EAAOtoB,EAAYwoB,GAChC,IAAIX,EAAO,IAAIN,EAAWvnB,GAK1B,GAAIjC,EAAEgT,WAAWuX,GAAQ,OAAOA,EAAMtoB,IAElCjC,EAAE2C,SAAS4nB,IAAUvqB,EAAEiT,SAASsX,MAAQA,GAASpqB,IAAIoqB,EAAO5qB,KAAK,WAIjE4qB,EAAMpqB,MAAK2pB,EAAOA,EAAKxgB,OAAOnJ,IAAIoqB,EAAMpqB,OAIxCH,EAAE2C,SAAS4nB,EAAMxlB,QACjB+kB,EAAOA,EAAKvhB,OAAO,SAAS2iB,GACxB,OAAOA,EAAE7W,SAAWkW,EAAMxlB,MAASmmB,EAAEnmB,MAAQmmB,EAAEnmB,KAAKsP,SAAWkW,EAAMxlB,QAIzE/E,EAAEY,cAAc2pB,EAAMxlB,QAAO+kB,EAAOA,EAAKxgB,OAAOvE,KAAKwlB,EAAMxlB,QAE3D/E,EAAEgT,WAAWuX,EAAMxlB,QAAO+kB,EAAOA,EAAKvhB,OAAOgiB,EAAMxlB,OAMvD,IAGIolB,EAHAN,EAAOU,EAAMV,MAAS,IAAM5nB,EAAWkpB,UAAYZ,EAAMpqB,IACzD6P,EAAS8Z,EAAK9Z,OACdkV,EAASqF,EAAMrF,OAGnB,OAAQqF,EAAM5qB,MACV,UAAK2W,EACL,IAAK,SACL,IAAK,SACD6T,EAAKM,EAAW1X,OAAO/C,EAAO6Z,EAAK3E,GACnC,MACJ,IAAK,WACDiF,EAAKM,EAAWd,SAAS3Z,EAAO6Z,EAAK3E,GACrC,MACJ,IAAK,aACDiF,EAAKM,EAAWb,WAAW5Z,EAAO6Z,EAAK3E,GACvC,MACJ,IAAK,QACDiF,EAAK,EACL,MACJ,IAAK,OACDA,EAAKna,EAAO,EACZ,MACJ,QACI,MAAM,IAAI9O,MAAM,sBAAwBqpB,EAAM5qB,MAGtD,GAAIK,EAAEyI,YAAYqhB,EAAKK,GAAGA,IAAM,MAAM,IAAIjpB,MAAM,yBAA2BsT,KAAKC,UAAU8V,GAAS,oHAEnG,OAAOT,EAAKK,GAAGA,IAkBvB,SAASo2C,EAAkBh2C,EAAOvmB,GAE9B,SAASwmB,EAAUrT,GAKf,OAHInX,EAAEgT,WAAWmE,EAAOqT,YACpBrT,EAAOqT,UAAU3nB,MAAMsU,GAASA,EAAQnT,EAAW5C,SAEhD+V,EAMX,SAAS8E,EAAQ9E,EAAQ2S,EAAMW,EAAYC,EAAWhF,GAMlD,KAFAA,EAAQgF,IAAchF,EAAQ,IAElB,MAAM,IAAIxkB,MAAM,wEAE5B,IAAKlB,EAAEY,cAAcuW,GAAS,MAAM,IAAIjW,MAAM,2CAA6CsT,KAAKC,UAAU0C,GAAU,KAEpH,IAAIwT,EACAC,EAAQ5qB,EAAE6qB,UAAU1T,GACpB2T,EAAaF,EAAM/S,QAMvB,IAAK+S,EAAM/S,QAEP,OADK6S,GAAWF,EAAUI,GACnBA,EASX,KAHAD,EAASJ,EAAMO,EAAYhB,EAAMW,IAGpB,MAAM,IAAIvpB,MAAM,yBAA2BsT,KAAKC,UAAUqW,GAAc,gBAarF,GAVAH,EAAS1O,EACL0O,EACAb,EACAW,GACA,EACA/E,GAKAoF,EAAW3pB,QAAUnB,EAAEc,QAAQgqB,EAAW3pB,OAC1C,MAAM,IAAID,MAAM,sDA6CpB,OAzCAlB,EAAEwC,KAAKmoB,EAAQ,SAASroB,EAAOC,GAC3B,IAAIwoB,EAAWC,EAEf,GAAMzoB,KAAOqoB,GAMb,IAAyC,GAArC5qB,EAAE2I,QAAQmiB,EAAW3pB,MAAOoB,GAAW,CAIvC,GAHAwoB,EAAYH,EAAMroB,GAClByoB,EAAa1oB,EAETtC,EAAEc,QAAQiqB,GAAW,CACrB,IAAK/qB,EAAEc,QAAQkqB,GACX,MAAM,IAAI9pB,MAAM,yEAA2EqB,EAAM,MAErGqoB,EAAMroB,GAAOwoB,EAAUhqB,OAAOiqB,GAGlC,GAAIhrB,EAAEY,cAAcmqB,GAAW,CAC3B,IAAK/qB,EAAEY,cAAcoqB,GACjB,MAAM,IAAI9pB,MAAM,2EAA6EqB,EAAM,MAEvGqoB,EAAMroB,GAAOvC,EAAEO,UAAUyqB,EAAWD,UApBxCH,EAAMroB,GAAOvC,EAAEgT,WAAW1Q,GAASA,EAAQtC,EAAE6qB,UAAUvoB,KA4B3DqoB,EAAO5lB,OACP6lB,EAAM7lB,KAAO/E,EAAEO,OAAOoqB,EAAO5lB,KAAM6lB,EAAM7lB,YAK5C2lB,GAAaF,EAAUI,GAGjBA,EAGX,OAAO3O,EAl/Bajc,EAEpBA,GAAKA,EAAEyH,eAAe,WAAazH,EAAW,QAAIA,EAmBtDgkB,EAAYsjB,SAAW,mBAAoB,mBAkH3C04B,EAA2B14B,SAAW,eAkBtC24B,EAAyB34B,SAAW,oBA4CpC5e,EAAiB4e,SAAW,kBA0C5B44B,EAA0B54B,SAAW,YAAY,gBAAgB,uBAqCjE64B,EAAwB74B,SAAW,SAyHnC,IAAIt2B,EAAQgT,EACRhkB,EAAEgC,QACFwK,KAAKuG,QAaTmtD,EACIlvD,EALgB0X,EALCu3C,EADED,EAtBvB,SAAuBr5C,EAAO1lB,GAE1B,IAAIjB,EAAEyI,YAAYke,GAIlB,OAHI3mB,EAAE2C,SAASgkB,KAAQA,EAAQA,EAAMC,MAAM,MAGpCD,EAAM9d,OAAO,SAASC,EAAQ4a,GAEjC,GAAI1jB,EAAEY,cAAckI,IAAW9I,EAAEc,QAAQgI,GACrC,OAAOA,EAAO4a,IAKnBziB,WAwBP,IAAI+kB,EAAgBm6C,EAAwBnvD,GAM5CovD,EAAsB94B,SAAW,0BAgCjC,IAAIhc,EAAc80C,MAkGlB/2C,EAAmBie,SAAW,eAAgB,iBAAkB,cAsGhE+4B,EAAgB/4B,SAAW,cAoC3Bjb,EAAiBib,SAAW,iBAqE5Blc,EAAiBkc,SAAW,gBAAiB,qBAAsB,kBAAmB,cAAe,oBAiErGg5B,EAAgBh5B,SAAW,cA+E3Bi5B,EAAkBj5B,SAAW,gBAAgB,cA4G7C,IAAIlmC,EAAS8B,OAAOC,SAEhBlB,EAziBJ,WAEI,SAASunB,EAAY/lB,GACjB,GAAIA,aAAe+lB,EACf,OAAO/lB,EAIX,KAAKzD,EAAEyI,YAAYhF,IAASzD,EAAEc,QAAQ2C,IAAUA,aAAe+lB,GAC3D,MAAM,IAAItoB,MAAM,mDAGpBxB,KAAKuC,WAAawB,MAClB/D,KAAKsQ,OAAStQ,KAAKuC,WAAW+N,OAI9BtQ,KAAKwmB,SAAW,EAGpBlmB,EAAEO,OAAOipB,EAAWppB,WAEhB2pB,MAAQ,WAEJ,OADArqB,KAAKwmB,QAAU,EACRxmB,KAAKuC,WAAWvC,KAAKwmB,UAGhC7gB,KAAO,WAEH,OADA3F,KAAKwmB,QAAUxmB,KAAKuC,WAAW+N,OAAS,EACjCtQ,KAAKuC,WAAWvC,KAAKwmB,UAGhC3X,IAAM,WACF7O,KAAKwmB,QAAUxmB,KAAKuC,WAAW+N,QAInClQ,QAAU,WACN,OAAOJ,KAAKuC,WAAWvC,KAAKwmB,UAGhC1c,KAAO,WACH,OAAO9J,KAAKuC,aAAavC,KAAKwmB,UAGlCgE,SAAW,WACP,OAAOxqB,KAAKuC,aAAavC,KAAKwmB,UAIlClc,IAAM,SAAS7H,GAEX,OAAK0E,UAAUmJ,QAKf7N,EAAOnC,EAAEc,QAAQqB,GAAQA,GAAQA,GACjCzC,KAAKuC,WAAavC,KAAKuC,WAAWlB,OAAOoB,GAEzCzC,KAAKsQ,OAAStQ,KAAKuC,WAAW+N,OAEvBtQ,MATIA,MAafyqB,GAAI,SAAS7R,GACT,OAAO5Y,KAAKuC,WAAWqW,MAO/B,IACI8R,EAAQ1X,MAAMtS,UAAUgqB,MAY5B,OATApqB,EAAEwC,MAJa,QAAQ,UAIP,SAAS8E,GACrBkiB,EAAWppB,UAAUkH,GAAU,WAC3B,IAAI8W,EAAOgM,EAAMvmB,KAAKgD,WAGtB,OAFAuX,EAAKiM,QAAQ3qB,KAAKuC,YAEX,IAAIunB,EADAxpB,EAAEsH,GAAQzE,MAAM7C,EAAEoe,OAK9BoL,EAkdMS,GAEbu2C,EAAqBn3C,EAsCzB,SAAmBrZ,GACf,OAAOxD,KAAKsG,MAAMtG,KAAKuG,SAAS/C,IALpC,SAAmBA,GACf,OAAOhQ,EAAEgC,QAAQhC,EAAEgqB,MAAMha,KAhCzB/N,GAQAw+D,EAAkBF,EALFD,EAChBr+D,IAMCb,OAAQA,IAiCb,OApBegqB,EATKi1C,EAChBp+D,GAUAu+D,EACAC,EACAn1C,EATmBe,EACnBrG,iDClhCF,WAKF,SAAS06C,IACR,SAAS/yD,IAER,OADI9G,UAAUmJ,OAAS,GAAKnJ,UAAU,KAAO85D,GAAMC,EAAajzD,EAAQ9G,UAAU,IAC3E8G,EAAO+G,OAAOpS,MAMtB,OAJAu+D,EAAWlzD,GAEP9G,UAAUmJ,OAAS,GAAKnJ,UAAU,KAAO85D,GAAMC,EAAajzD,EAAQ9G,UAAU,IAE3E8G,EAER,SAASkzD,EAAWlzD,GACnBA,EAAO5K,YAAc29D,EACrB/yD,EAAO+G,QAAUye,GAAIlC,IAAQ3uB,WAAOgU,EAAWsrB,MAAO,EAAGk/B,YAAQxqD,EAAWyqD,aAASzqD,EAAWuK,QAAUmgD,WAAaC,eAAW3qD,EAAW4qD,gBAAY5qD,GACzJ3I,EAAOtL,IAAMsL,EAAO,oBAAsBtL,EAAKsL,EAAO,mBAAqBwzD,EAAIxzD,EAAO,mBAAqB+yD,EAC3G/yD,EAAO0oD,QAAUA,EAAS1oD,EAAOyoD,OAASA,EAAQzoD,EAAO4G,SAAW8hD,EAEpEzR,OAAOwc,iBAAiBzzD,GACvBY,KAAM9I,IAAK,WACV,IAAKkI,EAAO+G,OAAOusD,UAAW,CAC7B,IAAIA,EAAYP,IAChBO,EAAU5+D,IAAI,SAASC,GAKtB,OAJc,IAAVA,IACH++D,EAAiB1zD,GACjBszD,EAAUvsD,OAAOwsD,WAAa,WAAWG,EAAiBJ,KAEpD3+D,IAERqL,EAAO+G,OAAOusD,UAAYA,EAE3B,OAAOtzD,EAAO+G,OAAOusD,cAIxB,SAASL,EAAajzD,EAAQrL,GAC7Bg/D,EAAY3zD,EAAQrL,GACpB,IAAK,IAAI6wB,KAAMxlB,EAAO+G,OAAOmM,KAAM0gD,EAAiB5zD,EAAO+G,OAAOmM,KAAKsS,IAAK,GAC5C,MAA5BxlB,EAAO+G,OAAOwsD,YAAoBvzD,EAAO+G,OAAOwsD,aACpDM,EAAS7zD,GAEV,SAAS2zD,EAAY3zD,EAAQrL,GAC5BqL,EAAO+G,OAAOpS,MAAQA,EACtBqL,EAAO+G,OAAOsrB,SAAU,EACI,IAAxBryB,EAAO+G,OAAOktB,QAAaj0B,EAAO+G,OAAOktB,MAAQ,GAEtD,SAAS2/B,EAAiB5zD,EAAQ8zD,GACjC,IAA2BT,EAAfrzD,EAAO+G,OAAwBssD,QAC3C,GAAIA,EAAQhxD,OAAS,GAAKgxD,EAAQt6D,MAAMg7D,KAAYD,GAAYT,EAAQhnD,KAAKgmB,IAAW,CACvF,IAAI19B,EAAQqL,EAAO+G,OAAOosD,SAC1B,GAAIx+D,IAAUq+D,EAAM,OAAO,EAC3BW,EAAY3zD,EAAQrL,IAGtB,SAASk/D,EAAS7zD,GACjBA,EAAO+G,OAAOsrB,SAAU,EACxB,IAAK,IAAI7M,KAAMxlB,EAAO+G,OAAOmM,KAAMlT,EAAO+G,OAAOmM,KAAKsS,GAAIze,OAAOsrB,SAAU,EAG5E,SAAS2hC,EAAQ10D,EAAI20D,GACpB,IAAKA,EAAQl7D,MAAM2uB,GAAQ,MAAM,IAAIn0B,MAAM,2EAC3C,OAAO2gE,EAAenB,IAAgBkB,EAAS,WAC9C,OAAO30D,EAAGpK,MAAMnD,KAAMkiE,EAAQ7gE,QAAQ6gE,EAAQr5D,OAAOy3B,QAIvD,SAAS6hC,EAAeC,EAAKF,EAASd,GACrC,IAAIl/B,EAAQkgC,EAAIptD,OAOhB,OANAktB,EAAMk/B,OAASA,EACfl/B,EAAMo/B,QAAUY,EAAQr5D,OAAOw5D,GAE/BC,EAAmBF,EAAKlgC,EAAMo/B,SAC9BO,EAAiBO,GAAK,GAEfA,EAER,SAASE,EAAmBr0D,EAAQqzD,GACnC,IAAK,IAAI7rD,EAAI,EAAGA,EAAI6rD,EAAQhxD,OAAQmF,IACnC6rD,EAAQ7rD,GAAGT,OAAOmM,KAAKlT,EAAO+G,OAAOye,IAAMxlB,EAC3Cq0D,EAAmBr0D,EAAQqzD,EAAQ7rD,GAAGT,OAAOssD,SAG/C,SAASK,EAAiB1zD,GACzB,IAAK,IAAIwH,EAAI,EAAGA,EAAIxH,EAAO+G,OAAOssD,QAAQhxD,OAAQmF,WACpCxH,EAAO+G,OAAOssD,QAAQ7rD,GACrBT,OAAOmM,KAAKlT,EAAO+G,OAAOye,IAEzC,IAAK,IAAIA,KAAMxlB,EAAO+G,OAAOmM,KAAM,CAClC,IAAIohD,EAAYt0D,EAAO+G,OAAOmM,KAAKsS,GAC/B7a,EAAQ2pD,EAAUvtD,OAAOssD,QAAQr4D,QAAQgF,GACzC2K,GAAS,GAAG2pD,EAAUvtD,OAAOssD,QAAQ5rD,OAAOkD,EAAO,GAExD3K,EAAO+G,OAAOktB,MAAQ,EACtBj0B,EAAO+G,OAAOmM,QAGf,SAASxe,EAAI4K,GAAK,OAAO00D,EAAQ,SAASh0D,GAAS,OAAOV,EAAGU,OAAajO,OAC1E,SAASyhE,EAAGxzD,GAAS,OAAOg0D,EAAQ,SAASO,EAAIC,GAAK,OAAOD,GAAAA,CAAKC,OAASx0D,EAAQjO,OACnF,SAAS22D,IAAW,OAAO32D,KAAKgV,OAAOpS,MACvC,SAAS8zD,IAAU,OAA4B,MAArB12D,KAAKgV,OAAOpS,OAAqD,mBAA7B5C,KAAKgV,OAAOpS,MAAM8zD,OAAwB12D,KAAKgV,OAAOpS,MAAM8zD,SAAW12D,KAAKgV,OAAOpS,MAEjJ,SAAS+yB,EAAM1nB,GAAS,OAAOA,EAAO+G,OACtC,SAASgtD,EAAO/zD,GAAS,OAA+B,IAAxBA,EAAO+G,OAAOktB,MAC9C,SAAS5B,EAAQryB,GAAS,OAAOA,EAAO+G,OAAOsrB,QAC/C,SAAS+hC,EAASp0D,GAAS,OAA+B,IAAxBA,EAAO+G,OAAOktB,MA3GhD,IAGI3Q,EAAO,EAAG0vC,KAgJdD,EAAa,mBAAqBA,EAClCA,EAAav/D,MAvCb,SAAeygE,GACd,OAAOD,EAAQ,WACd,OAAOC,EAAQv/D,IAAI,SAAS+8B,GAAI,OAAOA,OACrCwiC,IAqCJlB,EAAaiB,QAAUA,EACvBjB,EAAa0B,KAnCb,SAAcC,EAASx4C,EAAMlc,GAC5B,IAAI20D,EAAYX,EAAQ,SAAUviC,GACjC,OAAOvV,EAAOw4C,EAAQx4C,EAAMuV,EAAE1qB,OAAOpS,SAClCqL,IAIJ,OAF+B,IAA3B20D,EAAU5tD,OAAOktB,OAAa0gC,EAAUz4C,GAErCy4C,GA6BR5B,EAAa6B,UA1Bb,SAAmBC,EAAQ34C,GAC1B,IAAI+3C,EAAUY,EAAOngE,IAAI,SAASogE,GACjC,IAAI90D,EAAS80D,EAAM,GAEnB,OAD4B,IAAxB90D,EAAO+G,OAAOktB,OAAaj0B,OAAO2I,GAC/B3I,IAeR,OAZgBg0D,EAAQ,WACvB,IAAI3hC,EAAUn5B,UAAUA,UAAUmJ,OAAS,GAQ3C,OANA4xD,EAAQ3hE,QAAQ,SAAS0N,EAAQ+0D,GAC5B1iC,EAAQr3B,QAAQgF,IAAW,IAC9Bkc,EAAO24C,EAAOE,GAAK,GAAG74C,EAAMlc,EAAO+G,OAAOpS,UAIrCunB,GACL+3C,IAUJlB,EAAaC,KAAOA,EAEpBzD,EAAmD,QAAIwD,EA3JvD,W/HDiBvzD,IGOb8B,YACAU,YACAF,UAAY,EAGZC,QAEAZ,KAAMA,KAEN8C,IAAK,WACD,OAAO1C,QAAQ0C,IAAIjC,WAGvB4B,SAAU,WACN,OAAO5B,SAASK,OAASP,UAAUE,SAASK,OAAS,8C6HrB5D,SAAU2yD,GAsCX,SAASC,IACP,IAAI1rD,EAAOxX,KACXwX,EAAK2rD,SACL3rD,EAAK4rD,UACL5rD,EAAKm2B,IAAMA,EAAI1nC,KAAKg9D,GA8GtB,SAASI,EAAcrxD,GAChBA,EAAQsxD,YACXtxD,EAAQsxD,WAAY,EACpBtxD,EAAQ27B,IAAI41B,EAAMt9D,KAAK,KAAM+L,KAcjC,SAASuxD,EAAMvxD,GACb,IAIItN,EAFA0+D,EAASpxD,EAAQoxD,OACjBD,EAAQnxD,EAAQmxD,MAGpB,IACEhhD,EAAM,iBAAkBghD,EAAM7yD,QAC9BkzD,EAASL,GACThhD,EAAM,kBAAmBihD,EAAO9yD,QAChCkzD,EAASJ,GACT,MAAO7wD,GAAK7N,EAAQ6N,EAOtB,GALAP,EAAQsxD,WAAY,GAGhBH,EAAM7yD,QAAU8yD,EAAO9yD,SAAQ+yD,EAAcrxD,GAE7CtN,EAAO,CAET,GADAyd,EAAM,eAAgBzd,EAAME,UACxBoN,EAAQiM,MACP,MAAMvZ,EADQsN,EAAQiM,MAAMvZ,IAarC,SAAS8+D,EAASC,GAEN,IADV,IACIr9D,EAAaA,EAAOq9D,EAAMv9C,SAAS9f,IAUzC,SAAS0I,EAAOggC,EAAO/T,GACrB,IAAIniB,EAAQk2B,EAAM7lC,QAAQ8xB,GAC1B,SAAUniB,KAAWk2B,EAAMp5B,OAAOkD,EAAO,GAU3C,SAASsxC,EAAM13C,EAAQiF,GACrB,IAAK,IAAI5U,KAAO4U,EACVA,EAAO1P,eAAelF,KAAM2P,EAAO3P,GAAO4U,EAAO5U,IAxNzD,IAOIsf,EAAQ,aAORwrB,EAAMs1B,EAAIr1B,uBACTq1B,EAAIS,6BACJT,EAAIU,0BACJV,EAAIW,yBACJ,SAASj8C,GAAM,OAAOrb,WAAWqb,EAAI,KAe1Cu7C,EAAQxiE,WACN2C,YAAa6/D,EASb9rD,QAAS,SAAS7J,EAAImc,GACpB,IACItjB,EAAQsjB,EAAWnc,EAAGtH,KAAKyjB,GAAbnc,EAGlB,OAFAvN,KAAKmjE,MAAMjgE,KAAKkD,GAChBi9D,EAAcrjE,MACPoG,GAWT6L,OAAQ,SAAS1E,EAAImc,GACnB,IACItjB,EAAQsjB,EAAWnc,EAAGtH,KAAKyjB,GAAbnc,EAGlB,OAFAvN,KAAKojE,OAAOlgE,KAAKkD,GACjBi9D,EAAcrjE,MACPoG,GAUTy9D,MAAO,SAASz9D,GACd,OACO0I,EAAO9O,KAAKmjE,MAAO/8D,IAAS0I,EAAO9O,KAAKojE,OAAQh9D,IAqCzDvF,OAAQ,SAASqoC,GACf,GACoB,iBAATA,EAAmB,MAAM,IAAI1nC,MAAM,mBAE9C,IAAI0pB,EAAQg6B,OAAOhiC,OAAOljB,MAO1B,OANAkqD,EAAMh/B,EAAOge,GACbhe,EAAMlZ,QAAUhS,KAGZkrB,EAAM44C,YAAY54C,EAAM44C,aAErB54C,GAMTjN,MAAO,MA4FT,IAAIq/C,EAAU2F,EAAIjxD,QAAWixD,EAAIjxD,SAAW,IAAIkxD,EAI3C1F,UAAkDF,EA/OtD,CAiPqB,oBAAX95D,OAAyBA,OAASxD,kBxHrOzC6S,cAEJhO,SAAS+J,iBAAiB,QAAQ,SAAS2D,GAAIM,WAAWN,EAAEO,QAAS,IyHdrE,QAAetP,OAAOugE,YAAYvuD,IAC5BhS,OAAOugE,YAAYvuD,IAAIvP,KAAKzC,OAAOugE,aAInCzuD,KAAKE,IAAIvP,KAAKqP,MhHDhBuB,OAAS,0BACTC,OAAS,0BGFTpV,SAASob,WACT/D,eACAC,MAAMA,MACNE,YAAYA,YACZC,iBAAiBA,iBACjBC,gBAAgBA,gBAChBG,YAAYA,YACZC,kBAAkBA,kBAClBC,aAAaA,aACbC,kBAAkBA,kBAClBG,iBAAiBA,iBACjBG,cAAcA,cACdC,mBAAmBA,mBACnBE,kBAAkBA,kBAClBJ,mBAAmBA,mBACnBxM,GAAGA,GACH6M,OAAOA,Q8GVPO,SAIAqpD,SAAU,SAASlpD,EAAQF,EAAW3J,GAClC,IAAI0D,EAASmG,EAAOnG,QAAUmG,EAC9B7J,EAAMoJ,mBAAmBlJ,QAAQ5Q,QAAQ,SAAS8Q,GAChC,OAAVsD,GAAmBtD,EAAKsD,QAAUA,GAAQtD,EAAKsG,UAI3DssD,SAAU,SAASnpD,EAAQF,EAAW3J,GAClC,IAAI0D,EAASmG,EAAOnG,QAAUmG,EAC9B7J,EAAMoJ,mBAAmBlJ,QAAQ5Q,QAAQ,SAAS8Q,GAChC,OAAVsD,GAAmBtD,EAAKsD,QAAUA,GAAQtD,EAAKuG,UAI3DssD,YAAa,SAASppD,EAAQF,EAAW3J,GACrC,IAAI0D,EAASmG,EAAOnG,OAChBspC,EAASnjC,EAAOmjC,OACpBhtC,EAAMoJ,mBAAmBlJ,QAAQ5Q,QAAQ,SAAS8Q,GAChC,OAAVsD,GAAmBtD,EAAKsD,QAAUA,IAC9BrU,SAAEgT,WAAW2qC,GAASA,EAAO96C,MAAMkO,GAClC/Q,SAAEO,OAAOwQ,EAAKhM,KAAM44C,OASrCkmB,aAAc,SAASrpD,EAAQF,EAAW3J,GACtC,IAAIgtC,EAASnjC,EAAOmjC,OACpB,QAAqB,IAAVA,EAAuB,MAAM,IAAIz8C,MAAM,sDAC9ClB,SAAEgT,WAAW2qC,GAASA,EAAO96C,MAAM8N,GAAQA,EAAM5L,KAAKuV,IACrDta,SAAEO,OAAOoQ,EAAM5L,KAAK44C,IAG7BmmB,SAAU,SAAStpD,EAAQF,EAAW3J,GAClC,QAA2B,IAAhB6J,EAAO5J,MAAsB,MAAM,IAAI1P,MAAM,kDACxDyP,EAAMC,MAAM5G,IAAIwQ,EAAO5J,QAG3BmzD,QAAS,SAASvpD,EAAQF,EAAW3J,GACjC,QAA4B,IAAjB6J,EAAOnG,OAAuB,MAAM,IAAInT,MAAM,iDACzDyP,EAAMC,MAAM5G,KAAKqK,OAAOmG,EAAOnG,OAAQtH,GAAG,UAAWsG,UAAUmH,EAAOnH,UAAY,KAGtF2wD,YAAa,SAASxpD,EAAQF,EAAW3J,GACrC,IAAIC,EAAQD,EAAMC,MACdqzD,EAAazpD,EAAOnG,OACxB,QAAyB,IAAd4vD,EAA2B,MAAM,IAAI/iE,MAAM,qDACpC,OAAd+iE,GAAuBjkE,SAAEw0D,QAAQyP,EAAW,OAAQrzD,EAAMyE,YACzDzE,EAAMpC,OAAOy1D,IAGtBloD,KAAM,SAASvB,EAAQF,EAAW3J,GAC9BA,EAAM+K,OAASlB,EAAOrR,YAAYqR,EAAOpR,aAG7C86D,SAAU,SAAS1pD,EAAQF,EAAW3J,GAClCA,EAAMpC,OAGV+G,WAAY,SAASkF,EAAOF,EAAU3J,GAIlC,SAASyyB,IACL9oB,EAAUrF,QAAU,EACpBtE,EAAMC,MAAM0E,aAJhBkF,EAAO2pD,UAAY/gC,IAAW1xB,QAAQC,OAAOyxB,IAYjDr6B,IAAK,SAASyR,EAAOF,EAAU3J,GAC3BA,EAAM0K,MAAMxU,YAOhBu9D,cAAe,SAAS5pD,GACpB,cAAeA,EAAOmjC,QAClB,IAAK,WACDnjC,EAAOmjC,OAAO96C,MAAM,MAAMzB,WAAUoZ,IACpC,MACJ,IAAK,SACDxa,SAAEO,OAAOa,WAAUoZ,EAAOmjC,QAC1B,MACJ,QACI,MAAM,IAAIz8C,MAAM,gDAI5B4Y,OAAQ,SAASU,EAAOF,EAAW3J,GAC/B,GAAwB,mBAAb6J,EAAOvN,GAAkB,MAAM,IAAI/L,MAAM,2CACpDsZ,EAAOvN,GAAGuN,EAAQF,EAAW3J,IAGjCtF,OAAQ,SAASmP,EAAQF,EAAW3J,GAChC,IAAItF,EAASsF,EAAM0zD,OASfv2D,EAAMC,kBAPNC,YAAiBhB,QAASzI,SAASI,KAAMyD,SAAU,mBACnD6F,kBAAoBjB,QAAS3B,EAAQjD,SAAS,mBAC9C8F,aAAiBlB,QAAS3B,EAAQjD,SAAS,eAC3C+F,aAAiBnB,QAAS3B,EAAQjD,SAAS,gBAIdpI,SAAEoO,KAAKoM,GAAQ,aAAa,mBAAmB,cAAc,iBAC9F7J,EAAM2K,KAAKjZ,IAAIyL,K1GtHnB2N,IAAM,EAgCVzb,SAAEO,OAAO6a,QAAMhb,WACXif,MAAO,WACH,IAAI1O,EAAQjR,KAUZ,OARIA,KAAKuY,QAAQ4C,OAAS3X,OAAO2X,QAC7B7R,QAAQi+C,MAAM,UAAYvnD,KAAKiE,SAC/BjE,KAAK4b,KAAKjZ,IAAI,WACV2G,QAAQmS,SAAS,UAAYzb,KAAKiE,YAKnCgN,EAAMoJ,mBAAmB7B,MAAM1I,KAAK,WAEvCmB,EAAMiE,QACDvS,IAAIsZ,gBAAgBhL,IACpBtO,IAAIsY,eAAahK,IAGtBkL,UAAUlL,EAAMsH,QAAQrH,OAAO3Q,QAAQ0Q,EAAMC,MAAM5G,KACnD2G,EAAMC,MAAM0E,aAGZ3E,EAAMiE,SAASjV,KAAK,QAAQsV,QAAQ,OAI5C1G,IAAK,WAED7O,KAAKkR,MAAMyE,YACX3V,KAAK4b,MAAK,IAGd1b,KAAM,WAEF,OAAIF,KAAKkY,MAAgBlY,KAAKkY,MAC1BlY,KAAKqF,KAAK6S,MAAgBlY,KAAKqF,KAAK6S,MAGpC5X,SAAE2C,SAASjD,KAAKuY,QAAQJ,SAAiBnY,KAAKuY,QAAQJ,QACtD7X,SAAEY,cAAclB,KAAKuY,QAAQJ,SAAiBnY,KAAKuY,QAAQJ,QAAQ1X,SAAvE,KQzER,IAAI2f,MAAQ,yBAAyBhQ,KAAKuG,SAASmsB,MA0BnDm7B,aAAUn+D,OAGVQ,OAAEO,OAAOf,MAAIY,UAAWwD,MAAYxD,WACpCZ,MAAIY,UAAUkkE,WAAa,SAAoBC,GAAK7kE,KAAKD,OAAOsgB,QAAUwkD,GAG1EtlD,KAAKqoB,SAAW,OAAQ,WAAY,SAAU,QmGtC9C,kBAAeo2B,gBACX/9D,KAAM,QACNO,MAAO,QAAS,elGWpBy9D,aAAUn+D,OAGVQ,OAAEO,OAAOf,MAAIY,UAAWwD,cAAYxD,upiBCCpC8gB,eAEeomB,SAAW,QAAQ,KAAM,YAAY,cAmHpD,WAAe,WACX5nC,KAAKynC,KAAOjmB,eACZxhB,KAAKG,YACLH,KAAK2D,QACL3D,KAAKoiB,WAAa,GCtItBQ,gBAEgBglB,SAAW,sBCS3B,IACIlkB,cAAgB,MAAO,OAAQ,OAAQ,QAAS,SAChDG,QAAUihD,KAAK,EAAGpgE,MAAM,EAAG0tB,KAAK,EAAG9J,KAAK,EAAGjf,IAAI,EAAG8Y,MAAM,GAE5DgB,yBAAyBykB,SAAW,OAAQ,45BCnB5C7jB,UAGU6jB,SAAW,cCErB,IAAI41B,SAASt7D,QAAQs7D,OAAO,gBAE5BA,SAAOuH,QAAQ,YAAaniD,iBAC5B46C,SAAOuH,QAAQ,qBAAsB5hD,0BACrCq6C,SAAOz5C,UAAU,YAAaihD,WAE9BxH,SAAO30D,OAAO,YAAa,WACvB,OAAOkM,Y8FVX,IAAIyoD,SAASt7D,QAAQs7D,OAAO,UAAWyH,SAAc/kE,OACrDglE,SACO39B,SAAS,SAAU5lB,QCF1B,IAII67C,SAASt7D,QAAQs7D,OAAO,gBAM5BA,SAAO56D,MAAM,kBAAmBkK,KAAKuG,QAKrCmqD,SAAO56D,MAAM,mBAAoBtC,OAAEgC,SAMnCk7D,SAAO56D,MAAM,eAAgB,SAAmB0N,GAC5C,OAAOxD,KAAKsG,MAAMtG,KAAKuG,SAAS/C,KAOpCktD,SAAO56D,MAAM,iBAAkB,SAAmB0N,GAC9C,OAAOhQ,OAAEgC,QAAQhC,OAAEgqB,MAAMha,M9Fd7BgU,YAAYsjB,SAAW,mBAAoB,mBCjB3C9hB,wBAAwB8hB,SAAW,SCAnCzhB,uBAAuByhB,SAAW,SCAlCvhB,wBAAsBuhB,SAAW,SEAjCzgB,2BAAyBygB,SAAW,eCCpCxgB,yBAAuBwgB,SAAW,oBCClC44B,0BAIwB54B,SAAW,YAAY,gBAAgB,uBCN/D5e,iBAAiB4e,SAAW,kBuFa5B,IAAI41B,SAASt7D,QAAQs7D,OAAO,SACxB2H,SAAgBjlE,OAGpBs9D,SAAOuH,QAAQ,QAASzzD,aACxBksD,SAAOuH,QAAQ,kBAAmBh/C,yBAClCy3C,SAAOuH,QAAQ,iBAAkB3+C,wBACjCo3C,SAAOuH,QAAQ,gBAAiB1+C,yBAEhCm3C,SAAO56D,MAAM,cAAeokB,eAC5Bw2C,SAAOuH,QAAQ,mBAAoB59C,4BACnCq2C,SAAOuH,QAAQ,iBAAkB39C,0BACjCo2C,SAAOuH,QAAQ,gBAAiBK,kBAChC5H,SAAO18C,QAAQ,WAAY,SAASukD,GAChCA,EAASpH,UAAU,QAASz1C,8BAEhCg1C,SAAOnO,SAAS,0BtF7BhB/lC,iBAAese,SAAW,OAAO,0BCAjCpe,sBAAoBoe,SAAW,0BsFG/B,IAAI41B,SAASt7D,QAAQs7D,OAAO,eAE5BA,SAAO30D,OAAO,WAAYygB,kBAC1Bk0C,SAAOuH,QAAQ,cAAev7C,uBAC9Bg0C,SAAOnO,SAAS,6BrFOhB,IAEI3rC,gBAAgB,MAAO,OAAQ,OAAQ,QAAS,SAChDG,UAAUihD,KAAK,EAAGpgE,MAAM,EAAG0tB,KAAK,EAAG9J,KAAK,EAAGjf,IAAI,EAAG8Y,MAAM,GAE5DgB,2BAAyBykB,SAAW,OAAQ,cChB5C09B,kBAGgB19B,SAAW,s6BCR3B29B,YAKU39B,SAAW,cCCrB,IAAI41B,SAASt7D,QAAQs7D,OAAO,gBAE5BA,SAAOuH,QAAQ,YAAaniD,mBAC5B46C,SAAOuH,QAAQ,qBAAsB5hD,4BACrCq6C,SAAOz5C,UAAU,YAAaihD,aAE9BxH,SAAO30D,OAAO,YAAa,WACvB,OAAOkM,cCTX4U,mBAAmBie,SAAW,eAAgB,iBAAkB,cEMhEi5B,kBAGgBj5B,SAAW,gBAAgB,cCX3Crc,gBAAcqc,SAAW,cCAzBlc,iBAAiBkc,SAAW,gBAAiB,qBAAsB,kBAAmB,cAAe,oBCCrG+4B,gBAGc/4B,SAAW,cCJzBjb,iBAAiBib,SAAW,iB4EW5B,IAAI41B,SAASt7D,QAAQs7D,OAAO,YACxBgI,SAAYtlE,KACZulE,SAAevlE,KACf+kE,SAAc/kE,OAEb6kE,QAAQ,aAAcW,mBACtBX,QAAQ,qBAAsBY,oBAC9BZ,QAAQ,gBAAiBx5C,iBACzBw5C,QAAQ,kBAAmBn6C,mBAC3Bm6C,QAAQ,gBAAiBx4C,iBACzBw4C,QAAQ,WAAYa,kBACpBb,QAAQ,mBAAoBc,6DCxB/B,WAKF,SAAS7E,IACR,SAAS/yD,IAER,OADI9G,UAAUmJ,OAAS,GAAKnJ,UAAU,KAAO85D,GAAMC,EAAajzD,EAAQ9G,UAAU,IAC3E8G,EAAO+G,OAAOpS,MAMtB,OAJAu+D,EAAWlzD,GAEP9G,UAAUmJ,OAAS,GAAKnJ,UAAU,KAAO85D,GAAMC,EAAajzD,EAAQ9G,UAAU,IAE3E8G,EAER,SAASkzD,EAAWlzD,GACnBA,EAAO5K,YAAc29D,EACrB/yD,EAAO+G,QAAUye,GAAIlC,IAAQ3uB,WAAOgU,EAAWsrB,MAAO,EAAGk/B,YAAQxqD,EAAWyqD,aAASzqD,EAAWuK,QAAUmgD,WAAaC,eAAW3qD,EAAW4qD,gBAAY5qD,GACzJ3I,EAAOtL,IAAMsL,EAAO,oBAAsBtL,EAAKsL,EAAO,mBAAqBwzD,EAAIxzD,EAAO,mBAAqB+yD,EAC3G/yD,EAAO0oD,QAAUA,EAAS1oD,EAAOyoD,OAASA,EAAQzoD,EAAO4G,SAAW8hD,EAEpEzR,OAAOwc,iBAAiBzzD,GACvBY,KAAM9I,IAAK,WACV,IAAKkI,EAAO+G,OAAOusD,UAAW,CAC7B,IAAIA,EAAYP,IAChBO,EAAU5+D,IAAI,SAASC,GAKtB,OAJc,IAAVA,IACH++D,EAAiB1zD,GACjBszD,EAAUvsD,OAAOwsD,WAAa,WAAWG,EAAiBJ,KAEpD3+D,IAERqL,EAAO+G,OAAOusD,UAAYA,EAE3B,OAAOtzD,EAAO+G,OAAOusD,cAIxB,SAASL,EAAajzD,EAAQrL,GAC7Bg/D,EAAY3zD,EAAQrL,GACpB,IAAK,IAAI6wB,KAAMxlB,EAAO+G,OAAOmM,KAAM0gD,EAAiB5zD,EAAO+G,OAAOmM,KAAKsS,IAAK,GAC5C,MAA5BxlB,EAAO+G,OAAOwsD,YAAoBvzD,EAAO+G,OAAOwsD,aACpDM,EAAS7zD,GAEV,SAAS2zD,EAAY3zD,EAAQrL,GAC5BqL,EAAO+G,OAAOpS,MAAQA,EACtBqL,EAAO+G,OAAOsrB,SAAU,EACI,IAAxBryB,EAAO+G,OAAOktB,QAAaj0B,EAAO+G,OAAOktB,MAAQ,GAEtD,SAAS2/B,EAAiB5zD,EAAQ8zD,GACjC,IAA2BT,EAAfrzD,EAAO+G,OAAwBssD,QAC3C,GAAIA,EAAQhxD,OAAS,GAAKgxD,EAAQt6D,MAAMg7D,KAAYD,GAAYT,EAAQhnD,KAAKgmB,IAAW,CACvF,IAAI19B,EAAQqL,EAAO+G,OAAOosD,SAC1B,GAAIx+D,IAAUq+D,EAAM,OAAO,EAC3BW,EAAY3zD,EAAQrL,IAGtB,SAASk/D,EAAS7zD,GACjBA,EAAO+G,OAAOsrB,SAAU,EACxB,IAAK,IAAI7M,KAAMxlB,EAAO+G,OAAOmM,KAAMlT,EAAO+G,OAAOmM,KAAKsS,GAAIze,OAAOsrB,SAAU,EAG5E,SAAS2hC,EAAQ10D,EAAI20D,GACpB,IAAKA,EAAQl7D,MAAM2uB,GAAQ,MAAM,IAAIn0B,MAAM,2EAC3C,OAAO2gE,EAAenB,IAAgBkB,EAAS,WAC9C,OAAO30D,EAAGpK,MAAMnD,KAAMkiE,EAAQ7gE,QAAQ6gE,EAAQr5D,OAAOy3B,QAIvD,SAAS6hC,EAAeC,EAAKF,EAASd,GACrC,IAAIl/B,EAAQkgC,EAAIptD,OAOhB,OANAktB,EAAMk/B,OAASA,EACfl/B,EAAMo/B,QAAUY,EAAQr5D,OAAOw5D,GAE/BC,EAAmBF,EAAKlgC,EAAMo/B,SAC9BO,EAAiBO,GAAK,GAEfA,EAER,SAASE,EAAmBr0D,EAAQqzD,GACnC,IAAK,IAAI7rD,EAAI,EAAGA,EAAI6rD,EAAQhxD,OAAQmF,IACnC6rD,EAAQ7rD,GAAGT,OAAOmM,KAAKlT,EAAO+G,OAAOye,IAAMxlB,EAC3Cq0D,EAAmBr0D,EAAQqzD,EAAQ7rD,GAAGT,OAAOssD,SAG/C,SAASK,EAAiB1zD,GACzB,IAAK,IAAIwH,EAAI,EAAGA,EAAIxH,EAAO+G,OAAOssD,QAAQhxD,OAAQmF,WACpCxH,EAAO+G,OAAOssD,QAAQ7rD,GACrBT,OAAOmM,KAAKlT,EAAO+G,OAAOye,IAEzC,IAAK,IAAIA,KAAMxlB,EAAO+G,OAAOmM,KAAM,CAClC,IAAIohD,EAAYt0D,EAAO+G,OAAOmM,KAAKsS,GAC/B7a,EAAQ2pD,EAAUvtD,OAAOssD,QAAQr4D,QAAQgF,GACzC2K,GAAS,GAAG2pD,EAAUvtD,OAAOssD,QAAQ5rD,OAAOkD,EAAO,GAExD3K,EAAO+G,OAAOktB,MAAQ,EACtBj0B,EAAO+G,OAAOmM,QAGf,SAASxe,EAAI4K,GAAK,OAAO00D,EAAQ,SAASh0D,GAAS,OAAOV,EAAGU,OAAajO,OAC1E,SAASyhE,EAAGxzD,GAAS,OAAOg0D,EAAQ,SAASO,EAAIC,GAAK,OAAOD,GAAAA,CAAKC,OAASx0D,EAAQjO,OACnF,SAAS22D,IAAW,OAAO32D,KAAKgV,OAAOpS,MACvC,SAAS8zD,IAAU,OAA4B,MAArB12D,KAAKgV,OAAOpS,OAAqD,mBAA7B5C,KAAKgV,OAAOpS,MAAM8zD,OAAwB12D,KAAKgV,OAAOpS,MAAM8zD,SAAW12D,KAAKgV,OAAOpS,MAEjJ,SAAS+yB,EAAM1nB,GAAS,OAAOA,EAAO+G,OACtC,SAASgtD,EAAO/zD,GAAS,OAA+B,IAAxBA,EAAO+G,OAAOktB,MAC9C,SAAS5B,EAAQryB,GAAS,OAAOA,EAAO+G,OAAOsrB,QAC/C,SAAS+hC,EAASp0D,GAAS,OAA+B,IAAxBA,EAAO+G,OAAOktB,MA3GhD,IAGI3Q,EAAO,EAAG0vC,KAgJdD,EAAa,mBAAqBA,EAClCA,EAAav/D,MAvCb,SAAeygE,GACd,OAAOD,EAAQ,WACd,OAAOC,EAAQv/D,IAAI,SAAS+8B,GAAI,OAAOA,OACrCwiC,IAqCJlB,EAAaiB,QAAUA,EACvBjB,EAAa0B,KAnCb,SAAcC,EAASx4C,EAAMlc,GAC5B,IAAI20D,EAAYX,EAAQ,SAAUviC,GACjC,OAAOvV,EAAOw4C,EAAQx4C,EAAMuV,EAAE1qB,OAAOpS,SAClCqL,IAIJ,OAF+B,IAA3B20D,EAAU5tD,OAAOktB,OAAa0gC,EAAUz4C,GAErCy4C,GA6BR5B,EAAa6B,UA1Bb,SAAmBC,EAAQ34C,GAC1B,IAAI+3C,EAAUY,EAAOngE,IAAI,SAASogE,GACjC,IAAI90D,EAAS80D,EAAM,GAEnB,OAD4B,IAAxB90D,EAAO+G,OAAOktB,OAAaj0B,OAAO2I,GAC/B3I,IAeR,OAZgBg0D,EAAQ,WACvB,IAAI3hC,EAAUn5B,UAAUA,UAAUmJ,OAAS,GAQ3C,OANA4xD,EAAQ3hE,QAAQ,SAAS0N,EAAQ+0D,GAC5B1iC,EAAQr3B,QAAQgF,IAAW,IAC9Bkc,EAAO24C,EAAOE,GAAK,GAAG74C,EAAMlc,EAAO+G,OAAOpS,UAIrCunB,GACL+3C,IAUJlB,EAAaC,KAAOA,EAEpBzD,EAAmD,QAAIwD,EA3JvD,K3EGA9zC,aAAa0a,SAAW,KAAK,WAAW,SAAS,gBAAgB,YAAa,kBAAmB,cCJjGla,cAAcka,SAAW,a2EUzB,IAAI41B,SAASt7D,QAAQs7D,OAAO,QACxBsI,SAAa5lE,KACb6lE,SAAe7lE,KACf+kE,SAAc/kE,OAGlBs9D,SAAOuH,QAAQ,gBAAiBiB,oBAChCxI,SAAOuH,QAAQ,YAAakB,cAC5BzI,SAAOuH,QAAQ,YAAar3C,eAC5B8vC,SAAO56D,MAAM,SAAUsjE,cAEvB1I,SAAO56D,MAAM,kBAAmBwqB,iBtEjBhCY,gBAAgB4Z,SAAW,YCS3BzZ,gBAGgByZ,SAAW,WAAW,gBAmFtCjY,eAAeiY,SAAW,YsE3F1B,IAAIu+B,MAGA3iE,OAAOugE,cACPoC,MAAQpC,YAAYvuD,KAChBuuD,YAAYqC,QACRrC,YAAYsC,WACRtC,YAAYuC,OACRvC,YAAYwC,MAKhC,aAAeJ,MACT,WAAgB,OAAOA,MAAMhjE,MAAM4gE,cACnC,WAAgB,OAAQ,IAAIzuD,MCrB9BkoD,UAASt7D,QAAQs7D,OAAO,YAE5BA,UAAOuH,QAAQ,eAAgByB,iBAC/BC,UACO1iD,UAAU,UAAW4L,gBAC5B82C,UACO7jE,MAAM,WAAY8jE,UtERzB,kBAAep2C,QAAQrqB,KAAK,KAAMwqB,YuEM9B+sC,UAASt7D,QAAQs7D,OAAO,eAO5BA,UAAO56D,MAAM,kBAAmB6nC,eAUhC+yB,UAAOuH,QAAQ,YAAa,YAAY,SAAS7wC,GAC7C,IAAI5vB,EAAa4vB,EAAUnuB,IAAI,cAgB/B,OAdA,SAAkBwH,EAAIu/B,GAClB,IAAIprC,EAAS4C,EAAW5C,WAGnB6L,GAIL2mB,EAAU9xB,OAAOmL,EAAI,KAAMjN,OAAEO,OAAOisC,GAChCprC,OAAQA,EACRtB,QAASsB,EAAOtB,eCnC5B,YAAgB8B,QACXs7D,OAAO,2BACPnO,SAAS,gBACNz2B,YAAa,SACb+tC,YAAa,UAGhB92C,WAAW,qBAAsB,eAAgB,SAASmI,GACvDh4B,KAAK44B,YAAcZ,EAAaY,aAAe,SAC/C54B,KAAK2mE,YAAc3uC,EAAa2uC,aAAe,WAGlD5iD,UAAU,WAAY,WACnB,OACIqQ,SAAU,WAAY,WACtBvE,WAAY,oBACZ7L,KAAM,SAAUC,EAAO3W,EAASs5D,EAAOtyC,GACnC,IAAIuyC,EAAcvyC,EAAM,GAAIwyC,EAAcxyC,EAAM,GAGhDwyC,EAAYC,QAAU,WAClBz5D,EAAQ05D,YAAYH,EAAYjuC,YAAa12B,QAAQ8lB,OAAO8+C,EAAYz0C,YAAapO,EAAMyoB,MAAMk6B,EAAMK,aAI3G35D,EAAQrH,KAAK4gE,EAAYF,YAAa,WAClC,IAAIO,EAAW55D,EAAQ4oB,SAAS2wC,EAAYjuC,aAEvCsuC,IAAYhlE,QAAQilE,UAAUP,EAAMQ,cACrCnjD,EAAMuT,OAAO,WACTsvC,EAAY/zC,cAAcm0C,EAAW,KAAOjjD,EAAMyoB,MAAMk6B,EAAMK,WAC9DH,EAAYC,kBAQnChjD,UAAU,cAAe,WACtB,OACIqQ,SAAU,cAAe,WACzBvE,WAAY,oBACZ7L,KAAM,SAAUC,EAAO3W,EAASs5D,EAAOtyC,GAGnC,SAAS+yC,IACL,OAAOC,EAAiBV,EAAMW,iBAAiB,GAGnD,SAASC,IACL,OAAOF,EAAiBV,EAAMa,kBAAkB,GAGpD,SAASH,EAAiBI,EAAgB/V,GACtC,IAAIpgD,EAAM0S,EAAMyoB,MAAMg7B,GACtB,OAAOxlE,QAAQilE,UAAU51D,GAAOA,EAAMogD,EAZ1C,IAAIkV,EAAcvyC,EAAM,GAAIwyC,EAAcxyC,EAAM,GAgBhDwyC,EAAYC,QAAU,WAClBz5D,EAAQ05D,YAAYH,EAAYjuC,YAAa12B,QAAQ8lB,OAAO8+C,EAAYz0C,YAAag1C,OAIzF/5D,EAAQrH,KAAK4gE,EAAYF,YAAa,WAClC1iD,EAAMuT,OAAO,WACTsvC,EAAY/zC,cAAczlB,EAAQ4oB,SAAS2wC,EAAYjuC,aAAe4uC,IAAkBH,KACxFP,EAAYC,qzBClEpC,IAAIvJ,UAASt7D,QAAQs7D,OAAO,eAE5BA,UAAOuH,QAAQ,UAAW4C,kBvEC1BC,kBAIgBhgC,SAAW,SAAU,eAAgB,SAAU,SAAS,YAAa,WAAY,aAAa,mDEO1G7S,OAAS7yB,QAAQoL,QAErBomB,YAAYkU,SAAW,SAAS,aAAa,YAAY,yBAA0B,sBAAuB,WAkF1G7jB,YAAU6jB,SAAW,WAAY,WAAW,YAAY,wsCCzFxDrS,YAMYqS,SAAW,SAAS,WAAY,aAAc,WAiL1D7jB,YAAU6jB,SAAW,+aC9LjB9Q,OAAS,QAQb/S,YAAU6jB,SAAW,WAAY,k2GoEN7B7jB,YAAY,WACZ,OACIpW,SAAS,EACTnH,SAASA,WACT4tB,SAAU,OAAQ,UAAW,aAC7BvE,WAAY,kBACZsH,aAAc,OACdlT,OACI5e,KAAM,cAEV2e,KAAM,SAASC,EAAO3W,EAASyJ,EAAMud,GAEjC,IAAIzsB,EAAOysB,EAAM,GAEb3C,EADQrkB,EAAQwb,KAAK,SACLtB,GAAG,GAAGqI,WAAW,WAErC5L,EAAMpc,KAAOA,EAEboc,EAAMuK,KAAKkD,cAAc4C,EAAM,IAC3B9C,KAAM,KAGVvN,EAAM5e,KAAKkyB,YAAcjqB,EAAQrH,KAAK,mBAAoB,SAAUoG,GAC7C,KAAhBA,EAAMyG,QACLmR,EAAMuT,OAAO,WACTvT,EAAMR,MAAM,sBAEhBpX,EAAM0G,oBAMd,IAAI80D,EAAe,SAASjlE,GACxB,IAAImK,EAAMtB,WAAWwY,EAAM5e,KAAK0H,KAChC,OAAK2J,MAAM3J,IAAQnK,EAAQmK,OACvB4kB,EAAQI,aAAa,UAAU,IAG/BJ,EAAQI,aAAa,UAAU,GACxBnvB,IAIf+uB,EAAQc,SAASvvB,KAAK2kE,GACtBl2C,EAAQY,YAAYrvB,KAAK2kE,GAEzB,IAAIC,EAAe,SAASllE,GACxB,IAAI4Q,EAAM/H,WAAWwY,EAAM5e,KAAKmO,KAChC,OAAKkD,MAAMlD,IAAQ5Q,EAAQ4Q,OACvBme,EAAQI,aAAa,UAAU,IAG/BJ,EAAQI,aAAa,UAAU,GACxBnvB,IAIf+uB,EAAQc,SAASvvB,KAAK4kE,GACtBn2C,EAAQY,YAAYrvB,KAAK4kE,MlEhErCrwC,oBAAoBmQ,SAAW,mBAAoB,koBCGnDmgC,YAEUngC,SAAW,mBAAmB,8hCCCxCogC,YAGUpgC,SAAW,mBAAoB,eAAgB,m2BCJzDqgC,YAEUrgC,SAAW,oBgETrB,SAAiB,SAAe5lB,EAAGgD,GAAK,OAAOhS,MAAMtS,UAAUgqB,MAAMvmB,KAAK6d,EAAGgD,ICAzEkjD,GAA6B,mBAAjBpI,aAA6BxxC,KAE3CA,KADE45C,GACK,SAAU36D,GAAMuyD,aAAavyD,IACR,oBAAZ46D,SAA2BA,QAAQC,SAC5CD,QAAQC,SAER,SAAU76D,GAAMjB,WAAWiB,EAAI,IAGxC,UAAiB+gB,cCLA,SAAmB/gB,EAAImR,EAAMgL,GACvCnc,GACL86D,MAAM,WACJ96D,EAAGpK,MAAMumB,GAAO,KAAMhL,kBCFT,SAAkB4pD,EAAOzoE,GACxC,IAAImpC,EAAOnpC,MACP0oE,KA6CJ,YA5Cc3xD,IAAV0xD,IAAuBA,MAC3BA,EAAMj7D,GAAK,SAAUpN,EAAMsN,GAMzB,OALKg7D,EAAItoE,GAGPsoE,EAAItoE,GAAMiD,KAAKqK,GAFfg7D,EAAItoE,IAASsN,GAIR+6D,GAETA,EAAM1Y,KAAO,SAAU3vD,EAAMsN,GAG3B,OAFAA,EAAGi7D,OAAQ,EACXF,EAAMj7D,GAAGpN,EAAMsN,GACR+6D,GAETA,EAAMl6D,IAAM,SAAUnO,EAAMsN,GAC1B,IAAIovD,EAAIx1D,UAAUmJ,OAClB,GAAU,IAANqsD,SACK4L,EAAItoE,QACN,GAAU,IAAN08D,EACT4L,SACK,CACL,IAAIE,EAAKF,EAAItoE,GACb,IAAKwoE,EAAM,OAAOH,EAClBG,EAAG/yD,OAAO+yD,EAAGx/D,QAAQsE,GAAK,GAE5B,OAAO+6D,GAETA,EAAMhqC,KAAO,WACX,IAAI5f,EAAOgqD,KAAKvhE,WAChB,OAAOmhE,EAAMK,gBAAgBjqD,EAAKwH,SAAS/iB,MAAMnD,KAAM0e,IAEzD4pD,EAAMK,gBAAkB,SAAU1oE,GAChC,IAAIwoE,GAAMF,EAAItoE,QAAayqB,MAAM,GACjC,OAAO,WACL,IAAIhM,EAAOgqD,KAAKvhE,WACZuiB,EAAM1pB,MAAQsoE,EAClB,GAAa,UAATroE,IAAoC,IAAhB+oC,EAAK4/B,SAAqBH,EAAGn4D,OAAU,MAAsB,IAAhBoO,EAAKpO,OAAeoO,EAAK,GAAKA,EAKnG,OAJA+pD,EAAGloE,QAAQ,SAAkBsoE,GACvB7/B,EAAK8/B,MAAS9gB,SAAS6gB,EAAQnqD,EAAMgL,GAAem/C,EAAO1lE,MAAMumB,EAAKhL,GACtEmqD,EAAOL,OAASF,EAAMl6D,IAAInO,EAAM4oE,KAE/BP,IAGJA,GlEnDLrvC,kBAAoBv3B,eAAOqnE,wBAmBdhwC,YAAcE,kBAG/B,mBAAsBp0B,SAASo1B,YAAc,SAAsBh6B,EAAM0H,GACvE,IAAI4K,EAAI1N,SAASo1B,YAAY,eAM7B,OALItyB,EACF4K,EAAEy2D,gBAAgB/oE,EAAM0H,EAAOshE,QAASthE,EAAOuhE,WAAYvhE,EAAOuxB,QAElE3mB,EAAEy2D,gBAAgB/oE,GAAM,GAAO,OAAO,GAEjCsS,GAIT,SAAsBtS,EAAM0H,GAC1B,IAAI4K,EAAI1N,SAASs1B,oBAWjB,OAVA5nB,EAAEtS,KAAOA,EACL0H,GACF4K,EAAE02D,QAAUE,QAAQxhE,EAAOshE,SAC3B12D,EAAE22D,WAAaC,QAAQxhE,EAAOuhE,YAC9B32D,EAAE2mB,OAASvxB,EAAOuxB,SAElB3mB,EAAE02D,SAAU,EACZ12D,EAAE22D,YAAa,EACf32D,EAAE2mB,YAAS,GAEN3mB,GmE5CLunB,YACAsvC,UAAY,GACZC,IAAM,MAEV,IAAKD,aAAa1nE,eACZ2nE,IAAIj5D,KAAKg5D,YACXtvC,SAAS52B,KAAKkmE,UAAU1+C,MAAM,IAIlC,eAAiBoP,SlERbE,MAAMt4B,eAAOmD,SACbykE,SAAWlwC,aACXmwC,YAAc/vC,gBACdsB,aAECp5B,eAAOkN,mBACV06D,SAAWhwC,aACXiwC,YAAc9vC,iBAGhB,eACEnvB,IAAKg/D,SACLx6D,OAAQy6D,YACRC,UAAW3vC,gBCfT3b,SACAyB,MAAQ,YACR9Q,IAAM,qBA0BRvE,IAAK8W,SACLme,GAAInE,SC1BFpB,IAAMn1B,SACN6H,gBAAkBstB,IAAIttB,0BAylBT4uB,6/NiE/lBhB,SAAU0jB,EAAMkf,GAMCh8D,QAAQs7D,OAAO,SAErBz5C,UAAU,WAAYm6C,EAAQlf,EAAK98C,UAR/C,CAUElC,eAAM,WAIJ,SAASsmC,EAAgBxV,GACrB,OACI7M,OACIpkB,QAAS,oBAEb8N,SAAS,EACTymB,QAAS,UACT5tB,UAAW,kHACP,6FACA,gGACA,iCACA,2BACA,qEACA,SACA,sGACA,SACA,qDACA,2HACA,QACA,6BACA,+IACA,QACA,UAAU8X,KAAK,MAEnB0F,KAAM,SAASC,EAAO3W,EAASyJ,EAAM4a,GA8BjC,SAAS83C,EAASC,GACd/3C,EAAQoB,cAAc22C,GACtB/3C,EAAQo1C,UAIZ,SAAS4C,EAAkBD,GACvB,OAAKzlD,EAAM2lD,OAASj4C,EAAQuG,SAASwxC,GAC1BA,EAGJ58D,KAAKoiD,MAAMwa,EAAazlD,EAAM2lD,OAAS3lD,EAAM2lD,MA8CxD,SAASC,EAAkBx9D,GAYvB,SAASy9D,EAAUz9D,GACf09D,EAAS19D,GACTA,EAAM0G,iBACN,IAAI22D,EAAaM,GAAkB39D,EAAM22B,MAAQinC,IAAiB38D,EAAQrG,KAAK,eAAiBijE,GAEhGR,EAAa58D,KAAKC,IAAI28D,EAAY,GAClCA,EAAa58D,KAAK0G,IAAIk2D,EAAY,GAElCzlD,EAAMuT,OAAO,WACTiyC,EAASC,KAKjB,SAASS,EAAQ99D,GACbA,EAAM0G,iBACN+d,EAAU1iB,IAAI,sBAAuB07D,GACrCh5C,EAAU1iB,IAAI,mBAAoB+7D,GAClClmD,EAAMR,MAAM2mD,EAAqBz4C,EAAQU,aA7B7C03C,EAAS19D,GACT,IAAI29D,EAAgBC,EACpB59D,EAAM0G,iBACN1G,EAAMsuB,kBACNsvC,EAAe59D,EAAM22B,MACrBgnC,EAAiBr4C,EAAQW,WAEzBxB,EAAUzjB,GAAG,sBAAuBy8D,GACpCh5C,EAAUzjB,GAAG,mBAAoB88D,GA/FrC,IAAID,EACArqE,EAAUokB,EAAMpkB,YAEpBqqE,EAAoB58D,EAAQ,GAAG4+B,cAAc,kBAAkBl/B,YAE/DiX,EAAM0N,QAAUA,EAEhB1N,EAAMlX,IAAMlN,EAAQkN,KAAO,EAC3BkX,EAAMzQ,IAAM3T,EAAQ2T,KAAQyQ,EAAMlX,IAAM,IACxCkX,EAAMqG,MAAQrG,EAAMzQ,IAAMyQ,EAAMlX,IAEhCkX,EAAM2lD,MAAQ/pE,EAAQ+pE,MAAQ/pE,EAAQ+pE,MAAQ,EAAI,EAClD3lD,EAAMomD,SAAWxqE,EAAQ+pE,OAAS,IAAI3lD,EAAM2lD,MAE5C3lD,EAAMqmD,OAASzqE,EAAQyqE,OACvBrmD,EAAMsmD,YAAc1qE,EAAQyqE,QAAU,IAAMzqE,EAAQyqE,OAAOh6D,OAE3DqhB,EAAQuG,SAAWhW,EACnByP,EAAQo1C,QA0BR,WACI,IAAI2C,EAAaC,EAAkBh4C,EAAQW,YACvCk4C,GAAc9zD,MAAMgzD,GACpBe,EAAgBD,EAAa,QAAU,OACvCE,EAAmBF,GAAc3qE,EAAQ8qE,UAAY,QAAU,OAEnE,OAAQ9qE,EAAQ+qE,oBACZ,IAAK,MACD3mD,EAAM4mD,gBAAmB32D,KAAmB,IAAbw1D,EAAmB,IAAKoB,QAASJ,GAChE,MACJ,IAAK,SAEGzmD,EAAM4mD,eADNnB,EAAa,IACYx1D,KAAM,MAAO9I,MAAM,KAAOs+D,EAAY,IAAO,IAAKoB,QAASJ,IAE3Dt2D,MAAO,MAAOhJ,MAAM,KAAO,GAAMs+D,GAAc,IAAKoB,QAASJ,GAE1F,MACJ,QACIzmD,EAAM4mD,gBAAmBz2D,MAAQ,IAAmB,IAAbs1D,EAAoB,IAAKoB,QAASJ,GAGjFzmD,EAAM8mD,aAAgB72D,KAAoB,IAAbw1D,EAAoB,IAAKoB,QAASL,IA9CnE94C,EAAQY,YAAYrvB,KAkDpB,SAAsBsvB,GAElB,OAAIb,EAAQuG,SAAS1F,GACVf,MAIXe,EAAa1lB,KAAKC,IAAID,KAAK0G,IAAIgf,EAAYvO,EAAMlX,KAAMkX,EAAMzQ,MACxCyQ,EAAMlX,KAAOkX,EAAMqG,QAzD5CqH,EAAQc,SAASvvB,KA6DjB,SAAwBwmE,GACpB,QAASzlD,EAAMlX,IAAO48D,EAAkBD,GAAczlD,EAAMqG,OAAQhF,QAAQ,KA5DhFrB,EAAM4lD,kBAAoBA,EAC1B5lD,EAAM+mD,kBAkGN,SAA2B3+D,GACvB09D,EAAS19D,GACTA,EAAM0G,iBACN,IAAIk4D,EAAc39D,EAAQrG,KAAK,eAC3BikE,EAAiB59D,EAAQ,GAAGkzB,wBAAwBtsB,KACpDw1D,GAAcr9D,EAAM22B,MAAQkoC,EAAiBhB,EAAkB,IAAMe,EAAcf,GAEvFR,EAAa58D,KAAKC,IAAI28D,EAAY,GAIlCD,EAHAC,EAAa58D,KAAK0G,IAAIk2D,EAAY,IAIlCG,EAAkBx9D,IA1GtB4X,EAAMknD,UAAY,SAAmB3/D,GAAK,OAAO,IAAIwH,MAAMxH,MAqHvE,SAASu+D,EAAS19D,GACd,IAAI++D,EAAUpxC,EAAK/0B,EAIC,MAAfoH,EAAM22B,OAAkC,MAAjB32B,EAAMmwB,UAE9BxC,GADAoxC,EAAW/+D,EAAMmG,OAAO64D,eAAiBxmE,UAC1B6H,gBACfzH,EAAOmmE,EAASnmE,KAEhBoH,EAAM22B,MAAQ32B,EAAMmwB,SAAYxC,GAAOA,EAAIsxC,YAAcrmE,GAAQA,EAAKqmE,YAAc,IAAQtxC,GAAOA,EAAIuxC,YAActmE,GAAQA,EAAKsmE,YAAc,GAChJl/D,EAAM42B,MAAQ52B,EAAMqwB,SAAY1C,GAAOA,EAAIwxC,WAAcvmE,GAAQA,EAAKumE,WAAc,IAAQxxC,GAAOA,EAAIyxC,WAAcxmE,GAAQA,EAAKwmE,WAAc,IAKjI,MAAfp/D,EAAM22B,OAAiB32B,EAAMw1B,UAC7Bx1B,EAAM22B,MAAQ32B,EAAMw1B,QAAQ,GAAGmB,MAC/B32B,EAAM42B,MAAQ52B,EAAMw1B,QAAQ,GAAGoB,OAIvC,SAAS/gB,EAAQ8C,GACb,OAAOtO,MAAMjL,WAAWuZ,MAAQ0gB,SAAS1gB,GAnM7C,IAAIolD,EAAsB,gBAyK1B,OAvKA9jC,EAAgBsB,SAAW,YAAa,QAuKjCtB,oB1DlLPM,UAAY,uBACZD,cAAgB,gBACpBF,uBAAuBmB,SAAW,UCFlCf,cAAce,SAAW,aCAzB,oBAAe,WACX,OAAOb,WyD+BPy2B,UAASt7D,QAAQs7D,OAAO,mBACxBkO,UAAYxrE,KACZyrE,UAAYzrE,KACZk4B,QAAQl4B,KACRulE,SAAevlE,KACf+kE,SAAc/kE,KACd0rE,UAAY1rE,OAGhBs9D,UAAO3tC,WAAW,kBAAmBwB,mBACrCmsC,UAAOU,QAAQ,YAAa3sC,aAC5BisC,UAAOz5C,UAAU,UAAW8nD,aAC5BrO,UAAOz5C,UAAU,UAAW+nD,aAC5BtO,UAAOz5C,UAAU,eAAgBgoD,aACjCvO,UAAOz5C,UAAU,YAAa,WAAW,WAEzCy5C,UAAOz5C,UAAU,YAAaiT,eAC9BwmC,UAAOz5C,UAAU,gBAAiBiT,eAClCwmC,UAAOz5C,UAAU,kBAAmBioD,aAEpCxO,UAAOuH,QAAQ,mBAAoBttC,qBACnC+lC,UAAOz5C,UAAU,gBAAgBkoD,aACjCzO,UAAOz5C,UAAU,iBAAiBmoD,aAClC1O,UAAOz5C,UAAU,mBAAmBooD,aAEpC3O,UAAOz5C,UAAU,YAAYqoD,aAE7B5O,UAAO56D,MAAM,eAAgBtC,OAAEgC,SAC/Bk7D,UAAOz5C,UAAU,YAAamgB,iBAC9Bs5B,UAAOz5C,UAAU,eAAgBsoD,oBACjC7O,UAAOz5C,UAAU,iBAAkBuoD,iBACnC9O,UAAOz5C,UAAU,oBAAqBwoD,oBACtC/O,UAAOz5C,UAAU,cAAcuiB,mBAC/Bk3B,UAAOz5C,UAAU,WAAWwiB,UAC5Bi3B,UAAOz5C,UAAU,gBAAgByoD,wBAIjChP,UAAO18C,QAAQ,eAAgB,SAAS2rD,GACpCA,EAAaC,SAAQ,MAGzBlP,UAAOz5C,UAAU,oBAAqB,WAClC,OACIpW,SAAQ,EACRi7B,YAAY,EACZ3kB,OAAQ0oD,QAAQ,qBAAqBC,WAAW,iBAChDpmE,UACI,2HACA,gFACA,8BACA,UACF8X,KAAK,OAKfk/C,UAAO30D,OAAO,UAAWg+B,eACzB22B,UAAO30D,OAAO,YAAagkE,iBAG3BrP,UAAOz5C,UAAU,UAAW,WACxB,OACIC,KAAM,SAASC,EAAO3W,GACP2W,EAAM6I,KAEZggD,WAAaxgE,WAAW,WACzB,IAAIuY,EAAUvX,EAAQ,GAAG4+B,cAAc,mBACnCthC,EAAKia,GAAWA,EAAQqnB,cAAc,mCACtCthC,GAAIA,EAAGoyB,cChG3B,IAMIwgC,SAASt7D,QAAQs7D,OAAO,WACxBuP,UAAsB7sE,KACtB8sE,SAAgB9sE,OzDXpB+sE,aAGUrlC,SAAW,WAAY,aAAc,YAAa,aCH5D7jB,aAAU6jB,WyDCV,IAAI41B,UAASt7D,QAAQs7D,OAAO,cACxByH,SAAc/kE,OAGlBs9D,UAAOz5C,UAAU,YAAampD,cAC9B1P,UAAOz5C,UAAU,gBAAiBopD,cxDalCzlC,qBAAqBE,SAAW,KAAM,aAAc,aClBpDwlC,aAEUxlC,SAAW,eAAe,gBAAgB,YAAa,UAAW,aAAc,awDC1F,IASI41B,UAASt7D,QAAQs7D,OAAO,cAC5BA,UAAOj2B,SAAS,eAAgBG,UAChC81B,UAAOz5C,UAAU,SAAUspD,cAQ3B7P,UAAO18C,QAAQ,uBAAwB,SAASwsD,GAG5C,SAASC,EAAcvwD,EAAMsD,EAASiO,EAAQqB,EAAU7vB,EAAQqG,GAC5D,IAAIma,EAcJ,OAXAna,EAAKlG,OAASH,EAAOG,KAAOkG,EAAKlG,MAEjCquB,EAAOxuB,OAASA,EAEhBugB,EAAQK,OAAO,wBACfJ,EAAMD,EAAQM,WACdgP,EAASrP,EAATqP,CAAcrB,GAGdhO,EAAIsP,WAAW,WAAWzpB,KAAKkJ,QAAiB,QAAE0N,GAE3C,WACHuD,EAAI0D,QAAQ+M,WACZzQ,EAAIzR,UAlBZy+D,EAAc3lC,SAAW,OAAQ,WAAY,SAAU,WAAY,SAAS,QAsB5E0lC,EAAiB7sE,IAAI,QAAS8sE,MAGlC/P,UAAO18C,QAAQ,uBAAwB,SAASwsD,GAE5C,SAASE,EAAgBxwD,EAAMsD,EAASla,EAAMmoB,EAAQqB,GAClD,IAAIrP,EAaJ,OAXAgO,EAAOxuB,OAASqG,EAEhBka,EAAQK,OAAO,0BACfJ,EAAMD,EAAQM,WACdgP,EAASrP,EAATqP,CAAcrB,GAGdA,EAAOpK,IAAI,eAAgB,WACvBnH,MAGG,WACHuR,EAAOyC,WACPzQ,EAAIzR,UAjBZ0+D,EAAgB5lC,SAAW,OAAQ,WAAY,OAAQ,SAAS,YAqBhE0lC,EAAiB7sE,IAAI,UAAW+sE,MAMpChQ,UAAO18C,QAAQ,uBAAwB,SAASwsD,GAE5C,SAASG,EAAazwD,EAAM5W,EAAM/D,EAAOof,EAAInd,GACzC,IAAIopE,EAAWjsD,EAAGe,QACd9gB,EAAS4C,EAAW5C,OACpB2D,EAAOe,EAAKsB,KAAOpH,OAAEyF,IAAIrE,EAAQ0E,EAAKsB,MAAQtB,EAAKf,KAMvD,OAJAhD,EACKL,KAAKoE,EAAKnE,IAAKoD,GAAOoO,QAASi6D,EAASp+D,UACxCQ,KAAKkN,EAAKA,GAER0wD,EAASj+D,QAVpBg+D,EAAa7lC,SAAW,OAAQ,OAAQ,QAAQ,KAAM,cAatD0lC,EAAiB7sE,IAAI,OAAQgtE,MAMjCjQ,UAAO18C,QAAQ,uBAAwB,SAASwsD,GAE5C,SAASK,EAAiB3wD,EAAM5W,EAAM7B,GAC9BjE,OAAE8I,OAAOhD,EAAK,aAAY,IAC1B7B,EAAasB,aACb8Q,SAASi3D,KAAOxnE,EAAKnE,KAErB+a,IANR2wD,EAAiB/lC,SAAW,OAAQ,OAAQ,uBAU5C0lC,EAAiB7sE,IAAI,WAAYktE,MAMrCnQ,UAAO18C,QAAQ,uBAAwB,SAASwsD,GAE5C,SAASO,EAAY7wD,EAAMsD,EAASla,EAAMrG,GACtC,IAAIwgB,EAAKC,EAELC,EADAC,EAAata,EAAKia,QAAU,GAoChC,OAhCAG,EAAM7Q,YAAUmR,QACZ1b,QAAS9E,OAAEwb,WACX3L,QAAS/J,EAAK+J,SAAW,uCACzB4Q,OAEIC,MAAO,+DAAgE,4CAGvE9K,QAAS,4DAA4D,iDACrE+K,YAAa,+DAA+D,mDAC5EC,UAAW,kEAAmE,6CAGlFC,KAAMT,GAAc,eAAiB,SAAU,WAAY,gBAI/Dta,EAAKlG,OAASH,EAAOG,KAAOkG,EAAKlG,MAEjCogB,EAAQK,OAAO,0BACfJ,EAAMD,EAAQM,YACVQ,SAAS,cAEbZ,GAAK,eAAgB,SAAShF,GAC1B+E,EAAIc,YAAY,cACZX,GACAD,EAAUjF,EAAS+E,EAAI,GAAIxgB,IACnB8O,IAAIlM,IAAIqa,GAEfxB,EAASzb,EAAQid,KAGnB,WACHuD,EAAIzR,SACA4R,EAAYD,EAAQ5R,KAAI,GACvB2R,GAAK,sBAAuB,SAASc,GACtCA,EAAKC,SAAS9R,UACd6R,EAAKxJ,aA5CjB+1D,EAAYjmC,SAAW,OAAQ,WAAY,OAAQ,UAiDnD0lC,EAAiB7sE,IAAI,MAAOotE,MAMhCrQ,UAAO18C,QAAQ,uBAAwB,SAASwsD,GAE5C,SAASQ,EAAa9wD,EAAMsD,EAASla,EAAMrG,GACvC,IAAIwgB,EACAE,EAWJ,OARAra,EAAKlG,OAASH,EAAOG,KAAOkG,EAAKlG,MAEjCogB,EAAQK,OAAO,yBACfJ,EAAMD,EAAQM,YAEdH,EAAUI,WAAKN,EAAI,GAAIxgB,IACf8O,IAAIlM,IAAIqa,GAET,WACHuD,EAAIzR,SACJ2R,EAAQ5R,KAAI,IAhBpBi/D,EAAalmC,SAAW,OAAQ,WAAY,OAAQ,UAoBpD0lC,EAAiB7sE,IAAI,OAAQqtE,MtD9LjCvlC,qBAAqBX,SAAW,eAAgB,auDHhD,IAAI41B,UAASt7D,QAAQs7D,OAAO,gBAE5BA,UAAOuH,QAAQ,gBAAiBx8B,sBtDMhCG,cAEcd,SAAW,UAKzBtnC,OAAEO,OAAO6nC,cAAchoC,WACnBoJ,KAAO,SAASo/B,EAAOrpC,GACnBG,KAAKuuB,OAAO2G,MAAMgU,EAAOrpC,IAE7BgK,KAAM,SAASq/B,EAAOrpC,GAClBG,KAAKuuB,OAAO2G,MAAMgU,EAAOrpC,IAE7BspC,QAAS,SAASD,GACdlpC,KAAKuuB,OAAO4a,QAAQD,IAExB5B,MAAO,SAASznC,GACZG,KAAKuuB,OAAO+Y,MAAMznC,MAI1B8oC,cAAcf,SAAW,WAAY,WAAY,6JC5BjDmmC,aAEUnmC,WsDLV,IAAI41B,UAASt7D,QAAQs7D,OAAO,wBAE5BA,UAAOz5C,UAAU,SAAUiqD,eAC3BC,UACOlqD,UAAU,YAAamqD,crD6D9B,IAAI/jC,YAAc,WC/DlBC,eAAexC,SAAW,aAAc,KAAM,kBAAmB,kBAAmB,aCDpFuD,iBAAiBvD,SAAW,WAAW,aAAa,sBAAsB,0BCG1EyD,mBAEmBzD,SAAW,KAAM,oBCLpC2D,kBAAkB3D,SAAW,MCE7B8D,gBAEgB9D,SAAW,KAAM,mBAAoB,aCLrD,IAAI0hC,WAAW9lE,OAAO+1B,aAAe/1B,OAAOoL,iBACxC26D,cAAc/lE,OAAOo2B,aAAep2B,OAAOuL,oBAC3Co/D,SAAW3qE,OAAO+1B,YAAc,iBAAmB,eAEnDyS,OACAxwB,SAAU,WACN8tD,WAAS6E,SAAUtiC,aAEvBhmC,WAAY,WACR0jE,cAAY4E,SAAUtiC,cEF9BS,iBAEiB1E,SAAW,SAAU,iBAAkB,cAAe,aAgDvE7jB,aAAU6jB,SAAW,KAAM,YAAa,aE3DxC4F,gBAAgB5F,SAAW,uB4CmB3B,IAAI41B,UAASt7D,QAAQs7D,OAAO,eACxB4Q,UAAWluE,KACXmuE,UAAanuE,KACbyrE,UAAYzrE,KACZouE,UAAuBpuE,KACvB+kE,SAAc/kE,OAGlBs9D,UAAOuH,QAAQ,iBAAkB36B,gBACjCozB,UAAOuH,QAAQ,kBAAmBwJ,kBAClC/Q,UAAOuH,QAAQ,cAAe15B,oBAC9BmyB,UAAOuH,QAAQ,mBAAoByJ,mBACnChR,UAAOuH,QAAQ,kBAAmB0J,iBAClCjR,UAAOU,QAAQ,sBAAuBwQ,qBACtClR,UAAOnO,SAAS,qBAAsB3kB,aACtC8yB,UAAOz5C,UAAU,YAAa4qD,cAC9BnR,UAAOz5C,UAAU,gBAAiB6qD,cAElCpR,UAAOz5C,UAAU,SAAUypB,wkWC3B3B,IAAK,IADDkxB,SAAW,SAAU,OAChBjpD,EAAI,EAAGA,EAAIipD,QAAQpuD,SAAW9M,OAAOoqC,wBAAyBn4B,EAAG,CACtE,IAAIkpD,GAAKD,QAAQjpD,GACjBjS,OAAOoqC,sBAAwBpqC,OAAOm7D,GAAG,yBACzCn7D,OAAOsqC,qBAAwBtqC,OAAOm7D,GAAG,yBAA2Bn7D,OAAOm7D,GAAG,+BAElF,GACI,uBAAuBvuD,KAAK5M,OAAO+9B,UAAUq9B,aACxCp7D,OAAOoqC,wBAA0BpqC,OAAOsqC,qBAC/C,CACE,IAAI+wB,SAAW,EACfr7D,OAAOoqC,sBAAwB,SAAS3jC,GACpC,IAAIuL,GAAO,IAAIF,KACXwpD,EAAWhyD,KAAK0G,IAAIqrD,SAAW,GAAIrpD,GACvC,OAAOlJ,WAAW,WAAarC,EAAS40D,SAAWC,IAAcA,EAAWtpD,IAEhFhS,OAAOsqC,qBAAuBj6B,a5CsDlC,qBAAgB,UAAW,WAAYwhB,0BCDvB,UAAW,WAAYA,6BCCvB,UAAW,WAAYA,a2CxEnCmoC,UAASt7D,QAAQs7D,OAAO,cAAc,cAE1CA,UAAOnoC,UAAU,WAAYw5C,iBAC7BrR,UAAOnoC,UAAU,QAASy5C,eAC1BtR,UAAOnoC,UAAU,SAAU05C,gB1CL3BC,kBAEgBpnC,SAAW,sBCS3B,IACIlkB,gBAAgB,MAAO,OAAQ,OAAQ,QAAS,SAChDG,UAAUihD,KAAK,EAAGpgE,MAAM,EAAG0tB,KAAK,EAAG9J,KAAK,EAAGjf,IAAI,EAAG8Y,MAAM,GAE5DgB,2BAAyBykB,SAAW,OAAQ,+5BCnB5CqnC,aAGUrnC,SAAW,cCErB,IAAI41B,UAASt7D,QAAQs7D,OAAO,gBAE5BA,UAAOuH,QAAQ,YAAaniD,mBAC5B46C,UAAOuH,QAAQ,qBAAsB5hD,4BACrCq6C,UAAOz5C,UAAU,YAAaihD,cAE9BxH,UAAO30D,OAAO,YAAa,WACvB,OAAOkM,cwCGXvR,OAAO4wB,QAAUA,QACjB5wB,OAAOmM,UAAYA,YACnBnM,OAAOq6D,OAASA,OAEhB,IAAIqR,YACAC,SAAYjvE,KACZkvE,UAAclvE,KACdmvE,UAAcnvE,KACdovE,UAAgBpvE,KAChB+kE,UAAc/kE,MAGdkuC,MAAMlsC,QAAQs7D,OAAO,QAAS0R,YAGlC9gC,MAAIqoB,KAAK,aAAc,eAAgB,SAAU,UAAW,SAASnyD,EAAYusB,EAAcS,EAAQ+E,GAEnG,IACI5yB,EAAW6tB,EADET,EAAa9Z,KAAK,aACpBua,CAAmB+E,GAGlC7yB,OAAOC,WAAaD,OAAOC,aAC3Ba,EAAW5C,OAAS8B,OAAOC,SAEvBA,GACAnD,OAAEO,OAAOyD,EAAW5C,OAAQ+B,MAMpC2qC,MAAIttB,QAAQ,WAAY,SAASukD,GAGS,mBAA1BngB,OAAOqqB,iBAEXrqB,OAAOqqB,eADsB,gBAArB,OAAOC,UACS,SAAS//B,GAC7B,OAAOA,EAAO+/B,WAGM,SAAS//B,GAE7B,OAAOA,EAAOpsC,YAAY3C,YAmBtC2kE,EAASpH,UAAU,cAAe,YAAa,SAAS35D,GAGpD,SAASmrE,IACL,QAASnrE,EAAWorE,IAHxB,IAAI1jC,EAAQkZ,OAAOqqB,eAAejrE,GA2ClC,OArCA0nC,EAAM7b,KAAO,SAASw/C,GAClB,IAAIzkD,EAgCJ,OA9BIykD,IACAzkD,EAAQ,IAAI8gB,EAAM3oC,aACZusE,MAAQ5vE,KAAK4vE,MAEnB1kD,EAAM2kD,aAAe7vE,KAAK6vE,aAC1B3kD,EAAM4kD,kBAAoB9vE,KAAK8vE,oBAI1B9vE,KAAK+vE,oBACN/vE,KAAK+vE,kBAAoB,WACrB/vE,KAAe,WAAIA,KAAkB,cAAIA,KAAgB,YAAIA,KAAgB,YAAI,KACjFA,KAAgB,eAChBA,KAAoB,mBACpBA,KAAQ,IAAIyvE,IACZzvE,KAAsB,kBAAI,MAE9BA,KAAK+vE,kBAAkBrvE,UAAYV,MAEvCkrB,EAAQ,IAAIlrB,KAAK+vE,mBAErB7kD,EAAY,KAAIA,EAChBA,EAAa,QAAIlrB,KACjBkrB,EAAmB,cAAIlrB,KAAKgwE,YACxBhwE,KAAKiwE,aACLjwE,KAAKgwE,YAAYE,cAAgBhlD,EACjClrB,KAAKgwE,YAAc9kD,GAEnBlrB,KAAKiwE,YAAcjwE,KAAKgwE,YAAc9kD,EAEnCA,GAGX5mB,EAAW6rB,KAAO6b,EAAM7b,KACjB7rB,QvClHf,IAAIyC,KAAO,oBACNvD,OAAO8F,UAAS9F,OAAO8F,SAAWD,IAAItC,KAAKuhB,KAAKvhB,KAAKrC,MAAMqC,OAGhE82D,OAAO,aAAcv9D,OAAE+uD,SAAS9kB,MAChCszB,OAAO,UAAWv9D,OAAE+uD,SAASxuC,QAC7Bg9C,OAAO,SAAUv9D,OAAE+uD,SAASxuC,QAC5Bg9C,OAAO,WAAYv9D,OAAE+uD,SAAS9hC,QAC9BswC,OAAO,SAAUv9D,OAAE+uD,SAAS/uD,SAC5Bu9D,OAAO,aAAcv9D,OAAE+uD,SAAS/uD,SAChCu9D,OAAO,UAAWv9D,OAAE+uD,SAASntD,UAG7BksC,MAAIttB,QAAQ,WAAW,SAASukD,GAC5BA,EAASpH,UAAU,qBAAsB,YAAY,UAAW,SAASkS,EAAW95C,GAChF,OAAO,SAAS+5C,EAAWC,GACvBh6C,EAAQi6C,OAASj6C,EAAQi6C,MAAMptE,KAAKktE,GACpCD,EAAUC,EAAWC,UAKjCnuE,QAAQoL,QAAQzI,UAAU2T,MAAM,WAC5B,IAAI5N,EAAK/F,SAAS0rE,eAAe,aAC7B3lE,GAAI4Q,SAAS5Q"}