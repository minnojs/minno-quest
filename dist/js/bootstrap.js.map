{"version":3,"file":"bootstrap.js","sources":["config.js","bootstrap.js","utils/timer/timerStopper.js","utils/timer/timerDirective.js","utils/timer/timerNow.js","utils/timer/timer-module.js","utils/utils/preloaderService.js","utils/utils/preloaderDecorator.js","utils/utils/utilsModule.js","quest/directives/buttons/buttons.js","utils/database/template/templateFilter.js","utils/database/template/templateObjProvider.js","utils/database/template/templateModule.js","utils/console/consoleProvider.js","utils/console/consolePrototypeProvider.js","utils/console/console.html!text","utils/console/consoleDirective.js","utils/console/consoleModule.js","utils/modal/modal.html!text","utils/modal/modalService.js","utils/modal/modalModule.js","quest/directives/questController.js","quest/directives/piQuest/piQuest.html!text","quest/directives/piQuest/piQuest-directive.js","quest/directives/piQuest/piqPage.html!text","quest/directives/piQuest/piqPage-directive.js","quest/directives/wrapper/wrapper.html!text","quest/directives/wrapper/wrapper-directive.js","quest/directives/text/text.html!text","quest/directives/text/textarea.html!text","quest/directives/text/textDirective.js","text!quest/directives/text/text-number.html","quest/directives/text/text-number-directive.js","quest/directives/select/selectMixerProvider.js","quest/directives/select/dropdown.html!text","quest/directives/select/dropdownDirective.js","quest/directives/select/selectOne.html!text","quest/directives/select/selectOneDirective.js","quest/directives/select/selectMulti.html!text","quest/directives/select/selectMultiDirective.js","quest/directives/grid/grid.html!text","quest/directives/grid/gridDirective.js","quest/directives/grid/gridRow.html!text","quest/directives/grid/gridRowDirective.js","quest/directives/slider/slider.html!text","quest/directives/slider/sliderDirective.js","quest/directives/slider/slider.js","quest/directives/toRegexFilter.js","quest/directives/dfltUnitsFilter.js","quest/directives/questDirectivesModule.js","utils/logger/LoggerProvider.js","utils/logger/logger-module.js","utils/database/randomize/randomizeModule.js","utils/database/mixer/mixer.js","utils/database/mixer/mixerSequential.js","utils/database/mixer/mixerRecursive.js","utils/database/mixer/mixerSequenceProvider.js","utils/database/mixer/branching/dotNotation.js","utils/database/mixer/branching/mixerDotNotationProvider.js","utils/database/mixer/branching/mixerConditionProvider.js","utils/database/mixer/branching/mixerEvaluateProvider.js","utils/database/mixer/branching/mixerBranchingDecorator.js","utils/database/mixer/mixerModule.js","utils/database/collection/collectionProvider.js","utils/database/randomizer/randomizerProvider.js","utils/database/queryProvider.js","utils/database/inflateProvider.js","utils/database/store/storeProvider.js","utils/database/databaseProvider.js","utils/database/databaseSequenceProvider.js","utils/database/databaseModule.js","quest/task/questSequenceProvider.js","quest/task/taskProvider.js","quest/task/parseProvider.js","quest/task/dfltQuestLogger.js","quest/task/task-module.js","quest/questModule.js","message/messageDirective.js","message/messageDoneDirective.js","message/messageModule.js","taskManager/task/taskActivateProvider.js","taskManager/task/taskDirective.js","taskManager/task/taskModule.js","taskManager/canvas/canvasConstructor.js","taskManager/canvas/managerCanvasService.js","taskManager/canvas/canvasModule.js","utils/helperDirectives/piSwap/piSwapDirective.js","utils/helperDirectives/piSpinner/spinner.html!text","utils/helperDirectives/piSpinner/piSpinnerDirective.js","utils/helperDirectives/helperDirectivesModule.js","taskManager/managerService.js","taskManager/managerSequence.js","taskManager/managerLoadService.js","taskManager/managerGetScriptService.js","taskManager/managerTaskLoadService.js","taskManager/managerDirective.js","taskManager/managerTaskDirective.js","taskManager/managerModule.js","utils/animations/rafPolyfill.js","utils/animations/dropInAnimation.js","utils/animations/fadeAnimation.js","utils/animations/slideAnimation.js","utils/animations/animationModule.js","app.js","../../bower_components/PIPlayer/dist/js/extensions/dscore/Scorer.js","APIs/APIConstructor.js","APIs/pipAPI.js","APIs/questAPI.js","APIs/managerAPI.js"],"names":["define","noop","window","console","log","warn","require","config","paths","underscore","angular","animate","text","jquery","packages","name","location","main","shim","exports","deps","app","element","ready","setTimeout","resumeBootstrap","stopperProvider","now","Stopper","this","startTime","prototype","$inject","timerController","$timeout","TimerStopper","timerStart","options","_","isPlainObject","Error","$scope","ctrl","getScope","defaults","direction","template","show","removeOnEnd","duration","stopper","targetTime","tick","timerStop","cancel","timeoutId","remove","INTERVAL","timeLeft","$emit","currentTime","extend","milisToTime","Math","min","time","secs","floor","hours","divisor_for_minutes","minutes","divisor_for_seconds","seconds","ceil","obj","current","milis","start","stop","timerDirective","$compile","controller","priority","link","$element","$attr","$timerElement","prepend","contents","localScope","$new","zeroPad","n","$on","nowFn","performance","mozNow","webkitNow","msNow","oNow","apply","Date","module","service","directive","value","preloaderService","$q","loaders","loaded","preloaderRegister","type","fn","isFunction","preloaderLoad","description","promise","resultObj","loader","getObj","push","call","isPromiseLike","then","result","preloaderLoadArr","descriptions","defs","isArray","map","load","all","preloaderGetObj","find","loadObj","preloaderGet","register","loadArr","get","preloaderDecorator","preloader","imageLoader","url","def","defer","img","Image","onload","bind","resolve","onerror","reject","src","$provide","decorator","$injector","piInvoke","locals","global","$rootScope","invoke","constant","activeClass","toggleEvent","buttonConfig","scope","attrs","ctrls","buttonsCtrl","ngModelCtrl","$render","toggleClass","equals","$modelValue","$eval","btnRadio","isActive","hasClass","isDefined","uncheckable","$apply","$setViewValue","getTrueValue","getCheckboxValue","btnCheckboxTrue","getFalseValue","btnCheckboxFalse","attributeValue","defaultValue","val","templateFilter","$log","defaultContext","input","context","indexOf","e","error","message","templateObjProvider","$filter","templateObj","deepTemplate","forEach","key","expand","deep","includes","isString","filter","mapValues","consoleProvider","consolePrototype","Console","tags","force","$console","create","consoleSetSettings","settings","setSettings","consolePrototypeProvider","shouldLog","level","targetLevel","targetTags","LOGFUNCTIONS","LEVELS","intersection","length","createLog","i","args","arguments","hideConsole","each","none","info","debug","replace","index","logs","splice","reverse","stringify","pretty","toJson","modalConstructor","$rootElement","$document","modalCleanup","$destroy","deferred","$backDrop","off","removeClass","modalOpener","close","on","header","body","button","addClass","$digest","open","questController","$parse","piConsole","registerModel","ngModel","correctValidator","response","correctValue","data","isNumber","isEqual","$setValidity","ngModelGet","dfltValue","hasOwnProperty","dflt","model","$parent","isUndefined","assign","self","serial","size","questions","$viewValue","$formatters","modelValue","$parsers","viewValue","latency","pristineLatency","$watch","newValue","oldValue","onChange","onDestroy","correct","onCreate","NaN","event","preventDefault","declined","undefined","submitLatency","onSubmit","onDecline","timeout","onTimeout","piQuestCtrl","Task","templateDefaultContext","mixerDefaultContext","next","target","task","prev","script","pageData","$animate","terminal","parentElement","attr","cleanupLastPage","previousElement","currentScope","currentElement","leave","newPage","page","newScope","tempElm","jqLite","addAnimations","enter","refresh","animationsStr","animations","split","animation","has","piqPageCtrl","piModal","pageRefresh","pageSetup","timer","timerEnd","$broadcast","pagesMeta","$meta","pagesData","$context","timerProceed","submit","submitOnEnd","harvest","lognow","q","$logged","skipValidation","valid","pageForm","$valid","submitAttempt","proceed","decline","$event","$el","notDoubleClick","setup","$ctrl","capitaliseFirstLetter","string","charAt","toUpperCase","slice","questElement","children","eq","attrName","PREFIX","kebabCase","textDirective","el","textTemplate","textareaTemplate","controllerAs","maxlengthLimit","$input","limit","maxlength","form","autoSubmit","which","minValidator","parseFloat","isNaN","maxValidator","max","selectMixerProvider","shuffle","mixer","selectMixer","answersArr","answers","answer","numericValues","randomize","order","quest","chooseText","requiredValidator","$isEmpty","html","required","unshift","buttons","style","listCss","listItemCss","listClass","listItemClass","lineHeight","minWidth","isEmpty","chosen","pluck","gridDirective","allCss","objects","toArray","mapColumns","columns","objectify","column","tap","commit","noReverse","reverseValue","mapRows","rows","row","zerofill","thru","identity","stem","w","an","abs","digitCount","LN10","zeroString","pow","toString","substr","$watchCollection","responses","reduce","total","isFinite","gridRowDirective","newVal","$response","sliderDirective","root","factory","amd","join","setValue","percentage","steppedPercentage","steps","round","renderView","showHandle","handleDisplay","highlightDisplay","highlight","highlightStyle","right","display","handleStyle","left","toPercentage","range","fromPercentage","toFixed","onHandleMousedown","mouseMove","fixEvent","basePercentage","pageX","basePosition","prop","sliderHandleWidth","mouseUp","SLIDER_CHANGE_EVENT","stopPropagation","onSliderMouseDown","sliderWidth","sliderPosition","getBoundingClientRect","querySelector","clientWidth","pipWidth","labels","labelsWidth","getNumber","num","Array","eventDoc","doc","clientX","ownerDocument","document","documentElement","scrollLeft","clientLeft","pageY","clientY","scrollTop","clientTop","toRegexFilter","toRegex","err","isRegExp","RegExp","dfltUnits","unit","suffix","isNumeric","String","$sceProvider","enabled","transclude","unvalid","loggerProvider","$http","Logger","dfltLogFn","pending","sent","meta","suppress","a","logObj","logFn","logCounter","pulse","send","success","post","sendData","suppressPulse","getCount","$get","provider","random","mixProvider","mix","mixerName","mixers","remix","$parsed","wrapper","repeat","sequence","times","concat","clone","randomDeepMixer","arr","seq","choose","take","weightedRandom","total_weight","weights","cur","random_num","weight_sum","mixerSequentialProvider","mixerSequential","depth","mixed","shift","mixerRecursiveProvider","mixerRecursive","flatten","mixerSequenceProvider","MixerSequence","stack","add","pointer","subSequence","isNext","pop","number","outOf","memo","sub","dotNotation","chain","mixerDotNotationProvider","mixerDotNotation","escapeSeparatorRegex","test","mixerConditionProvider","mixerCondition","condition","operator","compare","to","evaluateProvider","evaluate","conditions","cond","and","every","nand","or","some","nor","mixerBranchingDecorator","branch","elseData","multiBranch","branches","collectionService","Collection","collection","first","last","end","previous","list","at","methods","method","coll","RandomizerProvider","randomizeInt","randomizeRange","Randomizer","_cache","exRandom","sequential","seed","cache","queryProvider","queryFn","query","randomizer","set","where","handle","namespace","JSON","inflateProvider","customize","source","inflate","recursive","parent","child","cloneDeep","inheritObj","inherit","merge","childProp","parentProp","storeProvider","Store","store","nameSpace","read","update","del","DatabaseProvider","DatabaseSequence","Database","createColl","getColl","$inflated","reinflate","$templated","regenerateTemplate","SequenceProvider","Sequence","db","mixerSequence","questionsArr","TaskProvider","QuestSequence","parse","dfltQuestLogger","logger","onEnd","nextObj","parseProvider","pagesSets","questionsSets","DEBUG","responseObj","onKeydown","keyArr","keys","charCodeAt","done","empty","events","$template","activators","taskActivateProvider","taskActivate","activator","destroy","$script","play","annotate","activateTask","canvas","$window","proceedListener","keyCode","ctrlKey","one","skipListener","proceedObject","bustCache","canvasOff","oldTitle","taskName","skip","piGlobal","title","activateProvider","activateQuest","$canvas","append","activateMessage","activatePIP","req","requirejs","uniqueId","baseUrl","backbone","activate","canvasContructor","offArr","rule","property","old","css","managerCanvasService","$body","background","canvasBackground","fontSize","fontColor","canvasConstructor","swapControler","swapDirective","compile","pre","$ctrls","$transclude","cleanupLast","opts","postLeave","props","spinner","managerService","ManagerSequence","taskLoad","manager","preloadImages","loadOptions","setBaseUrl","sequenceProvider","tasksSets","managerLoadService","getScript","managerLoadScript","when","getScriptProvider","isText","getTime","taskLoadService","managerGetScript","scriptUrl","templateUrl","promises","managerControler","ManagerService","managerLoad","init","getPath","path","substring","lastIndexOf","taskSource","loading","prevTask","currentTask","thisCtrl","$qSequence","onPreTask","swap","taskDone","ev","prms","piManager","piManagerTask","vendors","requestAnimationFrame","vp","cancelAnimationFrame","navigator","userAgent","lastTime","callback","nextTime","clearTimeout","topdx","raf","rafCancel","deltaTime","proportion","top","cancelId","canceled","opacity","submodules","run","globalAttr","Object","getPrototypeOf","__proto__","object","constructor","$$watchers","$$nextSibling","$$childHead","$$childTail","$$listeners","$$listenerCount","$id","$$childScopeClass","$$prevSibling","nextUid","proto","isolate","$root","$$asyncQueue","$$postDigestQueue","r","dataArray","AnalyzedVar","ErrorVar","condVar","cond1VarValues","cond2VarValues","parcelVar","parcelValue","fastRT","maxFastTrialsRate","minRT","maxRT","maxErrorParcelRate","errorLatency","use","penalty","useForSTD","postSettings","setComputeObject","setDataArray","messages","MessageDef","manyErrors","tooFast","notEnough","setMsgObject","getScoreMsg","t","o","s","c","cut","u","getMessage","parcelArray","scoreData","msgMan","Init","l","g","h","p","f","d","v","m","y","trialIData","validate","checkErrors","errorMessage","addPenalty","avgCon1","avgCon2","checkArray","avgAll","avgParcel","diff","avgBoth","varianceAll","varianceParcel","variance","scoreAll","scoreParcel","score","sqrt","computeData","parcelMng","addSettings","computeD","FBMsg","getFBMsg","DScore","postToServer","msg","dynamicPost","APIconstructor","API","sets","camelCase","add_set","setName","settingsObj","addSequence","addGlobal","getGlobal","addCurrent","getCurrent","addScript","defined","ajax","contentType","dataType","injector","setSetter","setArr","targetSets","api","addTrialSets","addTrialSet","addStimulusSets","addStimulusSet","addMediaSets","addMediaSet","getLogs"],"mappings":"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","sourcesContent":["/*jshint unused: vars */\ndefine('config',[],function(){\n\n\t// just make sure console is available\n\t// It prevents stuff from breaking\n\tvar noop = function(){};\n\twindow.console || (window.console = {});\n\twindow.console.log || (window.console.log = noop);\n\twindow.console.warn || (window.console.warn = noop);\n\n\trequire.config({\n\t\tpaths: {\n\t\t\t// libs\n\t\t\tunderscore: [\"//cdnjs.cloudflare.com/ajax/libs/lodash.js/3.5.0/lodash.min\",\"../../bower_components/lodash-compat/lodash.min\"],\n\t\t\t//angular: '../../bower_components/angular/angular',\n\t\t\tangular: ['//ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular.min','../../bower_components/angular/angular.min'],\n\t\t\tanimate: ['//ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular-animate.min', '../../bower_components/angular-animate/angular-animate.min'],\n\t\t\ttext: ['//cdnjs.cloudflare.com/ajax/libs/require-text/2.0.10/text.min','../../bower_components/requirejs-text/text'],\n\n\t\t\t// this lib is needed for pipScorer\n\t\t\tjquery: [\"//cdnjs.cloudflare.com/ajax/libs/jquery/1.10.2/jquery.min\",\"../../bower_components/jquery/dist/jquery.min\"]\n\t\t},\n\n\t\tpackages:[\n\t\t\t{\n\t\t\t\tname: 'pipScorer',\n\t\t\t\tlocation: '../../bower_components/PIPlayer/dist/js/extensions/dscore',\n\t\t\t\tmain: 'Scorer'\n\t\t\t}\n\t\t],\n\t\tshim: {\n\t\t\tangular : {exports : 'angular'},\n\t\t\tanimate : {deps: ['angular'], exports: 'angular'}\n\t\t},\n\t\tdeps: [\n\t\t\t// The APIs are preloaded into the app so we don't have to set them as dependencies here\n\t\t\t'angular', 'animate', 'underscore','text'\n\t\t]\n\t});\n\n\t//http://code.angularjs.org/1.2.1/docs/guide/bootstrap#overview_deferred-bootstrap\n\twindow.name = 'NG_DEFER_BOOTSTRAP!';\n});\n","/*jshint unused: vars */\ndefine('bootstrap',['./config'], function(){\n\n\trequire.config({\n\t\tpackages: [\n\t\t\t{name: 'pipAPI', location:'APIs', main:'pipAPI'},\n\t\t\t{name: 'questAPI', location:'APIs', main:'questAPI'},\n\t\t\t{name: 'managerAPI', location:'APIs', main:'managerAPI'}\n\t\t]\n\t});\n\n\t// resume boot strap\n\t// http://stackoverflow.com/a/25770449/1400366\n\t// The angular.js detects dom ready via JQLite. When the document loads, it triggers a method which defines the resumeBootstrap method.\n\t// The problem is that you cannot enforce processing order between domready and JQLite ready,\n\t// if domready already fulfills your dependency before the method gets defined, you are in trouble.\n\t// The workaround is to enforce javascript to execute all event handlers before your resumeBootstrap invocation.\n\t// I've used the setTimeout method to do so, e.g.: setTimeout(angular.resumeBootstrap, 0).\n\trequire(['angular','app'], function(angular, app) {\n\t\tangular.element().ready(function() {\n\t\t\tsetTimeout(function(){\n\t\t\t\tangular.resumeBootstrap([app.name]);\n\t\t\t},0);\n\t\t});\n\t});\n});\n","/**\n * a stopper\n */\n\ndefine('utils/timer/timerStopper',[],function(){\n\n\tstopperProvider.$inject = ['timerNow'];\n\tfunction stopperProvider(now){\n\t\tfunction Stopper(){\n\t\t\tthis.startTime = now();\n\t\t}\n\n\t\tStopper.prototype.now = function(){\n\t\t\treturn now() - this.startTime;\n\t\t};\n\n\t\treturn Stopper;\n\t}\n\n\treturn stopperProvider;\n\n});\n","/**\n * The piTimer directive lies dormant on its parent element\n * When \"start(options)\" is called it starts a timer\n *\n * options:\n * direction: up/down (default)\n * show: display counter\n * remove: remove counter when timer ends\n * duration: how long...\n *\n */\ndefine('utils/timer/timerDirective',['require','underscore','angular'],function (require) {\n\n\tvar _ = require('underscore');\n\tvar angular = require('angular');\n\n\ttimerController.$inject = ['$timeout','timerStopper'];\n\tfunction timerController($timeout, TimerStopper){\n\t\tvar ctrl = this;\n\t\tvar $scope = {}; // the local scope that we created (fake object for case we attempt to access scope before we set it...)\n\t\tctrl.start = timerStart;\n\t\tctrl.stop = timerStop;\n\n\t\tfunction timerStart(options){\n\t\t\tif (!_.isPlainObject(options)){\n\t\t\t\tthrow new Error('Timer options must be an object');\n\t\t\t}\n\n\t\t\t$scope = ctrl.getScope(); // get the local scope that we created\n\n\t\t\t$scope.options = _.defaults(options, {\n\t\t\t\tdirection : 'down',\n\t\t\t\ttemplate : 'normal',\n\t\t\t\tshow : true,\n\t\t\t\tremoveOnEnd : true,\n\t\t\t\tduration : 0 // in seconds\n\t\t\t});\n\n\t\t\t// translate duratio to ms\n\t\t\tctrl.stopper = new TimerStopper();\n\t\t\tctrl.targetTime = $scope.options.duration * 1000;\n\n\t\t\t$scope.options.show && ctrl.show();\n\n\t\t\t// activate the timer\n\t\t\ttick();\n\t\t}\n\n\t\tfunction timerStop(){\n\t\t\tvar options = $scope.options || {};\n\t\t\t$scope = ctrl.getScope(); // get the local scope that we created\n\t\t\t$timeout.cancel(ctrl.timeoutId);\n\t\t\toptions.removeOnEnd && ctrl.remove();\n\t\t}\n\n\t\tfunction tick(){\n\t\t\t// update scope\n\t\t\tvar INTERVAL = 100;\n\t\t\tvar options = $scope.options;\n\t\t\tvar now = ctrl.stopper.now();\n\t\t\tvar timeLeft = ctrl.targetTime - now;\n\n\n\t\t\tif (now >= ctrl.targetTime){\n\t\t\t\t$scope.$emit('timer-end');\n\t\t\t\toptions.removeOnEnd && ctrl.remove();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// time to show and parse\n\t\t\tvar currentTime = options.direction === 'up' ? now : timeLeft;\n\n\t\t\t// update scope with times\n\t\t\t_.extend($scope, milisToTime(currentTime));\n\t\t\tctrl.timeoutId = $timeout(tick, Math.min(INTERVAL,timeLeft));\n\t\t\t$scope.$emit('timer-tick');\n\t\t}\n\n\t\tfunction milisToTime(time){\n\t\t\tvar secs = Math.floor(time/1000);\n\t\t\tvar hours = Math.floor(secs / (60 * 60));\n\n\t\t\tvar divisor_for_minutes = secs % (60 * 60);\n\t\t\tvar minutes = Math.floor(divisor_for_minutes / 60);\n\n\t\t\tvar divisor_for_seconds = divisor_for_minutes % 60;\n\t\t\tvar seconds = Math.ceil(divisor_for_seconds);\n\n\t\t\tvar obj = {\n\t\t\t\tcurrent: time,\n\t\t\t\thours: hours,\n\t\t\t\tminutes: minutes,\n\t\t\t\tseconds: seconds,\n\t\t\t\tmilis: time % 1000\n\t\t\t};\n\t\t\treturn obj;\n\t\t}\n\t}\n\n\ttimerDirective.$inject = ['$compile'];\n\tfunction timerDirective($compile){\n\t\treturn {\n\t\t\tcontroller: timerController,\n\t\t\tpriority: 400,\n\t\t\tlink: function($scope, $element,$attr,ctrl){\n\t\t\t\tvar template = '<div class=\"pi-timer well well-sm text-center\" style=\"font-family: monospace;\">{{minutes}}:{{zeroPad(seconds)}}</div>';\n\t\t\t\tvar $timerElement;\n\t\t\t\tvar localScope = $scope.$new();\n\n\t\t\t\tctrl.show = show;\n\t\t\t\tctrl.remove = remove;\n\t\t\t\tctrl.getScope = function(){return localScope;};\n\n\t\t\t\tlocalScope.zeroPad = function pad(n){return n<10 ? '0'+n : n;};\n\t\t\t\t$scope.$on('$destroy',remove);\n\n\t\t\t\tfunction show(){\n\t\t\t\t\t$timerElement = angular.element(template);\n\t\t\t\t\t$element.prepend($timerElement);\n\t\t\t\t\t$compile($timerElement.contents())(localScope);\n\t\t\t\t}\n\n\t\t\t\tfunction remove(){\n\t\t\t\t\t$timerElement && $timerElement.remove();\n\t\t\t\t\t$timerElement = null;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\treturn timerDirective;\n});\n","/* global performance */\n\n/**\n * Returns current time (uses performance if possible).\n * Notably, this function return either time since epoch or since startup. It is useful only for latency calculations.\n * @return {integer} [Time in ms]\n */\ndefine('utils/timer/timerNow',[],function(){\n\n\tvar nowFn;\n\n\t// if performance is set, look for the now function\n\tif (!!window.performance) {\n\t\tnowFn = performance.now ||\n\t\tperformance.mozNow ||\n\t\tperformance.webkitNow ||\n\t\tperformance.msNow ||\n\t\tperformance.oNow;\n\t}\n\n\t// if we have now proxy it (so it uses perfomance as \"this\")\n\t// otherwise use regular date/time\n\treturn nowFn ?\n\t\tfunction now(){return nowFn.apply(performance);}\n\t\t: function now(){ return +new Date();};\n\n});\n","define('utils/timer/timer-module',['require','angular','./timerStopper','./timerDirective','./timerNow'],function(require){\n\tvar angular = require('angular');\n\tvar module = angular.module('timer',[]);\n\n\tmodule.service('timerStopper', require('./timerStopper'));\n\tmodule.directive('piTimer', require('./timerDirective'));\n\tmodule.value('timerNow', require('./timerNow'));\n\n\treturn module;\n});\n","define('utils/utils/preloaderService',['require','underscore'],function(require){\n\tvar _ = require('underscore');\n\n\tpreloaderService.$inject = ['$q'];\n\tfunction preloaderService($q){\n\t\tthis.$q = $q;\n\t\tthis.loaders = {};\n\t\tthis.loaded = [];\n\t}\n\n\t_.extend(preloaderService.prototype, {\n\t\tregister: preloaderRegister,\n\t\tload: preloaderLoad,\n\t\tloadArr: preloaderLoadArr,\n\t\tget: preloaderGet,\n\t\tgetObj: preloaderGetObj\n\t});\n\n\treturn preloaderService;\n\n\t/**\n\t * register loader\n\t * loader functions take a single parameter: the description\n\t * and return a promise to be resolved with the result.\n\t *\n\t * @param  {String}   type The loader type\n\t * @param  {Function} fn   The loader function itself (should return a promise to be resolved with the result)\n\t */\n\tfunction preloaderRegister(type, fn){\n\t\tif (!_.isFunction(fn)){\n\t\t\tthrow new Error('Fn is not a function');\n\t\t}\n\n\t\tthis.loaders[type] = fn;\n\t}\n\n\tfunction preloaderLoad(type, description){\n\t\tvar loader = this.loaders[type];\n\t\tvar promise, resultObj;\n\n\t\t// check if this description has already been loaded\n\t\tresultObj = this.getObj(type, description);\n\t\tif (!resultObj){\n\t\t\tresultObj = {type:type, description:description};\n\t\t\tthis.loaded.push(resultObj);\n\t\t} else {\n\t\t\treturn resultObj.promise;\n\t\t}\n\n\t\t// make sure loader was registered\n\t\tif (!_.isFunction(loader)){\n\t\t\tthrow new Error('Loader \"' + type + '\" was not registered.');\n\t\t}\n\n\t\t// call loader\n\t\tpromise = resultObj.promise = loader.call(this, description);\n\n\t\t// make sure loader returns a promise\n\t\tif (!isPromiseLike(promise)){\n\t\t\tthrow new Error('Loader \"' + type + '\" must return a promise.');\n\t\t}\n\n\t\t// save result into the loaded array (we use an array in order to allow non string descriptions)\n\t\tpromise.then(function(result){\n\t\t\tresultObj.promise = null; // so that the promise can be garbage collected\n\t\t\tresultObj.value = result;\n\t\t\treturn result;\n\t\t});\n\n\t\treturn promise;\n\t}\n\n\tfunction preloaderLoadArr(type, descriptions){\n\t\tvar $q = this.$q;\n\t\tvar defs;\n\n\t\tif (!_.isArray(descriptions)){\n\t\t\tthrow new Error('descriptions must be an array.');\n\t\t}\n\n\t\tdefs = _.map(descriptions, function(description){\n\t\t\treturn this.load(type, description);\n\t\t}, this);\n\n\t\treturn $q.all(defs);\n\t}\n\n\tfunction preloaderGetObj(type, description){\n\t\t// get the\n\t\tvar result = _.find(this.loaded, function(loadObj){\n\t\t\treturn loadObj.type === type && loadObj.description === description;\n\t\t}, this);\n\n\t\treturn result;\n\t}\n\n\tfunction preloaderGet(type, description){\n\t\tvar result = this.getObj(type, description);\n\n\t\tif (!('value' in result)){\n\t\t\tthrow new Error('This object has not been loaded yet: \"' + description + '\"');\n\t\t}\n\n\t\treturn result.value;\n\t}\n\n\tfunction isPromiseLike(obj){\n\t\treturn _.isPlainObject(obj) && _.isFunction(obj.then);\n\t}\n});\n","define('utils/utils/preloaderDecorator',['require','underscore'],function(require){\n\tvar _ = require('underscore');\n\n\tpreloaderDecorator.$inject = ['$delegate'];\n\tfunction preloaderDecorator(preloader){\n\t\tpreloader.register('image', imageLoader);\n\t\treturn preloader;\n\t}\n\n\tfunction imageLoader(url){\n\t\tvar def = this.$q.defer();\n\t\tvar img = new Image();\t// create img object\n\t\timg.onload = _.bind(def.resolve, def, img);\n\t\timg.onerror = _.bind(def.reject, def, img);\n\t\timg.src = url;\n\t\treturn def.promise;\n\t}\n\n\treturn preloaderDecorator;\n});\n","define('utils/utils/utilsModule',['require','angular','underscore','./preloaderService','./preloaderDecorator'],function(require){\n\tvar angular = require('angular');\n\tvar _ = require('underscore');\n\tvar module = angular.module('pi.utils',[]);\n\n\tmodule.service('piPreloader', require('./preloaderService'));\n\tmodule.config(['$provide', function($provide){\n\t\t$provide.decorator('piPreloader', require('./preloaderDecorator'));\n\t}]);\n\n\n\n\t/**\n\t * Wrapper for angular invoke.\n\t * Injects global and current automatically.\n\t *\n\t * @param {Function} fn The function to invoke\n\t * @param {Object} locals Locals to add to angualr invoke\n\t */\n\tmodule.service('piInvoke', ['$injector',function($injector){\n\t\tvar $rootScope = $injector.get('$rootScope');\n\n\t\tfunction piInvoke(fn, locals){\n\t\t\tvar global = $rootScope.global || {};\n\n\t\t\t// if fn is undefined don't get all mushy about it\n\t\t\tif (!fn){\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t$injector.invoke(fn, null, _.extend(locals, {\n\t\t\t\tglobal: global,\n\t\t\t\tcurrent: global.current\n\t\t\t}));\n\t\t}\n\n\t\treturn piInvoke;\n\t}]);\n\n\treturn module;\n});\n","define('quest/directives/buttons/buttons',['require','angular'],function(require){\n\tvar angular = require('angular');\n\treturn angular\n\n\t.module('ui.bootstrap.buttons', [])\n\n\t.constant('buttonConfig', {\n\t\tactiveClass: 'active',\n\t\ttoggleEvent: 'click'\n\t})\n\n\t.controller('ButtonsController', ['buttonConfig', function(buttonConfig) {\n\t\tthis.activeClass = buttonConfig.activeClass || 'active';\n\t\tthis.toggleEvent = buttonConfig.toggleEvent || 'click';\n\t}])\n\n\t.directive('btnRadio', function () {\n\t\treturn {\n\t\t\trequire: ['btnRadio', 'ngModel'],\n\t\t\tcontroller: 'ButtonsController',\n\t\t\tlink: function (scope, element, attrs, ctrls) {\n\t\t\t\tvar buttonsCtrl = ctrls[0], ngModelCtrl = ctrls[1];\n\n\t\t\t\t//model -> UI\n\t\t\t\tngModelCtrl.$render = function () {\n\t\t\t\t\telement.toggleClass(buttonsCtrl.activeClass, angular.equals(ngModelCtrl.$modelValue, scope.$eval(attrs.btnRadio)));\n\t\t\t\t};\n\n\t\t\t\t//ui->model\n\t\t\t\telement.bind(buttonsCtrl.toggleEvent, function () {\n\t\t\t\t\tvar isActive = element.hasClass(buttonsCtrl.activeClass);\n\n\t\t\t\t\tif (!isActive || angular.isDefined(attrs.uncheckable)) {\n\t\t\t\t\t\tscope.$apply(function () {\n\t\t\t\t\t\t\tngModelCtrl.$setViewValue(isActive ? null : scope.$eval(attrs.btnRadio));\n\t\t\t\t\t\t\tngModelCtrl.$render();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t})\n\n\t.directive('btnCheckbox', function () {\n\t\treturn {\n\t\t\trequire: ['btnCheckbox', 'ngModel'],\n\t\t\tcontroller: 'ButtonsController',\n\t\t\tlink: function (scope, element, attrs, ctrls) {\n\t\t\t\tvar buttonsCtrl = ctrls[0], ngModelCtrl = ctrls[1];\n\n\t\t\t\tfunction getTrueValue() {\n\t\t\t\t\treturn getCheckboxValue(attrs.btnCheckboxTrue, true);\n\t\t\t\t}\n\n\t\t\t\tfunction getFalseValue() {\n\t\t\t\t\treturn getCheckboxValue(attrs.btnCheckboxFalse, false);\n\t\t\t\t}\n\n\t\t\t\tfunction getCheckboxValue(attributeValue, defaultValue) {\n\t\t\t\t\tvar val = scope.$eval(attributeValue);\n\t\t\t\t\treturn angular.isDefined(val) ? val : defaultValue;\n\t\t\t\t}\n\n\t\t\t\t//model -> UI\n\t\t\t\tngModelCtrl.$render = function () {\n\t\t\t\t\telement.toggleClass(buttonsCtrl.activeClass, angular.equals(ngModelCtrl.$modelValue, getTrueValue()));\n\t\t\t\t};\n\n\t\t\t\t//ui->model\n\t\t\t\telement.bind(buttonsCtrl.toggleEvent, function () {\n\t\t\t\t\tscope.$apply(function () {\n\t\t\t\t\t\tngModelCtrl.$setViewValue(element.hasClass(buttonsCtrl.activeClass) ? getFalseValue() : getTrueValue());\n\t\t\t\t\t\tngModelCtrl.$render();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t});\n});\n","define('utils/database/template/templateFilter',['require','underscore'],function(require){\n\tvar _ = require('underscore');\n\n\ttemplateFilter.$inject = ['$log','templateDefaultContext'];\n\tfunction templateFilter($log, defaultContext){\n\n\t\tfunction template(input, context){\n\n\t\t\t// if there is no template just return the string\n\t\t\tif (!~input.indexOf('<%')){\n\t\t\t\treturn input;\n\t\t\t}\n\n\t\t\t// build context (extend it with the default context)\n\t\t\tcontext = _.extend(context || {}, defaultContext);\n\n\t\t\t// filters don't throw errors when used from within templates\n\t\t\t// therefore we need catch any errors here... (we may decide to drop this if it hits performance too mutch...)\n\t\t\ttry{\n\t\t\t\treturn _.template(input)(context);\n\t\t\t} catch(e){\n\t\t\t\t$log.error(\"ERROR: \\\"\" + e.message + \"\\\" in the following template: \", input);\n\t\t\t\treturn \"\";\n\t\t\t}\n\n\t\t}\n\n\t\treturn template;\n\n\t}\n\n\treturn templateFilter;\n});\n","define('utils/database/template/templateObjProvider',['require','underscore'],function(require){\n\tvar _ = require('underscore');\n\n\ttemplateObjProvider.$inject = ['$filter'];\n\tfunction templateObjProvider($filter){\n\t\tvar filter = $filter('template');\n\n\t\tfunction templateObj(obj, context, options){\n\t\t\toptions || (options = {});\n\t\t\tvar deepTemplate = obj.deepTemplate;\n\n\t\t\t_.forEach(obj, function(value,key,obj){\n\t\t\t\tobj[key] = expand(value, context, {deep: _.includes(deepTemplate, key)});\n\t\t\t});\n\n\t\t\treturn obj;\n\t\t}\n\n\t\treturn templateObj;\n\n\t\tfunction expand(value, context, options){\n\t\t\tvar deep = options && options.deep;\n\n\t\t\tif (_.isString(value)){\n\t\t\t\treturn filter(value, context);\n\t\t\t}\n\n\t\t\tif (deep && _.isArray(value)){\n\t\t\t\treturn _.map(value, _.bind(expand, null, _, context, options));\n\t\t\t}\n\n\t\t\tif (deep && _.isPlainObject(value)){\n\t\t\t\treturn _.mapValues(value, _.bind(expand, null, _, context, options));\n\t\t\t}\n\n\t\t\treturn value;\n\t\t}\n\n\t}\n\n\n\treturn templateObjProvider;\n});\n","define('utils/database/template/templateModule',['require','angular','./templateFilter','./templateObjProvider'],function(require){\n\tvar angular = require('angular');\n\n\tvar module = angular.module('template', []);\n\n\tmodule.filter('template', require('./templateFilter'));\n\tmodule.service('templateObj', require('./templateObjProvider'));\n\tmodule.constant('templateDefaultContext',{});\n\n\treturn module;\n});\n","/**\n * A factory for $console\n *\n * each $console is prototyped on `consolePrototype`\n */\ndefine('utils/console/consoleProvider',['require','underscore'],function(require){\n\tvar _ = require('underscore');\n\n\tconsoleProvider.$inject = ['piConsolePrototype'];\n\n\tfunction consoleProvider(consolePrototype){\n\n\t\t// decorate Console with a simple settings manager\n\t\tConsole.setSettings = consoleSetSettings;\n\n\t\treturn Console;\n\n\t\tfunction Console(tags, force){\n\t\t\tvar $console = _.create(consolePrototype);\n\n\t\t\t_.extend($console, {\n\t\t\t\ttags: _.isArray(tags) ? tags : [tags], // make sure tags is an array\n\t\t\t\tforce: !!force\n\t\t\t});\n\n\t\t\treturn $console;\n\t\t}\n\n\t\t// a mehtod of console\n\t\tfunction consoleSetSettings (settings) {\n\t\t\tconsolePrototype.settings = settings;\n\t\t}\n\n\t}\n\n\treturn consoleProvider;\n});\n","/**\n * This is our $console object.\n * It is a bit weird as it is supposed to work in concert with the consoleProvider.\n *\n * it depends on `tags` {Array} and `force` {Boolean} to be set externaly.\n *\n * {\n * \t\tlog: logFn\n * \t\tinfo: infoFn\n * \t\tshouldLog: fn that test whether as specific level should be logged\n * \t\tsettings: settingsObj ==> to be set from piConsole\n * \t\ttags: ['tag1'] // to be compared to settings.tags ==> to be set from piConsole\n * \t\tforce: false // ignore tags and level ==> to be set from piConsole\n * }\n */\ndefine('utils/console/consolePrototypeProvider',['require','underscore'],function(require){\n\n\tvar _ = require('underscore');\n\tvar LOGFUNCTIONS = ['log', 'info', 'warn', 'error', 'debug'];\n\tvar LEVELS = {none:9, error:1, warn:2, info:3, log:4, debug:4};\n\n\tconsolePrototypeProvider.$inject = ['$log', '$rootScope'];\n\tfunction consolePrototypeProvider ($log, $rootScope) {\n\t\t/**\n\t\t * Create the prototype for the instances of piConsole\n\t\t */\n\t\tvar consolePrototype = {};\n\n\t\t// add logging function\n\t\t_.each(LOGFUNCTIONS, function(level){\n\t\t\tconsolePrototype[level] = createLog(level);\n\t\t});\n\n\t\t// default settings\n\t\tconsolePrototype.settings = {};\n\n\t\t// the function that checks if this instance\n\t\tconsolePrototype.shouldLog = shouldLog;\n\n\t\t// if we want the individual functions to be seperable sometime...\n\t\t//_.bindAll(consolePrototype);\n\n\t\treturn consolePrototype;\n\n\t\t/**\n\t\t * This function is a method of the consolePrototype.\n\t\t * It accesses the global settings, and the definitions set by Console and returns whether we should log\n\t\t *\n\t\t * @param  {String} level \tThe level of logging we are testing\n\t\t * @return {Boolean}\t\tWhether to log this or not\n\t\t */\n\t\tfunction shouldLog(level){\n\t\t\tvar targetLevel = this.settings.level || 'error'; // levels set to show\n\t\t\tvar targetTags = this.settings.tags || 'all'; // tags set to show\n\t\t\tvar tags = this.tags;\n\t\t\tvar force = this.force;\n\n\t\t\tif (force){\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// check if this level should *not* be logged\n\t\t\tif (!~_.indexOf(LOGFUNCTIONS, targetLevel)){\n\t\t\t\tthis.settings.level = 'error';\n\t\t\t\tthis.error('Unknow DEBUG level: \"' + targetLevel + '\". The valid levels are debug>info>warn>error>none');\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (LEVELS[level] > LEVELS[targetLevel]){\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// check if these tags should be logged (fit targetTags)\n\t\t\tif (targetTags !== 'all' && !_.intersection(tags, _.isArray(targetTags) ? targetTags : [targetTags]).length){\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// if we were not regected, this should be logged\n\t\t\treturn true;\n\t\t}\n\n\t\t/**\n\t\t * Builds the log functions for consolePrototype\n\t\t * @param  {String} level \tLevel name\n\t\t * @return {Function}       A logging function\n\t\t */\n\t\tfunction createLog (level) {\n\t\t\treturn function(){\n\t\t\t\tvar settings = this.settings;\n\t\t\t\tvar i, args = [];\n\n\t\t\t\tif (this.shouldLog(level)){\n\t\t\t\t\t// get arguments (so that we don't leak the arguments object)\n\t\t\t\t\tfor (i=0; i < arguments.length; i++){args[i] = arguments[i];}\n\n\t\t\t\t\t// do the actual logging\n\t\t\t\t\t$log[level].apply(null, args);\n\n\t\t\t\t\tif (settings.hideConsole){return;}\n\n\t\t\t\t\t// broadcast to the piConsole directive\n\t\t\t\t\t$rootScope.$emit('console:log',{\n\t\t\t\t\t\ttime: new Date(),\n\t\t\t\t\t\ttype: level,\n\t\t\t\t\t\targs: args,\n\t\t\t\t\t\ttags: this.tags\n\t\t\t\t\t});\n\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n\n\treturn consolePrototypeProvider;\n\n});\n","\ndefine('text!utils/console/console.html',[],function () { return '<div>\\n\\t<div\\n\\t\\tng-repeat=\"log in logs | orderBy:\\'time\\':true\"\\n\\t\\tclass=\"alert\"\\n\\t\\tng-class=\"{\\n\\t\\t\\t\\'alert-warning\\':log.type == \\'warn\\',\\n\\t\\t\\t\\'alert-danger\\':log.type == \\'error\\',\\n\\t\\t\\t\\'alert-info\\':log.type == \\'info\\',\\n\\t\\t\\t\\'alert-success\\':log.type == \\'log\\',\\n\\t\\t\\t\\'alert-success\\':log.type == \\'debug\\'\\n\\n\\t\\t}\"\\n\\t\\trole=\"alert\"\\n\\t>\\n\\t\\t<button ng-click=\"remove(log)\" type=\"button\" class=\"close\" data-dismiss=\"alert\"><span aria-hidden=\"true\">&times;</span><span class=\"sr-only\">Close</span></button>\\n\\t\\t<strong>{{ log.type | uppercase}}:</strong> <i class=\"text-danger\">{{log.time | date : \\'HH:mm:ss:sss\\'}}</i> - <strong>{{log.tags.join(\\' \\')}}</strong>:</br>\\n\\t\\t<span\\n\\t\\t\\tng-repeat=\"arg in log.args track by $index\"\\n\\t\\t\\tng-click=\"pre = !pre\"\\n\\t\\t\\tng-class=\"{pre:pre}\"\\n\\t\\t\\tng-bind-html=\"arg | stringify:pre\"\\n\\t\\t></span>\\n\\n\\t</div>\\n</div>';});\n\n","define('utils/console/consoleDirective',['require','text!./console.html','underscore'],function (require) {\n\t// This is the only way to get a non js file relatively\n\tvar template = require('text!./console.html');\n\tvar _ = require('underscore');\n\n\tdirective.$inject = ['$rootScope'];\n\tfunction directive($rootScope){\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplate:template,\n\t\t\tlink: function(scope) {\n\t\t\t\tvar logs = scope.logs = [];\n\n\t\t\t\tscope.remove = remove;\n\t\t\t\tscope.reverse = true;\n\n\t\t\t\t$rootScope.$on('console:log', function(scope, log){\n\t\t\t\t\tlogs.push(log);\n\t\t\t\t});\n\n\t\t\t\tfunction remove(log){\n\t\t\t\t\tvar index = _.indexOf(logs, log);\n\t\t\t\t\tif (index > -1) {\n\t\t\t\t\t\tlogs.splice(index, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\treturn directive;\n});\n","define('utils/console/consoleModule',['require','angular','./consoleProvider','./consolePrototypeProvider','./consoleDirective'],function(require){\n\tvar angular = require('angular');\n\tvar module = angular.module('piConsole',[]);\n\n\tmodule.service('piConsole', require('./consoleProvider'));\n\tmodule.service('piConsolePrototype', require('./consolePrototypeProvider'));\n\tmodule.directive('piConsole', require('./consoleDirective'));\n\n\tmodule.filter('stringify', function(){\n\t\treturn stringify;\n\t});\n\n\treturn module;\n\n\tfunction stringify(value, pretty) {\n\t\tif (value == null) { // null || undefined\n\t\t\treturn '<i class=\"text-muted\">undefined</i>';\n\t\t}\n\t\tif (value === '') {\n\t\t\treturn '<i class=\"text-muted\">an empty string</i>';\n\t\t}\n\n\t\tswitch (typeof value) {\n\t\t\tcase 'string':\n\t\t\t\tbreak;\n\t\t\tcase 'number':\n\t\t\t\tvalue = '' + value;\n\t\t\t\tbreak;\n\t\t\tcase 'object':\n\t\t\t\t// display the error message not the full thing...\n\t\t\t\tif (value instanceof Error){\n\t\t\t\t\tvalue = value.message;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t/* fall through */\n\t\t\tdefault:\n\t\t\t\tvalue = '<a href=\"javascript:void(0)\">' + angular.toJson(value, !!pretty) + '</a>';\n\t\t}\n\n\t\treturn value;\n\t}\n});\n\n\n\n","\ndefine('text!utils/modal/modal.html',[],function () { return '<div class=\"modal in\" id=\"myModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\">\\n\\t<div class=\"modal-dialog\">\\n\\t\\t<div class=\"modal-content\">\\n\\t\\t\\t<div class=\"modal-header\" ng-ifs=\"header\">\\n\\t\\t\\t\\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" ng-click=\"close()\"><span aria-hidden=\"true\">&times;</span></button>\\n\\t\\t\\t\\t<h4 class=\"modal-title\" id=\"myModalLabel\">{{ header || \"Heads Up!\" }}</h4>\\n\\t\\t\\t</div>\\n\\t\\t\\t<div class=\"modal-body\">{{body}}</div>\\n\\t\\t\\t<div class=\"modal-footer\">\\n\\t\\t\\t\\t<button type=\"button\" class=\"btn btn-default\" ng-click=\"close()\">{{button || \"Close\"}}</button>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t</div>\\n</div>';});\n\n","define('utils/modal/modalService',['require','underscore','text!./modal.html','angular'],function(require){\n\n\tvar _ = require('underscore');\n\tvar template = require('text!./modal.html');\n\n\tvar angular = require('angular');\n\n\tmodalConstructor.$inject = ['$rootScope', '$rootElement', '$compile', '$q', '$document'];\n\tfunction modalConstructor($rootScope, $rootElement, $compile, $q, $document){\n\t\tvar $element, $scope, deferred;\n\t\tvar $backDrop = angular.element('<div class=\"modal-backdrop in\"/>');\n\n\t\tthis.open = modalOpener;\n\t\tthis.close = modalCleanup;\n\n\t\tfunction modalCleanup(){\n\t\t\tif ($element){\n\t\t\t\t$element.remove();\n\t\t\t}\n\n\t\t\tif ($scope){\n\t\t\t\t$scope.$destroy();\n\t\t\t}\n\n\t\t\tif (deferred){\n\t\t\t\tdeferred.resolve();\n\t\t\t}\n\n\t\t\t$backDrop.remove();\n\t\t\t$document.off('keydown', modalCleanup);\n\t\t\t$rootElement.removeClass('modal-open');\n\t\t}\n\n\t\tfunction modalOpener(options){\n\t\t\tvar context = options.context || {};\n\n\t\t\t// close any existing modals\n\t\t\tmodalCleanup();\n\n\t\t\t// create deferred\n\t\t\tdeferred = $q.defer();\n\n\t\t\t// create new scope\n\t\t\t$scope = (options.$scope || $rootScope).$new();\n\t\t\t// set up scope methods\n\t\t\t$scope.close = modalCleanup;\n\t\t\t$document.on('keydown', modalCleanup);\n\n\n\t\t\t// set scope texts + template\n\t\t\t$scope.header = _.template(options.header)(context);\n\t\t\t$scope.body = _.template(options.body)(context);\n\t\t\t$scope.button = _.template(options.button)(context);\n\n\t\t\t// create new element\n\t\t\t$element = angular.element(template);\n\t\t\t$rootElement.addClass('modal-open');\n\n\t\t\t// compile and activate\n\t\t\t$rootElement.prepend($backDrop);\n\t\t\t$rootElement.prepend($element);\n\t\t\t$compile($element.contents())($scope);\n\t\t\t$scope.$digest();\n\n\t\t\treturn deferred.promise;\n\t\t}\n\n\t\tfunction onEsc(e){\n\t\t\tvar which = e.which || e.keyCode;\n\n\t\t\tif(which == 27) {\n\t\t\t\t$document.one('keydown', skipListener);\n\t        }\n\n\t\t}\n\t}\n\n\treturn modalConstructor;\n\n});\n","define('utils/modal/modalModule',['require','angular','./modalService'],function(require){\n\n\tvar angular = require('angular');\n\tvar module = angular.module('pi.modal',[]);\n\n\tmodule.service('piModal', require('./modalService'));\n\n\treturn module;\n});\n","/**\n * This is the default controller for all questions.\n * It exposes the local scope, and a `value` method that the harvester can use.\n */\n\ndefine('quest/directives/questController',['require','underscore'],function(require){\n\tvar _ = require('underscore');\n\n\tquestController.$inject = ['$scope', 'timerStopper', '$parse', '$attrs','piConsole', 'piInvoke', '$rootScope'];\n\tfunction questController($scope, Stopper, $parse, $attr, piConsole, invoke, $rootScope){\n\t\tvar self = this;\n\t\tvar log;\n\t\tvar data;\n\t\tvar defaults = {\n\t\t\tdflt: NaN,\n\t\t\tdata: $scope.data\n\t\t};\n\n\t\tthis.scope = $scope;\n\t\tthis.stopper = new Stopper();\n\n\n\t\tthis.registerModel = registerModel;\n\n\t\t/**\n\t\t * Listen for quest events\n\t\t */\n\t\t$scope.$on('quest:submit', function(event){\n\t\t\tevent.preventDefault();\n\t\t\tlog.declined = undefined;\n\t\t\tlog.submitLatency = self.stopper.now();\n\t\t\tinvoke(data.onSubmit, {log:log});\n\t\t});\n\n\t\t$scope.$on('quest:decline', function(event){\n\t\t\tevent.preventDefault();\n\t\t\tlog.declined = true;\n\t\t\tlog.submitLatency = self.stopper.now();\n\t\t\tinvoke(data.onDecline, {log:log});\n\t\t});\n\n\t\t$scope.$on('quest:timeout', function(event){\n\t\t\tevent.preventDefault();\n\t\t\tlog.timeout = true;\n\t\t\tinvoke(data.onTimeout, {log:log});\n\t\t});\n\n\n\t\t/**\n\t\t * Get the model and options from the directive\n\t\t * @param  {Object} ngModel\n\t\t * @param  {Object} options\n\t\t */\n\t\tfunction registerModel(ngModel, options){\n\t\t\toptions = _.defaults(options || {}, defaults);\n\t\t\tdata = options.data;\n\n\t\t\tvar ngModelGet = $parse($attr.ngModel);\n\t\t\tvar dfltValue = data.hasOwnProperty('dflt') ? data.dflt : options.dflt;\n\n\t\t\t// make model accesable from within scope\n\t\t\t$scope.model = ngModel;\n\n\t\t\t// has to be evaluated in the context of the parent scope because we're assuming that the quest directives have an isolated scope\n\t\t\tlog = ngModelGet($scope.$parent);\n\n\t\t\t// init log\n\t\t\t// ********\n\t\t\t// create log if it doesn't exist yet\n\t\t\tif (_.isUndefined(log)){\n\t\t\t\tlog = {};\n\t\t\t\tngModelGet.assign($scope.$parent, log);\n\t\t\t} else {\n\t\t\t\tpiConsole(['question']).warn('This question has already been in use: \"' + log.name + '\"');\n\t\t\t}\n\n\t\t\t// expose all the stuff...\n\t\t\tself.log = ngModel.$modelValue = log;\n\n\t\t\t_.defaults(log,{\n\t\t\t\tname: data.name,\n\t\t\t\tresponse: dfltValue,\n\t\t\t\t// @TODO: this is a bit fragile and primitive.\n\t\t\t\t// besides, who says this is where \"current\" will be...\n\t\t\t\t// we should probably create a unique ID service of some sort...\n\t\t\t\t// maybe just grab it off of rootscope\n\t\t\t\tserial: _.size($rootScope.current && $rootScope.current.questions)\n\t\t\t});\n\n\t\t\t$scope.response = ngModel.$viewValue = log.response;\n\n\t\t\t// model --> view\n\t\t\t// should probably never be called (since our model is an object and not a primitive)\n\t\t\tngModel.$formatters.push(function(modelValue) {\n\t\t\t\treturn modelValue.response;\n\t\t\t});\n\n\t\t\t// view --> model\n\t\t\tngModel.$parsers.push(function(viewValue){\n\t\t\t\t// don't know exactly why this is needed!\n\t\t\t\t// probably has to do with our use of nested ng-module\n\t\t\t\tif (_.isUndefined(viewValue)){\n\t\t\t\t\treturn log;\n\t\t\t\t}\n\t\t\t\tvar latency = self.stopper.now();\n\n\t\t\t\tlog.response = viewValue;\n\t\t\t\tlog.latency = latency;\n\n\t\t\t\t// if this is the first change\n\t\t\t\tif (!log.pristineLatency){\n\t\t\t\t\tlog.pristineLatency = latency;\n\t\t\t\t}\n\n\t\t\t\treturn log;\n\t\t\t});\n\n\t\t\t$scope.$watch('response',function(newValue, oldValue /*, scope*/){\n\t\t\t\tif (!_.isEqual(newValue, oldValue)){\n\t\t\t\t//if (newValue !== oldValue){\n\t\t\t\t\tngModel.$setViewValue(newValue);\n\t\t\t\t\tinvoke(data.onChange, {log:log});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$scope.$on('$destroy', function(){\n\t\t\t\tinvoke(data.onDestroy, {log:log});\n\t\t\t});\n\n\t\t\tif (data.correct) {\n\t\t\t\tngModel.$parsers.push(correctValidator);\n\t\t\t\tdata.response = correctValidator(this.log);\n\t\t\t}\n\n\t\t\tinvoke(data.onCreate, {log:log});\n\n\t\t\tfunction correctValidator(value) {\n\t\t\t\tvar response = value.response;\n\t\t\t\tvar correctValue = data.correctValue;\n\n\t\t\t\t// make sure numbers are always treated as strings\n\t\t\t\t_.isNumber(correctValue) && (correctValue+=\"\");\n\t\t\t\t_.isNumber(response) && (response+=\"\");\n\n\t\t\t\tif (_.isEqual(correctValue, response)) {\n\t\t\t\t\tngModel.$setValidity('correct', true);\n\t\t\t\t} else {\n\t\t\t\t\tngModel.$setValidity('correct', false);\n\t\t\t\t\t//value.response = dfltValue;\n\t\t\t\t}\n\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t}\n\t}\n\n\treturn questController;\n});\n","\ndefine('text!quest/directives/piQuest/piQuest.html',[],function () { return '<div piq-page ng-module=\"page\"></div>';});\n\n","/**\n * Main tag for piQuest component.\n * All you need in order to use it is set a script in the $rootScope and insert the tag.\n *\n * This directive is responsible for:\n *\t\t1. Creating the task object.\n *\t\t2. Relaying pages from the sequence to piqPage.\n *\t\t3. For now, deal with the end of a task (redirect, callback, broadcast etc. - later this should move into the task)\n *\n * @name piQuest\n\t*/\ndefine('quest/directives/piQuest/piQuest-directive',['require','underscore','text!./piQuest.html','angular'],function (require) {\n\tvar _ = require('underscore');\n\tvar template = require('text!./piQuest.html');\n\tvar jqLite = require('angular').element;\n\n\tpiQuestCtrl.$inject = ['$scope','$rootScope','Task','templateDefaultContext', 'mixerDefaultContext'];\n\tfunction piQuestCtrl($scope, $rootScope, Task, templateDefaultContext, mixerDefaultContext){\n\t\tvar self = this;\n\t\tvar task = self.task = new Task($scope.script);\n\t\tvar defaultContext; // for templates and the mixer\n\t\tvar global = $rootScope.global; // setup in app.run\n\t\tvar current = $rootScope.current || {}; // setup in taskDirective\n\n\t\tcurrent.questions = {};\n\n\t\t// create default context\n\t\tdefaultContext = {\n\t\t\tglobal: global,\n\t\t\tcurrent: current,\n\t\t\tquestions: current.questions\n\t\t};\n\n\t\t// set default contexts\n\t\t_.extend(templateDefaultContext,defaultContext);\n\t\t_.extend(mixerDefaultContext,defaultContext);\n\n\t\t// setup the first page\n\t\ttask.next();\n\n\t\t$scope.$on('quest:next', next);\n\t\t$scope.$on('quest:prev', prev);\n\n\t\t$scope.$on('quest:log', function(event, log, pageData){\n\t\t\ttask.log(log, pageData, $scope.global);\n\t\t});\n\n\t\tfunction next(event, target){\n\t\t\ttask.next(target);\n\t\t\t$scope.$emit('quest:newPage');\n\t\t}\n\n\t\tfunction prev(event, target){\n\t\t\ttask.prev(target);\n\t\t\t$scope.$emit('quest:newPage');\n\t\t}\n\n\t}\n\n\tdirective.$inject = ['$compile', '$animate','$injector','piConsole'];\n\tfunction directive($compile, $animate, $injector, piConsole){\n\t\treturn {\n\t\t\tcontroller: piQuestCtrl,\n\t\t\tterminal:true,\n\t\t\tpriority: 500,\n\t\t\tlink: function(scope, parentElement, attr, ctrl) {\n\t\t\t\tvar task = ctrl.task,\n\t\t\t\t\tcurrentScope,\n\t\t\t\t\tcurrentElement,\n\t\t\t\t\tpreviousElement;\n\n\t\t\t\tscope.$on('quest:refresh', refresh); // just refresh the object\n\t\t\t\tscope.$on('quest:newPage', newPage); // new element, new object and animation\n\t\t\t\tnewPage();\n\n\t\t\t\tfunction cleanupLastPage() {\n\t\t\t\t\tif(previousElement) {\n\t\t\t\t\t\tpreviousElement.remove();\n\t\t\t\t\t\tpreviousElement = null;\n\t\t\t\t\t}\n\t\t\t\t\tif(currentScope) {\n\t\t\t\t\t\tcurrentScope.$destroy();\n\t\t\t\t\t\tcurrentScope = null;\n\t\t\t\t\t}\n\t\t\t\t\tif(currentElement) {\n\t\t\t\t\t\t$animate.leave(currentElement, function() {\n\t\t\t\t\t\t\tpreviousElement = null;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tpreviousElement = currentElement;\n\t\t\t\t\t\tcurrentElement = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfunction newPage(){\n\t\t\t\t\tvar page = task.current();\n\n\t\t\t\t\tif (page){\n\t\t\t\t\t\tvar newScope = scope.$new();\n\t\t\t\t\t\tvar tempElm = jqLite(template); // create a new element here so we can add the animation classes before linking\n\n\t\t\t\t\t\tnewScope.page = page;\n\t\t\t\t\t\taddAnimations(tempElm, page.animate);\n\n\t\t\t\t\t\t// first send away the previous element (if it exists)\n\t\t\t\t\t\tcleanupLastPage();\n\n\t\t\t\t\t\t// enter: new element\n\t\t\t\t\t\tcurrentElement = $compile(tempElm)(newScope);\n\n\t\t\t\t\t\t$animate.enter(currentElement, parentElement);\n\n\t\t\t\t\t\tcurrentScope = newScope;\n\t\t\t\t\t\tcurrentScope.$emit('quest:updated');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcleanupLastPage();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfunction refresh(){\n\t\t\t\t\tcurrentScope.page = task.current();\n\t\t\t\t}\n\n\t\t\t\tfunction addAnimations(element, animationsStr){\n\t\t\t\t\tif (!animationsStr){\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar animations = animationsStr.split(\" \");\n\n\t\t\t\t\t_.each(animations, function(animation){\n\t\t\t\t\t\t// Make sure that this animation exists\n\t\t\t\t\t\tif (!$injector.has(\".\" + animation + '-animation')){\n\t\t\t\t\t\t\tpiConsole(['page','animation']).error('Unknown animation type: \"' + animation + '\"');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t});\n\n\t\t\t\t\telement.addClass(animationsStr);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\treturn directive;\n});\n","\ndefine('text!quest/directives/piQuest/piqPage.html',[],function () { return '<div ng-form name=\"pageForm\" pi-timer>\\n\\t<div pi-timer=\"page.timer\"></div>\\n\\t<div ng-if=\"page.progressBar\" class=\"text-center\" ng-bind-html=\"page.progressBar\"></div>\\n\\t<h3 ng-if=\"page.header\" ng-bind-html=\"page.header\" ng-style=\"page.headerStyle\"></h3>\\n\\t<div ng-bind-html=\"page.text\"></div>\\n\\t<ol ng-class=\"{\\'list-unstyled\\':!page.numbered}\" start=\"{{page.numberStart}}\">\\n\\t\\t<li ng-repeat=\"quest in page.questions\">\\n\\t\\t\\t<div quest-wrapper quest-data=\"quest\" quest-current=\"current\"></div>\\n\\t\\t</li>\\n\\t</ol>\\n\\n\\t<div class=\"pull-right\" ng-class=\"{\\'btn-group\\': !page.v1style, \\'btn-toolbar\\': page.v1style}\">\\n\\t\\t<button\\n\\t\\t\\tng-click=\"prev()\"\\n\\t\\t\\tdata-role=\"submit\"\\n\\t\\t\\tclass=\"btn\"\\n\\t\\t\\tng-if=\"page.prev && page.$meta.number > 1\"\\n\\t\\t>{{page.prevText || \"Go Back\"}}</button>\\n\\n\\t\\t<button\\n\\t\\t\\tng-click=\"submit()\"\\n\\t\\t\\tdata-role=\"submit\"\\n\\t\\t\\tclass=\"btn btn-primary\"\\n\\t\\t\\tng-if=\"!page.noSubmit\"\\n\\t\\t>{{page.submitText || \"Submit\"}}</button>\\n\\n\\t\\t<button\\n\\t\\t\\tng-click=\"decline($event)\"\\n\\t\\t\\tdata-role=\"submit\"\\n\\t\\t\\tclass=\"btn btn-warning\"\\n\\t\\t\\tng-class=\"{\\'btn-active-accented\\':page.v1style}\"\\n\\t\\t\\tng-if=\"page.decline\"\\n\\t\\t>{{page.declineText || \"Decline to Answer\"}}</button>\\n\\t</div>\\n</div>';});\n\n","/**\n * Main tag for piqPage component.\n * Used automaticaly from within the piQuest directive.\n *\n * This directive is responsible for:\n * 1. Displaying page questions.\n * 2. Detecting the end of a page (submit, TO).\n * 3. Harvesting information from the questions.\n * 4. Suplying information to the logger.\n *\n * @name piqPage\n  */\ndefine('quest/directives/piQuest/piqPage-directive',['require','text!./piqPage.html','underscore','angular'],function (require) {\n\tvar template = require('text!./piqPage.html');\n\tvar _ = require('underscore');\n\tvar angular = require('angular');\n\n\tpiqPageCtrl.$inject = ['$scope','$timeout', '$rootScope', 'piModal'];\n\tfunction piqPageCtrl($scope,$timeout, $rootScope, piModal){\n\t\tvar self = this;\n\n\t\t$scope.global = $rootScope.global;\n\t\t$scope.current = $rootScope.current;\n\n\t\t/**\n\t\t * Harvest piqPage questions, and log them.\n\t\t * by default logging is deferred to the end (so that we can go back to questions...)\n\t\t * This can be changed by setting lognow to true (page.lognow)\n\t\t */\n\t\tthis.harvest = function(lognow){\n\t\t\tvar questions = $scope.current.questions;\n\n\t\t\t_.each($scope.page.questions, function(q){\n\t\t\t\t// don't log if we don't have a name or if lognow is'nt true\n\t\t\t\tif (!q.name || !(lognow || q.lognow)){return;}\n\n\t\t\t\t// get the appropriate log object\n\t\t\t\tvar log = questions[q.name];\n\n\t\t\t\t// don't log if this has already been logged\n\t\t\t\tif (log.$logged){return;}\n\n\t\t\t\t// emit to quest directive\n\t\t\t\t$scope.$emit('quest:log', log, self.log);\n\t\t\t\tlog.$logged = true;\n\t\t\t});\n\t\t};\n\n\t\t/**\n\t\t * Proceed to next page.\n\t\t *\n\t\t * @name submit\n\t\t * @param  {Boolean} skipValidation [Should skip validation of the form before submitting?]\n\t\t */\n\t\t$scope.submit = function(skipValidation){\n\t\t\tvar valid = $scope.pageForm.$valid;\n\n\t\t\t// mark this attempt for submitting\n\t\t\t// useful for validation...\n\t\t\t$scope.submitAttempt = true;\n\n\t\t\tif (!valid && skipValidation !== true){\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// broadcast to the quest controller\n\t\t\t// so that it can set submit latency\n\t\t\t$scope.$broadcast('quest:submit');\n\n\t\t\tself.proceed();\n\n\t\t\t// emit to the piQuest directive so that it knows to advance to the next page\n\t\t\t$scope.$emit('quest:next');\n\t\t};\n\n\t\t/**\n\t\t * Decline to answer. mark all questions on this page as declined\n\t\t */\n\t\t$scope.decline = function($event){\n\t\t\tvar $el = angular.element($event.target);\n\t\t\tvar notDoubleClick = (this.page.decline !== 'double');\n\n\t\t\t// decline and proceed to next page\n\t\t\t// unless this is a double style decline and then simply set \"active\".\n\t\t\tif (notDoubleClick || $el.hasClass('active')){\n\t\t\t\t// broadcast to the quest controller (so that it marks logs as declined and marks decline time)\n\t\t\t\t$scope.$broadcast('quest:decline');\n\t\t\t\tself.proceed();\n\t\t\t\t$scope.$emit('quest:next');\n\t\t\t} else {\n\t\t\t\t$el.addClass('active');\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Go back to previous page.\n\t\t */\n\t\t$scope.prev = function(){\n\t\t\t// broadcast to the quest controller\n\t\t\tself.proceed();\n\t\t\t$scope.$broadcast('quest:prev');\n\t\t};\n\n\n\t\t/**\n\t\t * Wraps up page setup\n\t\t * Closes timer stuff.\n\t\t * Harvests if needed.\n\t\t */\n\t\tthis.proceed = function(){\n\n\t\t\t// remove timeout if needed\n\t\t\tself.timer.stop();\n\n\t\t\t// by default, harvest after every page..\n\t\t\tself.harvest($scope.page.lognow);\n\t\t};\n\n\t\tthis.setup = pageSetup;\n\n\t\t// refresh page on question change (deep watch)\n\t\t// should refresh this directive without animating the whole page in...\n\t\t$scope.$watch('current.questions', pageRefresh, true);\n\n\t\t// listen for auto submit calls (from textDirective etc.)\n\t\t$scope.$on('quest:submit:now', function(){\n\t\t\t$scope.submit();\n\t\t});\n\n\t\t// refresh $scope.page\n\t\t// indirectly triggers pageSetup\n\t\tfunction pageRefresh(){\n\t\t\t$scope.$emit('quest:refresh');\n\t\t}\n\n\t\tfunction pageSetup(timer){\n\t\t\tvar newPage = $scope.page;\n\t\t\tself.timer = timer;\n\n\t\t\t// set the page log object\n\t\t\tself.log = {\n\t\t\t\tname: newPage.name,\n\t\t\t\tstartTime: +new Date()\n\t\t\t};\n\n\t\t\t// If there is a timeout set, submit when it runs out.\n\t\t\tif (newPage.timer){\n\t\t\t\ttimer.start(newPage.timer);\n\t\t\t\ttimer.getScope().$on('timer-end', timerEnd);\n\t\t\t}\n\n\t\t\tfunction timerEnd(){\n\t\t\t\tvar message = newPage.timer.message; // timer must be defined to get here...\n\t\t\t\tvar context;\n\t\t\t\t// mark logs as timeout\n\t\t\t\tself.log.timeout = true;\n\t\t\t\t$scope.$broadcast('quest:timeout');\n\n\t\t\t\t// proceed\n\t\t\t\tif (message){\n\t\t\t\t\t// create context for message tempates\n\t\t\t\t\tcontext = {\n\t\t\t\t\t\tpagesMeta: newPage.$meta,\n\t\t\t\t\t\tpagesData: newPage.data,\n\t\t\t\t\t\tglobal: $rootScope.global,\n\t\t\t\t\t\tcurrent: $rootScope.current\n\t\t\t\t\t};\n\n\t\t\t\t\t// create message object out of string\n\t\t\t\t\t_.isString(message) && (message = {body: message});\n\n\t\t\t\t\t// extend message object with scope and context\n\t\t\t\t\t_.defaults(message, {\n\t\t\t\t\t\theader: 'Timer Done',\n\t\t\t\t\t\t$context: context,\n\t\t\t\t\t\t$scope: $scope\n\t\t\t\t\t});\n\n\t\t\t\t\t// activate message and only then proceed\n\t\t\t\t\tpiModal.open(message).then(timerProceed);\n\t\t\t\t} else {\n\t\t\t\t\t// if there is no messgae proceed imidiately\n\t\t\t\t\ttimerProceed();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction timerProceed(){\n\t\t\t\tvar submit = newPage.timer.submitOnEnd || _.isUndefined(newPage.timer.submitOnEnd);\n\t\t\t\tsubmit && $scope.submit(true);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction directive(){\n\t\treturn {\n\t\t\treplace: true,\n\t\t\tcontroller: piqPageCtrl,\n\t\t\ttemplate:template,\n\t\t\trequire: ['piqPage','piTimer'],\n\t\t\tlink: function($scope, $el, $attr, $ctrl){\n\t\t\t\t$ctrl[0].setup($ctrl[1]);\n\t\t\t}\n\t\t};\n\t}\n\n\treturn directive;\n});\n","\ndefine('text!quest/directives/wrapper/wrapper.html',[],function () { return '<div class=\"form-group\">\\n\\t<label ng-hide=\"data.inline\" for=\"{{data.name}}\" ng-bind-html=\"data.stem\" ng-style=\"data.stemCss\"></label>\\n\\t<div ng-bind-html=\"data.description\"></div>\\n\\t<div quest-data=\"data\" ng-model=\"current.questions[data.name]\" ng-style=\"{\\'max-width\\':data.maxWidth}\"></div>\\n\\t<p class=\"help-block\" ng-if=\"data.help\" ng-bind-html=\"data.helpText\"></p>\\n</div>';});\n\n","/*\n * The directive for creating the generic question layout (stub, surrounding etc.).\n */\ndefine('quest/directives/wrapper/wrapper-directive',['require','text!./wrapper.html','underscore'],function (require) {\n\n\tvar PREFIX = 'quest';\n\tvar template = require('text!./wrapper.html');\n\tvar _ = require('underscore');\n\n\tfunction capitaliseFirstLetter(string){\n\t\treturn string.charAt(0).toUpperCase() + string.slice(1);\n\t}\n\n\tdirective.$inject = ['$compile', '$injector'];\n\tfunction directive($compile, $injector){\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplate:template,\n\t\t\tpriority: 5, // Allows the wrapper to use the same scope as the questions\n\t\t\tscope:{\n\t\t\t\tdata: '=questData',\n\t\t\t\tcurrent: '=questCurrent'\n\t\t\t},\n\t\t\tlink: function(scope,element) {\n\t\t\t\tvar type = scope.data.type || 'text';\n\t\t\t\tvar questElement = element.children().eq(2);\n\t\t\t\tvar attrName = PREFIX + capitaliseFirstLetter(type);\n\n\t\t\t\t// Make sure that this directive exists\n\t\t\t\tif (!$injector.has(attrName + 'Directive')){\n\t\t\t\t\tthrow new Error ('Unknown question type: \"' + type + '\"');\n\t\t\t\t}\n\n\t\t\t\t// snake case the attr name\n\t\t\t\tattrName = _.kebabCase(attrName);\n\n\t\t\t\t// add the appropriate attribute to the directive and compile it\n\t\t\t\tquestElement.attr(attrName,true);\n\t\t\t\t$compile(questElement)(scope);\n\t\t\t}\n\n\t\t};\n\t}\n\n\treturn directive;\n});\n","\ndefine('text!quest/directives/text/text.html',[],function () { return '<div ng-form ng-class=\"{\\'form-inline\\':data.inline}\">\\n\\t<label ng-show=\"data.inline\" for=\"{{data.name}}\" ng-bind-html=\"data.stem\" ng-style=\"data.stemCss\"></label>\\n\\t<input\\n\\t \\ttype=\"text\"\\n\\t\\tng-model=\"response\"\\n\\t\\tng-minlength=\"{{data.minLength || data.minlength}}\"\\n\\t\\tng-maxlength=\"{{data.maxlength}}\"\\n\\t\\tng-pattern=\"data.pattern | toRegex\"\\n\\t\\tng-required=\"{{data.required}}\"\\n\\t\\tclass=\"form-control\"\\n\\t\\tng-attr-style=\"width:{{data.width | dfltUnits}}\"\\n\\n\\t\\tng-keydown=\"data.maxlengthLimit && maxlengthLimit($event)\"\\n\\t\\tng-keyup=\"data.maxlengthLimit && maxlengthLimit($event)\"\\n\\t/>\\n\\t<div pi-quest-validation=\"form.$error.minlength\">{{data.errorMsg.minLength || data.errorMsg.minlength || \"Too short!\"}}</div>\\n\\t<div pi-quest-validation=\"form.$error.maxlength\">{{data.errorMsg.maxlength || \"Too long!\"}}</div>\\n\\t<div pi-quest-validation=\"form.$error.pattern\">{{data.errorMsg.pattern || \"wrong pattern!\"}}</div>\\n\\t<div pi-quest-validation=\"form.$error.required && $parent.$parent.submitAttempt\">{{data.errorMsg.required || \"Please respond to this question!\"}}</div>\\n\\t<div pi-quest-validation=\"model.$error.correct\">{{data.errorMsg.correct || \"You must answer the correct answer!\"}}</div>\\n</div>';});\n\n","\ndefine('text!quest/directives/text/textarea.html',[],function () { return '<div ng-form ng-class=\"{\\'form-inline\\':data.inline}\">\\n\\t<label ng-show=\"data.inline\" for=\"{{data.name}}\" ng-bind-html=\"data.stem\" ng-style=\"data.stemCss\"></label>\\n\\t<textarea\\n\\t \\ttype=\"text\"\\n\\t\\tng-model=\"response\"\\n\\t\\tng-minlength=\"{{data.minLength || data.minlength}}\"\\n\\t\\tng-maxlength=\"{{data.maxlength}}\"\\n\\t\\tng-pattern=\"data.pattern | toRegex\"\\n\\t\\tng-required=\"{{data.required}}\"\\n\\t\\tclass=\"form-control\"\\n\\n\\t\\tng-attr-style=\"resize:none;width:{{data.columns? \\'auto\\' : data.width | dfltUnits}};\"\\n\\t\\tcols=\"{{data.columns}}\"\\n\\t\\trows=\"{{data.rows}}\"\\n\\n\\t\\tng-keydown=\"data.maxlengthLimit && maxlengthLimit($event)\"\\n\\t\\tng-keyup=\"data.maxlengthLimit && maxlengthLimit($event)\"\\n\\t/>\\n\\t<div pi-quest-validation=\"form.$error.minlength\">{{data.errorMsg.minLength || data.errorMsg.minlength || \"Too short!\"}}</div>\\n\\t<div pi-quest-validation=\"form.$error.maxlength\">{{data.errorMsg.maxlength || \"Too long!\"}}</div>\\n\\t<div pi-quest-validation=\"form.$error.pattern\">{{data.errorMsg.pattern || \"wrong pattern!\"}}</div>\\n\\t<div pi-quest-validation=\"form.$error.required && $parent.$parent.submitAttempt\">{{data.errorMsg.required || \"Please respond to this question!\"}}</div>\\n\\t<div pi-quest-validation=\"model.$error.correct\">{{data.errorMsg.correct || \"You must answer the correct answer!\"}}</div>\\n</div>';});\n\n","/*\n * The directive for creating text inputs.\n */\ndefine('quest/directives/text/textDirective',['require','text!./text.html','text!./textarea.html','angular'],function (require) {\n\t// This is the only way to get a non js file relatively\n\tvar textTemplate = require('text!./text.html');\n\tvar textareaTemplate = require('text!./textarea.html');\n\tvar angular = require('angular');\n\n\tfunction textDirective(){\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplate: function(el,attr){\n\t\t\t\treturn 'questText' in attr ? textTemplate : textareaTemplate;\n\t\t\t},\n\t\t\trequire: ['form', 'ngModel'],\n\t\t\tcontroller: 'questController',\n\t\t\tcontrollerAs: 'ctrl',\n\t\t\tscope:{\n\t\t\t\tdata: '=questData'\n\t\t\t},\n\t\t\tlink: function(scope, element, attr, ctrls) {\n\t\t\t\tvar form = ctrls[0];\n\t\t\t\tvar ngModel = ctrls[1];\n\t\t\t\tvar ctrl = scope.ctrl;\n\t\t\t\tvar data = scope.data;\n\n\t\t\t\tscope.form = form;\n\t\t\t\tscope.maxlengthLimit = maxlengthLimit;\n\n\t\t\t\tctrl.registerModel(ngModel, {\n\t\t\t\t\tdflt: \"\"\n\t\t\t\t});\n\n\t\t\t\tdata.autoSubmit && element.bind(\"keydown keypress\", function (event) {\n\t\t\t\t\tif(event.which === 13) {\n\t\t\t\t\t\tscope.$apply(function(){\n\t\t\t\t\t\t\tscope.$emit('quest:submit:now');\n\t\t\t\t\t\t});\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// limit the length of the input string\n\t\t\t\t// essentially a formatter for the input ngModel\n\t\t\t\tfunction maxlengthLimit($event){\n\t\t\t\t\tvar $input = angular.element($event.target);\n\t\t\t\t\tvar response = $input.val();\n\t\t\t\t\tvar limit = data.maxlength || response.length; // in case maxlength isn't defined...\n\t\t\t\t\t// update the scope\n\t\t\t\t\tscope.response = response.slice(0,limit);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\treturn textDirective;\n});\n","\ndefine('text!quest/directives/text/text-number.html',[],function () { return '<div ng-form ng-class=\"{\\'form-inline\\':data.inline}\">\\n\\t<label ng-show=\"data.inline\" for=\"{{data.name}}\" ng-bind-html=\"data.stem\" ng-style=\"data.stemCss\"></label>\\n\\t<input\\n\\t \\ttype=\"number\"\\n\\t\\tng-model=\"response\"\\n\\t\\tng-required=\"{{data.required}}\"\\n\\t\\tclass=\"form-control\"\\n\\t\\tng-attr-style=\"width:{{data.width | dfltUnits}}\"\\n\\t>\\n\\t<div pi-quest-validation=\"form.$error.number\">{{data.errorMsg.number || \"Must be a number!\"}}</div>\\n\\t<div pi-quest-validation=\"form.$error.qstMin\">{{data.errorMsg.min || \"Too small!\"}}</div>\\n\\t<div pi-quest-validation=\"form.$error.qstMax\">{{data.errorMsg.max || \"Too big!\"}}</div>\\n\\t<div pi-quest-validation=\"form.$error.required && $parent.$parent.submitAttempt\">{{data.errorMsg.required || \"Please respond to this question!\"}}</div>\\n\\t<div pi-quest-validation=\"model.$error.correct\">{{data.errorMsg.correct || \"You must answer the correct answer!\"}}</div>\\n</div>';});\n\n","\n/*\n * The directive for creating textNumber inputs.\n */\ndefine('quest/directives/text/text-number-directive',['require','text!./text-number.html'],function (require) {\n\t// This is the only way to get a non js file relatively\n\tvar template = require('text!./text-number.html');\n\n\tvar directive = function(){\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplate:template,\n\t\t\trequire: ['form', 'ngModel', '^?piqPage'],\n\t\t\tcontroller: 'questController',\n\t\t\tcontrollerAs: 'ctrl',\n\t\t\tscope:{\n\t\t\t\tdata: '=questData'\n\t\t\t},\n\t\t\tlink: function(scope, element, attr, ctrls) {\n\n\t\t\t\tvar form = ctrls[0];\n\t\t\t\tvar input = element.find('input');\n\t\t\t\tvar ngModel = input.eq(0).controller('ngModel');\n\n\t\t\t\tscope.form = form;\n\n\t\t\t\tscope.ctrl.registerModel(ctrls[1], {\n\t\t\t\t\tdflt: \"\"\n\t\t\t\t});\n\n\t\t\t\tscope.data.autoSubmit && element.bind(\"keydown keypress\", function (event) {\n\t\t\t\t\tif(event.which === 13) {\n\t\t\t\t\t\tscope.$apply(function(){\n\t\t\t\t\t\t\tscope.$emit('quest:submit:now');\n\t\t\t\t\t\t});\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// we have a specific problem with min max that don't take internal\n\t\t\t\t// http://stackoverflow.com/questions/15656617/validation-not-triggered-when-data-binding-a-number-inputs-min-max-attributes\n\t\t\t\tvar minValidator = function(value) {\n\t\t\t\t\tvar min = parseFloat(scope.data.min);\n\t\t\t\t\tif (!isNaN(min) && value < min) {\n\t\t\t\t\t\tngModel.$setValidity('qstMin', false);\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tngModel.$setValidity('qstMin', true);\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tngModel.$parsers.push(minValidator);\n\t\t\t\tngModel.$formatters.push(minValidator);\n\n\t\t\t\tvar maxValidator = function(value) {\n\t\t\t\t\tvar max = parseFloat(scope.data.max);\n\t\t\t\t\tif (!isNaN(max) && value > max) {\n\t\t\t\t\t\tngModel.$setValidity('qstMax', false);\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tngModel.$setValidity('qstMax', true);\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tngModel.$parsers.push(maxValidator);\n\t\t\t\tngModel.$formatters.push(maxValidator);\n\t\t\t}\n\t\t};\n\t};\n\n\treturn directive;\n});\n","define('quest/directives/select/selectMixerProvider',['require','underscore'],function(require){\n\n\tvar _ = require('underscore');\n\n\tselectMixerProvider.$inject = ['randomizeShuffle', 'mixerRecursive'];\n\tfunction selectMixerProvider(shuffle, mixer){\n\n\t\tfunction selectMixer(answersArr, options){\n\t\t\tvar answers = mixer(answersArr);\n\n\t\t\t// inject values\n\t\t\tanswers = _.map(answers, function(answer, index){\n\n\t\t\t\tif (!_.isPlainObject(answer)){\n\t\t\t\t\tanswer = {text:answer};\n\t\t\t\t}\n\n\t\t\t\tif (_.isUndefined(answer.value)){\n\t\t\t\t\tanswer.value = options.numericValues ? index + 1 : answer.text;\n\t\t\t\t}\n\t\t\t\treturn answer;\n\t\t\t});\n\n\t\t\tif (options.reverse){\n\t\t\t\tanswers = _(answers).reverse().value();\n\t\t\t}\n\n\t\t\tif (options.randomize){\n\t\t\t\tanswers = shuffle(answers);\n\t\t\t}\n\n\t\t\t_.each(answers, function(answer,index){\n\t\t\t\tanswer.order = index;\n\t\t\t});\n\n\t\t\treturn answers;\n\t\t}\n\n\t\treturn selectMixer;\n\t}\n\n\treturn selectMixerProvider;\n});\n","\ndefine('text!quest/directives/select/dropdown.html',[],function () { return '<div ng-form>\\n\\t<select\\n\\t\\tng-model=\"response\"\\n\\t\\tng-options=\"answer.value as answer.text group by answer.group for answer in quest.answers\"\\n\\t\\tng-required=\"data.required\"\\n\\t\\tng-change=\"data.autoSubmit && autoSubmit($event)\"\\n\\t\\tclass=\"form-control\"\\n\\t\\t>\\n\\t\\t<option value=\"\">{{chooseText || \"-- Choose an option --\"}}</option>\\n\\t</select>\\n\\t<div pi-quest-validation=\"model.$error.required && $parent.$parent.submitAttempt\">{{data.errorMsg.required || \"Please respond to this question!\"}}</div>\\n\\t<div pi-quest-validation=\"model.$error.correct\">{{data.errorMsg.correct || \"You must answer the correct answer!\"}}</div>\\n</div>';});\n\n","/*\n * The directive for creating dropdown inputs.\n * scope.response is the value of the chosen response\n */\ndefine('quest/directives/select/dropdownDirective',['require','text!./dropdown.html'],function (require) {\n\n\t// This is the only way to get a non js file relatively\n\tvar template = require('text!./dropdown.html');\n\n\tdirective.$inject = ['questSelectMixer','$timeout'];\n\tfunction directive(mixer,$timeout){\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplate:template,\n\t\t\trequire: ['ngModel'],\n\t\t\tcontroller: 'questController',\n\t\t\tcontrollerAs: 'ctrl',\n\t\t\tscope:{\n\t\t\t\tdata: '=questData'\n\t\t\t},\n\t\t\tlink: function(scope, element, attr, ctrls) {\n\t\t\t\tvar ngModel = ctrls[0];\n\t\t\t\tvar ctrl = scope.ctrl;\n\n\t\t\t\tctrl.registerModel(ngModel, {\n\t\t\t\t\tdflt: NaN\n\t\t\t\t});\n\n\t\t\t\t// render quest if needed\n\t\t\t\tscope.quest = {\n\t\t\t\t\tanswers: mixer(scope.data.answers || [], scope.data)\n\t\t\t\t};\n\n\t\t\t\t// createChooseText\n\t\t\t\tscope.chooseText = \"chooseText\" in scope.data && scope.data.chooseText;\n\n\t\t\t\t/**\n\t\t\t\t * Manage auto submit\n\t\t\t\t */\n\t\t\t\tscope.autoSubmit = function(){\n\t\t\t\t\t$timeout(function(){\n\t\t\t\t\t\tscope.$emit('quest:submit:now');\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t}\n\n\treturn directive;\n});\n","\ndefine('text!quest/directives/select/selectOne.html',[],function () { return '<div>\\n\\t<div ng-class=\"listClass\" ng-style=\"listCss\">\\n\\t\\t<!-- track by in the ng-repeat allows us to keep the repeated object clean so that angular doesn\\'t add a $$hashkey property -->\\n\\t\\t<!-- using interpolation within class, so that we can keep the style info separate within the directive -->\\n\\t\\t<a\\n\\t\\t\\ttabindex=\"-1\"\\n\\t\\t\\tng-repeat=\"answer in quest.answers track by answer.order\"\\n\\t\\t\\tng-model=\"$parent.responseObj\"\\n\\t\\t\\tbtn-radio=\"answer\"\\n\\t\\t\\tng-class=\"$parent.listItemClass\"\\n\\t\\t\\tng-style=\"listItemCss\"\\n\\t\\t\\tclass=\"{{ $parent.response == answer.value ? \\'active\\' : \\'\\' }}\"\\n\\t\\t\\tuncheckable\\n\\t\\t\\tng-click=\"data.autoSubmit && autoSubmit($event)\"\\n\\t\\t\\tng-bind-html=\"answer.text\"\\n\\t\\t\\tunselectable=\"on\"\\n\\t\\t></a>\\n\\t</div>\\n\\t<div pi-quest-validation=\"model.$error.required && $parent.$parent.submitAttempt\">{{data.errorMsg.required || \"Please respond to this question!\"}}</div>\\n\\t<div pi-quest-validation=\"model.$error.correct\">{{data.errorMsg.correct || \"You must answer the correct answer!\"}}</div>\\n</div>';});\n\n","/*\n * The directive for creating selectOne inputs.\n *\n * scope.response is the value of the chosen response\n * scope.responseObj is the full answer object or undefined\n */\ndefine('quest/directives/select/selectOneDirective',['require','angular','underscore','text!./selectOne.html'],function (require) {\n\n\tvar angular = require('angular');\n\tvar _ = require('underscore');\n\tvar template = require('text!./selectOne.html');\n\n\tdirective.$inject = ['questSelectMixer', 'buttonConfig', '$compile'];\n\tfunction directive(mixer, buttonConfig, $compile){\n\t\treturn {\n\t\t\treplace: true,\n\t\t\trequire: ['ngModel'],\n\t\t\tcontroller: 'questController',\n\t\t\tcontrollerAs: 'ctrl',\n\t\t\tscope:{\n\t\t\t\tdata: '=questData'\n\t\t\t},\n\t\t\tlink: function(scope, element, attr, ctrls) {\n\t\t\t\tvar ngModel = ctrls[0];\n\t\t\t\tvar ctrl = scope.ctrl;\n\t\t\t\tvar data = scope.data;\n\n\t\t\t\t// compile the template (this is currently the only way to use a scope dependent template)\n\t\t\t\telement.html(template);\n\t\t\t\t$compile(element.contents())(scope);\n\n\t\t\t\tctrl.registerModel(ngModel, {\n\t\t\t\t\tdflt: NaN\n\t\t\t\t});\n\n\t\t\t\t// render quest if needed\n\t\t\t\tscope.quest = {\n\t\t\t\t\tanswers: mixer(scope.data.answers || [], scope.data)\n\t\t\t\t};\n\n\t\t\t\t// update controller with the response\n\t\t\t\tscope.$watch('responseObj',function(newValue, oldValue){\n\t\t\t\t\tif (newValue === oldValue){\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tscope.response = newValue && newValue.value;\n\t\t\t\t});\n\n\t\t\t\t/**\n\t\t\t\t * Required\n\t\t\t\t * Since we don't control the ngModel element any more we need to manually create a required validation\n\t\t\t\t * we don't implement $observe since in our case required is static\n\t\t\t\t */\n\n\t\t\t\tif (scope.data.required){\n\t\t\t\t\tngModel.$formatters.push(requiredValidator);\n\t\t\t\t\tngModel.$parsers.unshift(requiredValidator);\n\t\t\t\t\trequiredValidator(scope.response); // check validity at the begining - without need for change...\n\t\t\t\t}\n\n\t\t\t\t/**\n\t\t\t\t * Compute list styles\n\t\t\t\t */\n\n\t\t\t\t// back support for \"buttons\"\n\t\t\t\t// @DEPRICATED\n\t\t\t\tif (scope.data.buttons){\n\t\t\t\t\tscope.data.style = 'horizontal';\n\t\t\t\t} else {\n\t\t\t\t\tscope.data.style == 'horizontal' && (scope.data.buttons = true);\n\t\t\t\t}\n\n\t\t\t\t// some specific css added to the list\n\t\t\t\tscope.listCss = {};\n\t\t\t\tscope.listItemCss = {};\n\n\t\t\t\tswitch (data.style){\n\t\t\t\t\tcase 'horizontal' :\n\t\t\t\t\t\tscope.listClass = 'btn-group btn-group-justified btn-group-lg';\n\t\t\t\t\t\tscope.listItemClass = 'btn btn-select';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'multiButtons':\n\t\t\t\t\t\tscope.listClass = 'btn-toolbar';\n\t\t\t\t\t\tscope.listItemClass = 'btn  btn-select';\n\t\t\t\t\t\tscope.listCss.lineHeight = 2.8;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'list':\n\t\t\t\t\t\t/* fall through */\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tscope.listClass = 'list-group';\n\t\t\t\t\t\tscope.listItemClass = 'list-group-item';\n\t\t\t\t}\n\n\t\t\t\tdata.minWidth && (scope.listItemCss.minWidth = data.minWidth);\n\n\t\t\t\t/**\n\t\t\t\t * Manage auto submit\n\t\t\t\t * @param  {event} e [description]\n\t\t\t\t */\n\t\t\t\tscope.autoSubmit = function(e){\n\t\t\t\t\tif (!scope.data.autoSubmit){\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar isActive = angular.element(e.target).hasClass(buttonConfig.activeClass);\n\n\t\t\t\t\tif (isActive){\n\t\t\t\t\t\t// this whole function happens within a digest cycle, so we don't need to $apply\n\t\t\t\t\t\tscope.$emit('quest:submit:now');\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tfunction requiredValidator(value){\n\t\t\t\t\tvar ctrl = ngModel;\n\t\t\t\t\tif (ctrl.$isEmpty(value)) {\n\t\t\t\t\t\tctrl.$setValidity('required', false);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tctrl.$setValidity('required', true);\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\treturn directive;\n});\n","\ndefine('text!quest/directives/select/selectMulti.html',[],function () { return '<div required=\"{{data.required}}\">\\n\\t<div ng-class=\"listClass\" ng-style=\"listCss\">\\n\\t\\t<!-- track by in the ng-repeat allows us to keep the repeated object clean so that angular doesn\\'t add a $$hashkey property -->\\n\\t\\t<a\\n\\t\\t\\thref=\"javascript:void(0);\"\\n\\t\\t\\tng-repeat=\"answer in quest.answers track by answer.order\"\\n\\t\\t\\tng-model=\"answer.chosen\"\\n\\t\\t\\tbtn-checkbox\\n\\t\\t\\tng-class=\"$parent.listItemClass\"\\n\\t\\t\\tng-style=\"listItemCss\"\\n\\t\\t\\tclass=\"{{ answer.chosen ? \\'active\\' : \\'\\' }}\"\\n\\t\\t\\tuncheckable\\n\\t\\t\\tng-bind-html=\"answer.text\"\\n\\t\\t\\tunselectable=\"on\"\\n\\t\\t>\\n\\t\\t</a>\\n\\t</div>\\n\\t<div pi-quest-validation=\"model.$error.required && $parent.$parent.submitAttempt\">{{data.errorMsg.required || \"Please respond to this question!\"}}</div>\\n\\t<div pi-quest-validation=\"model.$error.correct\">{{data.errorMsg.correct || \"You must answer the correct answer!\"}}</div>\\n</div>';});\n\n","/*\n * The directive for creating selectMulti inputs.\n */\ndefine('quest/directives/select/selectMultiDirective',['require','underscore','text!./selectMulti.html'],function (require) {\n\tvar _ = require('underscore');\n\n\t// This is the only way to get a non js file relatively\n\tvar template = require('text!./selectMulti.html');\n\n\tdirective.$inject = ['questSelectMixer'];\n\tfunction directive(mixer){\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplate:template,\n\t\t\trequire: ['^?piqPage', 'ngModel'],\n\t\t\tcontroller: 'questController',\n\t\t\tcontrollerAs: 'ctrl',\n\t\t\tscope:{\n\t\t\t\tdata: '=questData'\n\t\t\t},\n\t\t\tlink: function(scope, element, attr, ctrls) {\n\t\t\t\tvar ctrl = scope.ctrl;\n\t\t\t\tvar ngModel = ctrls[1];\n\t\t\t\tvar data = scope.data;\n\n\t\t\t\tctrl.registerModel(ngModel, {\n\t\t\t\t\tdflt: []\n\t\t\t\t});\n\n\t\t\t\tngModel.$isEmpty = function(){\n\t\t\t\t\treturn _.isEmpty(ngModel.$viewValue);\n\t\t\t\t};\n\n\t\t\t\t// render questions\n\t\t\t\tscope.quest = {\n\t\t\t\t\tanswers: mixer(scope.data.answers || [], scope.data)\n\t\t\t\t};\n\n\t\t\t\t// mark the chosen questions\n\t\t\t\t_.each(scope.quest.answers, function(answer){\n\t\t\t\t\t// mark it chosen if\n\t\t\t\t\tif (~_.indexOf(scope.response, answer.value)){\n\t\t\t\t\t\tanswer.chosen = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t/**\n\t\t\t\t * Compute list styles\n\t\t\t\t */\n\n\t\t\t\t// back support for \"buttons\"\n\t\t\t\t// @DEPRICATED\n\t\t\t\tif (scope.data.buttons){\n\t\t\t\t\tscope.data.style = 'horizontal';\n\t\t\t\t} else {\n\t\t\t\t\tscope.data.style == 'horizontal' && (scope.data.buttons = true);\n\t\t\t\t}\n\n\t\t\t\t// some specific css added to the list\n\t\t\t\tscope.listCss = {};\n\t\t\t\tscope.listItemCss = {};\n\n\t\t\t\tswitch (data.style){\n\t\t\t\t\tcase 'horizontal' :\n\t\t\t\t\t\tscope.listClass = 'btn-group btn-group-justified btn-group-lg';\n\t\t\t\t\t\tscope.listItemClass = 'btn btn-select';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'multiButtons':\n\t\t\t\t\t\tscope.listClass = 'btn-toolbar';\n\t\t\t\t\t\tscope.listItemClass = 'btn  btn-select';\n\t\t\t\t\t\tscope.listCss.lineHeight = 2.8;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'list':\n\t\t\t\t\t\t/* fall through */\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tscope.listClass = 'list-group';\n\t\t\t\t\t\tscope.listItemClass = 'list-group-item';\n\t\t\t\t}\n\n\t\t\t\tdata.minWidth && (scope.listItemCss.minWidth = data.minWidth);\n\n\n\t\t\t\t// update controller with the response\n\t\t\t\tscope.$watch('quest.answers',function(newValue, oldValue){\n\t\t\t\t\tif (newValue === oldValue){\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// get chosen answers\n\t\t\t\t\tscope.response = _(newValue)\n\t\t\t\t\t\t.filter(function(answer){return answer.chosen;})\n\t\t\t\t\t\t.pluck('value')\n\t\t\t\t\t\t.value();\n\t\t\t\t},true); // deep watch\n\t\t\t}\n\t\t};\n\t}\n\n\treturn directive;\n});\n","\ndefine('text!quest/directives/grid/grid.html',[],function () { return '<div ng-form class=\"table-responsive\" ng-class=\"{\\'pi-page-submitted\\':$parent.$parent.submitAttempt}\">\\n\\t<table class=\"table table-hover\">\\n\\t\\t<colgroup>\\n\\t\\t\\t<col\\n\\t\\t\\t\\tng-if=\"!data.rowStemHide\"\\n\\t\\t\\t></col>\\n\\t\\t\\t<col\\n\\t\\t\\t\\tng-repeat=\"column in columns\"\\n\\t\\t\\t\\tng-style=\"column.css\"\\n\\t\\t\\t></col>\\n\\t\\t</colgroup>\\n\\t\\t<thead ng-if=\"!data.columnStemHide\">\\n\\t\\t\\t<tr>\\n\\t\\t\\t\\t<th\\n\\t\\t\\t\\t\\tng-style=\"allCss(data.columnStemCss,column.stemCss)\"\\n\\t\\t\\t\\t\\tng-if=\"!data.rowStemHide\"\\n\\t\\t\\t\\t></th>\\n\\t\\t\\t\\t<th\\n\\t\\t\\t\\t\\tng-repeat=\"column in columns\"\\n\\t\\t\\t\\t\\tng-bind-html=\"column.stem\"\\n\\t\\t\\t\\t\\tng-style=\"allCss(data.columnStemCss,column.stemCss)\"\\n\\t\\t\\t\\t></th>\\n\\t\\t\\t</tr>\\n\\t\\t</thead>\\n\\t\\t<tbody>\\n\\t\\t\\t<tr\\n\\t\\t\\t\\tng-repeat=\"row in rows\"\\n\\t\\t\\t\\tquest-grid-row=\"row\"\\n\\t\\t\\t\\tquest-grid-data=\"data\"\\n\\t\\t\\t\\tng-model=\"$parent.$parent.current.questions[row.name]\"\\n\\t\\t\\t\\tng-required=\"{{data.required || row.required}}\"\\n\\t\\t\\t></tr>\\n\\t\\t</tbody>\\n\\t</table>\\n\\t<div pi-quest-validation=\"form.$error.required && $parent.$parent.submitAttempt\">{{data.errorMsg.required || \"Please respond to this question!\"}}</div>\\n</div>';});\n\n","define('quest/directives/grid/gridDirective',['require','underscore','text!./grid.html'],function (require) {\n\tvar _ = require('underscore');\n\n\tgridDirective.$inject = ['questShuffle'];\n\tfunction gridDirective(shuffle){\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplate: require('text!./grid.html'),\n\t\t\trequire: ['ngModel','form'],\n\t\t\tcontroller: 'questController',\n\t\t\tcontrollerAs: 'ctrl',\n\t\t\tscope:{\n\t\t\t\tdata: '=questData',\n\t\t\t\tcurrent: '=questCurrent'\n\t\t\t},\n\t\t\tlink: function(scope, element, attr, ctrls) {\n\t\t\t\tvar ngModel = ctrls[0];\n\t\t\t\tvar ctrl = scope.ctrl;\n\t\t\t\tvar data = scope.data;\n\n\t\t\t\tscope.form = ctrls[1];\n\n\t\t\t\tscope.columns = mapColumns(data.columns);\n\t\t\t\tscope.rows = mapRows(data.rows, data);\n\t\t\t\tscope.allCss = allCss;\n\n\n\t\t\t\tscope.$watchCollection(function getResponses(){\n\t\t\t\t\treturn _.pluck(scope.rows, '$response');\n\t\t\t\t}, function sumResponses(responses){\n\t\t\t\t\tscope.response = _.reduce(responses, function(total, response) {\n\t\t\t\t\t\treturn _.isFinite(response) ? total + response : total;\n\t\t\t\t\t},0);\n\t\t\t\t});\n\n\t\t\t\tctrl.registerModel(ngModel, {\n\t\t\t\t\tdflt: 0\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tfunction allCss(){\n\t\t\tvar objects = _.toArray(arguments);\n\t\t\tobjects.unshift({}); // prepend an empty object so that we don't change the originals\n\t\t\treturn _.extend.apply(_, objects);\n\t\t}\n\n\t\tfunction mapColumns(columns){\n\t\t\treturn _(columns || [])\n\t\t\t\t.map(objectify)\n\t\t\t\t.each(function setType(column){\n\t\t\t\t\tcolumn.hasOwnProperty('type') || (column.type = 'checkbox');\n\t\t\t\t})\n\t\t\t\t.tap(function setValues(columns){\n\t\t\t\t\t_(columns)\n\t\t\t\t\t\t.filter(function hasValue(column){return column.type != 'text';})\n\t\t\t\t\t\t.each(function setValue(column, index){\n\t\t\t\t\t\t\tcolumn.hasOwnProperty('value') || (column.value = index+1);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.commit();\n\t\t\t\t})\n\t\t\t\t.tap(function setReverseValues(columns){\n\t\t\t\t\t_(columns)\n\t\t\t\t\t\t.filter(function(column){return !column.noReverse;}) // ignore columns that shouldn't be reveresed\n\t\t\t\t\t\t.filter(function hasValue(column){return column.type != 'text';})\n\t\t\t\t\t\t.each(function(column, index, columns){\n\t\t\t\t\t\t\tcolumn.reverseValue = columns[columns.length - index - 1].value; // set the value from the mirroring column\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.commit(); // activate chain, since we aren't using _.value here\n\t\t\t\t})\n\t\t\t\t.value();\n\t\t}\n\n\t\tfunction mapRows(rows, data){\n\t\t\treturn _(rows || [])\n\t\t\t\t.map(objectify)\n\t\t\t\t.each(function setRowName(row, index){\n\t\t\t\t\trow.hasOwnProperty('name') || (row.name = data.name + zerofill(index+1,3));\n\t\t\t\t})\n\t\t\t\t.thru(data.shuffle ? shuffle : _.identity)\n\t\t\t\t.value();\n\t\t}\n\n\t\tfunction objectify(target){\n\t\t\treturn _.isPlainObject(target) ? target : {stem:target};\n\t\t}\n\n\t\t/**\n\t\t * Zero fills a number\n\t\t * http://stackoverflow.com/questions/1267283/how-can-i-create-a-zerofilled-value-using-javascript\n\t\t *\n\t\t * WARNING!! fails if n===0\n\t\t *\n\t\t * @param  {Number} n The number to zerofill\n\t\t * @param  {Number} w The width of the fill\n\t\t * @return {String}   Zerofilled number\n\t\t */\n\t\tfunction zerofill(n, w) {\n\t\t\tvar an = Math.abs(n);\n\t\t\tvar digitCount = 1 + Math.floor(Math.log(an) / Math.LN10);\n\t\t\tif (digitCount >= w) {\n\t\t\t\treturn n;\n\t\t\t}\n\t\t\tvar zeroString = Math.pow(10, w - digitCount).toString().substr(1);\n\t\t\treturn n < 0 ? '-' + zeroString + an : zeroString + an;\n\t\t}\n\t}\n\n\treturn gridDirective;\n});\n","\ndefine('text!quest/directives/grid/gridRow.html',[],function () { return '<tr>\\n\\t<th\\n\\t\\tscope=\"row\"\\n\\t\\tng-if=\"!data.rowStemHide\"\\n\\t\\tng-bind-html=\"row.stem\"\\n\\t\\tng-style=\"data.rowStemCss\"\\n\\t></th>\\n\\t<td ng-repeat=\"column in $parent.columns\">\\n\\t\\t<div ng-switch=\"column.type\">\\n\\t\\t\\t<button\\n\\t\\t\\t\\tng-switch-when=\"checkbox\"\\n\\t\\t\\t\\tbtn-radio=\"row.reverse && !column.noReverse ? column.reverseValue : column.value\"\\n\\t\\t\\t\\tng-model=\"$parent.$parent.response\"\\n\\t\\t\\t\\tclass=\"btn btn-default\"\\n\\t\\t\\t\\tng-class=\"data.checkboxType\"\\n\\t\\t\\t\\tuncheckable\\n\\t\\t\\t></button>\\n\\t\\t\\t<div\\n\\t\\t\\t\\tclass=\"text\"\\n\\t\\t\\t\\tng-switch-when=\"text\"\\n\\t\\t\\t\\tng-bind-html=\"row[column.textProperty]\"\\n\\t\\t\\t></div>\\n\\t\\t</div>\\n\\t\\t<div\\n\\t\\t\\tclass=\"cell-labels\"\\n\\t\\t\\tng-if=\"data.cellLabels\"\\n\\t\\t\\tng-bind-html=\"column.stem\"\\n\\t\\t></div>\\n\\t</td>\\n</tr>';});\n\n","define('quest/directives/grid/gridRowDirective',['require','text!./gridRow.html'],function (require) {\n\tfunction gridRowDirective(){\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplate: require('text!./gridRow.html'),\n\t\t\trequire: ['ngModel'],\n\t\t\tcontroller: 'questController',\n\t\t\tcontrollerAs: 'ctrl',\n\t\t\tscope: {\n\t\t\t\trow: '=questGridRow',\n\t\t\t\tdata: '=questGridData'\n\t\t\t},\n\t\t\tlink: function(scope, element, attr, ctrls) {\n\t\t\t\tvar ngModel = ctrls[0];\n\t\t\t\tvar ctrl = scope.ctrl;\n\n\t\t\t\tscope.model = ngModel;\n\n\t\t\t\t// keep row updated with response so that we can watch it from the grid directive\n\t\t\t\tscope.$watch('response', function(newVal){\n\t\t\t\t\tscope.row.$response = newVal;\n\t\t\t\t});\n\n\t\t\t\tctrl.registerModel(ngModel, {\n\t\t\t\t\tdata: scope.row\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t}\n\n\treturn gridRowDirective;\n});\n","\ndefine('text!quest/directives/slider/slider.html',[],function () { return '<div ng-form>\\n\\t<div\\n\\t\\tpi-slider\\n\\t\\tng-model=\"response\"\\n\\t\\tpi-slider-options=\"data\"\\n\\t\\tng-required=\"{{data.required}}\"\\n\\t></div>\\n\\t<h4 ng-if=\"data.displayValue\" class=\"text-center\"><span class=\"label label-info\">{{ response | number }}</span></h4>\\n\\t<div pi-quest-validation=\"form.$error.required && $parent.$parent.submitAttempt\">{{data.errorMsg.required || \"Please respond to this question!\"}}</div>\\n</div>';});\n\n","define('quest/directives/slider/sliderDirective',['require','underscore','text!./slider.html'],function(require){\n\n\tvar _ = require('underscore');\n\t_;\n\n\n\tsliderDirective.$inject = [];\n\tfunction sliderDirective(){\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplate: require('text!./slider.html'),\n\t\t\trequire: ['form', 'ngModel'],\n\t\t\tcontroller: 'questController',\n\t\t\tcontrollerAs: 'ctrl',\n\t\t\tscope:{\n\t\t\t\tdata: '=questData'\n\t\t\t},\n\t\t\tlink: function(scope, element, attr, ctrls) {\n\t\t\t\tvar form = ctrls[0];\n\t\t\t\tvar ngModel = ctrls[1];\n\t\t\t\tvar ctrl = scope.ctrl;\n\t\t\t\tvar data = scope.data;\n\n\t\t\t\tscope.form = form;\n\n\t\t\t\tctrl.registerModel(ngModel, {\n\t\t\t\t\tdflt: undefined\n\t\t\t\t});\n\n\t\t\t\tdata.autoSubmit && scope.$on('slider:change', function(){\n\t\t\t\t\tscope.$emit('quest:submit:now');\n\t\t\t\t});\n\t\t\t}\n\n\t\t};\n\t}\n\n\treturn sliderDirective;\n});\n","(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define('quest/directives/slider/slider',[], factory);\n    } else {\n        var app = angular.module('pi', []);\n        app.directive('piSlider', factory(root.angular));\n    }\n}(this, function () {\n  var SLIDER_CHANGE_EVENT = 'slider:change';\n\n  sliderDirective.$inject = [\"$document\", \"$sce\"];\n  function sliderDirective($document) {\n    return {\n      scope: {\n        options: '=piSliderOptions'\n      },\n      replace: true,\n      require: 'ngModel',\n      template: ['<div class=\"slider\" ng-mousedown=\"onSliderMouseDown($event)\">',\n            '<div class=\"slider-label-left\" ng-style=\"options.leftLabelCss\">{{options.leftLabel}}</div>',\n            '<div class=\"slider-label-right\" ng-style=\"options.rightLabelCss\">{{options.rightLabel}}</div>',\n            '<div class=\"slider-container\">',\n              '<div class=\"slider-bar\">',\n                '<div class=\"slider-bar-highlight\" ng-style=\"highlightStyle\"></div>',\n              '</div>',\n              '<div class=\"slider-handle\" ng-mousedown=\"onHandleMousedown($event)\" ng-style=\"handleStyle\"></div>',\n            '</div>',\n            '<ul class=\"slider-pips\" ng-if=\"!options.hidePips\">',\n                '<li ng-repeat=\"i in getNumber(steps) track by $index\" ng-style=\"{width: pipWidth + \\'%\\'}\" ng-class=\"{last:$last}\"></li>',\n            '</ul>',\n            '<ul class=\"slider-labels\">',\n                '<li ng-repeat=\"label in labels track by $index\" ng-style=\"{width: labelsWidth + \\'%\\'}\" ng-class=\"{first:$first, last:$last}\">{{label}}</li>',\n            '</ul>',\n          '</div>'].join('\\n'),\n\n      link: function(scope, element, attr, ngModel) {\n        var sliderHandleWidth;\n        var options = scope.options || {};\n\n        sliderHandleWidth = element[0].querySelector('.slider-handle').clientWidth;\n\n        scope.ngModel = ngModel;\n\n        scope.min = options.min || 0;\n        scope.max = options.max || (scope.min + 100);\n        scope.range = scope.max - scope.min;\n\n        scope.steps = options.steps ? options.steps - 1 : 0;\n        scope.pipWidth = options.steps && 100/scope.steps;\n\n        scope.labels = options.labels;\n        scope.labelsWidth = options.labels && 100 / options.labels.length;\n\n        ngModel.$isEmpty = isEmpty;\n        ngModel.$render = renderView;\n        ngModel.$formatters.push(toPercentage);\n        ngModel.$parsers.push(fromPercentage);\n\n        scope.onHandleMousedown = onHandleMousedown;\n        scope.onSliderMouseDown = onSliderMouseDown;\n\n        // helper for ngRepeat\n        // http://stackoverflow.com/questions/16824853/way-to-ng-repeat-defined-number-of-times-instead-of-repeating-over-array\n        scope.getNumber = function getNumber(num){return new Array(num);};\n\n        function setValue(percentage){\n          ngModel.$setViewValue(percentage);\n          ngModel.$render();\n        }\n\n        // limit percenatge by step size\n        function steppedPercentage(percentage){\n          if (!scope.steps || ngModel.$isEmpty(percentage)){\n            return percentage;\n          }\n\n          return Math.round(percentage * scope.steps) / scope.steps;\n        }\n\n        // manage placing the handle as well as the highlight correctly\n        function renderView() {\n          var percentage = steppedPercentage(ngModel.$viewValue);\n          var showHandle = !isNaN(percentage);\n          var handleDisplay = showHandle ? 'block' : 'none';\n          var highlightDisplay = showHandle && options.highlight ? 'block' : 'none';\n          scope.highlightStyle = { right: (100 - percentage * 100) + '%', display: highlightDisplay};\n          scope.handleStyle = { left: (percentage * 100) + '%', display: handleDisplay};\n        }\n\n        // formater model => view\n        function toPercentage(modelValue){\n          // if this isn't a number we can't compute percentage...\n          if (ngModel.$isEmpty(modelValue)){\n            return NaN;\n          }\n\n          // limit model size\n          modelValue = Math.min(Math.max(modelValue, scope.min), scope.max);\n          return (modelValue - scope.min) / scope.range;\n        }\n\n        // parser view => model\n        function fromPercentage(percentage){\n          return +(scope.min + (steppedPercentage(percentage) * scope.range)).toFixed(4);\n        }\n\n        // handle drag\n        function onHandleMousedown(event) {\n          fixEvent(event);\n          var basePercentage, basePosition;\n          event.preventDefault();\n          event.stopPropagation(); // prevent propogation to slider so that change is fired for the beginin of a drag interaction\n          basePosition = event.pageX;\n          basePercentage = ngModel.$viewValue;\n\n          $document.on('mousemove', mouseMove);\n          $document.on('mouseup', mouseUp);\n\n          // drag\n          function mouseMove(event) {\n            fixEvent(event);\n            event.preventDefault();\n            var percentage = basePercentage + (event.pageX - basePosition) / (element.prop('clientWidth') - sliderHandleWidth);\n            // don't allow extending beyond slider size\n            percentage = Math.min(percentage, 1);\n            percentage = Math.max(percentage, 0);\n\n            scope.$apply(function(){\n              setValue(percentage);\n            });\n          }\n\n          // drop\n          function mouseUp() {\n            $document.off('mousemove', mouseMove);\n            $document.off('mouseup', mouseUp);\n            scope.$emit(SLIDER_CHANGE_EVENT, ngModel.$viewValue); // emit only on mouse drop\n          }\n        }\n\n        // slider click\n        function onSliderMouseDown(event){\n          fixEvent(event);\n          event.preventDefault();\n          var sliderWidth = element.prop('clientWidth');\n          var sliderPosition = element[0].getBoundingClientRect().left;\n          var percentage = (event.pageX - sliderPosition - sliderHandleWidth/2) / (sliderWidth - sliderHandleWidth);\n          // don't allow extending beyond slider size\n          percentage = Math.min(percentage, 1);\n          percentage = Math.max(percentage, 0);\n\n          // auto \"$apply\" by ng-mousedown\n          setValue(percentage);\n          scope.$emit(SLIDER_CHANGE_EVENT, ngModel.$viewValue);\n        }\n\n\n      }\n    };\n  }\n\n  return sliderDirective;\n\n  // fix IE8 events (missing pageX) - from jquery\n  function fixEvent(event){\n    var eventDoc, doc, body;\n    // Calculate pageX/Y if missing and clientX/Y available\n    if ( event.pageX == null && event.clientX != null ) {\n      eventDoc = event.target.ownerDocument || document;\n      doc = eventDoc.documentElement;\n      body = eventDoc.body;\n\n      event.pageX = event.clientX + ( doc && doc.scrollLeft || body && body.scrollLeft || 0 ) - ( doc && doc.clientLeft || body && body.clientLeft || 0 );\n      event.pageY = event.clientY + ( doc && doc.scrollTop  || body && body.scrollTop  || 0 ) - ( doc && doc.clientTop  || body && body.clientTop  || 0 );\n    }\n  }\n\n  function isEmpty(n){\n    return isNaN(parseFloat(n)) || !isFinite(n);\n  }\n}));\n\n\n\n","define('quest/directives/toRegexFilter',['require','underscore'],function(require){\n\tvar _ = require('underscore');\n\n\ttoRegexFilter.$inject = ['piConsole'];\n\tfunction toRegexFilter($console){\n\t\treturn toRegex;\n\n\t\tfunction toRegex(value) {\n\t\t\tvar err;\n\n\t\t\tif (_.isUndefined(value)){\n\t\t\t\treturn /(?:)/;\n\t\t\t}\n\n\t\t\tif (_.isRegExp(value) || _.isString(value)){\n\t\t\t\treturn new RegExp(value);\n\t\t\t} else {\n\t\t\t\terr = new Error('Question pattern is not a valid regular expression');\n\t\t\t\t$console('text').error(err, value);\n\t\t\t\tthrow err;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn toRegexFilter;\n});\n","define('quest/directives/dfltUnitsFilter',['require','underscore'],function(require){\n\n\tvar _ = require('underscore');\n\n\treturn function(){\n\t\treturn dfltUnits;\n\t};\n\n\tfunction dfltUnits(value, unit) {\n\t\tvar suffix;\n\n\t\t// if value is empty (unless it equals 0)\n\t\tif (!value && value !== 0 && value !== '0'){\n\t\t\treturn '';\n\t\t}\n\n\t\tif (isNumeric(value)){\n\t\t\tsuffix = _.isUndefined(unit) ? 'px' : String(unit);\n\t\t\treturn value + suffix;\n\t\t}\n\t\treturn value;\n\t}\n\n\t// taken from jquery\n\tfunction isNumeric(obj){\n\t\treturn !_.isArray( obj ) && (obj - parseFloat( obj ) + 1) >= 0;\n\t}\n});\n","define('quest/directives/questDirectivesModule',['require','angular','underscore','utils/timer/timer-module','utils/utils/utilsModule','./buttons/buttons','utils/database/template/templateModule','utils/console/consoleModule','utils/modal/modalModule','./questController','./piQuest/piQuest-directive','./piQuest/piqPage-directive','./wrapper/wrapper-directive','./text/textDirective','./text/textDirective','./text/text-number-directive','./select/selectMixerProvider','./select/dropdownDirective','./select/selectOneDirective','./select/selectMultiDirective','./grid/gridDirective','./grid/gridRowDirective','./slider/sliderDirective','./slider/slider','./toRegexFilter','./dfltUnitsFilter'],function(require){\n\tvar angular = require('angular');\n\tvar _ = require('underscore');\n\n\t// set modules that are requirements for the quest module\n\tvar module = angular.module('questDirectives',[\n\t\trequire('utils/timer/timer-module').name,\n\t\trequire('utils/utils/utilsModule').name,\n\t\trequire('./buttons/buttons').name,\n\t\trequire('utils/database/template/templateModule').name,\n\t\trequire('utils/console/consoleModule').name,\n\t\trequire('utils/modal/modalModule').name\n\t]);\n\n\tmodule.controller('questController', require('./questController'));\n\tmodule.directive('piQuest', require('./piQuest/piQuest-directive'));\n\tmodule.directive('piqPage', require('./piQuest/piqPage-directive'));\n\tmodule.directive('questWrapper', require('./wrapper/wrapper-directive'));\n\n\tmodule.directive('questText', require('./text/textDirective'));\n\tmodule.directive('questTextarea', require('./text/textDirective')); // uses the same directive as questText\n\tmodule.directive('questTextNumber', require('./text/text-number-directive'));\n\n\tmodule.service('questSelectMixer', require('./select/selectMixerProvider'));\n\tmodule.directive('questDropdown',require('./select/dropdownDirective'));\n\tmodule.directive('questSelectOne',require('./select/selectOneDirective'));\n\tmodule.directive('questSelectMulti',require('./select/selectMultiDirective'));\n\n\tmodule.value('questShuffle', _.shuffle); // we already have this in database but I don't want the directives to be too interdependant\n\tmodule.directive('questGrid', require('./grid/gridDirective'));\n\tmodule.directive('questGridRow', require('./grid/gridRowDirective'));\n\n\tmodule.directive('questSlider',require('./slider/sliderDirective'));\n\tmodule.directive('piSlider',require('./slider/slider'));\n\n\t// @TODO: move to utils or something\n\tmodule.config(['$sceProvider', function($sceProvider){\n\t\t$sceProvider.enabled(false);\n\t}]);\n\n\tmodule.directive('piQuestValidation', function(){\n\t\treturn {\n\t\t\treplace:true,\n\t\t\ttransclude: true,\n\t\t\tscope: {unvalid:'=piQuestValidation'},\n\t\t\ttemplate: [\n\t\t\t\t'<div class=\"alert alert-danger\" role=\"alert\" ng-show=\"unvalid\">',\n\t\t\t  \t\t'<span class=\"glyphicon glyphicon-exclamation-sign\" aria-hidden=\"true\"></span>',\n\t\t\t  \t\t'<span ng-transclude></span>',\n\t\t\t\t'</div>'\n\t\t\t].join('')\n\t\t};\n\t});\n\n\t// filters\n\tmodule.filter('toRegex', require('./toRegexFilter'));\n\tmodule.filter('dfltUnits', require('./dfltUnitsFilter'));\n\n\n\treturn module;\n\n\n});\n\n","/*\n *\tThe logger Object\n *\tLogger(settings)\n *\t@param settings: the settings for this logger (defaults to the settings defined on loggerProvider.settings)\n *\tsettings = {\n *\t\tpulse: 34, // after how many objects should we post\n *\t\turl: '/my/url', // where should we post to\n *\t\tmeta: an object that extends each log\n  *\t}\n *\n *\tmethods:\n *\n *\tlog(obj) - add an object to the log stack\n *\t@param obj: any object that we want to log (as long as it is defined)\n *\n *\tsend() - send any remaining objects to the server\n *\n  */\ndefine('utils/logger/LoggerProvider',['require','underscore'],function(require){\n\tvar _ = require('underscore');\n\n\tloggerProvider.$inject = ['$http','$q', 'piConsole'];\n\tfunction loggerProvider($http, $q, piConsole){\n\t\tvar self = this;\n\n\t\tfunction Logger(dfltLogFn){\n\t\t\tthis.pending = [];\n\t\t\tthis.sent = [];\n\t\t\tthis.settings = {};\n\t\t\tthis.meta = {};\n\t\t\tthis.suppress = false; // don't suppress send\n\t\t\tthis.dfltLogFn = dfltLogFn || function(a){return a;};\n\t\t}\n\n\t\t_.extend(Logger.prototype, {\n\t\t\tlog: function(){\n\t\t\t\tvar settings = this.settings;\n\t\t\t\tvar logObj = (settings.logFn || this.dfltLogFn).apply(settings, arguments);\n\n\t\t\t\tif (!_.isEmpty(this.meta) && !_.isPlainObject(logObj)){\n\t\t\t\t\tpiConsole(['logger']).debug(logObj);\n\t\t\t\t\tthrow new Error('Logger: in order to use \"meta\" the log must be an object.');\n\t\t\t\t}\n\n\t\t\t\t_.extend(logObj, this.meta);\n\n\t\t\t\t// if debug, then log this object\n\t\t\t\tpiConsole(['logger']).debug('Logged: ', logObj);\n\n\t\t\t\tthis.pending.push(logObj);\n\t\t\t\tself.logCounter++;\n\t\t\t\tif (settings.pulse && !this.suppress && this.pending.length >= settings.pulse){\n\t\t\t\t\tthis.send();\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tsend: function(){\n\t\t\t\tvar i;\n\t\t\t\tvar settings = this.settings;\n\t\t\t\tvar sendData = this.pending;\n\t\t\t\tvar def = $q.defer();\n\n\t\t\t\t// if there are no records to send...\n\t\t\t\tif (sendData.length === 0){\n\t\t\t\t\tdef.resolve();\n\t\t\t\t\treturn def.promise;\n\t\t\t\t}\n\n\t\t\t\tif (_.isUndefined(settings.url)){\n\t\t\t\t\tpiConsole('logger').warn('The logger url is not set.');\n\t\t\t\t\tdef.resolve();\n\t\t\t\t\treturn def.promise;\n\t\t\t\t}\n\n\t\t\t\t// empty the pending stack\n\t\t\t\tthis.pending = [];\n\n\t\t\t\t$http.post(settings.url, sendData).then(success, error);\n\n\t\t\t\t// move everything pending to the sent stack\n\t\t\t\tfor (i = 0; i<sendData.length; i++){\n\t\t\t\t\tthis.sent.push(sendData[i]);\n\t\t\t\t}\n\n\t\t\t\treturn def.promise;\n\n\t\t\t\tfunction success(){\n\t\t\t\t\tdef.resolve();\n\t\t\t\t}\n\n\t\t\t\tfunction error(){\n\t\t\t\t\t// try again\n\t\t\t\t\treturn $http.post(settings.url, sendData).then(success, function(){\n\t\t\t\t\t\tpiConsole(['logger']).error('Failed to send data, it seems the backend is not responding. (sending to: \"' + settings.url +'\")');\n\t\t\t\t\t\tdef.reject();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * suppress pulse\n\t\t\t * sets suppress to `suppress`, or to true by default.\n\t\t\t */\n\t\t\tsuppressPulse: function (suppress) {\n\t\t\t\tthis.suppress = _.isUndefined(suppress) ? true : suppress;\n\t\t\t},\n\n\t\t\tgetCount: function(){\n\t\t\t\treturn self.logCounter;\n\t\t\t},\n\n\t\t\tsetSettings: function(settings){\n\t\t\t\tif (arguments.length === 0){\n\t\t\t\t\treturn this.settings;\n\t\t\t\t}\n\n\t\t\t\t// inherit settings both from settings obj, and the global settings\n\t\t\t\tthis.settings = _.defaults({}, settings, self.settings);\n\n\t\t\t\tif (!_.isUndefined(settings.meta) && !_.isPlainObject(settings.meta)){\n\t\t\t\t\tthrow new Error('Logger: \"meta\" must be an object.');\n\t\t\t\t}\n\n\t\t\t\t// inherit meta settings\n\t\t\t\tthis.meta = _.defaults({}, settings.meta, self.meta);\n\t\t\t}\n\t\t});\n\n\t\treturn Logger;\n\t}\n\n\treturn function(){\n\t\tthis.$get = loggerProvider;\n\t\tthis.settings = {};\n\t\tthis.meta = {};\n\t\tthis.logCounter = 0;\n\t};\n});\n","define('utils/logger/logger-module',['require','angular','./LoggerProvider','utils/console/consoleModule'],function(require){\n\tvar angular = require('angular');\n\tvar Logger = require('./LoggerProvider');\n\n\tvar module = angular.module('logger', [require('utils/console/consoleModule').name]);\n\tmodule.provider('Logger', Logger);\n\n\treturn module;\n});\n","/**\n * An assortment of useful randomization functions.\n * Good so we can easily mock them...\n */\ndefine('utils/database/randomize/randomizeModule',['require','angular','underscore'],function(require){\n\tvar angular = require('angular');\n\tvar _ = require('underscore');\n\tvar module = angular.module('randomize', []);\n\n\t/**\n\t * Just plain random\n\t */\n\n\tmodule.value('randomizeRandom', Math.random);\n\n\t/**\n\t * Just lodash shuffle...\n\t */\n\tmodule.value('randomizeShuffle', _.shuffle);\n\n\t/*\n\t * a function that returns a random integer between 0 and length\n\t * @param length: the upper boundary to the randomization.\n\t */\n\tmodule.value('randomizeInt', function randomInt(length){\n\t\treturn Math.floor(Math.random()*length);\n\t});\n\n\t/**\n\t * a function that returns a random array of integers between 0 and length\n\t * @param length: the upper boundary to the randomization.\n\t */\n\tmodule.value('randomizeRange', function randomArr(length){\n\t\treturn _.shuffle(_.range(length));\n\t});\n\n\treturn module;\n});\n","define('utils/database/mixer/mixer',['underscore'],function(_){\n\n\t/**\n\t * A function that maps a mixer object into a sequence.\n\t *\n\t * The basic structure of such an obect is:\n\t * {\n\t *\t\tmixer: 'functionType',\n\t *\t\tremix : false,\n\t *\t\tdata: [task1, task2]\n\t *\t}\n\t *\n\t * The results of the mix are set into `$parsed` within the original mixer object.\n\t * if remix is true $parsed is returned instead of recomputing\n\t *\n\t * @param {Object} [obj] [a mixer object]\n\t * @returns {Array} [An array of mixed objects]\n\t */\n\n\tmixProvider.$inject = ['randomizeShuffle', 'randomizeRandom'];\n\tfunction mixProvider(shuffle, random){\n\n\t\tfunction mix(obj){\n\t\t\tvar mixerName = obj.mixer;\n\n\t\t\t// if this isn't a mixer\n\t\t\t// make sure we catch mixers that are set with undefined by accident...\n\t\t\tif (!(_.isPlainObject(obj) && 'mixer' in obj)){\n\t\t\t\treturn [obj];\n\t\t\t}\n\n\t\t\tif (_.isUndefined(mix.mixers[mixerName])){\n\t\t\t\tthrow new Error('Mixer: unknow mixer type = ' + mixerName);\n\t\t\t}\n\n\t\t\tif (!obj.remix && obj.$parsed) {\n\t\t\t\treturn obj.$parsed;\n\t\t\t}\n\n\t\t\tobj.$parsed = mix.mixers[mixerName].apply(null, arguments);\n\n\t\t\treturn obj.$parsed;\n\t\t}\n\n\t\tmix.mixers = {\n\t\t\twrapper : function(obj){\n\t\t\t\treturn obj.data;\n\t\t\t},\n\n\t\t\trepeat: function(obj){\n\t\t\t\t\tvar sequence = obj.data || [];\n\t\t\t\t\tvar result = [], i;\n\t\t\t\t\tfor (i=0; i < obj.times; i++){\n\t\t\t\t\t\tresult = result.concat(_.clone(sequence,true));\n\t\t\t\t\t}\n\t\t\t\t\treturn result;\n\t\t\t},\n\n\t\t\t// randomize any elements\n\t\t\trandom: function(obj, context){\n\n\t\t\t\tfunction randomDeepMixer(sequence){\n\t\t\t\t\treturn _.reduce(sequence, function(arr,value){\n\t\t\t\t\t\tif (_.isPlainObject(value) && 'mixer' in value && value.mixer != 'wrapper'){\n\t\t\t\t\t\t\tvar seq = mix(value, context);\n\t\t\t\t\t\t\treturn arr.concat(seq);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn arr.concat([value]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, []);\n\t\t\t\t}\n\n\t\t\t\tvar sequence = obj.data || [];\n\t\t\t\treturn shuffle(randomDeepMixer(sequence));\n\t\t\t},\n\n\t\t\tchoose: function(obj){\n\t\t\t\tvar sequence = obj.data || [];\n\t\t\t\treturn _.take(shuffle(sequence), obj.n ? obj.n : 1);\n\t\t\t},\n\n\t\t\tweightedRandom: function(obj){\n\t\t\t\tvar sequence = obj.data || [];\n\t\t\t\tvar i;\n\t\t\t\tvar total_weight = _.reduce(obj.weights,function (prev, cur) {\n\t\t\t\t\treturn prev + cur;\n\t\t\t\t});\n\n\t\t\t\tvar random_num = random() * total_weight; // cutoff - when we reach this sum - we've reached the desired weight\n\t\t\t\tvar weight_sum = 0;\n\n\t\t\t\tfor (i = 0; i < sequence.length; i++) {\n\t\t\t\t\tweight_sum += obj.weights[i];\n\t\t\t\t\tweight_sum = +weight_sum.toFixed(3);\n\n\t\t\t\t\tif (random_num <= weight_sum) {\n\t\t\t\t\t\treturn [obj.data[i]];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthrow new Error('Mixer: something went wrong with weightedRandom');\n\t\t\t}\n\t\t};\n\n\t\treturn mix;\n\t}\n\n\treturn mixProvider;\n});\n","define('utils/database/mixer/mixerSequential',['require','underscore'],function(require){\n\tvar _ = require('underscore');\n\n\tmixerSequentialProvider.$inject = ['mixer'];\n\tfunction mixerSequentialProvider(mix){\n\t\tfunction mixerSequential(sequence, context, depth){\n\t\t\tvar mixed;\n\t\t\tvar obj = sequence[0];\n\n\t\t\tdepth = depth || 0;\n\t\t\tif (depth++ >= 10){\n\t\t\t\tthrow new Error('Mixer: the mixer allows a maximum depth of 10');\n\t\t\t}\n\n\t\t\tif (_.isUndefined(obj.mixer)){\n\t\t\t\treturn sequence;\n\t\t\t}\n\n\t\t\t// mix obj\n\t\t\tmixed = mix(obj, context);\n\n\t\t\t// remove obj from sequence\n\t\t\tsequence.shift();\n\n\t\t\t// concat mixed and sequence\n\t\t\tmixed = mixed.concat(sequence);\n\n\t\t\treturn _.isUndefined(mixed[0]) || _.isUndefined(mixed[0].mixer) ? mixed : mixerSequential(mixed, context, depth);\n\t\t}\n\n\t\treturn mixerSequential;\n\t}\n\n\treturn mixerSequentialProvider;\n});\n","define('utils/database/mixer/mixerRecursive',['require','underscore'],function(require){\n\tvar _ = require('underscore');\n\n\tmixerRecursiveProvider.$inject = ['mixer'];\n\tfunction mixerRecursiveProvider(mix){\n\t\tfunction mixerRecursive(sequence, context, depth){\n\t\t\tvar mixed = [];\n\n\t\t\tdepth = depth || 0;\n\t\t\tif (depth++ >= 10){\n\t\t\t\tthrow new Error('Mixer: the mixer allows a maximum depth of 10');\n\t\t\t}\n\n\t\t\tmixed = _(sequence)\n\t\t\t\t.map(function(obj){\n\n\t\t\t\t\tif (_.isUndefined(obj.mixer)){\n\t\t\t\t\t\treturn obj;\n\t\t\t\t\t}\n\n\t\t\t\t\t// mix object, and recursively mix the result\n\t\t\t\t\treturn mixerRecursive(mix(obj, context), context, depth);\n\t\t\t\t})\n\t\t\t\t.flatten()\n\t\t\t\t.value();\n\n\t\t\treturn mixed;\n\t\t}\n\n\t\treturn mixerRecursive;\n\t}\n\n\treturn mixerRecursiveProvider;\n});\n","define('utils/database/mixer/mixerSequenceProvider',['require','underscore'],function(require){\n\tvar _ = require('underscore');\n\n\tmixerSequenceProvider.$inject = ['mixer'];\n\tfunction mixerSequenceProvider(mix){\n\n\t\t/**\n\t\t * MixerSequence takes an mixer array and allows browsing back and forth within it\n\t\t * @param {Array} arr [a mixer array]\n\t\t */\n\t\tfunction MixerSequence(arr){\n\t\t\tthis.sequence = arr;\n\t\t\tthis.stack = [];\n\t\t\tthis.add(arr);\n\t\t\tthis.pointer = 0;\n\t\t}\n\n\t\t_.extend(MixerSequence.prototype, {\n\t\t\t/**\n\t\t\t * Add sequence to mixer\n\t\t\t * @param {[type]} arr     Sequence\n\t\t\t * @param {[type]} reverse Whether to start from begining or end\n\t\t\t */\n\t\t\tadd: function(arr, reverse){\n\t\t\t\tthis.stack.push({pointer:reverse ? arr.length : -1,sequence:arr});\n\t\t\t},\n\n\t\t\tproceed: function(direction, context){\n\t\t\t\t// get last subSequence\n\t\t\t\tvar subSequence = this.stack[this.stack.length-1];\n\t\t\t\tvar isNext = (direction === 'next');\n\n\t\t\t\t// if we ran out of sequence\n\t\t\t\t// add the original sequence back in\n\t\t\t\tif (!subSequence) {\n\t\t\t\t\tthrow new Error ('mixerSequence: subSequence not found');\n\t\t\t\t}\n\n\t\t\t\tsubSequence.pointer += isNext ? 1 : -1;\n\n\t\t\t\tvar el = subSequence.sequence[subSequence.pointer];\n\n\t\t\t\t// if we ran out of elements, go to previous level (unless we are on the root sequence)\n\t\t\t\tif (_.isUndefined(el) && this.stack.length > 1){\n\t\t\t\t\tthis.stack.pop();\n\t\t\t\t\treturn this.proceed.call(this,direction,context);\n\t\t\t\t}\n\n\t\t\t\t// if element is a mixer, mix it\n\t\t\t\tif (el && el.mixer){\n\t\t\t\t\tthis.add(mix(el,context), !isNext);\n\t\t\t\t\treturn this.proceed.call(this,direction,context);\n\t\t\t\t}\n\n\t\t\t\t// regular element or undefined (end of sequence)\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\tnext: function(context){\n\t\t\t\tthis.pointer++;\n\t\t\t\treturn this.proceed.call(this, 'next',context);\n\t\t\t},\n\n\t\t\tprev: function(context){\n\t\t\t\tthis.pointer--;\n\t\t\t\treturn this.proceed.call(this, 'prev',context);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Return current element\n\t\t\t * should **never** return a mixer - supposed to abstract them away\n\t\t\t * @return {[type]} undefined or element\n\t\t\t */\n\t\t\tcurrent:function(){\n\t\t\t\t// get last subSequence\n\t\t\t\tvar subSequence = this.stack[this.stack.length-1];\n\n\t\t\t\tif (!subSequence) {\n\t\t\t\t\tthrow new Error ('mixerSequence: subSequence not found');\n\t\t\t\t}\n\n\t\t\t\tvar el = subSequence.sequence[subSequence.pointer];\n\n\t\t\t\tif (!el){\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\n\t\t\t\t// extend element with meta data\n\t\t\t\tel.$meta = this.meta();\n\n\t\t\t\treturn el;\n\t\t\t},\n\n\t\t\tmeta: function(){\n\t\t\t\treturn {\n\t\t\t\t\tnumber: this.pointer,\n\n\t\t\t\t\t// sum of sequence length, minus one (the mixer) for each level of stack except the last\n\t\t\t\t\toutOf:  _.reduce(this.stack, function(memo,sub){return memo + sub.sequence.length-1;},0)+1\n\t\t\t\t};\n\t\t\t}\n\n\t\t});\n\n\t\treturn MixerSequence;\n\t}\n\n\treturn mixerSequenceProvider;\n});\n\n\n\n\n\n\n","define('utils/database/mixer/branching/dotNotation',['require','underscore'],function(require){\n\tvar _ = require('underscore');\n\n\tfunction dotNotation(chain, obj){\n\n\t\tif (_.isString(chain)){\n\t\t\tchain = chain.split('.');\n\t\t}\n\n\t\treturn _.reduce(chain, function(result, link){\n\n\t\t\tif (_.isPlainObject(result) || _.isArray(result)){\n\t\t\t\treturn result[link];\n\t\t\t}\n\n\t\t\treturn undefined;\n\n\t\t}, obj);\n\t}\n\n\treturn dotNotation;\n});\n","define('utils/database/mixer/branching/mixerDotNotationProvider',['require','underscore'],function(require){\n\tvar _ = require('underscore');\n\n\tmixerDotNotationProvider.$inject = ['dotNotation'];\n\tfunction mixerDotNotationProvider(dotNotation){\n\n\t\tfunction mixerDotNotation(chain, obj){\n\n\t\t\tvar escapeSeparatorRegex= /[^\\/]\\./;\n\n\t\t\tif (!_.isString(chain)){\n\t\t\t\treturn chain;\n\t\t\t}\n\n\t\t\t// We do not have a non escaped dot: we treat this as a string\n\t\t\tif (!escapeSeparatorRegex.test(chain)){\n\t\t\t\treturn chain.replace('/.','.');\n\t\t\t}\n\n\t\t\treturn dotNotation(chain, obj);\n\t\t}\n\n\t\treturn mixerDotNotation;\n\t}\n\n\treturn mixerDotNotationProvider;\n\n});\n","define('utils/database/mixer/branching/mixerConditionProvider',['require','underscore'],function(require){\n\tvar _ = require('underscore');\n\n\tmixerConditionProvider.$inject = ['mixerDotNotation', 'piConsole'];\n\tfunction mixerConditionProvider(dotNotation, piConsole){\n\n\t\tfunction mixerCondition(condition, context){\n\t\t\tvar left, right, operator;\n\n\t\t\t// support a condition that is a plain function\n\t\t\tif (_.isFunction(condition)){\n\t\t\t\toperator = condition;\n\t\t\t} else {\n\t\t\t\t// @TODO angular.$parse may be a better candidate for doing this...\n\t\t\t\tleft = dotNotation(condition.compare,context);\n\t\t\t\tright = dotNotation(condition.to,context);\n\t\t\t\toperator = condition.operator;\n\t\t\t}\n\n\t\t\tpiConsole(['conditions']).info('Condition: ', left, operator || 'equals', right, condition);\n\n\t\t\tif (_.isFunction(operator)){\n\t\t\t\treturn !! operator.apply(context,[left, right, context]);\n\t\t\t}\n\n\t\t\tswitch(operator){\n\t\t\t\tcase 'greaterThan':\n\t\t\t\t\tif (_.isNumber(left) && _.isNumber(right)){\n\t\t\t\t\t\treturn +left > +right;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\n\t\t\t\tcase 'greaterThanOrEqual':\n\t\t\t\t\tif (_.isNumber(left) && _.isNumber(right)){\n\t\t\t\t\t\treturn +left >= +right;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\n\t\t\t\tcase 'in':\n\t\t\t\t\tif (_.isArray(right)){\n\t\t\t\t\t\t// binary operator to turn indexOf into binary.\n\t\t\t\t\t\treturn ~_.indexOf(right, left);\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\n\t\t\t\tcase 'exactly':\n\t\t\t\t\treturn left === right;\n\n\t\t\t\tcase 'equals':\n\t\t\t\t\t/* falls through */\n\t\t\t\tdefault:\n\t\t\t\t\tif (_.isUndefined(right)){\n\t\t\t\t\t\treturn !!left;\n\t\t\t\t\t}\n\t\t\t\t\treturn _.isEqual(left, right);\n\t\t\t}\n\n\t\t\treturn operator;\n\t\t}\n\n\t\treturn mixerCondition;\n\t}\n\n\treturn mixerConditionProvider;\n});\n","define('utils/database/mixer/branching/mixerEvaluateProvider',['require','underscore'],function(require){\n\tvar _ = require('underscore');\n\n\tevaluateProvider.$inject = ['mixerCondition'];\n\tfunction evaluateProvider(condition){\n\t\t/**\n\t\t * Checks if a conditions set is true\n\t\t * @param  {Array} conditions [an array of conditions]\n\t\t * @param  {Object} context   [A context for the condition checker]\n\t\t * @return {Boolean}          [Are these conditions true]\n\t\t */\n\n\t\tfunction evaluate(conditions,context){\n\t\t\t// make && the default\n\t\t\t_.isArray(conditions) && (conditions = {and:conditions});\n\n\t\t\tfunction test(cond){return evaluate(cond,context);}\n\n\t\t\t// && objects\n\t\t\tif (conditions.and){\n\t\t\t\treturn _.every(conditions.and, test);\n\t\t\t}\n\t\t\tif (conditions.nand){\n\t\t\t\treturn !_.every(conditions.nand, test);\n\t\t\t}\n\n\t\t\t// || objects\n\t\t\tif (conditions.or){\n\t\t\t\treturn _.some(conditions.or, test);\n\t\t\t}\n\t\t\tif (conditions.nor){\n\t\t\t\treturn !_.some(conditions.nor, test);\n\t\t\t}\n\n\t\t\treturn condition(conditions, context);\n\t\t}\n\n\t\treturn evaluate;\n\t}\n\n\treturn evaluateProvider;\n});\n","/**\n * Registers the branching mixers with the mixer\n * @return {function}         [mixer decorator]\n */\ndefine('utils/database/mixer/branching/mixerBranchingDecorator',['require','underscore'],function(require){\n\n\tvar _ = require('underscore');\n\n\tmixerBranchingDecorator.$inject = ['$delegate','mixerEvaluate','mixerDefaultContext'];\n\tfunction mixerBranchingDecorator(mix, evaluate, mixerDefaultContext){\n\n\t\tmix.mixers.branch = branch;\n\t\tmix.mixers.multiBranch = multiBranch;\n\n\t\treturn mix;\n\n\t\t/**\n\t\t * Branching mixer\n\t\t * @return {Array}         [A data array with objects to continue with]\n\t\t */\n\t\tfunction branch(obj, context){\n\t\t\tcontext = _.extend(context || {}, mixerDefaultContext);\n\t\t\treturn evaluate(obj.conditions, context) ? obj.data || [] : obj.elseData || [];\n\t\t}\n\n\t\t/**\n\t\t * multiBranch mixer\n\t\t * @return {Array}         [A data array with objects to continue with]\n\t\t */\n\t\tfunction multiBranch(obj, context){\n\t\t\tcontext = _.extend(context || {}, mixerDefaultContext);\n\t\t\tvar row;\n\n\t\t\trow = _.find(obj.branches, function(branch){\n\t\t\t\treturn evaluate(branch.conditions, context);\n\t\t\t});\n\n\t\t\tif (row) {\n\t\t\t\treturn row.data || [];\n\t\t\t}\n\n\t\t\treturn obj.elseData || [];\n\t\t}\n\t}\n\n\treturn mixerBranchingDecorator;\n});\n","define('utils/database/mixer/mixerModule',['require','angular','../randomize/randomizeModule','utils/console/consoleModule','./mixer','./mixerSequential','./mixerRecursive','./mixerSequenceProvider','./branching/dotNotation','./branching/mixerDotNotationProvider','./branching/mixerConditionProvider','./branching/mixerEvaluateProvider','./branching/mixerBranchingDecorator'],function(require){\n\n\tvar angular = require('angular');\n\n\tvar module = angular.module('mixer',[\n\t\trequire('../randomize/randomizeModule').name,\n\t\trequire('utils/console/consoleModule').name\n\t]);\n\n\tmodule.service('mixer', require('./mixer'));\n\tmodule.service('mixerSequential', require('./mixerSequential')); // is this even in use?\n\tmodule.service('mixerRecursive', require('./mixerRecursive')); // is this even in use?\n\tmodule.service('MixerSequence', require('./mixerSequenceProvider'));\n\n\tmodule.value('dotNotation', require('./branching/dotNotation'));\n\tmodule.service('mixerDotNotation', require('./branching/mixerDotNotationProvider'));\n\tmodule.service('mixerCondition', require('./branching/mixerConditionProvider'));\n\tmodule.service('mixerEvaluate', require('./branching/mixerEvaluateProvider'));\n\tmodule.config(['$provide', function($provide){\n\t\t$provide.decorator('mixer', require('./branching/mixerBranchingDecorator'));\n\t}]);\n\tmodule.constant('mixerDefaultContext', {});\n\n\treturn module;\n});\n","define('utils/database/collection/collectionProvider',['underscore'],function(_){\n\t/*\n\t * The constructor for an Array wrapper\n\t */\n\n\tfunction collectionService(){\n\n\t\tfunction Collection (arr) {\n\t\t\tif (arr instanceof Collection) {\n\t\t\t\treturn arr;\n\t\t\t}\n\n\t\t\t// Make sure we are creating this array out of a valid argument\n\t\t\tif (!_.isUndefined(arr) && !_.isArray(arr) && !(arr instanceof Collection)) {\n\t\t\t\tthrow new Error('Collections can only be constructed from arrays');\n\t\t\t}\n\n\t\t\tthis.collection = arr || [];\n\t\t\tthis.length = this.collection.length;\n\n\t\t\t// pointer to the current location within the array\n\t\t\t// we start with -1 so that the initial next points to the begining of the array\n\t\t\tthis.pointer = -1;\n\t\t}\n\n\t\t_.extend(Collection.prototype,{\n\n\t\t\tfirst : function first(){\n\t\t\t\tthis.pointer = 0;\n\t\t\t\treturn this.collection[this.pointer];\n\t\t\t},\n\n\t\t\tlast : function last(){\n\t\t\t\tthis.pointer = this.collection.length - 1;\n\t\t\t\treturn this.collection[this.pointer];\n\t\t\t},\n\n\t\t\tend : function end(){\n\t\t\t\tthis.pointer = this.collection.length;\n\t\t\t\treturn undefined;\n\t\t\t},\n\n\t\t\tcurrent : function(){\n\t\t\t\treturn this.collection[this.pointer];\n\t\t\t},\n\n\t\t\tnext : function(){\n\t\t\t\treturn this.collection[++this.pointer];\n\t\t\t},\n\n\t\t\tprevious : function(){\n\t\t\t\treturn this.collection[--this.pointer];\n\t\t\t},\n\n\t\t\t// add list of items to the collection\n\t\t\tadd : function(list){\n\t\t\t\t// dont allow adding nothing\n\t\t\t\tif (!arguments.length) {\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\n\t\t\t\t// make sure list is as an array\n\t\t\t\tlist = _.isArray(list) ? list : [list];\n\t\t\t\tthis.collection = this.collection.concat(list);\n\n\t\t\t\tthis.length = this.collection.length;\n\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// return the item at index\n\t\t\tat: function(index){\n\t\t\t\treturn this.collection[index];\n\t\t\t}\n\t\t});\n\n\n\t\t// Stuff we took out of bootstrap that can augment the collection\n\t\t// **************************************************************\n\t\tvar methods = ['where','filter'];\n\t\tvar slice = Array.prototype.slice;\n\n\t\t// Mix in each Underscore method as a proxy to `Collection#models`.\n\t\t_.each(methods, function(method) {\n\t\t\tCollection.prototype[method] = function() {\n\t\t\t\tvar args = slice.call(arguments);\n\t\t\t\targs.unshift(this.collection);\n\t\t\t\tvar coll = _[method].apply(_,args);\n\t\t\t\treturn new Collection(coll);\n\t\t\t};\n\t\t});\n\n\t\treturn Collection;\n\t}\n\n\treturn collectionService;\n\n\n});\n","define('utils/database/randomizer/randomizerProvider',['underscore'],function(_){\n\n\t// @TODO: repeat currently repeats only the last element, we need repeat = 'set' or something in order to prevent re-randomizing of exRandom...\n\n\tRandomizerProvider.$inject = ['randomizeInt', 'randomizeRange', 'Collection'];\n\tfunction RandomizerProvider(randomizeInt, randomizeRange, Collection){\n\n\t\tfunction Randomizer(){\n\t\t\tthis._cache = {\n\t\t\t\trandom : {},\n\t\t\t\texRandom : {},\n\t\t\t\tsequential : {}\n\t\t\t};\n\t\t}\n\n\t\t_.extend(Randomizer.prototype, {\n\t\t\trandom: random,\n\t\t\texRandom: exRandom,\n\t\t\tsequential: sequential\n\t\t});\n\n\t\treturn Randomizer;\n\n\t\tfunction random(length, seed, repeat){\n\t\t\tvar cache  = this._cache.random;\n\n\t\t\tif (repeat && !_.isUndefined(cache[seed])) {\n\t\t\t\treturn cache[seed];\n\t\t\t}\n\n\t\t\t// save result in cache\n\t\t\tcache[seed] = randomizeInt(length);\n\n\t\t\treturn cache[seed];\n\t\t}\n\n\t\tfunction sequential(length, seed, repeat){\n\t\t\tvar cache = this._cache.sequential;\n\t\t\tvar coll = cache[seed];\n\t\t\tvar result;\n\n\t\t\t// if needed create collection and set it in seed\n\t\t\tif (_.isUndefined(coll)){\n\t\t\t\tcoll = cache[seed] = new Collection(_.range(length));\n\t\t\t\treturn coll.first();\n\t\t\t}\n\n\t\t\tif (coll.length !== length){\n\t\t\t\tthrow new Error(\"This seed  (\"+ seed +\") points to a collection with the wrong length, you can only use a seed for sets of the same length\");\n\t\t\t}\n\n\t\t\t// if this is a repeated element:\n\t\t\tif (repeat) {\n\t\t\t\treturn coll.current();\n\t\t\t}\n\n\t\t\t// if we've reached the end\n\t\t\tresult = coll.next();\n\n\t\t\t// if we've reached the end of the collection (next)\n\t\t\tif (_.isUndefined(result)){\n\t\t\t\treturn coll.first();\n\t\t\t} else {\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\n\t\tfunction exRandom(length, seed, repeat){\n\t\t\tvar cache = this._cache.exRandom;\n\t\t\tvar coll = cache[seed];\n\t\t\tvar result;\n\n\t\t\t// if needed create collection and set it in seed\n\t\t\tif (_.isUndefined(coll)){\n\t\t\t\tcoll = cache[seed] = new Collection(randomizeRange(length));\n\t\t\t\treturn coll.first();\n\t\t\t}\n\n\t\t\tif (coll.length !== length){\n\t\t\t\tthrow new Error(\"This seed  (\"+ seed +\") points to a collection with the wrong length, you can only use a seed for sets of the same length\");\n\t\t\t}\n\n\t\t\t// if this is a repeated element:\n\t\t\tif (repeat) {\n\t\t\t\treturn coll.current();\n\t\t\t}\n\n\t\t\t// if we've reached the end\n\t\t\tresult = coll.next();\n\n\t\t\t// if we've reached the end of the collection (next)\n\t\t\t// we should re-randomize\n\t\t\tif (_.isUndefined(result)){\n\t\t\t\tcoll = cache[seed] = new Collection(randomizeRange(length));\n\t\t\t\treturn coll.first();\n\t\t\t} else {\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\n\t}\n\n\treturn RandomizerProvider;\n\n});\n","define('utils/database/queryProvider',['underscore'],function(_){\n\n\tqueryProvider.$inject = ['Collection','piConsole'];\n\tfunction queryProvider(Collection, $console){\n\n\t\tfunction queryFn(query, collection, randomizer){\n\t\t\tvar coll = new Collection(collection);\n\n\t\t\t// shortcuts:\n\t\t\t// ****************************\n\n\t\t\t// use function instead of query object.\n\t\t\tif (_.isFunction(query)){\n\t\t\t\treturn query(collection);\n\t\t\t}\n\n\t\t\t// pure string query\n\t\t\tif (_.isString(query) || _.isNumber(query)){\n\t\t\t\tquery = {set:query, type:'random'};\n\t\t\t}\n\n\t\t\t// narrow down by set\n\t\t\t// ****************************\n\t\t\tif (query.set){\n\t\t\t\tcoll = coll.where({set:query.set});\n\t\t\t}\n\n\t\t\t// narrow down by data\n\t\t\t// ****************************\n\t\t\tif (_.isString(query.data)){\n\t\t\t\tcoll = coll.filter(function(q){\n\t\t\t\t\treturn q.handle === query.data || (q.data && q.data.handle === query.data);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (_.isPlainObject(query.data)){\n\t\t\t\tcoll = coll.where({data:query.data});\n\t\t\t}\n\n\t\t\tif (_.isFunction(query.data)){\n\t\t\t\tcoll = coll.filter(query.data);\n\t\t\t}\n\n\t\t\t// pick by type\n\t\t\t// ****************************\n\n\t\t\t// the default seed is namespace specific just to minimize the situations where seeds clash across namespaces\n\t\t\tvar seed = query.seed || ('$' + collection.namespace + query.set);\n\t\t\tvar length = coll.length;\n\t\t\tvar repeat = query.repeat;\n\t\t\tvar at;\n\t\t\tvar err;\n\n\t\t\tswitch (query.type){\n\t\t\t\tcase undefined:\n\t\t\t\tcase 'byData':\n\t\t\t\tcase 'random':\n\t\t\t\t\tat = randomizer.random(length,seed,repeat);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'exRandom':\n\t\t\t\t\tat = randomizer.exRandom(length,seed,repeat);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'sequential':\n\t\t\t\t\tat = randomizer.sequential(length,seed,repeat);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'first':\n\t\t\t\t\tat = 0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'last':\n\t\t\t\t\tat = length-1;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error('Unknow query type: ' + query.type);\n\t\t\t}\n\n\t\t\tif (_.isUndefined(coll.at(at))) {\n\t\t\t\terr = new Error('Query failed, object (' + JSON.stringify(query) +\t') not found. If you are trying to apply a template, you should know that they are not supported for inheritance.');\n\t\t\t\t$console('query').error(err);\n\t\t\t\tthrow err;\n\t\t\t}\n\n\t\t\treturn coll.at(at);\n\t\t}\n\n\t\treturn queryFn;\n\t}\n\n\treturn queryProvider;\n});\n","/*\n * inflates an object\n * this function is responsible for inheritance\n *\n * function inflate(source,coll, randomizer, recursive, counter)\n * @param source: the object to inflate\n * @param coll: a collection to inherit from\n * @param randomizer: a randomizer object for the query\n * @param recursive: private use only, is this inside the recursion (true) or top level (false)\n * @param depth: private use only, a counter for the depth of the recursion\n */\ndefine('utils/database/inflateProvider',['require','underscore'],function(require){\n\tvar _ = require('underscore');\n\n\tinflateProvider.$inject = ['databaseQuery','$rootScope','piConsole'];\n\tfunction inflateProvider(query, $rootScope, $console){\n\n\t\tfunction customize(source){\n\t\t\t// check for a custom function and run it if it exists\n\t\t\tif (_.isFunction(source.customize)){\n\t\t\t\tsource.customize.apply(source, [source, $rootScope.global]);\n\t\t\t}\n\t\t\treturn source;\n\t\t}\n\n\t\t// @param source - object to inflate\n\t\t// @param type - trial stimulus or media\n\t\t// @param recursive - whether this is a recursive call or not\n\t\tfunction inflate(source, coll, randomizer, recursive, depth){\n\n\t\t\t// protection against infinte loops\n\t\t\t// ***********************************\n\t\t\tdepth = recursive ? --depth : 10;\n\n\t\t\tif (!depth) {\n\t\t\t\tthrow new Error('Inheritance loop too deep, you can only inherit up to 10 levels down');\n\t\t\t}\n\n\t\t\tif (!_.isPlainObject(source)){\n\t\t\t\tthrow new Error('You are trying to inflate a non object');\n\t\t\t}\n\n\t\t\tvar parent\n\t\t\t\t// create child\n\t\t\t\t, child = _.cloneDeep(source)\n\t\t\t\t, err\n\t\t\t\t, inheritObj = child.inherit;\n\n\n\t\t\t// no inheritance\n\t\t\t// ***********************************\n\n\t\t\t// if we do not need to inherit anything, simply return source\n\t\t\tif (!child.inherit) {\n\t\t\t\t// customize only on the last call (non recursive)\n\t\t\t\t!recursive && customize(child);\n\t\t\t\treturn child;\n\t\t\t}\n\n\t\t\t// get parent\n\t\t\t// ***********************************\n\t\t\tparent = query(inheritObj, coll, randomizer);\n\n\t\t\t// if inherit target was not found\n\t\t\tif (!parent){\n\t\t\t\terr = new Error('Query failed, object (' + JSON.stringify(inheritObj) +\t') not found.');\n\t\t\t\t$console('query').error(err);\n\t\t\t\tthrow err;\n\t\t\t}\n\n\t\t\t// inflate parent (recursively)\n\t\t\tparent = inflate(\n\t\t\t\tparent,\n\t\t\t\tcoll,\n\t\t\t\trandomizer,\n\t\t\t\ttrue,\n\t\t\t\tdepth\n\t\t\t);\n\n\t\t\t// extending the child\n\t\t\t// ***********************************\n\t\t\tif (inheritObj.merge && !_.isArray(inheritObj.merge)){\n\t\t\t\tthrow new Error('Inheritance error: inherit.merge must be an array.');\n\t\t\t}\n\n\t\t\t// start inflating child (we have to extend selectively...)\n\t\t\t_.each(parent, function(value, key){\n\t\t\t\tvar childProp, parentProp;\n\t\t\t\t// if this key is not set yet, copy it out of the parent\n\t\t\t\tif (!(key in child)){\n\t\t\t\t\tchild[key] = _.isFunction(value) ? value : _.cloneDeep(value);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// if we have a merge array,\n\t\t\t\tif (_.indexOf(inheritObj.merge, key) != -1){\n\t\t\t\t\tchildProp = child[key];\n\t\t\t\t\tparentProp = value;\n\n\t\t\t\t\tif (_.isArray(childProp)){\n\t\t\t\t\t\tif (!_.isArray(parentProp)){\n\t\t\t\t\t\t\tthrow new Error('Inheritance error: You tried merging an array with an non array (for \"' + key + '\")');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tchild[key] = childProp.concat(parentProp);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (_.isPlainObject(childProp)){\n\t\t\t\t\t\tif (!_.isPlainObject(parentProp)){\n\t\t\t\t\t\t\tthrow new Error('Inheritance error: You tried merging an object with an non object (for \"' + key + '\")');\n\t\t\t\t\t\t}\n\t\t\t\t\t\t_.extend(childProp, parentProp);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// we want to extend the childs data even if it already exists\n\t\t\t// its ok to shallow extend here (because by definition parent was created for this inflation)\n\t\t\tif (parent.data){\n\t\t\t\tchild.data = _.extend(parent.data, child.data || {});\n\t\t\t}\n\n\t\t\t// Personal customization functions - only if this is the last iteration of inflate\n\t\t\t// This way the customize function gets called only once.\n\t\t\t!recursive && customize(child);\n\n\t\t\t// return inflated trial\n\t\t\treturn child;\n\t\t}\n\n\t\treturn inflate;\n\t}\n\n\treturn inflateProvider;\n});\n","/*\n *\tThe store is a collection of collection devided into namespaces.\n *\tYou can think of every namespace/collection as a table.\n */\ndefine('utils/database/store/storeProvider',['underscore'],function(_){\n\n\tstoreProvider.$inject = ['Collection'];\n\tfunction storeProvider(Collection){\n\n\t\tfunction Store(){\n\t\t\tthis.store = {};\n\t\t}\n\n\t\t_.extend(Store.prototype, {\n\t\t\tcreate: function create(nameSpace){\n\t\t\t\tif (this.store[nameSpace]){\n\t\t\t\t\tthrow new Error('The name space ' + nameSpace + ' already exists');\n\t\t\t\t}\n\t\t\t\tthis.store[nameSpace] = new Collection();\n\t\t\t\tthis.store[nameSpace].namespace = nameSpace;\n\t\t\t},\n\n\t\t\tread: function read(nameSpace){\n\t\t\t\tif (!this.store[nameSpace]){\n\t\t\t\t\tthrow new Error('The name space ' + nameSpace + ' does not exist');\n\t\t\t\t}\n\t\t\t\treturn this.store[nameSpace];\n\t\t\t},\n\n\t\t\tupdate: function update(nameSpace, data){\n\t\t\t\tvar coll = this.read(nameSpace);\n\t\t\t\tcoll.add(data);\n\t\t\t},\n\n\t\t\tdel: function del(nameSpace){\n\t\t\t\tthis.store[nameSpace] = undefined;\n\t\t\t}\n\t\t});\n\n\t\treturn Store;\n\t}\n\n\treturn storeProvider;\n});\n","define('utils/database/databaseProvider',['require','underscore'],function(require){\n\tvar _ = require('underscore');\n\n\tDatabaseProvider.$inject = ['DatabaseStore', 'DatabaseRandomizer', 'databaseInflate', 'templateObj', 'databaseSequence'];\n\tfunction DatabaseProvider(Store, Randomizer, inflate, templateObj, DatabaseSequence){\n\n\t\tfunction Database(){\n\t\t\tthis.store = new Store();\n\t\t\tthis.randomizer = new Randomizer();\n\t\t}\n\n\t\t_.extend(Database.prototype, {\n\t\t\tcreateColl: function(namespace){\n\t\t\t\tthis.store.create(namespace);\n\t\t\t},\n\n\t\t\tgetColl: function(namespace){\n\t\t\t\treturn this.store.read(namespace);\n\t\t\t},\n\n\t\t\tadd: function(namespace, query){\n\t\t\t\tvar coll = this.store.read(namespace);\n\t\t\t\tcoll.add(query);\n\t\t\t},\n\n\t\t\tinflate: function(namespace, query, context){\n\t\t\t\tvar coll = this.getColl(namespace);\n\n\t\t\t\t// inflate\n\t\t\t\tif (!query.$inflated || query.reinflate) {\n\t\t\t\t\tquery.$inflated = inflate(query, coll, this.randomizer);\n\t\t\t\t}\n\n\t\t\t\t// interpolate\n\t\t\t\tif (!query.$templated || query.regenerateTemplate){\n\t\t\t\t\tcontext[namespace + 'Data'] = query.$inflated.data || {};\n\t\t\t\t\tcontext[namespace + 'Meta'] = query.$meta;\n\t\t\t\t\tquery.$templated = templateObj(query.$inflated, context);\n\t\t\t\t}\n\n\t\t\t\treturn query.$templated;\n\t\t\t},\n\n\t\t\tsequence: function(namespace, arr){\n\t\t\t\tif (!_.isArray(arr)){\n\t\t\t\t\tthrow new Error('Sequence must be an array.');\n\t\t\t\t}\n\t\t\t\treturn new DatabaseSequence(namespace, arr, this);\n\t\t\t}\n\t\t});\n\n\t\treturn Database;\n\t}\n\n\treturn DatabaseProvider;\n});\n","define('utils/database/databaseSequenceProvider',['require','underscore'],function(require){\n\tvar _ = require('underscore');\n\n\tSequenceProvider.$inject = ['MixerSequence'];\n\tfunction SequenceProvider(MixerSequence){\n\n\t\t/**\n\t\t * Sequence Constructor:\n\t\t * Manage the progression of a sequence, including parsing (mixing, inheritance and templating).\n\t\t * @param  {String  } namespace [pages or questions (the type of db.Store)]\n\t\t * @param  {Array   } arr       [a sequence to manage]\n\t\t * @param  {Database} db        [the db itself]\n\t\t */\n\n\t\tfunction Sequence(namespace, arr,db){\n\t\t\tthis.namespace = namespace;\n\t\t\tthis.mixerSequence = new MixerSequence(arr);\n\t\t\tthis.db = db;\n\t\t}\n\n\t\t_.extend(Sequence.prototype, {\n\t\t\t// only mix\n\t\t\tnext: function(context){\n\t\t\t\tthis.mixerSequence.next(context);\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// anti mix\n\t\t\tprev: function(context){\n\t\t\t\tthis.mixerSequence.prev(context);\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Return the element currently in focus.\n\t\t\t * It always returns either an element or undefined (mixers are abstrcted away)\n\t\t\t * @param  {[type]} context [description]\n\t\t\t * @return {[type]}         [description]\n\t\t\t */\n\t\t\tcurrent: function(context){\n\t\t\t\tcontext || (context = {});\n\t\t\t\t// must returned an element or undefined\n\t\t\t\tvar obj = this.mixerSequence.current(context);\n\n\t\t\t\t// in case this is the end of the sequence\n\t\t\t\tif (!obj){\n\t\t\t\t\treturn obj;\n\t\t\t\t}\n\n\t\t\t\treturn this.db.inflate(this.namespace, obj, context);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Returns an array of elements, created by proceeding through the whole sequence.\n\t\t\t * @return {[type]} [description]\n\t\t\t */\n\t\t\tall: function(context){\n\t\t\t\tvar sequence = [];\n\n\t\t\t\tvar el = this.next().current(context);\n\t\t\t\twhile (el){\n\t\t\t\t\tsequence.push(el);\n\t\t\t\t\tel = this.next().current(context);\n\t\t\t\t}\n\n\t\t\t\treturn sequence;\n\t\t\t}\n\t\t});\n\n\t\treturn Sequence;\n\t}\n\n\treturn SequenceProvider;\n});\n","define('utils/database/databaseModule',['require','angular','./mixer/mixerModule','./template/templateModule','utils/console/consoleModule','./collection/collectionProvider','./randomizer/randomizerProvider','./queryProvider','./inflateProvider','./store/storeProvider','./databaseProvider','./databaseSequenceProvider'],function(require){\n\n\tvar angular = require('angular');\n\n\tvar module = angular.module('database',[\n\t\t\trequire('./mixer/mixerModule').name,\n\t\t\trequire('./template/templateModule').name,\n\t\t\trequire('utils/console/consoleModule').name\n\t\t])\n\t\t.service('Collection', require('./collection/collectionProvider'))\n\t\t.service('DatabaseRandomizer', require('./randomizer/randomizerProvider'))\n\t\t.service('databaseQuery', require('./queryProvider'))\n\t\t.service('databaseInflate', require('./inflateProvider'))\n\t\t.service('DatabaseStore', require('./store/storeProvider'))\n\t\t.service('Database', require('./databaseProvider'))\n\t\t//.value('Database', require('./main')) // tests the use of the non angular variation\n\t\t.service('databaseSequence', require('./databaseSequenceProvider'));\n\n\treturn module;\n});\n","define('quest/task/questSequenceProvider',['require','underscore'],function(require){\n\tvar _ = require('underscore');\n\n\tfunction SequenceProvider(){\n\n\t\tfunction Sequence(arr, db){\n\t\t\tif (!db){\n\t\t\t\tthrow new Error('Sequences need to take a db as the second argument');\n\t\t\t}\n\n\t\t\tthis.sequence = db.sequence('pages', arr);\n\t\t\tthis.db = db;\n\t\t}\n\n\t\t_.extend(Sequence.prototype, {\n\t\t\tnext: function(context){\n\t\t\t\tthis.sequence.next(context);\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\tprev: function(context){\n\t\t\t\tthis.sequence.prev(context);\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\tcurrent: function(context){\n\t\t\t\tvar questionsArr,\n\t\t\t\t\tpage = this.sequence.current(context);\n\n\t\t\t\tif (!page){\n\t\t\t\t\treturn page;\n\t\t\t\t}\n\n\t\t\t\tif (page.questions){\n\t\t\t\t\tquestionsArr = _.isArray(page.questions) ? page.questions : [page.questions];\n\t\t\t\t} else {\n\t\t\t\t\tquestionsArr = [];\n\t\t\t\t}\n\n\t\t\t\tvar questions = this.db.sequence('questions', questionsArr).all({\n\t\t\t\t\tpagesData: page.data,\n\t\t\t\t\tpagesMeta: page.$meta\n\t\t\t\t});\n\n\t\t\t\t// make sure we don't lose any thing in the orginal page\n\t\t\t\t// @TODO: this seems extremely expensive. Is this really neccesary?\n\t\t\t\tpage = _.clone(page, true);\n\t\t\t\tpage.questions = questions;\n\n\t\t\t\treturn page;\n\t\t\t}\n\t\t});\n\n\t\treturn Sequence;\n\t}\n\n\treturn SequenceProvider;\n});\n","define('quest/task/taskProvider',['underscore', 'angular'], function(_, angular){\n\n\tTaskProvider.$inject = ['$q','Database','Logger','QuestSequence','taskParse', 'dfltQuestLogger', '$rootScope'];\n\tfunction TaskProvider($q, Database, Logger, QuestSequence, parse, dfltQuestLogger,$rootScope){\n\t\tfunction Task(script){\n\t\t\tvar self = this;\n\t\t\tvar settings = script.settings || {};\n\n\t\t\t// save script for later use...\n\t\t\tthis.script = script;\n\t\t\tthis.db = new Database();\n\t\t\tthis.logger = new Logger(dfltQuestLogger);\n\t\t\tthis.logger.setSettings(settings.logger || {});\n\t\t\tthis.q = $q.defer();\n\n\t\t\tif (!_.isArray(script.sequence)){\n\t\t\t\tthrow new Error('Task: no sequence was defined');\n\t\t\t}\n\n\t\t\tthis.sequence = new QuestSequence(script.sequence, this.db);\n\n\t\t\tthis.promise = this.q.promise\n\t\t\t\t.then(function(){\n\t\t\t\t\t// check if there are unlogged questions and log them\n\t\t\t\t\tself.logger.suppressPulse(); // this is the end of the task, we want to post all the logs at once.\n\t\t\t\t\t_.each($rootScope.current.questions, function(quest){\n\t\t\t\t\t\tif(quest.$logged){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * logs to server\n\t\t\t\t\t\t * @param {Object} log : the actual data regarding this log\n\t\t\t\t\t\t * @param {Object} pageData : General inforamtion about this page\n\t\t\t\t\t\t * @param {Object} global : The global object\n\t\t\t\t\t\t */\n\t\t\t\t\t\tself.log(quest, {}, $rootScope.global);\n\t\t\t\t\t\tquest.$logged = true;\n\t\t\t\t\t});\n\t\t\t\t\tself.logger.suppressPulse(false); // turn suppress off\n\t\t\t\t\treturn self.logger.send();\n\t\t\t\t})\n\t\t\t\t['finally'](settings.onEnd || angular.noop); // end only after logging has finished (regardless of success)\n\n\t\t\tparse(script, this.db);\n\t\t}\n\n\t\t_.extend(Task.prototype, {\n\t\t\tlog: function(){\n\t\t\t\tthis.logger.log.apply(this.logger, arguments);\n\t\t\t},\n\t\t\tcurrent: function(){\n\t\t\t\tvar nextObj = this.sequence.current();\n\n\t\t\t\tif (!nextObj){\n\t\t\t\t\tthis.q.resolve();\n\t\t\t\t}\n\n\t\t\t\treturn nextObj;\n\t\t\t},\n\t\t\tnext: function(){\n\t\t\t\treturn this.sequence.next();\n\t\t\t},\n\t\t\tprev: function(){\n\t\t\t\treturn this.sequence.prev();\n\t\t\t}\n\t\t});\n\n\t\treturn Task;\n\t}\n\n\treturn TaskProvider;\n});\n","define('quest/task/parseProvider',[],function(){\n\n\tparseProvider.$inject = ['piConsole'];\n\tfunction parseProvider(piConsole){\n\t\tfunction parse(script, db){\n\t\t\tdb.createColl('pages');\n\t\t\tdb.createColl('questions');\n\n\t\t\tdb.add('pages', script.pagesSets || []);\n\t\t\tdb.add('questions', script.questionsSets || []);\n\n\t\t\tscript.settings || (script.settings = {});\n\n\t\t\tpiConsole.setSettings(script.settings.DEBUG || {});\n\t\t}\n\n\t\treturn parse;\n\t}\n\n\treturn parseProvider;\n});\n","define('quest/task/dfltQuestLogger',['require','underscore'],function(require){\n\tvar _ = require('underscore');\n\n\tfunction dfltQuestLogger(log, pageData, global){\n\t\tglobal;\n\t\tvar logObj = _.extend({},pageData,log);\n\t\tif (logObj.declined) {\n\t\t\tlogObj.response = log.responseObj = undefined;\n\t\t}\n\t\treturn logObj;\n\t}\n\n\treturn dfltQuestLogger;\n\n});\n","define('quest/task/task-module',['require','angular','utils/logger/logger-module','utils/database/databaseModule','utils/console/consoleModule','./questSequenceProvider','./taskProvider','./parseProvider','./dfltQuestLogger'],function(require){\n\n\tvar angular = require('angular');\n\tvar module = angular.module('task', [\n\t\trequire('utils/logger/logger-module').name,\n\t\trequire('utils/database/databaseModule').name,\n\t\trequire('utils/console/consoleModule').name\n\t]);\n\n\tmodule.service('QuestSequence', require('./questSequenceProvider'));\n\tmodule.service('Task', require('./taskProvider'));\n\tmodule.service('taskParse', require('./parseProvider'));\n\n\tmodule.value('dfltQuestLogger', require('./dfltQuestLogger'));\n\n\treturn module;\n});\n","/*\n *\tOne module to rule them all.\n *\tThis module is responsible to pull together all the piquest components.\n *\tCalling it should suffice to activate the whole piquest stuff.\n */\ndefine('quest/questModule',['require','quest/directives/questDirectivesModule','quest/task/task-module'],function(require){\n\n\trequire('quest/directives/questDirectivesModule');\n\trequire('quest/task/task-module');\n\n\tvar module = angular.module('piQuest', ['questDirectives','task']);\n\n\treturn module;\n});\n","/*\n * @name: piMessage Directive\n */\ndefine('message/messageDirective',['require','underscore'],function (require) {\n\n\tvar _ = require('underscore');\n\n\tdirective.$inject = ['$compile', '$rootScope', '$document', 'piConsole'];\n\tfunction directive($compile, $rootScope, $document, $console){\n\t\treturn {\n\t\t\tlink: function($scope, $element) {\n\t\t\t\tvar events = 'keydown';\n\t\t\t\tvar script = $scope.script;\n\t\t\t\tvar newScope = $scope.newScope = $scope.$new();\n\t\t\t\tvar template;\n\t\t\t\tvar context = {\n\t\t\t\t\tglobal : $rootScope.global,\n\t\t\t\t\tcurrent : $rootScope.current,\n\t\t\t\t\ttask: script\n\t\t\t\t};\n\n\t\t\t\t// try to render template\n\t\t\t\ttry {\n\t\t\t\t\ttemplate = _.template(script.$template)(context);\n\t\t\t\t} catch(e){\n\t\t\t\t\ttemplate = script.$template;\n\t\t\t\t\t$console('message').error('failed to render template', e);\n\t\t\t\t}\n\n\t\t\t\t_.extend($scope, context);\n\t\t\t\t$scope.done = done;\n\n\t\t\t\t// listen for events\n\t\t\t\t$document.on(events, onKeydown);\n\t\t\t\t$scope.$on('$destroy',function(){\n\t\t\t\t\t$document.off(events, onKeydown);\n\t\t\t\t});\n\n\t\t\t\t$element.html(template);\n\t\t\t\t$compile($element.contents())(newScope);\n\n\t\t\t\t// check if the we should proceed and if so call done\n\t\t\t\tfunction onKeydown(e){\n\t\t\t\t\t// accept both the keyCode and the key itself\n\t\t\t\t\tvar keyArr = _.isArray(script.keys) ? script.keys : [script.keys];\n\t\t\t\t\tvar keys = _.map(keyArr,function(value){\n\t\t\t\t\t\treturn _.isString(value) ? value.toUpperCase().charCodeAt(0) : value;\n\t\t\t\t\t});\n\n\t\t\t\t\t// event is in the keys array\n\t\t\t\t\t// ~ return 0 only if target was not found\n\t\t\t\t\tif (~_.indexOf(keys, e.which)){\n\t\t\t\t\t\t$scope.done();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfunction done(){\n\t\t\t\t\tnewScope.$destroy();\n\t\t\t\t\t$element.empty();\n\t\t\t\t\t$scope.$emit('message:done');\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\n\n\n\n\treturn directive;\n});\n","/*\n * @name: messageDone Directive\n */\ndefine('message/messageDoneDirective',[],function () {\n\n\tdirective.$inject = [];\n\tfunction directive(){\n\t\treturn {\n\t\t\tlink: function($scope, $element){\n\t\t\t\t$element.on('click', function(){\n\t\t\t\t\t$scope.done();\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t}\n\n\treturn directive;\n});\n","define('message/messageModule',['require','angular','utils/console/consoleModule','./messageDirective','./messageDoneDirective'],function(require){\n\tvar angular = require('angular');\n\tvar module = angular.module('pi.message',[\n\t\trequire('utils/console/consoleModule').name\n\t]);\n\n\tmodule.directive('piMessage', require('./messageDirective'));\n\tmodule.directive('piMessageDone', require('./messageDoneDirective'));\n\n\treturn module;\n});\n","/**\n * @name: taskActivateProvider\n */\ndefine('taskManager/task/taskActivateProvider',['require','underscore'],function(require){\n\n\tvar _ = require('underscore');\n\n\n\tfunction provider(){\n\t\tvar activators = {};\n\n\t\tthis.$get = taskActivateProvider;\n\n\t\tthis.set = function set(name, fn){\n\t\t\tactivators[name] = fn;\n\t\t};\n\n\t\tthis.get = function(name){\n\t\t\treturn activators[name];\n\t\t};\n\t}\n\n\n\ttaskActivateProvider.$inject = ['$q', '$rootScope', '$injector'];\n\tfunction taskActivateProvider($q,$rootScope, $injector){\n\t\tvar self = this;\n\n\t\tfunction taskActivate(task, $element, $scope){\n\t\t\tvar activator;\n\t\t\tvar def = $q.defer();\n\t\t\tvar global = $rootScope.global;\n\t\t\tvar script = task.$script;\n\t\t\tvar destroy;\n\n\t\t\t// get activation function\n\t\t\tif (_.isFunction(script)){\n\t\t\t\tactivator = script;\n\t\t\t}\n\n\t\t\tif (!activator && script && _.isFunction(script.play)){\n\t\t\t\tactivator = _.bind(script.play, script);\n\t\t\t\tactivator.$inject = $injector.annotate(script.play);\n\t\t\t}\n\n\t\t\tif (!activator && script && _.isArray(script.play)){\n\t\t\t\tactivator = _.bind(script.play[script.play.length-1], script);\n\t\t\t\tactivator.$inject = $injector.annotate(script.play);\n\t\t\t}\n\n\n\t\t\tif (!activator && task.type){\n\t\t\t\tactivator = self.get(task.type);\n\t\t\t}\n\n\t\t\tif (!_.isFunction(activator)){\n\t\t\t\tthrow new Error('Activator function not found for the \"' + task.type + '\" task');\n\t\t\t}\n\n\t\t\t// activate task\n\t\t\t/**\n\t\t\t * activation function\n\t\t\t * @param {function} done calback for finishing the task\n\t\t\t * @param {obj} props an object with all the stuff we think we could need...\n\t\t\t * @type {[type]}\n\t\t\t */\n\n\t\t\tdestroy = $injector.invoke(activator, null, {\n\t\t\t\tdone: _.bind(def.resolve,def),\n\t\t\t\ttask: task,\n\t\t\t\tscript: script,\n\t\t\t\t$element: $element,\n\t\t\t\t$scope: $scope,\n\t\t\t\tglobal: global\n\t\t\t});\n\n\t\t\t// if activator returns a function use it to clean up the task\n\t\t\t_.isFunction(destroy) && def.promise['finally'](destroy);\n\n\t\t\treturn def;\n\t\t}\n\n\t\treturn taskActivate;\n\t}\n\n\treturn provider;\n});\n","/*\n * @name: taskDirective\n */\ndefine('taskManager/task/taskDirective',['require','underscore'],function(require){\n\n\tvar _ = require('underscore');\n\n\tdirective.$inject = ['taskActivate','managerCanvas','$document', '$window', '$rootScope'];\n\tfunction directive(activateTask, canvas, $document, $window, $rootScope){\n\t\treturn {\n\t\t\tscope:{\n\t\t\t\ttask: '=piTask'\n\t\t\t},\n\t\t\tlink: function($scope, $element){\n\t\t\t\tvar task = $scope.task;\n\t\t\t\tvar canvasOff, oldTitle;\n\t\t\t\tvar def;\n\t\t\t\tvar promise;\n\t\t\t\tvar proceedObject;\n\t\t\t\tvar settings = $scope.$parent.settings || {};\n\t\t\t\tvar script = task.$script || {};\n\t\t\t\tvar taskName = task.name || script.name;\n\n\t\t\t\tif (!task){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t/**\n\t\t\t\t * listen for skip events\n\t\t\t\t */\n\t\t\t\tif (settings.skip){\n\t\t\t\t\t$document.on('keydown',proceedListener);\n\t\t\t\t\t$scope.$on('$destroy', function(){\n\t\t\t\t\t\t$document.off('keydown', proceedListener);\n\t\t\t\t\t\t$document.off('keydown', skipListener);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t/**\n\t\t\t\t * Setup current object\n\t\t\t\t */\n\t\t\t\t$rootScope.current = $window.piGlobal.current = script.current || {};\n\t\t\t\tif (taskName){\n\t\t\t\t\t// extend current script with the piGlobal object\n\t\t\t\t\t_.extend($rootScope.current, $window.piGlobal[taskName] || {});\n\t\t\t\t\t// set the current object back into the global\n\t\t\t\t\t$window.piGlobal[taskName] = script.current;\n\t\t\t\t}\n\n\t\t\t\t/**\n\t\t\t\t * Activate task\n\t\t\t\t */\n\t\t\t\tdef = activateTask(task, $element, $scope.$new());\n\t\t\t\tpromise = def.promise;\n\n\t\t\t\t/**\n\t\t\t\t * Add and remove canvas\n\t\t\t\t */\n\t\t\t\tcanvasOff = canvas(task.canvas); // apply canvas settings\n\t\t\t\tpromise['finally'](canvasOff); // remove canvas settings\n\n\t\t\t\t/**\n\t\t\t\t * Add and remove title\n\t\t\t\t * if task.title is set, set the title and remove at the end...\n\t\t\t\t */\n\t\t\t\tif (task.title){\n\t\t\t\t\toldTitle = $document[0].title;\n\t\t\t\t\t$document[0].title = task.title;\n\t\t\t\t\tpromise['finally'](function(){$document[0].title = oldTitle;});\n\t\t\t\t}\n\n\t\t\t\tpromise['finally'](function(){\n\t\t\t\t\t$scope.$emit('task:done', proceedObject);\n\t\t\t\t});\n\n\t\t\t\t/**\n\t\t\t\t * Listen for skip events\n\t\t\t\t * F5 = refresh\n\t\t\t\t * esc = set up arrows for prev/next\n\t\t\t\t * @param  {Event} e\n\t\t\t\t */\n\t\t\t\tfunction proceedListener(e){\n\t\t\t\t\tvar which = e.key || e.which || e.keyCode;\n\n\t\t\t\t\t// ctrl r ==> refresh\n\t\t\t\t\tif (which == 82 && e.ctrlKey) {\n\t\t\t\t\t\tproceed(e, 'current');\n\t\t\t\t\t}\n\n\t\t\t\t\t// esc ==> listen for skip direction (once)\n\t\t\t\t\tif(which == 27) {\n\t\t\t\t\t\t$document.one('keydown', skipListener);\n\t\t\t        }\n\t\t\t\t}\n\n\t\t\t\t// skip on left/right key codes\n\t\t\t\tfunction skipListener(e){\n\t\t\t\t\tvar which = e.which || e.keyCode;\n\t\t\t\t\tif (which == 37) {proceed(e, 'prev');}\n\t\t\t\t\tif (which == 39) {proceed(e, 'next');}\n\t\t\t\t}\n\n\t\t\t\t// end task and proceed where needed\n\t\t\t\tfunction proceed(e, target){\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tproceedObject = {type:target, bustCache:true}; // when the deferred is resolved this object is used to tell piqPage where to proceed.\n\t\t\t\t\tdef.resolve();\n\t\t\t\t}\n\n\t\t\t}\n\t\t};\n\t}\n\n\treturn directive;\n});\n","/**\n * The module responsible for the single task.\n * It knows how to load a task and activate it.\n * It also supplies the basic task directive.\n * @return {module} pi.task module.\n */\ndefine('taskManager/task/taskModule',['require','angular','underscore','./taskActivateProvider','./taskDirective'],function(require){\n\n\tvar angular = require('angular');\n\tvar module = angular.module('pi.task',[]);\n\tvar _ = require('underscore');\n\n\tmodule.provider('taskActivate', require('./taskActivateProvider'));\n\tmodule.directive('piTask', require('./taskDirective'));\n\n\t// the tasks defined here essentialy activate the default players for quest/message/pip.\n\n\tmodule.config(['taskActivateProvider', function(activateProvider){\n\n\t\tactivateQuest.$inject = ['done', '$element', '$scope', '$compile', 'script','task'];\n\t\tfunction activateQuest(done, $canvas, $scope, $compile, script, task){\n\t\t\tvar $el;\n\n\t\t\t// update script name\n\t\t\ttask.name && (script.name = task.name);\n\n\t\t\t$scope.script = script;\n\n\t\t\t$canvas.append('<div pi-quest></div>');\n\t\t\t$el = $canvas.contents();\n\t\t\t$compile($el)($scope);\n\n\t\t\t// clean up piQuest\n\t\t\t$el.controller('piQuest').task.promise['finally'](function(){\n\t\t\t\tdone();\n\t\t\t});\n\n\t\t\treturn function questDestroy(){\n\t\t\t\t$el.scope().$destroy();\n\t\t\t\t$el.remove();\n\t\t\t};\n\t\t}\n\n\t\tactivateProvider.set('quest', activateQuest);\n\t}]);\n\n\tmodule.config(['taskActivateProvider', function(activateProvider){\n\t\tactivateMessage.$inject = ['done', '$element', 'task', '$scope','$compile'];\n\t\tfunction activateMessage(done, $canvas, task, $scope, $compile){\n\t\t\tvar $el;\n\n\t\t\t$scope.script = task;\n\n\t\t\t$canvas.append('<div pi-message></div>');\n\t\t\t$el = $canvas.contents();\n\t\t\t$compile($el)($scope);\n\n\t\t\t// clean up\n\t\t\t$scope.$on('message:done', function(){\n\t\t\t\tdone();\n\t\t\t});\n\n\t\t\treturn function destroyMessage(){\n\t\t\t\t$scope.$destroy();\n\t\t\t\t$el.remove();\n\t\t\t};\n\t\t}\n\n\t\tactivateProvider.set('message', activateMessage);\n\t}]);\n\n\tmodule.config(['taskActivateProvider', function(activateProvider){\n\t\tactivatePIP.$inject = ['done', '$element', 'task', 'script'];\n\t\tfunction activatePIP(done, $canvas, task, script){\n\t\t\tvar $el, req;\n\n\t\t\t// load PIP\n\t\t\treq = requirejs.config({\n\t\t\t\tcontext: _.uniqueId(),\n\t\t\t\tbaseUrl:'../bower_components/PIPlayer/dist/js', // can't use packages yet as urls in pip aren't relative...\n\t\t\t\tpaths: {\n\t\t\t\t\t//plugins\n\t\t\t\t\ttext: ['//cdnjs.cloudflare.com/ajax/libs/require-text/2.0.3/text.min', \"../../bower_components/requirejs-text/text\"],\n\n\t\t\t\t\t// Core Libraries\n\t\t\t\t\tjquery: [\"//cdnjs.cloudflare.com/ajax/libs/jquery/1.10.2/jquery.min\",\"../../bower_components/jquery/dist/jquery.min\"],\n\t\t\t\t\tunderscore: [\"//cdnjs.cloudflare.com/ajax/libs/lodash.js/3.5.0/lodash.min\",\"../../bower_components/lodash-compat/lodash.min\"],\n\t\t\t\t\tbackbone: ['//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min', \"../../bower_components/backbone/backbone\"]\n\t\t\t\t},\n\n\t\t\t\tdeps: ['jquery', 'backbone', 'underscore']\n\t\t\t});\n\n\t\t\t// update script name\n\t\t\ttask.name && (script.name = task.name);\n\n\t\t\t$canvas.append('<div pi-player></div>');\n\t\t\t$el = $canvas.contents();\n\t\t\t$el.addClass('pi-spinner');\n\n\t\t\treq(['activatePIP'], function(activate){\n\t\t\t\t$el.removeClass('pi-spinner');\n\t\t\t\tactivate(script, done);\n\t\t\t});\n\n\t\t\treturn function destroyPIP(){\n\t\t\t\t$el.remove();\n\t\t\t\treq(['app/task/main_view'], function(main){\n\t\t\t\t\tmain.deferred.resolve();\n\t\t\t\t\tmain.destroy();\n\t\t\t\t});\n\t\t\t};\n\t\t}\n\n\t\tactivateProvider.set('pip', activatePIP);\n\t}]);\n\n\treturn module;\n});\n","define('taskManager/canvas/canvasConstructor',['require','underscore'],function(require){\n\n\tvar _ = require('underscore');\n\n\t/**\n\t * Takes a map of css rules and applies them.\n\t * Returns a function that returns the page to its former condition.\n\t *\n\t * The rule map is an object of ruleName -> ruleObject.\n\t *\n\t * var ruleObject = {\n\t * \telement : wrapped element to affect\n\t * \tproperty: css property to modify\n\t * }\n\t *\n\t * @param  {Object} map      A hash of rules.\n\t * @param  {Object} settings A hash of ruleName -> value\n\t * @return {Function}        A function that undoes all the previous changes\n\t */\n\tfunction canvasContructor(map, settings){\n\t\tvar offArr;\n\n\t\tif (!_.isPlainObject(map)){\n\t\t\tthrow new Error('canvas(map): You must set a rule map for canvas to work properly');\n\t\t}\n\n\t\t// if settings is undefined return a function that doesn't do anything\n\t\t// just so we don't need to make sure that the user modifies the canvas\n\t\tif (_.isUndefined(settings)){\n\t\t\treturn _.noop;\n\t\t}\n\n\t\tif (!_.isPlainObject(settings)){\n\t\t\tthrow new Error('canvas(settings): canvas settings must be an object');\n\t\t}\n\n\t\t// create an array of off functions to undo any changes by this action\n\t\toffArr = _.map(settings, function(value,key){\n\t\t\tvar rule = map[key];\n\t\t\tif (rule){\n\t\t\t\treturn on(rule.element, rule.property, value);\n\t\t\t} else {\n\t\t\t\tthrow new Error('canvas('+ key +'): unknow key in canvas object.');\n\t\t\t}\n\t\t});\n\n\t\treturn function off(){\n\t\t\t_.forEach(offArr, function(fn){fn.call();});\n\t\t};\n\t}\n\n\tfunction on($el, property, value){\n\t\tvar old = $el.css(property); // save old value\n\t\t$el.css(property, value); // set new value\n\t\treturn _.bind($el.css, $el, property, old); // create off function: bind $el.css(property, old)\n\t}\n\n\treturn canvasContructor;\n\n});\n","define('taskManager/canvas/managerCanvasService',['require','underscore','angular','./canvasConstructor'],function(require){\n\n\tvar _ = require('underscore');\n\tvar angular = require('angular');\n\tvar canvasConstructor = require('./canvasConstructor');\n\n\tmanagerCanvasService.$inject = ['$rootElement', '$document'];\n\tfunction managerCanvasService($rootElement, $document){\n\t\tvar $body = angular.element($document[0].body);\n\n\t\tvar map = {\n\t\t\tbackground \t\t\t: {element: $body, property: 'backgroundColor'},\n\t\t\tcanvasBackground\t: {element: $rootElement, property:'backgroundColor'},\n\t\t\tfontSize \t\t\t: {element: $rootElement, property:'fontSize'},\n\t\t\tfontColor \t\t\t: {element: $rootElement, property:'color'}\n\t\t};\n\n\t\treturn _.bind(canvasConstructor, null, map);\n\t}\n\n\treturn managerCanvasService;\n\n});\n","define('taskManager/canvas/canvasModule',['require','angular','./managerCanvasService'],function(require){\n\n\tvar angular = require('angular');\n\tvar module = angular.module('pi.canvas',[]);\n\n\tmodule.service('managerCanvas', require('./managerCanvasService'));\n\n\treturn module;\n});\n","/**\n * Swap directive\n * Enables a slide-show type interface.\n * It exposes a controller with the next/prev/refresh/empty methods.\n * Each time next is called, the content is re-compiled and animated in, and old content is animated out.\n *\n * @param  {[type]} require [description]\n * @return {[type]}         [description]\n */\ndefine('utils/helperDirectives/piSwap/piSwapDirective',['require','underscore'],function (require) {\n\t// get template\n\tvar _  = require('underscore');\n\n\tswapControler.$inject = ['$scope'];\n\tfunction swapControler($scope){\n\t\tthis.$scope = $scope;\n\t}\n\n\t_.extend(swapControler.prototype, {\n\t\tnext : function(props, options){\n\t\t\tthis.$scope.enter(props, options);\n\t\t},\n\t\tprev: function(props, options){\n\t\t\tthis.$scope.enter(props, options);\n\t\t},\n\t\trefresh: function(props){\n\t\t\tthis.$scope.refresh(props);\n\t\t},\n\t\tempty: function(options){\n\t\t\tthis.$scope.empty(options);\n\t\t}\n\t});\n\n\tswapDirective.$inject = ['$compile', '$animate'];\n\tfunction swapDirective($compile, $animate){\n\t\treturn {\n\t\t\t//replace: true,\n\t\t\ttransclude: true,\n\t\t\tcontroller: swapControler,\n\t\t\tcontrollerAs: 'ctrl',\n\t\t\tcompile: function(){\n\t\t\t\treturn {\n\t\t\t\t\tpre: this.pre,\n\t\t\t\t\tpost: function(){}\n\t\t\t\t};\n\t\t\t},\n\t\t\tpre: function($scope, $element, $attr, $ctrls, $transclude) {\n\t\t\t\t$scope.enter = enter;\n\t\t\t\t$scope.empty = cleanupLast;\n\t\t\t\t$scope.refresh = refresh;\n\n\t\t\t\tvar currentScope, // the scope of the current element\n\t\t\t\t\tcurrentElement, // an entering element (up until it leaves)\n\t\t\t\t\tpreviousElement, // an element that is currently leaving\n\t\t\t\t\tparentElement = $element;\n\n\t\t\t\tfunction cleanupLast(opts) {\n\t\t\t\t\tvar options = opts || {};\n\n\t\t\t\t\tif(previousElement) {\n\t\t\t\t\t\tpreviousElement.remove();\n\t\t\t\t\t\tpreviousElement = null;\n\t\t\t\t\t}\n\t\t\t\t\tif(currentScope) {\n\t\t\t\t\t\tcurrentScope.$destroy();\n\t\t\t\t\t\tcurrentScope = null;\n\t\t\t\t\t}\n\t\t\t\t\tif(currentElement) {\n\t\t\t\t\t\t$animate.leave(currentElement, function() {\n\t\t\t\t\t\t\tpreviousElement = null;\n\t\t\t\t\t\t\toptions.postLeave && options.postLeave();\n\t\t\t\t\t\t});\n\t\t\t\t\t\tpreviousElement = currentElement;\n\t\t\t\t\t\tcurrentElement = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfunction enter(props, opts){\n\t\t\t\t\tvar options = opts || {};\n\t\t\t\t\toptions.pre && options.pre();\n\n\t\t\t\t\tif (!props){\n\t\t\t\t\t\treturn cleanupLast(options);\n\t\t\t\t\t}\n\n\t\t\t\t\t// create new scope and extend it with props\n\t\t\t\t\tvar newScope = _.extend($scope.$new(), props);\n\n\t\t\t\t\t// create new element\n\t\t\t\t\t$transclude(newScope, function(clone){\n\n\t\t\t\t\t\t// @TODO: add animation info\n\t\t\t\t\t\t// clone.addClass(direction); // maybe add this to the parent? how do we control both enter and leave with this method?\n\t\t\t\t\t\taddAnimations(clone, options.animate);\n\n\t\t\t\t\t\t// First send away the previous element (if it exists)\n\t\t\t\t\t\tcleanupLast(options);\n\n\t\t\t\t\t\t// Instantiate new element\n\t\t\t\t\t\tcurrentElement = clone;\n\n\t\t\t\t\t\tcurrentScope = newScope;\n\n\t\t\t\t\t\t// Animate it in\n\t\t\t\t\t\t$animate.enter(currentElement, parentElement, null, function(){\n\t\t\t\t\t\t\toptions.post && options.post();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tfunction refresh(props){\n\t\t\t\t\t_.extend(currentScope, props);\n\t\t\t\t}\n\n\t\t\t\tfunction addAnimations(element, animationsStr){\n\t\t\t\t\tif (!animationsStr){\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar animations = animationsStr.split(\" \");\n\n\t\t\t\t\t_.each(animations, function(animation){\n\t\t\t\t\t\t// Make sure that this animation exists\n\t\t\t\t\t\tif (!$injector.has(\".\" + animation + '-animation')){\n\t\t\t\t\t\t\tpiConsole(['page','animation']).error('Unknown animation type: \"' + animation + '\"');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t});\n\n\t\t\t\t\telement.addClass(animationsStr);\n\t\t\t\t}\n\n\n\t\t\t}\n\t\t};\n\t};\n\n\treturn swapDirective;\n});\n","\ndefine('text!utils/helperDirectives/piSpinner/spinner.html',[],function () { return '<div>\\n\\t<img ng-if=\"spinner\" class=\"pi-logo\" src=\"img/loader.gif\" />\\n\\t<div ng-if=\"!spinner\" ng-transclude></div>\\n</div>';});\n\n","/*\n * @name: spinner Directive\n */\ndefine('utils/helperDirectives/piSpinner/piSpinnerDirective',['require','text!./spinner.html'],function (require) {\n\t// get template\n\tvar template = require('text!./spinner.html');\n\n\tdirective.$inject = [];\n\tfunction directive(){\n\t\treturn {\n\t\t\ttransclude: true,\n\t\t\treplace: true,\n\t\t\ttemplate:template,\n\t\t\trequire: [],\n\t\t\t// controller: '',\n\t\t\t// controllerAs: 'ctrl',\n\t\t\tscope:{\n\t\t\t\tspinner: '=piSpinner'\n\t\t\t}\n\t\t};\n\t}\n\n\treturn directive;\n});\n","define('utils/helperDirectives/helperDirectivesModule',['require','angular','./piSwap/piSwapDirective','./piSpinner/piSpinnerDirective'],function(require){\n\tvar angular = require('angular');\n\tvar module = angular.module('piHelperDirective', []);\n\n\tmodule.directive('piSwap', require('./piSwap/piSwapDirective'));\n\tmodule.directive('piSpinner', require('./piSpinner/piSpinnerDirective'));\n\n\treturn module;\n});\n","define('taskManager/managerService',['require','underscore'],function(require){\n\tvar _ = require('underscore');\n\n\tmanagerService.$inject = ['$rootScope', '$q', 'managerSequence', 'managerTaskLoad', '$injector'];\n\tfunction managerService($rootScope, $q, ManagerSequence, taskLoad, $injector){\n\n\t\t/**\n\t\t * This is the constructor for the manager object.\n\t\t *\n\t\t * The manager is responsible for the interface between the managerDirective and the managerSequence\n\t\t * It deals with loading tasks (pulled from the sequence)\n\t\t * And notifying the directive that a new task is ready to be run.\n\t\t *\n\t\t * listens to manager:next and manager:prev ==> proceeds sequence\n\t\t *\n\t\t * emits manager:loaded <== when a script is loaded\n\t\t *\n\t\t * @param  {Scope} $scope The scope to be notified\n\t\t * @param  {Object} script The manager script to be parsed\n\t\t * @return {Object}\n\t\t */\n\t\tfunction manager($scope, script){\n\t\t\tvar self = this;\n\t\t\tvar settings = script.settings || {};\n\n\t\t\t// make sure this works without a new statement\n\t\t\tif (!(this instanceof manager)){\n\t\t\t\t// jshint newcap:false\n\t\t\t\treturn new manager($scope,script);\n\t\t\t\t// jshint newcap:true\n\t\t\t}\n\n\t\t\tthis.$scope = $scope;\n\t\t\tthis.script = script;\n\n\t\t\t// create sequence\n\t\t\tthis.sequence = new ManagerSequence(script);\n\n\t\t\t// activate all setup stuff\n\t\t\tsetup($scope, settings);\n\n\t\t\t$scope.$on('manager:next', function(event, target){\n\t\t\t\ttarget || (target = {type:'next'});\n\t\t\t\tswitch (target.type){\n\t\t\t\t\tcase 'current':\n\t\t\t\t\t\tself.load(target);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'prev':\n\t\t\t\t\t\tself.prev(target);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'next':\n\t\t\t\t\t\t/* fall through */\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tself.next(target);\n\t\t\t\t}\n\t\t\t});\n\t\t\t$scope.$on('manager:prev', function(){self.prev();});\n\n\t\t}\n\n\t\t_.extend(manager.prototype, {\n\t\t\tnext: function(target){\n\t\t\t\tthis.sequence.next();\n\t\t\t\tthis.load(target);\n\t\t\t},\n\n\t\t\tprev: function(target){\n\t\t\t\tthis.sequence.prev();\n\t\t\t\tthis.load(target);\n\t\t\t},\n\n\t\t\tcurrent: function(){\n\t\t\t\t// taskLoad sets the loaded script into $script\n\t\t\t\treturn this.sequence.current();\n\t\t\t},\n\n\t\t\tload: function(target){\n\t\t\t\tvar task = this.current();\n\t\t\t\tvar $scope = this.$scope;\n\t\t\t\tvar loadOptions = {\n\t\t\t\t\tbaseUrl: this.baseUrl,\n\t\t\t\t\tbustCache: target && target.bustCache\n\t\t\t\t};\n\n\t\t\t\tif (task){\n\t\t\t\t\ttaskLoad(task, loadOptions).then(function(){\n\t\t\t\t\t\t$scope.$emit('manager:loaded');\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t// let the directive deal with the end of the sequence\n\t\t\t\t\t$scope.$emit('manager:loaded');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tsetBaseUrl: function(baseUrl){\n\t\t\t\tthis.baseUrl = baseUrl;\n\t\t\t}\n\t\t});\n\n\t\treturn manager;\n\n\t\t// just to separate the activation of all the settings: KISS\n\t\tfunction setup($scope, settings){\n\t\t\tvar canvas = $injector.get('managerCanvas');\n\t\t\tvar $document = $injector.get('$document');\n\t\t\tvar preloader = $injector.get('piPreloader');\n\t\t\tvar canvasOff;\n\n\t\t\t// activate canvas\n\t\t\tcanvasOff = canvas(settings.canvas);\n\t\t\t$scope.$on('$destroy', canvasOff);\n\n\t\t\t// preload images\n\t\t\tpreloader.loadArr('image',settings.preloadImages || []);\n\n\t\t\t// activate titles\n\t\t\tif (settings.title){\n\t\t\t\t$document[0].title = settings.title;\n\t\t\t}\n\t\t}\n\n\t}\n\n\n\treturn managerService;\n\n});\n\n","define('taskManager/managerSequence',['require','underscore'],function(require){\n\tvar _ = require('underscore');\n\n\tsequenceProvider.$inject = ['Database'];\n\tfunction sequenceProvider(Database){\n\n\t\t/**\n\t\t * The sequence for the manager (essentialy the model).\n\t\t * @param  {Object} script A manager script.\n\t\t * @return {Object}\n\t\t */\n\t\tfunction sequence(script){\n\t\t\tvar db;\n\t\t\t// make sure this works without a new statement\n\t\t\tif (!(this instanceof sequence)){\n\t\t\t\t// jshint newcap:false\n\t\t\t\treturn new sequence(script);\n\t\t\t\t// jshint newcap:true\n\t\t\t}\n\n\t\t\t// setup database\n\t\t\tdb = this.db = new Database();\n\t\t\tdb.createColl('tasks');\n\t\t\tdb.add('tasks', script.tasksSets || []);\n\n\t\t\t// setup sequence\n\t\t\tthis.sequence = db.sequence('tasks', script.sequence);\n\t\t}\n\n\t\t_.extend(sequence.prototype, {\n\t\t\tnext: function(){\n\t\t\t\tthis.sequence.next();\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\tprev: function(){\n\t\t\t\tthis.sequence.prev();\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\tcurrent: function(){\n\t\t\t\treturn this.sequence.current();\n\t\t\t}\n\t\t});\n\n\t\treturn sequence;\n\t}\n\n\treturn sequenceProvider;\n});\n","/**\n * @name: managerLoadService\n * @returns {$q} A $q.promise that returns the target script\n */\ndefine('taskManager/managerLoadService',['require','underscore'],function(require){\n\n\tvar _ = require('underscore');\n\n\tmanagerLoadService.$inject = ['$q', 'managerGetScript'];\n\tfunction managerLoadService($q, getScript){\n\n\t\tfunction managerLoadScript(source){\n\t\t\tvar promise = _.isString(source) ? getScript(source) : source;\n\t\t\treturn $q.when(promise);\n\t\t}\n\n\t\treturn managerLoadScript;\n\t}\n\n\treturn managerLoadService;\n});\n","define('taskManager/managerGetScriptService',['require'],function(require){\n\n\tgetScriptProvider.$inject = ['$q'];\n\tfunction getScriptProvider($q){\n\n\t\t// @TODO: separate the parsing into a different module (make this a dependency)\n\t\tfunction getScript(url, options){\n\t\t\toptions || (options = {});\n\t\t\tvar def = $q.defer(),\n\t\t\t\ttarget = \"\";\n\n\t\t\t// if url doesn't starts with / or has : then add baseUrl\n           \t/^\\/|:/.test(url) || (target += options.baseUrl ? options.baseUrl + '/' : \"\");\n\n            target += url;\n\n            options.isText && (target = 'text!' + target);\n            options.bustCache && (target += \"?bust=\" + (new Date()).getTime());\n\n\t\t\trequire([target], function(script){\n\t\t\t\tdef.resolve(script);\n\t\t\t}, function(err){\n\t\t\t\tdef.reject(err);\n\t\t\t});\n\n\t\t\treturn def.promise;\n\t\t}\n\n\t\treturn getScript;\n\t}\n\n\treturn getScriptProvider;\n\n});\n","/**\n * @name: taskLoadProvider\n * @returns {$q} A $q.promise that returns the target script\n */\ndefine('taskManager/managerTaskLoadService',['require','underscore'],function(require){\n\tvar _ = require('underscore');\n\n\ttaskLoadService.$inject = ['$q', 'managerGetScript', 'piConsole'];\n\tfunction taskLoadService($q, managerGetScript, $console){\n\n\t\tfunction getScript(url, options){\n\t\t\treturn managerGetScript(url, options)\n\t\t\t\t// make sure that the script is defined\n\t\t\t\t// and if not throw an appropriate error\n\t\t\t\t.then(function(script){\n\t\t\t\t\tvar e;\n\t\t\t\t\tif (_.isUndefined(script)){\n\t\t\t\t\t\te = new Error('Task ' + url + ' failed or has not been found. Make sure that you returned the script and that your script does not have any errors');\n\t\t\t\t\t\t$console('task').error(e);\n\t\t\t\t\t\tthrow e;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn script;\n\t\t\t\t});\n\t\t}\n\n\t\tfunction taskLoad(task, options){\n\t\t\tvar promise, script, template;\n\n\t\t\t// script def\n\t\t\tif (task.scriptUrl){\n\t\t\t\tscript = getScript(task.scriptUrl, options);\n\t\t\t} else {\n\t\t\t\tscript = task.script;\n\t\t\t}\n\n\t\t\t// template def\n\t\t\tif (task.templateUrl){\n\t\t\t\ttemplate = getScript(task.templateUrl, _.extend({isText:true},options));\n\t\t\t} else {\n\t\t\t\ttemplate = task.template;\n\t\t\t}\n\n\t\t\tif (!script && !template){\n\t\t\t\tthrow new Error('Tasks must have either a \"script\" property or a \"scriptUrl\" property (or a \"template\" property in specific cases).');\n\t\t\t}\n\n\t\t\tpromise = $q.all({script: $q.when(script), template: $q.when(template)});\n\n\t\t\tpromise.then(function(promises){\n\t\t\t\ttask.$script = promises.script;\n\t\t\t\ttask.$template = promises.template;\n\t\t\t\treturn task;\n\t\t\t}, function(e){\n\t\t\t\t$console('load').error('Failed to load task script - make sure that your URLs are all correct.',e);\n\t\t\t});\n\n\t\t\treturn promise;\n\t\t}\n\n\t\treturn taskLoad;\n\t}\n\n\treturn taskLoadService;\n});\n","/**\n * Should manage various tasks.\n * For now it should simply load and activate a questionnaire.\n * Eventually it should be able to take a sequence of tasks and run them.\n * @name  managerDirctive\n * @return {directive}\n */\ndefine('taskManager/managerDirective',['require','underscore'],function(require){\n\n\tvar _ = require('underscore');\n\n\tmanagerControler.$inject = ['$scope', 'managerService', 'managerLoad', 'piConsole'];\n\tfunction managerControler($scope, ManagerService, managerLoad, piConsole){\n\t\tthis.init = init;\n\n\n\t\tfunction init(source){\n\t\t\tvar ctrl = this;\n\t\t\tvar taskSource;\n\n\t\t\ttry {\n\t\t\t\ttaskSource = $scope.$eval(source); // if source is a plain string eval returns undefined so we want to load this as a url\n\t\t\t} catch(e){\n\t\t\t\t// don't do anything. This means that the source is un compilable...\n\t\t\t} finally {\n\t\t\t\ttaskSource || (taskSource = source);\n\t\t\t}\n\n\t\t\tmanagerLoad(taskSource).then(success,error);\n\n\t\t\tfunction success(script){\n\t\t\t\t// takes taskSource and returns a path or undefined\n\t\t\t\tfunction getPath(path){\n\n\t\t\t\t\tif (!_.isString(path)) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn path.substring(0, path.lastIndexOf('/'));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// keep the script on scope\n\t\t\t\t$scope.script = script;\n\t\t\t\t$scope.settings = (script && script.settings) || {};\n\n\t\t\t\t// create the manager\n\t\t\t\tctrl.manager = new ManagerService($scope, script);\n\t\t\t\tctrl.manager.setBaseUrl(getPath(taskSource));\n\n\t\t\t\t// activate first task\n\t\t\t\t$scope.$emit('manager:next');\n\t\t\t}\n\n\t\t\tfunction error(e){\n\t\t\t\tpiConsole('manager').error('Failed to load ' + taskSource, e);\n\t\t\t}\n\t\t}\n\t}\n\n\tdirective.$inject = ['$q', '$injector', 'piConsole'];\n\tfunction directive($q, $injector,piConsole){\n\t\treturn {\n\t\t\tpriority: 1000,\n\t\t\treplace:true,\n\t\t\ttemplate: '<div pi-swap><div pi-task=\"task\" ng-class=\"{\\'pi-spinner\\':loading}\"></div></div>',\n\t\t\tcontroller: managerControler,\n\t\t\trequire: ['piManager', 'piSwap'],\n\t\t\tlink:  function($scope, $element, attr, ctrl){\n\t\t\t\tvar swap = ctrl[1], thisCtrl = ctrl[0];\n\t\t\t\tvar currentTask, prevTask;\n\n\t\t\t\tthisCtrl.init(attr.piManager);\n\n\t\t\t\t$scope.$on('manager:loaded', loaded);\n\t\t\t\t$scope.$on('task:done', taskDone);\n\t\t\t\t$scope.loading = true;\n\n\t\t\t\tfunction loaded(){\n\t\t\t\t\t$scope.loading = false;\n\n\t\t\t\t\t// keep previous task\n\t\t\t\t\tprevTask = currentTask;\n\n\t\t\t\t\t// get loaded task\n\t\t\t\t\tcurrentTask = thisCtrl.manager.current();\n\t\t\t\t\tpiConsole('manager').debug('Manager:currentTask', currentTask);\n\n\t\t\t\t\t// procced or and manager\n\t\t\t\t\tcurrentTask ? proceed() : done();\n\t\t\t\t}\n\n\t\t\t\tfunction proceed(){\n\t\t\t\t\tvar locals = {prevTask: prevTask, currentTask: currentTask};\n\t\t\t\t\t$qSequence([\n\t\t\t\t\t\t$scope.settings.onPreTask,\n\t\t\t\t\t\tprevTask && prevTask.post,\n\t\t\t\t\t\tcurrentTask.pre,\n\t\t\t\t\t\t_.bind(swap.next, swap, {task:currentTask, settings:$scope.settings}),\n\t\t\t\t\t\tfunction(){\n\t\t\t\t\t\t\t$scope.loading = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t], locals);\n\t\t\t\t}\n\n\t\t\t\tfunction done(){\n\t\t\t\t\tvar locals = {prevTask: prevTask, currentTask: currentTask};\n\t\t\t\t\t$qSequence([\n\t\t\t\t\t\tprevTask && prevTask.post,\n\t\t\t\t\t\t_.bind(swap.empty, swap),\n\t\t\t\t\t\t$scope.settings.onEnd,\n\t\t\t\t\t\tfunction(){\n\t\t\t\t\t\t\t$scope.loading = false;\n\t\t\t\t\t\t\t$scope.$emit('manager:done');\n\t\t\t\t\t\t}\n\t\t\t\t\t], locals);\n\t\t\t\t}\n\n\t\t\t\t/**\n\t\t\t\t * This is called uppon task:done\n\t\t\t\t * It is responsible for proceeding to the following task\n\t\t\t\t * @param  {Event} ev   The event that triggered the taskdone\n\t\t\t\t * @param  {Object} args An object that describes the direction of proceeding\n\t\t\t\t */\n\t\t\t\tfunction taskDone(ev, args){\n\t\t\t\t\tev.stopPropagation();\n\t\t\t\t\t$scope.loading = true;\n\t\t\t\t\t$scope.$emit('manager:next', args);\n\t\t\t\t}\n\n\t\t\t\t/**\n\t\t\t\t * chain a series of functions/promises/undefined\n\t\t\t\t * @param  {Array} arr an array of functions etc.\n\t\t\t\t * @return {promise}\n\t\t\t\t */\n\t\t\t\tfunction $qSequence(arr, locals){\n\t\t\t\t\tvar promise = $q.when();\n\n\t\t\t\t\t_(arr)\n\t\t\t\t\t\t// map into then functions\n\t\t\t\t\t\t.map(function(value){\n\t\t\t\t\t\t\treturn function(){\n\t\t\t\t\t\t\t\tvar prms = _.isFunction(value) ? $injector.invoke(value,null,locals||{}) : value;\n\t\t\t\t\t\t\t\treturn $q.when(prms);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.reduce(function(promise, fn){\n\t\t\t\t\t\t\treturn promise.then(fn, function(e){\n\t\t\t\t\t\t\t\tpiConsole('manager').error('There was an error in the task sequence. ',e);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}, promise);\n\t\t\t\t}\n\n\t\t\t}\n\t\t};\n\t}\n\n\n\treturn directive;\n});\n","define('taskManager/managerTaskDirective',[],function(){\n\n\tfunction directive(){\n\t\treturn {\n\t\t\tpriority: 1000,\n\t\t\ttemplate: '<div pi-manager=\"script\"></div>',\n\t\t\tcompile: function(){\n\t\t\t\treturn {\n\t\t\t\t\t// this need to be pre so that the wrapping directive gets rendered before the template\n\t\t\t\t\tpre: function($scope, $element, $attr){\n\t\t\t\t\t\tvar taskSource;\n\t\t\t\t\t\tvar source = $attr.piManagerTask;\n\t\t\t\t\t\ttry{\n\t\t\t\t\t\t\ttaskSource = $scope.$eval(source);\n\t\t\t\t\t\t} catch(e){}\n\n\t\t\t\t\t\tvar task  = taskSource ? taskSource : {scriptUrl:source};\n\n\t\t\t\t\t\t$scope.script = {\n\t\t\t\t\t\t\tsequence: [task]\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t}\n\n\treturn directive;\n});\n","define('taskManager/managerModule',['require','angular','./task/taskModule','./canvas/canvasModule','utils/utils/utilsModule','utils/helperDirectives/helperDirectivesModule','utils/console/consoleModule','./managerService','./managerSequence','./managerLoadService','./managerGetScriptService','./managerTaskLoadService','./managerDirective','./managerTaskDirective'],function(require){\n\n\tvar angular = require('angular');\n\tvar module = angular.module('taskManager',[\n\t\trequire('./task/taskModule').name,\n\t\trequire('./canvas/canvasModule').name,\n\t\trequire('utils/utils/utilsModule').name,\n\t\trequire('utils/helperDirectives/helperDirectivesModule').name,\n\t\trequire('utils/console/consoleModule').name\n\t]);\n\n\tmodule.service('managerService', require('./managerService'));\n\tmodule.service('managerSequence', require('./managerSequence'));\n\tmodule.service('managerLoad', require('./managerLoadService'));\n\tmodule.service('managerGetScript', require('./managerGetScriptService'));\n\tmodule.service('managerTaskLoad', require('./managerTaskLoadService'));\n\tmodule.directive('piManager', require('./managerDirective'));\n\tmodule.directive('piManagerTask', require('./managerTaskDirective'));\n\n\treturn module;\n});\n","// Adapted from https://gist.github.com/paulirish/1579671 which derived from\n// http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n// http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating\n\n// requestAnimationFrame polyfill by Erik Mller.\n// Fixes from Paul Irish, Tino Zijdel, Andrew Mao, Klemen Slavi, Darius Bacon\n\n// MIT license\n\ndefine('utils/animations/rafPolyfill',[],function() {\n    var vendors = ['webkit', 'moz'];\n    for (var i = 0; i < vendors.length && !window.requestAnimationFrame; ++i) {\n        var vp = vendors[i];\n        window.requestAnimationFrame = window[vp+'RequestAnimationFrame'];\n        window.cancelAnimationFrame = (window[vp+'CancelAnimationFrame'] || window[vp+'CancelRequestAnimationFrame']);\n    }\n    if (\n    \t/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent) || // iOS6 is buggy\n        !window.requestAnimationFrame || !window.cancelAnimationFrame\n    ) {\n        var lastTime = 0;\n        window.requestAnimationFrame = function(callback) {\n            var now = +new Date();\n            var nextTime = Math.max(lastTime + 16, now);\n            return setTimeout(function() { callback(lastTime = nextTime); },\n                              nextTime - now);\n        };\n        window.cancelAnimationFrame = clearTimeout;\n    }\n});\n\n","define('utils/animations/dropInAnimation',[],function(){\n\n\tfunction animation($window, now){\n\n\t\tvar topdx = 60;\n\t\tvar duration = 300;\n\t\tvar raf = $window.requestAnimationFrame;\n\t\tvar rafCancel = $window.cancelAnimationFrame;\n\n\t\treturn {\n\t\t\tenter: function(element, done){\n\t\t\t\tvar el = element[0]; // raw element;\n\t\t\t\tvar cancelId;\n\t\t\t\tvar start = now();\n\n\t\t\t\t// setup\n\t\t\t\telement.css({\n\t\t\t\t\ttop: -topdx +'px'\n\t\t\t\t});\n\n\t\t\t\t// activate animation\n\t\t\t\tcancelId = raf(enter);\n\n\t\t\t\treturn function(canceled){\n\t\t\t\t\tif (canceled){\n\t\t\t\t\t\trafCancel(cancelId);\n\t\t\t\t\t\telement.css({top: '0px'});\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tfunction enter(){\n\t\t\t\t\tvar deltaTime = now() - start;\n\t\t\t\t\tvar proportion = deltaTime/duration;\n\n\t\t\t\t\t// if we're out of time, finish the animation\n\t\t\t\t\tif (deltaTime > duration) {\n\t\t\t\t\t\tel.style.top = 0;\n\t\t\t\t\t\trafCancel(cancelId);\n\t\t\t\t\t\tdone();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tel.style.top = (topdx * (proportion-1)) + 'px';\n\t\t\t\t\tcancelId = raf(enter);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tleave: function(element, done){\n\t\t\t\tvar el = element[0]; // raw element;\n\t\t\t\tvar cancelId;\n\t\t\t\tvar start = now();\n\n\t\t\t\t// activate animation\n\t\t\t\tcancelId = raf(leave);\n\n\t\t\t\treturn function(canceled){\n\t\t\t\t\tif (canceled){\n\t\t\t\t\t\trafCancel(cancelId);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tfunction leave(){\n\t\t\t\t\tvar deltaTime = now() - start;\n\t\t\t\t\tvar proportion = 1-deltaTime/duration;\n\n\t\t\t\t\t// if we're out of time, finish the animation\n\t\t\t\t\tif (deltaTime > duration) {\n\t\t\t\t\t\trafCancel(cancelId);\n\t\t\t\t\t\tdone();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tel.style.top = (topdx * (proportion-1)) + 'px';\n\t\t\t\t\tcancelId = raf(leave);\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\t}\n\n\t// $inject doesn't seem to work??\n \treturn ['$window', 'timerNow', animation];\n});\n","define('utils/animations/fadeAnimation',[],function(){\n\n\tfunction animation($window, now){\n\n\t\tvar duration = 300;\n\t\tvar raf = $window.requestAnimationFrame;\n\t\tvar rafCancel = $window.cancelAnimationFrame;\n\n\t\treturn {\n\t\t\tenter: function(element, done){\n\t\t\t\tvar el = element[0]; // raw element;\n\t\t\t\tvar cancelId;\n\t\t\t\tvar start = now();\n\n\t\t\t\t// setup\n\t\t\t\tel.style.opacity = 0;\n\n\t\t\t\t// activate animation\n\t\t\t\tcancelId = raf(enter);\n\n\t\t\t\treturn function(canceled){\n\t\t\t\t\tif (canceled){\n\t\t\t\t\t\trafCancel(cancelId);\n\t\t\t\t\t\tel.style.opacity = 1;\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tfunction enter(){\n\t\t\t\t\tvar deltaTime = now() - start;\n\t\t\t\t\tvar proportion = deltaTime/duration;\n\n\t\t\t\t\t// if we're out of time, finish the animation\n\t\t\t\t\tif (deltaTime > duration) {\n\t\t\t\t\t\tel.style.opacity = 1;\n\t\t\t\t\t\trafCancel(cancelId);\n\t\t\t\t\t\tdone();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tel.style.opacity = proportion;\n\t\t\t\t\tcancelId = raf(enter);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tleave: function(element, done){\n\t\t\t\tvar el = element[0]; // raw element;\n\t\t\t\tvar cancelId;\n\t\t\t\tvar start = now();\n\n\t\t\t\t// activate animation\n\t\t\t\tcancelId = raf(leave);\n\n\t\t\t\treturn function(canceled){\n\t\t\t\t\tif (canceled){\n\t\t\t\t\t\trafCancel(cancelId);\n\t\t\t\t\t\tel.style.opacity = 0;\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tfunction leave(){\n\t\t\t\t\tvar deltaTime = now() - start;\n\t\t\t\t\tvar proportion = 1-deltaTime/duration;\n\n\t\t\t\t\t// if we're out of time, finish the animation\n\t\t\t\t\tif (deltaTime > duration) {\n\t\t\t\t\t\tel.style.opacity = 0;\n\t\t\t\t\t\trafCancel(cancelId);\n\t\t\t\t\t\tdone();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tel.style.opacity = proportion;\n\t\t\t\t\tcancelId = raf(leave);\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\t}\n\n\t// $inject doesn't seem to work??\n \treturn ['$window', 'timerNow', animation];\n});\n","define('utils/animations/slideAnimation',[],function(){\n\n\tfunction animation($window, now){\n\n\t\tvar duration = 300;\n\t\tvar raf = $window.requestAnimationFrame;\n\t\tvar rafCancel = $window.cancelAnimationFrame;\n\n\t\treturn {\n\t\t\tenter: function(element, done){\n\t\t\t\tvar el = element[0]; // raw element;\n\t\t\t\tvar cancelId;\n\t\t\t\tvar start = now();\n\n\t\t\t\t// setup\n\t\t\t\tel.style.left = '-100%';\n\n\t\t\t\t// activate animation\n\t\t\t\tcancelId = raf(enter);\n\n\t\t\t\treturn function(canceled){\n\t\t\t\t\tif (canceled){\n\t\t\t\t\t\trafCancel(cancelId);\n\t\t\t\t\t\tel.style.left = '0%';\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tfunction enter(){\n\t\t\t\t\tvar deltaTime = now() - start;\n\t\t\t\t\tvar proportion = 1 - deltaTime/duration;\n\n\t\t\t\t\t// if we're out of time, finish the animation\n\t\t\t\t\tif (deltaTime > duration) {\n\t\t\t\t\t\tel.style.left = '0%';\n\t\t\t\t\t\trafCancel(cancelId);\n\t\t\t\t\t\tdone();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tel.style.left = (-proportion*100) + '%';\n\n\t\t\t\t\tcancelId = raf(enter);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tleave: function(element, done){\n\t\t\t\tvar el = element[0]; // raw element;\n\t\t\t\tvar cancelId;\n\t\t\t\tvar start = now();\n\n\t\t\t\t// activate animation\n\t\t\t\tcancelId = raf(leave);\n\n\t\t\t\treturn function(canceled){\n\t\t\t\t\tif (canceled){\n\t\t\t\t\t\trafCancel(cancelId);\n\t\t\t\t\t\tel.style.left = '100%';\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tfunction leave(){\n\t\t\t\t\tvar deltaTime = now() - start;\n\t\t\t\t\tvar proportion = deltaTime/duration;\n\n\t\t\t\t\t// if we're out of time, finish the animation\n\t\t\t\t\tif (deltaTime > duration) {\n\t\t\t\t\t\tel.style.left = '100%';\n\t\t\t\t\t\trafCancel(cancelId);\n\t\t\t\t\t\tdone();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tel.style.left = (proportion*100) + '%';\n\t\t\t\t\tcancelId = raf(leave);\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\t}\n\n\t// $inject doesn't seem to work??\n \treturn ['$window', 'timerNow', animation];\n});\n","define('utils/animations/animationModule',['require','angular','animate','./rafPolyfill','./dropInAnimation','./fadeAnimation','./slideAnimation'],function(require){\n\tvar angular = require('angular');\n\trequire('animate');\n\trequire('./rafPolyfill');\n\n\tvar module = angular.module('pi.animate',['ngAnimate']);\n\n\tmodule.animation('.drop-in', require('./dropInAnimation'));\n\tmodule.animation('.fade', require('./fadeAnimation'));\n\tmodule.animation('.slide', require('./slideAnimation'));\n\n\treturn module;\n});\n","/**\n *\tThe main module that ties the whole application together.\n *\tEssentially, we are creating a module with dependencies on anything interesting...\n */\ndefine('app',['require','angular','underscore','quest/questModule','message/messageModule','taskManager/managerModule','utils/animations/animationModule','utils/console/consoleModule'],function (require) {\n\n\tvar angular = require('angular');\n\tvar _ = require('underscore');\n\n\tvar submodules = [\n\t\trequire('quest/questModule').name,\n\t\trequire('message/messageModule').name,\n\t\trequire('taskManager/managerModule').name,\n\t\trequire('utils/animations/animationModule').name,\n\t\trequire('utils/console/consoleModule').name\n\t];\n\n\tvar app = angular.module('piApp', submodules);\n\n\t// setup the global variable\n\tapp.run(['$rootScope', '$rootElement', '$parse', '$window', function($rootScope, $rootElement, $parse, $window){\n\t\t// @TODO: get these out of here (app.config? app.run?)\n\t\tvar globalAttr = $rootElement.attr('pi-global');\n\t\tvar piGlobal = $parse(globalAttr)($window);\n\n\t\t// create the global object\n\t\twindow.piGlobal || (window.piGlobal = {});\n\t\t$rootScope.global = window.piGlobal;\n\n\t\tif (piGlobal){\n\t\t\t_.extend($rootScope.global, piGlobal);\n\t\t}\n\t}]);\n\n\t// monkey patch an IOS8 problem\n\t// https://github.com/angular/angular.js/issues/9128\n\tapp.config(['$provide', function($provide) {\n\n\t\t// http://ejohn.org/blog/objectgetprototypeof/\n\t    if ( typeof Object.getPrototypeOf !== \"function\" ) {\n\t      if ( typeof \"test\".__proto__ === \"object\" ) {\n\t        Object.getPrototypeOf = function(object){\n\t          return object.__proto__;\n\t        };\n\t      } else {\n\t        Object.getPrototypeOf = function(object){\n\t          // May break if the constructor has been tampered with\n\t          return object.constructor.prototype;\n\t        };\n\t      }\n\t    }\n\n\n\n\t  // Minification-safe hack.\n\t  var $$watchers = '$$watchers',\n\t      $$nextSibling = '$$nextSibling',\n\t      $$childHead = '$$childHead',\n\t      $$childTail = '$$childTail',\n\t      $$listeners = '$$listeners',\n\t      $$listenerCount = '$$listenerCount',\n\t      $id = '$id',\n\t      $$childScopeClass = '$$childScopeClass',\n\t      $parent = '$parent',\n\t      $$prevSibling = '$$prevSibling';\n\n\t  $provide.decorator('$rootScope', ['$delegate', function($rootScope) {\n\t    var proto = Object.getPrototypeOf($rootScope);\n\n\t    function nextUid () {\n\t      return ++$rootScope.$id;\n\t    }\n\n\t    proto.$new = function(isolate) {\n\t      var child;\n\n\t      if (isolate) {\n\t        child = new proto.constructor();\n\t        child.$root = this.$root;\n\t        // ensure that there is just one async queue per $rootScope and its children\n\t        child.$$asyncQueue = this.$$asyncQueue;\n\t        child.$$postDigestQueue = this.$$postDigestQueue;\n\t      } else {\n\t        // Only create a child scope class if somebody asks for one,\n\t        // but cache it to allow the VM to optimize lookups.\n\t        if (!this.$$childScopeClass) {\n\t          this.$$childScopeClass = function() {\n\t            this[$$watchers] = this[$$nextSibling] =\n\t                this[$$childHead] = this[$$childTail] = null;\n\t            this[$$listeners] = {};\n\t            this[$$listenerCount] = {};\n\t            this[$id] = nextUid();\n\t            this[$$childScopeClass] = null;\n\t          };\n\t          this.$$childScopeClass.prototype = this;\n\t        }\n\t        child = new this.$$childScopeClass();\n\t      }\n\t      child['this'] = child;\n\t      child[$parent] = this;\n\t      child[$$prevSibling] = this.$$childTail;\n\t      if (this.$$childHead) {\n\t        this.$$childTail.$$nextSibling = child;\n\t        this.$$childTail = child;\n\t      } else {\n\t        this.$$childHead = this.$$childTail = child;\n\t      }\n\t      return child;\n\t    };\n\n\t    $rootScope.$new = proto.$new;\n\t    return $rootScope;\n\t  }]);\n\n\t}]);\n\n\n\treturn app;\n});\n","define(\"pipScorer/computeD\",[\"jquery\"],function(e){function r(){e.extend(this,{dataArray:{},AnalyzedVar:\"latency\",ErrorVar:\"error\",condVar:\"\",cond1VarValues:[],cond2VarValues:[],parcelVar:\"\",parcelValue:[],fastRT:300,maxFastTrialsRate:.1,minRT:400,maxRT:1e4,maxErrorParcelRate:.4,errorLatency:{use:\"latency\",penalty:600,useForSTD:!0},postSettings:{}})}return e.extend(r.prototype,{setComputeObject:function(r){e.extend(this,r)},setDataArray:function(){var e=window.piGlobal;this.dataArray=e.current.logs}}),r}),define(\"pipScorer/msgMan\",[\"underscore\"],function(e){function r(){this.messages=e.extend({},a)}var a={MessageDef:[],manyErrors:\"There were too many errors made to determine a result.\",tooFast:\"There were too many fast trials to determine a result.\",notEnough:\"There were not enough trials to determine a result.\"};return e.extend(r.prototype,{setMsgObject:function(r){e.extend(this.messages,r)},getScoreMsg:function(r){var a=this.messages.MessageDef;if(!a||!a.length)throw new Error('You must define a \"MessageDef\" array.');var t=parseFloat(r),n=null,o=null,s=\"error: msg was not set\",c=!1;if(e.each(a,function(e){n=parseFloat(e.cut),o=e.message,n>=t&&!c&&(s=o,c=!0)}),!c){var i=a.length,u=a[i-1];s=u.message}return s},getMessage:function(e){return this.messages[e]}}),r}),define(\"pipScorer/parcelMng\",[\"underscore\"],function(e){function r(e){this.parcelArray=[],this.scoreData={},this.msgMan=e}return e.extend(r.prototype,{Init:function(r){var a=this,t=this.msgMan,n=window.piGlobal,o=n.current.logs;a.parcelArray=[],a.scoreData={},a.msgMan=t;var s=r.AnalyzedVar,c=r.ErrorVar,i=r.parcelVar,u=r.parcelValue,l=r.minRT,g=r.maxRT,h=r.fastRT,p=0,f=0,d=0,v=0,m=parseFloat(r.maxFastTrialsRate);if(\"undefined\"==typeof u||0===u.length){d=0,p=0,f=0,v=0;var y={};y.name=\"general\",y.trialIData=[],e.each(o,function(e){e[s]>=l&&e[s]<=g?(d++,1==e.data[c]&&v++,a.validate(y,e,r)&&p++):e[s]<=h&&f++}),a.checkErrors(d,v,r),a.parcelArray[0]=y}else e.each(u,function(t,n){d=0,p=0,f=0,v=0;var u={};u.name=t,u.trialIData=[],e.each(o,function(e){var n=e.data[i];n==t&&(e[s]>=l&&e[s]<=g?(d++,1==e.data[c]&&v++,a.validate(u,e,r)&&p++):e[s]<=h&&f++)}),a.checkErrors(d,v,r),a.parcelArray[n]=u});f/p>m&&(a.scoreData.errorMessage=this.msgMan.getMessage(\"tooFast\"))},checkErrors:function(e,r,a){var t=a.maxErrorParcelRate;r/e>t&&(this.scoreData.errorMessage=this.msgMan.getMessage(\"manyErrors\"))},validate:function(e,r,a){var t=a.errorLatency,n=a.ErrorVar,o=r.data;return\"latency\"==t.use?(e.trialIData.push(r),!0):\"false\"==t.use?\"1\"==o[n]?!1:(e.trialIData.push(r),!0):\"penalty\"==t.use?(e.trialIData.push(r),!0):void 0},addPenalty:function(r,a){var t=a.errorLatency,n=this;if(\"penalty\"==t.use){var o=parseFloat(t.penalty),s=a.ErrorVar,c=a.AnalyzedVar,i=a.condVar,u=a.cond1VarValues,l=a.cond2VarValues,g=r.trialIData,h=r.avgCon1,p=r.avgCon2;e.each(g,function(e){var r=e.data,a=r[s],t=r[i],g=n.checkArray(t,u),f=n.checkArray(t,l);\"1\"==a&&(g?e[c]+=h+o:f&&(e[c]+=p+o))})}},avgAll:function(r){var a=this;e.each(a.parcelArray,function(e){a.avgParcel(e,r)})},avgParcel:function(r,a){var t=this,n=r.trialIData,o=a.condVar,s=a.cond1VarValues,c=a.cond2VarValues,i=a.AnalyzedVar,u=0,l=0,g=0,h=0,p=0,f=0;e.each(n,function(e){var r=e[i],a=e.data;g+=r,f++;var n=a[o],d=t.checkArray(n,s),v=t.checkArray(n,c);d?(h++,u+=r):v&&(p++,l+=r)}),(2>=h||2>=p)&&(t.scoreData.errorMessage=this.msgMan.getMessage(\"notEnough\")),0!==h&&(u/=h),0!==p&&(l/=p),r.avgCon1=u,r.avgCon2=l,r.diff=r.avgCon1-r.avgCon2,0!==f&&(r.avgBoth=g/f),t.addPenalty(r,a)},checkArray:function(e,r){for(var a=0;a<r.length;a++){var t=r[a];if(t==e)return!0}return!1},varianceAll:function(r){var a=this;e.each(a.parcelArray,function(e){a.varianceParcel(e,r)})},varianceParcel:function(r,a){var t=this,n=a.AnalyzedVar,o=r.trialIData,s=a.cond1VarValues,c=a.cond2VarValues,i=a.condVar,u=r.avgBoth,l=0,g=0,h=[],p=[],f=[],d=a.errorLatency,v=d.useForSTD;e.each(o,function(e){var r=e.data,o=e[n],u=a.ErrorVar,l=r[u],g=r[i],f=t.checkArray(g,s),d=t.checkArray(g,c);f?v?h.push(o):\"0\"==l&&h.push(o):d&&(v?p.push(o):\"0\"==l&&h.push(o))}),f=h.concat(p),e.each(f,function(e){var r=e;l=r-u,g+=l*l}),r.variance=g/(f.length-1)},scoreAll:function(r){var a=this,t=0;e.each(a.parcelArray,function(e){a.scoreParcel(e,r),t+=e.score});var n=t/a.parcelArray.length;a.scoreData.score=n.toFixed(2)},scoreParcel:function(e){var r=this,a=Math.sqrt(e.variance);0===a?(r.scoreData.errorMessage=this.msgMan.getMessage(\"notEnough\"),e.score=e.diff):e.score=e.diff/a}}),r}),define(\"pipScorer/Scorer\",[\"jquery\",\"./computeD\",\"./msgMan\",\"./parcelMng\"],function(e,r,a,t){function n(){this.computeData=new r,this.msgMan=new a,this.parcelMng=new t(this.msgMan)}return!!window.console||(console={log:e.noop,error:e.noop}),console.log||(console.log=function(){}),e.extend(n.prototype,{addSettings:function(e,r){switch(e){case\"compute\":this.computeData.setComputeObject(r);break;case\"message\":this.msgMan.setMsgObject(r);break;default:throw new Error('SCORER:addSettings: unknow \"type\" '+e)}},computeD:function(){var e=this.computeData,r=this.parcelMng;e.setDataArray(),r.Init(e),r.avgAll(e),r.varianceAll(e),r.scoreAll(e);var a=r.scoreData,t={};return void 0===a.errorMessage||null===a.errorMessage?(t.FBMsg=this.getFBMsg(a.score),t.DScore=a.score):(t.FBMsg=a.errorMessage,t.DScore=\"\"),t},postToServer:function(r,a,t,n){var o=this.computeData.postSettings||{},s=o.url,c={};return t||(t=o.score),n||(n=o.msg),c[t]=r,c[n]=a,e.post(s,JSON.stringify(c))},dynamicPost:function(r){var a=this.computeData.postSettings||{},t=a.url;return e.post(t,JSON.stringify(r))},getFBMsg:function(e){var r=this.msgMan.getScoreMsg(e);return r}}),n}),define(\"pipScorer\",[\"pipScorer/Scorer\"],function(e){return e});\n//# sourceMappingURL=Scorer.js.map;\ndefine('pipScorer', ['pipScorer/Scorer'], function (main) { return main; });\n\n","define('APIs/APIConstructor',['require','underscore'],function(require){\n\n\twindow.piGlobal || (window.piGlobal = {});\n\n\tvar _ = require('underscore');\n\tvar global = window.piGlobal;\n\n\t/**\n\t * Create a new API\n\t * @param {Object} options\n\t * {\n\t * \t\ttype: 'PIP',\n\t * \t\tsets: ['trial', 'stimulus', 'media']\n\t * }\n\t */\n\tfunction APIconstructor(options){\n\n\t\tfunction API(){\n\t\t\tvar script = this.script = {\n\t\t\t\tname: 'anonymous ' + options.type,\n\t\t\t\tsettings: {},\n\t\t\t\tcurrent: {}, // this is the actual namespace for this PIP\n\t\t\t\tsequence: []\n\t\t\t};\n\n\t\t\tthis.settings = script.settings;\n\n\t\t\t// create set arrays\n\t\t\t_.forEach(options.sets, function(set){\n\t\t\t\tscript[set + 'Sets'] = [];\n\t\t\t});\n\t\t}\n\n\t\t_.forEach(options.sets, function(set){\n\t\t\tAPI.prototype[_.camelCase('add-' + set + '-set')] = add_set(set);\n\t\t});\n\n\t\t_.extend(API.prototype, {\n\n\t\t\tsetName: function(name){\n\t\t\t\tthis.script.name = name;\n\t\t\t},\n\n\t\t\t// settings\n\t\t\taddSettings: function(name, settingsObj){\n\t\t\t\tvar settings;\n\n\n\n\t\t\t\tif (_.isPlainObject(settingsObj)){\n\t\t\t\t\tsettings = this.settings[name] = this.settings[name] || {};\n\t\t\t\t\t_.extend(settings, settingsObj);\n\t\t\t\t} else {\n\t\t\t\t\tthis.settings[name] = settingsObj;\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\taddSequence: function(sequence){\n\t\t\t\tvar script = this.script;\n\t\t\t\t_.isArray(sequence) || (sequence = [sequence]);\n\n\t\t\t\tscript.sequence = script.sequence.concat(sequence);\n\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\taddGlobal: function(obj){\n\t\t\t\tif (!_.isPlainObject(obj)){\n\t\t\t\t\tthrow new Error('global must be an object');\n\t\t\t\t}\n\t\t\t\treturn _.merge(global, obj);\n\t\t\t},\n\n\t\t\tgetGlobal: function(){\n\t\t\t\treturn global;\n\t\t\t},\n\n\t\t\taddCurrent: function(obj){\n\t\t\t\tif (!_.isPlainObject(obj)){\n\t\t\t\t\tthrow new Error('current must be an object');\n\t\t\t\t}\n\t\t\t\treturn _.merge(this.script.current, obj);\n\t\t\t},\n\n\t\t\tgetCurrent: function(){\n\t\t\t\treturn this.script.current;\n\t\t\t},\n\n\t\t\t// push a whole script\n\t\t\taddScript: function(obj){\n\t\t\t\treturn _.merge(this.script,obj);\n\t\t\t},\n\n\t\t\t// returns script (for debuging probably)\n\t\t\tgetScript: function(){\n\t\t\t\treturn this.script;\n\t\t\t},\n\n\t\t\t// name, response, taskName, taskNumber\n\t\t\tpost: function(url, obj){\n\t\t\t\t// just so we can use this in standalone PIP\n\t\t\t\tif (require.defined('jquery')){\n\t\t\t\t\treturn require('jquery' + '').ajax({\n\t\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\t\turl: url,\n\t\t\t\t\t\tdata: JSON.stringify(obj),\n\t\t\t\t\t\tcontentType: \"application/json; charset=utf-8\",\n\t\t\t\t\t\tdataType: \"json\"\n\t\t\t\t\t});\n\n\t\t\t\t\t//.post(url, JSON.stringify(obj));\n\t\t\t\t} else {\n\t\t\t\t\tvar $injector = angular.injector(['ng']);\n\n\t\t\t\t\treturn $injector.invoke(['$http', function($http){\n\t\t\t\t\t\treturn $http.post(url, obj);\n\t\t\t\t\t}]);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tshuffle: function(collection){\n\t\t\t\treturn _.shuffle(collection);\n\t\t\t}\n\t\t});\n\n\t\treturn API;\n\n\t}\n\n\n\t /**\n\t  * Create a function that adds sets of a scpecific type\n\t  * @param {String} type  \tThe type of set setter to create\n\t  * @returns {Function} \tA setter object\n\t  */\n\tfunction add_set(type){\n\n\t\t/**\n\t\t * Adds a set to the targetSet\n\t\t * @param {String, Object} set    \tEither full set object, or the name of this setArr\n\t\t * @param {Array} setArr \t\t\tAn array of objects for this set\n\t\t * @returns {Object} The API object\n\t\t *\n\t\t * use examples:\n\t\t * fn({\n\t\t *   intro: [intro1, intro2],\n\t\t *   Default: [defaultTrial]\n\t\t * })\n\t\t * fn('intro',[intro1, intro2])\n\t\t * fn('Default',defaultTrial)\n\t\t *\n\t\t */\n\t\tfunction setSetter(set, setArr){\n\n\t\t\t// get the sets we want to extend (or create them)\n\t\t\tvar targetSets = this.script[type + \"Sets\"] || (this.script[type + \"Sets\"] = []);\n\t\t\tvar list;\n\n\t\t\tif (_.isPlainObject(set)) {\n\t\t\t\tlist = _(set)\n\t\t\t\t\t// for each set of elements\n\t\t\t\t\t.map(function(value, key){\n\t\t\t\t\t\t// add the set name to each key\n\t\t\t\t\t\t_.each(value, function(v){v.set = key;});\n\t\t\t\t\t\treturn value; // return the set\n\t\t\t\t\t})\n\t\t\t\t\t.flatten() // flatten all sets to a single array\n\t\t\t\t\t.value();\n\t\t\t}\n\n\t\t\tif (_.isArray(set)){\n\t\t\t\tlist = set;\n\t\t\t}\n\n\t\t\tif (_.isString(set)){\n\t\t\t\tlist = _.isArray(setArr) ? setArr : [setArr];\n\t\t\t\tlist = _.map(list, function(value){\n\t\t\t\t\tvalue.set = set;\n\t\t\t\t\treturn value;\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t\t// merge the list into the targetSet\n\t\t\ttargetSets.push.apply(targetSets, list);\n\t\t}\n\n\t\treturn setSetter;\n\t}\n\n\treturn APIconstructor;\n});\n","define('pipAPI/pipAPI',['require','APIs/APIConstructor'],function(require){\n\tvar factory = require('APIs/APIConstructor');\n\n\tvar api = factory({\n\t\ttype: 'PIP',\n\t\tsets: ['trial', 'stimulus','media']\n\t});\n\n\tapi.prototype.addTrialSets = api.prototype.addTrialSet;\n\tapi.prototype.addStimulusSets = api.prototype.addStimulusSet;\n\tapi.prototype.addMediaSets = api.prototype.addMediaSet;\n\n\tapi.prototype.getLogs = function getLogs(){\n\t\treturn this.script.current.logs;\n\t};\n\n\treturn api;\n});\n","define('questAPI/questAPI',['require','APIs/APIConstructor'],function(require){\n\tvar api = require('APIs/APIConstructor');\n\n\treturn api({\n\t\ttype: 'quest',\n\t\tsets: ['pages', 'questions']\n\t});\n});\n","define('managerAPI/managerAPI',['require','APIs/APIConstructor'],function(require){\n\tvar api = require('APIs/APIConstructor');\n\n\treturn api({\n\t\ttype: 'manager',\n\t\tsets: ['tasks']\n\t});\n});\n"]}