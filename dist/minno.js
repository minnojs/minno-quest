var minnoQuest=function(){"use strict";function createCommonjsModule(e,t){return t={exports:{}},e(t,t.exports),t.exports}function APIconstructor(e){function t(){var t=this.script={type:e.type,name:"anonymous "+e.type,settings:{},current:{},sequence:[]};this.settings=t.settings,lodash.forEach(e.sets,function(e){t[e+"Sets"]=[]})}return lodash.forEach(e.sets,function(e){t.prototype[lodash.camelCase("add-"+e+"-set")]=add_set(e)}),lodash.extend(t.prototype,e.static,{setName:function(e){this.script.name=e},addSettings:function(e,t){var n;return lodash.isPlainObject(t)?(n=this.settings[e]=this.settings[e]||{},lodash.extend(n,t)):this.settings[e]=t,this},addSequence:function(e){var t=this.script;return lodash.isArray(e)||(e=[e]),t.sequence=t.sequence.concat(e),this},addGlobal:function(e){if(!lodash.isPlainObject(e))throw new Error("global must be an object");return lodash.merge(global$1,e)},getGlobal:function(){return global$1},addCurrent:function(e){if(!lodash.isPlainObject(e))throw new Error("current must be an object");return lodash.merge(this.script.current,e)},getCurrent:function(){return this.script.current},addScript:function(e){return lodash.merge(this.script,e)},getScript:function(){return this.script},post:function(e,t){return angular.injector(["ng"]).invoke(["$http",function(n){return n.post(e,t)}])},shuffle:function(e){return lodash.shuffle(e)}}),t}function add_set(e){return function(t,n){var r,i=this.script[e+"Sets"]||(this.script[e+"Sets"]=[]);lodash.isPlainObject(t)&&(r=lodash(t).map(function(e,t){return lodash.each(e,function(e){e.set=t}),e}).flatten().value()),lodash.isArray(t)&&(r=t),lodash.isString(t)&&(r=lodash.isArray(n)?n:[n],r=lodash.map(r,function(e){return e.set=t,e})),i.push.apply(i,r)}}function loggerProvider(e,t,n,r){function i(e){this.pending=[],this.sent=[],this.settings={},this.meta={},this.suppress=!1,this.dfltLogFn=e||function(e){return e}}var o=this,a=r.global,s=[];return lodash.set(a,"current.logs",s),lodash.extend(i.prototype,{log:function(){var e=this.settings,t=(e.logFn||this.dfltLogFn).apply(e,arguments);if(!lodash.isEmpty(this.meta)&&!lodash.isPlainObject(t))throw n(["logger"]).debug(t),new Error('Logger: in order to use "meta" the log must be an object.');lodash.extend(t,this.meta),s.push(t),n(["logger"]).debug("Logged: ",t),this.pending.push(t),o.logCounter++,e.pulse&&!this.suppress&&this.pending.length>=e.pulse&&this.send()},send:function(){function r(){return s.resolve()}var i,o=this.settings,a=this.pending,s=t.defer();if(0===a.length)return s.resolve(),s.promise;if(null==o.url)return s.resolve(),s.promise;for(this.pending=[],e.post(o.url,a).then(r,function(){return e.post(o.url,a).then(r,function(){n(["logger"]).error('Failed to send data, it seems the backend is not responding. (sending to: "'+o.url+'")');var e=lodash.result(o,"error");return e&&lodash.isFunction(e.then)?e.then(s.resolve,s.reject):s.reject()})}),i=0;i<a.length;i++)this.sent.push(a[i]);return s.promise},suppressPulse:function(e){this.suppress=!!lodash.isUndefined(e)||e},getCount:function(){return o.logCounter},setSettings:function(e){if(0===arguments.length)return this.settings;if(this.settings=lodash.defaults({},e,o.settings),!lodash.isUndefined(e.meta)&&!lodash.isPlainObject(e.meta))throw new Error('Logger: "meta" must be an object.');this.meta=lodash.defaults({},e.meta,o.meta)}}),i}function consoleProvider(e){function t(t,n){var r=lodash.create(e);return lodash.extend(r,{tags:lodash.isArray(t)?t:[t],force:!!n}),r}return t.setSettings=function(t){e.settings=t},t}function consolePrototypeProvider(e,t){function n(n){return function(){var r,i=this.settings,o=[];if(this.shouldLog(n)){for(r=0;r<arguments.length;r++)o[r]=arguments[r];if(e[n].apply(null,o),i.hideConsole)return;t.$emit("console:log",{time:new Date,type:n,args:o,tags:this.tags})}}}var r={};return lodash.each(LOGFUNCTIONS,function(e){r[e]=n(e)}),r.settings={},r.shouldLog=function(e){var t=this.settings.level||"warn",n=this.settings.tags||"all",r=this.tags;return!(!this.force&&(~lodash.indexOf(LOGFUNCTIONS,t)?LEVELS[e]>LEVELS[t]||"all"!==n&&!lodash.intersection(r,lodash.isArray(n)?n:[n]).length:(this.settings.level="error",this.error('Unknow DEBUG level: "'+t+'". The valid levels are debug>info>warn>error>none'),1)))},r}function directive(e){return{replace:!0,template:template,link:function(t){var n=t.logs=[];t.remove=function(e){var t=lodash.indexOf(n,e);t>-1&&n.splice(t,1)},t.reverse=!0,e.$on("console:log",function(e,t){n.push(t)})}}}function stringify(e,t){if(null==e)return'<i class="text-muted">undefined</i>';if(""===e)return'<i class="text-muted">an empty string</i>';switch(typeof e){case"string":break;case"number":e=""+e;break;case"object":if(e instanceof Error){e=e.message;break}default:e='<a href="javascript:void(0)">'+angular.toJson(e,!!t)+"</a>"}return e}function mixProvider(e,t){function n(e){var t=e.mixer;if(!(lodash.isPlainObject(e)&&"mixer"in e))return[e];if(lodash.isUndefined(n.mixers[t]))throw new Error("Mixer: unknow mixer type = "+t);if(!e.remix&&e.$parsed)return e.$parsed;if(e.$parsed=n.mixers[t].apply(null,arguments),!lodash.isArray(e.$parsed))throw new Error("Mixer: mixers must return an array (mixer: "+t+")");return e.$parsed}function r(e,t){return lodash.reduce(e,function(e,i){if(lodash.isPlainObject(i)&&"mixer"in i&&"wrapper"!=i.mixer&&!i.wrapper){var o=r(n(i,t),t);return e.concat(o)}return e.concat([i])},[])}function i(e,n){var i,o=e.data?r(e.data,n):[],a=e.n||1,s=[],u=lodash.reduce(e.weights,function(e,t){return e+t});for(i=0;i<a;i++)s.push(function(){var n,r=t()*u,i=0;for(n=0;n<o.length;n++)if(i+=e.weights[n],i=+i.toFixed(3),r<=i)return e.data[n];throw new Error("Mixer: something went wrong with weightedRandom")}());return s}return n.mixers={wrapper:function(e){return e.data},repeat:function(e){var t,n=e.data||[],r=[];for(t=0;t<e.times;t++)r=r.concat(lodash.clone(n,!0));return r},random:function(t,n){var i=t.data?r(t.data,n):[];return e(i)},choose:function(t,n){var i=t.data?r(t.data,n):[];return lodash.take(e(i),t.n?t.n:1)},custom:function(e,t){return lodash.isFunction(e.fn)?e.fn(e,t):[]},weightedRandom:i,weightedChoose:i},n}function mixerSequentialProvider(e){function t(n,r,i){var o,a=n[0];if(i=i||0,i++>=10)throw new Error("Mixer: the mixer allows a maximum depth of 10");return lodash.isUndefined(a.mixer)?n:(o=e(a,r),n.shift(),o=o.concat(n),lodash.isUndefined(o[0])||lodash.isUndefined(o[0].mixer)?o:t(o,r,i))}return t}function mixerRecursiveProvider(e){function t(n,r,i){if(i=i||0,i++>=10)throw new Error("Mixer: the mixer allows a maximum depth of 10");return lodash(n).map(function(n){return lodash.isUndefined(n.mixer)?n:t(e(n,r),r,i)}).flatten().value()}return t}function mixerSequenceProvider$1(e){function t(e){this.sequence=e,this.stack=[],this.add(e),this.pointer=0}return lodash.extend(t.prototype,{add:function(e,t){this.stack.push({pointer:t?e.length:-1,sequence:e})},proceed:function(t,n){var r=this.stack[this.stack.length-1],i="next"===t;if(!r)throw new Error("mixerSequence: subSequence not found");r.pointer+=i?1:-1;var o=r.sequence[r.pointer];return lodash.isUndefined(o)&&this.stack.length>1?(this.stack.pop(),this.proceed.call(this,t,n)):o&&o.mixer?(this.add(e(o,n),!i),this.proceed.call(this,t,n)):this},next:function(e){return this.pointer++,this.proceed.call(this,"next",e)},prev:function(e){return this.pointer--,this.proceed.call(this,"prev",e)},current:function(){var e=this.stack[this.stack.length-1];if(!e)throw new Error("mixerSequence: subSequence not found");var t=e.sequence[e.pointer];if(t)return t.$meta=this.meta(),t},meta:function(){return{number:this.pointer,outOf:lodash.reduce(this.stack,function(e,t){return e+t.sequence.length-1},0)+1}}}),t}function dotNotation$1(e,t){if(!lodash.isUndefined(e))return lodash.isString(e)&&(e=e.split(".")),e.reduce(function(e,t){if(lodash.isPlainObject(e)||lodash.isArray(e))return e[t]},t)}function mixerDotNotationProvider$1(e){return function(t,n){return lodash.isString(t)?/[^/]\./.test(t)?e(t,n):t.replace("/.","."):t}}function mixerConditionProvider$1(e){function t(e){var t=e.operator;return lodash.isFunction(e)?e:lodash.has(e,"operator")?lodash.isFunction(t)?t:i[t]:lodash.has(e,"to")?lodash.eq:n}function n(e){return!!e}function r(e){return function(t,n){return!![t,n].every(lodash.isNumber)&&e(t,n)}}var i={gt:r(lodash.gt),greaterThan:r(lodash.gt),gte:r(lodash.gte),greaterThanOrEqual:r(lodash.gte),equals:lodash.eq,in:lodash.rearg(lodash.contains,1,0),contains:lodash.rearg(lodash.contains,1,0),exactly:function(e,t){return e===t},isTruthy:n};return function(n,r){var i=t(n),o=e(n.compare,r),a=e(n.to,r);return n.DEBUG&&console&&console.info("Condition: ",o,n.operator||"equals",a,n),n.negate?!i.apply(r,[o,a,r]):i.apply(r,[o,a,r])}}function mixerBranchingDecorator$1(e,t,n){return e.mixers.branch=function(e,r){return r=lodash.extend(r||{},n),t(e.conditions,r)?e.data||[]:e.elseData||[]},e.mixers.multiBranch=function(e,r){r=lodash.extend(r||{},n);var i;return(i=lodash.find(e.branches,function(e){return t(e.conditions,r)}))?i.data||[]:e.elseData||[]},e}function evaluateProvider(e){function t(n,r){function i(e){return t(e,r)}return lodash.isArray(n)&&(n={and:n}),n.and?lodash.every(n.and,i):n.nand?!lodash.every(n.nand,i):n.or?lodash.some(n.or,i):n.nor?!lodash.some(n.nor,i):e(n,r)}return t}function templateFilter$1(e,t){return function(n,r){if(!~n.indexOf("<%"))return n;r=lodash.extend(r||{},t);try{return lodash.template(n)(r)}catch(t){return e.error('ERROR: "'+t.message+'" in the following template: ',n),""}}}function templateObjProvider$1(e){return function(t,n,r){function i(e){return lodash.isString(e)?o(e):lodash.isArray(e)?e.map(i):lodash.isPlainObject(e)?lodash.mapValues(e,i):e}function o(e){return~e.indexOf("<%")?lodash.template(e)(l):e}var a,s=lodash.get(r,"skip",[]),u={},l=lodash.assign({},n,e);for(a in t)u[a]=-1==s.indexOf(a)?i(t[a]):t[a];return u}}function consolePrototypeProvider$3(e,t){function n(n){return function(){var r,i=this.settings,o=[];if(this.shouldLog(n)){for(r=0;r<arguments.length;r++)o[r]=arguments[r];if(e[n].apply(null,o),i.hideConsole)return;t.$emit("console:log",{time:new Date,type:n,args:o,tags:this.tags})}}}var r={};return lodash.each(LOGFUNCTIONS$1,function(e){r[e]=n(e)}),r.settings={},r.shouldLog=function(e){var t=this.settings.level||"warn",n=this.settings.tags||"all",r=this.tags;return!(!this.force&&(~lodash.indexOf(LOGFUNCTIONS$1,t)?LEVELS$1[e]>LEVELS$1[t]||"all"!==n&&!lodash.intersection(r,lodash.isArray(n)?n:[n]).length:(this.settings.level="error",this.error('Unknow DEBUG level: "'+t+'". The valid levels are debug>info>warn>error>none'),1)))},r}function consoleProvider$3(e){function t(t,n){var r=lodash.create(e);return lodash.extend(r,{tags:lodash.isArray(t)?t:[t],force:!!n}),r}return t.setSettings=function(t){e.settings=t},t}function directive$1(e){return{replace:!0,template:template$1,link:function(t){var n=t.logs=[];t.remove=function(e){var t=lodash.indexOf(n,e);t>-1&&n.splice(t,1)},t.reverse=!0,e.$on("console:log",function(e,t){n.push(t)})}}}function stringify$1(e,t){if(null==e)return'<i class="text-muted">undefined</i>';if(""===e)return'<i class="text-muted">an empty string</i>';switch(typeof e){case"string":break;case"number":e=""+e;break;case"object":if(e instanceof Error){e=e.message;break}default:e='<a href="javascript:void(0)">'+angular.toJson(e,!!t)+"</a>"}return e}function RandomizerProvider(e,t,n){function r(){this._cache={random:{},exRandom:{},sequential:{}}}return lodash.extend(r.prototype,{random:function(t,n,r){var i=this._cache.random;return r&&!lodash.isUndefined(i[n])?i[n]:(i[n]=e(t),i[n])},exRandom:function(e,r,i){var o,a=this._cache.exRandom,s=a[r];if(lodash.isUndefined(s))return(s=a[r]=new n(t(e))).first();if(s.length!==e)throw new Error("This seed  ("+r+") points to a collection with the wrong length, you can only use a seed for sets of the same length");return i?s.current():(o=s.next(),lodash.isUndefined(o)?(s=a[r]=new n(t(e))).first():o)},sequential:function(e,t,r){var i,o=this._cache.sequential,a=o[t];if(lodash.isUndefined(a))return(a=o[t]=new n(lodash.range(e))).first();if(a.length!==e)throw new Error("This seed  ("+t+") points to a collection with the wrong length, you can only use a seed for sets of the same length");return r?a.current():(i=a.next(),lodash.isUndefined(i)?a.first():i)}}),r}function collectionService(){function e(t){if(t instanceof e)return t;if(!(lodash.isUndefined(t)||lodash.isArray(t)||t instanceof e))throw new Error("Collections can only be constructed from arrays");this.collection=t||[],this.length=this.collection.length,this.pointer=-1}lodash.extend(e.prototype,{first:function(){return this.pointer=0,this.collection[this.pointer]},last:function(){return this.pointer=this.collection.length-1,this.collection[this.pointer]},end:function(){this.pointer=this.collection.length},current:function(){return this.collection[this.pointer]},next:function(){return this.collection[++this.pointer]},previous:function(){return this.collection[--this.pointer]},add:function(e){return arguments.length?(e=lodash.isArray(e)?e:[e],this.collection=this.collection.concat(e),this.length=this.collection.length,this):this},at:function(e){return this.collection[e]}});var t=Array.prototype.slice;return lodash.each(["where","filter"],function(n){e.prototype[n]=function(){var r=t.call(arguments);return r.unshift(this.collection),new e(lodash[n].apply(lodash,r))}}),e}function inflateProvider$1(e,t){function n(e){return lodash.isFunction(e.customize)&&e.customize.apply(e,[e,t.global]),e}function r(t,i,o,a,s){if(!(s=a?--s:10))throw new Error("Inheritance loop too deep, you can only inherit up to 10 levels down");if(!lodash.isPlainObject(t))throw new Error("You are trying to inflate a non object ("+JSON.stringify(t)+")");var u,l=lodash.cloneDeep(t),c=l.inherit;if(!l.inherit)return a||n(l),l;if(!(u=e(c,i,o)))throw new Error("Query failed, object ("+JSON.stringify(c)+") not found.");if(u=r(u,i,o,!0,s),c.merge&&!lodash.isArray(c.merge))throw new Error("Inheritance error: inherit.merge must be an array.");return lodash.each(u,function(e,t){var n,r;if(t in l){if(-1!=lodash.indexOf(c.merge,t)){if(n=l[t],r=e,lodash.isArray(n)){if(!lodash.isArray(r))throw new Error('Inheritance error: You tried merging an array with an non array (for "'+t+'")');l[t]=n.concat(r)}if(lodash.isPlainObject(n)){if(!lodash.isPlainObject(r))throw new Error('Inheritance error: You tried merging an object with an non object (for "'+t+'")');l[t]=lodash.extend({},r,n)}}}else l[t]=lodash.isFunction(e)?e:lodash.cloneDeep(e)}),u.data&&(l.data=lodash.extend(u.data,l.data||{})),!a&&n(l),l}return r}function queryProvider$1(e){return function(t,n,r){var i=new e(n);if(lodash.isFunction(t))return t(n);(lodash.isString(t)||lodash.isNumber(t))&&(t={set:t,type:"random"}),t.set&&(i=i.where({set:t.set})),lodash.isString(t.data)&&(i=i.filter(function(e){return e.handle===t.data||e.data&&e.data.handle===t.data})),lodash.isPlainObject(t.data)&&(i=i.where({data:t.data})),lodash.isFunction(t.data)&&(i=i.filter(t.data));var o,a=t.seed||"$"+n.namespace+t.set,s=i.length,u=t.repeat;switch(t.type){case void 0:case"byData":case"random":o=r.random(s,a,u);break;case"exRandom":o=r.exRandom(s,a,u);break;case"sequential":o=r.sequential(s,a,u);break;case"first":o=0;break;case"last":o=s-1;break;default:throw new Error("Unknow query type: "+t.type)}if(lodash.isUndefined(i.at(o)))throw new Error("Query failed, object ("+JSON.stringify(t)+") not found. If you are trying to apply a template, you should know that they are not supported for inheritance.");return i.at(o)}}function DatabaseProvider(e,t,n,r,i){function o(){this.store=new e,this.randomizer=new t}return lodash.extend(o.prototype,{createColl:function(e){this.store.create(e)},getColl:function(e){return this.store.read(e)},add:function(e,t){this.store.read(e).add(t)},inflate:function(e,t,i,o){var a,s=this.getColl(e);try{t.$inflated&&!t.reinflate||(t.$inflated=n(t,s,this.randomizer),t.$templated=null),t.$templated&&!t.$inflated.regenerateTemplate||(i[e+"Meta"]=t.$meta,i[e+"Data"]=r(t.$inflated.data||{},i,o),t.$templated=r(t.$inflated,i,o)),a=t.$templated}catch(e){throw this.onError&&this.onError(e),e}return i.global&&a.addGlobal&&lodash.extend(i.global,a.addGlobal),i.current&&a.addCurrent&&lodash.extend(i.current,a.addCurrent),t.$templated},sequence:function(e,t){if(!lodash.isArray(t))throw new Error("Sequence must be an array.");return new i(e,t,this)}}),o}function storeProvider$1(e){function t(){this.store={}}return lodash.extend(t.prototype,{create:function(t){if(this.store[t])throw new Error("The name space "+t+" already exists");this.store[t]=new e,this.store[t].namespace=t},read:function(e){if(!this.store[e])throw new Error("The name space "+e+" does not exist");return this.store[e]},update:function(e,t){this.read(e).add(t)},del:function(e){this.store[e]=void 0}}),t}function SequenceProvider(e){function t(t,n,r){this.namespace=t,this.mixerSequence=new e(n),this.db=r}return lodash.extend(t.prototype,{next:function(e){return this.mixerSequence.next(e),this},prev:function(e){return this.mixerSequence.prev(e),this},current:function(e,t){e||(e={});var n=this.mixerSequence.current(e);return n?this.db.inflate(this.namespace,n,e,t):n},all:function(e,t){for(var n=[],r=this.next().current(e,t);r;)n.push(r),r=this.next().current(e,t);return n}}),t}function SequenceProvider$1(){function e(e,t){if(!t)throw new Error("Sequences need to take a db as the second argument");this.sequence=t.sequence("pages",e),this.db=t}return lodash.extend(e.prototype,{next:function(e){return this.sequence.next(e),this},prev:function(e){return this.sequence.prev(e),this},current:function(e){var t,n=this.sequence.current(e,{skip:["questions"]});if(!n)return n;t=n.questions?lodash.isArray(n.questions)?n.questions:[n.questions]:[];var r=this.db.sequence("questions",t).all({pagesData:n.data,pagesMeta:n.$meta});return n=lodash.clone(n,!0),n.questions=r,n}}),e}function TaskProvider(e,t,n,r,i,o,a){function s(s){var u=this,l=s.settings||{};if(this.script=s,this.db=new t,this.logger=new n(o),this.logger.setSettings(l.logger||{}),this.q=e.defer(),!lodash.isArray(s.sequence))throw new Error("Task: no sequence was defined");this.sequence=new r(s.sequence,this.db),this.promise=this.q.promise.then(function(){return u.logger.suppressPulse(),lodash.each(a.current.questions,function(e){if(e.$logged)return!0;u.log(e,{},a.global),e.$logged=!0}),u.logger.suppressPulse(!1),u.logger.send()}).finally(l.onEnd||angular.noop),i(s,this.db)}return lodash.extend(s.prototype,{log:function(){this.logger.log.apply(this.logger,arguments)},current:function(){var e=this.sequence.current();return e||this.end(),e},next:function(){return this.sequence.next()},prev:function(){return this.sequence.prev()},end:function(){this.q.resolve()}}),s}function parseProvider(e){return function(t,n){n.createColl("pages"),n.createColl("questions"),n.add("pages",t.pagesSets||[]),n.add("questions",t.questionsSets||[]),t.settings||(t.settings={}),e.setSettings(t.settings.DEBUG||{})}}function dfltQuestLogger(e,t,n){var r=lodash.extend({},t,e);return r.declined&&(r.response=e.responseObj=void 0),r}function stopperProvider(e){function t(){this.startTime=e()}return t.prototype.now=function(){return e()-this.startTime},t}function timerController(e,t){function n(){var t=o.options,a=i.stopper.now(),s=i.targetTime-a;if(a>=i.targetTime)return o.$emit("timer-end"),void(t.removeOnEnd&&i.remove());var u="up"===t.direction?a:s;lodash.extend(o,r(u)),i.timeoutId=e(n,Math.min(100,s)),o.$emit("timer-tick")}function r(e){var t=Math.floor(e/1e3),n=t%3600,r=n%60;return{current:e,hours:Math.floor(t/3600),minutes:Math.floor(n/60),seconds:Math.ceil(r),milis:e%1e3}}var i=this,o={};i.start=function(e){if(!lodash.isPlainObject(e))throw new Error("Timer options must be an object");(o=i.getScope()).options=lodash.defaults(e,{direction:"down",template:"normal",show:!0,removeOnEnd:!0,duration:0}),i.stopper=new t,i.targetTime=1e3*o.options.duration,o.options.show&&i.show(),n()},i.stop=function(){var t=o.options||{};o=i.getScope(),e.cancel(i.timeoutId),t.removeOnEnd&&i.remove()}}function timerDirective(e){return{controller:timerController,priority:400,link:function(t,n,r,i){function o(){a&&a.remove(),a=null}var a,s='<div class="pi-timer well well-sm text-center" style="font-family: monospace;">{{minutes}}:{{zeroPad(seconds)}}</div>',u=t.$new();i.show=function(){a=angular.element(s),n.prepend(a),e(a.contents())(u)},i.remove=o,i.getScope=function(){return u},u.zeroPad=function(e){return e<10?"0"+e:e},t.$on("$destroy",o)}}}function preload(e,t){function n(){r<t.length&&e(t[r++],n)}var r=0;n(),n(),n(),n()}function preloadImg(e,t){var n=new Image;n.onload=t,n.onerror=t,n.src=e}function modalConstructor(e,t,n,r,i){function o(){a&&a.remove(),s&&s.$destroy(),u&&u.resolve(),l.remove(),i.off("keydown",o),t.removeClass("modal-open")}var a,s,u,l=angular.element('<div class="modal-backdrop in"/>');this.open=function(c){var f=c.context||{};return o(),u=r.defer(),s=(c.$scope||e).$new(),s.close=o,i.on("keydown",o),s.header=lodash.template(c.header)(f),s.body=lodash.template(c.body)(f),s.button=lodash.template(c.button)(f),a=angular.element(template$2),t.addClass("modal-open"),t.prepend(l),t.prepend(a),n(a.contents())(s),s.$digest(),u.promise},this.close=o}function questController$1(e,t,n,r,i,o,a,s){var u,l,c=this,f={dflt:NaN,data:e.data};this.scope=e,this.stopper=new t,this.registerModel=function(t,a){function d(e){var n=e.response,r=l.correctValue;return lodash.isNumber(r)&&(r+=""),lodash.isNumber(n)&&(n+=""),lodash.isEqual(r,n)?t.$setValidity("correct",!0):t.$setValidity("correct",!1),e}a=lodash.defaults(a||{},f),l=a.data;var p=n(r.ngModel),h=l.hasOwnProperty("dflt")?l.dflt:a.dflt;e.model=t,u=p(e.$parent),lodash.isUndefined(u)?(u={},p.assign(e.$parent,u)):i(["question"]).warn('This question has already been in use: "'+u.name+'"'),l.name||i(["question"]).warn("There is a question without a name! I'd tell you what it is, but it has no name!"),c.log=t.$modelValue=u,lodash.defaults(u,{name:l.name,response:h,serial:s()}),e.response=t.$viewValue=u.response,t.$formatters.push(function(e){return e.response}),t.$parsers.push(function(e){var t=c.stopper.now();return u.response=e,u.latency=t,u.pristineLatency||(u.pristineLatency=t),u}),e.$watch("response",function(e,n){lodash.isEqual(e,n)||(t.$setViewValue(e),o(l.onChange,{log:u}))}),e.$on("$destroy",function(){o(l.onDestroy,{log:u})}),l.correct&&(t.$parsers.push(d),l.response=d(this.log)),o(l.onCreate,{log:u})},e.$on("quest:submit",function(e){e.preventDefault(),u.declined=void 0,u.submitLatency=c.stopper.now(),o(l.onSubmit,{log:u})}),e.$on("quest:decline",function(e){e.preventDefault(),u.declined=!0,u.submitLatency=c.stopper.now(),o(l.onDecline,{log:u})}),e.$on("quest:timeout",function(e){e.preventDefault(),u.timeout=!0,o(l.onTimeout,{log:u})})}function guidFactory(){var e=0;return function(){return e++}}function piQuestCtrl(e,t,n,r,i,o){var a,s=new n(e.script),u=t.global,l=t.current||{};this.task=s,this.timerSetup=function(t){var n=lodash.get(e,"script.settings.timer");n&&(t.start(n),t.getScope().$on("timer-end",function(){function e(){s.end()}var t=n.message;t?(lodash.isString(t)&&(t={body:t}),lodash.defaults(t,{header:"Timer Done",$context:a}),o.open(t).then(e)):e()}),e.$on("$destroy",lodash.bind(t.stop,t)))},l.questions||(l.questions={}),a={global:u,current:l,questions:l.questions},lodash.extend(r,a),lodash.extend(i,a),s.next(),e.$on("quest:next",function(t,n){s.next(n),e.$emit("quest:newPage")}),e.$on("quest:prev",function(t,n){s.prev(n),e.$emit("quest:newPage")}),e.$on("quest:log",function(t,n,r){s.log(n,r,e.global)})}function directive$2(e,t,n,r){return{controller:piQuestCtrl,terminal:!0,replace:!0,template:"<div pi-timer></div>",require:["piQuest","piTimer"],link:function(i,o,a,s){function u(){p&&(p.remove(),p=null),f&&(f.$destroy(),f=null),d&&(t.leave(d,function(){p=null}),p=d,d=null)}function l(){var n=m.current();if(n){var r=i.$new(),a=jqLite(template$3);r.page=n,c(a,n.animate),u(),d=e(a)(r),t.enter(d,o),(f=r).$emit("quest:updated")}else u()}function c(e,t){if(t){var i=t.split(" ");lodash.each(i,function(e){n.has("."+e+"-animation")||r(["page","animation"]).error('Unknown animation type: "'+e+'"')}),e.addClass(t)}}var f,d,p,h=s[0],m=h.task,v=s[1];h.timerSetup(v),i.$on("quest:refresh",function(){f.page=m.current()}),i.$on("quest:newPage",l),l()}}}function piqPageCtrl(e,t,n,r){var i=this;e.global=n.global,e.current=n.current,this.harvest=function(t){var n=e.current.questions;lodash.each(e.page.questions,function(r){if(r.name&&(t||r.lognow)){var o=n[r.name];o.$logged||(e.$emit("quest:log",o,i.log),o.$logged=!0)}})},e.submit=function(t){var n=e.pageForm.$valid;if(e.submitAttempt=!0,!n&&!0!==t)return!0;e.$broadcast("quest:submit"),i.proceed(),e.$emit("quest:next")},e.decline=function(t){var n=angular.element(t.target);"double"!==this.page.decline||n.hasClass("active")?(e.$broadcast("quest:decline"),i.proceed(),e.$emit("quest:next")):n.addClass("active")},e.prev=function(){i.proceed(),e.$emit("quest:prev")},this.proceed=function(){i.timer.stop(),i.harvest(e.page.lognow)},this.setup=function(t){function o(){(a.timer.submitOnEnd||lodash.isUndefined(a.timer.submitOnEnd))&&e.submit(!0)}var a=e.page;i.timer=t,i.log={name:a.name,startTime:+new Date},a.timer&&(t.start(a.timer),t.getScope().$on("timer-end",function(){var t,s=a.timer.message;i.log.timeout=!0,e.$broadcast("quest:timeout"),s?(t={pagesMeta:a.$meta,pagesData:a.data,global:n.global,current:n.current},lodash.isString(s)&&(s={body:s}),lodash.defaults(s,{header:"Timer Done",$context:t,$scope:e}),r.open(s).then(o)):o()}))},e.$watch("current.questions",function(){e.$emit("quest:refresh")},!0),e.$on("quest:submit:now",function(){e.submit()})}function directive$3(e){return{replace:!0,controller:piqPageCtrl,template:template$4,require:["piqPage","piTimer"],link:function(t,n,r,i){var o=t.page;e.scrollTo(0,0),i[0].setup(i[1]),lodash.isFunction(o.pageValidation)&&t.$watch(function(){t.pageForm.$setValidity("pageValidation",o.pageValidation(o,t.current))})}}}function capitaliseFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}function directive$4(e,t){return{replace:!0,template:template$5,priority:5,scope:{data:"=questData",current:"=questCurrent"},link:function(n,r){var i=n.data.type||"text",o=r.children().eq(2),a=PREFIX+capitaliseFirstLetter(i);if(!t.has(a+"Directive"))throw new Error('Unknown question type: "'+i+'"');a=lodash.kebabCase(a),o.attr(a,!0),e(o)(n)}}}function textDirective(){return{replace:!0,template:function(e,t){return"questText"in t?textTemplate:textareaTemplate},require:["form","ngModel"],controller:"questController",controllerAs:"ctrl",scope:{data:"=questData"},link:function(e,t,n,r){var i=r[0],o=r[1],a=e.ctrl,s=e.data;e.form=i,e.maxlengthLimit=function(t){var n=angular.element(t.target).val(),r=s.maxlength||n.length;e.response=n.slice(0,r)},a.registerModel(o,{dflt:""}),s.autoSubmit&&t.bind("keydown keypress",function(t){13===t.which&&(e.$apply(function(){e.$emit("quest:submit:now")}),t.preventDefault())})}}}function selectMixerProvider(e,t){return function(n,r){var i=t(n);return i=lodash.map(i,function(e,t){return lodash.isPlainObject(e)||(e={text:e}),lodash.isUndefined(e.value)&&(e.value=r.numericValues?t+1:e.text),e}),r.reverse&&(i=lodash(i).reverse().value()),r.randomize&&(i=e(i)),lodash.each(i,function(e,t){e.order=t}),i}}function directive$6(e,t){return{replace:!0,template:template$7,require:["ngModel","form"],controller:"questController",controllerAs:"ctrl",scope:{data:"=questData"},link:function(n,r,i,o){var a=o[0],s=n.ctrl;n.form=o[1],s.registerModel(a,{dflt:NaN}),n.quest={answers:e(n.data.answers||[],n.data)},n.chooseText="chooseText"in n.data&&n.data.chooseText,n.autoSubmit=function(){t(function(){n.$emit("quest:submit:now")})}}}}function directive$7(e,t,n){return{replace:!0,require:["ngModel"],controller:"questController",controllerAs:"ctrl",scope:{data:"=questData"},link:function(r,i,o,a){function s(e){var t=u;return t.$isEmpty(e)?void t.$setValidity("required",!1):(t.$setValidity("required",!0),e)}var u=a[0],l=r.ctrl,c=r.data;switch(i.html(template$8),n(i.contents())(r),l.registerModel(u,{dflt:NaN}),r.quest={answers:e(r.data.answers||[],r.data)},r.$watch("responseObj",function(e,t){e!==t&&(r.response=e&&e.value)}),r.data.required&&(u.$formatters.push(s),u.$parsers.unshift(s),s(r.response)),r.data.buttons?r.data.style="horizontal":"horizontal"==r.data.style&&(r.data.buttons=!0),r.listCss={},r.listItemCss={},c.style){case"horizontal":r.listClass="btn-group btn-group-justified btn-group-lg",r.listItemClass="btn btn-select";break;case"multiButtons":r.listClass="btn-toolbar",r.listItemClass="btn  btn-select",r.listCss.lineHeight=2.8;break;case"list":default:r.listClass="list-group",r.listItemClass="list-group-item"}c.minWidth&&(r.listItemCss.minWidth=c.minWidth),r.autoSubmit=function(e){r.data.autoSubmit&&angular.element(e.currentTarget).hasClass(t.activeClass)&&r.$emit("quest:submit:now")}}}}function directive$8(e){return{replace:!0,template:template$9,require:["^?piqPage","ngModel"],controller:"questController",controllerAs:"ctrl",scope:{data:"=questData"},link:function(t,n,r,i){function o(e){return s.$setValidity("required",!s.$isEmpty(e)),e}var a=t.ctrl,s=i[1],u=t.data;switch(a.registerModel(s,{dflt:[]}),s.$isEmpty=function(){return lodash.isEmpty(s.$viewValue)},t.quest={answers:e(t.data.answers||[],t.data)},lodash.each(t.quest.answers,function(e){~lodash.indexOf(t.response,e.value)&&(e.chosen=!0)}),t.data.buttons?t.data.style="horizontal":"horizontal"==t.data.style&&(t.data.buttons=!0),t.listCss={},t.listItemCss={},u.style){case"horizontal":t.listClass="btn-group btn-group-justified btn-group-lg",t.listItemClass="btn btn-select";break;case"multiButtons":t.listClass="btn-toolbar",t.listItemClass="btn  btn-select",t.listCss.lineHeight=2.8;break;case"list":default:t.listClass="list-group",t.listItemClass="list-group-item"}u.minWidth&&(t.listItemCss.minWidth=u.minWidth),u.required&&(s.$parsers.unshift(o),o(s.$viewValue)),t.$watch("quest.answers",function(e,n){e!==n&&(t.response=lodash(e).filter(function(e){return e.chosen}).pluck("value").value())},!0)}}}function useNative(){try{var e=new NativeCustomEvent("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}function addEventEasy(e,t,n,r){return e.addEventListener(t,n,r)}function addEventHard(e,t,n){return e.attachEvent("on"+t,wrap(e,t,n))}function removeEventEasy(e,t,n,r){return e.removeEventListener(t,n,r)}function removeEventHard(e,t,n){var r=unwrap(e,t,n);if(r)return e.detachEvent("on"+t,r)}function fabricateEvent(e,t,n){var r=-1===eventmap_1.indexOf(t)?new customEvent(t,{detail:n}):function(){var e;return doc$1.createEvent?(e=doc$1.createEvent("Event")).initEvent(t,!0,!0):doc$1.createEventObject&&(e=doc$1.createEventObject()),e}();e.dispatchEvent?e.dispatchEvent(r):e.fireEvent("on"+t,r)}function wrapperFactory(e,t,n){return function(t){var r=t||commonjsGlobal.event;r.target=r.target||r.srcElement,r.preventDefault=r.preventDefault||function(){r.returnValue=!1},r.stopPropagation=r.stopPropagation||function(){r.cancelBubble=!0},r.which=r.which||r.keyCode,n.call(e,r)}}function wrap(e,t,n){var r=unwrap(e,t,n)||wrapperFactory(e,t,n);return hardCache.push({wrapper:r,element:e,type:t,fn:n}),r}function unwrap(e,t,n){var r=find(e,t,n);if(r){var i=hardCache[r].wrapper;return hardCache.splice(r,1),i}}function find(e,t,n){var r,i;for(r=0;r<hardCache.length;r++)if((i=hardCache[r]).element===e&&i.type===t&&i.fn===n)return r}function lookupClass(e){var t=cache[e];return t?t.lastIndex=0:cache[e]=t=new RegExp(start+e+end,"g"),t}function addClass(e,t){var n=e.className;n.length?lookupClass(t).test(n)||(e.className+=" "+t):e.className=t}function rmClass(e,t){e.className=e.className.replace(lookupClass(t)," ").trim()}function dragula(e,t){function n(e){return-1!==U.containers.indexOf(e)||F.isContainer(e)}function r(e){var t=e?"remove":"add";touchy(documentElement,t,"mousedown",s),touchy(documentElement,t,"mouseup",p)}function i(e){touchy(documentElement,e?"remove":"add","mousemove",u)}function o(e){var t=e?"remove":"add";crossvent[t](documentElement,"selectstart",a),crossvent[t](documentElement,"click",a)}function a(e){R&&e.preventDefault()}function s(e){if(j=e.clientX,T=e.clientY,!(1!==whichMouseButton(e)||e.metaKey||e.ctrlKey)){var t=e.target,n=l(t);n&&(R=n,i(),"mousedown"===e.type&&(isInput(t)?t.focus():e.preventDefault()))}}function u(e){if(R)if(0!==whichMouseButton(e)){if(void 0===e.clientX||e.clientX!==j||void 0===e.clientY||e.clientY!==T){if(F.ignoreInputTextSelection){var t=getCoord("clientX",e),n=getCoord("clientY",e);if(isInput(doc.elementFromPoint(t,n)))return}var r=R;i(!0),o(),f(),c(r);var a=getOffset(_);P=getCoord("pageX",e)-a.left,A=getCoord("pageY",e)-a.top,classes.add(D||_,"gu-transit"),b(),w(e)}}else p({})}function l(e){if(!(U.dragging&&E||n(e))){for(var t=e;getParent(e)&&!1===n(getParent(e));){if(F.invalid(e,t))return;if(!(e=getParent(e)))return}var r=getParent(e);if(r&&!F.invalid(e,t)&&F.moves(e,r,t,nextEl(e)))return{item:e,source:r}}}function c(e){S(e.item,e.source)&&(D=e.item.cloneNode(!0),U.emit("cloned",D,e.item,"copy")),q=e.source,_=e.item,O=M=nextEl(e.item),U.dragging=!0,U.emit("drag",_,q)}function f(){if(U.dragging){var e=D||_;h(e,getParent(e))}}function d(){R=!1,i(!0),o(!0)}function p(e){if(d(),U.dragging){var t=D||_,n=getCoord("clientX",e),r=getCoord("clientY",e),i=y(getElementBehindPoint(E,n,r),n,r);i&&(D&&F.copySortSource||!D||i!==q)?h(t,i):F.removeOnSpill?m():v()}}function h(e,t){var n=getParent(e);D&&F.copySortSource&&t===q&&n.removeChild(_),$(t)?U.emit("cancel",e,q,q):U.emit("drop",e,t,q,M),g()}function m(){if(U.dragging){var e=D||_,t=getParent(e);t&&t.removeChild(e),U.emit(D?"cancel":"remove",e,t,q),g()}}function v(e){if(U.dragging){var t=arguments.length>0?e:F.revertOnSpill,n=D||_,r=getParent(n),i=$(r);!1===i&&t&&(D?r&&r.removeChild(D):q.insertBefore(n,O)),i||t?U.emit("cancel",n,q,q):U.emit("drop",n,r,q,M),g()}}function g(){var e=D||_;d(),x(),e&&classes.rm(e,"gu-transit"),N&&clearTimeout(N),U.dragging=!1,I&&U.emit("out",e,I,q),U.emit("dragend",e),q=_=D=O=M=N=I=null}function $(e,t){var n;return n=void 0!==t?t:E?M:nextEl(D||_),e===q&&n===O}function y(e,t,r){for(var i=e;i&&!function(){if(!1===n(i))return!1;var o=C(i,e),a=k(i,o,t,r);return!!$(i,a)||F.accepts(_,i,q,a)}();)i=getParent(i);return i}function w(e){function t(e){U.emit(e,a,I,q)}if(E){e.preventDefault();var n=getCoord("clientX",e),r=getCoord("clientY",e),i=n-P,o=r-A;E.style.left=i+"px",E.style.top=o+"px";var a=D||_,s=getElementBehindPoint(E,n,r),u=y(s,n,r),l=null!==u&&u!==I;(l||null===u)&&(I&&t("out"),I=u,l&&t("over"));var c=getParent(a);if(u!==q||!D||F.copySortSource){var f,d=C(u,s);if(null!==d)f=k(u,d,n,r);else{if(!0!==F.revertOnSpill||D)return void(D&&c&&c.removeChild(a));f=O,u=q}(null===f&&l||f!==a&&f!==nextEl(a))&&(M=f,u.insertBefore(a,f),U.emit("shadow",a,u,q))}else c&&c.removeChild(a)}}function b(){if(!E){var e=_.getBoundingClientRect();(E=_.cloneNode(!0)).style.width=getRectWidth(e)+"px",E.style.height=getRectHeight(e)+"px",classes.rm(E,"gu-transit"),classes.add(E,"gu-mirror"),F.mirrorContainer.appendChild(E),touchy(documentElement,"add","mousemove",w),classes.add(F.mirrorContainer,"gu-unselectable"),U.emit("cloned",E,_,"mirror")}}function x(){E&&(classes.rm(F.mirrorContainer,"gu-unselectable"),touchy(documentElement,"remove","mousemove",w),getParent(E).removeChild(E),E=null)}function C(e,t){for(var n=t;n!==e&&getParent(n)!==e;)n=getParent(n);return n===documentElement?null:n}function k(e,t,n,r){function i(e){return e?nextEl(t):t}var o="horizontal"===F.direction;return t!==e?function(){var e=t.getBoundingClientRect();return i(o?n>e.left+getRectWidth(e)/2:r>e.top+getRectHeight(e)/2)}():function(){var t,i,a,s=e.children.length;for(t=0;t<s;t++){if(i=e.children[t],a=i.getBoundingClientRect(),o&&a.left+a.width/2>n)return i;if(!o&&a.top+a.height/2>r)return i}return null}()}function S(e,t){return"boolean"==typeof F.copy?F.copy:F.copy(e,t)}1===arguments.length&&!1===Array.isArray(e)&&(t=e,e=[]);var E,q,_,P,A,j,T,O,M,D,N,R,I=null,F=t||{};void 0===F.moves&&(F.moves=always),void 0===F.accepts&&(F.accepts=always),void 0===F.invalid&&(F.invalid=function(){return!1}),void 0===F.containers&&(F.containers=e||[]),void 0===F.isContainer&&(F.isContainer=never),void 0===F.copy&&(F.copy=!1),void 0===F.copySortSource&&(F.copySortSource=!1),void 0===F.revertOnSpill&&(F.revertOnSpill=!1),void 0===F.removeOnSpill&&(F.removeOnSpill=!1),void 0===F.direction&&(F.direction="vertical"),void 0===F.ignoreInputTextSelection&&(F.ignoreInputTextSelection=!0),void 0===F.mirrorContainer&&(F.mirrorContainer=doc.body);var U=emitter({containers:F.containers,start:function(e){var t=l(e);t&&c(t)},end:f,cancel:v,remove:m,destroy:function(){r(!0),p({})},canMove:function(e){return!!l(e)},dragging:!1});return!0===F.removeOnSpill&&U.on("over",function(e){classes.rm(e,"gu-hide")}).on("out",function(e){U.dragging&&classes.add(e,"gu-hide")}),r(),U}function touchy(e,t,n,r){commonjsGlobal.navigator.pointerEnabled?crossvent[t](e,{mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"}[n],r):commonjsGlobal.navigator.msPointerEnabled?crossvent[t](e,{mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"}[n],r):(crossvent[t](e,{mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"}[n],r),crossvent[t](e,n,r))}function whichMouseButton(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var t=e.button;return void 0!==t?1&t?1:2&t?3:4&t?2:0:void 0}function getOffset(e){var t=e.getBoundingClientRect();return{left:t.left+getScroll("scrollLeft","pageXOffset"),top:t.top+getScroll("scrollTop","pageYOffset")}}function getScroll(e,t){return void 0!==commonjsGlobal[t]?commonjsGlobal[t]:documentElement.clientHeight?documentElement[e]:doc.body[e]}function getElementBehindPoint(e,t,n){var r,i=e||{},o=i.className;return i.className+=" gu-hide",r=doc.elementFromPoint(t,n),i.className=o,r}function never(){return!1}function always(){return!0}function getRectWidth(e){return e.width||e.right-e.left}function getRectHeight(e){return e.height||e.bottom-e.top}function getParent(e){return e.parentNode===doc?null:e.parentNode}function isInput(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||isEditable(e)}function isEditable(e){return!!e&&("false"!==e.contentEditable&&("true"===e.contentEditable||isEditable(getParent(e))))}function nextEl(e){return e.nextElementSibling||function(){var t=e;do{t=t.nextSibling}while(t&&1!==t.nodeType);return t}()}function getEventHost(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function getCoord(e,t){var n=getEventHost(t),r={pageX:"clientX",pageY:"clientY"};return e in r&&!(e in n)&&r[e]in n&&(e=r[e]),n[e]}function directive$9(){return{replace:!0,require:["ngModel"],controller:"questController",controllerAs:"ctrl",template:template$10,scope:{data:"=questData"},link:function(e,t,n,r){function i(e,t){return Array.prototype.indexOf.call(angular.element(t).children(),e)}function o(e){e.forEach(function(e,t){e.order=t})}function a(e,t,n){var r=e[t];e.splice(t,1),e.splice(n,0,r)}function s(e){var t=u;return t.$isEmpty(e)?void t.$setValidity("required",!1):(t.$setValidity("required",!0),e)}var u=r[0],l=e.ctrl,c=e.data,f=lodash.isArray(c.list)&&c.list.length?lodash.range(1,c.list.length+1):[];l.registerModel(u,{dflt:lodash.get(c,"randomize",!0)?lodash.shuffle(f):f}),u.$isEmpty=function(e){return lodash.isEqual(e,lodash.range(1,d.length+1))};var d=e.list=l.log.response.map(function(e,t){return{order:t,id:e,text:c.list[e-1]}});e.$watchCollection("list",function(){e.response=lodash.pluck(d,"id")}),e.setupWatch=function(e){e.$watch("$parent.response",function(){e.$evalAsync("selected = row.order")})},e.reset=function(){d=e.list=lodash.sortBy(d,"id")},e.move=function(e,t){a(d,e,t),o(d)};var p,h,m=dragula_1({isContainer:function(e){return e.hasAttribute("dragula-container")&&t[0].contains(e)}});m.on("drag",function(e,t){p=i(e,t)}),m.on("drop",function(t,n){h=i(t,n),e.move(p,h),e.$digest()}),e.$on("$destroy",m.destroy),c.required&&(u.$formatters.push(s),u.$parsers.unshift(s),s(e.response))}}}function gridDirective$1(e){function t(){var e=lodash.toArray(arguments);return e.unshift({}),lodash.extend.apply(lodash,e)}function n(e){return(e||[]).map(i)}function r(t,n){return lodash(t||[]).map(i).each(function(e,t){e.hasOwnProperty("name")||(e.name=n.name+o(t+1,3))}).thru(n.shuffle?e:lodash.identity).value()}function i(e){return lodash.isPlainObject(e)?e:{stem:e}}function o(e,t){var n=Math.abs(e),r=1+Math.floor(Math.log(n)/Math.LN10);if(r>=t)return e;var i=Math.pow(10,t-r).toString().substr(1);return e<0?"-"+i+n:i+n}return{replace:!0,template:grid,require:["ngModel","form"],controller:"questController",controllerAs:"ctrl",scope:{data:"=questData",current:"=questCurrent"},link:function(e,i,o,a){var s=a[0],u=e.ctrl,l=e.data;e.form=a[1],e.columns=n(l.columns),e.rows=r(l.rows,l),e.allCss=t,e.$watchCollection(function(){return lodash.pluck(e.rows,"$response")},function(t){e.response=lodash.reduce(t,function(e,t){return lodash.isFinite(t)?e+t:e},0)}),u.registerModel(s,{dflt:0})}}}function gridRowDirective$1(){return{replace:!0,template:gridRow,require:["ngModel"],controller:"questController",controllerAs:"ctrl",scope:{row:"=questGridRow",data:"=questGridData"},link:function(e,t,n,r){var i=r[0],o=e.ctrl,a=e.columns=e.$parent.columns.map(function(t,n){return lodash.get(e,"row.overwrite["+n+"]")||t}).map(function(e){return e.hasOwnProperty("type")||(e.type="checkbox"),"dropdown"==e.type&&(lodash.isArray(e.answers)||(e.answers=[]),e.answers=e.answers.map(function(e,t){return lodash.isObject(e)||(e={text:e}),"value"in e||(e.value=t+1),e})),e});a.filter(function(e){return"text"!=e.type}).forEach(function(e,t){e.hasOwnProperty("value")||(e.value=t+1)}),a.filter(function(e){return!e.noReverse}).filter(function(e){return"text"!=e.type}).forEach(function(e,t,n){e.reverseValue=n[n.length-t-1].value}),e.model=i,e.$watch("response",function(t){e.row.$response=t}),o.registerModel(i,{data:e.row})}}}function gridDirective$2(e){function t(){var e=lodash.toArray(arguments);return e.unshift({}),lodash.extend.apply(lodash,e)}function n(e){return(e||[]).map(i)}function r(t,n){return lodash(t||[]).map(i).each(function(e,t){e.hasOwnProperty("name")||(e.name=n.name+o(t+1,3))}).thru(n.shuffle?e:lodash.identity).value()}function i(e){return lodash.isPlainObject(e)?e:{stem:e}}function o(e,t){var n=Math.abs(e),r=1+Math.floor(Math.log(n)/Math.LN10);if(r>=t)return e;var i=Math.pow(10,t-r).toString().substr(1);return e<0?"-"+i+n:i+n}return{replace:!0,template:multiGrid,require:["ngModel","form"],controllerAs:"ctrl",scope:{data:"=questData",current:"=questCurrent"},link:function(e,i,o,a){var s=e.data;e.form=a[1],e.columns=n(s.columns),e.rows=r(s.rows,s),e.allCss=t}}}function gridRowDirective$2(){return{replace:!0,template:multiGridRow,require:["ngModel"],controller:"questController",controllerAs:"ctrl",scope:{row:"=questMultiGridRow",data:"=questMultiGridData"},link:function(e,t,n,r){function i(t){var n=e.columns.every(function(n,r){var i=t[r];if(!e.data.required&&!e.row.required&&!n.required)return!0;switch(n.type){case"text":return!0;case"input":return""!==i;case"dropdown":return!isNaN(i)&&null!==i;default:return i}});return o.$setValidity("required",n),t}var o=r[0],a=e.ctrl;e.model=o,e.columns=e.$parent.columns.map(function(t,n){return lodash.get(e,"row.overwrite["+n+"]",t)}).map(function(e){return e.hasOwnProperty("type")||(e.type="checkbox"),"dropdown"==e.type&&(lodash.isArray(e.answers)||(e.answers=[]),e.answers=e.answers.map(function(e,t){return lodash.isObject(e)||(e={text:e}),"value"in e||(e.value=t+1),e})),e}),a.registerModel(o,{data:e.row,dflt:(e.columns||[]).map(mapDefault)}),o.$parsers.unshift(i),o.$parsers.unshift(function(t){var n=e.columns.every(function(e,n){var r=t[n];return"input"!==e.type||!e.pattern||!(!lodash.isNumber(r)&&!lodash.isString(r))&&new RegExp(e.pattern).test(r)});return o.$setValidity("pattern",n),t}),i(o.$viewValue),e.$watchCollection("response",function(e){o.$setViewValue(e.slice())})}}}function mapDefault(e){return"string"!=typeof e&&("text"===e.type?null:"input"===e.type?"":"dropdown"===e.type&&NaN)}function sliderDirective$1(){return{replace:!0,template:slider.html,require:["form","ngModel"],controller:"questController",controllerAs:"ctrl",scope:{data:"=questData"},link:function(e,t,n,r){var i=r[0],o=r[1],a=e.ctrl,s=e.data;e.form=i,a.registerModel(o,{dflt:void 0}),e.sliderResponse=e.response,e.$on("slider:change",function(t,n){e.$apply(function(){e.response=n,s.autoSubmit&&e.$emit("quest:submit:now")})})}}}function piPointerdownDirective(e){return{compile:function(t,n){var r=e(n[DIRECTIVENAME],!0);return function(e,t){function n(t){e.$apply(function(){r(e,{$event:t})})}t.on(EVENTNAME,n),e.$on("$destroy",function(){t.off(EVENTNAME,n)})}}}}function toRegexFilter(e){return function(t){var n;if(lodash.isUndefined(t))return/(?:)/;if(lodash.isRegExp(t)||lodash.isString(t))return new RegExp(t);throw n=new Error("Question pattern is not a valid regular expression"),e("text").error(n,t),n}}function dfltUnits(e,t){var n;return e||0===e||"0"===e?isNumeric(e)?(n=lodash.isUndefined(t)?"px":String(t),e+n):e:""}function isNumeric(e){return!lodash.isArray(e)&&e-parseFloat(e)+1>=0}function directive$10(e,t,n,r){return{link:function(i,o){function a(e){var t=lodash.isArray(u.keys)?u.keys:[u.keys],n=lodash.map(t,function(e){return lodash.isString(e)?e.toUpperCase().charCodeAt(0):e});~lodash.indexOf(n,e.which)&&i.done()}var s,u=i.script,l=i.newScope=i.$new(),c={global:t.global,current:t.current,task:u,tasksData:lodash.get(u,"data",{})};null==u.$template&&r("message").error("missing template for message",u.name||u.inherit);try{s=lodash.template(u.$template)(c)}catch(e){s=u.$template,r("message").error("failed to render template",e)}lodash.extend(i,c),i.done=function(){l.$destroy(),o.empty(),i.$emit("message:done")},n.on("keydown",a),i.$on("$destroy",function(){n.off("keydown",a)}),o.html(s),e(o.contents())(l)}}}function directive$11(){return{link:function(e,t){t.on("click",function(){e.done()})}}}function provider(){var e={};this.$get=taskActivateProvider,this.set=function(t,n){e[t]=n},this.get=function(t){return e[t]}}function taskActivateProvider(e,t,n){var r=this;return function(i,o,a){var s,u,l=e.defer(),c=t.global,f=i.$script;if((lodash.isFunction(f)||lodash.isArray(f))&&(s=f),!s&&f&&lodash.isFunction(f.play)&&((s=lodash.bind(f.play,f)).$inject=n.annotate(f.play)),!s&&f&&lodash.isArray(f.play)&&((s=lodash.bind(f.play[f.play.length-1],f)).$inject=n.annotate(f.play)),!s&&i.type&&(s=r.get(i.type)),!s)throw new Error('Activator function not found for the "'+i.type+'" task');return u=n.invoke(s,null,{done:lodash.bind(l.resolve,l),task:i,script:f,$element:o,$scope:a,global:c}),lodash.isFunction(u)&&l.promise.finally(u),l}}function directive$12(e,t,n,r,i,o){return{scope:{task:"=piTask"},link:function(a,s){function u(e){var t=e.which||e.keyCode,r=(e.key||"").toUpperCase();82!=t&&"R"!=r||!e.ctrlKey||(c(e,"current"),e.preventDefault()),27==t&&n.one("keydown",l)}function l(e){var t=e.which||e.keyCode;37==t&&c(e,"prev"),39==t&&c(e,"next")}function c(e,t){e.preventDefault(),m={type:t,bustCache:!0},p.resolve()}var f,d,p,h,m,v=a.task,g=a.$parent.settings||{},$=v.$script||{},y=v.name||$.name,w=window.piGlobal;v&&(g.skip&&!0===window.DEBUG&&(n.on("keydown",u),a.$on("$destroy",function(){n.off("keydown",u),n.off("keydown",l)})),i.current=w.current=$.current||{},y&&(w[y]&&o(["task"]).warn('This taskName has already been in use: "'+y+'"'),lodash.extend(i.current,w[y]||{}),r.piGlobal[y]=$.current),h=(p=e(v,s,a.$new())).promise,f=t(v.canvas),h.finally(f),v.title&&(d=n[0].title,n[0].title=v.title,h.finally(function(){n[0].title=d})),h.finally(function(){a.$emit("task:done",m)}))}}}function log(){console.log.apply(console,arguments)}function script$1(e){return e&&(scriptObj=e),scriptObj}function global$3(e,t){return t?glob=e:(lodash.isPlainObject(e)&&(lodash.each(function(e,t){console.warn&&global$3[t]&&console.warn('Overwriting "'+t+'" in global object.')}),lodash.merge(glob,e)),glob)}function go$1(e,t,n){var r=this.mixerSequence;switch(e){case"nextWhere":case"previousWhere":where("next",t,n,r);break;case"current":break;case"first":do{r.prev(n)}while(r.current(n));break;case"last":do{r.next(n)}while(r.current(n));r.prev();break;case"end":do{r.next(n)}while(r.current(n));break;case"next":r.next(n);break;default:throw new Error('Unknow destination "'+e+'" for goto.')}return this}function where(e,t,n,r){var i;do{r[e](),i=r.current(n)}while(i&&!lodash.callback(t)(i.data))}function parser(e){var t=new minnoSequencer;if(t.createColl("trial"),t.createColl("stimulus"),t.createColl("media"),t.add("trial",e.trialSets||[]),t.add("stimulus",e.stimulusSets||[]),t.add("media",e.mediaSets||[]),!lodash.isArray(e.sequence))throw new Error("You must set a sequence array.");var n=t.sequence("trial",e.sequence);return n.go=go$1,t.currentSequence=n,t}function getSize$1(e){var t=window.getComputedStyle(e);return{height:parse$2(e.offsetHeight)-parse$2(t.borderTopWidth)-parse$2(t.borderBottomWidth),width:parse$2(e.offsetWidth)-parse$2(t.borderLeftWidth)-parse$2(t.borderRightWidth)}}function parse$2(e){return parseFloat(e,10)||0}function adjust_canvas(e,t){function n(){var n=getTargetSize(t,e),r=window.getComputedStyle(e);n.height-=parse$1(r.borderTopWidth)+parse$1(r.borderBottomWidth)+parse$1(r.marginTop),n.width-=parse$1(r.borderLeftWidth)+parse$1(r.borderRightWidth),e.style.width=n.width+"px",e.style.height=n.height+"px",e.style.fontSize=n.height*(t.textSize||3)/100+"px",window.scrollTo(0,1)}return lodash.throttle(function(e){"orientationchange"==e.type?setTimeout(n,500):n()},16)}function getProportions(e){if(lodash.isPlainObject(e.proportions)){if("number"!=typeof e.proportions.height||"number"!=typeof e.proportions.width)throw new Error("The canvas proportions object`s height and a width properties must be numeric");return e.proportions.height/e.proportions.width}return e.proportions||.8}function getTargetSize(e,t){var n=getProportions(e);if(e.width)return{width:e.width,height:e.width*n};var r=window.document.documentElement,i=r.clientHeight,o=Math.min(e.maxWidth,r.clientWidth,getSize$1(t.parentNode).width);return i>n*o?{height:o*n,width:o}:{height:i,width:i/n}}function parse$1(e){return parseFloat(e,10)||0}function canvasContructor(e,t){var n;if(!lodash.isPlainObject(e))throw new Error("canvas(map): You must set a rule map for canvas to work properly");if(lodash.isUndefined(t))return lodash.noop;if(!lodash.isPlainObject(t))throw new Error("canvas(settings): canvas settings must be an object");return n=lodash.map(t,function(t,n){var r=e[n];if(r)return on(r.element,r.property,t);throw new Error("canvas("+n+"): unknow key in canvas object.")}),function(){lodash.forEach(n,function(e){e.call()})}}function on(e,t,n){var r=e.style[t];return e.style[t]=n,function(){e.style[t]=r}}function css$1(e,t){var n=e.style;if(t)for(var r in t)n[function(e){return e.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})}(r)]=t[r]}function setupCanvas(e,t){var n=lodash.get(t,"settings.canvas",{}),r=stream();e.classList.add("minno-canvas"),r.map(adjust_canvas(e,n)),r({}),window.addEventListener("orientationchange",r),window.addEventListener("resize",r);var i=canvasContructor({background:{element:document.body,property:"backgroundColor"},canvasBackground:{element:e,property:"backgroundColor"},borderColor:{element:e,property:"borderColor"},borderWidth:{element:e,property:"borderWidth"}},lodash.pick(n,["background","canvasBackground","borderColor","borderWidth"]));return n.css&&css$1(e,n.css),r.end.map(function(){e.classList.remove("minno-canvas")}).map(function(){window.removeEventListener("orientationchange",r),window.removeEventListener("resize",r)}).map(i),r}function load(e,t){var n;if(t=t||"image",-1!==srcStack.indexOf(e))return!1;switch(t){case"template":n=new Promise(function(t,n){requirejs(["text!"+e],t,function(){n(new Error("Template not found: "+e))})});break;case"image":default:n=new Promise(function(t,n){var r=document.createElement("img");r.onload=function(){t(r)},r.onerror=function(){n(new Error("Image not found: "+r.src))},r.src=e,images[e]=r})}return n.then(function(){stackDone++}).then(function(){loader.onload&&loader.onload()}),defStack.push(n),srcStack.push(e),n}function settingsGetter$1(e){var t=script$1().settings||{};return e?t[e]:t}function buildUrl$1(e,t){var n,r=settingsGetter$1();return lodash.isString(r.base_url)?n=r.base_url:lodash.isObject(r.base_url)&&(n=r.base_url[t]),"image"==t&&/^data:image/.test(e)?e:(n?"/"!=n[n.length-1]&&(n+="/"):n="",n+e)}function loadMedia(e){lodash.isUndefined(e.image)||loader.load(buildUrl$1(e.image,"image"),"image"),lodash.isUndefined(e.template)||loader.load(buildUrl$1(e.template,"template"),"template")}function loadStimulus(e){e.media&&loadMedia(e.media)}function loadInput(e){e.element&&loadMedia(e.element)}function loadTrial(e){lodash.each(e.layout||[],loadStimulus),lodash.each(e.stimuli||[],loadStimulus),lodash.each(e.input||[],loadInput)}function loadSequence(e){lodash.each(e,function(e){lodash.isUndefined(e.mixer)?loadTrial(e):loadSequence(e.data)})}function loadScript(e){lodash.each(e.mediaSets||[],loadMedia),lodash.each(e.stimulusSets||[],loadStimulus),lodash.each(e.trialSets||[],loadTrial),loadSequence(e.sequence)}function sequencePreload(e,t,n){switch(n&&loader.reset(),t){case"media":loadMedia(e);break;case"stimulus":loadStimulus(e);break;case"trial":loadTrial(e);break;case"script":default:loadScript(e)}return loader}function preloadPhase$1(e,t){function n(){for(;e.firstChild;)e.removeChild(e.firstChild)}var r=sequencePreload(t);if(1==r.progress())return Promise.resolve().then(n);e.innerHTML='<div class="minno-progress"><div class="minno-progress-bar"></div></div>';var i=e.getElementsByClassName("minno-progress-bar")[0].style;return i.width=r.progress()+"%",r.onload=function(){fastdom.mutate(function(){i.width=100*r.progress()+"%"})},r.all().then(n).catch(function(e){throw new Error("loading resource failed, do something about it! (you can start by checking the error log, you are probably reffering to the wrong url - "+e+")")})}function mouseEvents$1(e,t,n,r){var i=n.element;return i&&(css$1(i,n.css),fastdom.mutate(function(){r.appendChild(i)})),r.addEventListener(e,function(e){var r=e.target;return i&&r===i?t(e):i||r.getAttribute("data-handle")!==n.stimHandle?void 0:t(e)}),t.end.map(function(){i&&r.removeChild(i),r.removeEventListener(e,t)}),t}function keypressed$1(e,t){function n(t){keyDownArr[t.which]||-1===r.indexOf(t.which)||(t.preventDefault(),keyDownArr[t.which]=!0,e(t))}var r=(Array.isArray(t.key)?t.key:[t.key]).map(function(e){return"string"==typeof e?e.toUpperCase().charCodeAt(0):e});return document.addEventListener("keydown",n),e.end.map(function(){document.removeEventListener("keydown",n)}),e}function keyup$1(e,t){var n=(Array.isArray(t.key)?t.key:[t.key]).map(function(e){return"string"==typeof e?e.toUpperCase().charCodeAt(0):e});return document.addEventListener("keyup",function(t){if(-1!==n.indexOf(t.which))return t.preventDefault(),e(t)}),e.end.map(function(){document.removeEventListener("keyup",e)}),e}function simpleRandomize(e,t){if(lodash.isArray(e))return e[Math.floor(Math.random()*e.length)];if(lodash.isFunction(e))return e.call(t);if(lodash.isPlainObject(e)){if(!lodash.isNumber(e.min)||!lodash.isNumber(e.max)||e.min>e.max)throw new Error("randomization objects need both a max and a minimum property, also max has to be larger than min");return e.min+(e.max-e.min)*Math.random()}return e}function timeout$1(e,t){var n,r=simpleRandomize(t.duration)||0;return e.end.map(function(){clearTimeout(n)}),r?setTimeout(e.bind(null,{}),r):e({}),e}function inputBinder(e,t,n){function r(e,t){var n=document.createElement("div");return css$1(n,t),css$1(n,e),n}var i=t.on;switch(i){case"keypressed":return keypressed$1(e,t);case"keyup":return keyup$1(e,t);case"click":case"mousedown":return mouseEvents$1("mousedown",e,t,n);case"mouseup":return mouseEvents$1("mouseup",e,t);case"mouseenter":return mouseEvents$1("mouseenter",e,t);case"mouseleave":return mouseEvents$1("mouseleave",e,t);case"timeout":return timeout$1(e,t);case"enter":return keypressed$1(e,lodash.assign({key:13},t));case"space":return keypressed$1(e,lodash.assign({key:32},t));case"esc":return keypressed$1(e,lodash.assign({key:27},t));case"leftTouch":return t.element=r(t.css,{position:"absolute",left:0,width:"30%",height:"100%",background:"#00FF00",opacity:.3}),mouseEvents$1("mousedown",e,t);case"rightTouch":return t.element=r(t.css,{position:"absolute",right:0,width:"30%",height:"100%",background:"#00FF00",opacity:.3}),mouseEvents$1("mousedown",e,t);case"topTouch":return t.element=r(t.css,{position:"absolute",top:0,width:"100%",height:"30%",background:"#00FF00",opacity:.3}),mouseEvents$1("mousedown",e,t);case"bottomTouch":return t.element=r(t.css,{position:"absolute",bottom:0,width:"100%",height:"30%",background:"#00FF00",opacity:.3}),mouseEvents$1("mousedown",e,t);default:throw new Error('You have an input element without a recognized "on" property: '+i)}}function createListener$1(e,t){var n=stream();if(n.handle=e.handle,lodash.isFunction(e)){if(n=e(n,e,t),isStream(n))return n;throw new Error("Input functions must return valid streams")}if(!lodash.isPlainObject(e))throw new Error("Input must only contain objects and functions, do you have an undefined value?");return lodash.isString(e.on)?inputBinder(n,e,t):(lodash.isFunction(e.on)&&e.on(n,e,t),lodash.isFunction(e.off)&&n.end.map(e.off),n)}function isStream(e){return e._state}function interfaceFn(e,t){var n=[],r=0;return{add:function(i){if(!i)throw new Error("Missing input element. Could not add input listener");var o=createListener$1(i,t.canvas);o.map(function(e){return{handle:i.handle,event:e,trialId:t._id,counter:t.counter,timestamp:+new Date,latency:now()-r}}).map(e),n.push(o)},remove:function(e){for(var t=n.length-1;t>=0;t--){var r=n[t];r.handle===e&&(r.end(!0),n.splice(t,1))}},destroy:function(){n.forEach(function(e){e.end(!0)}),n.length=0},resetTimer:function(){r=now()}}}function getMedia$1(e){var t,n=e.html||e.inlineTemplate||e.template;return e.word?(t=document.createElement("div"),t.textContent=e.word,Promise.resolve(t)):e.image?new Promise(function(n,r){(t=document.createElement("img")).onload=function(){n(t)},t.onerror=function(){r(new Error("Image not found: "+t.src))},t.src=e.image}):(e.jquery&&Promise.reject(new Error("Jquery is no longer supported in minno-time")),n?(t=document.createElement("div"),t.innerHTML=n,Promise.resolve(t)):Promise.reject(new Error("Unrecognized media type")))}function setSize$1(e,t){var n=e.style,r=t.size||{};return r.font_size&&(n.fontSize=r.font_size),isSet("height",r)&&!t.media.word&&(n.height=r.height+"%"),isSet("width",r)&&(n.width=r.width+"%"),e}function isSet(e,t){return e in t}function setPlace$1(e,t){function n(e){return!isNaN(+e)}var r=t.location||{};("center"==r.top||"center"==r.bottom||void 0===r.top&&void 0===r.bottom)&&e.classList.add("minno-stimulus-center-y"),("center"==r.left||"center"==r.right||void 0===r.left&&void 0===r.right)&&e.classList.add("minno-stimulus-center-x"),["top","bottom","left","right"].forEach(function(t){n(r[t])&&(e.style[t]=r[t]+"%")})}function Stimulus$1(e,t,n){var r={el:null,source:e,trial:t,canvas:n,init:init,show:show,hide:hide,name:name,mediaName:mediaName,destroy:destroy$1};return r.data=e.data||{},r.handle=r.data.handle=r.data.handle||e.handle||e.set,r}function init(){if(!this.source.media)throw new Error("Media object not defined for "+this.name());return getMedia$1(this.source.media).then(setupElement.bind(this,this.canvas))}function setupElement(e,t){var n=this;return this.el=t,new Promise(function(r){fastdom.mutate(function(){t.classList.add("minno-stimulus"),t.setAttribute("data-handle",n.handle),setSize$1(t,n.source),setPlace$1(t,n.source),css$1(t,n.source.css||{}),n.source.isLayout&&t.classList.add("minno-stimulus-visible"),e.appendChild(t),r(t)})})}function show(){var e=this.el;if(!e)throw new Error("A stimulus can not be shown before init is called");fastdom.mutate(function(){e.classList.add("minno-stimulus-visible")})}function hide(){var e=this.el;if(!e)throw new Error("A stimulus can not be hidden before init is called");fastdom.mutate(function(){e.classList.remove("minno-stimulus-visible")})}function destroy$1(){var e=this.el,t=this.canvas;fastdom.mutate(function(){t.removeChild(e)})}function name(){var e=this.source;return e.alias?e.alias:this.data.alias?this.data.alias:e.inherit&&e.inherit.set?e.inherit.set:this.handle?this.handle:void 0}function mediaName(e){var t=this.source.media,n=e&&e.fullpath;if(t.alias)return t.alias;for(var r in t){if(contains$1(["image","template"],r))return n?t[r]:t[r].replace(/^.*[\\/]/,"");if(contains$1(["word","html","inlineTemplate"],r)&&t[r])return t[r]}}function contains$1(e,t){return-1!=e.indexOf(t)}function stimCollection(e,t){function n(n){return Stimulus$1(n,e,t)}var r=e._source,i=r.stimuli.map(n),o=r.layout.map(function(e){return e.isLayout=!0,e}).map(n),a=Promise.all(i.concat(o).map(function(e){return e.init()}));return{canvas:t,stimuli:i,layout:o,ready:a,getStimlist:getStimlist,getMedialist:getMedialist,destroy:destroy}}function getStimlist(){return this.stimuli.filter(function(e){return!e.source.nolog}).map(function(e,t){return e.name()||"stim"+t})}function getMedialist(e){return this.stimuli.filter(function(e){return!e.source.nolog}).map(function(t,n){return t.mediaName(e)||"media"+n})}function destroy(){this.stimuli.concat(this.layout).forEach(function(e){e.destroy()})}function evaluate$1(e,t,n){function r(e){return n.stimulusCollection.stimuli.some(function(t){var n=t.data;for(var r in e)if(e[r]!==n[r])return!1;return!0})}var i=global$3(),o=i.current||{};if(!e)throw new Error("There is an interaction without conditions!!");e=Array.isArray(e)?e:[e];var a=!0;return("begin"!=(t=t||{}).type||!e.every(function(e){return"begin"!=e.type}))&&(e.forEach(function(e){var s,u=!0;switch(e.type){case"begin":"begin"!==t.type&&(u=!1);break;case"inputEquals":lodash.isArray(e.value)||(e.value=[e.value]),-1===lodash.indexOf(e.value,t.handle)&&(u=!1);break;case"inputEqualsTrial":t.handle!==n.data[e.property]&&(u=!1);break;case"inputEqualsStim":s={},e.handle&&(s.handle=e.handle),s[e.property]=t.handle,r(s)||(u=!1);break;case"trialEquals":if(void 0===e.property||void 0===e.value)throw new Error('trialEquals requires both "property" and "value" to be defined');e.value!==n.data[e.property]&&(u=!1);break;case"inputEqualsGlobal":if(void 0===e.property)throw new Error('inputEqualsGlobal requires "property" to be defined');t.handle!==i[e.property]&&(u=!1);break;case"globalEquals":if(void 0===e.property||void 0===e.value)throw new Error('globalEquals requires both "property" and "value" to be defined');e.value!==i[e.property]&&(u=!1);break;case"globalEqualsTrial":if(void 0===e.globalProp||void 0===e.trialProp)throw new Error('globalEqualsTrial requires both "globalProp" and "trialProp" to be defined');i[e.globalProp]!==n.data[e.trialProp]&&(u=!1);break;case"globalEqualsStim":if(void 0===e.globalProp||void 0===e.stimProp)throw new Error('globalEqualsStim requires both "globalProp" and "stimProp" to be defined');s={},e.handle&&(s.handle=e.handle),s[e.stimProp]=i[e.globalProp],r(s)||(u=!1);break;case"inputEqualsCurrent":if(void 0===e.property)throw new Error('inputEqualsCurrent requires "property" to be defined');t.handle!==o[e.property]&&(u=!1);break;case"currentEquals":if(void 0===e.property||void 0===e.value)throw new Error('currentEquals requires both "property" and "value" to be defined');e.value!==o[e.property]&&(u=!1);break;case"currentEqualsTrial":if(void 0===e.currentProp||void 0===e.trialProp)throw new Error('currentEqualsTrial requires both "currentProp" and "trialProp" to be defined');o[e.currentProp]!==n.data[e.trialProp]&&(u=!1);break;case"currentEqualsStim":if(void 0===e.currentProp||void 0===e.stimProp)throw new Error('currentEqualsStim requires both "currentProp" and "stimProp" to be defined');s={},e.handle&&(s.handle=e.handle),s[e.stimProp]=o[e.currentProp],r(s)||(u=!1);break;case"function":e.value.apply(n,[e,t,n])||(u=!1);break;case"custom":e.fn.apply(null,[e,t,n])||(u=!1);break;default:throw new Error("Unknown condition type: "+e.type)}a=a&&(e.negate?!u:u)}),a)}function applyActions(e,t,n){var r=!0;if(!e)throw new Error("There is an interaction without actions!!");return e=lodash.isArray(e)?e:[e],lodash.forEach(e,function(e){var i=actions[e.type];if(!i)throw new Error("unknown action: "+e.type);"endTrial"===e.type&&(r=!1),i(e,t,n)}),r}function interactions$1(e){var t=e._source.interactions,n=e._source.DEBUG&&window.DEBUG;return function(r){var i,o,a;for(n&&console.groupCollapsed("Event: "+(r.handle||r.type),r),i=0;i<t.length&&(o=t[i],a=evaluate$1(o.conditions,r,e),n&&console.log(a,o.conditions),!a||applyActions(o.actions,r,e));i++);return n&&console.groupEnd("Event: "+(r.handle||r.type)),r}}function Trial$1(e,t,n){if(!e.interactions)throw new Error("Interactions not defined");this.canvas=t,this.settings=n,this._source=e,this.$logs=stream(),this.$events=stream(),this.$end=this.$events.end,this.data=e.data||{},this._id=lodash.uniqueId("trial_"),this.counter=gid++,this.input=interfaceFn(this.$events,this),this.stimulusCollection=stimCollection(this,t),this.$events.map(interactions$1(this)),this._next=["next",{}]}function arrayWrap(e){return e?lodash.isArray(e)?e:[e]:[]}function nextTrial$1(e,t){function n(t,n,r){var i=t[n];if(lodash.isUndefined(i))return!1;lodash.isString(i)&&(i={word:i}),(i=e.inflate("media",i,r)).image&&(i.image=buildUrl$1(i.image,"image")),i.template&&(i.inlineTemplate=requirejs("text!"+buildUrl$1(i.template,"template")),i.inlineTemplate=lodash.template(i.inlineTemplate)(r)),t[n]=i,r.mediaData=null,r.mediaMeta=null}function r(t){var r=this;return t=e.inflate("stimulus",t,r,{skip:["media","touchMedia"]}),n(t,"media",r),n(t,"touchMedia",r),r.stimulusData=null,r.stimulusMeta=null,t}var i,o=t[0],a=t[1],s=e.currentSequence,u=global$3(),l={global:u,current:u.current};return s.go(o,a,l),(i=s.current(l,{skip:["layout","stimuli"]}))?(i.stimuli=lodash.map(i.stimuli||[],r,l),i.layout=lodash.map(i.layout||[],r,l),l.trialData=null,{value:i}):{done:!0}}function post$1(e,t){return new Promise(function(n,r){var i=new XMLHttpRequest;i.open("POST",e,!0),i.setRequestHeader("Content-Type","application/json; charset=UTF-8"),i.onreadystatechange=function(){4===this.readyState&&(this.status>=200&&this.status<400?n(this.responseText):r(new Error("Failed posting to: "+e)))},i.send(serialize(t))})}function serialize(e){return"string"==typeof e?e:JSON.stringify(e)}function poster$1(e,t){function n(e){var n={json:JSON.stringify(e)},i=r(lodash.assign(n,t.metaData));return post$1(o,i).catch(function(){return post$1(o,i)}).catch(t.error||lodash.noop)}function r(e){var t,n=[];for(t in e)n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return n.join("&").replace(/%20/g,"+")}var i=[],o=t.url;o&&(e.map(function(e){i.push(e),t.pulse&&i.length>=t.pulse&&(n(i),i.length=0)}),e.end.map(function(){i.length&&n(i)}))}function transformLogs$1(e,t,n){var r=window.piGlobal,i=n.data,o=t,a=r().current.logs,s=lodash.get(n,"settings.logger.fullpath",!1),u=n.stimulusCollection.getStimlist(),l=n.stimulusCollection.getMedialist({fullpath:s});return{log_serial:a.length,trial_id:n.counter,name:n.name(),responseHandle:o.handle,latency:Math.floor(o.latency),stimuli:u,media:l,data:i}}function createLogs$1(e,t){var n=e.map(function(e){return function(t){return e.apply(null,t)}}(t.logger||t.transformLogs||transformLogs$1));return n.map(function(e){global$3().current.logs.push(e)}),poster$1(n,t),t.poster&&t.poster(n,t),n}function playerPhase(e,t,n){function r(e){var n=nextTrial$1(t,e);n.done?i.end(!0):i(n.value)}var i=stream(),o=i.map(function(t){return function(i){var o=t,s=t=new Trial$1(i,e,n.settings);return s.$logs.map(a),s.$end.map(function(){r(s._next)}),s.start(),o&&fastdom.mutate(function(){o.stimulusCollection.destroy()}),s}}()),a=stream(),s=lodash.get(n,"settings.hooks.endTask",n.settings.onEnd||lodash.noop);return i.end.map(function(){var e=o();e&&e.stimulusCollection.destroy()}).map(s),{$trial:o,end:i.end,$logs:createLogs$1(a,n.settings.logger||{}),play:r}}function activate$2(e,t){var n=setupCanvas(e,t),r=playerPhase(e,parser(t),t);return setupVars(t),r.end.map(function(){n.end(!0)}),preloadPhase$1(e,t).then(r.play.bind(null,["next",{}])),r}function setupVars(e){var t=global$3(global$3()),n=e.name||"anonymous minno-time",r=lodash.isPlainObject(e.current)?e.current:{};r.logs||(r.logs=[]),t[n]=t.current=r,script$1(e)}function canvasContructor$1(e,t){var n;if(!lodash.isPlainObject(e))throw new Error("canvas(map): You must set a rule map for canvas to work properly");if(lodash.isUndefined(t))return lodash.noop;if(!lodash.isPlainObject(t))throw new Error("canvas(settings): canvas settings must be an object");return n=lodash.map(t,function(t,n){var r=e[n];if(r)return on$1(r.element,r.property,t);throw new Error("canvas("+n+"): unknow key in canvas object.")}),function(){lodash.forEach(n,function(e){e.call()})}}function on$1(e,t,n){var r=e.css(t);return e.css(t,n),lodash.bind(e.css,e,t,r)}function managerCanvasService(e,t){var n={background:{element:angular.element(t[0].body),property:"backgroundColor"},canvasBackground:{element:e,property:"backgroundColor"},fontSize:{element:e,property:"fontSize"},fontColor:{element:e,property:"color"}};return lodash.bind(canvasContructor$1,null,n)}function swapControler(e){this.$scope=e}function swapDirective(e,t,n){return{transclude:!0,controller:swapControler,controllerAs:"ctrl",compile:function(){return{pre:this.pre,post:function(){}}},pre:function(e,r,i,o,a){function s(e){var n=e||{};f&&(f.remove(),f=null),l&&(l.$destroy(),l=null),c&&(t.leave(c,function(){f=null,n.postLeave&&n.postLeave()}),f=c,c=null)}function u(e,t){if(t){var r=t.split(" ");lodash.each(r,function(e){if(!n.has("."+e+"-animation"))throw new Error('Unknown animation type: "'+e+'"')}),e.addClass(t)}}e.enter=function(n,r){var i=r||{};if(i.pre&&i.pre(),!n)return s(i);var o=lodash.extend(e.$new(),n);a(o,function(e){u(e,i.animate),s(i),c=e,l=o,t.enter(c,d,null,function(){i.post&&i.post()})})},e.empty=s,e.refresh=function(e){lodash.extend(l,e)};var l,c,f,d=r}}}function directive$13(){return{transclude:!0,replace:!0,template:template$11,require:[],scope:{spinner:"=piSpinner"}}}function harvest(e){return toCsv(createMatrix(getLogs(e)))}function getLogs(e){return lodash.reduce(e,function(e,t,n){return e.concat(harvestTask(n,t))},[])}function harvestTask(e,t){return"current"!==e&&lodash.isPlainObject(t)&&Array.isArray(t.logs)?t.logs.map(function(t){return t.taskName=e,t}):[]}function createMatrix(e){var t=GetIndex(),n=e.map(function(e){var n=[];return lodash.forEach(e,function(e,r){n[t(r)]="object"==typeof e?JSON.stringify(e):e}),n}),r=t();return n.forEach(function(e){return function(t){t.length=e}}(r.length)),[r].concat(n)}function GetIndex(){var e={taskName:0},t=1;return function(n){return arguments.length?n in e?e[n]:e[n]=t++:lodash.keys(e)}}function toCsv(e){return e.map(buildRow).join("\n")}function buildRow(e){return e.map(normalize).join(",")}function normalize(e){return quotableRgx.test(e)?'"'+e.replace(/"/g,'""')+'"':e}function managerService(e,t,n,r,i){function o(e,t){var r=this,i=t.settings||{};if(!(this instanceof o))return new o(e,t);this.$scope=e,this.script=t,this.sequence=new n(t),a(e,i),e.$on("manager:next",function(e,t){switch(t||(t={type:"next"}),t.type){case"current":r.load(t);break;case"prev":r.prev(t);break;case"next":default:r.next(t)}}),e.$on("manager:prev",function(){r.prev()})}function a(t,n){var r,o,a=i.get("managerCanvas"),s=i.get("$document"),u=i.get("piPreloadImages"),l=i.get("managerBeforeUnload"),c=i.get("managerInjectStyle"),f=i.get("$rootElement"),d=i.get("$http"),p=n.skin||"default";l.activate(),t.$on("$destroy",l.deactivate),r=a(n.canvas),t.$on("$destroy",r),o=c(n.injectStyle),t.$on("$destroy",o),u(n.preloadImages||[]),n.title&&(s[0].title=n.title),lodash.get(n,"logger.postCsv",!1)&&t.$on("$destroy",function(){var t=harvest(e.global);d.post(n.logger.postCsv,t)}),f.addClass(p+"-skin")}return lodash.extend(o.prototype,{next:function(e){this.sequence.next(),this.load(e)},prev:function(e){this.sequence.prev(),this.load(e)},current:function(){return this.sequence.current()},load:function(e){var t=this.current(),n=this.$scope,i={baseUrl:this.baseUrl,bustCache:e&&e.bustCache};t?r(t,i).then(function(){n.$emit("manager:loaded")}):n.$emit("manager:loaded")},setBaseUrl:function(e){this.baseUrl=e}}),o}function sequenceProvider(e,t,n,r){function i(o){var a,s;if(!(this instanceof i))return new i(o);(a=this.db=new e).createColl("tasks"),a.add("tasks",o.tasksSets||[]),s={global:t.global},lodash.extend(n,s),lodash.extend(r,s),this.sequence=a.sequence("tasks",o.sequence)}return lodash.extend(i.prototype,{next:function(){return this.sequence.next(),this},prev:function(){return this.sequence.prev(),this},current:function(){return this.sequence.current()}}),i}function managerLoadService(e,t){return function(n){var r=lodash.isString(n)?t(n):n;return e.when(r)}}function getScriptProvider(e){return function(t,n){n||(n={});var r=e.defer(),i="";return/^\/|:/.test(t)||(i+=n.baseUrl?n.baseUrl+"/":""),i+=t,n.isText&&(i=""+i),n.bustCache&&(i+="?bust="+(new Date).getTime()),require([i],function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}function taskLoadService(e,t,n){function r(e,r){return t(e,r).then(function(t){var r;if(lodash.isUndefined(t))throw r=new Error("Task "+e+" failed or has not been found. Make sure that you returned the script and that your script does not have any errors"),n("task").error(r),r;return t})}return function(t,i){var o,a,s;return a=t.scriptUrl?r(t.scriptUrl,i):t.script,s=t.templateUrl?r(t.templateUrl,lodash.extend({isText:!0},i)):t.template,(o=e.all({script:e.when(a),template:e.when(s)})).then(function(e){return t.$script=e.script,t.$template=e.template,t},function(e){n("load").error("Failed to load task script - make sure that your URLs are all correct and that your script does not have any errors.",e)}),o}}function leaveEvent(e){var t="Are you sure you want to leave this page? You may have some unsaved data here.";return(e||window.event).returnValue=t,t}function beforeunloadFactory(){return lodash.create(proto)}function injectStyle(e){var t=document.head||document.querySelector("head"),n=document.createElement("style");return n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n),function(){t.removeChild(n)}}function managerControler(e,t,n,r){this.init=function(i){var o,a=this;try{o=e.$eval(i)}catch(e){}finally{o||(o=i)}n(o).then(function(n){e.script=n,e.settings=n&&n.settings||{},a.manager=new t(e,n),a.manager.setBaseUrl(function(e){return lodash.isString(e)?e.substring(0,e.lastIndexOf("/")):void 0}(o)),e.$emit("manager:next")},function(e){r("manager").error("Failed to load "+o,e)})}}function directive$14(e,t,n){return{priority:1e3,replace:!0,template:["<div pi-swap ng-cloak ng-class=\"{'pi-spinner':loading}\">",'<div ng-bind-html="task.preText"></div>','<div pi-task="task"></div>','<div ng-bind-html="task.postText"></div>',"</div>"].join("\n"),controller:managerControler,require:["piManager","piSwap"],link:function(r,i,o,a){function s(){var e={prevTask:f,currentTask:c,managerSettings:r.settings};l([r.settings.onPreTask,lodash.get(f,"post"),c.pre,lodash.bind(d.next,d,{task:c,settings:r.settings}),c.load,function(){r.loading=!1}],e)}function u(){var e={prevTask:f,currentTask:c};l([f&&f.post,lodash.bind(d.empty,d),r.settings.onEnd,function(){r.loading=!1,r.$emit("manager:done"),r.$destroy()}],e)}function l(r,i){var o=e.when();lodash(r).map(function(n){return function(){var r=lodash.isFunction(n)?t.invoke(n,null,i||{}):n;return e.when(r)}}).reduce(function(e,t){return e.then(t,function(e){n("manager").error("There was an error in the task sequence. ",e)})},o)}var c,f,d=a[1],p=a[0];p.init(o.piManager),r.$on("manager:loaded",function(){r.loading=!1,f=c,c=p.manager.current(),n("manager").debug("Manager:currentTask",c),c?s():u()}),r.$on("task:done",function(e,t){e.stopPropagation(),r.loading=!0,r.$emit("manager:next",t)}),r.loading=!0}}}function directive$15(){return{priority:1e3,template:'<div pi-manager="script"></div>',compile:function(){return{pre:function(e,t,n){var r,i=n.piManagerTask;try{r=e.$eval(i)}catch(e){}var o=r||{scriptUrl:i};e.script={sequence:[{script:["done","managerBeforeUnload",function(e,t){t.deactivate(),e()}]},o]}}}}}}function piLinkDirective(e){return{link:function(t,n){n.on("click",function(){e.deactivate()})}}}function animation(e,t){var n=60,r=300,i=e.requestAnimationFrame,o=e.cancelAnimationFrame;return{enter:function(e,a){function s(){var e=t()-c,f=e/r;if(e>r)return l.style.top=0,o(u),void a();l.style.top=n*(f-1)+"px",u=i(s)}var u,l=e[0],c=t();return e.css({top:-n+"px"}),u=i(s),function(t){t&&(o(u),e.css({top:"0px"}))}},leave:function(e,a){function s(){var e=t()-c,f=1-e/r;if(e>r)return o(u),void a();l.style.top=n*(f-1)+"px",u=i(s)}var u,l=e[0],c=t();return u=i(s),function(e){e&&o(u)}}}}function animation$1(e,t){var n=300,r=e.requestAnimationFrame,i=e.cancelAnimationFrame;return{enter:function(e,o){function a(){var e=t()-l,c=e/n;if(e>n)return u.style.opacity=1,i(s),void o();u.style.opacity=c,s=r(a)}var s,u=e[0],l=t();return u.style.opacity=0,s=r(a),function(e){e&&(i(s),u.style.opacity=1)}},leave:function(e,o){function a(){var e=t()-l,c=1-e/n;if(e>n)return u.style.opacity=0,i(s),void o();u.style.opacity=c,s=r(a)}var s,u=e[0],l=t();return s=r(a),function(e){e&&(i(s),u.style.opacity=0)}}}}function animation$2(e,t){var n=300,r=e.requestAnimationFrame,i=e.cancelAnimationFrame;return{enter:function(e,o){function a(){var e=t()-l,c=1-e/n;if(e>n)return u.style.left="0%",i(s),void o();u.style.left=100*-c+"%",s=r(a)}var s,u=e[0],l=t();return u.style.left="-100%",s=r(a),function(e){e&&(i(s),u.style.left="0%")}},leave:function(e,o){function a(){var e=t()-l,c=e/n;if(e>n)return u.style.left="100%",i(s),void o();u.style.left=100*c+"%",s=r(a)}var s,u=e[0],l=t();return s=r(a),function(e){e&&(i(s),u.style.left="100%")}}}}function consoleProvider$4(e){function t(t,n){var r=lodash.create(e);return lodash.extend(r,{tags:lodash.isArray(t)?t:[t],force:!!n}),r}return t.setSettings=function(t){e.settings=t},t}function consolePrototypeProvider$4(e,t){function n(n){return function(){var r,i=this.settings,o=[];if(this.shouldLog(n)){for(r=0;r<arguments.length;r++)o[r]=arguments[r];if(e[n].apply(null,o),i.hideConsole)return;t.$emit("console:log",{time:new Date,type:n,args:o,tags:this.tags})}}}var r={};return lodash.each(LOGFUNCTIONS$2,function(e){r[e]=n(e)}),r.settings={},r.shouldLog=function(e){var t=this.settings.level||"warn",n=this.settings.tags||"all",r=this.tags;return!(!this.force&&(~lodash.indexOf(LOGFUNCTIONS$2,t)?LEVELS$2[e]>LEVELS$2[t]||"all"!==n&&!lodash.intersection(r,lodash.isArray(n)?n:[n]).length:(this.settings.level="error",this.error('Unknow DEBUG level: "'+t+'". The valid levels are debug>info>warn>error>none'),1)))},r}function directive$16(e){return{replace:!0,template:template$12,link:function(t){var n=t.logs=[];t.remove=function(e){var t=lodash.indexOf(n,e);t>-1&&n.splice(t,1)},t.reverse=!0,e.$on("console:log",function(e,t){n.push(t)})}}}function stringify$2(e,t){if(null==e)return'<i class="text-muted">undefined</i>';if(""===e)return'<i class="text-muted">an empty string</i>';switch(typeof e){case"string":break;case"number":e=""+e;break;case"object":if(e instanceof Error){e=e.message;break}default:e='<a href="javascript:void(0)">'+angular.toJson(e,!!t)+"</a>"}return e}function activate$1(e){angular.bootstrap(e,[app$1.name])}!function(e,t,n){function r(e){return function(){var t,n,r=arguments[0],i=arguments;for(t=(t="["+(e?e+":":"")+r+"] "+arguments[1].replace(/\{\d+\}/g,function(e){var t,n=+e.slice(1,-1);return n+2<i.length?"function"==typeof(t=i[n+2])?t.toString().replace(/ ?\{[\s\S]*$/,""):void 0===t?"undefined":"string"!=typeof t?V(t):t:e}))+"\nhttp://errors.angularjs.org/1.2.27/"+(e?e+"/":"")+r,n=2;n<arguments.length;n++)t=t+(2==n?"?":"&")+"p"+(n-2)+"="+encodeURIComponent(function(e){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):void 0===e?"undefined":"string"!=typeof e?JSON.stringify(e):e}(arguments[n]));return new Error(t)}}function i(e){if(null==e||S(e))return!1;var t=e.length;return!(1!==e.nodeType||!t)||(w(e)||wn(e)||0===t||"number"==typeof t&&t>0&&t-1 in e)}function o(e,t,n){var r;if(e)if(C(e))for(r in e)"prototype"==r||"length"==r||"name"==r||e.hasOwnProperty&&!e.hasOwnProperty(r)||t.call(n,e[r],r);else if(wn(e)||i(e))for(r=0;r<e.length;r++)t.call(n,e[r],r);else if(e.forEach&&e.forEach!==o)e.forEach(t,n);else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r);return e}function a(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t.sort()}function s(e,t,n){for(var r=a(e),i=0;i<r.length;i++)t.call(n,e[r[i]],r[i]);return r}function u(e){return function(t,n){e(n,t)}}function l(){for(var e,t=yn.length;t;){if(t--,57==(e=yn[t].charCodeAt(0)))return yn[t]="A",yn.join("");if(90!=e)return yn[t]=String.fromCharCode(e+1),yn.join("");yn[t]="0"}return yn.unshift("0"),yn.join("")}function c(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function f(e){var t=e.$$hashKey;return o(arguments,function(t){t!==e&&o(t,function(t,n){e[n]=t})}),c(e,t),e}function d(e){return parseInt(e,10)}function p(e,t){return f(new(f(function(){},{prototype:e})),t)}function h(){}function m(e){return e}function v(e){return function(){return e}}function g(e){return void 0===e}function $(e){return void 0!==e}function y(e){return null!=e&&"object"==typeof e}function w(e){return"string"==typeof e}function b(e){return"number"==typeof e}function x(e){return"[object Date]"===vn.call(e)}function C(e){return"function"==typeof e}function k(e){return"[object RegExp]"===vn.call(e)}function S(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function E(e){return e&&e.$evalAsync&&e.$watch}function q(e){return"[object File]"===vn.call(e)}function _(e){return"[object Blob]"===vn.call(e)}function P(e){return e&&C(e.then)}function A(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function j(e,t,n){var r=[];return o(e,function(e,i,o){r.push(t.call(n,e,i,o))}),r}function T(e,t){return-1!=O(e,t)}function O(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(t===e[n])return n;return-1}function M(e,t){var n=O(e,t);return n>=0&&e.splice(n,1),t}function D(e,t,n,r){if(S(e)||E(e))throw gn("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(t){if(e===t)throw gn("cpi","Can't copy! Source and destination are identical.");if(n=n||[],r=r||[],y(e)){var i=O(n,e);if(-1!==i)return r[i];n.push(e),r.push(t)}var a;if(wn(e)){t.length=0;for(var s=0;s<e.length;s++)a=D(e[s],null,n,r),y(e[s])&&(n.push(e[s]),r.push(a)),t.push(a)}else{var u=t.$$hashKey;wn(t)?t.length=0:o(t,function(e,n){delete t[n]});for(var l in e)a=D(e[l],null,n,r),y(e[l])&&(n.push(e[l]),r.push(a)),t[l]=a;c(t,u)}}else t=e,e&&(wn(e)?t=D(e,[],n,r):x(e)?t=new Date(e.getTime()):k(e)?(t=new RegExp(e.source,e.toString().match(/[^\/]*$/)[0])).lastIndex=e.lastIndex:y(e)&&(t=D(e,{},n,r)));return t}function N(e,t){if(wn(e)){t=t||[];for(var n=0;n<e.length;n++)t[n]=e[n]}else if(y(e)){t=t||{};for(var r in e)!sn.call(e,r)||"$"===r.charAt(0)&&"$"===r.charAt(1)||(t[r]=e[r])}return t||e}function R(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!=e&&t!=t)return!0;var r,i,o,a=typeof e;if(a==typeof t&&"object"==a){if(!wn(e)){if(x(e))return!!x(t)&&(isNaN(e.getTime())&&isNaN(t.getTime())||e.getTime()===t.getTime());if(k(e)&&k(t))return e.toString()==t.toString();if(E(e)||E(t)||S(e)||S(t)||wn(t))return!1;o={};for(i in e)if("$"!==i.charAt(0)&&!C(e[i])){if(!R(e[i],t[i]))return!1;o[i]=!0}for(i in t)if(!o.hasOwnProperty(i)&&"$"!==i.charAt(0)&&t[i]!==n&&!C(t[i]))return!1;return!0}if(!wn(t))return!1;if((r=e.length)==t.length){for(i=0;i<r;i++)if(!R(e[i],t[i]))return!1;return!0}}return!1}function I(e,t,n){return e.concat(hn.call(t,n))}function F(e,t){return hn.call(e,t||0)}function U(e,t){var n=arguments.length>2?F(arguments,2):[];return!C(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,n.concat(hn.call(arguments,0))):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function L(e,r){var i=r;return"string"==typeof e&&"$"===e.charAt(0)?i=n:S(r)?i="$WINDOW":r&&t===r?i="$DOCUMENT":E(r)&&(i="$SCOPE"),i}function V(e,t){return void 0===e?n:JSON.stringify(e,L,t?"  ":null)}function B(e){return w(e)?JSON.parse(e):e}function z(e){if("function"==typeof e)e=!0;else if(e&&0!==e.length){var t=an(""+e);e=!("f"==t||"0"==t||"false"==t||"no"==t||"n"==t||"[]"==t)}else e=!1;return e}function H(e){e=cn(e).clone();try{e.empty()}catch(e){}var t=cn("<div>").append(e).html();try{return 3===e[0].nodeType?an(t):t.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(e,t){return"<"+an(t)})}catch(e){return an(t)}}function G(e){try{return decodeURIComponent(e)}catch(e){}}function W(e){var t,n,r={};return o((e||"").split("&"),function(e){if(e&&(t=e.replace(/\+/g,"%20").split("="),n=G(t[0]),$(n))){var i=!$(t[1])||G(t[1]);sn.call(r,n)?wn(r[n])?r[n].push(i):r[n]=[r[n],i]:r[n]=i}}),r}function Q(e){var t=[];return o(e,function(e,n){wn(e)?o(e,function(e){t.push(X(n,!0)+(!0===e?"":"="+X(e,!0)))}):t.push(X(n,!0)+(!0===e?"":"="+X(e,!0)))}),t.length?t.join("&"):""}function Y(e){return X(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function X(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,t?"%20":"+")}function J(e,n){function r(e){e&&s.push(e)}var i,a,s=[e],u=["ng:app","ng-app","x-ng-app","data-ng-app"],l=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;o(u,function(n){u[n]=!0,r(t.getElementById(n)),n=n.replace(":","\\:"),e.querySelectorAll&&(o(e.querySelectorAll("."+n),r),o(e.querySelectorAll("."+n+"\\:"),r),o(e.querySelectorAll("["+n+"]"),r))}),o(s,function(e){if(!i){var t=" "+e.className+" ",n=l.exec(t);n?(i=e,a=(n[2]||"").replace(/\s+/g,",")):o(e.attributes,function(t){!i&&u[t.name]&&(i=e,a=t.value)})}}),i&&n(i,a?[a]:[])}function K(n,r){var i=function(){if((n=cn(n)).injector()){var e=n[0]===t?"document":H(n);throw gn("btstrpd","App Already Bootstrapped with this Element '{0}'",e.replace(/</,"&lt;").replace(/>/,"&gt;"))}(r=r||[]).unshift(["$provide",function(e){e.value("$rootElement",n)}]),r.unshift("ng");var i=je(r);return i.invoke(["$rootScope","$rootElement","$compile","$injector","$animate",function(e,t,n,r,i){e.$apply(function(){t.data("$injector",r),n(t)(e)})}]),i},a=/^NG_DEFER_BOOTSTRAP!/;if(e&&!a.test(e.name))return i();e.name=e.name.replace(a,""),$n.resumeBootstrap=function(e){o(e,function(e){r.push(e)}),i()}}function Z(e,t){return t=t||"_",e.replace(Cn,function(e,n){return(n?t:"")+e.toLowerCase()})}function ee(e,t,n){if(!e)throw gn("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function te(e,t,n){return n&&wn(e)&&(e=e[e.length-1]),ee(C(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function ne(e,t){if("hasOwnProperty"===e)throw gn("badname","hasOwnProperty is not a valid {0} name",t)}function re(e,t,n){if(!t)return e;for(var r,i=t.split("."),o=e,a=i.length,s=0;s<a;s++)r=i[s],e&&(e=(o=e)[r]);return!n&&C(e)?U(o,e):e}function ie(e){var t=e[0],n=e[e.length-1];if(t===n)return cn(t);var r=t,i=[r];do{if(!(r=r.nextSibling))break;i.push(r)}while(r!==n);return cn(i)}function oe(e){function t(e,t,n){return e[t]||(e[t]=n())}var n=r("$injector"),i=r("ng"),o=t(e,"angular",Object);return o.$$minErr=o.$$minErr||r,t(o,"module",function(){var e={};return function(r,o,a){return function(e,t){if("hasOwnProperty"===e)throw i("badname","hasOwnProperty is not a valid {0} name",t)}(r,"module"),o&&e.hasOwnProperty(r)&&(e[r]=null),t(e,r,function(){function e(e,n,r){return function(){return t[r||"push"]([e,n,arguments]),u}}if(!o)throw n("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",r);var t=[],i=[],s=e("$injector","invoke"),u={_invokeQueue:t,_runBlocks:i,requires:o,name:r,provider:e("$provide","provider"),factory:e("$provide","factory"),service:e("$provide","service"),value:e("$provide","value"),constant:e("$provide","constant","unshift"),animation:e("$animateProvider","register"),filter:e("$filterProvider","register"),controller:e("$controllerProvider","register"),directive:e("$compileProvider","directive"),config:s,run:function(e){return i.push(e),this}};return a&&s(a),u})}})}function ae(){return++En}function se(e){return e.replace(Pn,function(e,t,n,r){return r?n.toUpperCase():n}).replace(An,"Moz$1")}function ue(e,t,n,r){function i(e){var i,a,s,u,l,c,f,d=n&&e?[this.filter(e)]:[this],p=t;if(!r||null!=e)for(;d.length;)for(a=0,s=(i=d.shift()).length;a<s;a++)for(u=cn(i[a]),p?u.triggerHandler("$destroy"):p=!p,l=0,c=(f=u.children()).length;l<c;l++)d.push(fn(f[l]));return o.apply(this,arguments)}var o=fn.fn[e];o=o.$original||o,i.$original=o,fn.fn[e]=i}function le(e){return!On.test(e)}function ce(e,t){var n,r,i,o,a,s,u=t.createDocumentFragment(),l=[];if(le(e))l.push(t.createTextNode(e));else{for(n=u.appendChild(t.createElement("div")),r=(Mn.exec(e)||["",""])[1].toLowerCase(),i=Nn[r]||Nn._default,n.innerHTML="<div>&#160;</div>"+i[1]+e.replace(Dn,"<$1></$2>")+i[2],n.removeChild(n.firstChild),o=i[0];o--;)n=n.lastChild;for(a=0,s=n.childNodes.length;a<s;++a)l.push(n.childNodes[a]);(n=u.firstChild).textContent=""}return u.textContent="",u.innerHTML="",l}function fe(e,n){n=n||t;var r;return(r=Tn.exec(e))?[n.createElement(r[1])]:ce(e,n)}function de(e){if(e instanceof de)return e;if(w(e)&&(e=bn(e)),!(this instanceof de)){if(w(e)&&"<"!=e.charAt(0))throw jn("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new de(e)}w(e)?(xe(this,fe(e)),cn(t.createDocumentFragment()).append(this)):xe(this,e)}function pe(e){return e.cloneNode(!0)}function he(e){ve(e);for(var t=0,n=e.childNodes||[];t<n.length;t++)he(n[t])}function me(e,t,n,r){if($(r))throw jn("offargs","jqLite#off() does not support the `selector` argument");var i=ge(e,"events");ge(e,"handle")&&(g(t)?o(i,function(t,n){_n(e,n,t),delete i[n]}):o(t.split(" "),function(t){g(n)?(_n(e,t,i[t]),delete i[t]):M(i[t]||[],n)}))}function ve(e,t){var r=e.ng339,i=Sn[r];if(i){if(t)return void delete Sn[r].data[t];i.handle&&(i.events.$destroy&&i.handle({},"$destroy"),me(e)),delete Sn[r],e.ng339=n}}function ge(e,t,n){var r=e.ng339,i=Sn[r||-1];if(!$(n))return i&&i[t];i||(e.ng339=r=ae(),i=Sn[r]={}),i[t]=n}function $e(e,t,n){var r=ge(e,"data"),i=$(n),o=!i&&$(t),a=o&&!y(t);if(r||a||ge(e,"data",r={}),i)r[t]=n;else{if(!o)return r;if(a)return r&&r[t];f(r,t)}}function ye(e,t){return!!e.getAttribute&&(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1}function we(e,t){t&&e.setAttribute&&o(t.split(" "),function(t){e.setAttribute("class",bn((" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+bn(t)+" "," ")))})}function be(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");o(t.split(" "),function(e){e=bn(e),-1===n.indexOf(" "+e+" ")&&(n+=e+" ")}),e.setAttribute("class",bn(n))}}function xe(e,t){if(t){t=t.nodeName||!$(t.length)||S(t)?[t]:t;for(var n=0;n<t.length;n++)e.push(t[n])}}function Ce(e,t){return ke(e,"$"+(t||"ngController")+"Controller")}function ke(e,t,r){9==e.nodeType&&(e=e.documentElement);for(var i=wn(t)?t:[t];e;){for(var o=0,a=i.length;o<a;o++)if((r=cn.data(e,i[o]))!==n)return r;e=e.parentNode||11===e.nodeType&&e.host}}function Se(e){for(var t=0,n=e.childNodes;t<n.length;t++)he(n[t]);for(;e.firstChild;)e.removeChild(e.firstChild)}function Ee(e,t){var n=In[t.toLowerCase()];return n&&Fn[e.nodeName]&&n}function qe(e,n){var r=function(r,i){if(r.preventDefault||(r.preventDefault=function(){r.returnValue=!1}),r.stopPropagation||(r.stopPropagation=function(){r.cancelBubble=!0}),r.target||(r.target=r.srcElement||t),g(r.defaultPrevented)){var a=r.preventDefault;r.preventDefault=function(){r.defaultPrevented=!0,a.call(r)},r.defaultPrevented=!1}r.isDefaultPrevented=function(){return r.defaultPrevented||!1===r.returnValue},o(N(n[i||r.type]||[]),function(t){t.call(e,r)}),ln<=8?(r.preventDefault=null,r.stopPropagation=null,r.isDefaultPrevented=null):(delete r.preventDefault,delete r.stopPropagation,delete r.isDefaultPrevented)};return r.elem=e,r}function _e(e,t){var r,i=typeof e;return"function"==i||"object"==i&&null!==e?"function"==typeof(r=e.$$hashKey)?r=e.$$hashKey():r===n&&(r=e.$$hashKey=(t||l)()):r=e,i+":"+r}function Pe(e,t){if(t){var n=0;this.nextUid=function(){return++n}}o(e,this.put,this)}function Ae(e){var t,n;return"function"==typeof e?(t=e.$inject)||(t=[],e.length&&o(e.toString().replace(Bn,"").match(Un)[1].split(Ln),function(e){e.replace(Vn,function(e,n,r){t.push(r)})}),e.$inject=t):wn(e)?(te(e[n=e.length-1],"fn"),t=e.slice(0,n)):te(e,"fn",!0),t}function je(e){function t(e){return function(t,n){if(!y(t))return e(t,n);o(t,u(e))}}function n(e,t){if(ne(e,"service"),(C(t)||wn(t))&&(t=p.instantiate(t)),!t.$get)throw zn("pget","Provider '{0}' must define $get factory method.",e);return d[e+l]=t}function r(e,t){return n(e,{$get:t})}function i(e){var t,n,r,a,s=[];return o(e,function(e){if(!f.get(e)){f.put(e,!0);try{if(w(e))for(t=dn(e),s=s.concat(i(t.requires)).concat(t._runBlocks),n=t._invokeQueue,r=0,a=n.length;r<a;r++){var o=n[r],u=p.get(o[0]);u[o[1]].apply(u,o[2])}else C(e)?s.push(p.invoke(e)):wn(e)?s.push(p.invoke(e)):te(e,"module")}catch(t){throw wn(e)&&(e=e[e.length-1]),t.message&&t.stack&&-1==t.stack.indexOf(t.message)&&(t=t.message+"\n"+t.stack),zn("modulerr","Failed to instantiate module {0} due to:\n{1}",e,t.stack||t.message||t)}}}),s}function a(e,t){function n(n){if(e.hasOwnProperty(n)){if(e[n]===s)throw zn("cdep","Circular dependency found: {0}",n+" <- "+c.join(" <- "));return e[n]}try{return c.unshift(n),e[n]=s,e[n]=t(n)}catch(t){throw e[n]===s&&delete e[n],t}finally{c.shift()}}function r(e,t,r){var i,o,a,s=[],u=Ae(e);for(o=0,i=u.length;o<i;o++){if("string"!=typeof(a=u[o]))throw zn("itkn","Incorrect injection token! Expected service name as string, got {0}",a);s.push(r&&r.hasOwnProperty(a)?r[a]:n(a))}return wn(e)&&(e=e[i]),e.apply(t,s)}return{invoke:r,instantiate:function(e,t){var n,i,o=function(){};return o.prototype=(wn(e)?e[e.length-1]:e).prototype,n=new o,i=r(e,n,t),y(i)||C(i)?i:n},get:n,annotate:Ae,has:function(t){return d.hasOwnProperty(t+l)||e.hasOwnProperty(t)}}}var s={},l="Provider",c=[],f=new Pe([],!0),d={$provide:{provider:t(n),factory:t(r),service:t(function(e,t){return r(e,["$injector",function(e){return e.instantiate(t)}])}),value:t(function(e,t){return r(e,v(t))}),constant:t(function(e,t){ne(e,"constant"),d[e]=t,m[e]=t}),decorator:function(e,t){var n=p.get(e+l),r=n.$get;n.$get=function(){var e=g.invoke(r,n);return g.invoke(t,null,{$delegate:e})}}}},p=d.$injector=a(d,function(){throw zn("unpr","Unknown provider: {0}",c.join(" <- "))}),m={},g=m.$injector=a(m,function(e){var t=p.get(e+l);return g.invoke(t.$get,t)});return o(i(e),function(e){g.invoke(e||h)}),g}function Te(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(t,n,r){function i(e){var t=null;return o(e,function(e){t||"a"!==an(e.nodeName)||(t=e)}),t}function a(){var e,r=n.hash();r?(e=s.getElementById(r))?e.scrollIntoView():(e=i(s.getElementsByName(r)))?e.scrollIntoView():"top"===r&&t.scrollTo(0,0):t.scrollTo(0,0)}var s=t.document;return e&&r.$watch(function(){return n.hash()},function(){r.$evalAsync(a)}),a}]}function Oe(){this.$get=["$$rAF","$timeout",function(e,t){return e.supported?function(t){return e(t)}:function(e){return t(e,0,!1)}}]}function Me(e,t,r,i){function a(e){try{e.apply(null,F(arguments,1))}finally{if(0==--$)for(;y.length;)try{y.pop()()}catch(e){r.error(e)}}}function s(e,t){!function n(){o(x,function(e){e()}),b=t(n,e)}()}function u(){C!=l.url()&&(C=l.url(),o(E,function(e){e(l.url())}))}var l=this,c=t[0],f=e.location,d=e.history,p=e.setTimeout,m=e.clearTimeout,v={};l.isMock=!1;var $=0,y=[];l.$$completeOutstandingRequest=a,l.$$incOutstandingRequestCount=function(){$++},l.notifyWhenNoOutstandingRequests=function(e){o(x,function(e){e()}),0===$?e():y.push(e)};var b,x=[];l.addPollFn=function(e){return g(b)&&s(100,p),x.push(e),e};var C=f.href,k=t.find("base"),S=null;l.url=function(t,n){if(f!==e.location&&(f=e.location),d!==e.history&&(d=e.history),t){if(C==t)return;var r=C&&ot(C)===ot(t);return C=t,!r&&i.history?n?d.replaceState(null,"",t):(d.pushState(null,"",t),k.attr("href",k.attr("href"))):(r||(S=t),n?f.replace(t):f.href=t),l}return S||f.href.replace(/%27/g,"'")};var E=[],q=!1;l.onUrlChange=function(t){return q||(i.history&&cn(e).on("popstate",u),i.hashchange?cn(e).on("hashchange",u):l.addPollFn(u),q=!0),E.push(t),t},l.$$checkUrlChange=u,l.baseHref=function(){var e=k.attr("href");return e?e.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var _={},P="",A=l.baseHref();l.cookies=function(e,t){var i,o,a,s,u;if(!e){if(c.cookie!==P)for(o=(P=c.cookie).split("; "),_={},s=0;s<o.length;s++)(u=(a=o[s]).indexOf("="))>0&&(e=unescape(a.substring(0,u)),_[e]===n&&(_[e]=unescape(a.substring(u+1))));return _}t===n?c.cookie=escape(e)+"=;path="+A+";expires=Thu, 01 Jan 1970 00:00:00 GMT":w(t)&&(i=(c.cookie=escape(e)+"="+escape(t)+";path="+A).length+1)>4096&&r.warn("Cookie '"+e+"' possibly not set or overflowed because it was too large ("+i+" > 4096 bytes)!")},l.defer=function(e,t){var n;return $++,n=p(function(){delete v[n],a(e)},t||0),v[n]=!0,n},l.defer.cancel=function(e){return!!v[e]&&(delete v[e],m(e),a(h),!0)}}function De(){this.$get=["$window","$log","$sniffer","$document",function(e,t,n,r){return new Me(e,r,t,n)}]}function Ne(){this.$get=function(){function e(e,n){function i(e){e!=d&&(p?p==e&&(p=e.n):p=e,o(e.n,e.p),o(e,d),(d=e).n=null)}function o(e,t){e!=t&&(e&&(e.p=t),t&&(t.n=e))}if(e in t)throw r("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var a=0,s=f({},n,{id:e}),u={},l=n&&n.capacity||Number.MAX_VALUE,c={},d=null,p=null;return t[e]={put:function(e,t){if(l<Number.MAX_VALUE&&i(c[e]||(c[e]={key:e})),!g(t))return e in u||a++,u[e]=t,a>l&&this.remove(p.key),t},get:function(e){if(l<Number.MAX_VALUE){var t=c[e];if(!t)return;i(t)}return u[e]},remove:function(e){if(l<Number.MAX_VALUE){var t=c[e];if(!t)return;t==d&&(d=t.p),t==p&&(p=t.n),o(t.n,t.p),delete c[e]}delete u[e],a--},removeAll:function(){u={},a=0,c={},d=p=null},destroy:function(){u=null,s=null,c=null,delete t[e]},info:function(){return f({},s,{size:a})}}}var t={};return e.info=function(){var e={};return o(t,function(t,n){e[n]=t.info()}),e},e.get=function(e){return t[e]},e}}function Re(){this.$get=["$cacheFactory",function(e){return e("templates")}]}function Ie(e,r){var i={},a="Directive",s=/^\s*directive\:\s*([\d\w_\-]+)\s+(.*)$/,l=/(([\d\w_\-]+)(?:\:([^;]+))?;?)/,c=/^(on[a-z]+|formaction)$/;this.directive=function t(n,r){return ne(n,"directive"),w(n)?(ee(r,"directiveFactory"),i.hasOwnProperty(n)||(i[n]=[],e.factory(n+a,["$injector","$exceptionHandler",function(e,t){var r=[];return o(i[n],function(i,o){try{var a=e.invoke(i);C(a)?a={compile:v(a)}:!a.compile&&a.link&&(a.compile=v(a.link)),a.priority=a.priority||0,a.index=o,a.name=a.name||n,a.require=a.require||a.controller&&a.name,a.restrict=a.restrict||"A",r.push(a)}catch(e){t(e)}}),r}])),i[n].push(r)):o(n,u(t)),this},this.aHrefSanitizationWhitelist=function(e){return $(e)?(r.aHrefSanitizationWhitelist(e),this):r.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return $(e)?(r.imgSrcSanitizationWhitelist(e),this):r.imgSrcSanitizationWhitelist()},this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(e,r,u,d,h,v,g,$,b,x,k,S){function E(e,t,n,r,i){e instanceof cn||(e=cn(e)),o(e,function(t,n){3==t.nodeType&&t.nodeValue.match(/\S+/)&&(e[n]=t=cn(t).wrap("<span></span>").parent()[0])});var a=_(e,t,e,n,r,i);return q(e,"ng-scope"),function(t,n,r,i){ee(t,"scope");var s=n?Rn.clone.call(e):e;o(r,function(e,t){s.data("$"+t+"Controller",e)});for(var u=0,l=s.length;u<l;u++){var c=s[u].nodeType;1!==c&&9!==c||s.eq(u).data("$scope",t)}return n&&n(s,t),a&&a(t,s,s,i),s}}function q(e,t){try{e.addClass(t)}catch(e){}}function _(e,t,r,i,o,a){for(var s,u,l,c,f,d,p=[],h=0;h<e.length;h++)s=new Y,(l=(u=A(e[h],[],s,0===h?i:n,o)).length?O(u,e[h],s,t,r,null,[],[],a):null)&&l.scope&&q(s.$$element,"ng-scope"),f=l&&l.terminal||!(c=e[h].childNodes)||!c.length?null:_(c,l?(l.transcludeOnThisElement||!l.templateOnThisElement)&&l.transclude:t),p.push(l,f),d=d||l||f,a=null;return d?function(e,r,i,o){var a,s,u,l,c,f,d,h=r.length,m=new Array(h);for(c=0;c<h;c++)m[c]=r[c];for(c=0,d=0,f=p.length;c<f;d++)u=m[d],a=p[c++],s=p[c++],a?(a.scope?(l=e.$new(),cn.data(u,"$scope",l)):l=e,a(s,l,u,i,a.transcludeOnThisElement?P(e,a.transclude,o):!a.templateOnThisElement&&o?o:!o&&t?P(e,t):null)):s&&s(e,u.childNodes,n,o)}:null}function P(e,t,n){return function(r,i,o){var a=!1;r||((r=e.$new()).$$transcluded=!0,a=!0);var s=t(r,i,o,n);return a&&s.on("$destroy",function(){r.$destroy()}),s}}function A(e,t,n,r,i){var o,a,u=e.nodeType,c=n.$attr;switch(u){case 1:D(t,Fe(pn(e).toLowerCase()),"E",r,i);for(var f,d,p,h,m,v,g=e.attributes,$=0,y=g&&g.length;$<y;$++){var b=!1,x=!1;f=g[$],(!ln||ln>=8||f.specified)&&(d=f.name,m=bn(f.value),h=Fe(d),(v=te.test(h))&&(d=Z(h.substr(6),"-")),h===h.replace(/(Start|End)$/,"")+"Start"&&(b=d,x=d.substr(0,d.length-5)+"end",d=d.substr(0,d.length-6)),c[p=Fe(d.toLowerCase())]=d,!v&&n.hasOwnProperty(p)||(n[p]=m,Ee(e,p)&&(n[p]=!0)),G(e,t,m,p),D(t,p,"A",r,i,b,x))}if(a=e.className,w(a)&&""!==a)for(;o=l.exec(a);)D(t,p=Fe(o[2]),"C",r,i)&&(n[p]=bn(o[3])),a=a.substr(o.index+o[0].length);break;case 3:B(t,e.nodeValue);break;case 8:try{(o=s.exec(e.nodeValue))&&D(t,p=Fe(o[1]),"M",r,i)&&(n[p]=bn(o[2]))}catch(e){}}return t.sort(L),t}function j(e,t,n){var r=[],i=0;if(t&&e.hasAttribute&&e.hasAttribute(t))do{if(!e)throw Wn("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);1==e.nodeType&&(e.hasAttribute(t)&&i++,e.hasAttribute(n)&&i--),r.push(e),e=e.nextSibling}while(i>0);else r.push(e);return cn(r)}function T(e,t,n){return function(r,i,o,a,s){return i=j(i[0],t,n),e(r,i,o,a,s)}}function O(e,i,a,s,l,c,f,d,p){function h(e,t,n,r){e&&(n&&(e=T(e,n,r)),e.require=x.require,e.directiveName=k,(L===x||x.$$isolateScope)&&(e=Q(e,{isolateScope:!0})),f.push(e)),t&&(n&&(t=T(t,n,r)),t.require=x.require,t.directiveName=k,(L===x||x.$$isolateScope)&&(t=Q(t,{isolateScope:!0})),d.push(t))}function m(e,t,n,r){var i,a="data",s=!1;if(w(t)){for(;"^"==(i=t.charAt(0))||"?"==i;)t=t.substr(1),"^"==i&&(a="inheritedData"),s=s||"?"==i;if(i=null,r&&"data"===a&&(i=r[t]),!(i=i||n[a]("$"+t+"Controller"))&&!s)throw Wn("ctreq","Controller '{0}', required by directive '{1}', can't be found!",t,e);return i}return wn(t)&&(i=[],o(t,function(t){i.push(m(e,t,n,r))})),i}function $(e,t,s,l,c){var p,h,$,y,w,b,x,C,k={};if(p=i===s?a:N(a,new Y(cn(s),a.$attr)),h=p.$$element,L){var S=/^\s*([@=&])(\??)\s*(\w*)\s*$/;x=t.$new(!0),!B||B!==L&&B!==L.$$originalDirective?h.data("$isolateScopeNoTemplate",x):h.data("$isolateScope",x),q(h,"ng-isolate-scope"),o(L.scope,function(e,n){var i,o,a,s,u=e.match(S)||[],l=u[3]||n,c="?"==u[2],f=u[1];switch(x.$$isolateBindings[n]=f+l,f){case"@":p.$observe(l,function(e){x[n]=e}),p.$$observers[l].$$scope=t,p[l]&&(x[n]=r(p[l])(t));break;case"=":if(c&&!p[l])return;o=v(p[l]),s=o.literal?R:function(e,t){return e===t||e!=e&&t!=t},a=o.assign||function(){throw i=x[n]=o(t),Wn("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",p[l],L.name)},i=x[n]=o(t),x.$watch(function(){var e=o(t);return s(e,x[n])||(s(e,i)?a(t,e=x[n]):x[n]=e),i=e},null,o.literal);break;case"&":o=v(p[l]),x[n]=function(e){return o(t,e)};break;default:throw Wn("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",L.name,n,e)}})}for(C=c&&function(e,t){var r;return arguments.length<2&&(t=e,e=n),J&&(r=k),c(e,t,r)},D&&o(D,function(e){var n,r={$scope:e===L||e.$$isolateScope?x:t,$element:h,$attrs:p,$transclude:C};"@"==(b=e.controller)&&(b=p[e.name]),n=g(b,r),k[e.name]=n,J||h.data("$"+e.name+"Controller",n),e.controllerAs&&(r.$scope[e.controllerAs]=n)}),$=0,y=f.length;$<y;$++)try{(w=f[$])(w.isolateScope?x:t,h,p,w.require&&m(w.directiveName,w.require,h,k),C)}catch(e){u(e,H(h))}var E=t;for(L&&(L.template||null===L.templateUrl)&&(E=x),e&&e(E,s.childNodes,n,c),$=d.length-1;$>=0;$--)try{(w=d[$])(w.isolateScope?x:t,h,p,w.require&&m(w.directiveName,w.require,h,k),C)}catch(e){u(e,H(h))}}p=p||{};for(var b,x,k,S,_,P,O=-Number.MAX_VALUE,D=p.controllerDirectives,L=p.newIsolateScopeDirective,B=p.templateDirective,z=p.nonTlbTranscludeDirective,G=!1,X=!1,J=p.hasElementTranscludeDirective,Z=a.$$element=cn(i),ee=c,te=s,ne=0,re=e.length;ne<re;ne++){var ie=(x=e[ne]).$$start,oe=x.$$end;if(ie&&(Z=j(i,ie,oe)),S=n,O>x.priority)break;if((P=x.scope)&&(b=b||x,x.templateUrl||(V("new/isolated scope",L,x,Z),y(P)&&(L=x))),k=x.name,!x.templateUrl&&x.controller&&(P=x.controller,V("'"+k+"' controller",(D=D||{})[k],x,Z),D[k]=x),(P=x.transclude)&&(G=!0,x.$$tlb||(V("transclusion",z,x,Z),z=x),"element"==P?(J=!0,O=x.priority,S=Z,Z=a.$$element=cn(t.createComment(" "+k+": "+a[k]+" ")),i=Z[0],W(l,F(S),i),te=E(S,s,O,ee&&ee.name,{nonTlbTranscludeDirective:z})):(S=cn(pe(i)).contents(),Z.empty(),te=E(S,s))),x.template)if(X=!0,V("template",B,x,Z),B=x,P=C(x.template)?x.template(Z,a):x.template,P=K(P),x.replace){if(ee=x,S=le(P)?[]:cn(bn(P)),i=S[0],1!=S.length||1!==i.nodeType)throw Wn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",k,"");W(l,Z,i);var ae={$attr:{}},se=A(i,[],ae),ue=e.splice(ne+1,e.length-(ne+1));L&&M(se),e=e.concat(se).concat(ue),I(a,ae),re=e.length}else Z.html(P);if(x.templateUrl)X=!0,V("template",B,x,Z),B=x,x.replace&&(ee=x),$=U(e.splice(ne,e.length-ne),Z,a,l,G&&te,f,d,{controllerDirectives:D,newIsolateScopeDirective:L,templateDirective:B,nonTlbTranscludeDirective:z}),re=e.length;else if(x.compile)try{C(_=x.compile(Z,a,te))?h(null,_,ie,oe):_&&h(_.pre,_.post,ie,oe)}catch(e){u(e,H(Z))}x.terminal&&($.terminal=!0,O=Math.max(O,x.priority))}return $.scope=b&&!0===b.scope,$.transcludeOnThisElement=G,$.templateOnThisElement=X,$.transclude=te,p.hasElementTranscludeDirective=J,$}function M(e){for(var t=0,n=e.length;t<n;t++)e[t]=p(e[t],{$$isolateScope:!0})}function D(t,r,o,s,l,c,f){if(r===l)return null;var d=null;if(i.hasOwnProperty(r))for(var h,m=e.get(r+a),v=0,g=m.length;v<g;v++)try{h=m[v],(s===n||s>h.priority)&&-1!=h.restrict.indexOf(o)&&(c&&(h=p(h,{$$start:c,$$end:f})),t.push(h),d=h)}catch(e){u(e)}return d}function I(e,t){var n=t.$attr,r=e.$attr,i=e.$$element;o(e,function(r,i){"$"!=i.charAt(0)&&(t[i]&&t[i]!==r&&(r+=("style"===i?";":" ")+t[i]),e.$set(i,r,!0,n[i]))}),o(t,function(t,o){"class"==o?(q(i,t),e.class=(e.class?e.class+" ":"")+t):"style"==o?(i.attr("style",i.attr("style")+";"+t),e.style=(e.style?e.style+";":"")+t):"$"==o.charAt(0)||e.hasOwnProperty(o)||(e[o]=t,r[o]=n[o])})}function U(e,t,n,r,i,a,s,u){var l,c,p=[],m=t[0],v=e.shift(),g=f({},v,{templateUrl:null,transclude:null,replace:null,$$originalDirective:v}),$=C(v.templateUrl)?v.templateUrl(t,n):v.templateUrl;return t.empty(),d.get(x.getTrustedResourceUrl($),{cache:h}).success(function(f){var d,h,w,b;if(f=K(f),v.replace){if(w=le(f)?[]:cn(bn(f)),d=w[0],1!=w.length||1!==d.nodeType)throw Wn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",v.name,$);h={$attr:{}},W(r,t,d);var x=A(d,[],h);y(v.scope)&&M(x),e=x.concat(e),I(n,h)}else d=m,t.html(f);for(e.unshift(g),l=O(e,d,n,i,t,v,a,s,u),o(r,function(e,n){e==d&&(r[n]=t[0])}),c=_(t[0].childNodes,i);p.length;){var C=p.shift(),k=p.shift(),S=p.shift(),E=p.shift(),j=t[0];if(k!==m){var T=k.className;u.hasElementTranscludeDirective&&v.replace||(j=pe(d)),W(S,cn(k),j),q(cn(j),T)}b=l.transcludeOnThisElement?P(C,l.transclude,E):E,l(c,C,j,r,b)}p=null}).error(function(e,t,n,r){throw Wn("tpload","Failed to load template: {0}",r.url)}),function(e,t,n,r,i){var o=i;p?(p.push(t),p.push(n),p.push(r),p.push(o)):(l.transcludeOnThisElement&&(o=P(t,l.transclude,i)),l(c,t,n,r,o))}}function L(e,t){var n=t.priority-e.priority;return 0!==n?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function V(e,t,n,r){if(t)throw Wn("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",t.name,n.name,e,H(r))}function B(e,t){var n=r(t,!0);n&&e.push({priority:0,compile:function(e){var t=e.parent().length;return t&&q(e.parent(),"ng-binding"),function(e,r){var i=r.parent(),o=i.data("$binding")||[];o.push(n),i.data("$binding",o),t||q(i,"ng-binding"),e.$watch(n,function(e){r[0].nodeValue=e})}}})}function z(e,t){if("srcdoc"==t)return x.HTML;var n=pn(e);return"xlinkHref"==t||"FORM"==n&&"action"==t||"IMG"!=n&&("src"==t||"ngSrc"==t)?x.RESOURCE_URL:void 0}function G(e,t,n,i){var o=r(n,!0);if(o){if("multiple"===i&&"SELECT"===pn(e))throw Wn("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",H(e));t.push({priority:100,compile:function(){return{pre:function(t,n,a){var s=a.$$observers||(a.$$observers={});if(c.test(i))throw Wn("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");(o=r(a[i],!0,z(e,i)))&&(a[i]=o(t),(s[i]||(s[i]=[])).$$inter=!0,(a.$$observers&&a.$$observers[i].$$scope||t).$watch(o,function(e,t){"class"===i&&e!=t?a.$updateClass(e,t):a.$set(i,e)}))}}}})}}function W(e,n,r){var i,o,a=n[0],s=n.length,u=a.parentNode;if(e)for(i=0,o=e.length;i<o;i++)if(e[i]==a){e[i++]=r;for(var l=i,c=l+s-1,f=e.length;l<f;l++,c++)c<f?e[l]=e[c]:delete e[l];e.length-=s-1;break}u&&u.replaceChild(r,a);var d=t.createDocumentFragment();d.appendChild(a),r[cn.expando]=a[cn.expando];for(var p=1,h=n.length;p<h;p++){var m=n[p];cn(m).remove(),d.appendChild(m),delete n[p]}n[0]=r,n.length=1}function Q(e,t){return f(function(){return e.apply(null,arguments)},e,t)}var Y=function(e,t){this.$$element=e,this.$attr=t||{}};Y.prototype={$normalize:Fe,$addClass:function(e){e&&e.length>0&&k.addClass(this.$$element,e)},$removeClass:function(e){e&&e.length>0&&k.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=Ue(e,t),r=Ue(t,e);0===n.length?k.removeClass(this.$$element,r):0===r.length?k.addClass(this.$$element,n):k.setClass(this.$$element,n,r)},$set:function(e,t,r,i){var a,s=Ee(this.$$element[0],e);s&&(this.$$element.prop(e,t),i=s),this[e]=t,i?this.$attr[e]=i:(i=this.$attr[e])||(this.$attr[e]=i=Z(e,"-")),("A"===(a=pn(this.$$element))&&"href"===e||"IMG"===a&&"src"===e)&&(this[e]=t=S(t,"src"===e)),!1!==r&&(null===t||t===n?this.$$element.removeAttr(i):this.$$element.attr(i,t));var l=this.$$observers;l&&o(l[e],function(e){try{e(t)}catch(e){u(e)}})},$observe:function(e,t){var n=this,r=n.$$observers||(n.$$observers={}),i=r[e]||(r[e]=[]);return i.push(t),$.$evalAsync(function(){i.$$inter||t(n[e])}),t}};var X=r.startSymbol(),J=r.endSymbol(),K="{{"==X||"}}"==J?m:function(e){return e.replace(/\{\{/g,X).replace(/}}/g,J)},te=/^ngAttr[A-Z]/;return E}]}function Fe(e){return se(e.replace(Qn,""))}function Ue(e,t){var n="",r=e.split(/\s+/),i=t.split(/\s+/);e:for(var o=0;o<r.length;o++){for(var a=r[o],s=0;s<i.length;s++)if(a==i[s])continue e;n+=(n.length>0?" ":"")+a}return n}function Le(){var e={},t=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(t,n){ne(t,"controller"),y(t)?f(e,t):e[t]=n},this.$get=["$injector","$window",function(n,i){return function(o,a){var s,u,l,c;if(w(o)&&(l=(u=o.match(t))[1],c=u[3],te(o=e.hasOwnProperty(l)?e[l]:re(a.$scope,l,!0)||re(i,l,!0),l,!0)),s=n.instantiate(o,a),c){if(!a||"object"!=typeof a.$scope)throw r("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",l||o.name,c);a.$scope[c]=s}return s}}]}function Ve(){this.$get=["$window",function(e){return cn(e.document)}]}function Be(){this.$get=["$log",function(e){return function(t,n){e.error.apply(e,arguments)}}]}function ze(e){var t,n,r,i={};return e?(o(e.split("\n"),function(e){r=e.indexOf(":"),t=an(bn(e.substr(0,r))),n=bn(e.substr(r+1)),t&&(i[t]=i[t]?i[t]+", "+n:n)}),i):i}function He(e){var t=y(e)?e:n;return function(n){return t||(t=ze(e)),n?t[an(n)]||null:t}}function Ge(e,t,n){return C(n)?n(e,t):(o(n,function(n){e=n(e,t)}),e)}function We(e){return 200<=e&&e<300}function Qe(){var e=/^\s*(\[|\{[^\{])/,t=/[\}\]]\s*$/,r=/^\)\]\}',?\n/,i={"Content-Type":"application/json;charset=utf-8"},a=this.defaults={transformResponse:[function(n){return w(n)&&(n=n.replace(r,""),e.test(n)&&t.test(n)&&(n=B(n))),n}],transformRequest:[function(e){return!y(e)||q(e)||_(e)?e:V(e)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:N(i),put:N(i),patch:N(i)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},u=this.interceptors=[],l=this.responseInterceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(e,t,r,i,c,d){function p(e){function t(e){var t=f({},e,{data:Ge(e.data,e.headers,r.transformResponse)});return We(e.status)?t:c.reject(t)}var r={method:"get",transformRequest:a.transformRequest,transformResponse:a.transformResponse},i=function(e){var t,n,r,i=a.headers,s=f({},e.headers);i=f({},i.common,i[an(e.method)]);e:for(t in i){n=an(t);for(r in s)if(an(r)===n)continue e;s[t]=i[t]}return function(e){var t;o(e,function(n,r){C(n)&&(null!=(t=n())?e[r]=t:delete e[r])})}(s),s}(e);f(r,e),r.headers=i,r.method=un(r.method);var s=[function(e){i=e.headers;var n=Ge(e.data,He(i),e.transformRequest);return g(n)&&o(i,function(e,t){"content-type"===an(t)&&delete i[t]}),g(e.withCredentials)&&!g(a.withCredentials)&&(e.withCredentials=a.withCredentials),h(e,n,i).then(t,t)},n],u=c.when(r);for(o(b,function(e){(e.request||e.requestError)&&s.unshift(e.request,e.requestError),(e.response||e.responseError)&&s.push(e.response,e.responseError)});s.length;){var l=s.shift(),d=s.shift();u=u.then(l,d)}return u.success=function(e){return u.then(function(t){e(t.data,t.status,t.headers,r)}),u},u.error=function(e){return u.then(null,function(t){e(t.data,t.status,t.headers,r)}),u},u}function h(r,o,s){function u(e,t,n,i){(We(t=Math.max(t,0))?h.resolve:h.reject)({data:e,status:t,headers:He(n),config:r,statusText:i})}function l(){var e=O(p.pendingRequests,r);-1!==e&&p.pendingRequests.splice(e,1)}var f,d,h=c.defer(),w=h.promise,b=m(r.url,r.params);if(p.pendingRequests.push(r),w.then(l,l),!r.cache&&!a.cache||!1===r.cache||"GET"!==r.method&&"JSONP"!==r.method||(f=y(r.cache)?r.cache:y(a.cache)?a.cache:v),f)if(d=f.get(b),$(d)){if(P(d))return d.then(l,l),d;wn(d)?u(d[1],d[0],N(d[2]),d[3]):u(d,200,{},"OK")}else f.put(b,w);if(g(d)){var x=Rt(r.url)?t.cookies()[r.xsrfCookieName||a.xsrfCookieName]:n;x&&(s[r.xsrfHeaderName||a.xsrfHeaderName]=x),e(r.method,b,o,function(e,t,n,r){f&&(We(e)?f.put(b,[e,t,ze(n),r]):f.remove(b)),u(t,e,n,r),i.$$phase||i.$apply()},s,r.timeout,r.withCredentials,r.responseType)}return w}function m(e,t){if(!t)return e;var n=[];return s(t,function(e,t){null===e||g(e)||(wn(e)||(e=[e]),o(e,function(e){y(e)&&(e=x(e)?e.toISOString():V(e)),n.push(X(t)+"="+X(e))}))}),n.length>0&&(e+=(-1==e.indexOf("?")?"?":"&")+n.join("&")),e}var v=r("$http"),b=[];return o(u,function(e){b.unshift(w(e)?d.get(e):d.invoke(e))}),o(l,function(e,t){var n=w(e)?d.get(e):d.invoke(e);b.splice(t,0,{response:function(e){return n(c.when(e))},responseError:function(e){return n(c.reject(e))}})}),p.pendingRequests=[],function(e){o(arguments,function(e){p[e]=function(t,n){return p(f(n||{},{method:e,url:t}))}})}("get","delete","head","jsonp"),function(e){o(arguments,function(e){p[e]=function(t,n,r){return p(f(r||{},{method:e,url:t,data:n}))}})}("post","put","patch"),p.defaults=a,p}]}function Ye(t){if(ln<=8&&(!t.match(/^(get|post|head|put|delete|options)$/i)||!e.XMLHttpRequest))return new e.ActiveXObject("Microsoft.XMLHTTP");if(e.XMLHttpRequest)return new e.XMLHttpRequest;throw r("$httpBackend")("noxhr","This browser does not support XMLHttpRequest.")}function Xe(){this.$get=["$browser","$window","$document",function(e,t,n){return Je(e,Ye,e.defer,t.angular.callbacks,n[0])}]}function Je(e,t,n,r,i){function a(e,t,n){var o=i.createElement("script"),a=null;return o.type="text/javascript",o.src=e,o.async=!0,a=function(e){_n(o,"load",a),_n(o,"error",a),i.body.removeChild(o),o=null;var s=-1,u="unknown";e&&("load"!==e.type||r[t].called||(e={type:"error"}),u=e.type,s="error"===e.type?404:200),n&&n(s,u)},qn(o,"load",a),qn(o,"error",a),ln<=8&&(o.onreadystatechange=function(){w(o.readyState)&&/loaded|complete/.test(o.readyState)&&(o.onreadystatechange=null,a({type:"load"}))}),i.body.appendChild(o),a}var s=-1;return function(i,u,l,c,f,d,p,m){function v(){y=s,b&&b(),x&&x.abort()}function g(t,r,i,o,a){C&&n.cancel(C),b=x=null,0===r&&(r=i?200:"file"==Nt(u).protocol?404:0),t(r=1223===r?204:r,i,o,a=a||""),e.$$completeOutstandingRequest(h)}var y;if(e.$$incOutstandingRequestCount(),u=u||e.url(),"jsonp"==an(i)){var w="_"+(r.counter++).toString(36);r[w]=function(e){r[w].data=e,r[w].called=!0};var b=a(u.replace("JSON_CALLBACK","angular.callbacks."+w),w,function(e,t){g(c,e,r[w].data,"",t),r[w]=h})}else{var x=t(i);if(x.open(i,u,!0),o(f,function(e,t){$(e)&&x.setRequestHeader(t,e)}),x.onreadystatechange=function(){if(x&&4==x.readyState){var e=null,t=null,n="";y!==s&&(e=x.getAllResponseHeaders(),t="response"in x?x.response:x.responseText),y===s&&ln<10||(n=x.statusText),g(c,y||x.status,t,e,n)}},p&&(x.withCredentials=!0),m)try{x.responseType=m}catch(e){if("json"!==m)throw e}x.send(l||null)}if(d>0)var C=n(v,d);else P(d)&&d.then(v)}}function Ke(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,i){function o(o,u,l){for(var c,f,d,p,h=0,m=[],v=o.length,g=!1,$=[];h<v;)-1!=(c=o.indexOf(e,h))&&-1!=(f=o.indexOf(t,c+a))?(h!=c&&m.push(o.substring(h,c)),m.push(d=n(p=o.substring(c+a,f))),d.exp=p,h=f+s,g=!0):(h!=v&&m.push(o.substring(h)),h=v);if((v=m.length)||(m.push(""),v=1),l&&m.length>1)throw Yn("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",o);if(!u||g)return $.length=v,d=function(e){try{for(var t,n=0,a=v;n<a;n++){if("function"==typeof(t=m[n]))if(t=t(e),null==(t=l?i.getTrusted(l,t):i.valueOf(t)))t="";else switch(typeof t){case"string":break;case"number":t=""+t;break;default:t=V(t)}$[n]=t}return $.join("")}catch(e){var s=Yn("interr","Can't interpolate: {0}\n{1}",o,e.toString());r(s)}},d.exp=o,d.parts=m,d}var a=e.length,s=t.length;return o.startSymbol=function(){return e},o.endSymbol=function(){return t},o}]}function Ze(){this.$get=["$rootScope","$window","$q",function(e,t,n){function r(r,o,a,s){var u=t.setInterval,l=t.clearInterval,c=n.defer(),f=c.promise,d=0,p=$(s)&&!s;return a=$(a)?a:0,f.then(null,null,r),f.$$intervalId=u(function(){c.notify(d++),a>0&&d>=a&&(c.resolve(d),l(f.$$intervalId),delete i[f.$$intervalId]),p||e.$apply()},o),i[f.$$intervalId]=c,f}var i={};return r.cancel=function(e){return!!(e&&e.$$intervalId in i)&&(i[e.$$intervalId].reject("canceled"),t.clearInterval(e.$$intervalId),delete i[e.$$intervalId],!0)},r}]}function et(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"",posSuf:"",negPre:"(",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a",short:"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(e){return 1===e?"one":"other"}}}}function tt(e){for(var t=e.split("/"),n=t.length;n--;)t[n]=Y(t[n]);return t.join("/")}function nt(e,t,n){var r=Nt(e,n);t.$$protocol=r.protocol,t.$$host=r.hostname,t.$$port=d(r.port)||Jn[r.protocol]||null}function rt(e,t,n){var r="/"!==e.charAt(0);r&&(e="/"+e);var i=Nt(e,n);t.$$path=decodeURIComponent(r&&"/"===i.pathname.charAt(0)?i.pathname.substring(1):i.pathname),t.$$search=W(i.search),t.$$hash=decodeURIComponent(i.hash),t.$$path&&"/"!=t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function it(e,t){if(0===t.indexOf(e))return t.substr(e.length)}function ot(e){var t=e.indexOf("#");return-1==t?e:e.substr(0,t)}function at(e){return e.substr(0,ot(e).lastIndexOf("/")+1)}function st(e){return e.substring(0,e.indexOf("/",e.indexOf("//")+2))}function ut(e,t){this.$$html5=!0,t=t||"";var r=at(e);nt(e,this,e),this.$$parse=function(t){var n=it(r,t);if(!w(n))throw Kn("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,r);rt(n,this,e),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=Q(this.$$search),t=this.$$hash?"#"+Y(this.$$hash):"";this.$$url=tt(this.$$path)+(e?"?"+e:"")+t,this.$$absUrl=r+this.$$url.substr(1)},this.$$parseLinkUrl=function(i,o){var a,s,u;return(a=it(e,i))!==n?(s=a,u=(a=it(t,a))!==n?r+(it("/",a)||a):e+s):(a=it(r,i))!==n?u=r+a:r==i+"/"&&(u=r),u&&this.$$parse(u),!!u}}function lt(e,t){var n=at(e);nt(e,this,e),this.$$parse=function(r){var i=it(e,r)||it(n,r),o="#"==i.charAt(0)?it(t,i):this.$$html5?i:"";if(!w(o))throw Kn("ihshprfx",'Invalid url "{0}", missing hash prefix "{1}".',r,t);rt(o,this,e),this.$$path=function(e,t,n){var r,i=/^\/[A-Z]:(\/.*)/;return 0===t.indexOf(n)&&(t=t.replace(n,"")),i.exec(t)?e:(r=i.exec(e))?r[1]:e}(this.$$path,o,e),this.$$compose()},this.$$compose=function(){var n=Q(this.$$search),r=this.$$hash?"#"+Y(this.$$hash):"";this.$$url=tt(this.$$path)+(n?"?"+n:"")+r,this.$$absUrl=e+(this.$$url?t+this.$$url:"")},this.$$parseLinkUrl=function(t,n){return ot(e)==ot(t)&&(this.$$parse(t),!0)}}function ct(e,t){this.$$html5=!0,lt.apply(this,arguments);var n=at(e);this.$$parseLinkUrl=function(r,i){var o,a;return e==ot(r)?o=r:(a=it(n,r))?o=e+t+a:n===r+"/"&&(o=n),o&&this.$$parse(o),!!o},this.$$compose=function(){var n=Q(this.$$search),r=this.$$hash?"#"+Y(this.$$hash):"";this.$$url=tt(this.$$path)+(n?"?"+n:"")+r,this.$$absUrl=e+t+this.$$url}}function ft(e){return function(){return this[e]}}function dt(e,t){return function(n){return g(n)?this[e]:(this[e]=t(n),this.$$compose(),this)}}function pt(){var t="",n=!1;this.hashPrefix=function(e){return $(e)?(t=e,this):t},this.html5Mode=function(e){return $(e)?(n=e,this):n},this.$get=["$rootScope","$browser","$sniffer","$rootElement",function(r,i,o,a){function s(e){r.$broadcast("$locationChangeSuccess",u.absUrl(),e)}var u,l,c,f=i.baseHref(),d=i.url();n?(c=st(d)+(f||"/"),l=o.history?ut:ct):(c=ot(d),l=lt),(u=new l(c,"#"+t)).$$parseLinkUrl(d,d);var p=/^\s*(javascript|mailto):/i;a.on("click",function(t){if(!t.ctrlKey&&!t.metaKey&&2!=t.which){for(var n=cn(t.target);"a"!==an(n[0].nodeName);)if(n[0]===a[0]||!(n=n.parent())[0])return;var o=n.prop("href"),s=n.attr("href")||n.attr("xlink:href");y(o)&&"[object SVGAnimatedString]"===o.toString()&&(o=Nt(o.animVal).href),p.test(o)||!o||n.attr("target")||t.isDefaultPrevented()||u.$$parseLinkUrl(o,s)&&(t.preventDefault(),u.absUrl()!=i.url()&&(r.$apply(),e.angular["ff-684208-preventDefault"]=!0))}}),u.absUrl()!=d&&i.url(u.absUrl(),!0),i.onUrlChange(function(e){u.absUrl()!=e&&(r.$evalAsync(function(){var t=u.absUrl();u.$$parse(e),r.$broadcast("$locationChangeStart",e,t).defaultPrevented?(u.$$parse(t),i.url(t)):s(t)}),r.$$phase||r.$digest())});var h=0;return r.$watch(function(){var e=i.url(),t=u.$$replace;return h&&e==u.absUrl()||(h++,r.$evalAsync(function(){r.$broadcast("$locationChangeStart",u.absUrl(),e).defaultPrevented?u.$$parse(e):(i.url(u.absUrl(),t),s(e))})),u.$$replace=!1,h}),u}]}function ht(){var e=!0,t=this;this.debugEnabled=function(t){return $(t)?(e=t,this):e},this.$get=["$window",function(n){function r(e){return e instanceof Error&&(e.stack?e=e.message&&-1===e.stack.indexOf(e.message)?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}function i(e){var t=n.console||{},i=t[e]||t.log||h,a=!1;try{a=!!i.apply}catch(e){}return a?function(){var e=[];return o(arguments,function(t){e.push(r(t))}),i.apply(t,e)}:function(e,t){i(e,null==t?"":t)}}return{log:i("log"),info:i("info"),warn:i("warn"),error:i("error"),debug:function(){var n=i("debug");return function(){e&&n.apply(t,arguments)}}()}}]}function mt(e,t){if("__defineGetter__"===e||"__defineSetter__"===e||"__lookupGetter__"===e||"__lookupSetter__"===e||"__proto__"===e)throw er("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",t);return e}function vt(e,t){if(e){if(e.constructor===e)throw er("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e.document&&e.location&&e.alert&&e.setInterval)throw er("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",t);if(e.children&&(e.nodeName||e.prop&&e.attr&&e.find))throw er("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",t);if(e===Object)throw er("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",t)}return e}function gt(e,t){if(e){if(e.constructor===e)throw er("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e===nr||e===rr||ir&&e===ir)throw er("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",t)}}function $t(e,t,r,i,o){vt(e,i),o=o||{};for(var a,s=t.split("."),u=0;s.length>1;u++){var l=vt(e[a=mt(s.shift(),i)],i);l||(l={},e[a]=l),(e=l).then&&o.unwrapPromises&&(Zn(i),"$$v"in e||function(e){e.then(function(t){e.$$v=t})}(e),e.$$v===n&&(e.$$v={}),e=e.$$v)}return a=mt(s.shift(),i),vt(e[a],i),e[a]=r,r}function yt(e){return"constructor"==e}function wt(e,t,r,i,o,a,s){mt(e,a),mt(t,a),mt(r,a),mt(i,a),mt(o,a);var u=function(e){return vt(e,a)},l=s.expensiveChecks,c=l||yt(e)?u:m,f=l||yt(t)?u:m,d=l||yt(r)?u:m,p=l||yt(i)?u:m,h=l||yt(o)?u:m;return s.unwrapPromises?function(s,u){var l,m=u&&u.hasOwnProperty(e)?u:s;return null==m?m:((m=c(m[e]))&&m.then&&(Zn(a),"$$v"in m||((l=m).$$v=n,l.then(function(e){l.$$v=c(e)})),m=c(m.$$v)),t?null==m?n:((m=f(m[t]))&&m.then&&(Zn(a),"$$v"in m||((l=m).$$v=n,l.then(function(e){l.$$v=f(e)})),m=f(m.$$v)),r?null==m?n:((m=d(m[r]))&&m.then&&(Zn(a),"$$v"in m||((l=m).$$v=n,l.then(function(e){l.$$v=d(e)})),m=d(m.$$v)),i?null==m?n:((m=p(m[i]))&&m.then&&(Zn(a),"$$v"in m||((l=m).$$v=n,l.then(function(e){l.$$v=p(e)})),m=p(m.$$v)),o?null==m?n:((m=h(m[o]))&&m.then&&(Zn(a),"$$v"in m||((l=m).$$v=n,l.then(function(e){l.$$v=h(e)})),m=h(m.$$v)),m):m):m):m):m)}:function(a,s){var u=s&&s.hasOwnProperty(e)?s:a;return null==u?u:(u=c(u[e]),t?null==u?n:(u=f(u[t]),r?null==u?n:(u=d(u[r]),i?null==u?n:(u=p(u[i]),o?null==u?n:u=h(u[o]):u):u):u):u)}}function bt(e,t){return function(n,r){return e(n,r,Zn,vt,t)}}function xt(e,t,r){var i=t.expensiveChecks,a=i?cr:lr;if(a.hasOwnProperty(e))return a[e];var s,u=e.split("."),l=u.length;if(t.csp)s=l<6?wt(u[0],u[1],u[2],u[3],u[4],r,t):function(e,i){var o,a=0;do{o=wt(u[a++],u[a++],u[a++],u[a++],u[a++],r,t)(e,i),i=n,e=o}while(a<l);return o};else{var c="var p;\n";i&&(c+="s = eso(s, fe);\nl = eso(l, fe);\n");var f=i;o(u,function(e,n){mt(e,r);var o=(n?"s":'((l&&l.hasOwnProperty("'+e+'"))?l:s)')+'["'+e+'"]',a=i||yt(e);a&&(o="eso("+o+", fe)",f=!0),c+="if(s == null) return undefined;\ns="+o+";\n",t.unwrapPromises&&(c+='if (s && s.then) {\n pw("'+r.replace(/(["\r\n])/g,"\\$1")+'");\n if (!("$$v" in s)) {\n p=s;\n p.$$v = undefined;\n p.then(function(v) {p.$$v='+(a?"eso(v)":"v")+";});\n}\n s="+(a?"eso(s.$$v)":"s.$$v")+"\n}\n")}),c+="return s;";var d=new Function("s","l","pw","eso","fe",c);d.toString=v(c),(f||t.unwrapPromises)&&(d=bt(d,r)),s=d}return"hasOwnProperty"!==e&&(a[e]=s),s}function Ct(){var e={},t={},n={csp:!1,unwrapPromises:!1,logPromiseWarnings:!0,expensiveChecks:!1};this.unwrapPromises=function(e){return $(e)?(n.unwrapPromises=!!e,this):n.unwrapPromises},this.logPromiseWarnings=function(e){return $(e)?(n.logPromiseWarnings=e,this):n.logPromiseWarnings},this.$get=["$filter","$sniffer","$log",function(r,i,o){n.csp=i.csp;var a={csp:n.csp,unwrapPromises:n.unwrapPromises,logPromiseWarnings:n.logPromiseWarnings,expensiveChecks:!0};return Zn=function(e){n.logPromiseWarnings&&!tr.hasOwnProperty(e)&&(tr[e]=!0,o.warn("[$parse] Promise found in the expression `"+e+"`. Automatic unwrapping of promises in Angular expressions is deprecated."))},function(i,o){var s;switch(typeof i){case"string":var u=o?t:e;if(u.hasOwnProperty(i))return u[i];var l=o?a:n,c=new sr(l);return s=new ur(c,r,l).parse(i),"hasOwnProperty"!==i&&(u[i]=s),s;case"function":return i;default:return h}}}]}function kt(){this.$get=["$rootScope","$exceptionHandler",function(e,t){return St(function(t){e.$evalAsync(t)},t)}]}function St(e,t){function r(e){return e}function i(e){return u(e)}var a=function(){var o,u,c=[];return u={resolve:function(t){if(c){var r=c;c=n,o=s(t),r.length&&e(function(){for(var e,t=0,n=r.length;t<n;t++)e=r[t],o.then(e[0],e[1],e[2])})}},reject:function(e){u.resolve(l(e))},notify:function(t){if(c){var n=c;c.length&&e(function(){for(var e=0,r=n.length;e<r;e++)n[e][2](t)})}},promise:{then:function(e,n,s){var u=a(),l=function(n){try{u.resolve((C(e)?e:r)(n))}catch(e){u.reject(e),t(e)}},f=function(e){try{u.resolve((C(n)?n:i)(e))}catch(e){u.reject(e),t(e)}},d=function(e){try{u.notify((C(s)?s:r)(e))}catch(e){t(e)}};return c?c.push([l,f,d]):o.then(l,f,d),u.promise},catch:function(e){return this.then(null,e)},finally:function(e){function t(e,t){var n=a();return t?n.resolve(e):n.reject(e),n.promise}function n(n,i){var o=null;try{o=(e||r)()}catch(e){return t(e,!1)}return P(o)?o.then(function(){return t(n,i)},function(e){return t(e,!1)}):t(n,i)}return this.then(function(e){return n(e,!0)},function(e){return n(e,!1)})}}}},s=function(t){return P(t)?t:{then:function(n){var r=a();return e(function(){r.resolve(n(t))}),r.promise}}},u=function(e){var t=a();return t.reject(e),t.promise},l=function(n){return{then:function(r,o){var s=a();return e(function(){try{s.resolve((C(o)?o:i)(n))}catch(e){s.reject(e),t(e)}}),s.promise}}};return{defer:a,reject:u,when:function(n,o,l,c){var f,d=a(),p=function(e){try{return(C(o)?o:r)(e)}catch(e){return t(e),u(e)}},h=function(e){try{return(C(l)?l:i)(e)}catch(e){return t(e),u(e)}},m=function(e){try{return(C(c)?c:r)(e)}catch(e){t(e)}};return e(function(){s(n).then(function(e){f||(f=!0,d.resolve(s(e).then(p,h,m)))},function(e){f||(f=!0,d.resolve(h(e)))},function(e){f||d.notify(m(e))})}),d.promise},all:function(e){var t=a(),n=0,r=wn(e)?[]:{};return o(e,function(e,i){n++,s(e).then(function(e){r.hasOwnProperty(i)||(r[i]=e,--n||t.resolve(r))},function(e){r.hasOwnProperty(i)||t.reject(e)})}),0===n&&t.resolve(r),t.promise}}}function Et(){this.$get=["$window","$timeout",function(e,t){var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame,r=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,i=!!n,o=i?function(e){var t=n(e);return function(){r(t)}}:function(e){var n=t(e,16.66,!1);return function(){t.cancel(n)}};return o.supported=i,o}]}function qt(){var e=10,t=r("$rootScope"),n=null;this.digestTtl=function(t){return arguments.length&&(e=t),e},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(r,a,s,u){function c(){this.$id=l(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.this=this.$root=this,this.$$destroyed=!1,this.$$asyncQueue=[],this.$$postDigestQueue=[],this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings={}}function f(e){if(g.$$phase)throw t("inprog","{0} already in progress",g.$$phase);g.$$phase=e}function d(){g.$$phase=null}function p(e,t){var n=s(e);return te(n,t),n}function m(e,t,n){do{e.$$listenerCount[n]-=t,0===e.$$listenerCount[n]&&delete e.$$listenerCount[n]}while(e=e.$parent)}function v(){}c.prototype={constructor:c,$new:function(e){var t;return e?((t=new c).$root=this.$root,t.$$asyncQueue=this.$$asyncQueue,t.$$postDigestQueue=this.$$postDigestQueue):(this.$$childScopeClass||(this.$$childScopeClass=function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$id=l(),this.$$childScopeClass=null},this.$$childScopeClass.prototype=this),t=new this.$$childScopeClass),t.this=t,t.$parent=this,t.$$prevSibling=this.$$childTail,this.$$childHead?(this.$$childTail.$$nextSibling=t,this.$$childTail=t):this.$$childHead=this.$$childTail=t,t},$watch:function(e,t,r){var i=this,o=p(e,"watch"),a=i.$$watchers,s={fn:t,last:v,get:o,exp:e,eq:!!r};if(n=null,!C(t)){var u=p(t||h,"listener");s.fn=function(e,t,n){u(n)}}if("string"==typeof e&&o.constant){var l=s.fn;s.fn=function(e,t,n){l.call(this,e,t,n),M(a,s)}}return a||(a=i.$$watchers=[]),a.unshift(s),function(){M(a,s),n=null}},$watchCollection:function(e,t){var n,r,o,a=this,u=t.length>1,l=0,c=s(e),f=[],d={},p=!0,h=0;return this.$watch(function(){var e,t;if(y(n=c(a)))if(i(n)){r!==f&&(h=(r=f).length=0,l++),e=n.length,h!==e&&(l++,r.length=h=e);for(var o=0;o<e;o++)r[o]!=r[o]&&n[o]!=n[o]||r[o]===n[o]||(l++,r[o]=n[o])}else{r!==d&&(r=d={},h=0,l++),e=0;for(t in n)n.hasOwnProperty(t)&&(e++,r.hasOwnProperty(t)?r[t]!=r[t]&&n[t]!=n[t]||r[t]===n[t]||(l++,r[t]=n[t]):(h++,r[t]=n[t],l++));if(h>e){l++;for(t in r)r.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(h--,delete r[t])}}else r!==n&&(r=n,l++);return l},function(){if(p?(p=!1,t(n,n,a)):t(n,o,a),u)if(y(n))if(i(n)){o=new Array(n.length);for(var e=0;e<n.length;e++)o[e]=n[e]}else{o={};for(var r in n)sn.call(n,r)&&(o[r]=n[r])}else o=n})},$digest:function(){var r,i,o,s,l,c,p,h,m,g,$,y=this.$$asyncQueue,w=this.$$postDigestQueue,b=e,x=this,k=[];f("$digest"),u.$$checkUrlChange(),n=null;do{for(c=!1,h=x;y.length;){try{($=y.shift()).scope.$eval($.expression)}catch(e){d(),a(e)}n=null}e:do{if(s=h.$$watchers)for(l=s.length;l--;)try{if(r=s[l])if((i=r.get(h))===(o=r.last)||(r.eq?R(i,o):"number"==typeof i&&"number"==typeof o&&isNaN(i)&&isNaN(o))){if(r===n){c=!1;break e}}else c=!0,n=r,r.last=r.eq?D(i,null):i,r.fn(i,o===v?i:o,h),b<5&&(k[m=4-b]||(k[m]=[]),g=C(r.exp)?"fn: "+(r.exp.name||r.exp.toString()):r.exp,g+="; newVal: "+V(i)+"; oldVal: "+V(o),k[m].push(g))}catch(e){d(),a(e)}if(!(p=h.$$childHead||h!==x&&h.$$nextSibling))for(;h!==x&&!(p=h.$$nextSibling);)h=h.$parent}while(h=p);if((c||y.length)&&!b--)throw d(),t("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",e,V(k))}while(c||y.length);for(d();w.length;)try{w.shift()()}catch(e){a(e)}},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this!==g&&(o(this.$$listenerCount,U(null,m,this)),e.$$childHead==this&&(e.$$childHead=this.$$nextSibling),e.$$childTail==this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=null,this.$$listeners={},this.$$watchers=this.$$asyncQueue=this.$$postDigestQueue=[],this.$destroy=this.$digest=this.$apply=h,this.$on=this.$watch=function(){return h})}},$eval:function(e,t){return s(e)(this,t)},$evalAsync:function(e){g.$$phase||g.$$asyncQueue.length||u.defer(function(){g.$$asyncQueue.length&&g.$digest()}),this.$$asyncQueue.push({scope:this,expression:e})},$$postDigest:function(e){this.$$postDigestQueue.push(e)},$apply:function(e){try{return f("$apply"),this.$eval(e)}catch(e){a(e)}finally{d();try{g.$digest()}catch(e){throw a(e),e}}},$on:function(e,t){var n=this.$$listeners[e];n||(this.$$listeners[e]=n=[]),n.push(t);var r=this;do{r.$$listenerCount[e]||(r.$$listenerCount[e]=0),r.$$listenerCount[e]++}while(r=r.$parent);var i=this;return function(){var r=O(n,t);-1!==r&&(n[r]=null,m(i,1,e))}},$emit:function(e,t){var n,r,i,o=[],s=this,u=!1,l={name:e,targetScope:s,stopPropagation:function(){u=!0},preventDefault:function(){l.defaultPrevented=!0},defaultPrevented:!1},c=I([l],arguments,1);do{for(n=s.$$listeners[e]||o,l.currentScope=s,r=0,i=n.length;r<i;r++)if(n[r])try{n[r].apply(null,c)}catch(e){a(e)}else n.splice(r,1),r--,i--;if(u)return l;s=s.$parent}while(s);return l},$broadcast:function(e,t){for(var n,r,i,o=this,s=o,u=o,l={name:e,targetScope:o,preventDefault:function(){l.defaultPrevented=!0},defaultPrevented:!1},c=I([l],arguments,1);s=u;){for(l.currentScope=s,r=0,i=(n=s.$$listeners[e]||[]).length;r<i;r++)if(n[r])try{n[r].apply(null,c)}catch(e){a(e)}else n.splice(r,1),r--,i--;if(!(u=s.$$listenerCount[e]&&s.$$childHead||s!==o&&s.$$nextSibling))for(;s!==o&&!(u=s.$$nextSibling);)s=s.$parent}return l}};var g=new c;return g}]}function _t(){var e=/^\s*(https?|ftp|mailto|tel|file):/,t=/^\s*((https?|ftp|file):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return $(t)?(e=t,this):e},this.imgSrcSanitizationWhitelist=function(e){return $(e)?(t=e,this):t},this.$get=function(){return function(n,r){var i,o=r?t:e;return ln&&!(ln>=8)||""===(i=Nt(n).href)||i.match(o)?n:"unsafe:"+i}}}function Pt(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}function At(e){if("self"===e)return e;if(w(e)){if(e.indexOf("***")>-1)throw fr("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=Pt(e).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+e+"$")}if(k(e))return new RegExp("^"+e.source+"$");throw fr("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function jt(e){var t=[];return $(e)&&o(e,function(e){t.push(At(e))}),t}function Tt(){this.SCE_CONTEXTS=dr;var e=["self"],t=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=jt(t)),e},this.resourceUrlBlacklist=function(e){return arguments.length&&(t=jt(e)),t},this.$get=["$injector",function(r){function i(e,t){return"self"===e?Rt(t):!!e.exec(t.href)}function o(n){var r,o,a=Nt(n.toString()),s=!1;for(r=0,o=e.length;r<o;r++)if(i(e[r],a)){s=!0;break}if(s)for(r=0,o=t.length;r<o;r++)if(i(t[r],a)){s=!1;break}return s}function a(e){var t=function(e){this.$$unwrapTrustedValue=function(){return e}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}var s=function(e){throw fr("unsafe","Attempting to use an unsafe value in a safe context.")};r.has("$sanitize")&&(s=r.get("$sanitize"));var u=a(),l={};return l[dr.HTML]=a(u),l[dr.CSS]=a(u),l[dr.URL]=a(u),l[dr.JS]=a(u),l[dr.RESOURCE_URL]=a(l[dr.URL]),{trustAs:function(e,t){var r=l.hasOwnProperty(e)?l[e]:null;if(!r)throw fr("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null===t||t===n||""===t)return t;if("string"!=typeof t)throw fr("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new r(t)},getTrusted:function(e,t){if(null===t||t===n||""===t)return t;var r=l.hasOwnProperty(e)?l[e]:null;if(r&&t instanceof r)return t.$$unwrapTrustedValue();if(e===dr.RESOURCE_URL){if(o(t))return t;throw fr("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString())}if(e===dr.HTML)return s(t);throw fr("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(e){return e instanceof u?e.$$unwrapTrustedValue():e}}}]}function Ot(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sniffer","$sceDelegate",function(t,n,r){if(e&&n.msie&&n.msieDocumentMode<8)throw fr("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 9 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var i=N(dr);i.isEnabled=function(){return e},i.trustAs=r.trustAs,i.getTrusted=r.getTrusted,i.valueOf=r.valueOf,e||(i.trustAs=i.getTrusted=function(e,t){return t},i.valueOf=m),i.parseAs=function(e,n){var r=t(n);return r.literal&&r.constant?r:function(t,n){return i.getTrusted(e,r(t,n))}};var a=i.parseAs,s=i.getTrusted,u=i.trustAs;return o(dr,function(e,t){var n=an(t);i[se("parse_as_"+n)]=function(t){return a(e,t)},i[se("get_trusted_"+n)]=function(t){return s(e,t)},i[se("trust_as_"+n)]=function(t){return u(e,t)}}),i}]}function Mt(){this.$get=["$window","$document",function(e,t){var n,r,i={},o=d((/android (\d+)/.exec(an((e.navigator||{}).userAgent))||[])[1]),a=/Boxee/i.test((e.navigator||{}).userAgent),s=t[0]||{},u=s.documentMode,l=/^(Moz|webkit|O|ms)(?=[A-Z])/,c=s.body&&s.body.style,f=!1,p=!1;if(c){for(var h in c)if(r=l.exec(h)){n=(n=r[0]).substr(0,1).toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in c&&"webkit"),f=!!("transition"in c||n+"Transition"in c),p=!!("animation"in c||n+"Animation"in c),!o||f&&p||(f=w(s.body.style.webkitTransition),p=w(s.body.style.webkitAnimation))}return{history:!(!e.history||!e.history.pushState||o<4||a),hashchange:"onhashchange"in e&&(!u||u>7),hasEvent:function(e){if("input"==e&&9==ln)return!1;if(g(i[e])){var t=s.createElement("div");i[e]="on"+e in t}return i[e]},csp:xn(),vendorPrefix:n,transitions:f,animations:p,android:o,msie:ln,msieDocumentMode:u}}]}function Dt(){this.$get=["$rootScope","$browser","$q","$exceptionHandler",function(e,t,n,r){function i(i,a,s){var u,l=n.defer(),c=l.promise,f=$(s)&&!s;return u=t.defer(function(){try{l.resolve(i())}catch(e){l.reject(e),r(e)}finally{delete o[c.$$timeoutId]}f||e.$apply()},a),c.$$timeoutId=u,o[u]=l,c}var o={};return i.cancel=function(e){return!!(e&&e.$$timeoutId in o)&&(o[e.$$timeoutId].reject("canceled"),delete o[e.$$timeoutId],t.defer.cancel(e.$$timeoutId))},i}]}function Nt(e,t){var n=e;return ln&&(pr.setAttribute("href",n),n=pr.href),pr.setAttribute("href",n),{href:pr.href,protocol:pr.protocol?pr.protocol.replace(/:$/,""):"",host:pr.host,search:pr.search?pr.search.replace(/^\?/,""):"",hash:pr.hash?pr.hash.replace(/^#/,""):"",hostname:pr.hostname,port:pr.port,pathname:"/"===pr.pathname.charAt(0)?pr.pathname:"/"+pr.pathname}}function Rt(e){var t=w(e)?Nt(e):e;return t.protocol===hr.protocol&&t.host===hr.host}function It(){this.$get=v(e)}function Ft(e){function t(r,i){if(y(r)){var a={};return o(r,function(e,n){a[n]=t(n,e)}),a}return e.factory(r+n,i)}var n="Filter";this.register=t,this.$get=["$injector",function(e){return function(t){return e.get(t+n)}}],t("currency",Lt),t("date",Wt),t("filter",Ut),t("json",Qt),t("limitTo",Yt),t("lowercase",yr),t("number",Vt),t("orderBy",Xt),t("uppercase",wr)}function Ut(){return function(e,t,n){if(!wn(e))return e;var r=typeof n,i=[];i.check=function(e){for(var t=0;t<i.length;t++)if(!i[t](e))return!1;return!0},"function"!==r&&(n="boolean"===r&&n?function(e,t){return $n.equals(e,t)}:function(e,t){if(e&&t&&"object"==typeof e&&"object"==typeof t){for(var r in e)if("$"!==r.charAt(0)&&sn.call(e,r)&&n(e[r],t[r]))return!0;return!1}return t=(""+t).toLowerCase(),(""+e).toLowerCase().indexOf(t)>-1});var o=function(e,t){if("string"==typeof t&&"!"===t.charAt(0))return!o(e,t.substr(1));switch(typeof e){case"boolean":case"number":case"string":return n(e,t);case"object":switch(typeof t){case"object":return n(e,t);default:for(var r in e)if("$"!==r.charAt(0)&&o(e[r],t))return!0}return!1;case"array":for(var i=0;i<e.length;i++)if(o(e[i],t))return!0;return!1;default:return!1}};switch(typeof t){case"boolean":case"number":case"string":t={$:t};case"object":for(var a in t)!function(e){void 0!==t[e]&&i.push(function(n){return o("$"==e?n:n&&n[e],t[e])})}(a);break;case"function":i.push(t);break;default:return e}for(var s=[],u=0;u<e.length;u++){var l=e[u];i.check(l)&&s.push(l)}return s}}function Lt(e){var t=e.NUMBER_FORMATS;return function(e,n){return g(n)&&(n=t.CURRENCY_SYM),Bt(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,2).replace(/\u00A4/g,n)}}function Vt(e){var t=e.NUMBER_FORMATS;return function(e,n){return Bt(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,n)}}function Bt(e,t,n,r,i){if(null==e||!isFinite(e)||y(e))return"";var o=e<0,a=(e=Math.abs(e))+"",s="",u=[],l=!1;if(-1!==a.indexOf("e")){var c=a.match(/([\d\.]+)e(-?)(\d+)/);c&&"-"==c[2]&&c[3]>i+1?(a="0",e=0):(s=a,l=!0)}if(l)i>0&&e>-1&&e<1&&(s=e.toFixed(i));else{var f=(a.split(mr)[1]||"").length;g(i)&&(i=Math.min(Math.max(t.minFrac,f),t.maxFrac)),0===(e=+(Math.round(+(e.toString()+"e"+i)).toString()+"e"+-i))&&(o=!1);var d=(""+e).split(mr),p=d[0];d=d[1]||"";var h,m=0,v=t.lgSize,$=t.gSize;if(p.length>=v+$)for(m=p.length-v,h=0;h<m;h++)(m-h)%$==0&&0!==h&&(s+=n),s+=p.charAt(h);for(h=m;h<p.length;h++)(p.length-h)%v==0&&0!==h&&(s+=n),s+=p.charAt(h);for(;d.length<i;)d+="0";i&&"0"!==i&&(s+=r+d.substr(0,i))}return u.push(o?t.negPre:t.posPre),u.push(s),u.push(o?t.negSuf:t.posSuf),u.join("")}function zt(e,t,n){var r="";for(e<0&&(r="-",e=-e),e=""+e;e.length<t;)e="0"+e;return n&&(e=e.substr(e.length-t)),r+e}function Ht(e,t,n,r){return n=n||0,function(i){var o=i["get"+e]();return(n>0||o>-n)&&(o+=n),0===o&&-12==n&&(o=12),zt(o,t,r)}}function Gt(e,t){return function(n,r){var i=n["get"+e]();return r[un(t?"SHORT"+e:e)][i]}}function Wt(e){function t(e){var t;if(t=e.match(n)){var r=new Date(0),i=0,o=0,a=t[8]?r.setUTCFullYear:r.setFullYear,s=t[8]?r.setUTCHours:r.setHours;t[9]&&(i=d(t[9]+t[10]),o=d(t[9]+t[11])),a.call(r,d(t[1]),d(t[2])-1,d(t[3]));var u=d(t[4]||0)-i,l=d(t[5]||0)-o,c=d(t[6]||0),f=Math.round(1e3*parseFloat("0."+(t[7]||0)));return s.call(r,u,l,c,f),r}return e}var n=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,r){var i,a,s="",u=[];if(r=r||"mediumDate",r=e.DATETIME_FORMATS[r]||r,w(n)&&(n=$r.test(n)?d(n):t(n)),b(n)&&(n=new Date(n)),!x(n))return n;for(;r;)(a=gr.exec(r))?r=(u=I(u,a,1)).pop():(u.push(r),r=null);return o(u,function(t){i=vr[t],s+=i?i(n,e.DATETIME_FORMATS):t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),s}}function Qt(){return function(e){return V(e,!0)}}function Yt(){return function(e,t){if(!wn(e)&&!w(e))return e;if(t=Math.abs(Number(t))===1/0?Number(t):d(t),w(e))return t?t>=0?e.slice(0,t):e.slice(t,e.length):"";var n,r,i=[];for(t>e.length?t=e.length:t<-e.length&&(t=-e.length),t>0?(n=0,r=t):(n=e.length+t,r=e.length);n<r;n++)i.push(e[n]);return i}}function Xt(e){return function(t,n,r){function o(e,t){return z(t)?function(t,n){return e(n,t)}:e}function a(e,t){var n=typeof e,r=typeof t;return n==r?(x(e)&&x(t)&&(e=e.valueOf(),t=t.valueOf()),"string"==n&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t?0:e<t?-1:1):n<r?-1:1}return i(t)?(0===(n=wn(n)?n:[n]).length&&(n=["+"]),n=j(n,function(t){var n=!1,r=t||m;if(w(t)){if("+"!=t.charAt(0)&&"-"!=t.charAt(0)||(n="-"==t.charAt(0),t=t.substring(1)),""===t)return o(function(e,t){return a(e,t)},n);if((r=e(t)).constant){var i=r();return o(function(e,t){return a(e[i],t[i])},n)}}return o(function(e,t){return a(r(e),r(t))},n)}),hn.call(t).sort(o(function(e,t){for(var r=0;r<n.length;r++){var i=n[r](e,t);if(0!==i)return i}return 0},r))):t}}function Jt(e){return C(e)&&(e={link:e}),e.restrict=e.restrict||"AC",v(e)}function Kt(e,t,n,r){function i(t,n){n=n?"-"+Z(n,"-"):"",r.setClass(e,(t?Or:Mr)+n,(t?Mr:Or)+n)}var a=this,s=e.parent().controller("form")||Cr,u=0,l=a.$error={},c=[];a.$name=t.name||t.ngForm,a.$dirty=!1,a.$pristine=!0,a.$valid=!0,a.$invalid=!1,s.$addControl(a),e.addClass(Dr),i(!0),a.$addControl=function(e){ne(e.$name,"input"),c.push(e),e.$name&&(a[e.$name]=e)},a.$removeControl=function(e){e.$name&&a[e.$name]===e&&delete a[e.$name],o(l,function(t,n){a.$setValidity(n,!0,e)}),M(c,e)},a.$setValidity=function(e,t,n){var r=l[e];if(t)r&&(M(r,n),r.length||(--u||(i(t),a.$valid=!0,a.$invalid=!1),l[e]=!1,i(!0,e),s.$setValidity(e,!0,a)));else{if(u||i(t),r){if(T(r,n))return}else l[e]=r=[],u++,i(!1,e),s.$setValidity(e,!1,a);r.push(n),a.$valid=!1,a.$invalid=!0}},a.$setDirty=function(){r.removeClass(e,Dr),r.addClass(e,Nr),a.$dirty=!0,a.$pristine=!1,s.$setDirty()},a.$setPristine=function(){r.removeClass(e,Nr),r.addClass(e,Dr),a.$dirty=!1,a.$pristine=!0,o(c,function(e){e.$setPristine()})}}function Zt(e,t,r,i){return e.$setValidity(t,r),r?i:n}function en(e,t){var n,r;if(t)for(n=0;n<t.length;++n)if(r=t[n],e[r])return!0;return!1}function tn(e,t,n,r,i){if(y(i)){e.$$hasNativeValidators=!0;e.$parsers.push(function(o){if(e.$error[t]||en(i,r)||!en(i,n))return o;e.$setValidity(t,!1)})}}function nn(e,t,n,i,o,a){var s=t.prop(on),u=t[0].placeholder,l={},c=an(t[0].type);if(i.$$validityState=s,!o.android){var f=!1;t.on("compositionstart",function(e){f=!0}),t.on("compositionend",function(){f=!1,p()})}var p=function(r){if(!f){var o=t.val();if(ln&&"input"===(r||l).type&&t[0].placeholder!==u)u=t[0].placeholder;else{"password"!==c&&z(n.ngTrim||"T")&&(o=bn(o));var a=s&&i.$$hasNativeValidators;(i.$viewValue!==o||""===o&&a)&&(e.$root.$$phase?i.$setViewValue(o):e.$apply(function(){i.$setViewValue(o)}))}}};if(o.hasEvent("input"))t.on("input",p);else{var h,m=function(){h||(h=a.defer(function(){p(),h=null}))};t.on("keydown",function(e){var t=e.keyCode;91===t||15<t&&t<19||37<=t&&t<=40||m()}),o.hasEvent("paste")&&t.on("paste cut",m)}t.on("change",p),i.$render=function(){t.val(i.$isEmpty(i.$viewValue)?"":i.$viewValue)};var v,g,$=n.ngPattern;if($){var y=function(e,t){return Zt(i,"pattern",i.$isEmpty(t)||e.test(t),t)};(g=$.match(/^\/(.*)\/([gim]*)$/))?($=new RegExp(g[1],g[2]),v=function(e){return y($,e)}):v=function(n){var i=e.$eval($);if(!i||!i.test)throw r("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",$,i,H(t));return y(i,n)},i.$formatters.push(v),i.$parsers.push(v)}if(n.ngMinlength){var w=d(n.ngMinlength),b=function(e){return Zt(i,"minlength",i.$isEmpty(e)||e.length>=w,e)};i.$parsers.push(b),i.$formatters.push(b)}if(n.ngMaxlength){var x=d(n.ngMaxlength),C=function(e){return Zt(i,"maxlength",i.$isEmpty(e)||e.length<=x,e)};i.$parsers.push(C),i.$formatters.push(C)}}function rn(e,t){return e="ngClass"+e,["$animate",function(n){function r(e,t){var n=[];e:for(var r=0;r<e.length;r++){for(var i=e[r],o=0;o<t.length;o++)if(i==t[o])continue e;n.push(i)}return n}function i(e){if(wn(e))return e;if(w(e))return e.split(" ");if(y(e)){var t=[];return o(e,function(e,n){e&&(t=t.concat(n.split(" ")))}),t}return e}return{restrict:"AC",link:function(a,s,u){function l(e){var t=f(e,1);u.$addClass(t)}function c(e){var t=f(e,-1);u.$removeClass(t)}function f(e,t){var n=s.data("$classCounts")||{},r=[];return o(e,function(e){(t>0||n[e])&&(n[e]=(n[e]||0)+t,n[e]===+(t>0)&&r.push(e))}),s.data("$classCounts",n),r.join(" ")}function d(e,t){var i=r(t,e),o=r(e,t);o=f(o,-1),0===(i=f(i,1)).length?n.removeClass(s,o):0===o.length?n.addClass(s,i):n.setClass(s,i,o)}function p(e){if(!0===t||a.$index%2===t){var n=i(e||[]);h?R(e,h)||d(i(h),n):l(n)}h=N(e)}var h;a.$watch(u[e],p,!0),u.$observe("class",function(t){p(a.$eval(u[e]))}),"ngClass"!==e&&a.$watch("$index",function(n,r){var o=1&n;if(o!==(1&r)){var s=i(a.$eval(u[e]));o===t?l(s):c(s)}})}}}]}var on="validity",an=function(e){return w(e)?e.toLowerCase():e},sn=Object.prototype.hasOwnProperty,un=function(e){return w(e)?e.toUpperCase():e};"i"!=="I".toLowerCase()&&(an=function(e){return w(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(32|e.charCodeAt(0))}):e},un=function(e){return w(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(-33&e.charCodeAt(0))}):e});var ln,cn,fn,dn,pn,hn=[].slice,mn=[].push,vn=Object.prototype.toString,gn=r("ng"),$n=e.angular||(e.angular={}),yn=["0","0","0"];ln=d((/msie (\d+)/.exec(an(navigator.userAgent))||[])[1]),isNaN(ln)&&(ln=d((/trident\/.*; rv:(\d+)/.exec(an(navigator.userAgent))||[])[1])),h.$inject=[],m.$inject=[];var wn=C(Array.isArray)?Array.isArray:function(e){return"[object Array]"===vn.call(e)},bn=String.prototype.trim?function(e){return w(e)?e.trim():e}:function(e){return w(e)?e.replace(/^\s\s*/,"").replace(/\s\s*$/,""):e};pn=ln<9?function(e){return(e=e.nodeName?e:e[0]).scopeName&&"HTML"!=e.scopeName?un(e.scopeName+":"+e.nodeName):e.nodeName}:function(e){return e.nodeName?e.nodeName:e[0].nodeName};var xn=function(){if($(xn.isActive_))return xn.isActive_;var e=!(!t.querySelector("[ng-csp]")&&!t.querySelector("[data-ng-csp]"));if(!e)try{new Function("")}catch(t){e=!0}return xn.isActive_=e},Cn=/[A-Z]/g,kn={full:"1.2.27",major:1,minor:2,dot:27,codeName:"prime-factorization"};de.expando="ng339";var Sn=de.cache={},En=1,qn=e.document.addEventListener?function(e,t,n){e.addEventListener(t,n,!1)}:function(e,t,n){e.attachEvent("on"+t,n)},_n=e.document.removeEventListener?function(e,t,n){e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent("on"+t,n)},Pn=(de._data=function(e){return this.cache[e[this.expando]]||{}},/([\:\-\_]+(.))/g),An=/^moz([A-Z])/,jn=r("jqLite"),Tn=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,On=/<|&#?\w+;/,Mn=/<([\w:]+)/,Dn=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Nn={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Nn.optgroup=Nn.option,Nn.tbody=Nn.tfoot=Nn.colgroup=Nn.caption=Nn.thead,Nn.th=Nn.td;var Rn=de.prototype={ready:function(n){function r(){i||(i=!0,n())}var i=!1;"complete"===t.readyState?setTimeout(r):(this.on("DOMContentLoaded",r),de(e).on("load",r))},toString:function(){var e=[];return o(this,function(t){e.push(""+t)}),"["+e.join(", ")+"]"},eq:function(e){return cn(e>=0?this[e]:this[this.length+e])},length:0,push:mn,sort:[].sort,splice:[].splice},In={};o("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){In[an(e)]=e});var Fn={};o("input,select,option,textarea,button,form,details".split(","),function(e){Fn[un(e)]=!0}),o({data:$e,removeData:ve},function(e,t){de[t]=e}),o({data:$e,inheritedData:ke,scope:function(e){return cn.data(e,"$scope")||ke(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return cn.data(e,"$isolateScope")||cn.data(e,"$isolateScopeNoTemplate")},controller:Ce,injector:function(e){return ke(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:ye,css:function(e,t,r){if(t=se(t),!$(r)){var i;return ln<=8&&""===(i=e.currentStyle&&e.currentStyle[t])&&(i="auto"),i=i||e.style[t],ln<=8&&(i=""===i?n:i),i}e.style[t]=r},attr:function(e,t,r){var i=an(t);if(In[i]){if(!$(r))return e[t]||(e.attributes.getNamedItem(t)||h).specified?i:n;r?(e[t]=!0,e.setAttribute(t,i)):(e[t]=!1,e.removeAttribute(i))}else if($(r))e.setAttribute(t,r);else if(e.getAttribute){var o=e.getAttribute(t,2);return null===o?n:o}},prop:function(e,t,n){if(!$(n))return e[t];e[t]=n},text:function(){function e(e,n){var r=t[e.nodeType];if(g(n))return r?e[r]:"";e[r]=n}var t=[];return ln<9?(t[1]="innerText",t[3]="nodeValue"):t[1]=t[3]="textContent",e.$dv="",e}(),val:function(e,t){if(g(t)){if("SELECT"===pn(e)&&e.multiple){var n=[];return o(e.options,function(e){e.selected&&n.push(e.value||e.text)}),0===n.length?null:n}return e.value}e.value=t},html:function(e,t){if(g(t))return e.innerHTML;for(var n=0,r=e.childNodes;n<r.length;n++)he(r[n]);e.innerHTML=t},empty:Se},function(e,t){de.prototype[t]=function(t,r){var i,o,a=this.length;if(e!==Se&&(2==e.length&&e!==ye&&e!==Ce?t:r)===n){if(y(t)){for(i=0;i<a;i++)if(e===$e)e(this[i],t);else for(o in t)e(this[i],o,t[o]);return this}for(var s=e.$dv,u=s===n?Math.min(a,1):a,l=0;l<u;l++){var c=e(this[l],t,r);s=s?s+c:c}return s}for(i=0;i<a;i++)e(this[i],t,r);return this}}),o({removeData:ve,dealoc:he,on:function e(n,r,i,a){if($(a))throw jn("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");var s=ge(n,"events"),u=ge(n,"handle");s||ge(n,"events",s={}),u||ge(n,"handle",u=qe(n,s)),o(r.split(" "),function(r){var o=s[r];if(!o){if("mouseenter"==r||"mouseleave"==r){var a=t.body.contains||t.body.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1};s[r]=[];e(n,{mouseleave:"mouseout",mouseenter:"mouseover"}[r],function(e){var t=this,n=e.relatedTarget;n&&(n===t||a(t,n))||u(e,r)})}else qn(n,r,u),s[r]=[];o=s[r]}o.push(i)})},off:me,one:function(e,t,n){(e=cn(e)).on(t,function r(){e.off(t,n),e.off(t,r)}),e.on(t,n)},replaceWith:function(e,t){var n,r=e.parentNode;he(e),o(new de(t),function(t){n?r.insertBefore(t,n.nextSibling):r.replaceChild(t,e),n=t})},children:function(e){var t=[];return o(e.childNodes,function(e){1===e.nodeType&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){o(new de(t),function(t){1!==e.nodeType&&11!==e.nodeType||e.appendChild(t)})},prepend:function(e,t){if(1===e.nodeType){var n=e.firstChild;o(new de(t),function(t){e.insertBefore(t,n)})}},wrap:function(e,t){t=cn(t)[0];var n=e.parentNode;n&&n.replaceChild(t,e),t.appendChild(e)},remove:function(e){he(e);var t=e.parentNode;t&&t.removeChild(e)},after:function(e,t){var n=e,r=e.parentNode;o(new de(t),function(e){r.insertBefore(e,n.nextSibling),n=e})},addClass:be,removeClass:we,toggleClass:function(e,t,n){t&&o(t.split(" "),function(t){var r=n;g(r)&&(r=!ye(e,t)),(r?be:we)(e,t)})},parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},next:function(e){if(e.nextElementSibling)return e.nextElementSibling;for(var t=e.nextSibling;null!=t&&1!==t.nodeType;)t=t.nextSibling;return t},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:pe,triggerHandler:function(e,t,n){var r,i,a,s=t.type||t,u=(ge(e,"events")||{})[s];u&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopPropagation:h,type:s,target:e},t.type&&(r=f(r,t)),i=N(u),a=n?[r].concat(n):[r],o(i,function(t){t.apply(e,a)}))}},function(e,t){de.prototype[t]=function(t,n,r){for(var i,o=0;o<this.length;o++)g(i)?$(i=e(this[o],t,n,r))&&(i=cn(i)):xe(i,e(this[o],t,n,r));return $(i)?i:this},de.prototype.bind=de.prototype.on,de.prototype.unbind=de.prototype.off}),Pe.prototype={put:function(e,t){this[_e(e,this.nextUid)]=t},get:function(e){return this[_e(e,this.nextUid)]},remove:function(e){var t=this[e=_e(e,this.nextUid)];return delete this[e],t}};var Un=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,Ln=/,/,Vn=/^\s*(_?)(\S+?)\1\s*$/,Bn=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,zn=r("$injector"),Hn=r("$animate"),Gn=["$provide",function(e){this.$$selectors={},this.register=function(t,n){var r=t+"-animation";if(t&&"."!=t.charAt(0))throw Hn("notcsel","Expecting class selector starting with '.' got '{0}'.",t);this.$$selectors[t.substr(1)]=r,e.factory(r,n)},this.classNameFilter=function(e){return 1===arguments.length&&(this.$$classNameFilter=e instanceof RegExp?e:null),this.$$classNameFilter},this.$get=["$timeout","$$asyncCallback",function(e,t){function n(e){e&&t(e)}return{enter:function(e,t,r,i){r?r.after(e):(t&&t[0]||(t=r.parent()),t.append(e)),n(i)},leave:function(e,t){e.remove(),n(t)},move:function(e,t,n,r){this.enter(e,t,n,r)},addClass:function(e,t,r){t=w(t)?t:wn(t)?t.join(" "):"",o(e,function(e){be(e,t)}),n(r)},removeClass:function(e,t,r){t=w(t)?t:wn(t)?t.join(" "):"",o(e,function(e){we(e,t)}),n(r)},setClass:function(e,t,r,i){o(e,function(e){be(e,t),we(e,r)}),n(i)},enabled:h}}]}],Wn=r("$compile");Ie.$inject=["$provide","$$sanitizeUriProvider"];var Qn=/^(x[\:\-_]|data[\:\-_])/i,Yn=r("$interpolate"),Xn=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,Jn={http:80,https:443,ftp:21},Kn=r("$location");ct.prototype=lt.prototype=ut.prototype={$$html5:!1,$$replace:!1,absUrl:ft("$$absUrl"),url:function(e){if(g(e))return this.$$url;var t=Xn.exec(e);return t[1]&&this.path(decodeURIComponent(t[1])),(t[2]||t[1])&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:ft("$$protocol"),host:ft("$$host"),port:ft("$$port"),path:dt("$$path",function(e){return"/"==(e=null!==e?e.toString():"").charAt(0)?e:"/"+e}),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(w(e)||b(e))e=e.toString(),this.$$search=W(e);else{if(!y(e))throw Kn("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");o(e,function(t,n){null==t&&delete e[n]}),this.$$search=e}break;default:g(t)||null===t?delete this.$$search[e]:this.$$search[e]=t}return this.$$compose(),this},hash:dt("$$hash",function(e){return null!==e?e.toString():""}),replace:function(){return this.$$replace=!0,this}};var Zn,er=r("$parse"),tr={},nr=Function.prototype.call,rr=Function.prototype.apply,ir=Function.prototype.bind,or={null:function(){return null},true:function(){return!0},false:function(){return!1},undefined:h,"+":function(e,t,r,i){return r=r(e,t),i=i(e,t),$(r)?$(i)?r+i:r:$(i)?i:n},"-":function(e,t,n,r){return n=n(e,t),r=r(e,t),($(n)?n:0)-($(r)?r:0)},"*":function(e,t,n,r){return n(e,t)*r(e,t)},"/":function(e,t,n,r){return n(e,t)/r(e,t)},"%":function(e,t,n,r){return n(e,t)%r(e,t)},"^":function(e,t,n,r){return n(e,t)^r(e,t)},"=":h,"===":function(e,t,n,r){return n(e,t)===r(e,t)},"!==":function(e,t,n,r){return n(e,t)!==r(e,t)},"==":function(e,t,n,r){return n(e,t)==r(e,t)},"!=":function(e,t,n,r){return n(e,t)!=r(e,t)},"<":function(e,t,n,r){return n(e,t)<r(e,t)},">":function(e,t,n,r){return n(e,t)>r(e,t)},"<=":function(e,t,n,r){return n(e,t)<=r(e,t)},">=":function(e,t,n,r){return n(e,t)>=r(e,t)},"&&":function(e,t,n,r){return n(e,t)&&r(e,t)},"||":function(e,t,n,r){return n(e,t)||r(e,t)},"&":function(e,t,n,r){return n(e,t)&r(e,t)},"|":function(e,t,n,r){return r(e,t)(e,t,n(e,t))},"!":function(e,t,n){return!n(e,t)}},ar={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},sr=function(e){this.options=e};sr.prototype={constructor:sr,lex:function(e){for(this.text=e,this.index=0,this.ch=n,this.lastCh=":",this.tokens=[];this.index<this.text.length;){if(this.ch=this.text.charAt(this.index),this.is("\"'"))this.readString(this.ch);else if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(this.ch))this.readIdent();else if(this.is("(){}[].,;:?"))this.tokens.push({index:this.index,text:this.ch}),this.index++;else{if(this.isWhitespace(this.ch)){this.index++;continue}var t=this.ch+this.peek(),r=t+this.peek(2),i=or[this.ch],o=or[t],a=or[r];a?(this.tokens.push({index:this.index,text:r,fn:a}),this.index+=3):o?(this.tokens.push({index:this.index,text:t,fn:o}),this.index+=2):i?(this.tokens.push({index:this.index,text:this.ch,fn:i}),this.index+=1):this.throwError("Unexpected next character ",this.index,this.index+1)}this.lastCh=this.ch}return this.tokens},is:function(e){return-1!==e.indexOf(this.ch)},was:function(e){return-1!==e.indexOf(this.lastCh)},peek:function(e){var t=e||1;return this.index+t<this.text.length&&this.text.charAt(this.index+t)},isNumber:function(e){return"0"<=e&&e<="9"},isWhitespace:function(e){return" "===e||"\r"===e||"\t"===e||"\n"===e||"\v"===e||""===e},isIdent:function(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"||"_"===e||"$"===e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var r=$(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw er("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,r,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=an(this.text.charAt(this.index));if("."==n||this.isNumber(n))e+=n;else{var r=this.peek();if("e"==n&&this.isExpOperator(r))e+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"==e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!=e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}e*=1,this.tokens.push({index:t,text:e,literal:!0,constant:!0,fn:function(){return e}})},readIdent:function(){for(var e,t,n,r,i=this,o="",a=this.index;this.index<this.text.length&&("."===(r=this.text.charAt(this.index))||this.isIdent(r)||this.isNumber(r));)"."===r&&(e=this.index),o+=r,this.index++;if(e)for(t=this.index;t<this.text.length;){if("("===(r=this.text.charAt(t))){n=o.substr(e-a+1),o=o.substr(0,e-a),this.index=t;break}if(!this.isWhitespace(r))break;t++}var s={index:a,text:o};if(or.hasOwnProperty(o))s.fn=or[o],s.literal=!0,s.constant=!0;else{var u=xt(o,this.options,this.text);s.fn=f(function(e,t){return u(e,t)},{assign:function(e,t){return $t(e,o,t,i.text,i.options)}})}this.tokens.push(s),n&&(this.tokens.push({index:e,text:"."}),this.tokens.push({index:e+1,text:n}))},readString:function(e){var t=this.index;this.index++;for(var n="",r=e,i=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(r+=o,i){if("u"===o){var a=this.text.substring(this.index+1,this.index+5);a.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+a+"]"),this.index+=4,n+=String.fromCharCode(parseInt(a,16))}else n+=ar[o]||o;i=!1}else if("\\"===o)i=!0;else{if(o===e)return this.index++,void this.tokens.push({index:t,text:r,string:n,literal:!0,constant:!0,fn:function(){return n}});n+=o}this.index++}this.throwError("Unterminated quote",t)}};var ur=function(e,t,n){this.lexer=e,this.$filter=t,this.options=n};ur.ZERO=f(function(){return 0},{constant:!0}),ur.prototype={constructor:ur,parse:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t.literal=!!t.literal,t.constant=!!t.constant,t},primary:function(){var e;if(this.expect("("))e=this.filterChain(),this.consume(")");else if(this.expect("["))e=this.arrayDeclaration();else if(this.expect("{"))e=this.object();else{var t=this.expect();(e=t.fn)||this.throwError("not a primary expression",t),e.literal=!!t.literal,e.constant=!!t.constant}for(var n,r;n=this.expect("(","[",".");)"("===n.text?(e=this.functionCall(e,r),r=null):"["===n.text?(r=e,e=this.objectIndex(e)):"."===n.text?(r=e,e=this.fieldAccess(e)):this.throwError("IMPOSSIBLE");return e},throwError:function(e,t){throw er("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},peekToken:function(){if(0===this.tokens.length)throw er("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,r){if(this.tokens.length>0){var i=this.tokens[0],o=i.text;if(o===e||o===t||o===n||o===r||!e&&!t&&!n&&!r)return i}return!1},expect:function(e,t,n,r){var i=this.peek(e,t,n,r);return!!i&&(this.tokens.shift(),i)},consume:function(e){this.expect(e)||this.throwError("is unexpected, expecting ["+e+"]",this.peek())},unaryFn:function(e,t){return f(function(n,r){return e(n,r,t)},{constant:t.constant})},ternaryFn:function(e,t,n){return f(function(r,i){return e(r,i)?t(r,i):n(r,i)},{constant:e.constant&&t.constant&&n.constant})},binaryFn:function(e,t,n){return f(function(r,i){return t(r,i,e,n)},{constant:e.constant&&n.constant})},statements:function(){for(var e=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&e.push(this.filterChain()),!this.expect(";"))return 1===e.length?e[0]:function(t,n){for(var r,i=0;i<e.length;i++){var o=e[i];o&&(r=o(t,n))}return r}},filterChain:function(){for(var e,t=this.expression();;){if(!(e=this.expect("|")))return t;t=this.binaryFn(t,e.fn,this.filter())}},filter:function(){for(var e=this.expect(),t=this.$filter(e.text),n=[];;){if(!(e=this.expect(":"))){var r=function(e,r,i){for(var o=[i],a=0;a<n.length;a++)o.push(n[a](e,r));return t.apply(e,o)};return function(){return r}}n.push(this.expression())}},expression:function(){return this.assignment()},assignment:function(){var e,t,n=this.ternary();return(t=this.expect("="))?(n.assign||this.throwError("implies assignment but ["+this.text.substring(0,t.index)+"] can not be assigned to",t),e=this.ternary(),function(t,r){return n.assign(t,e(t,r),r)}):n},ternary:function(){var e,t,n=this.logicalOR();return(t=this.expect("?"))?(e=this.assignment(),(t=this.expect(":"))?this.ternaryFn(n,e,this.assignment()):void this.throwError("expected :",t)):n},logicalOR:function(){for(var e,t=this.logicalAND();;){if(!(e=this.expect("||")))return t;t=this.binaryFn(t,e.fn,this.logicalAND())}},logicalAND:function(){var e,t=this.equality();return(e=this.expect("&&"))&&(t=this.binaryFn(t,e.fn,this.logicalAND())),t},equality:function(){var e,t=this.relational();return(e=this.expect("==","!=","===","!=="))&&(t=this.binaryFn(t,e.fn,this.equality())),t},relational:function(){var e,t=this.additive();return(e=this.expect("<",">","<=",">="))&&(t=this.binaryFn(t,e.fn,this.relational())),t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t=this.binaryFn(t,e.fn,this.multiplicative());return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t=this.binaryFn(t,e.fn,this.unary());return t},unary:function(){var e;return this.expect("+")?this.primary():(e=this.expect("-"))?this.binaryFn(ur.ZERO,e.fn,this.unary()):(e=this.expect("!"))?this.unaryFn(e.fn,this.unary()):this.primary()},fieldAccess:function(e){var t=this,n=this.expect().text,r=xt(n,this.options,this.text);return f(function(t,n,i){return r(i||e(t,n))},{assign:function(r,i,o){var a=e(r,o);return a||e.assign(r,a={}),$t(a,n,i,t.text,t.options)}})},objectIndex:function(e){var t=this,r=this.expression();return this.consume("]"),f(function(i,o){var a,s,u=e(i,o),l=r(i,o);return mt(l,t.text),u?((a=vt(u[l],t.text))&&a.then&&t.options.unwrapPromises&&(s=a,"$$v"in a||(s.$$v=n,s.then(function(e){s.$$v=e})),a=a.$$v),a):n},{assign:function(n,i,o){var a=mt(r(n,o),t.text),s=vt(e(n,o),t.text);return s||e.assign(n,s={}),s[a]=i}})},functionCall:function(e,t){var n=[];if(")"!==this.peekToken().text)do{n.push(this.expression())}while(this.expect(","));this.consume(")");var r=this;return function(i,o){for(var a=[],s=t?t(i,o):i,u=0;u<n.length;u++)a.push(vt(n[u](i,o),r.text));var l=e(i,o,s)||h;return vt(s,r.text),gt(l,r.text),vt(l.apply?l.apply(s,a):l(a[0],a[1],a[2],a[3],a[4]),r.text)}},arrayDeclaration:function(){var e=[],t=!0;if("]"!==this.peekToken().text)do{if(this.peek("]"))break;var n=this.expression();e.push(n),n.constant||(t=!1)}while(this.expect(","));return this.consume("]"),f(function(t,n){for(var r=[],i=0;i<e.length;i++)r.push(e[i](t,n));return r},{literal:!0,constant:t})},object:function(){var e=[],t=!0;if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var n=this.expect(),r=n.string||n.text;this.consume(":");var i=this.expression();e.push({key:r,value:i}),i.constant||(t=!1)}while(this.expect(","));return this.consume("}"),f(function(t,n){for(var r={},i=0;i<e.length;i++){var o=e[i];r[o.key]=o.value(t,n)}return r},{literal:!0,constant:t})}};var lr={},cr={},fr=r("$sce"),dr={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},pr=t.createElement("a"),hr=Nt(e.location.href,!0);Ft.$inject=["$provide"],Lt.$inject=["$locale"],Vt.$inject=["$locale"];var mr=".",vr={yyyy:Ht("FullYear",4),yy:Ht("FullYear",2,0,!0),y:Ht("FullYear",1),MMMM:Gt("Month"),MMM:Gt("Month",!0),MM:Ht("Month",2,1),M:Ht("Month",1,1),dd:Ht("Date",2),d:Ht("Date",1),HH:Ht("Hours",2),H:Ht("Hours",1),hh:Ht("Hours",2,-12),h:Ht("Hours",1,-12),mm:Ht("Minutes",2),m:Ht("Minutes",1),ss:Ht("Seconds",2),s:Ht("Seconds",1),sss:Ht("Milliseconds",3),EEEE:Gt("Day"),EEE:Gt("Day",!0),a:function(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]},Z:function(e){var t=-1*e.getTimezoneOffset(),n=t>=0?"+":"";return n+=zt(Math[t>0?"floor":"ceil"](t/60),2)+zt(Math.abs(t%60),2)}},gr=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,$r=/^\-?\d+$/;Wt.$inject=["$locale"];var yr=v(an),wr=v(un);Xt.$inject=["$parse"];var br=v({restrict:"E",compile:function(e,n){if(ln<=8&&(n.href||n.name||n.$set("href",""),e.append(t.createComment("IE fix"))),!n.href&&!n.xlinkHref&&!n.name)return function(e,t){var n="[object SVGAnimatedString]"===vn.call(t.prop("href"))?"xlink:href":"href";t.on("click",function(e){t.attr(n)||e.preventDefault()})}}}),xr={};o(In,function(e,t){if("multiple"!=e){var n=Fe("ng-"+t);xr[n]=function(){return{priority:100,link:function(e,r,i){e.$watch(i[n],function(e){i.$set(t,!!e)})}}}}}),o(["src","srcset","href"],function(e){var t=Fe("ng-"+e);xr[t]=function(){return{priority:99,link:function(n,r,i){var o=e,a=e;"href"===e&&"[object SVGAnimatedString]"===vn.call(r.prop("href"))&&(a="xlinkHref",i.$attr[a]="xlink:href",o=null),i.$observe(t,function(t){t?(i.$set(a,t),ln&&o&&r.prop(o,i[a])):"href"===e&&i.$set(a,null)})}}}});var Cr={$addControl:h,$removeControl:h,$setValidity:h,$setDirty:h,$setPristine:h};Kt.$inject=["$element","$attrs","$scope","$animate"];var kr=function(e){return["$timeout",function(t){return{name:"form",restrict:e?"EAC":"E",controller:Kt,compile:function(){return{pre:function(e,r,i,o){if(!i.action){var a=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1};qn(r[0],"submit",a),r.on("$destroy",function(){t(function(){_n(r[0],"submit",a)},0,!1)})}var s=r.parent().controller("form"),u=i.name||i.ngForm;u&&$t(e,u,o,u),s&&r.on("$destroy",function(){s.$removeControl(o),u&&$t(e,u,n,u),f(o,Cr)})}}}}}]},Sr=kr(),Er=kr(!0),qr=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,_r=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,Pr=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,Ar={text:nn,number:function(e,t,r,i,o,a){if(nn(e,t,r,i,o,a),i.$parsers.push(function(e){var t=i.$isEmpty(e);return t||Pr.test(e)?(i.$setValidity("number",!0),""===e?null:t?e:parseFloat(e)):(i.$setValidity("number",!1),n)}),tn(i,"number",jr,null,i.$$validityState),i.$formatters.push(function(e){return i.$isEmpty(e)?"":""+e}),r.min){var s=function(e){var t=parseFloat(r.min);return Zt(i,"min",i.$isEmpty(e)||e>=t,e)};i.$parsers.push(s),i.$formatters.push(s)}if(r.max){var u=function(e){var t=parseFloat(r.max);return Zt(i,"max",i.$isEmpty(e)||e<=t,e)};i.$parsers.push(u),i.$formatters.push(u)}i.$formatters.push(function(e){return Zt(i,"number",i.$isEmpty(e)||b(e),e)})},url:function(e,t,n,r,i,o){nn(e,t,n,r,i,o);var a=function(e){return Zt(r,"url",r.$isEmpty(e)||qr.test(e),e)};r.$formatters.push(a),r.$parsers.push(a)},email:function(e,t,n,r,i,o){nn(e,t,n,r,i,o);var a=function(e){return Zt(r,"email",r.$isEmpty(e)||_r.test(e),e)};r.$formatters.push(a),r.$parsers.push(a)},radio:function(e,t,n,r){g(n.name)&&t.attr("name",l()),t.on("click",function(){t[0].checked&&e.$apply(function(){r.$setViewValue(n.value)})}),r.$render=function(){var e=n.value;t[0].checked=e==r.$viewValue},n.$observe("value",r.$render)},checkbox:function(e,t,n,r){var i=n.ngTrueValue,o=n.ngFalseValue;w(i)||(i=!0),w(o)||(o=!1),t.on("click",function(){e.$apply(function(){r.$setViewValue(t[0].checked)})}),r.$render=function(){t[0].checked=r.$viewValue},r.$isEmpty=function(e){return e!==i},r.$formatters.push(function(e){return e===i}),r.$parsers.push(function(e){return e?i:o})},hidden:h,button:h,submit:h,reset:h,file:h},jr=["badInput"],Tr=["$browser","$sniffer",function(e,t){return{restrict:"E",require:"?ngModel",link:function(n,r,i,o){o&&(Ar[an(i.type)]||Ar.text)(n,r,i,o,t,e)}}}],Or="ng-valid",Mr="ng-invalid",Dr="ng-pristine",Nr="ng-dirty",Rr=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate",function(e,t,n,i,a,s){function u(e,t){t=t?"-"+Z(t,"-"):"",s.removeClass(i,(e?Mr:Or)+t),s.addClass(i,(e?Or:Mr)+t)}this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$name=n.name;var l=a(n.ngModel),c=l.assign;if(!c)throw r("ngModel")("nonassign","Expression '{0}' is non-assignable. Element: {1}",n.ngModel,H(i));this.$render=h,this.$isEmpty=function(e){return g(e)||""===e||null===e||e!=e};var f=i.inheritedData("$formController")||Cr,d=0,p=this.$error={};i.addClass(Dr),u(!0),this.$setValidity=function(e,t){p[e]!==!t&&(t?(p[e]&&d--,d||(u(!0),this.$valid=!0,this.$invalid=!1)):(u(!1),this.$invalid=!0,this.$valid=!1,d++),p[e]=!t,u(t,e),f.$setValidity(e,t,this))},this.$setPristine=function(){this.$dirty=!1,this.$pristine=!0,s.removeClass(i,Nr),s.addClass(i,Dr)},this.$setViewValue=function(n){this.$viewValue=n,this.$pristine&&(this.$dirty=!0,this.$pristine=!1,s.removeClass(i,Dr),s.addClass(i,Nr),f.$setDirty()),o(this.$parsers,function(e){n=e(n)}),this.$modelValue!==n&&(this.$modelValue=n,c(e,n),o(this.$viewChangeListeners,function(e){try{e()}catch(e){t(e)}}))};var m=this;e.$watch(function(){var t=l(e);if(m.$modelValue!==t){var n=m.$formatters,r=n.length;for(m.$modelValue=t;r--;)t=n[r](t);m.$viewValue!==t&&(m.$viewValue=t,m.$render())}return t})}],Ir=function(){return{require:["ngModel","^?form"],controller:Rr,link:function(e,t,n,r){var i=r[0],o=r[1]||Cr;o.$addControl(i),e.$on("$destroy",function(){o.$removeControl(i)})}}},Fr=v({require:"ngModel",link:function(e,t,n,r){r.$viewChangeListeners.push(function(){e.$eval(n.ngChange)})}}),Ur=function(){return{require:"?ngModel",link:function(e,t,n,r){if(r){n.required=!0;var i=function(e){return n.required&&r.$isEmpty(e)?void r.$setValidity("required",!1):(r.$setValidity("required",!0),e)};r.$formatters.push(i),r.$parsers.unshift(i),n.$observe("required",function(){i(r.$viewValue)})}}}},Lr=function(){return{require:"ngModel",link:function(e,t,r,i){var a=/\/(.*)\//.exec(r.ngList),s=a&&new RegExp(a[1])||r.ngList||",";i.$parsers.push(function(e){if(!g(e)){var t=[];return e&&o(e.split(s),function(e){e&&t.push(bn(e))}),t}}),i.$formatters.push(function(e){return wn(e)?e.join(", "):n}),i.$isEmpty=function(e){return!e||!e.length}}}},Vr=/^(true|false|\d+)$/,Br=function(){return{priority:100,compile:function(e,t){return Vr.test(t.ngValue)?function(e,t,n){n.$set("value",e.$eval(n.ngValue))}:function(e,t,n){e.$watch(n.ngValue,function(e){n.$set("value",e)})}}}},zr=Jt({compile:function(e){return e.addClass("ng-binding"),function(e,t,r){t.data("$binding",r.ngBind),e.$watch(r.ngBind,function(e){t.text(e==n?"":e)})}}}),Hr=["$interpolate",function(e){return function(t,n,r){var i=e(n.attr(r.$attr.ngBindTemplate));n.addClass("ng-binding").data("$binding",i),r.$observe("ngBindTemplate",function(e){n.text(e)})}}],Gr=["$sce","$parse",function(e,t){return{compile:function(n){return n.addClass("ng-binding"),function(n,r,i){r.data("$binding",i.ngBindHtml);var o=t(i.ngBindHtml);n.$watch(function(){return(o(n)||"").toString()},function(t){r.html(e.getTrustedHtml(o(n))||"")})}}}}],Wr=rn("",!0),Qr=rn("Odd",0),Yr=rn("Even",1),Xr=Jt({compile:function(e,t){t.$set("ngCloak",n),e.removeClass("ng-cloak")}}),Jr=[function(){return{scope:!0,controller:"@",priority:500}}],Kr={},Zr={blur:!0,focus:!0};o("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(e){var t=Fe("ng-"+e);Kr[t]=["$parse","$rootScope",function(n,r){return{compile:function(i,o){var a=n(o[t],!0);return function(t,n){n.on(e,function(n){var i=function(){a(t,{$event:n})};Zr[e]&&r.$$phase?t.$evalAsync(i):t.$apply(i)})}}}}]});var ei=["$animate",function(e){return{transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,i,o,a){var s,u,l;n.$watch(i.ngIf,function(o){z(o)?u||(u=n.$new(),a(u,function(n){n[n.length++]=t.createComment(" end ngIf: "+i.ngIf+" "),s={clone:n},e.enter(n,r.parent(),r)})):(l&&(l.remove(),l=null),u&&(u.$destroy(),u=null),s&&(l=ie(s.clone),e.leave(l,function(){l=null}),s=null))})}}}],ti=["$http","$templateCache","$anchorScroll","$animate","$sce",function(e,t,n,r,i){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:$n.noop,compile:function(o,a){var s=a.ngInclude||a.src,u=a.onload||"",l=a.autoscroll;return function(o,a,c,f,d){var p,h,m,v=0,g=function(){h&&(h.remove(),h=null),p&&(p.$destroy(),p=null),m&&(r.leave(m,function(){h=null}),h=m,m=null)};o.$watch(i.parseAsResourceUrl(s),function(i){var s=function(){!$(l)||l&&!o.$eval(l)||n()},c=++v;i?(e.get(i,{cache:t}).success(function(e){if(c===v){var t=o.$new();f.template=e;var n=d(t,function(e){g(),r.enter(e,null,a,s)});m=n,(p=t).$emit("$includeContentLoaded"),o.$eval(u)}}).error(function(){c===v&&g()}),o.$emit("$includeContentRequested")):(g(),f.template=null)})}}}}],ni=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(t,n,r,i){n.html(i.template),e(n.contents())(t)}}}],ri=Jt({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),ii=Jt({terminal:!0,priority:1e3}),oi=["$locale","$interpolate",function(e,t){var n=/{}/g;return{restrict:"EA",link:function(r,i,a){var s=a.count,u=a.$attr.when&&i.attr(a.$attr.when),l=a.offset||0,c=r.$eval(u)||{},f={},d=t.startSymbol(),p=t.endSymbol(),h=/^when(Minus)?(.+)$/;o(a,function(e,t){h.test(t)&&(c[an(t.replace("when","").replace("Minus","-"))]=i.attr(a.$attr[t]))}),o(c,function(e,r){f[r]=t(e.replace(n,d+s+"-"+l+p))}),r.$watch(function(){var t=parseFloat(r.$eval(s));return isNaN(t)?"":(t in c||(t=e.pluralCat(t-l)),f[t](r,i,!0))},function(e){i.text(e)})}}}],ai=["$parse","$animate",function(e,n){function a(e){return e.clone[0]}function s(e){return e.clone[e.clone.length-1]}var u=r("ngRepeat");return{transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,link:function(r,l,c,f,d){var p,h,m,v,g,$,y,w,b,x=c.ngRepeat,C=x.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),k={$id:_e};if(!C)throw u("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",x);if($=C[1],y=C[2],(p=C[3])?(h=e(p),m=function(e,t,n){return b&&(k[b]=e),k[w]=t,k.$index=n,h(r,k)}):(v=function(e,t){return _e(t)},g=function(e){return e}),!(C=$.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/)))throw u("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",$);w=C[3]||C[1],b=C[2];var S={};r.$watchCollection(y,function(e){var c,f,p,h,$,y,C,k,E,q,_,P,A=l[0],j={},T=[];if(i(e))q=e,E=m||v;else{E=m||g,q=[];for(y in e)e.hasOwnProperty(y)&&"$"!=y.charAt(0)&&q.push(y);q.sort()}for(h=q.length,f=T.length=q.length,c=0;c<f;c++)if(y=e===q?c:q[c],C=e[y],k=E(y,C,c),ne(k,"`track by` id"),S.hasOwnProperty(k))_=S[k],delete S[k],j[k]=_,T[c]=_;else{if(j.hasOwnProperty(k))throw o(T,function(e){e&&e.scope&&(S[e.id]=e)}),u("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",x,k,V(C));T[c]={id:k},j[k]=!1}for(y in S)S.hasOwnProperty(y)&&(P=ie((_=S[y]).clone),n.leave(P),o(P,function(e){e.$$NG_REMOVED=!0}),_.scope.$destroy());for(c=0,f=q.length;c<f;c++){if(y=e===q?c:q[c],C=e[y],_=T[c],T[c-1]&&(A=s(T[c-1])),_.scope){$=_.scope,p=A;do{p=p.nextSibling}while(p&&p.$$NG_REMOVED);a(_)!=p&&n.move(ie(_.clone),null,cn(A)),A=s(_)}else $=r.$new();$[w]=C,b&&($[b]=y),$.$index=c,$.$first=0===c,$.$last=c===h-1,$.$middle=!($.$first||$.$last),$.$odd=!($.$even=0==(1&c)),_.scope||d($,function(e){e[e.length++]=t.createComment(" end ngRepeat: "+x+" "),n.enter(e,null,cn(A)),A=e,_.scope=$,_.clone=e,j[_.id]=_})}S=j})}}}],si=["$animate",function(e){return function(t,n,r){t.$watch(r.ngShow,function(t){e[z(t)?"removeClass":"addClass"](n,"ng-hide")})}}],ui=["$animate",function(e){return function(t,n,r){t.$watch(r.ngHide,function(t){e[z(t)?"addClass":"removeClass"](n,"ng-hide")})}}],li=Jt(function(e,t,n){e.$watch(n.ngStyle,function(e,n){n&&e!==n&&o(n,function(e,n){t.css(n,"")}),e&&t.css(e)},!0)}),ci=["$animate",function(e){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(t,n,r,i){var a=r.ngSwitch||r.on,s=[],u=[],l=[],c=[];t.$watch(a,function(n){var a,f;for(a=0,f=l.length;a<f;++a)l[a].remove();for(l.length=0,a=0,f=c.length;a<f;++a){var d=u[a];c[a].$destroy(),l[a]=d,e.leave(d,function(){l.splice(a,1)})}u.length=0,c.length=0,(s=i.cases["!"+n]||i.cases["?"])&&(t.$eval(r.change),o(s,function(n){var r=t.$new();c.push(r),n.transclude(r,function(t){var r=n.element;u.push(t),e.enter(t,r.parent(),r)})}))})}}}],fi=Jt({transclude:"element",priority:800,require:"^ngSwitch",link:function(e,t,n,r,i){r.cases["!"+n.ngSwitchWhen]=r.cases["!"+n.ngSwitchWhen]||[],r.cases["!"+n.ngSwitchWhen].push({transclude:i,element:t})}}),di=Jt({transclude:"element",priority:800,require:"^ngSwitch",link:function(e,t,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:t})}}),pi=Jt({link:function(e,t,n,i,o){if(!o)throw r("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",H(t));o(function(e){t.empty(),t.append(e)})}}),hi=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,n){if("text/ng-template"==n.type){var r=n.id,i=t[0].text;e.put(r,i)}}}}],mi=r("ngOptions"),vi=v({terminal:!0}),gi=["$compile","$parse",function(e,r){var i=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,s={$setViewValue:h};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(e,t,n){var r,i=this,o={},a=s;i.databound=n.ngModel,i.init=function(e,t,n){a=e,r=n},i.addOption=function(t){ne(t,'"option value"'),o[t]=!0,a.$viewValue==t&&(e.val(t),r.parent()&&r.remove())},i.removeOption=function(e){this.hasOption(e)&&(delete o[e],a.$viewValue==e&&this.renderUnknownOption(e))},i.renderUnknownOption=function(t){var n="? "+_e(t)+" ?";r.val(n),e.prepend(r),e.val(n),r.prop("selected",!0)},i.hasOption=function(e){return o.hasOwnProperty(e)},t.$on("$destroy",function(){i.renderUnknownOption=h})}],link:function(s,u,l,c){if(c[1]){for(var f,d=c[0],p=c[1],h=l.multiple,m=l.ngOptions,v=!1,y=cn(t.createElement("option")),w=cn(t.createElement("optgroup")),b=y.clone(),x=0,C=u.children(),k=C.length;x<k;x++)if(""===C[x].value){f=v=C.eq(x);break}d.init(p,v,b),h&&(p.$isEmpty=function(e){return!e||0===e.length}),m?function(t,o,s){function u(){var e=!1;if(h){var n=s.$modelValue;if(k&&wn(n)){e=new Pe([]);for(var r={},i=0;i<n.length;i++)r[p]=n[i],e.put(k(t,r),n[i])}else e=new Pe(n)}return e}function l(){var e,n,r,i,l,c,m,E,q,_,P,A,j,T,O,M={"":[]},D=[""],N=s.$modelValue,R=C(t)||[],I=g?a(R):R,F={},U=u();for(P=0;q=I.length,P<q;P++){if(m=P,g){if("$"===(m=I[P]).charAt(0))continue;F[g]=m}if(F[p]=R[m],e=b(t,F)||"",(n=M[e])||(n=M[e]=[],D.push(e)),h)A=$(U.remove(k?k(t,F):x(t,F)));else{if(k){var L={};L[p]=N,A=k(t,L)===k(t,F)}else A=N===x(t,F);U=U||A}O=$(O=f(t,F))?O:"",n.push({id:k?k(t,F):g?I[P]:P,label:O,selected:A})}for(h||(v||null===N?M[""].unshift({id:"",label:"",selected:!U}):U||M[""].unshift({id:"?",label:"",selected:!0})),_=0,E=D.length;_<E;_++){for(n=M[e=D[_]],S.length<=_?(l=[i={element:w.clone().attr("label",e),label:n.label}],S.push(l),o.append(i.element)):(i=(l=S[_])[0]).label!=e&&i.element.attr("label",i.label=e),j=null,P=0,q=n.length;P<q;P++)r=n[P],(c=l[P+1])?(j=c.element,c.label!==r.label&&(j.text(c.label=r.label),j.prop("label",c.label)),c.id!==r.id&&j.val(c.id=r.id),j[0].selected!==r.selected&&(j.prop("selected",c.selected=r.selected),ln&&j.prop("selected",c.selected))):(""===r.id&&v?T=v:(T=y.clone()).val(r.id).prop("selected",r.selected).attr("selected",r.selected).prop("label",r.label).text(r.label),l.push(c={element:T,label:r.label,id:r.id,selected:r.selected}),d.addOption(r.label,T),j?j.after(T):i.element.append(T),j=T);for(P++;l.length>P;)r=l.pop(),d.removeOption(r.label),r.element.remove()}for(;S.length>_;)S.pop()[0].element.remove()}var c;if(!(c=m.match(i)))throw mi("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",m,H(o));var f=r(c[2]||c[1]),p=c[4]||c[6],g=c[5],b=r(c[3]||""),x=r(c[2]?c[1]:p),C=r(c[7]),k=c[8]?r(c[8]):null,S=[[{element:o,label:""}]];v&&(e(v)(t),v.removeClass("ng-scope"),v.remove()),o.empty(),o.on("change",function(){t.$apply(function(){var e,r,i,a,u,c,f,d,m,v=C(t)||[],$={};if(h){for(i=[],c=0,d=S.length;c<d;c++)for(u=1,f=(e=S[c]).length;u<f;u++)if((a=e[u].element)[0].selected){if(r=a.val(),g&&($[g]=r),k)for(m=0;m<v.length&&($[p]=v[m],k(t,$)!=r);m++);else $[p]=v[r];i.push(x(t,$))}}else if("?"==(r=o.val()))i=n;else if(""===r)i=null;else if(k){for(m=0;m<v.length;m++)if($[p]=v[m],k(t,$)==r){i=x(t,$);break}}else $[p]=v[r],g&&($[g]=r),i=x(t,$);s.$setViewValue(i),l()})}),s.$render=l,t.$watchCollection(C,l),t.$watchCollection(function(){var e={},n=C(t);if(n){for(var r=new Array(n.length),i=0,o=n.length;i<o;i++)e[p]=n[i],r[i]=f(t,e);return r}},l),h&&t.$watchCollection(function(){return s.$modelValue},l)}(s,u,p):h?function(e,t,n){var r;n.$render=function(){var e=new Pe(n.$viewValue);o(t.find("option"),function(t){t.selected=$(e.get(t.value))})},e.$watch(function(){R(r,n.$viewValue)||(r=N(n.$viewValue),n.$render())}),t.on("change",function(){e.$apply(function(){var e=[];o(t.find("option"),function(t){t.selected&&e.push(t.value)}),n.$setViewValue(e)})})}(s,u,p):function(e,t,n,r){n.$render=function(){var e=n.$viewValue;r.hasOption(e)?(b.parent()&&b.remove(),t.val(e),""===e&&f.prop("selected",!0)):g(e)&&f?t.val(""):r.renderUnknownOption(e)},t.on("change",function(){e.$apply(function(){b.parent()&&b.remove(),n.$setViewValue(t.val())})})}(s,u,p,d)}}}}],$i=["$interpolate",function(e){var t={addOption:h,removeOption:h};return{restrict:"E",priority:100,compile:function(n,r){if(g(r.value)){var i=e(n.text(),!0);i||r.$set("value",n.text())}return function(e,n,r){var o=n.parent(),a=o.data("$selectController")||o.parent().data("$selectController");a&&a.databound?n.prop("selected",!1):a=t,i?e.$watch(i,function(e,t){r.$set("value",e),e!==t&&a.removeOption(t),a.addOption(e)}):a.addOption(r.value),n.on("$destroy",function(){a.removeOption(r.value)})}}}}],yi=v({restrict:"E",terminal:!0});e.angular.bootstrap?console.log("WARNING: Tried to load angular more than once."):((fn=e.jQuery)&&fn.fn.on?(cn=fn,f(fn.fn,{scope:Rn.scope,isolateScope:Rn.isolateScope,controller:Rn.controller,injector:Rn.injector,inheritedData:Rn.inheritedData}),ue("remove",!0,!0,!1),ue("empty",!1,!1,!1),ue("html",!1,!1,!0)):cn=de,$n.element=cn,function(t){f(t,{bootstrap:K,copy:D,extend:f,equals:R,element:cn,forEach:o,injector:je,noop:h,bind:U,toJson:V,fromJson:B,identity:m,isUndefined:g,isDefined:$,isString:w,isFunction:C,isObject:y,isNumber:b,isElement:A,isArray:wn,version:kn,isDate:x,lowercase:an,uppercase:un,callbacks:{counter:0},$$minErr:r,$$csp:xn}),dn=oe(e);try{dn("ngLocale")}catch(e){dn("ngLocale",[]).provider("$locale",et)}dn("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:_t}),e.provider("$compile",Ie).directive({a:br,input:Tr,textarea:Tr,form:Sr,script:hi,select:gi,style:yi,option:$i,ngBind:zr,ngBindHtml:Gr,ngBindTemplate:Hr,ngClass:Wr,ngClassEven:Yr,ngClassOdd:Qr,ngCloak:Xr,ngController:Jr,ngForm:Er,ngHide:ui,ngIf:ei,ngInclude:ti,ngInit:ri,ngNonBindable:ii,ngPluralize:oi,ngRepeat:ai,ngShow:si,ngStyle:li,ngSwitch:ci,ngSwitchWhen:fi,ngSwitchDefault:di,ngOptions:vi,ngTransclude:pi,ngModel:Ir,ngList:Lr,ngChange:Fr,required:Ur,ngRequired:Ur,ngValue:Br}).directive({ngInclude:ni}).directive(xr).directive(Kr),e.provider({$anchorScroll:Te,$animate:Gn,$browser:De,$cacheFactory:Ne,$controller:Le,$document:Ve,$exceptionHandler:Be,$filter:Ft,$interpolate:Ke,$interval:Ze,$http:Qe,$httpBackend:Xe,$location:pt,$log:ht,$parse:Ct,$rootScope:qt,$q:kt,$sce:Ot,$sceDelegate:Tt,$sniffer:Mt,$templateCache:Re,$timeout:Dt,$window:It,$$rAF:Et,$$asyncCallback:Oe})}])}($n),cn(t).ready(function(){J(t,K)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\\:form{display:block;}.ng-animate-block-transitions{transition:0s all!important;-webkit-transition:0s all!important;}.ng-hide-add-active,.ng-hide-remove{display:block!important;}</style>');var commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},lodash=createCommonjsModule(function(e,t){(function(){function n(e,t){if(e!==t){var n=null===e,r=e===k,i=e==e,o=null===t,a=t===k,s=t==t;if(e>t&&!o||!i||n&&!a&&s||r&&s)return 1;if(e<t&&!n||!s||o&&!r&&i||a&&i)return-1}return 0}function r(e,t,n){for(var r=e.length,i=n?r:-1;n?i--:++i<r;)if(t(e[i],i,e))return i;return-1}function i(e,t,n){if(t!=t)return m(e,n);for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function o(e){return"function"==typeof e||!1}function a(e){return null==e?"":e+""}function s(e,t){for(var n=-1,r=e.length;++n<r&&t.indexOf(e.charAt(n))>-1;);return n}function u(e,t){for(var n=e.length;n--&&t.indexOf(e.charAt(n))>-1;);return n}function l(e,t){return n(e.criteria,t.criteria)||e.index-t.index}function c(e,t,r){for(var i=-1,o=e.criteria,a=t.criteria,s=o.length,u=r.length;++i<s;){var l=n(o[i],a[i]);if(l){if(i>=u)return l;var c=r[i];return l*("asc"===c||!0===c?1:-1)}}return e.index-t.index}function f(e){return Ue[e]}function d(e){return Le[e]}function p(e,t,n){return t?e=ze[e]:n&&(e=He[e]),"\\"+e}function h(e){return"\\"+He[e]}function m(e,t,n){for(var r=e.length,i=t+(n?0:-1);n?i--:++i<r;){var o=e[i];if(o!=o)return i}return-1}function v(e){return!!e&&"object"==typeof e}function g(e){return e<=160&&e>=9&&e<=13||32==e||160==e||5760==e||6158==e||e>=8192&&(e<=8202||8232==e||8233==e||8239==e||8287==e||12288==e||65279==e)}function $(e,t){for(var n=-1,r=e.length,i=-1,o=[];++n<r;)e[n]===t&&(e[n]=B,o[++i]=n);return o}function y(e,t){for(var n,r=-1,i=e.length,o=-1,a=[];++r<i;){var s=e[r],u=t?t(s,r,e):s;r&&n===u||(n=u,a[++o]=s)}return a}function w(e){for(var t=-1,n=e.length;++t<n&&g(e.charCodeAt(t)););return t}function b(e){for(var t=e.length;t--&&g(e.charCodeAt(t)););return t}function x(e){return Ve[e]}function C(e){function t(e){if(v(e)&&!Bo(e)&&!(e instanceof Le)){if(e instanceof Ue)return e;if(hi.call(e,"__chain__")&&hi.call(e,"__wrapped__"))return nr(e)}return new Ue(e)}function g(){}function Ue(e,t,n){this.__wrapped__=e,this.__actions__=n||[],this.__chain__=!!t}function Le(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Li,this.__views__=[]}function Ve(){this.__data__={}}function Be(e){var t=e?e.length:0;for(this.data={hash:Ai(null),set:new ki};t--;)this.push(e[t])}function ze(e,t){var n=e.data;return("string"==typeof t||Ar(t)?n.set.has(t):n.hash[t])?0:-1}function He(e,t){for(var n=-1,r=e.length,i=-1,o=t.length,a=ei(r+o);++n<r;)a[n]=e[n];for(;++i<o;)a[n++]=t[i];return a}function Ge(e,t){var n=-1,r=e.length;for(t||(t=ei(r));++n<r;)t[n]=e[n];return t}function We(e,t){for(var n=-1,r=e.length;++n<r&&!1!==t(e[n],n,e););return e}function Qe(e,t){for(var n=-1,r=e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Ye(e,t,n,r){for(var i=-1,o=e.length,a=r,s=a;++i<o;){var u=e[i],l=+t(u);n(l,a)&&(a=l,s=u)}return s}function Xe(e,t){for(var n=-1,r=e.length,i=-1,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[++i]=a)}return o}function Je(e,t){for(var n=-1,r=e.length,i=ei(r);++n<r;)i[n]=t(e[n],n,e);return i}function et(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function tt(e,t,n,r){var i=-1,o=e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function nt(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function rt(e,t){for(var n=e.length,r=0;n--;)r+=+t(e[n])||0;return r}function it(e,t,n,r){return e!==k&&hi.call(r,n)?e:t}function ot(e,t,n){for(var r=-1,i=ea(t),o=i.length;++r<o;){var a=i[r],s=e[a],u=n(s,t[a],a,e,t);(u==u?u===s:s!=s)&&(s!==k||a in e)||(e[a]=u)}return e}function at(e,t){return null==t?e:ut(t,ea(t),e)}function st(e,t){for(var n=-1,r=null==e,i=!r&&Un(e),o=i?e.length:0,a=t.length,s=ei(a);++n<a;){var u=t[n];s[n]=i?Ln(u,o)?e[u]:k:r?k:e[u]}return s}function ut(e,t,n){n||(n={});for(var r=-1,i=t.length;++r<i;){var o=t[r];n[o]=e[o]}return n}function lt(e,t,n){var r=typeof e;return"function"==r?t===k?e:Qt(e,t,n):null==e?Yr:"object"==r?_t(e):t===k?Zr(e):Pt(e,t)}function ct(e,t,n,r,i,o,a){var s;if(n&&(s=i?n(e,r,i):n(e)),s!==k)return s;if(!Ar(e))return e;var u=Bo(e);if(u){if(s=Nn(e),!t)return Ge(e,s)}else{var l=vi.call(e),c=l==Y;if(l!=J&&l!=z&&(!c||i))return Fe[l]?In(e,l,t):i?e:{};if(s=Rn(c?{}:e),!t)return at(s,e)}o||(o=[]),a||(a=[]);for(var f=o.length;f--;)if(o[f]==e)return a[f];return o.push(e),a.push(s),(u?We:wt)(e,function(r,i){s[i]=ct(r,t,n,i,e,o,a)}),s}function ft(e,t,n){if("function"!=typeof e)throw new li(V);return Si(function(){e.apply(k,n)},t)}function dt(e,t){var n=e?e.length:0,r=[];if(!n)return r;var o=-1,a=Tn(),s=a==i,u=s&&t.length>=F?rn(t):null,l=t.length;u&&(a=ze,s=!1,t=u);e:for(;++o<n;){var c=e[o];if(s&&c==c){for(var f=l;f--;)if(t[f]===c)continue e;r.push(c)}else a(t,c,0)<0&&r.push(c)}return r}function pt(e,t){var n=!0;return Yi(e,function(e,r,i){return n=!!t(e,r,i)}),n}function ht(e,t,n,r){var i=r,o=i;return Yi(e,function(e,a,s){var u=+t(e,a,s);(n(u,i)||u===r&&u===o)&&(i=u,o=e)}),o}function mt(e,t,n,r){var i=e.length;for((n=null==n?0:+n||0)<0&&(n=-n>i?0:i+n),(r=r===k||r>i?i:+r||0)<0&&(r+=i),i=n>r?0:r>>>0,n>>>=0;n<i;)e[n++]=t;return e}function vt(e,t){var n=[];return Yi(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function gt(e,t,n,r){var i;return n(e,function(e,n,o){if(t(e,n,o))return i=r?n:e,!1}),i}function $t(e,t,n,r){r||(r=[]);for(var i=-1,o=e.length;++i<o;){var a=e[i];v(a)&&Un(a)&&(n||Bo(a)||Er(a))?t?$t(a,t,n,r):et(r,a):n||(r[r.length]=a)}return r}function yt(e,t){return Ji(e,t,Lr)}function wt(e,t){return Ji(e,t,ea)}function bt(e,t){return Ki(e,t,ea)}function xt(e,t){for(var n=-1,r=t.length,i=-1,o=[];++n<r;){var a=t[n];Pr(e[a])&&(o[++i]=a)}return o}function Ct(e,t,n){if(null!=e){n!==k&&n in er(e)&&(t=[n]);for(var r=0,i=t.length;null!=e&&r<i;)e=e[t[r++]];return r&&r==i?e:k}}function kt(e,t,n,r,i,o){return e===t||(null==e||null==t||!Ar(e)&&!v(t)?e!=e&&t!=t:St(e,t,kt,n,r,i,o))}function St(e,t,n,r,i,o,a){var s=Bo(e),u=Bo(t),l=H,c=H;s||((l=vi.call(e))==z?l=J:l!=J&&(s=Nr(e))),u||((c=vi.call(t))==z?c=J:c!=J&&(u=Nr(t)));var f=l==J,d=c==J,p=l==c;if(p&&!s&&!f)return _n(e,t,l);if(!i){var h=f&&hi.call(e,"__wrapped__"),m=d&&hi.call(t,"__wrapped__");if(h||m)return n(h?e.value():e,m?t.value():t,r,i,o,a)}if(!p)return!1;o||(o=[]),a||(a=[]);for(var v=o.length;v--;)if(o[v]==e)return a[v]==t;o.push(e),a.push(t);var g=(s?qn:Pn)(e,t,n,r,i,o,a);return o.pop(),a.pop(),g}function Et(e,t,n){var r=t.length,i=r,o=!n;if(null==e)return!i;for(e=er(e);r--;){var a=t[r];if(o&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++r<i;){var s=(a=t[r])[0],u=e[s],l=a[1];if(o&&a[2]){if(u===k&&!(s in e))return!1}else{var c=n?n(u,l,s):k;if(!(c===k?kt(l,u,n,!0):c))return!1}}return!0}function qt(e,t){var n=-1,r=Un(e)?ei(e.length):[];return Yi(e,function(e,i,o){r[++n]=t(e,i,o)}),r}function _t(e){var t=On(e);if(1==t.length&&t[0][2]){var n=t[0][0],r=t[0][1];return function(e){return null!=e&&(e[n]===r&&(r!==k||n in er(e)))}}return function(e){return Et(e,t)}}function Pt(e,t){var n=Bo(e),r=Bn(e)&&Gn(t),i=e+"";return e=tr(e),function(o){if(null==o)return!1;var a=i;if(o=er(o),(n||!r)&&!(a in o)){if(null==(o=1==e.length?o:Ct(o,Rt(e,0,-1))))return!1;a=sr(e),o=er(o)}return o[a]===t?t!==k||a in o:kt(t,o[a],k,!0)}}function At(e,t,n,r,i){if(!Ar(e))return e;var o=Un(t)&&(Bo(t)||Nr(t)),a=o?k:ea(t);return We(a||t,function(s,u){if(a&&(s=t[u=s]),v(s))r||(r=[]),i||(i=[]),jt(e,t,u,At,n,r,i);else{var l=e[u],c=n?n(l,s,u,e,t):k,f=c===k;f&&(c=s),c===k&&(!o||u in e)||!f&&(c==c?c===l:l!=l)||(e[u]=c)}}),e}function jt(e,t,n,r,i,o,a){for(var s=o.length,u=t[n];s--;)if(o[s]==u)return void(e[n]=a[s]);var l=e[n],c=i?i(l,u,n,e,t):k,f=c===k;f&&(c=u,Un(u)&&(Bo(u)||Nr(u))?c=Bo(l)?l:Un(l)?Ge(l):[]:Or(u)||Er(u)?c=Er(l)?Fr(l):Or(l)?l:{}:f=!1),o.push(u),a.push(c),f?e[n]=r(c,u,i,o,a):(c==c?c!==l:l==l)&&(e[n]=c)}function Tt(e){return function(t){return null==t?k:t[e]}}function Ot(e){var t=e+"";return e=tr(e),function(n){return Ct(n,e,t)}}function Mt(e,t){for(var n=e?t.length:0;n--;){var r=t[n];if(r!=i&&Ln(r)){var i=r;Ei.call(e,r,1)}}return e}function Dt(e,t){return e+ji(Fi()*(t-e+1))}function Nt(e,t,n,r,i){return i(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}function Rt(e,t,n){var r=-1,i=e.length;(t=null==t?0:+t||0)<0&&(t=-t>i?0:i+t),(n=n===k||n>i?i:+n||0)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=ei(i);++r<i;)o[r]=e[r+t];return o}function It(e,t){var n;return Yi(e,function(e,r,i){return!(n=t(e,r,i))}),!!n}function Ft(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function Ut(e,t,n){var r=An(),i=-1;return t=Je(t,function(e){return r(e)}),Ft(qt(e,function(e){return{criteria:Je(t,function(t){return t(e)}),index:++i,value:e}}),function(e,t){return c(e,t,n)})}function Lt(e,t){var n=0;return Yi(e,function(e,r,i){n+=+t(e,r,i)||0}),n}function Vt(e,t){var n=-1,r=Tn(),o=e.length,a=r==i,s=a&&o>=F,u=s?rn():null,l=[];u?(r=ze,a=!1):(s=!1,u=t?[]:l);e:for(;++n<o;){var c=e[n],f=t?t(c,n,e):c;if(a&&c==c){for(var d=u.length;d--;)if(u[d]===f)continue e;t&&u.push(f),l.push(c)}else r(u,f,0)<0&&((t||s)&&u.push(f),l.push(c))}return l}function Bt(e,t){for(var n=-1,r=t.length,i=ei(r);++n<r;)i[n]=e[t[n]];return i}function zt(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?Rt(e,r?0:o,r?o+1:i):Rt(e,r?o+1:0,r?i:o)}function Ht(e,t){var n=e;n instanceof Le&&(n=n.value());for(var r=-1,i=t.length;++r<i;){var o=t[r];n=o.func.apply(o.thisArg,et([n],o.args))}return n}function Gt(e,t,n){var r=0,i=e?e.length:r;if("number"==typeof t&&t==t&&i<=zi){for(;r<i;){var o=r+i>>>1,a=e[o];(n?a<=t:a<t)&&null!==a?r=o+1:i=o}return i}return Wt(e,t,Yr,n)}function Wt(e,t,n,r){t=n(t);for(var i=0,o=e?e.length:0,a=t!=t,s=null===t,u=t===k;i<o;){var l=ji((i+o)/2),c=n(e[l]),f=c!==k,d=c==c;if(a)var p=d||r;else p=s?d&&f&&(r||null!=c):u?d&&(r||f):null!=c&&(r?c<=t:c<t);p?i=l+1:o=l}return Ni(o,Bi)}function Qt(e,t,n){if("function"!=typeof e)return Yr;if(t===k)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)};case 5:return function(n,r,i,o,a){return e.call(t,n,r,i,o,a)}}return function(){return e.apply(t,arguments)}}function Yt(e){var t=new yi(e.byteLength);return new qi(t).set(new qi(e)),t}function Xt(e,t,n){for(var r=n.length,i=-1,o=Di(e.length-r,0),a=-1,s=t.length,u=ei(s+o);++a<s;)u[a]=t[a];for(;++i<r;)u[n[i]]=e[i];for(;o--;)u[a++]=e[i++];return u}function Jt(e,t,n){for(var r=-1,i=n.length,o=-1,a=Di(e.length-i,0),s=-1,u=t.length,l=ei(a+u);++o<a;)l[o]=e[o];for(var c=o;++s<u;)l[c+s]=t[s];for(;++r<i;)l[c+n[r]]=e[o++];return l}function Kt(e,t){return function(n,r,i){var o=t?t():{};if(r=An(r,i,3),Bo(n))for(var a=-1,s=n.length;++a<s;){var u=n[a];e(o,u,r(u,a,n),n)}else Yi(n,function(t,n,i){e(o,t,r(t,n,i),i)});return o}}function Zt(e){return kr(function(t,n){var r=-1,i=null==t?0:n.length,o=i>2?n[i-2]:k,a=i>2?n[2]:k,s=i>1?n[i-1]:k;for("function"==typeof o?(o=Qt(o,s,5),i-=2):i-=(o="function"==typeof s?s:k)?1:0,a&&Vn(n[0],n[1],a)&&(o=i<3?k:o,i=1);++r<i;){var u=n[r];u&&e(t,u,o)}return t})}function en(e,t){return function(n,r){var i=n?to(n):0;if(!Hn(i))return e(n,r);for(var o=t?i:-1,a=er(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function tn(e){return function(t,n,r){for(var i=er(t),o=r(t),a=o.length,s=e?a:-1;e?s--:++s<a;){var u=o[s];if(!1===n(i[u],u,i))break}return t}}function nn(e,t){function n(){return(this&&this!==Ke&&this instanceof n?r:e).apply(t,arguments)}var r=an(e);return n}function rn(e){return Ai&&ki?new Be(e):null}function on(e){return function(t){for(var n=-1,r=Wr(zr(t)),i=r.length,o="";++n<i;)o=e(o,r[n],n);return o}}function an(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Qi(e.prototype),r=e.apply(n,t);return Ar(r)?r:n}}function sn(e){function t(n,r,i){i&&Vn(n,r,i)&&(r=k);var o=En(n,e,k,k,k,k,k,r);return o.placeholder=t.placeholder,o}return t}function un(e,t){return kr(function(n){var r=n[0];return null==r?r:(n.push(t),e.apply(k,n))})}function ln(e,t){return function(n,r,i){if(i&&Vn(n,r,i)&&(r=k),1==(r=An(r,i,3)).length){var o=Ye(n=Bo(n)?n:Zn(n),r,e,t);if(!n.length||o!==t)return o}return ht(n,r,e,t)}}function cn(e,t){return function(n,i,o){if(i=An(i,o,3),Bo(n)){var a=r(n,i,t);return a>-1?n[a]:k}return gt(n,i,e)}}function fn(e){return function(t,n,i){return t&&t.length?(n=An(n,i,3),r(t,n,e)):-1}}function dn(e){return function(t,n,r){return n=An(n,r,3),gt(t,n,e,!0)}}function pn(e){return function(){for(var t,n=arguments.length,r=e?n:-1,i=0,o=ei(n);e?r--:++r<n;){var a=o[i++]=arguments[r];if("function"!=typeof a)throw new li(V);!t&&Ue.prototype.thru&&"wrapper"==jn(a)&&(t=new Ue([],!0))}for(r=t?-1:n;++r<n;){var s=jn(a=o[r]),u="wrapper"==s?eo(a):k;t=u&&zn(u[0])&&u[1]==(O|P|j|M)&&!u[4].length&&1==u[9]?t[jn(u[0])].apply(t,u[3]):1==a.length&&zn(a)?t[s]():t.thru(a)}return function(){var e=arguments,r=e[0];if(t&&1==e.length&&Bo(r)&&r.length>=F)return t.plant(r).value();for(var i=0,a=n?o[i].apply(this,e):r;++i<n;)a=o[i].call(this,a);return a}}}function hn(e,t){return function(n,r,i){return"function"==typeof r&&i===k&&Bo(n)?e(n,r):t(n,Qt(r,i,3))}}function mn(e){return function(t,n,r){return"function"==typeof n&&r===k||(n=Qt(n,r,3)),e(t,n,Lr)}}function vn(e){return function(t,n,r){return"function"==typeof n&&r===k||(n=Qt(n,r,3)),e(t,n)}}function gn(e){return function(t,n,r){var i={};return n=An(n,r,3),wt(t,function(t,r,o){var a=n(t,r,o);r=e?a:r,t=e?t:a,i[r]=t}),i}}function $n(e){return function(t,n,r){return t=a(t),(e?t:"")+xn(t,n,r)+(e?"":t)}}function yn(e){var t=kr(function(n,r){var i=$(r,t.placeholder);return En(n,e,k,r,i)});return t}function wn(e,t){return function(n,r,i,o){var a=arguments.length<3;return"function"==typeof r&&o===k&&Bo(n)?e(n,r,i,a):Nt(n,An(r,o,4),i,a,t)}}function bn(e,t,n,r,i,o,a,s,u,l){function c(){for(var y=arguments.length,w=y,b=ei(y);w--;)b[w]=arguments[w];if(r&&(b=Xt(b,r,i)),o&&(b=Jt(b,o,a)),h||v){var x=c.placeholder,C=$(b,x);if((y-=C.length)<l){var S=s?Ge(s):k,_=Di(l-y,0);t|=h?j:T,t&=~(h?T:j),m||(t&=~(E|q));var P=[e,t,n,h?b:k,h?C:k,h?k:b,h?k:C,S,u,_],A=bn.apply(k,P);return zn(e)&&no(A,P),A.placeholder=x,A}}var O=d?n:this,M=p?O[e]:e;return s&&(b=Jn(b,s)),f&&u<b.length&&(b.length=u),this&&this!==Ke&&this instanceof c&&(M=g||an(e)),M.apply(O,b)}var f=t&O,d=t&E,p=t&q,h=t&P,m=t&_,v=t&A,g=p?k:an(e);return c}function xn(e,t,n){var r=e.length;if(t=+t,r>=t||!Oi(t))return"";var i=t-r;return n=null==n?" ":n+"",Hr(n,Pi(i/n.length)).slice(0,i)}function Cn(e,t,n,r){function i(){for(var t=-1,s=arguments.length,u=-1,l=r.length,c=ei(l+s);++u<l;)c[u]=r[u];for(;s--;)c[u++]=arguments[++t];return(this&&this!==Ke&&this instanceof i?a:e).apply(o?n:this,c)}var o=t&E,a=an(e);return i}function kn(e){var t=ii[e];return function(e,n){return(n=n===k?0:+n||0)?(n=xi(10,n),t(e*n)/n):t(e)}}function Sn(e){return function(t,n,r,i){var o=An(r);return null==r&&o===lt?Gt(t,n,e):Wt(t,n,o(r,i,1),e)}}function En(e,t,n,r,i,o,a,s){var u=t&q;if(!u&&"function"!=typeof e)throw new li(V);var l=r?r.length:0;if(l||(t&=~(j|T),r=i=k),l-=i?i.length:0,t&T){var c=r,f=i;r=i=k}var d=u?k:eo(e),p=[e,t,n,r,i,c,f,o,a,s];if(d&&(Wn(p,d),t=p[1],s=p[9]),p[9]=null==s?u?0:e.length:Di(s-l,0)||0,t==E)var h=nn(p[0],p[2]);else h=t!=j&&t!=(E|j)||p[4].length?bn.apply(k,p):Cn.apply(k,p);return(d?Zi:no)(h,p)}function qn(e,t,n,r,i,o,a){var s=-1,u=e.length,l=t.length;if(u!=l&&!(i&&l>u))return!1;for(;++s<u;){var c=e[s],f=t[s],d=r?r(i?f:c,i?c:f,s):k;if(d!==k){if(d)continue;return!1}if(i){if(!nt(t,function(e){return c===e||n(c,e,r,i,o,a)}))return!1}else if(c!==f&&!n(c,f,r,i,o,a))return!1}return!0}function _n(e,t,n){switch(n){case G:case W:return+e==+t;case Q:return e.name==t.name&&e.message==t.message;case X:return e!=+e?t!=+t:e==+t;case K:case Z:return e==t+""}return!1}function Pn(e,t,n,r,i,o,a){var s=ea(e),u=s.length;if(u!=ea(t).length&&!i)return!1;for(var l=u;l--;){var c=s[l];if(!(i?c in t:hi.call(t,c)))return!1}for(var f=i;++l<u;){var d=e[c=s[l]],p=t[c],h=r?r(i?p:d,i?d:p,c):k;if(!(h===k?n(d,p,r,i,o,a):h))return!1;f||(f="constructor"==c)}if(!f){var m=e.constructor,v=t.constructor;if(m!=v&&"constructor"in e&&"constructor"in t&&!("function"==typeof m&&m instanceof m&&"function"==typeof v&&v instanceof v))return!1}return!0}function An(e,n,r){var i=t.callback||Qr;return i=i===Qr?lt:i,r?i(e,n,r):i}function jn(e){for(var t=e.name,n=Wi[t],r=n?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function Tn(e,n,r){var o=t.indexOf||ar;return o=o===ar?i:o,e?o(e,n,r):o}function On(e){for(var t=Vr(e),n=t.length;n--;)t[n][2]=Gn(t[n][1]);return t}function Mn(e,t){var n=null==e?k:e[t];return jr(n)?n:k}function Dn(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=Ni(t,e+a);break;case"takeRight":e=Di(e,t-a)}}return{start:e,end:t}}function Nn(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&hi.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Rn(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=ai),new t}function In(e,t,n){var r=e.constructor;switch(t){case ee:return Yt(e);case G:case W:return new r(+e);case te:case ne:case re:case ie:case oe:case ae:case se:case ue:case le:var i=e.buffer;return new r(n?Yt(i):i,e.byteOffset,e.length);case X:case Z:return new r(e);case K:var o=new r(e.source,_e.exec(e));o.lastIndex=e.lastIndex}return o}function Fn(e,t,n){null==e||Bn(t,e)||(e=1==(t=tr(t)).length?e:Ct(e,Rt(t,0,-1)),t=sr(t));var r=null==e?e:e[t];return null==r?k:r.apply(e,n)}function Un(e){return null!=e&&Hn(to(e))}function Ln(e,t){return e="number"==typeof e||je.test(e)?+e:-1,t=null==t?Hi:t,e>-1&&e%1==0&&e<t}function Vn(e,t,n){if(!Ar(n))return!1;var r=typeof t;if("number"==r?Un(n)&&Ln(t,n.length):"string"==r&&t in n){var i=n[t];return e==e?e===i:i!=i}return!1}function Bn(e,t){var n=typeof e;return!!("string"==n&&be.test(e)||"number"==n)||!Bo(e)&&(!we.test(e)||null!=t&&e in er(t))}function zn(e){var n=jn(e);if(!(n in Le.prototype))return!1;var r=t[n];if(e===r)return!0;var i=eo(r);return!!i&&e===i[0]}function Hn(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Hi}function Gn(e){return e==e&&!Ar(e)}function Wn(e,t){var n=e[1],r=t[1],i=n|r,o=i<O,a=r==O&&n==P||r==O&&n==M&&e[7].length<=t[8]||r==(O|M)&&n==P;if(!o&&!a)return e;r&E&&(e[2]=t[2],i|=n&E?0:_);var s=t[3];if(s){var u=e[3];e[3]=u?Xt(u,s,t[4]):Ge(s),e[4]=u?$(e[3],B):Ge(t[4])}return(s=t[5])&&(u=e[5],e[5]=u?Jt(u,s,t[6]):Ge(s),e[6]=u?$(e[5],B):Ge(t[6])),(s=t[7])&&(e[7]=Ge(s)),r&O&&(e[8]=null==e[8]?t[8]:Ni(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}function Qn(e,t){return e===k?t:zo(e,t,Qn)}function Yn(e,t){e=er(e);for(var n=-1,r=t.length,i={};++n<r;){var o=t[n];o in e&&(i[o]=e[o])}return i}function Xn(e,t){var n={};return yt(e,function(e,r,i){t(e,r,i)&&(n[r]=e)}),n}function Jn(e,t){for(var n=e.length,r=Ni(t.length,n),i=Ge(e);r--;){var o=t[r];e[r]=Ln(o,n)?i[o]:k}return e}function Kn(e){for(var t=Lr(e),n=t.length,r=n&&e.length,i=!!r&&Hn(r)&&(Bo(e)||Er(e)),o=-1,a=[];++o<n;){var s=t[o];(i&&Ln(s,r)||hi.call(e,s))&&a.push(s)}return a}function Zn(e){return null==e?[]:Un(e)?Ar(e)?e:ai(e):Br(e)}function er(e){return Ar(e)?e:ai(e)}function tr(e){if(Bo(e))return e;var t=[];return a(e).replace(xe,function(e,n,r,i){t.push(r?i.replace(Ee,"$1"):n||e)}),t}function nr(e){return e instanceof Le?e.clone():new Ue(e.__wrapped__,e.__chain__,Ge(e.__actions__))}function rr(e,t,n){return(e?e.length:0)?((n?Vn(e,t,n):null==t)&&(t=1),Rt(e,t<0?0:t)):[]}function ir(e,t,n){var r=e?e.length:0;return r?((n?Vn(e,t,n):null==t)&&(t=1),t=r-(+t||0),Rt(e,0,t<0?0:t)):[]}function or(e){return e?e[0]:k}function ar(e,t,n){var r=e?e.length:0;if(!r)return-1;if("number"==typeof n)n=n<0?Di(r+n,0):n;else if(n){var o=Gt(e,t);return o<r&&(t==t?t===e[o]:e[o]!=e[o])?o:-1}return i(e,t,n||0)}function sr(e){var t=e?e.length:0;return t?e[t-1]:k}function ur(e){return rr(e,1)}function lr(e,t,n,r){if(!(e?e.length:0))return[];null!=t&&"boolean"!=typeof t&&(n=Vn(e,t,r=n)?k:t,t=!1);var o=An();return null==n&&o===lt||(n=o(n,r,3)),t&&Tn()==i?y(e,n):Vt(e,n)}function cr(e){if(!e||!e.length)return[];var t=-1,n=0;e=Xe(e,function(e){if(Un(e))return n=Di(e.length,n),!0});for(var r=ei(n);++t<n;)r[t]=Je(e,Tt(t));return r}function fr(e,t,n){if(!(e?e.length:0))return[];var r=cr(e);return null==t?r:(t=Qt(t,n,4),Je(r,function(e){return tt(e,t,k,!0)}))}function dr(e,t){var n=-1,r=e?e.length:0,i={};for(!r||t||Bo(e[0])||(t=[]);++n<r;){var o=e[n];t?i[o]=t[n]:o&&(i[o[0]]=o[1])}return i}function pr(e){var n=t(e);return n.__chain__=!0,n}function hr(e,t,n){return t.call(n,e)}function mr(e,t,n){var r=Bo(e)?Qe:pt;return n&&Vn(e,t,n)&&(t=k),"function"==typeof t&&n===k||(t=An(t,n,3)),r(e,t)}function vr(e,t,n){var r=Bo(e)?Xe:vt;return t=An(t,n,3),r(e,t)}function gr(e,t,n,r){var i=e?to(e):0;return Hn(i)||(i=(e=Br(e)).length),n="number"!=typeof n||r&&Vn(t,n,r)?0:n<0?Di(i+n,0):n||0,"string"==typeof e||!Bo(e)&&Dr(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Tn(e,t,n)>-1}function $r(e,t,n){var r=Bo(e)?Je:qt;return t=An(t,n,3),r(e,t)}function yr(e,t,n){if(n?Vn(e,t,n):null==t)return(o=(e=Zn(e)).length)>0?e[Dt(0,o-1)]:k;var r=-1,i=Ir(e),o=i.length,a=o-1;for(t=Ni(t<0?0:+t||0,o);++r<t;){var s=Dt(r,a),u=i[s];i[s]=i[r],i[r]=u}return i.length=t,i}function wr(e,t,n){var r=Bo(e)?nt:It;return n&&Vn(e,t,n)&&(t=k),"function"==typeof t&&n===k||(t=An(t,n,3)),r(e,t)}function br(e,t){var n;if("function"!=typeof t){if("function"!=typeof e)throw new li(V);var r=e;e=t,t=r}return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=k),n}}function xr(e,t,n){function r(t,n){n&&wi(n),u=d=p=k,t&&(h=Po(),l=e.apply(f,s),d||u||(s=f=k))}function i(){var e=t-(Po()-c);e<=0||e>t?r(p,u):d=Si(i,e)}function o(){r(v,d)}function a(){if(s=arguments,c=Po(),f=this,p=v&&(d||!g),!1===m)var n=g&&!d;else{u||g||(h=c);var r=m-(c-h),a=r<=0||r>m;a?(u&&(u=wi(u)),h=c,l=e.apply(f,s)):u||(u=Si(o,r))}return a&&d?d=wi(d):d||t===m||(d=Si(i,t)),n&&(a=!0,l=e.apply(f,s)),!a||d||u||(s=f=k),l}var s,u,l,c,f,d,p,h=0,m=!1,v=!0;if("function"!=typeof e)throw new li(V);if(t=t<0?0:+t||0,!0===n){var g=!0;v=!1}else Ar(n)&&(g=!!n.leading,m="maxWait"in n&&Di(+n.maxWait||0,t),v="trailing"in n?!!n.trailing:v);return a.cancel=function(){d&&wi(d),u&&wi(u),h=0,u=d=p=k},a}function Cr(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new li(V);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new Cr.Cache,n}function kr(e,t){if("function"!=typeof e)throw new li(V);return t=Di(t===k?e.length-1:+t||0,0),function(){for(var n=arguments,r=-1,i=Di(n.length-t,0),o=ei(i);++r<i;)o[r]=n[t+r];switch(t){case 0:return e.call(this,o);case 1:return e.call(this,n[0],o);case 2:return e.call(this,n[0],n[1],o)}var a=ei(t+1);for(r=-1;++r<t;)a[r]=n[r];return a[t]=o,e.apply(this,a)}}function Sr(e,t){return e>t}function Er(e){return v(e)&&Un(e)&&hi.call(e,"callee")&&!Ci.call(e,"callee")}function qr(e,t,n,r){var i=(n="function"==typeof n?Qt(n,r,3):k)?n(e,t):k;return i===k?kt(e,t,n):!!i}function _r(e){return v(e)&&"string"==typeof e.message&&vi.call(e)==Q}function Pr(e){return Ar(e)&&vi.call(e)==Y}function Ar(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function jr(e){return null!=e&&(Pr(e)?$i.test(pi.call(e)):v(e)&&Ae.test(e))}function Tr(e){return"number"==typeof e||v(e)&&vi.call(e)==X}function Or(e){var t;if(!v(e)||vi.call(e)!=J||Er(e)||!hi.call(e,"constructor")&&"function"==typeof(t=e.constructor)&&!(t instanceof t))return!1;var n;return yt(e,function(e,t){n=t}),n===k||hi.call(e,n)}function Mr(e){return Ar(e)&&vi.call(e)==K}function Dr(e){return"string"==typeof e||v(e)&&vi.call(e)==Z}function Nr(e){return v(e)&&Hn(e.length)&&!!Ie[vi.call(e)]}function Rr(e,t){return e<t}function Ir(e){var t=e?to(e):0;return Hn(t)?t?Ge(e):[]:Br(e)}function Fr(e){return ut(e,Lr(e))}function Ur(e){return xt(e,Lr(e))}function Lr(e){if(null==e)return[];Ar(e)||(e=ai(e));var t=e.length;t=t&&Hn(t)&&(Bo(e)||Er(e))&&t||0;for(var n=e.constructor,r=-1,i="function"==typeof n&&n.prototype===e,o=ei(t),a=t>0;++r<t;)o[r]=r+"";for(var s in e)a&&Ln(s,t)||"constructor"==s&&(i||!hi.call(e,s))||o.push(s);return o}function Vr(e){e=er(e);for(var t=-1,n=ea(e),r=n.length,i=ei(r);++t<r;){var o=n[t];i[t]=[o,e[o]]}return i}function Br(e){return Bt(e,ea(e))}function zr(e){return(e=a(e))&&e.replace(Te,f).replace(Se,"")}function Hr(e,t){var n="";if(e=a(e),(t=+t)<1||!e||!Oi(t))return n;do{t%2&&(n+=e),t=ji(t/2),e+=e}while(t);return n}function Gr(e,t,n){var r=e;return(e=a(e))?(n?Vn(r,t,n):null==t)?e.slice(w(e),b(e)+1):(t+="",e.slice(s(e,t),u(e,t)+1)):e}function Wr(e,t,n){return n&&Vn(e,t,n)&&(t=k),(e=a(e)).match(t||De)||[]}function Qr(e,t,n){return n&&Vn(e,t,n)&&(t=k),v(e)?Xr(e):lt(e,t)}function Yr(e){return e}function Xr(e){return _t(ct(e,!0))}function Jr(e,t,n){if(null==n){var r=Ar(t),i=r?ea(t):k,o=i&&i.length?xt(t,i):k;(o?o.length:r)||(o=!1,n=t,t=e,e=this)}o||(o=xt(t,ea(t)));var a=!0,s=-1,u=Pr(e),l=o.length;!1===n?a=!1:Ar(n)&&"chain"in n&&(a=n.chain);for(;++s<l;){var c=o[s],f=t[c];e[c]=f,u&&(e.prototype[c]=function(t){return function(){var n=this.__chain__;if(a||n){var r=e(this.__wrapped__);return(r.__actions__=Ge(this.__actions__)).push({func:t,args:arguments,thisArg:e}),r.__chain__=n,r}return t.apply(e,et([this.value()],arguments))}}(f))}return e}function Kr(){}function Zr(e){return Bn(e)?Tt(e):Ot(e)}var ei=(e=e?Ze.defaults(Ke.Object(),e,Ze.pick(Ke,Ne)):Ke).Array,ti=e.Date,ni=e.Error,ri=e.Function,ii=e.Math,oi=e.Number,ai=e.Object,si=e.RegExp,ui=e.String,li=e.TypeError,ci=ei.prototype,fi=ai.prototype,di=ui.prototype,pi=ri.prototype.toString,hi=fi.hasOwnProperty,mi=0,vi=fi.toString,gi=Ke._,$i=si("^"+pi.call(hi).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),yi=e.ArrayBuffer,wi=e.clearTimeout,bi=e.parseFloat,xi=ii.pow,Ci=fi.propertyIsEnumerable,ki=Mn(e,"Set"),Si=e.setTimeout,Ei=ci.splice,qi=e.Uint8Array,_i=Mn(e,"WeakMap"),Pi=ii.ceil,Ai=Mn(ai,"create"),ji=ii.floor,Ti=Mn(ei,"isArray"),Oi=e.isFinite,Mi=Mn(ai,"keys"),Di=ii.max,Ni=ii.min,Ri=Mn(ti,"now"),Ii=e.parseInt,Fi=ii.random,Ui=oi.NEGATIVE_INFINITY,Li=oi.POSITIVE_INFINITY,Vi=4294967295,Bi=Vi-1,zi=Vi>>>1,Hi=9007199254740991,Gi=_i&&new _i,Wi={};t.support={};t.templateSettings={escape:ge,evaluate:$e,interpolate:ye,variable:"",imports:{_:t}};var Qi=function(){function e(){}return function(t){if(Ar(t)){e.prototype=t;var n=new e;e.prototype=k}return n||{}}}(),Yi=en(wt),Xi=en(bt,!0),Ji=tn(),Ki=tn(!0),Zi=Gi?function(e,t){return Gi.set(e,t),e}:Yr,eo=Gi?function(e){return Gi.get(e)}:Kr,to=Tt("length"),no=function(){var e=0,t=0;return function(n,r){var i=Po(),o=I-(i-t);if(t=i,o>0){if(++e>=R)return n}else e=0;return Zi(n,r)}}(),ro=kr(function(e,t){return v(e)&&Un(e)?dt(e,$t(t,!1,!0)):[]}),io=fn(),oo=fn(!0),ao=kr(function(e){for(var t=e.length,n=t,r=ei(f),o=Tn(),a=o==i,s=[];n--;){var u=e[n]=Un(u=e[n])?u:[];r[n]=a&&u.length>=120?rn(n&&u):null}var l=e[0],c=-1,f=l?l.length:0,d=r[0];e:for(;++c<f;)if(u=l[c],(d?ze(d,u):o(s,u,0))<0){for(n=t;--n;){var p=r[n];if((p?ze(p,u):o(e[n],u,0))<0)continue e}d&&d.push(u),s.push(u)}return s}),so=kr(function(e,t){var r=st(e,t=$t(t));return Mt(e,t.sort(n)),r}),uo=Sn(),lo=Sn(!0),co=kr(function(e){return Vt($t(e,!1,!0))}),fo=kr(function(e,t){return Un(e)?dt(e,t):[]}),po=kr(cr),ho=kr(function(e){var t=e.length,n=t>2?e[t-2]:k,r=t>1?e[t-1]:k;return t>2&&"function"==typeof n?t-=2:(n=t>1&&"function"==typeof r?(--t,r):k,r=k),e.length=t,fr(e,n,r)}),mo=kr(function(e){return e=$t(e),this.thru(function(t){return He(Bo(t)?t:[er(t)],e)})}),vo=kr(function(e,t){return st(e,$t(t))}),go=Kt(function(e,t,n){hi.call(e,n)?++e[n]:e[n]=1}),$o=cn(Yi),yo=cn(Xi,!0),wo=hn(We,Yi),bo=hn(function(e,t){for(var n=e.length;n--&&!1!==t(e[n],n,e););return e},Xi),xo=Kt(function(e,t,n){hi.call(e,n)?e[n].push(t):e[n]=[t]}),Co=Kt(function(e,t,n){e[n]=t}),ko=kr(function(e,t,n){var r=-1,i="function"==typeof t,o=Bn(t),a=Un(e)?ei(e.length):[];return Yi(e,function(e){var s=i?t:o&&null!=e?e[t]:k;a[++r]=s?s.apply(e,n):Fn(e,t,n)}),a}),So=Kt(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),Eo=wn(tt,Yi),qo=wn(function(e,t,n,r){var i=e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n},Xi),_o=kr(function(e,t){if(null==e)return[];var n=t[2];return n&&Vn(t[0],t[1],n)&&(t.length=1),Ut(e,$t(t),[])}),Po=Ri||function(){return(new ti).getTime()},Ao=kr(function(e,t,n){var r=E;if(n.length){var i=$(n,Ao.placeholder);r|=j}return En(e,r,t,n,i)}),jo=kr(function(e,t){for(var n=-1,r=(t=t.length?$t(t):Ur(e)).length;++n<r;){var i=t[n];e[i]=En(e[i],E,e)}return e}),To=kr(function(e,t,n){var r=E|q;if(n.length){var i=$(n,To.placeholder);r|=j}return En(t,r,e,n,i)}),Oo=sn(P),Mo=sn(A),Do=kr(function(e,t){return ft(e,1,t)}),No=kr(function(e,t,n){return ft(e,t,n)}),Ro=pn(),Io=pn(!0),Fo=kr(function(e,t){if(t=$t(t),"function"!=typeof e||!Qe(t,o))throw new li(V);var n=t.length;return kr(function(r){for(var i=Ni(r.length,n);i--;)r[i]=t[i](r[i]);return e.apply(this,r)})}),Uo=yn(j),Lo=yn(T),Vo=kr(function(e,t){return En(e,M,k,k,k,$t(t))}),Bo=Ti||function(e){return v(e)&&Hn(e.length)&&vi.call(e)==H},zo=Zt(At),Ho=Zt(function(e,t,n){return n?ot(e,t,n):at(e,t)}),Go=un(Ho,function(e,t){return e===k?t:e}),Wo=un(zo,Qn),Qo=dn(wt),Yo=dn(bt),Xo=mn(Ji),Jo=mn(Ki),Ko=vn(wt),Zo=vn(bt),ea=Mi?function(e){var t=null==e?k:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&Un(e)?Kn(e):Ar(e)?Mi(e):[]}:Kn,ta=gn(!0),na=gn(),ra=kr(function(e,t){if(null==e)return{};if("function"!=typeof t[0]){var t=Je($t(t),ui);return Yn(e,dt(Lr(e),t))}var n=Qt(t[0],t[1],3);return Xn(e,function(e,t,r){return!n(e,t,r)})}),ia=kr(function(e,t){return null==e?{}:"function"==typeof t[0]?Xn(e,Qt(t[0],t[1],3)):Yn(e,$t(t))}),oa=on(function(e,t,n){return t=t.toLowerCase(),e+(n?t.charAt(0).toUpperCase()+t.slice(1):t)}),aa=on(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),sa=$n(),ua=$n(!0),la=on(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),ca=on(function(e,t,n){return e+(n?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))}),fa=kr(function(e,t){try{return e.apply(k,t)}catch(e){return _r(e)?e:new ni(e)}}),da=kr(function(e,t){return function(n){return Fn(n,e,t)}}),pa=kr(function(e,t){return function(n){return Fn(e,n,t)}}),ha=kn("ceil"),ma=kn("floor"),va=ln(Sr,Ui),ga=ln(Rr,Li),$a=kn("round");return t.prototype=g.prototype,Ue.prototype=Qi(g.prototype),Ue.prototype.constructor=Ue,Le.prototype=Qi(g.prototype),Le.prototype.constructor=Le,Ve.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Ve.prototype.get=function(e){return"__proto__"==e?k:this.__data__[e]},Ve.prototype.has=function(e){return"__proto__"!=e&&hi.call(this.__data__,e)},Ve.prototype.set=function(e,t){return"__proto__"!=e&&(this.__data__[e]=t),this},Be.prototype.push=function(e){var t=this.data;"string"==typeof e||Ar(e)?t.set.add(e):t.hash[e]=!0},Cr.Cache=Ve,t.after=function(e,t){if("function"!=typeof t){if("function"!=typeof e)throw new li(V);var n=e;e=t,t=n}return e=Oi(e=+e)?e:0,function(){if(--e<1)return t.apply(this,arguments)}},t.ary=function(e,t,n){return n&&Vn(e,t,n)&&(t=k),t=e&&null==t?e.length:Di(+t||0,0),En(e,O,k,k,k,k,t)},t.assign=Ho,t.at=vo,t.before=br,t.bind=Ao,t.bindAll=jo,t.bindKey=To,t.callback=Qr,t.chain=pr,t.chunk=function(e,t,n){t=(n?Vn(e,t,n):null==t)?1:Di(ji(t)||1,1);for(var r=0,i=e?e.length:0,o=-1,a=ei(Pi(i/t));r<i;)a[++o]=Rt(e,r,r+=t);return a},t.compact=function(e){for(var t=-1,n=e?e.length:0,r=-1,i=[];++t<n;){var o=e[t];o&&(i[++r]=o)}return i},t.constant=function(e){return function(){return e}},t.countBy=go,t.create=function(e,t,n){var r=Qi(e);return n&&Vn(e,t,n)&&(t=k),t?at(r,t):r},t.curry=Oo,t.curryRight=Mo,t.debounce=xr,t.defaults=Go,t.defaultsDeep=Wo,t.defer=Do,t.delay=No,t.difference=ro,t.drop=rr,t.dropRight=ir,t.dropRightWhile=function(e,t,n){return e&&e.length?zt(e,An(t,n,3),!0,!0):[]},t.dropWhile=function(e,t,n){return e&&e.length?zt(e,An(t,n,3),!0):[]},t.fill=function(e,t,n,r){var i=e?e.length:0;return i?(n&&"number"!=typeof n&&Vn(e,t,n)&&(n=0,r=i),mt(e,t,n,r)):[]},t.filter=vr,t.flatten=function(e,t,n){var r=e?e.length:0;return n&&Vn(e,t,n)&&(t=!1),r?$t(e,t):[]},t.flattenDeep=function(e){return(e?e.length:0)?$t(e,!0):[]},t.flow=Ro,t.flowRight=Io,t.forEach=wo,t.forEachRight=bo,t.forIn=Xo,t.forInRight=Jo,t.forOwn=Ko,t.forOwnRight=Zo,t.functions=Ur,t.groupBy=xo,t.indexBy=Co,t.initial=function(e){return ir(e,1)},t.intersection=ao,t.invert=function(e,t,n){n&&Vn(e,t,n)&&(t=k);for(var r=-1,i=ea(e),o=i.length,a={};++r<o;){var s=i[r],u=e[s];t?hi.call(a,u)?a[u].push(s):a[u]=[s]:a[u]=s}return a},t.invoke=ko,t.keys=ea,t.keysIn=Lr,t.map=$r,t.mapKeys=ta,t.mapValues=na,t.matches=Xr,t.matchesProperty=function(e,t){return Pt(e,ct(t,!0))},t.memoize=Cr,t.merge=zo,t.method=da,t.methodOf=pa,t.mixin=Jr,t.modArgs=Fo,t.negate=function(e){if("function"!=typeof e)throw new li(V);return function(){return!e.apply(this,arguments)}},t.omit=ra,t.once=function(e){return br(2,e)},t.pairs=Vr,t.partial=Uo,t.partialRight=Lo,t.partition=So,t.pick=ia,t.pluck=function(e,t){return $r(e,Zr(t))},t.property=Zr,t.propertyOf=function(e){return function(t){return Ct(e,tr(t),t+"")}},t.pull=function(){var e=arguments,t=e[0];if(!t||!t.length)return t;for(var n=0,r=Tn(),i=e.length;++n<i;)for(var o=0,a=e[n];(o=r(t,a,o))>-1;)Ei.call(t,o,1);return t},t.pullAt=so,t.range=function(e,t,n){n&&Vn(e,t,n)&&(t=n=k),e=+e||0,n=null==n?1:+n||0,null==t?(t=e,e=0):t=+t||0;for(var r=-1,i=Di(Pi((t-e)/(n||1)),0),o=ei(i);++r<i;)o[r]=e,e+=n;return o},t.rearg=Vo,t.reject=function(e,t,n){var r=Bo(e)?Xe:vt;return t=An(t,n,3),r(e,function(e,n,r){return!t(e,n,r)})},t.remove=function(e,t,n){var r=[];if(!e||!e.length)return r;var i=-1,o=[],a=e.length;for(t=An(t,n,3);++i<a;){var s=e[i];t(s,i,e)&&(r.push(s),o.push(i))}return Mt(e,o),r},t.rest=ur,t.restParam=kr,t.set=function(e,t,n){if(null==e)return e;for(var r=t+"",i=-1,o=(t=null!=e[r]||Bn(t,e)?[r]:tr(t)).length,a=o-1,s=e;null!=s&&++i<o;){var u=t[i];Ar(s)&&(i==a?s[u]=n:null==s[u]&&(s[u]=Ln(t[i+1])?[]:{})),s=s[u]}return e},t.shuffle=function(e){return yr(e,Li)},t.slice=function(e,t,n){var r=e?e.length:0;return r?(n&&"number"!=typeof n&&Vn(e,t,n)&&(t=0,n=r),Rt(e,t,n)):[]},t.sortBy=function(e,t,n){if(null==e)return[];n&&Vn(e,t,n)&&(t=k);var r=-1;return t=An(t,n,3),Ft(qt(e,function(e,n,i){return{criteria:t(e,n,i),index:++r,value:e}}),l)},t.sortByAll=_o,t.sortByOrder=function(e,t,n,r){return null==e?[]:(r&&Vn(t,n,r)&&(n=k),Bo(t)||(t=null==t?[]:[t]),Bo(n)||(n=null==n?[]:[n]),Ut(e,t,n))},t.spread=function(e){if("function"!=typeof e)throw new li(V);return function(t){return e.apply(this,t)}},t.take=function(e,t,n){return(e?e.length:0)?((n?Vn(e,t,n):null==t)&&(t=1),Rt(e,0,t<0?0:t)):[]},t.takeRight=function(e,t,n){var r=e?e.length:0;return r?((n?Vn(e,t,n):null==t)&&(t=1),t=r-(+t||0),Rt(e,t<0?0:t)):[]},t.takeRightWhile=function(e,t,n){return e&&e.length?zt(e,An(t,n,3),!1,!0):[]},t.takeWhile=function(e,t,n){return e&&e.length?zt(e,An(t,n,3)):[]},t.tap=function(e,t,n){return t.call(n,e),e},t.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new li(V);return!1===n?r=!1:Ar(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),xr(e,t,{leading:r,maxWait:+t,trailing:i})},t.thru=hr,t.times=function(e,t,n){if((e=ji(e))<1||!Oi(e))return[];var r=-1,i=ei(Ni(e,Vi));for(t=Qt(t,n,1);++r<e;)r<Vi?i[r]=t(r):t(r);return i},t.toArray=Ir,t.toPlainObject=Fr,t.transform=function(e,t,n,r){var i=Bo(e)||Nr(e);if(t=An(t,r,4),null==n)if(i||Ar(e)){var o=e.constructor;n=i?Bo(e)?new o:[]:Qi(Pr(o)?o.prototype:k)}else n={};return(i?We:wt)(e,function(e,r,i){return t(n,e,r,i)}),n},t.union=co,t.uniq=lr,t.unzip=cr,t.unzipWith=fr,t.values=Br,t.valuesIn=function(e){return Bt(e,Lr(e))},t.where=function(e,t){return vr(e,_t(t))},t.without=fo,t.wrap=function(e,t){return t=null==t?Yr:t,En(t,j,k,[e],[])},t.xor=function(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(Un(n))var r=r?et(dt(r,n),dt(n,r)):n}return r?Vt(r):[]},t.zip=po,t.zipObject=dr,t.zipWith=ho,t.backflow=Io,t.collect=$r,t.compose=Io,t.each=wo,t.eachRight=bo,t.extend=Ho,t.iteratee=Qr,t.methods=Ur,t.object=dr,t.select=vr,t.tail=ur,t.unique=lr,Jr(t,t),t.add=function(e,t){return(+e||0)+(+t||0)},t.attempt=fa,t.camelCase=oa,t.capitalize=function(e){return(e=a(e))&&e.charAt(0).toUpperCase()+e.slice(1)},t.ceil=ha,t.clone=function(e,t,n,r){return t&&"boolean"!=typeof t&&Vn(e,t,n)?t=!1:"function"==typeof t&&(r=n,n=t,t=!1),"function"==typeof n?ct(e,t,Qt(n,r,1)):ct(e,t)},t.cloneDeep=function(e,t,n){return"function"==typeof t?ct(e,!0,Qt(t,n,1)):ct(e,!0)},t.deburr=zr,t.endsWith=function(e,t,n){t+="";var r=(e=a(e)).length;return n=n===k?r:Ni(n<0?0:+n||0,r),(n-=t.length)>=0&&e.indexOf(t,n)==n},t.escape=function(e){return(e=a(e))&&ve.test(e)?e.replace(he,d):e},t.escapeRegExp=function(e){return(e=a(e))&&ke.test(e)?e.replace(Ce,p):e||"(?:)"},t.every=mr,t.find=$o,t.findIndex=io,t.findKey=Qo,t.findLast=yo,t.findLastIndex=oo,t.findLastKey=Yo,t.findWhere=function(e,t){return $o(e,_t(t))},t.first=or,t.floor=ma,t.get=function(e,t,n){var r=null==e?k:Ct(e,tr(t),t+"");return r===k?n:r},t.gt=Sr,t.gte=function(e,t){return e>=t},t.has=function(e,t){if(null==e)return!1;var n=hi.call(e,t);if(!n&&!Bn(t)){if(t=tr(t),null==(e=1==t.length?e:Ct(e,Rt(t,0,-1))))return!1;t=sr(t),n=hi.call(e,t)}return n||Hn(e.length)&&Ln(t,e.length)&&(Bo(e)||Er(e))},t.identity=Yr,t.includes=gr,t.indexOf=ar,t.inRange=function(e,t,n){return t=+t||0,n===k?(n=t,t=0):n=+n||0,e>=Ni(t,n)&&e<Di(t,n)},t.isArguments=Er,t.isArray=Bo,t.isBoolean=function(e){return!0===e||!1===e||v(e)&&vi.call(e)==G},t.isDate=function(e){return v(e)&&vi.call(e)==W},t.isElement=function(e){return!!e&&1===e.nodeType&&v(e)&&!Or(e)},t.isEmpty=function(e){return null==e||(Un(e)&&(Bo(e)||Dr(e)||Er(e)||v(e)&&Pr(e.splice))?!e.length:!ea(e).length)},t.isEqual=qr,t.isError=_r,t.isFinite=function(e){return"number"==typeof e&&Oi(e)},t.isFunction=Pr,t.isMatch=function(e,t,n,r){return n="function"==typeof n?Qt(n,r,3):k,Et(e,On(t),n)},t.isNaN=function(e){return Tr(e)&&e!=+e},t.isNative=jr,t.isNull=function(e){return null===e},t.isNumber=Tr,t.isObject=Ar,t.isPlainObject=Or,t.isRegExp=Mr,t.isString=Dr,t.isTypedArray=Nr,t.isUndefined=function(e){return e===k},t.kebabCase=aa,t.last=sr,t.lastIndexOf=function(e,t,n){var r=e?e.length:0;if(!r)return-1;var i=r;if("number"==typeof n)i=(n<0?Di(r+n,0):Ni(n||0,r-1))+1;else if(n){var o=e[i=Gt(e,t,!0)-1];return(t==t?t===o:o!=o)?i:-1}if(t!=t)return m(e,i,!0);for(;i--;)if(e[i]===t)return i;return-1},t.lt=Rr,t.lte=function(e,t){return e<=t},t.max=va,t.min=ga,t.noConflict=function(){return Ke._=gi,this},t.noop=Kr,t.now=Po,t.pad=function(e,t,n){t=+t;var r=(e=a(e)).length;if(r>=t||!Oi(t))return e;var i=(t-r)/2,o=ji(i);return(n=xn("",Pi(i),n)).slice(0,o)+e+n},t.padLeft=sa,t.padRight=ua,t.parseInt=function(e,t,n){return(n?Vn(e,t,n):null==t)?t=0:t&&(t=+t),e=Gr(e),Ii(e,t||(Pe.test(e)?16:10))},t.random=function(e,t,n){n&&Vn(e,t,n)&&(t=n=k);var r=null==e,i=null==t;if(null==n&&(i&&"boolean"==typeof e?(n=e,e=1):"boolean"==typeof t&&(n=t,i=!0)),r&&i&&(t=1,i=!1),e=+e||0,i?(t=e,e=0):t=+t||0,n||e%1||t%1){var o=Fi();return Ni(e+o*(t-e+bi("1e-"+((o+"").length-1))),t)}return Dt(e,t)},t.reduce=Eo,t.reduceRight=qo,t.repeat=Hr,t.result=function(e,t,n){var r=null==e?k:e[t];return r===k&&(null==e||Bn(t,e)||(r=null==(e=1==(t=tr(t)).length?e:Ct(e,Rt(t,0,-1)))?k:e[sr(t)]),r=r===k?n:r),Pr(r)?r.call(e):r},t.round=$a,t.runInContext=C,t.size=function(e){var t=e?to(e):0;return Hn(t)?t:ea(e).length},t.snakeCase=la,t.some=wr,t.sortedIndex=uo,t.sortedLastIndex=lo,t.startCase=ca,t.startsWith=function(e,t,n){return e=a(e),n=null==n?0:Ni(n<0?0:+n||0,e.length),e.lastIndexOf(t,n)==n},t.sum=function(e,t,n){return n&&Vn(e,t,n)&&(t=k),1==(t=An(t,n,3)).length?rt(Bo(e)?e:Zn(e),t):Lt(e,t)},t.template=function(e,n,r){var i=t.templateSettings;r&&Vn(e,n,r)&&(n=r=k),e=a(e);var o,s,u=ot(at({},(n=ot(at({},r||n),i,it)).imports),i.imports,it),l=ea(u),c=Bt(u,l),f=0,d=n.interpolate||Oe,p="__p += '",m=si((n.escape||Oe).source+"|"+d.source+"|"+(d===ye?qe:Oe).source+"|"+(n.evaluate||Oe).source+"|$","g"),v="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++Re+"]")+"\n";e.replace(m,function(t,n,r,i,a,u){return r||(r=i),p+=e.slice(f,u).replace(Me,h),n&&(o=!0,p+="' +\n__e("+n+") +\n'"),a&&(s=!0,p+="';\n"+a+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),f=u+t.length,t}),p+="';\n";var g=n.variable;g||(p="with (obj) {\n"+p+"\n}\n"),p=(s?p.replace(ce,""):p).replace(fe,"$1").replace(de,"$1;"),p="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var $=fa(function(){return ri(l,v+"return "+p).apply(k,c)});if($.source=p,_r($))throw $;return $},t.trim=Gr,t.trimLeft=function(e,t,n){var r=e;return(e=a(e))?(n?Vn(r,t,n):null==t)?e.slice(w(e)):e.slice(s(e,t+"")):e},t.trimRight=function(e,t,n){var r=e;return(e=a(e))?(n?Vn(r,t,n):null==t)?e.slice(0,b(e)+1):e.slice(0,u(e,t+"")+1):e},t.trunc=function(e,t,n){n&&Vn(e,t,n)&&(t=k);var r=D,i=N;if(null!=t)if(Ar(t)){var o="separator"in t?t.separator:o;r="length"in t?+t.length||0:r,i="omission"in t?a(t.omission):i}else r=+t||0;if(e=a(e),r>=e.length)return e;var s=r-i.length;if(s<1)return i;var u=e.slice(0,s);if(null==o)return u+i;if(Mr(o)){if(e.slice(s).search(o)){var l,c,f=e.slice(0,s);for(o.global||(o=si(o.source,(_e.exec(o)||"")+"g")),o.lastIndex=0;l=o.exec(f);)c=l.index;u=u.slice(0,null==c?s:c)}}else if(e.indexOf(o,s)!=s){var d=u.lastIndexOf(o);d>-1&&(u=u.slice(0,d))}return u+i},t.unescape=function(e){return(e=a(e))&&me.test(e)?e.replace(pe,x):e},t.uniqueId=function(e){var t=++mi;return a(e)+t},t.words=Wr,t.all=mr,t.any=wr,t.contains=gr,t.eq=qr,t.detect=$o,t.foldl=Eo,t.foldr=qo,t.head=or,t.include=gr,t.inject=Eo,Jr(t,function(){var e={};return wt(t,function(n,r){t.prototype[r]||(e[r]=n)}),e}(),!1),t.sample=yr,t.prototype.sample=function(e){return this.__chain__||null!=e?this.thru(function(t){return yr(t,e)}):yr(this.value())},t.VERSION=S,We(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){t[e].placeholder=t}),We(["drop","take"],function(e,t){Le.prototype[e]=function(n){var r=this.__filtered__;if(r&&!t)return new Le(this);n=null==n?1:Di(ji(n)||0,0);var i=this.clone();return r?i.__takeCount__=Ni(i.__takeCount__,n):i.__views__.push({size:n,type:e+(i.__dir__<0?"Right":"")}),i},Le.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),We(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n!=L;Le.prototype[e]=function(e,t){var i=this.clone();return i.__iteratees__.push({iteratee:An(e,t,1),type:n}),i.__filtered__=i.__filtered__||r,i}}),We(["first","last"],function(e,t){var n="take"+(t?"Right":"");Le.prototype[e]=function(){return this[n](1).value()[0]}}),We(["initial","rest"],function(e,t){var n="drop"+(t?"":"Right");Le.prototype[e]=function(){return this.__filtered__?new Le(this):this[n](1)}}),We(["pluck","where"],function(e,t){var n=t?"filter":"map",r=t?_t:Zr;Le.prototype[e]=function(e){return this[n](r(e))}}),Le.prototype.compact=function(){return this.filter(Yr)},Le.prototype.reject=function(e,t){return e=An(e,t,1),this.filter(function(t){return!e(t)})},Le.prototype.slice=function(e,t){e=null==e?0:+e||0;var n=this;return n.__filtered__&&(e>0||t<0)?new Le(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==k&&(n=(t=+t||0)<0?n.dropRight(-t):n.take(t-e)),n)},Le.prototype.takeRightWhile=function(e,t){return this.reverse().takeWhile(e,t).reverse()},Le.prototype.toArray=function(){return this.take(Li)},wt(Le.prototype,function(e,n){var r=/^(?:filter|map|reject)|While$/.test(n),i=/^(?:first|last)$/.test(n),o=t[i?"take"+("last"==n?"Right":""):n];o&&(t.prototype[n]=function(){var t=i?[1]:arguments,n=this.__chain__,a=this.__wrapped__,s=!!this.__actions__.length,u=a instanceof Le,l=t[0],c=u||Bo(a);c&&r&&"function"==typeof l&&1!=l.length&&(u=c=!1);var f=function(e){return i&&n?o(e,1)[0]:o.apply(k,et([e],t))},d={func:hr,args:[f],thisArg:k},p=u&&!s;if(i&&!n)return p?((a=a.clone()).__actions__.push(d),e.call(a)):o.call(k,this.value())[0];if(!i&&c){a=p?a:new Le(this);var h=e.apply(a,t);return h.__actions__.push(d),new Ue(h,n)}return this.thru(f)})}),We(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(e){var n=(/^(?:replace|split)$/.test(e)?di:ci)[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:join|pop|replace|shift)$/.test(e);t.prototype[e]=function(){var e=arguments;return i&&!this.__chain__?n.apply(this.value(),e):this[r](function(t){return n.apply(t,e)})}}),wt(Le.prototype,function(e,n){var r=t[n];if(r){var i=r.name;(Wi[i]||(Wi[i]=[])).push({name:n,func:r})}}),Wi[bn(k,q).name]=[{name:"wrapper",func:k}],Le.prototype.clone=function(){var e=new Le(this.__wrapped__);return e.__actions__=Ge(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ge(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ge(this.__views__),e},Le.prototype.reverse=function(){if(this.__filtered__){var e=new Le(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Le.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Bo(e),r=t<0,i=n?e.length:0,o=Dn(0,i,this.__views__),a=o.start,s=o.end,u=s-a,l=r?s:a-1,c=this.__iteratees__,f=c.length,d=0,p=Ni(u,this.__takeCount__);if(!n||i<F||i==u&&p==u)return Ht(r&&n?e.reverse():e,this.__actions__);var h=[];e:for(;u--&&d<p;){for(var m=-1,v=e[l+=t];++m<f;){var g=c[m],$=g.iteratee,y=g.type,w=$(v);if(y==L)v=w;else if(!w){if(y==U)continue e;break e}}h[d++]=v}return h},t.prototype.chain=function(){return pr(this)},t.prototype.commit=function(){return new Ue(this.value(),this.__chain__)},t.prototype.concat=mo,t.prototype.plant=function(e){for(var t,n=this;n instanceof g;){var r=nr(n);t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t},t.prototype.reverse=function(){var e=this.__wrapped__,t=function(e){return n&&n.__dir__<0?e:e.reverse()};if(e instanceof Le){var n=e;return this.__actions__.length&&(n=new Le(this)),(n=n.reverse()).__actions__.push({func:hr,args:[t],thisArg:k}),new Ue(n,this.__chain__)}return this.thru(t)},t.prototype.toString=function(){return this.value()+""},t.prototype.run=t.prototype.toJSON=t.prototype.valueOf=t.prototype.value=function(){return Ht(this.__wrapped__,this.__actions__)},t.prototype.collect=t.prototype.map,t.prototype.head=t.prototype.first,t.prototype.select=t.prototype.filter,t.prototype.tail=t.prototype.rest,t}var k,S="3.10.1",E=1,q=2,_=4,P=8,A=16,j=32,T=64,O=128,M=256,D=30,N="...",R=150,I=16,F=200,U=1,L=2,V="Expected a function",B="__lodash_placeholder__",z="[object Arguments]",H="[object Array]",G="[object Boolean]",W="[object Date]",Q="[object Error]",Y="[object Function]",X="[object Number]",J="[object Object]",K="[object RegExp]",Z="[object String]",ee="[object ArrayBuffer]",te="[object Float32Array]",ne="[object Float64Array]",re="[object Int8Array]",ie="[object Int16Array]",oe="[object Int32Array]",ae="[object Uint8Array]",se="[object Uint8ClampedArray]",ue="[object Uint16Array]",le="[object Uint32Array]",ce=/\b__p \+= '';/g,fe=/\b(__p \+=) '' \+/g,de=/(__e\(.*?\)|\b__t\)) \+\n'';/g,pe=/&(?:amp|lt|gt|quot|#39|#96);/g,he=/[&<>"'`]/g,me=RegExp(pe.source),ve=RegExp(he.source),ge=/<%-([\s\S]+?)%>/g,$e=/<%([\s\S]+?)%>/g,ye=/<%=([\s\S]+?)%>/g,we=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,be=/^\w*$/,xe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,Ce=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,ke=RegExp(Ce.source),Se=/[\u0300-\u036f\ufe20-\ufe23]/g,Ee=/\\(\\)?/g,qe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,_e=/\w*$/,Pe=/^0[xX]/,Ae=/^\[object .+?Constructor\]$/,je=/^\d+$/,Te=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Oe=/($^)/,Me=/['\n\r\u2028\u2029\\]/g,De=function(){var e="[A-Z\\xc0-\\xd6\\xd8-\\xde]",t="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(e+"+(?="+e+t+")|"+e+"?"+t+"|"+e+"+|[0-9]+","g")}(),Ne=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],Re=-1,Ie={};Ie[te]=Ie[ne]=Ie[re]=Ie[ie]=Ie[oe]=Ie[ae]=Ie[se]=Ie[ue]=Ie[le]=!0,Ie[z]=Ie[H]=Ie[ee]=Ie[G]=Ie[W]=Ie[Q]=Ie[Y]=Ie["[object Map]"]=Ie[X]=Ie[J]=Ie[K]=Ie["[object Set]"]=Ie[Z]=Ie["[object WeakMap]"]=!1;var Fe={};Fe[z]=Fe[H]=Fe[ee]=Fe[G]=Fe[W]=Fe[te]=Fe[ne]=Fe[re]=Fe[ie]=Fe[oe]=Fe[X]=Fe[J]=Fe[K]=Fe[Z]=Fe[ae]=Fe[se]=Fe[ue]=Fe[le]=!0,Fe[Q]=Fe[Y]=Fe["[object Map]"]=Fe["[object Set]"]=Fe["[object WeakMap]"]=!1;var Ue={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},Le={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Ve={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Be={function:!0,object:!0},ze={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},He={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ge=Be.object&&t&&!t.nodeType&&t,We=Be.object&&e&&!e.nodeType&&e,Qe=Ge&&We&&"object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object&&commonjsGlobal,Ye=Be[typeof self]&&self&&self.Object&&self,Xe=Be[typeof window]&&window&&window.Object&&window,Je=We&&We.exports===Ge&&Ge,Ke=Qe||Xe!==(this&&this.window)&&Xe||Ye||this,Ze=C();"function"==typeof k&&"object"==typeof k.amd&&k.amd?Ke._=Ze:Ge&&We?Je?(We.exports=Ze)._=Ze:Ge._=Ze:Ke._=Ze}).call(commonjsGlobal)});window.piGlobal||(window.piGlobal={});var global$1=window.piGlobal,PROGRESS_BAR=['<div class="row" style="opacity:0.4;">','<div class="hidden-xs col-sm-3 text-right" style="font-weight:bold;">Progress:&nbsp;</div>','<div class="col-xs-12 col-sm-7">','<div class="progress">','<div class="progress-bar" style="width: <%= 100 * tasksMeta.number / tasksMeta.outOf %>%;"></div>',"</div>","</div>","</div>"].join("\n"),manager=APIconstructor({type:"manager",sets:["tasks"],static:{PROGRESS_BAR:PROGRESS_BAR}}),api$1=APIconstructor({type:"PIP",sets:["trial","stimulus","media"]});api$1.prototype.addTrialSets=api$1.prototype.addTrialSet,api$1.prototype.addStimulusSets=api$1.prototype.addStimulusSet,api$1.prototype.addMediaSets=api$1.prototype.addMediaSet,api$1.prototype.getLogs=function(){return this.script.current.logs};var quest=APIconstructor({type:"quest",sets:["pages","questions"]}),requirejs$1,require,define;!function(global,setTimeout){function commentReplace(e,t){return t||""}function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1&&(!e[n]||!t(e[n],n,e));n-=1);}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,r){return t&&eachProp(t,function(t,i){!n&&hasProp(e,i)||(!r||"object"!=typeof t||!t||isArray(t)||isFunction(t)||t instanceof RegExp?e[i]=t:(e[i]||(e[i]={}),mixin(e[i],t,n,r)))}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,r){var i=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return i.requireType=e,i.requireModules=r,n&&(i.originalError=n),i}function newContext(e){function t(e){var t,n;for(t=0;t<e.length;t++)if("."===(n=e[t]))e.splice(t,1),t-=1;else if(".."===n){if(0===t||1===t&&".."===e[2]||".."===e[t-1])continue;t>0&&(e.splice(t-1,2),t-=2)}}function n(e,n,r){var i,o,a,s,u,l,c,f,d,p,h=n&&n.split("/"),m=C.map,v=m&&m["*"];if(e&&(l=(e=e.split("/")).length-1,C.nodeIdCompat&&jsSuffixRegExp.test(e[l])&&(e[l]=e[l].replace(jsSuffixRegExp,"")),"."===e[0].charAt(0)&&h&&(e=h.slice(0,h.length-1).concat(e)),t(e),e=e.join("/")),r&&m&&(h||v)){e:for(a=(o=e.split("/")).length;a>0;a-=1){if(u=o.slice(0,a).join("/"),h)for(s=h.length;s>0;s-=1)if((i=getOwn(m,h.slice(0,s).join("/")))&&(i=getOwn(i,u))){c=i,f=a;break e}!d&&v&&getOwn(v,u)&&(d=getOwn(v,u),p=a)}!c&&d&&(c=d,f=p),c&&(o.splice(0,f,c),e=o.join("/"))}return getOwn(C.pkgs,e)||e}function r(e){isBrowser&&each(scripts(),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===w.contextName)return t.parentNode.removeChild(t),!0})}function i(e){var t=getOwn(C.paths,e);if(t&&isArray(t)&&t.length>1)return t.shift(),w.require.undef(e),w.makeRequire(null,{skipMap:!0})([e]),!0}function o(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function a(e,t,r,i){var a,s,u,l,c=null,f=t?t.name:null,d=e,p=!0,h="";return e||(p=!1,e="_@r"+(j+=1)),l=o(e),c=l[0],e=l[1],c&&(c=n(c,f,i),s=getOwn(_,c)),e&&(c?h=r?e:s&&s.normalize?s.normalize(e,function(e){return n(e,f,i)}):-1===e.indexOf("!")?n(e,f,i):e:(c=(l=o(h=n(e,f,i)))[0],h=l[1],r=!0,a=w.nameToUrl(h))),u=!c||s||r?"":"_unnormalized"+(T+=1),{prefix:c,name:h,parentMap:t,unnormalized:!!u,url:a,originalName:d,isDefine:p,id:(c?c+"!"+h:h)+u}}function s(e){var t=e.id,n=getOwn(k,t);return n||(n=k[t]=new w.Module(e)),n}function u(e,t,n){var r=e.id,i=getOwn(k,r);!hasProp(_,r)||i&&!i.defineEmitComplete?(i=s(e)).error&&"error"===t?n(i.error):i.on(t,n):"defined"===t&&n(_[r])}function l(e,t){var n=e.requireModules,r=!1;t?t(e):(each(n,function(t){var n=getOwn(k,t);n&&(n.error=e,n.events.error&&(r=!0,n.emit("error",e)))}),r||req.onError(e))}function c(){globalDefQueue.length&&(each(globalDefQueue,function(e){var t=e[0];"string"==typeof t&&(w.defQueueMap[t]=!0),q.push(e)}),globalDefQueue=[])}function f(e){delete k[e],delete S[e]}function d(e,t,n){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,each(e.depMaps,function(r,i){var o=r.id,a=getOwn(k,o);!a||e.depMatched[i]||n[o]||(getOwn(t,o)?(e.defineDep(i,_[o]),e.check()):d(a,t,n))}),n[r]=!0)}function p(){var e,t,n=1e3*C.waitSeconds,o=n&&w.startTime+n<(new Date).getTime(),a=[],s=[],u=!1,c=!0;if(!$){if($=!0,eachProp(S,function(e){var n=e.map,l=n.id;if(e.enabled&&(n.isDefine||s.push(e),!e.error))if(!e.inited&&o)i(l)?(t=!0,u=!0):(a.push(l),r(l));else if(!e.inited&&e.fetched&&n.isDefine&&(u=!0,!n.prefix))return c=!1}),o&&a.length)return e=makeError("timeout","Load timeout for modules: "+a,null,a),e.contextName=w.contextName,l(e);c&&each(s,function(e){d(e,{},{})}),o&&!t||!u||!isBrowser&&!isWebWorker||x||(x=setTimeout(function(){x=0,p()},50)),$=!1}}function h(e){hasProp(_,e[0])||s(a(e[0],null,!0)).init(e[1],e[2])}function m(e,t,n,r){e.detachEvent&&!isOpera?r&&e.detachEvent(r,t):e.removeEventListener(n,t,!1)}function v(e){var t=e.currentTarget||e.srcElement;return m(t,w.onScriptLoad,"load","onreadystatechange"),m(t,w.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function g(){var e;for(c();q.length;){if(null===(e=q.shift())[0])return l(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));h(e)}w.defQueueMap={}}var $,y,w,b,x,C={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},k={},S={},E={},q=[],_={},P={},A={},j=1,T=1;return b={require:function(e){return e.require?e.require:e.require=w.makeRequire(e.map)},exports:function(e){if(e.usingExports=!0,e.map.isDefine)return e.exports?_[e.map.id]=e.exports:e.exports=_[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(C.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},y=function(e){this.events=getOwn(E,e.id)||{},this.map=e,this.shim=getOwn(C.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},y.prototype={init:function(e,t,n,r){r=r||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,w.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();w.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;P[e]||(P[e]=!0,w.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id,r=this.depExports,i=this.exports,o=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{i=w.execCb(n,o,r,i)}catch(t){e=t}else i=w.execCb(n,o,r,i);if(this.map.isDefine&&void 0===i&&((t=this.module)?i=t.exports:this.usingExports&&(i=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",l(this.error=e)}else i=o;if(this.exports=i,this.map.isDefine&&!this.ignore&&(_[n]=i,req.onResourceLoad)){var a=[];each(this.depMaps,function(e){a.push(e.normalizedMap||e)}),req.onResourceLoad(w,this.map,a)}f(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(w.defQueueMap,n)||this.fetch()}},callPlugin:function(){var e=this.map,t=e.id,r=a(e.prefix);this.depMaps.push(r),u(r,"defined",bind(this,function(r){var i,o,c,d=getOwn(A,this.map.id),p=this.map.name,h=this.map.parentMap?this.map.parentMap.name:null,m=w.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(r.normalize&&(p=r.normalize(p,function(e){return n(e,h,!0)})||""),o=a(e.prefix+"!"+p,this.map.parentMap,!0),u(o,"defined",bind(this,function(e){this.map.normalizedMap=o,this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),void((c=getOwn(k,o.id))&&(this.depMaps.push(o),this.events.error&&c.on("error",bind(this,function(e){this.emit("error",e)})),c.enable()))):d?(this.map.url=w.nameToUrl(d),void this.load()):((i=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})})).error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(k,function(e){0===e.map.id.indexOf(t+"_unnormalized")&&f(e.map.id)}),l(e)}),i.fromText=bind(this,function(n,r){var o=e.name,u=a(o),c=useInteractive;r&&(n=r),c&&(useInteractive=!1),s(u),hasProp(C.config,t)&&(C.config[o]=C.config[t]);try{req.exec(n)}catch(e){return l(makeError("fromtexteval","fromText eval for "+t+" failed: "+e,e,[t]))}c&&(useInteractive=!0),this.depMaps.push(u),w.completeLoad(o),m([o],i)}),void r.load(e.name,m,i,C))})),w.enable(r,this),this.pluginMaps[r.id]=r},enable:function(){S[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,r,i;if("string"==typeof e){if(e=a(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,i=getOwn(b,e.id))return void(this.depExports[t]=i(this));this.depCount+=1,u(e,"defined",bind(this,function(e){this.undefed||(this.defineDep(t,e),this.check())})),this.errback?u(e,"error",bind(this,this.errback)):this.events.error&&u(e,"error",bind(this,function(e){this.emit("error",e)}))}n=e.id,r=k[n],hasProp(b,n)||!r||r.enabled||w.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(k,e.id);t&&!t.enabled&&w.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},w={config:C,contextName:e,registry:k,defined:_,urlFetched:P,defQueue:q,defQueueMap:{},Module:y,makeModuleMap:a,nextTick:req.nextTick,onError:l,configure:function(e){if(e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/"),"string"==typeof e.urlArgs){var t=e.urlArgs;e.urlArgs=function(e,n){return(-1===n.indexOf("?")?"?":"&")+t}}var n=C.shim,r={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){r[t]?(C[t]||(C[t]={}),mixin(C[t],e,!0,!0)):C[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(A[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=w.makeShimExports(e)),n[t]=e}),C.shim=n),e.packages&&each(e.packages,function(e){var t;t=(e="string"==typeof e?{name:e}:e).name,e.location&&(C.paths[t]=e.location),C.pkgs[t]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(k,function(e,t){e.inited||e.map.unnormalized||(e.map=a(t,null,!0))}),(e.deps||e.callback)&&w.require(e.deps||[],e.callback)},makeShimExports:function(e){return function(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}},makeRequire:function(t,i){function o(n,r,u){var c,f,d;return i.enableBuildCallback&&r&&isFunction(r)&&(r.__requireJsBuild=!0),"string"==typeof n?isFunction(r)?l(makeError("requireargs","Invalid require call"),u):t&&hasProp(b,n)?b[n](k[t.id]):req.get?req.get(w,n,t,o):(f=a(n,t,!1,!0),c=f.id,hasProp(_,c)?_[c]:l(makeError("notloaded",'Module name "'+c+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(g(),w.nextTick(function(){g(),(d=s(a(null,t))).skipMap=i.skipMap,d.init(n,r,u,{enabled:!0}),p()}),o)}return i=i||{},mixin(o,{isBrowser:isBrowser,toUrl:function(e){var r,i=e.lastIndexOf("."),o=e.split("/")[0];return-1!==i&&(!("."===o||".."===o)||i>1)&&(r=e.substring(i,e.length),e=e.substring(0,i)),w.nameToUrl(n(e,t&&t.id,!0),r,!0)},defined:function(e){return hasProp(_,a(e,t,!1,!0).id)},specified:function(e){return e=a(e,t,!1,!0).id,hasProp(_,e)||hasProp(k,e)}}),t||(o.undef=function(e){c();var n=a(e,t,!0),i=getOwn(k,e);i.undefed=!0,r(e),delete _[e],delete P[n.url],delete E[e],eachReverse(q,function(t,n){t[0]===e&&q.splice(n,1)}),delete w.defQueueMap[e],i&&(i.events.defined&&(E[e]=i.events),f(e))}),o},enable:function(e){getOwn(k,e.id)&&s(e).enable()},completeLoad:function(e){var t,n,r,o=getOwn(C.shim,e)||{},a=o.exports;for(c();q.length;){if(null===(n=q.shift())[0]){if(n[0]=e,t)break;t=!0}else n[0]===e&&(t=!0);h(n)}if(w.defQueueMap={},r=getOwn(k,e),!t&&!hasProp(_,e)&&r&&!r.inited){if(!(!C.enforceDefine||a&&getGlobal(a)))return i(e)?void 0:l(makeError("nodefine","No define call for "+e,null,[e]));h([e,o.deps||[],o.exportsFn])}p()},nameToUrl:function(e,t,n){var r,i,o,a,s,u,l,c=getOwn(C.pkgs,e);if(c&&(e=c),l=getOwn(A,e))return w.nameToUrl(l,t,n);if(req.jsExtRegExp.test(e))s=e+(t||"");else{for(r=C.paths,o=(i=e.split("/")).length;o>0;o-=1)if(a=i.slice(0,o).join("/"),u=getOwn(r,a)){isArray(u)&&(u=u[0]),i.splice(0,o,u);break}s=i.join("/"),s=("/"===(s+=t||(/^data\:|^blob\:|\?/.test(s)||n?"":".js")).charAt(0)||s.match(/^[\w\+\.\-]+:/)?"":C.baseUrl)+s}return C.urlArgs&&!/^blob\:/.test(s)?s+C.urlArgs(e,s):s},load:function(e,t){req.load(w,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=v(e);w.completeLoad(t.id)}},onScriptError:function(e){var t=v(e);if(!i(t.id)){var n=[];return eachProp(k,function(e,r){0!==r.indexOf("_@r")&&each(e.depMaps,function(e){if(e.id===t.id)return n.push(r),!0})}),l(makeError("scripterror",'Script error for "'+t.id+(n.length?'", needed by: '+n.join(", "):'"'),e,[t.id]))}}},w.require=w.makeRequire(),w}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){if("interactive"===e.readyState)return interactiveScript=e}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.3.5",commentRegExp=/\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if(void 0===define){if(void 0!==requirejs$1){if(isFunction(requirejs$1))return;cfg=requirejs$1,requirejs$1=void 0}void 0===require||isFunction(require)||(cfg=require,require=void 0),req=requirejs$1=function(e,t,n,r){var i,o,a=defContextName;return isArray(e)||"string"==typeof e||(o=e,isArray(t)?(e=t,t=n,n=r):e=[]),o&&o.context&&(a=o.context),(i=getOwn(contexts,a))||(i=contexts[a]=req.s.newContext(a)),o&&i.configure(o),i.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick=void 0!==setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],(baseElement=document.getElementsByTagName("base")[0])&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,n){var r=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return r.type=e.scriptType||"text/javascript",r.charset="utf-8",r.async=!0,r},req.load=function(e,t,n){var r,i=e&&e.config||{};if(isBrowser)return(r=req.createNode(i,t,n)).setAttribute("data-requirecontext",e.contextName),r.setAttribute("data-requiremodule",t),!r.attachEvent||r.attachEvent.toString&&r.attachEvent.toString().indexOf("[native code")<0||isOpera?(r.addEventListener("load",e.onScriptLoad,!1),r.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,r.attachEvent("onreadystatechange",e.onScriptLoad)),r.src=n,i.onNodeCreated&&i.onNodeCreated(r,i,t,n),currentlyAddingScript=r,baseElement?head.insertBefore(r,baseElement):head.appendChild(r),currentlyAddingScript=null,r;if(isWebWorker)try{setTimeout(function(){},0),importScripts(n),e.completeLoad(t)}catch(r){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,r,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){if(head||(head=e.parentNode),dataMain=e.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||-1!==mainScript.indexOf("!")||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(e,t,n){var r,i;"string"!=typeof e&&(n=t,t=e,e=null),isArray(t)||(n=t,t=null),!t&&isFunction(n)&&(t=[],n.length&&(n.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(r=currentlyAddingScript||getInteractiveScript())&&(e||(e=r.getAttribute("data-requiremodule")),i=contexts[r.getAttribute("data-requirecontext")]),i?(i.defQueue.push([e,t,n]),i.defQueueMap[e]=!0):globalDefQueue.push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(void 0,"undefined"==typeof setTimeout?void 0:setTimeout),loggerProvider.$inject=["$http","$q","piConsole","$rootScope"];var Logger=function(){this.$get=loggerProvider,this.settings={},this.meta={},this.logCounter=0};consoleProvider.$inject=["piConsolePrototype"];var LOGFUNCTIONS=["log","info","warn","error","debug"],LEVELS={none:9,error:1,warn:2,info:3,log:4,debug:4};consolePrototypeProvider.$inject=["$log","$rootScope"];var template='<div>\n\t<div\n\t\tng-repeat="log in logs | orderBy:\'time\':true"\n\t\tclass="alert"\n\t\tng-class="{\n\t\t\t\'alert-warning\':log.type == \'warn\',\n\t\t\t\'alert-danger\':log.type == \'error\',\n\t\t\t\'alert-info\':log.type == \'info\',\n\t\t\t\'alert-success\':log.type == \'log\',\n\t\t\t\'alert-success\':log.type == \'debug\'\n\n\t\t}"\n\t\trole="alert"\n\t>\n\t\t<button ng-click="remove(log)" type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>\n\t\t<strong>{{ log.type | uppercase}}:</strong> <i class="text-danger">{{log.time | date : \'HH:mm:ss:sss\'}}</i> - <strong>{{log.tags.join(\' \')}}</strong>:</br>\n\t\t<span\n\t\t\tng-repeat="arg in log.args track by $index"\n\t\t\tng-click="pre = !pre"\n\t\t\tng-class="{pre:pre}"\n\t\t\tng-bind-html="arg | stringify:pre"\n\t\t></span>\n\n\t</div>\n</div>';directive.$inject=["$rootScope"];var module$4=angular.module("piConsole",[]);module$4.service("piConsole",consoleProvider),module$4.service("piConsolePrototype",consolePrototypeProvider),module$4.directive("piConsole",directive),module$4.filter("stringify",function(){return stringify});var module$3=angular.module("logger",[module$4.name]);module$3.provider("Logger",Logger);var module$7=angular.module("randomize",[]);module$7.value("randomizeRandom",Math.random),module$7.value("randomizeShuffle",lodash.shuffle),module$7.value("randomizeInt",function(e){return Math.floor(Math.random()*e)}),module$7.value("randomizeRange",function(e){return lodash.shuffle(lodash.range(e))}),mixProvider.$inject=["randomizeShuffle","randomizeRandom"],mixerSequentialProvider.$inject=["mixer"],mixerRecursiveProvider.$inject=["mixer"],mixerSequenceProvider$1.$inject=["mixer"],mixerDotNotationProvider$1.$inject=["dotNotation"],mixerConditionProvider$1.$inject=["mixerDotNotation"],mixerBranchingDecorator$1.$inject=["$delegate","mixerEvaluate","mixerDefaultContext"],evaluateProvider.$inject=["mixerCondition"];var module$6=angular.module("mixer",[module$7.name]);module$6.service("mixer",mixProvider),module$6.service("mixerSequential",mixerSequentialProvider),module$6.service("mixerRecursive",mixerRecursiveProvider),module$6.service("MixerSequence",mixerSequenceProvider$1),module$6.value("dotNotation",dotNotation$1),module$6.service("mixerDotNotation",mixerDotNotationProvider$1),module$6.service("mixerCondition",mixerConditionProvider$1),module$6.service("mixerEvaluate",evaluateProvider),module$6.config(["$provide",function(e){e.decorator("mixer",mixerBranchingDecorator$1)}]),module$6.constant("mixerDefaultContext",{}),templateFilter$1.$inject=["$log","templateDefaultContext"],templateObjProvider$1.$inject=["templateDefaultContext"];var module$8=angular.module("template",[]);module$8.filter("template",templateFilter$1),module$8.service("templateObj",templateObjProvider$1),module$8.constant("templateDefaultContext",{});var LOGFUNCTIONS$1=["log","info","warn","error","debug"],LEVELS$1={none:9,error:1,warn:2,info:3,log:4,debug:4};consolePrototypeProvider$3.$inject=["$log","$rootScope"],consoleProvider$3.$inject=["piConsolePrototype"];var template$1='<div>\n\t<div\n\t\tng-repeat="log in logs | orderBy:\'time\':true"\n\t\tclass="alert"\n\t\tng-class="{\n\t\t\t\'alert-warning\':log.type == \'warn\',\n\t\t\t\'alert-danger\':log.type == \'error\',\n\t\t\t\'alert-info\':log.type == \'info\',\n\t\t\t\'alert-success\':log.type == \'log\',\n\t\t\t\'alert-success\':log.type == \'debug\'\n\n\t\t}"\n\t\trole="alert"\n\t>\n\t\t<button ng-click="remove(log)" type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>\n\t\t<strong>{{ log.type | uppercase}}:</strong> <i class="text-danger">{{log.time | date : \'HH:mm:ss:sss\'}}</i> - <strong>{{log.tags.join(\' \')}}</strong>:</br>\n\t\t<span\n\t\t\tng-repeat="arg in log.args track by $index"\n\t\t\tng-click="pre = !pre"\n\t\t\tng-class="{pre:pre}"\n\t\t\tng-bind-html="arg | stringify:pre"\n\t\t></span>\n\n\t</div>\n</div>';directive$1.$inject=["$rootScope"];var module$9=angular.module("piConsole",[]);module$9.service("piConsole",consoleProvider$3),module$9.service("piConsolePrototype",consolePrototypeProvider$3),module$9.directive("piConsole",directive$1),module$9.filter("stringify",function(){return stringify$1}),RandomizerProvider.$inject=["randomizeInt","randomizeRange","Collection"],inflateProvider$1.$inject=["databaseQuery","$rootScope"],queryProvider$1.$inject=["Collection"],DatabaseProvider.$inject=["DatabaseStore","DatabaseRandomizer","databaseInflate","templateObj","databaseSequence"],storeProvider$1.$inject=["Collection"],SequenceProvider.$inject=["MixerSequence"];var module$5=angular.module("database",[module$6.name,module$8.name,module$9.name]).service("Collection",collectionService).service("DatabaseRandomizer",RandomizerProvider).service("databaseQuery",queryProvider$1).service("databaseInflate",inflateProvider$1).service("DatabaseStore",storeProvider$1).service("Database",DatabaseProvider).service("databaseSequence",SequenceProvider);TaskProvider.$inject=["$q","Database","Logger","QuestSequence","taskParse","dfltQuestLogger","$rootScope"],parseProvider.$inject=["piConsole"];var module$2=angular.module("task",[module$3.name,module$5.name,module$4.name]);module$2.service("QuestSequence",SequenceProvider$1),module$2.service("QuestTask",TaskProvider),module$2.service("taskParse",parseProvider),module$2.value("dfltQuestLogger",dfltQuestLogger),stopperProvider.$inject=["timerNow"],timerController.$inject=["$timeout","timerStopper"],timerDirective.$inject=["$compile"];var nowFn;window.performance&&(nowFn=performance.now||performance.mozNow||performance.webkitNow||performance.msNow||performance.oNow);var timerNow=nowFn?function(){return nowFn.apply(performance)}:function(){return+new Date},module$11=angular.module("timer",[]);module$11.service("timerStopper",stopperProvider),module$11.directive("piTimer",timerDirective),module$11.value("timerNow",timerNow);var preloadImages=preload.bind(null,preloadImg),module$12=angular.module("pi.utils",[]);module$12.value("piPreloadImages",preloadImages),module$12.service("piInvoke",["$injector",function(e){var t=e.get("$rootScope");return function(n,r){var i=t.global||{};n&&e.invoke(n,null,lodash.extend(r,{global:i,current:i.current}))}}]);var buttons=angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(e){this.activeClass=e.activeClass||"active",this.toggleEvent=e.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(e,t,n,r){var i=r[0],o=r[1];o.$render=function(){t.toggleClass(i.activeClass,angular.equals(o.$modelValue,e.$eval(n.btnRadio)))},t.bind(i.toggleEvent,function(){var r=t.hasClass(i.activeClass);r&&!angular.isDefined(n.uncheckable)||e.$apply(function(){o.$setViewValue(r?null:e.$eval(n.btnRadio)),o.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(e,t,n,r){function i(){return a(n.btnCheckboxTrue,!0)}function o(){return a(n.btnCheckboxFalse,!1)}function a(t,n){var r=e.$eval(t);return angular.isDefined(r)?r:n}var s=r[0],u=r[1];u.$render=function(){t.toggleClass(s.activeClass,angular.equals(u.$modelValue,i()))},t.bind(s.toggleEvent,function(){e.$apply(function(){u.$setViewValue(t.hasClass(s.activeClass)?o():i()),u.$render()})})}}}),template$2='<div class="modal in" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n\t<div class="modal-dialog">\n\t\t<div class="modal-content">\n\t\t\t<div class="modal-header" ng-ifs="header">\n\t\t\t\t<button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="close()"><span aria-hidden="true">&times;</span></button>\n\t\t\t\t<h4 class="modal-title" id="myModalLabel">{{ header || "Heads Up!" }}</h4>\n\t\t\t</div>\n\t\t\t<div class="modal-body">{{body}}</div>\n\t\t\t<div class="modal-footer">\n\t\t\t\t<button type="button" class="btn btn-default" ng-click="close()">{{button || "Close"}}</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>';modalConstructor.$inject=["$rootScope","$rootElement","$compile","$q","$document"];var module$13=angular.module("pi.modal",[]);module$13.service("piModal",modalConstructor),questController$1.$inject=["$scope","timerStopper","$parse","$attrs","piConsole","piInvoke","$rootScope","questGuid"];var template$3="<div piq-page></div>",jqLite=angular.element;piQuestCtrl.$inject=["$scope","$rootScope","QuestTask","templateDefaultContext","mixerDefaultContext","piModal"],directive$2.$inject=["$compile","$animate","$injector","piConsole"];var template$4='<div ng-form name="pageForm" pi-timer>\n\t<h3 ng-if="page.header" ng-bind-html="page.header" ng-style="page.headerStyle"></h3>\n\t<div pi-timer="page.timer"></div>\n\t<div ng-if="page.progressBar" class="text-center" ng-bind-html="page.progressBar"></div>\n\n\t<div ng-bind-html="page.text"></div>\n\t<ol ng-class="{\'list-unstyled\':!page.numbered}" start="{{page.numberStart}}">\n\t\t<li ng-repeat="quest in page.questions">\n\t\t\t<div quest-wrapper quest-data="quest" quest-current="current"></div>\n\t\t</li>\n\t</ol>\n\n\t<div pi-quest-validation="pageForm.$error.pageValidation" pi-post-submit="submitAttempt">{{page.pageValidationText || \'Invalid page\'}}</div>\n\n\t<div class="page-buttons">\n\t\t<button\n\t\t\tng-click="prev()"\n\t\t\tclass="btn page-prev"\n\t\t\tng-if="page.prev && page.$meta.number > 1"\n\t\t>{{page.prevText || "Go Back"}}</button>\n\n\t\t<button\n\t\t\tng-click="decline($event)"\n\t\t\tclass="btn page-decline"\n\t\t\tng-if="page.decline"\n\t\t>{{page.declineText || "Decline"}}</button>\n\n\t\t<button\n\t\t\tng-click="submit()"\n\t\t\tclass="btn page-submit"\n\t\t\tng-if="!page.noSubmit"\n\t\t>{{page.submitText || "Submit"}}</button>\n\t</div>\n</div>\n';piqPageCtrl.$inject=["$scope","$timeout","$rootScope","piModal"],directive$3.$inject=["$window"];var template$5='<div class="form-group" ng-form="questForm">\n\t<label ng-hide="data.inline" for="{{data.name}}" ng-bind-html="data.stem" ng-style="data.stemCss"></label>\n\t<div ng-bind-html="data.description"></div>\n\t<div quest-data="data" ng-model="current.questions[data.name]" ng-style="{\'max-width\':data.maxWidth}"></div>\n\t<p class="help-block" ng-if="data.help" ng-bind-html="data.helpText"></p>\n</div>\n',PREFIX="quest";directive$4.$inject=["$compile","$injector"];var textTemplate='<div ng-form ng-class="{\'form-inline\':data.inline}">\n\t<label ng-show="data.inline" for="{{data.name}}" ng-bind-html="data.stem" ng-style="data.stemCss"></label>\n\t<input\n\t \ttype="text"\n\t\tng-model="response"\n\t\tng-minlength="{{data.minLength || data.minlength}}"\n\t\tng-maxlength="{{data.maxlength}}"\n\t\tng-pattern="data.pattern | toRegex"\n\t\tng-required="{{data.required}}"\n\t\tclass="form-control"\n\t\tng-attr-style="width:{{data.width | dfltUnits}}"\n\n\t\tng-keydown="data.maxlengthLimit && maxlengthLimit($event)"\n\t\tng-keyup="data.maxlengthLimit && maxlengthLimit($event)"\n\t/>\n\t<div pi-quest-validation="form.$error.minlength">{{data.errorMsg.minLength || data.errorMsg.minlength || "Too short!"}}</div>\n\t<div pi-quest-validation="form.$error.maxlength">{{data.errorMsg.maxlength || "Too long!"}}</div>\n\t<div pi-quest-validation="form.$error.pattern">{{data.errorMsg.pattern || "wrong pattern!"}}</div>\n\t<div pi-quest-validation="form.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n\t<div pi-quest-validation="model.$error.correct">{{data.errorMsg.correct || "You must answer the correct answer!"}}</div>\n</div>',textareaTemplate='<div ng-form ng-class="{\'form-inline\':data.inline}">\n\t<label ng-show="data.inline" for="{{data.name}}" ng-bind-html="data.stem" ng-style="data.stemCss"></label>\n\t<textarea\n\t \ttype="text"\n\t\tng-model="response"\n\t\tng-minlength="{{data.minLength || data.minlength}}"\n\t\tng-maxlength="{{data.maxlength}}"\n\t\tng-pattern="data.pattern | toRegex"\n\t\tng-required="{{data.required}}"\n\t\tclass="form-control"\n\n\t\tng-attr-style="resize:none;width:{{data.columns? \'auto\' : data.width | dfltUnits}};"\n\t\tcols="{{data.columns}}"\n\t\trows="{{data.rows}}"\n\n\t\tng-keydown="data.maxlengthLimit && maxlengthLimit($event)"\n\t\tng-keyup="data.maxlengthLimit && maxlengthLimit($event)"\n\t/>\n\t<div pi-quest-validation="form.$error.minlength">{{data.errorMsg.minLength || data.errorMsg.minlength || "Too short!"}}</div>\n\t<div pi-quest-validation="form.$error.maxlength">{{data.errorMsg.maxlength || "Too long!"}}</div>\n\t<div pi-quest-validation="form.$error.pattern">{{data.errorMsg.pattern || "wrong pattern!"}}</div>\n\t<div pi-quest-validation="form.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n\t<div pi-quest-validation="model.$error.correct">{{data.errorMsg.correct || "You must answer the correct answer!"}}</div>\n</div>',template$6='<div ng-form ng-class="{\'form-inline\':data.inline}">\n\t<label ng-show="data.inline" for="{{data.name}}" ng-bind-html="data.stem" ng-style="data.stemCss"></label>\n\t<input\n\t \ttype="number"\n\t\tng-model="response"\n\t\tng-required="{{data.required}}"\n\t\tclass="form-control"\n\t\tng-attr-style="width:{{data.width | dfltUnits}}"\n\t>\n\t<div pi-quest-validation="form.$error.number">{{data.errorMsg.number || "Must be a number!"}}</div>\n\t<div pi-quest-validation="form.$error.qstMin">{{data.errorMsg.min || "Too small!"}}</div>\n\t<div pi-quest-validation="form.$error.qstMax">{{data.errorMsg.max || "Too big!"}}</div>\n\t<div pi-quest-validation="form.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n\t<div pi-quest-validation="model.$error.correct">{{data.errorMsg.correct || "You must answer the correct answer!"}}</div>\n</div>',directive$5=function(){return{replace:!0,template:template$6,require:["form","ngModel","^?piqPage"],controller:"questController",controllerAs:"ctrl",scope:{data:"=questData"},link:function(e,t,n,r){var i=r[0],o=t.find("input").eq(0).controller("ngModel");e.form=i,e.ctrl.registerModel(r[1],{dflt:""}),e.data.autoSubmit&&t.bind("keydown keypress",function(t){13===t.which&&(e.$apply(function(){e.$emit("quest:submit:now")}),t.preventDefault())});var a=function(t){var n=parseFloat(e.data.min);return!isNaN(n)&&t<n?void o.$setValidity("qstMin",!1):(o.$setValidity("qstMin",!0),t)};o.$parsers.push(a),o.$formatters.push(a);var s=function(t){var n=parseFloat(e.data.max);return!isNaN(n)&&t>n?void o.$setValidity("qstMax",!1):(o.$setValidity("qstMax",!0),t)};o.$parsers.push(s),o.$formatters.push(s)}}};selectMixerProvider.$inject=["randomizeShuffle","mixerRecursive"];var template$7='<div ng-form>\n\t<select\n\t\tng-model="response"\n\t\tng-options="answer.value as answer.text group by answer.group for answer in quest.answers"\n\t\tng-required="data.required"\n\t\tng-change="data.autoSubmit && autoSubmit($event)"\n\t\tclass="form-control"\n\t\t>\n\t\t<option value="">{{chooseText || "-- Choose an option --"}}</option>\n\t</select>\n\t<div pi-quest-validation="form.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n\t<div pi-quest-validation="model.$error.correct">{{data.errorMsg.correct || "You must answer the correct answer!"}}</div>\n</div>';directive$6.$inject=["questSelectMixer","$timeout"];var template$8='<div>\n\t<div ng-class="listClass" ng-style="listCss">\n\t\t\x3c!-- track by in the ng-repeat allows us to keep the repeated object clean so that angular doesn\'t add a $$hashkey property --\x3e\n\t\t\x3c!-- using interpolation within class, so that we can keep the style info separate within the directive --\x3e\n\t\t<a\n\t\t\ttabindex="-1"\n\t\t\tng-repeat="answer in quest.answers track by answer.order"\n\t\t\tng-model="$parent.responseObj"\n\t\t\tbtn-radio="answer"\n\t\t\tng-class="$parent.listItemClass"\n\t\t\tng-style="listItemCss"\n\t\t\tclass="{{ $parent.response == answer.value ? \'active\' : \'\' }}"\n\t\t\tuncheckable\n\t\t\tng-click="data.autoSubmit && autoSubmit($event)"\n\t\t\tng-bind-html="answer.text"\n\t\t\tunselectable="on"\n\t\t></a>\n\t</div>\n\t<div pi-quest-validation="model.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n\t<div pi-quest-validation="model.$error.correct">{{data.errorMsg.correct || "You must answer the correct answer!"}}</div>\n</div>';directive$7.$inject=["questSelectMixer","buttonConfig","$compile"];var template$9='<div>\n\t<div ng-class="listClass" ng-style="listCss">\n\t\t\x3c!-- track by in the ng-repeat allows us to keep the repeated object clean so that angular doesn\'t add a $$hashkey property --\x3e\n\t\t<a\n\t\t\thref="javascript:void(0);"\n\t\t\tng-repeat="answer in quest.answers track by answer.order"\n\t\t\tng-model="answer.chosen"\n\t\t\tbtn-checkbox\n\t\t\tng-class="$parent.listItemClass"\n\t\t\tng-style="listItemCss"\n\t\t\tclass="{{ answer.chosen ? \'active\' : \'\' }}"\n\t\t\tuncheckable\n\t\t\tng-bind-html="answer.text"\n\t\t\tunselectable="on"\n\t\t>\n\t\t</a>\n\t</div>\n\t<div pi-quest-validation="model.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n\t<div pi-quest-validation="model.$error.correct">{{data.errorMsg.correct || "You must answer the correct answer!"}}</div>\n</div>';directive$8.$inject=["questSelectMixer"];var atoa=function(e,t){return Array.prototype.slice.call(e,t)},si="function"==typeof setImmediate,tick;tick=si?function(e){setImmediate(e)}:"undefined"!=typeof process&&process.nextTick?process.nextTick:function(e){setTimeout(e,0)};var ticky=tick,debounce=function(e,t,n){e&&ticky(function(){e.apply(n||null,t||[])})},emitter=function(e,t){var n=t||{},r={};return void 0===e&&(e={}),e.on=function(t,n){return r[t]?r[t].push(n):r[t]=[n],e},e.once=function(t,n){return n._once=!0,e.on(t,n),e},e.off=function(t,n){var i=arguments.length;if(1===i)delete r[t];else if(0===i)r={};else{var o=r[t];if(!o)return e;o.splice(o.indexOf(n),1)}return e},e.emit=function(){var t=atoa(arguments);return e.emitterSnapshot(t.shift()).apply(this,t)},e.emitterSnapshot=function(t){var i=(r[t]||[]).slice(0);return function(){var r=atoa(arguments),o=this||e;if("error"===t&&!1!==n.throws&&!i.length)throw 1===r.length?r[0]:r;return i.forEach(function(i){n.async?debounce(i,r,o):i.apply(o,r),i._once&&e.off(t,i)}),e}},e},NativeCustomEvent=commonjsGlobal.CustomEvent,customEvent=useNative()?NativeCustomEvent:"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n},eventmap=[],eventname="",ron=/^on/;for(eventname in commonjsGlobal)ron.test(eventname)&&eventmap.push(eventname.slice(2));var eventmap_1=eventmap,doc$1=commonjsGlobal.document,addEvent=addEventEasy,removeEvent=removeEventEasy,hardCache=[];commonjsGlobal.addEventListener||(addEvent=addEventHard,removeEvent=removeEventHard);var crossvent={add:addEvent,remove:removeEvent,fabricate:fabricateEvent},cache={},start="(?:^|\\s)",end="(?:\\s|$)",classes={add:addClass,rm:rmClass},doc=document,documentElement=doc.documentElement,dragula_1=dragula,template$10='<div>\n    <div class="list-group" dragula-container>\n        <a href="javascript:void(0)" class="list-group-item" ng-repeat="row in list track by row.id">\n            <div class="row">\n                <div class="col-xs-1">\n                    <select ng-init="setupWatch(this)" ng-model="selected" ng-change="$parent.move(row.order, selected, this)">\n                        <option ng-repeat="r in list" ng-selected="r.order === row.order" label="{{r.order+1}}" value="{{r.order}}">{{r.order+1}}</option>\n                    </select>\n                </div>\n                <div class="col-xs-11"> {{row.text}} </div>\n            </div>\n        </a>\n    </div>\n\t<div pi-quest-validation="model.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n\t<div pi-quest-validation="model.$error.correct">{{data.errorMsg.correct || "You must answer the correct answer!"}}</div>\n</div>\n';directive$9.$inject=["$compile"];var grid='<div ng-form class="table-responsive" ng-class="{\'pi-page-submitted\':$parent.$parent.submitAttempt}">\n\t<table class="table table-hover">\n\t\t<colgroup>\n\t\t\t<col\n\t\t\t\tng-if="!data.rowStemHide"\n\t\t\t></col>\n\t\t\t<col\n\t\t\t\tng-repeat="column in columns"\n\t\t\t\tng-style="column.css"\n\t\t\t></col>\n\t\t</colgroup>\n\t\t<thead ng-if="!data.columnStemHide">\n\t\t\t<tr>\n\t\t\t\t<th\n\t\t\t\t\tng-style="allCss(data.columnStemCss,column.stemCss, data.rowStemCss)"\n\t\t\t\t\tng-if="!data.rowStemHide"\n\t\t\t\t></th>\n\t\t\t\t<th\n\t\t\t\t\tng-repeat="column in columns"\n\t\t\t\t\tng-bind-html="column.stem"\n\t\t\t\t\tng-style="allCss(data.columnStemCss,column.stemCss)"\n\t\t\t\t></th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr\n\t\t\t\tng-repeat="row in rows"\n\t\t\t\tquest-grid-row="row"\n\t\t\t\tquest-grid-data="data"\n\t\t\t\tng-model="$parent.$parent.current.questions[row.name]"\n\t\t\t\tng-required="{{data.required || row.required}}"\n\t\t\t></tr>\n\t\t</tbody>\n\t</table>\n\t<div pi-quest-validation="form.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n</div>';gridDirective$1.$inject=["questShuffle"];var gridRow='<tr>\n\t<th\n\t\tscope="row"\n\t\tng-if="!data.rowStemHide"\n\t\tng-bind-html="row.stem"\n\t\tng-style="data.rowStemCss"\n\t></th>\n\t<td ng-repeat="column in columns">\n\t\t<div ng-switch="column.type">\n\t\t\t<button\n\t\t\t\tclass="btn btn-default"\n\t\t\t\tng-switch-when="checkbox"\n\t\t\t\tbtn-radio="row.reverse && !column.noReverse ? column.reverseValue : column.value"\n\t\t\t\tng-model="$parent.$parent.response"\n\t\t\t\tng-class="data.checkboxType"\n\t\t\t\tuncheckable\n\t\t\t></button>\n\t\t\t<div\n\t\t\t\tclass="text"\n\t\t\t\tng-switch-when="text"\n\t\t\t\tng-bind-html="row[column.textProperty]"\n\t\t\t></div>\n\t\t\t<div\n\t\t\t\tclass="grid-input input-group input-group-small"\n\t\t\t\tng-switch-when="input"\n                ng-init="response=\'\'"\n                title="insert your response"\n\t\t\t>\n                <span class="input-group-addon">\n                    <span class="glyphicon glyphicon-edit" ng-class="{active:$parent.$parent.response===response}"></span>\n                </span>\n                <input type="text" class="form-control" ng-model="response" ng-change="$parent.$parent.response = response">\n            </div>\n            <div ng-switch-when="dropdown" ng-init="response=\'\'"> \n                <select ng-model="response" ng-change="$parent.$parent.response = response" class="form-control">\n                    <option value="" ng-selected="response===undefined">----</option>\n                    <option ng-repeat="r in column.answers" ng-selected="r.value === $parent.$parent.response" value="{{r.value}}">{{r.text}}</option>\n                </select>\n            </div>\n\t\t</div>\n\t\t<div\n\t\t\tclass="cell-labels"\n\t\t\tng-if="data.cellLabels"\n\t\t\tng-bind-html="column.stem"\n\t\t></div>\n\t</td>\n</tr>\n',multiGrid='<div ng-form class="table-responsive" ng-class="{\'pi-page-submitted\':$parent.$parent.submitAttempt}">\n\t<table class="table table-hover">\n\t\t<colgroup>\n\t\t\t<col\n\t\t\t\tng-if="!data.rowStemHide"\n\t\t\t></col>\n\t\t\t<col\n\t\t\t\tng-repeat="column in columns"\n\t\t\t\tng-style="column.css"\n\t\t\t></col>\n\t\t</colgroup>\n\t\t<thead ng-if="!data.columnStemHide">\n\t\t\t<tr>\n\t\t\t\t<th\n\t\t\t\t\tng-style="allCss(data.columnStemCss,column.stemCss, data.rowStemCss)"\n\t\t\t\t\tng-if="!data.rowStemHide"\n\t\t\t\t></th>\n\t\t\t\t<th\n\t\t\t\t\tng-repeat="column in columns"\n\t\t\t\t\tng-bind-html="column.stem"\n\t\t\t\t\tng-style="allCss(data.columnStemCss,column.stemCss)"\n\t\t\t\t></th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr\n\t\t\t\tng-repeat="row in rows"\n\t\t\t\tquest-multi-grid-row="row"\n\t\t\t\tquest-multi-grid-data="data"\n\t\t\t\tng-model="$parent.$parent.current.questions[row.name]"\n\t\t\t></tr>\n\t\t</tbody>\n\t</table>\n\t<div pi-quest-validation="form.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n\t<div pi-quest-validation="form.$error.pattern">{{data.errorMsg.pattern || "wrong pattern!"}}</div>\n</div>\n';gridDirective$2.$inject=["questShuffle"];var multiGridRow='<tr>\n\t<th\n\t\tscope="row"\n\t\tng-if="!data.rowStemHide"\n\t\tng-bind-html="row.stem"\n\t\tng-style="data.rowStemCss"\n\t></th>\n\t<td ng-repeat="column in columns">\n\t\t<div ng-switch="column.type">\n\t\t\t<button\n\t\t\t\tclass="btn btn-default"\n\t\t\t\tng-switch-when="checkbox"\n\t\t\t\tbtn-checkbox\n                btn-checkbox-true="column.value || true"\n\t\t\t\tng-model="$parent.$parent.response[$index]"\n\t\t\t\tng-class="data.checkboxType"\n\t\t\t\tuncheckable\n\t\t\t></button>\n\t\t\t<div\n\t\t\t\tclass="text"\n\t\t\t\tng-switch-when="text"\n\t\t\t\tng-bind-html="row[column.textProperty]"\n\t\t\t></div>\n\t\t\t<div\n\t\t\t\tclass="grid-input input-group input-group-small"\n\t\t\t\tng-switch-when="input"\n                title="insert your response"\n\t\t\t>\n                <span class="input-group-addon glyphicon glyphicon-edit"></span>\n                <input type="text" class="form-control" ng-model="$parent.$parent.response[$index]" >\n            </div>\n            <div ng-switch-when="dropdown"> \n                <select ng-model="$parent.$parent.response[$index]" class="form-control" ng-options="r.value as r.text for r in column.answers">\n                    <option value="">{{column.chooseText || "-- Choose an option --"}}</option>\n                </select>\n            </div>\n\t\t</div>\n\t\t<div\n\t\t\tclass="cell-labels"\n\t\t\tng-if="data.cellLabels"\n\t\t\tng-bind-html="column.stem"\n\t\t></div>\n\t</td>\n</tr>\n',slider='<div ng-form>\n\t<div\n\t\tpi-slider\n\t\tng-model="sliderResponse"\n\t\tpi-slider-options="data"\n\t\tng-required="{{data.required}}"\n\t></div>\n\t<h4 ng-if="data.displayValue" class="text-center"><span class="label label-info">{{ sliderResponse | number }}</span></h4>\n\t<div pi-quest-validation="form.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n</div>\n';sliderDirective$1.$inject=[],function(e,t){angular.module("pi",[]).directive("piSlider",t(e.angular))}(commonjsGlobal,function(){function e(e){return{scope:{options:"=piSliderOptions"},replace:!0,require:"ngModel",template:['<div class="slider" ng-class="{\'slider-ticks\':options.showTicks}" pi-pointerdown="onSliderMouseDown($event)">','<div class="slider-label-left" ng-style="options.leftLabelCss">{{options.leftLabel}}</div>','<div class="slider-label-right" ng-style="options.rightLabelCss">{{options.rightLabel}}</div>','<div class="slider-container">','<div class="slider-bar">','<div class="slider-bar-highlight" ng-style="highlightStyle"></div>',"</div>",'<div class="slider-handle" pi-pointerdown="onHandleMousedown($event)" ng-style="handleStyle"></div>',"</div>",'<ul class="slider-pips" ng-if="!options.hidePips">','<li ng-repeat="i in getNumber(steps) track by $index" ng-style="{width: pipWidth + \'%\'}" ng-class="{last:$last}"></li>',"</ul>",'<ul class="slider-labels">','<li ng-repeat="label in labels track by $index" ng-style="{width: labelsWidth + \'%\'}" ng-class="{first:$first, last:$last}">{{label}}</li>',"</ul>","</div>"].join("\n"),link:function(i,o,a,s){function u(e){s.$setViewValue(e),s.$render()}function l(e){return!i.steps||s.$isEmpty(e)?e:Math.round(e*i.steps)/i.steps}function c(n){function a(e){t(e),e.preventDefault();var n=c+(e.pageX-d)/(o.prop("clientWidth")-f);n=Math.min(n,1),n=Math.max(n,0),i.$apply(function(){u(n)})}function l(t){t.preventDefault(),e.off("mousemove touchmove",a),e.off("mouseup touchend",l),i.$emit(r,s.$modelValue)}t(n);var c,d;n.preventDefault(),n.stopPropagation(),d=n.pageX,c=s.$viewValue,e.on("mousemove touchmove",a),e.on("mouseup touchend",l)}var f,d=i.options||{};f=o[0].querySelector(".slider-handle").clientWidth,i.ngModel=s,i.min=d.min||0,i.max=d.max||i.min+100,i.range=i.max-i.min,i.steps=d.steps?d.steps-1:0,i.pipWidth=d.steps&&100/i.steps,i.labels=d.labels,i.labelsWidth=d.labels&&100/d.labels.length,s.$isEmpty=n,s.$render=function(){var e=l(s.$viewValue),t=!isNaN(e),n=t?"block":"none",r=t&&d.highlight?"block":"none";switch(d.highlightDirection){case"rtl":i.highlightStyle={left:100*e+"%",display:r};break;case"center":i.highlightStyle=e>.5?{left:"50%",width:100*(e-.5)+"%",display:r}:{right:"50%",width:100*(.5-e)+"%",display:r};break;default:i.highlightStyle={right:100-100*e+"%",display:r}}i.handleStyle={left:100*e+"%",display:n}},s.$formatters.push(function(e){return s.$isEmpty(e)?NaN:((e=Math.min(Math.max(e,i.min),i.max))-i.min)/i.range}),s.$parsers.push(function(e){return+(i.min+l(e)*i.range).toFixed(4)}),i.onHandleMousedown=c,i.onSliderMouseDown=function(e){t(e),e.preventDefault();var n=o.prop("clientWidth"),r=o[0].getBoundingClientRect().left,i=(e.pageX-r-f/2)/(n-f);i=Math.min(i,1),u(i=Math.max(i,0)),c(e)},i.getNumber=function(e){return new Array(e)}}}}function t(e){var t,n,r;null==e.pageX&&null!=e.clientX&&(n=(t=e.target.ownerDocument||document).documentElement,r=t.body,e.pageX=e.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0),e.pageY=e.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0)),null==e.pageX&&e.touches&&(e.pageX=e.touches[0].pageX,e.pageY=e.touches[0].pageY)}function n(e){return isNaN(parseFloat(e))||!isFinite(e)}var r="slider:change";return e.$inject=["$document","$sce"],e});var slider$1={},EVENTNAME="touchstart mousedown",DIRECTIVENAME="piPointerdown";piPointerdownDirective.$inject=["$parse"],toRegexFilter.$inject=["piConsole"];var dfltUnitsFilter=function(){return dfltUnits},module$10=angular.module("questDirectives",[module$11.name,module$12.name,buttons.name,module$8.name,module$4.name,module$13.name]);module$10.controller("questController",questController$1),module$10.factory("questGuid",guidFactory),module$10.directive("piQuest",directive$2),module$10.directive("piqPage",directive$3),module$10.directive("questWrapper",directive$4),module$10.directive("questInfo",function(){return{}}),module$10.directive("questText",textDirective),module$10.directive("questTextarea",textDirective),module$10.directive("questTextNumber",directive$5),module$10.service("questSelectMixer",selectMixerProvider),module$10.directive("questDropdown",directive$6),module$10.directive("questSelectOne",directive$7),module$10.directive("questSelectMulti",directive$8),module$10.directive("questRank",directive$9),module$10.value("questShuffle",lodash.shuffle),module$10.directive("questGrid",gridDirective$1),module$10.directive("questGridRow",gridRowDirective$1),module$10.directive("questMultiGrid",gridDirective$2),module$10.directive("questMultiGridRow",gridRowDirective$2),module$10.directive("questSlider",sliderDirective$1),module$10.directive("piSlider",slider$1),module$10.directive("piPointerdown",piPointerdownDirective),module$10.config(["$sceProvider",function(e){e.enabled(!1)}]),module$10.directive("piQuestValidation",function(){return{replace:!0,transclude:!0,scope:{unvalid:"=piQuestValidation",postSubmit:"=piPostSubmit"},template:['<div class="alert alert-danger" role="alert" ng-show="unvalid && ($parent.$parent.$parent.submitAttempt || postSubmit)">','<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>',"<span ng-transclude></span>","</div>"].join("")}}),module$10.filter("toRegex",toRegexFilter),module$10.filter("dfltUnits",dfltUnitsFilter),module$10.directive("piqPage",function(){return{link:function(e,t){e.page.autoFocus&&setTimeout(function(){var e=t[0].querySelector("[quest-wrapper]"),n=e&&e.querySelector("input, textArea, select, button");n&&n.focus()})}}});var module$1=angular.module("piQuest",[module$10.name,module$2.name]);directive$10.$inject=["$compile","$rootScope","$document","piConsole"],directive$11.$inject=[];var module$14=angular.module("pi.message",[module$4.name]);module$14.directive("piMessage",directive$10),module$14.directive("piMessageDone",directive$11),taskActivateProvider.$inject=["$q","$rootScope","$injector"],directive$12.$inject=["taskActivate","managerCanvas","$document","$window","$rootScope","piConsole"],Date.now||(Date.now=function(){return(new Date).getTime()}),console.group||(console.group=log),console.groupCollapsed||(console.groupCollapsed=log),console.groupEnd||(console.groupEnd=log),console.table||(console.table=log),function(){for(var e=["webkit","moz"],t=0;t<e.length&&!window.requestAnimationFrame;++t){var n=e[t];window.requestAnimationFrame=window[n+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var r=0;window.requestAnimationFrame=function(e){var t=Date.now(),n=Math.max(r+16,t);return setTimeout(function(){e(r=n)},n-t)},window.cancelAnimationFrame=clearTimeout}}();var PromisePolyfill=function(e){function t(e,t){return function a(c){var f;try{if(!t||null==c||"object"!=typeof c&&"function"!=typeof c||"function"!=typeof(f=c.then))l(function(){t||0!==e.length||console.error("Possible unhandled promise rejection:",c);for(var n=0;n<e.length;n++)e[n](c);i.length=0,o.length=0,u.state=t,u.retry=function(){a(c)}});else{if(c===r)throw new TypeError("Promise can't be resolved w/ itself");n(f.bind(c))}}catch(e){s(e)}}}function n(e){function t(e){return function(t){n++>0||e(t)}}var n=0,r=t(s);try{e(t(a),r)}catch(e){r(e)}}if(!(this instanceof PromisePolyfill))throw new Error("Promise must be called with `new`");if("function"!=typeof e)throw new TypeError("executor must be a function");var r=this,i=[],o=[],a=t(i,!0),s=t(o,!1),u=r._instance={resolvers:i,rejectors:o},l="function"==typeof setImmediate?setImmediate:setTimeout;n(e)};PromisePolyfill.prototype.then=function(e,t){function n(e,t,n,a){t.push(function(t){if("function"!=typeof e)n(t);else try{r(e(t))}catch(e){i&&i(e)}}),"function"==typeof o.retry&&a===o.state&&o.retry()}var r,i,o=this._instance,a=new PromisePolyfill(function(e,t){r=e,i=t});return n(e,o.resolvers,r,!0),n(t,o.rejectors,i,!1),a},PromisePolyfill.prototype.catch=function(e){return this.then(null,e)},PromisePolyfill.resolve=function(e){return e instanceof PromisePolyfill?e:new PromisePolyfill(function(t){t(e)})},PromisePolyfill.reject=function(e){return new PromisePolyfill(function(t,n){n(e)})},PromisePolyfill.all=function(e){return new PromisePolyfill(function(t,n){var r=e.length,i=0,o=[];if(0===e.length)t([]);else for(var a=0;a<e.length;a++)!function(a){function s(e){i++,o[a]=e,i===r&&t(o)}null==e[a]||"object"!=typeof e[a]&&"function"!=typeof e[a]||"function"!=typeof e[a].then?s(e[a]):e[a].then(s,n)}(a)})},PromisePolyfill.race=function(e){return new PromisePolyfill(function(t,n){for(var r=0;r<e.length;r++)e[r].then(t,n)})},void 0===window.Promise&&(window.Promise=PromisePolyfill);var scriptObj={},glob=window.piGlobal||(window.piGlobal={}),minnoSequencer=createCommonjsModule(function(e,t){!function(t,n){e.exports=n(lodash)}(0,function(e){function t(t,n){function r(t){var n=t.mixer;if(!(e.isPlainObject(t)&&"mixer"in t))return[t];if(e.isUndefined(r.mixers[n]))throw new Error("Mixer: unknow mixer type = "+n);if(!t.remix&&t.$parsed)return t.$parsed;if(t.$parsed=r.mixers[n].apply(null,arguments),!e.isArray(t.$parsed))throw new Error("Mixer: mixers must return an array (mixer: "+n+")");return t.$parsed}function i(t,n){return e.reduce(t,function(t,o){if(e.isPlainObject(o)&&"mixer"in o&&"wrapper"!=o.mixer&&!o.wrapper){var a=i(r(o,n),n);return t.concat(a)}return t.concat([o])},[])}function o(t,r){var o,a=t.data?i(t.data,r):[],s=t.n||1,u=[],l=e.reduce(t.weights,function(e,t){return e+t});for(o=0;o<s;o++)u.push(function(){var e,r=n()*l,i=0;for(e=0;e<a.length;e++)if(i+=t.weights[e],i=+i.toFixed(3),r<=i)return t.data[e];throw new Error("Mixer: something went wrong with weightedRandom")}());return u}return r.mixers={wrapper:function(e){return e.data},repeat:function(t){var n,r=t.data||[],i=[];for(n=0;n<t.times;n++)i=i.concat(e.clone(r,!0));return i},random:function(e,n){var r=e.data?i(e.data,n):[];return t(r)},choose:function(n,r){var o=n.data?i(n.data,r):[];return e.take(t(o),n.n?n.n:1)},custom:function(t,n){return e.isFunction(t.fn)?t.fn(t,n):[]},weightedRandom:o,weightedChoose:o},r}function n(t){return function(n,r){return e.isString(n)?/[^/]\./.test(n)?t(n,r):n.replace("/.","."):n}}function r(t){function n(t){var n=t.operator;return e.isFunction(t)?t:e.has(t,"operator")?e.isFunction(n)?n:o[n]:e.has(t,"to")?e.eq:r}function r(e){return!!e}function i(t){return function(n,r){return!![n,r].every(e.isNumber)&&t(n,r)}}var o={gt:i(e.gt),greaterThan:i(e.gt),gte:i(e.gte),greaterThanOrEqual:i(e.gte),equals:e.eq,in:e.rearg(e.contains,1,0),contains:e.rearg(e.contains,1,0),exactly:function(e,t){return e===t},isTruthy:r};return function(e,r){var i=n(e),o=t(e.compare,r),a=t(e.to,r);return e.DEBUG&&console&&console.info("Condition: ",o,e.operator||"equals",a,e),e.negate?!i.apply(r,[o,a,r]):i.apply(r,[o,a,r])}}function i(t){function n(r,i){function o(e){return n(e,i)}return e.isArray(r)&&(r={and:r}),r.and?e.every(r.and,o):r.nand?!e.every(r.nand,o):r.or?e.some(r.or,o):r.nor?!e.some(r.nor,o):t(r,i)}return n}function o(t,n,r){return t.mixers.branch=function(t,i){return i=e.extend(i||{},r),n(t.conditions,i)?t.data||[]:t.elseData||[]},t.mixers.multiBranch=function(t,i){i=e.extend(i||{},r);var o;return(o=e.find(t.branches,function(e){return n(e.conditions,i)}))?o.data||[]:t.elseData||[]},t}function a(t){function n(e){this.sequence=e,this.stack=[],this.add(e),this.pointer=0}return e.extend(n.prototype,{add:function(e,t){this.stack.push({pointer:t?e.length:-1,sequence:e})},proceed:function(n,r){var i=this.stack[this.stack.length-1],o="next"===n;if(!i)throw new Error("mixerSequence: subSequence not found");i.pointer+=o?1:-1;var a=i.sequence[i.pointer];return e.isUndefined(a)&&this.stack.length>1?(this.stack.pop(),this.proceed.call(this,n,r)):a&&a.mixer?(this.add(t(a,r),!o),this.proceed.call(this,n,r)):this},next:function(e){return this.pointer++,this.proceed.call(this,"next",e)},prev:function(e){return this.pointer--,this.proceed.call(this,"prev",e)},current:function(){var e=this.stack[this.stack.length-1];if(!e)throw new Error("mixerSequence: subSequence not found");var t=e.sequence[e.pointer];if(t)return t.$meta=this.meta(),t},meta:function(){return{number:this.pointer,outOf:e.reduce(this.stack,function(e,t){return e+t.sequence.length-1},0)+1}}}),n}function s(t){return function(n,r,i){function o(t){return e.isString(t)?a(t):e.isArray(t)?t.map(o):e.isPlainObject(t)?e.mapValues(t,o):t}function a(t){return~t.indexOf("<%")?e.template(t)(c):t}var s,u=e.get(i,"skip",[]),l={},c=e.assign({},r,t);for(s in n)l[s]=-1==u.indexOf(s)?o(n[s]):n[s];return l}}function u(t,n,r){function i(){this._cache={random:{},exRandom:{},sequential:{}}}return e.extend(i.prototype,{random:function(n,r,i){var o=this._cache.random;return i&&!e.isUndefined(o[r])?o[r]:(o[r]=t(n),o[r])},exRandom:function(t,i,o){var a,s=this._cache.exRandom,u=s[i];if(e.isUndefined(u))return(u=s[i]=new r(n(t))).first();if(u.length!==t)throw new Error("This seed  ("+i+") points to a collection with the wrong length, you can only use a seed for sets of the same length");return o?u.current():(a=u.next(),e.isUndefined(a)?(u=s[i]=new r(n(t))).first():a)},sequential:function(t,n,i){var o,a=this._cache.sequential,s=a[n];if(e.isUndefined(s))return(s=a[n]=new r(e.range(t))).first();if(s.length!==t)throw new Error("This seed  ("+n+") points to a collection with the wrong length, you can only use a seed for sets of the same length");return i?s.current():(o=s.next(),e.isUndefined(o)?s.first():o)}}),i}function l(t){function n(){this.store={}}return e.extend(n.prototype,{create:function(e){if(this.store[e])throw new Error("The name space "+e+" already exists");this.store[e]=new t,this.store[e].namespace=e},read:function(e){if(!this.store[e])throw new Error("The name space "+e+" does not exist");return this.store[e]},update:function(e,t){this.read(e).add(t)},del:function(e){this.store[e]=void 0}}),n}function c(t){function n(e,n,r){this.namespace=e,this.mixerSequence=new t(n),this.db=r}return e.extend(n.prototype,{next:function(e){return this.mixerSequence.next(e),this},prev:function(e){return this.mixerSequence.prev(e),this},current:function(e,t){e||(e={});var n=this.mixerSequence.current(e);return n?this.db.inflate(this.namespace,n,e,t):n},all:function(e,t){for(var n=[],r=this.next().current(e,t);r;)n.push(r),r=this.next().current(e,t);return n}}),n}function f(t,n,r,i,o){function a(){this.store=new t,this.randomizer=new n}return e.extend(a.prototype,{createColl:function(e){this.store.create(e)},getColl:function(e){return this.store.read(e)},add:function(e,t){this.store.read(e).add(t)},inflate:function(t,n,o,a){var s,u=this.getColl(t);try{n.$inflated&&!n.reinflate||(n.$inflated=r(n,u,this.randomizer),n.$templated=null),n.$templated&&!n.$inflated.regenerateTemplate||(o[t+"Meta"]=n.$meta,o[t+"Data"]=i(n.$inflated.data||{},o,a),n.$templated=i(n.$inflated,o,a)),s=n.$templated}catch(e){throw this.onError&&this.onError(e),e}return o.global&&s.addGlobal&&e.extend(o.global,s.addGlobal),o.current&&s.addCurrent&&e.extend(o.current,s.addCurrent),n.$templated},sequence:function(t,n){if(!e.isArray(n))throw new Error("Sequence must be an array.");return new o(t,n,this)}}),a}function d(t){return function(n,r,i){var o=new t(r);if(e.isFunction(n))return n(r);(e.isString(n)||e.isNumber(n))&&(n={set:n,type:"random"}),n.set&&(o=o.where({set:n.set})),e.isString(n.data)&&(o=o.filter(function(e){return e.handle===n.data||e.data&&e.data.handle===n.data})),e.isPlainObject(n.data)&&(o=o.where({data:n.data})),e.isFunction(n.data)&&(o=o.filter(n.data));var a,s=n.seed||"$"+r.namespace+n.set,u=o.length,l=n.repeat;switch(n.type){case void 0:case"byData":case"random":a=i.random(u,s,l);break;case"exRandom":a=i.exRandom(u,s,l);break;case"sequential":a=i.sequential(u,s,l);break;case"first":a=0;break;case"last":a=u-1;break;default:throw new Error("Unknow query type: "+n.type)}if(e.isUndefined(o.at(a)))throw new Error("Query failed, object ("+JSON.stringify(n)+") not found. If you are trying to apply a template, you should know that they are not supported for inheritance.");return o.at(a)}}function p(t,n){function r(t){return e.isFunction(t.customize)&&t.customize.apply(t,[t,n.global]),t}function i(n,o,a,s,u){if(!(u=s?--u:10))throw new Error("Inheritance loop too deep, you can only inherit up to 10 levels down");if(!e.isPlainObject(n))throw new Error("You are trying to inflate a non object ("+JSON.stringify(n)+")");var l,c=e.cloneDeep(n),f=c.inherit;if(!c.inherit)return s||r(c),c;if(!(l=t(f,o,a)))throw new Error("Query failed, object ("+JSON.stringify(f)+") not found.");if(l=i(l,o,a,!0,u),f.merge&&!e.isArray(f.merge))throw new Error("Inheritance error: inherit.merge must be an array.");return e.each(l,function(t,n){var r,i;if(n in c){if(-1!=e.indexOf(f.merge,n)){if(r=c[n],i=t,e.isArray(r)){if(!e.isArray(i))throw new Error('Inheritance error: You tried merging an array with an non array (for "'+n+'")');c[n]=r.concat(i)}if(e.isPlainObject(r)){if(!e.isPlainObject(i))throw new Error('Inheritance error: You tried merging an object with an non object (for "'+n+'")');c[n]=e.extend({},i,r)}}}else c[n]=e.isFunction(t)?t:e.cloneDeep(t)}),l.data&&(c.data=e.extend(l.data,c.data||{})),!s&&r(c),c}return i}e=e&&e.hasOwnProperty("default")?e.default:e,t.$inject=["randomizeShuffle","randomizeRandom"],n.$inject=["dotNotation"],r.$inject=["mixerDotNotation"],i.$inject=["mixerCondition"],o.$inject=["$delegate","mixerEvaluate","mixerDefaultContext"],a.$inject=["mixer"];var h=t(e.shuffle,Math.random);o(h,i(r(n(function(t,n){if(!e.isUndefined(t))return e.isString(t)&&(t=t.split(".")),t.reduce(function(t,n){if(e.isPlainObject(t)||e.isArray(t))return t[n]},n)}))),{});var m=a(h);s.$inject=["templateDefaultContext"];var v=s({});u.$inject=["randomizeInt","randomizeRange","Collection"],l.$inject=["Collection"],c.$inject=["MixerSequence"],f.$inject=["DatabaseStore","DatabaseRandomizer","databaseInflate","templateObj","databaseSequence"],d.$inject=["Collection"],p.$inject=["databaseQuery","$rootScope"];var g=window.piGlobal,$=function(){function t(n){if(n instanceof t)return n;if(!(e.isUndefined(n)||e.isArray(n)||n instanceof t))throw new Error("Collections can only be constructed from arrays");this.collection=n||[],this.length=this.collection.length,this.pointer=-1}e.extend(t.prototype,{first:function(){return this.pointer=0,this.collection[this.pointer]},last:function(){return this.pointer=this.collection.length-1,this.collection[this.pointer]},end:function(){this.pointer=this.collection.length},current:function(){return this.collection[this.pointer]},next:function(){return this.collection[++this.pointer]},previous:function(){return this.collection[--this.pointer]},add:function(t){return arguments.length?(t=e.isArray(t)?t:[t],this.collection=this.collection.concat(t),this.length=this.collection.length,this):this},at:function(e){return this.collection[e]}});var n=Array.prototype.slice;return e.each(["where","filter"],function(r){t.prototype[r]=function(){var i=n.call(arguments);return i.unshift(this.collection),new t(e[r].apply(e,i))}}),t}(),y=u(function(e){return Math.floor(Math.random()*e)},function(t){return e.shuffle(e.range(t))},$),w=p(d($),{global:g});return f(l($),y,w,v,c(m))})}),stream=createCommonjsModule(function(e){!function(){function t(){function e(){return arguments.length>0&&arguments[0]!==w&&r(e,arguments[0]),e._state.value}return n(e),arguments.length>0&&arguments[0]!==w&&r(e,arguments[0]),e}function n(e){e.constructor=t,e._state={id:y++,value:void 0,state:0,derive:void 0,recover:void 0,deps:{},parents:[],endStream:void 0,unregister:void 0},e.map=e["fantasy-land/map"]=f,e["fantasy-land/ap"]=d,e["fantasy-land/of"]=t,e.valueOf=p,e.toJSON=h,e.toString=p,Object.defineProperties(e,{end:{get:function(){if(!e._state.endStream){var n=t();n.map(function(t){return!0===t&&(c(e),n._state.unregister=function(){c(n)}),t}),e._state.endStream=n}return e._state.endStream}}})}function r(e,t){i(e,t);for(var n in e._state.deps)o(e._state.deps[n],!1);null!=e._state.unregister&&e._state.unregister(),a(e)}function i(e,t){e._state.value=t,e._state.changed=!0,2!==e._state.state&&(e._state.state=1)}function o(e,t){var n=e._state.parents;if(n.length>0&&n.every(v)&&(t||n.some(g))){var r=e._state.derive();if(r===w)return!1;i(e,r)}}function a(e){e._state.changed=!1;for(var t in e._state.deps)e._state.deps[t]._state.changed=!1}function s(e,n){if(!n.every(m))throw new Error("Ensure that each item passed to stream.combine/stream.merge is a stream");return u(t(),n,function(){return e.apply(this,n.concat([n.filter(g)]))})}function u(e,t,n){var r=e._state;return r.derive=n,r.parents=t.filter($),l(e,r.parents),o(e,!0),e}function l(e,t){for(var n=0;n<t.length;n++)t[n]._state.deps[e._state.id]=e,l(e,t[n]._state.parents)}function c(e){for(var t=0;t<e._state.parents.length;t++)delete e._state.parents[t]._state.deps[e._state.id];for(var n in e._state.deps){var r=e._state.deps[n],i=r._state.parents.indexOf(e);i>-1&&r._state.parents.splice(i,1)}e._state.state=2,e._state.deps={}}function f(e){return s(function(t){return e(t())},[this])}function d(e){return s(function(e,t){return e()(t())},[e,this])}function p(){return this._state.value}function h(){return null!=this._state.value&&"function"==typeof this._state.value.toJSON?this._state.value.toJSON():this._state.value}function m(e){return e._state}function v(e){return 1===e._state.state}function g(e){return e._state.changed}function $(e){return 2!==e._state.state}var y=0,w={};t["fantasy-land/of"]=t,t.merge=function(e){return s(function(){return e.map(function(e){return e()})},e)},t.combine=s,t.scan=function(e,t,n){var r=s(function(n){return t=e(t,n._state.value)},[n]);return 0===r._state.state&&r(t),r},t.scanMerge=function(e,t){var n=e.map(function(e){var t=e[0];return 0===t._state.state&&t(void 0),t});return s(function(){var r=arguments[arguments.length-1];return n.forEach(function(n,i){r.indexOf(n)>-1&&(t=e[i][1](t,n._state.value))}),t},n)},t.HALT=w,e.exports=t}()}),srcStack=[],defStack=[],stackDone=0,images={},loader={load:load,all:function(){return Promise.all(defStack)},getImage:function(e){return images[e].cloneNode()},reset:function(){srcStack=[],defStack=[]},progress:function(){return defStack.length?stackDone/defStack.length:1}},fastdom=createCommonjsModule(function(e){!function(t){function n(){var e=this;e.reads=[],e.writes=[],e.raf=l.bind(t),u("initialized",e)}function r(e){e.scheduled||(e.scheduled=!0,e.raf(i.bind(null,e)),u("flush scheduled"))}function i(e){u("flush");var t,n=e.writes,i=e.reads;try{u("flushing reads",i.length),o(i),u("flushing writes",n.length),o(n)}catch(e){t=e}if(e.scheduled=!1,(i.length||n.length)&&r(e),t){if(u("task errored",t.message),!e.catch)throw t;e.catch(t)}}function o(e){u("run tasks");for(var t;t=e.shift();)t()}function a(e,t){var n=e.indexOf(t);return!!~n&&!!e.splice(n,1)}function s(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}var u=function(){},l=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.msRequestAnimationFrame||function(e){return setTimeout(e,16)};n.prototype={constructor:n,measure:function(e,t){u("measure");var n=t?e.bind(t):e;return this.reads.push(n),r(this),n},mutate:function(e,t){u("mutate");var n=t?e.bind(t):e;return this.writes.push(n),r(this),n},clear:function(e){return u("clear",e),a(this.reads,e)||a(this.writes,e)},extend:function(e){if(u("extend",e),"object"!=typeof e)throw new Error("expected object");var t=Object.create(this);return s(t,e),t.fastdom=this,t.initialize&&t.initialize(),t},catch:null};var c=t.fastdom=t.fastdom||new n;e.exports=c}("undefined"!=typeof window?window:commonjsGlobal)}),keyDownArr=[];document.addEventListener("keyup",function(e){keyDownArr[e.which]=!1});var now=window.performance.now?window.performance.now.bind(window.performance):Date.now.bind(Date),actions={showStim:function(e,t,n){var r=e.handle||e;n.stimulusCollection.stimuli.forEach(function(e){"All"!=r&&e.handle!=r||e.show()})},hideStim:function(e,t,n){var r=e.handle||e;n.stimulusCollection.stimuli.forEach(function(e){"All"!=r&&e.handle!=r||e.hide()})},setStimAttr:function(e,t,n){var r=e.handle,i=e.setter;n.stimulusCollection.stimuli.forEach(function(e){"All"!=r&&e.handle!=r||(lodash.isFunction(i)?i.apply(e):lodash.extend(e.data,i))})},setTrialAttr:function(e,t,n){var r=e.setter;if(void 0===r)throw new Error("The setTrialAttr action requires a setter property");lodash.isFunction(r)?r.apply(n,[n.data,t]):lodash.extend(n.data,r)},setInput:function(e,t,n){if(void 0===e.input)throw new Error("The setInput action requires an input property");n.input.add(e.input)},trigger:function(e,t,n){if(void 0===e.handle)throw new Error("The trigger action requires a handle property");n.input.add({handle:e.handle,on:"timeout",duration:+e.duration||0})},removeInput:function(e,t,n){var r=n.input,i=e.handle;if(void 0===i)throw new Error("The removeInput action requires a handle property");"All"==i||lodash.include(i,"All")?r.destroy():r.remove(i)},goto:function(e,t,n){n._next=[e.destination,e.properties]},endTrial:function(e,t,n){n.end()},resetTimer:function(e,t,n){function r(){t.latency=0,n.input.resetTimer()}e.immidiate?r():fastdom.mutate(r)},log:function(e,t,n){n.$logs(arguments)},setGlobalAttr:function(e){switch(typeof e.setter){case"function":e.setter.apply(null,[global$3(),e]);break;case"object":lodash.extend(global$3(),e.setter);break;default:throw new Error('setGlobalAttr requires a "setter" property')}},custom:function(e,t,n){if("function"!=typeof e.fn)throw new Error("The custom action requires a fn propery");e.fn(e,t,n)},canvas:function(e,t,n){var r=n.cavnas,i=canvasContructor({background:{element:document.body,property:"backgroundColor"},canvasBackground:{element:r,property:"backgroundColor"},borderColor:{element:r,property:"borderColor"},borderWidth:{element:r,property:"borderWidth"}},lodash.pick(e,["background","canvasBackground","borderColor","borderWidth"]));n.$end.map(i)}},gid=0;lodash.extend(Trial$1.prototype,{start:function(){var e=this;return this._source.DEBUG&&window.DEBUG&&console.group("Trial: "+this.counter),e.stimulusCollection.ready.then(function(){arrayWrap(e._source.input).forEach(e.input.add),e.input.resetTimer(),e.$events({type:"begin",latency:0})})},end:function(){this._source.DEBUG&&window.DEBUG&&console.groupEnd("Trial: "+this.counter),this.input.destroy(),this.$events.end(!0),this.$end(!0)},name:function(){return this.alias?this.alias:this.data.alias?this.data.alias:lodash.isString(this._source.inherit)?this._source.inherit:lodash.isPlainObject(this._source.inherit)?this._source.inherit.set:void 0}});var module$16=angular.module("pi.task",[]);module$16.provider("taskActivate",provider),module$16.directive("piTask",directive$12),module$16.config(["taskActivateProvider",function(e){function t(e,t,n,r,i,o){var a;return o.name&&(i.name=o.name),n.script=i,t.append("<div pi-quest></div>"),a=t.contents(),r(a)(n),a.controller("piQuest").task.promise.finally(e),function(){a.scope().$destroy(),a.remove()}}t.$inject=["done","$element","$scope","$compile","script","task"],e.set("quest",t)}]),module$16.config(["taskActivateProvider",function(e){function t(e,t,n,r,i){var o;return r.script=n,t.append("<div pi-message></div>"),o=t.contents(),i(o)(r),r.$on("message:done",function(){e()}),function(){r.$destroy(),o.remove()}}t.$inject=["done","$element","task","$scope","$compile"],e.set("message",t)}]),module$16.config(["taskActivateProvider",function(e){function t(e,t,n,r,i){var o=r.defer(),a=i.global,s=t.path?lodash.get(a,t.path):t.data;return n.post(t.url,s,{timeout:o.promise}).then(e,e),o.resolve}t.$inject=["done","task","$http","$q","$rootScope"],e.set("post",t)}]),module$16.config(["taskActivateProvider",function(e){function t(e,t,n){lodash.result(t,"condition",!0)?(n.deactivate(),location.href=t.url):e()}t.$inject=["done","task","managerBeforeUnload"],e.set("redirect",t)}]),module$16.config(["taskActivateProvider",function(e){function t(e,t,n,r){var i,o,a,s=n.version>.3;return o=requirejs$1.config({context:lodash.uniqueId(),baseUrl:n.baseUrl||"../bower_components/PIPlayer/dist/js",paths:{text:["//cdnjs.cloudflare.com/ajax/libs/require-text/2.0.3/text.min","../../bower_components/require-text/text"],jquery:["//cdnjs.cloudflare.com/ajax/libs/jquery/1.10.2/jquery.min","../../bower_components/jquery/dist/jquery.min"],underscore:["//cdnjs.cloudflare.com/ajax/libs/lodash.js/3.10.1/lodash.min","../../bower_components/lodash-compat/lodash.min"],backbone:["//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min","../../bower_components/backbone/backbone"]},deps:s?["underscore"]:["jquery","backbone","underscore"]}),n.name&&(r.name=n.name),t.append("<div pi-player></div>"),(i=t.contents()).addClass("pi-spinner"),o(["activatePIP"],function(t){i.removeClass("pi-spinner"),s?(a=t(i[0],r)).end.map(e):t(r,e)}),function(){i.remove(),s?a.end(!0):o(["app/task/main_view"],function(e){e.deferred.resolve(),e.destroy()})}}t.$inject=["done","$element","task","script"],e.set("pip",t)}]),module$16.config(["taskActivateProvider",function(e){function t(e,t,n,r){var i,o;return n.name&&(r.name=n.name),t.append("<div pi-player></div>"),i=t.contents(),(o=activate$2(i[0],r)).end.map(e),function(){i.remove(),o.end(!0)}}t.$inject=["done","$element","task","script"],e.set("time",t)}]),managerCanvasService.$inject=["$rootElement","$document"];var module$17=angular.module("pi.canvas",[]);module$17.service("managerCanvas",managerCanvasService),swapControler.$inject=["$scope"],lodash.extend(swapControler.prototype,{next:function(e,t){this.$scope.enter(e,t)},prev:function(e,t){this.$scope.enter(e,t)},refresh:function(e){this.$scope.refresh(e)},empty:function(e){this.$scope.empty(e)}}),swapDirective.$inject=["$compile","$animate","$injector"];var template$11='<div>\n\t<img ng-if="spinner" class="pi-logo" src="img/loader.gif" />\n\t<div ng-if="!spinner" ng-transclude></div>\n</div>\n';directive$13.$inject=[];var module$18=angular.module("piHelperDirective",[]);module$18.directive("piSwap",swapDirective),module$18.directive("piSpinner",directive$13);var quotableRgx=/(\n|,|")/;managerService.$inject=["$rootScope","$q","managerSequence","managerTaskLoad","$injector"],sequenceProvider.$inject=["Database","$rootScope","mixerDefaultContext","templateDefaultContext"],managerLoadService.$inject=["$q","managerGetScript"],getScriptProvider.$inject=["$q"],taskLoadService.$inject=["$q","managerGetScript","piConsole"];var addEvent$1=window.attachEvent||window.addEventListener,removeEvent$1=window.detachEvent||window.removeEventListener,chkevent=window.attachEvent?"onbeforeunload":"beforeunload",proto={activate:function(){addEvent$1(chkevent,leaveEvent)},deactivate:function(){removeEvent$1(chkevent,leaveEvent)}};managerControler.$inject=["$scope","managerService","managerLoad","piConsole"],directive$14.$inject=["$q","$injector","piConsole"],piLinkDirective.$inject=["managerBeforeUnload"];var module$15=angular.module("taskManager",[module$16.name,module$17.name,module$12.name,module$18.name,module$4.name]);module$15.service("managerService",managerService),module$15.service("managerSequence",sequenceProvider),module$15.service("managerLoad",managerLoadService),module$15.service("managerGetScript",getScriptProvider),module$15.service("managerTaskLoad",taskLoadService),module$15.factory("managerBeforeUnload",beforeunloadFactory),module$15.constant("managerInjectStyle",injectStyle),module$15.directive("piManager",directive$14),module$15.directive("piManagerTask",directive$15),module$15.directive("piLink",piLinkDirective),function(e,t,n){t.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){return function(e,n,r){var i=r.ngAnimateChildren;t.isString(i)&&0===i.length?n.data("$$ngAnimateChildren",!0):e.$watch(i,function(e){n.data("$$ngAnimateChildren",!!e)})}}).factory("$$animateReflow",["$$rAF","$document",function(e,t){return function(t){return e(function(){t()})}}]).config(["$provide","$animateProvider",function(n,r){function i(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.nodeType==f)return n}}function o(e){return e&&t.element(e)}function a(e){return t.element(i(e))}function s(e,t){return i(e)==i(t)}var u=t.noop,l=t.forEach,c=r.$$selectors,f=1,d="$$ngAnimateState",p="$$ngAnimateChildren",h="ng-animate",m={running:!0};n.decorator("$animate",["$delegate","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document",function(e,n,f,v,g,$,y){function w(e){var t=e.data(d)||{};t.running=!0,e.data(d,t)}function b(e){if(e){var t=[],r={},i=e.substr(1).split(".");(f.transitions||f.animations)&&t.push(n.get(c[""]));for(var o=0;o<i.length;o++){var a=i[o],s=c[a];s&&!r[a]&&(t.push(n.get(s)),r[a]=!0)}return t}}function x(e,n,r){function i(e,t){var n=e[t],r=e["before"+t.charAt(0).toUpperCase()+t.substr(1)];if(n||r)return"leave"==t&&(r=n,n=null),y.push({event:t,fn:n}),v.push({event:t,fn:r}),!0}function o(t,n,i){function o(e){if(n){if((n[e]||u)(),++f<a.length)return;n=null}i()}var a=[];l(t,function(e){e.fn&&a.push(e)});var f=0;l(a,function(t,i){var a=function(){o(i)};switch(t.event){case"setClass":n.push(t.fn(e,s,c,a));break;case"addClass":n.push(t.fn(e,s||r,a));break;case"removeClass":n.push(t.fn(e,c||r,a));break;default:n.push(t.fn(e,a))}}),n&&0===n.length&&i()}var a=e[0];if(a){var s,c,f="setClass"==n,d=f||"addClass"==n||"removeClass"==n;t.isArray(r)&&(s=r[0],c=r[1],r=s+" "+c);var p=e.attr("class")+" "+r;if(P(p)){var h=u,m=[],v=[],g=u,$=[],y=[],w=(" "+p).replace(/\s+/g,".");return l(b(w),function(e){!i(e,n)&&f&&(i(e,"addClass"),i(e,"removeClass"))}),{node:a,event:n,className:r,isClassBased:d,isSetClassOperation:f,before:function(e){h=e,o(v,m,function(){h=u,e()})},after:function(e){g=e,o(y,$,function(){g=u,e()})},cancel:function(){m&&(l(m,function(e){(e||u)(!0)}),h(!0)),$&&(l($,function(e){(e||u)(!0)}),g(!0))}}}}}function C(e,n,r,i,o,a,s){function u(t){var i="$animate:"+t;y&&y[i]&&y[i].length>0&&g(function(){r.triggerHandler(i,{event:e,className:n})})}function c(){u("before")}function f(){u("after")}function p(){u("close"),s&&g(function(){s()})}function m(){m.hasBeenRun||(m.hasBeenRun=!0,a())}function v(){if(!v.hasBeenRun){v.hasBeenRun=!0;var e=r.data(d);e&&($&&$.isClassBased?S(r,n):(g(function(){var e=r.data(d)||{};O==e.index&&S(r,n)}),r.data(d,e))),p()}}var $=x(r,e,n);if(!$)return m(),c(),f(),void v();n=$.className;var y=t.element._data($.node);y=y&&y.events,i||(i=o?o.parent():r.parent());var w,b=r.data(d)||{},C=b.active||{},k=b.totalActive||0,_=b.last;if($.isClassBased&&(w=b.running||b.disabled||_&&!_.isClassBased),w||E(r,i))return m(),c(),f(),void v();var P=!1;if(k>0){var A=[];if($.isClassBased){if("setClass"==_.event)A.push(_),S(r,n);else if(C[n]){var j=C[n];j.event==e?P=!0:(A.push(j),S(r,n))}}else if("leave"==e&&C["ng-leave"])P=!0;else{for(var T in C)A.push(C[T]),S(r,T);C={},k=0}A.length>0&&l(A,function(e){e.cancel()})}if(!$.isClassBased||$.isSetClassOperation||P||(P="addClass"==e==r.hasClass(n)),P)return m(),c(),f(),void p();"leave"==e&&r.one("$destroy",function(e){var n=t.element(this),r=n.data(d);if(r){var i=r.active["ng-leave"];i&&(i.cancel(),S(n,"ng-leave"))}}),r.addClass(h);var O=q++;k++,C[n]=$,r.data(d,{last:$,active:C,index:O,totalActive:k}),c(),$.before(function(t){var i=r.data(d);t=t||!i||!i.active[n]||$.isClassBased&&i.active[n].event!=e,m(),!0===t?v():(f(),$.after(v))})}function k(e){var n=i(e);if(n){var r=t.isFunction(n.getElementsByClassName)?n.getElementsByClassName(h):n.querySelectorAll("."+h);l(r,function(e){var n=(e=t.element(e)).data(d);n&&n.active&&l(n.active,function(e){e.cancel()})})}}function S(e,t){if(s(e,v))m.disabled||(m.running=!1,m.structural=!1);else if(t){var n=e.data(d)||{},r=!0===t;!r&&n.active&&n.active[t]&&(n.totalActive--,delete n.active[t]),!r&&n.totalActive||(e.removeClass(h),e.removeData(d))}}function E(e,n){if(m.disabled)return!0;if(s(e,v))return m.running;var r,i,o;do{if(0===n.length)break;var a=s(n,v),u=a?m:n.data(d)||{};if(u.disabled)return!0;if(a&&(o=!0),!1!==r){var l=n.data(p);t.isDefined(l)&&(r=l)}i=i||u.running||u.last&&!u.last.isClassBased}while(n=n.parent());return!o||!r&&i}var q=0;v.data(d,m),$.$$postDigest(function(){$.$$postDigest(function(){m.running=!1})});var _=r.classNameFilter(),P=_?function(e){return _.test(e)}:function(){return!0};return{enter:function(n,r,i,s){n=t.element(n),r=o(r),i=o(i),w(n),e.enter(n,r,i),$.$$postDigest(function(){C("enter","ng-enter",n=a(n),r,i,u,s)})},leave:function(n,r){k(n=t.element(n)),w(n),$.$$postDigest(function(){C("leave","ng-leave",a(n),null,null,function(){e.leave(n)},r)})},move:function(n,r,i,s){n=t.element(n),r=o(r),i=o(i),k(n),w(n),e.move(n,r,i),$.$$postDigest(function(){C("move","ng-move",n=a(n),r,i,u,s)})},addClass:function(n,r,i){n=t.element(n),n=a(n),C("addClass",r,n,null,null,function(){e.addClass(n,r)},i)},removeClass:function(n,r,i){n=t.element(n),n=a(n),C("removeClass",r,n,null,null,function(){e.removeClass(n,r)},i)},setClass:function(n,r,i,o){n=t.element(n),n=a(n),C("setClass",[r,i],n,null,null,function(){e.setClass(n,r,i)},o)},enabled:function(e,t){switch(arguments.length){case 2:if(e)S(t);else{var n=t.data(d)||{};n.disabled=!0,t.data(d,n)}break;case 1:m.disabled=!e;break;default:e=!m.disabled}return!!e}}}]),r.register("",["$window","$sniffer","$timeout","$$animateReflow",function(n,r,o,a){function s(){D||(D=a(function(){Q=[],D=null,G={}}))}function c(e,t){D&&D(),Q.push(t),D=a(function(){l(Q,function(e){e()}),Q=[],D=null,G={}})}function d(e,n){var r=i(e);e=t.element(r),J.push(e);var a=Date.now()+n;a<=X||(o.cancel(Y),X=a,Y=o(function(){p(J),J=[]},n,!1))}function p(e){l(e,function(e){var t=e.data(L);t&&(t.closeAnimationFn||u)()})}function h(e,t){var r=t?G[t]:null;if(!r){var i,o,a,s,u=0,c=0,d=0,p=0;l(e,function(e){if(e.nodeType==f){var t=n.getComputedStyle(e)||{};a=t[A+N],u=Math.max(m(a),u),s=t[A+R],i=t[A+I],c=Math.max(m(i),c),o=t[T+I],p=Math.max(m(o),p);var r=m(t[T+N]);r>0&&(r*=parseInt(t[T+F],10)||1),d=Math.max(r,d)}}),r={total:0,transitionPropertyStyle:s,transitionDurationStyle:a,transitionDelayStyle:i,transitionDelay:c,transitionDuration:u,animationDelayStyle:o,animationDelay:p,animationDuration:d},t&&(G[t]=r)}return r}function m(e){var n=0,r=t.isString(e)?e.split(/\s*,\s*/):[];return l(r,function(e){n=Math.max(parseFloat(e)||0,n)}),n}function v(e){var t=e.parent(),n=t.data(U);return n||(t.data(U,++W),n=W),n+"-"+i(e).getAttribute("class")}function g(e,t,n,r){var i=v(t),o=i+" "+n,a=G[o]?++G[o].total:0,s={};if(a>0){var l=n+"-stagger",c=i+" "+l,f=!G[c];f&&t.addClass(l),s=h(t,c),f&&t.removeClass(l)}r=r||function(e){return e()},t.addClass(n);var d=t.data(L)||{},p=r(function(){return h(t,o)}),m=p.transitionDuration,g=p.animationDuration;return 0===m&&0===g?(t.removeClass(n),!1):(t.data(L,{running:d.running||0,itemIndex:a,stagger:s,timings:p,closeAnimationFn:u}),m>0&&y(t,n,d.running>0||"setClass"==e),g>0&&s.animationDelay>0&&0===s.animationDuration&&w(t),!0)}function $(e){return"ng-enter"==e||"ng-move"==e||"ng-leave"==e}function y(e,t,n){$(t)||!n?i(e).style[A+R]="none":e.addClass(V)}function w(e){i(e).style[T]="none 0s"}function b(e,t){var n=A+R,r=i(e);r.style[n]&&r.style[n].length>0&&(r.style[n]=""),e.removeClass(V)}function x(e){var t=T,n=i(e);n.style[t]&&n.style[t].length>0&&(n.style[t]="")}function C(e,t,n,r){function o(e){t.off(y,a),t.removeClass(c),_(t,n);var r=i(t);for(var o in b)r.style.removeProperty(b[o])}function a(e){e.stopPropagation();var t=e.originalEvent||e,n=t.$manualTimeStamp||t.timeStamp||Date.now(),i=parseFloat(t.elapsedTime.toFixed(B));Math.max(n-$,0)>=g&&i>=m&&r()}var s=i(t),u=t.data(L);if(-1!=s.getAttribute("class").indexOf(n)&&u){var c="";l(n.split(" "),function(e,t){c+=(t>0?" ":"")+e+"-active"});var f=u.stagger,p=u.timings,h=u.itemIndex,m=Math.max(p.transitionDuration,p.animationDuration),v=Math.max(p.transitionDelay,p.animationDelay),g=v*H,$=Date.now(),y=O+" "+j,w="",b=[];if(p.transitionDuration>0){var x=p.transitionPropertyStyle;-1==x.indexOf("all")&&(w+=M+"transition-property: "+x+";",w+=M+"transition-duration: "+p.transitionDurationStyle+";",b.push(M+"transition-property"),b.push(M+"transition-duration"))}if(h>0){if(f.transitionDelay>0&&0===f.transitionDuration){var C=p.transitionDelayStyle;w+=M+"transition-delay: "+k(C,f.transitionDelay,h)+"; ",b.push(M+"transition-delay")}f.animationDelay>0&&0===f.animationDuration&&(w+=M+"animation-delay: "+k(p.animationDelayStyle,f.animationDelay,h)+"; ",b.push(M+"animation-delay"))}if(b.length>0){var S=s.getAttribute("style")||"";s.setAttribute("style",S+"; "+w)}t.on(y,a),t.addClass(c),u.closeAnimationFn=function(){o(),r()};var E=(h*(Math.max(f.animationDelay,f.transitionDelay)||0)+(v+m)*z)*H;return u.running++,d(t,E),o}r()}function k(e,t,n){var r="";return l(e.split(","),function(e,i){r+=(i>0?",":"")+(n*t+parseInt(e,10))+"s"}),r}function S(e,t,n,r){if(g(e,t,n,r))return function(e){e&&_(t,n)}}function E(e,t,n,r){if(t.data(L))return C(e,t,n,r);_(t,n),r()}function q(e,t,n,r){var i=S(e,t,n);if(!i)return s(),void r();var o=i;return c(t,function(){b(t,n),x(t),o=E(e,t,n,r)}),function(e){(o||u)(e)}}function _(e,t){e.removeClass(t);var n=e.data(L);n&&(n.running&&n.running--,n.running&&0!==n.running||e.removeData(L))}function P(e,n){var r="";return e=t.isArray(e)?e:e.split(/\s+/),l(e,function(e,t){e&&e.length>0&&(r+=(t>0?" ":"")+e+n)}),r}var A,j,T,O,M="";void 0===e.ontransitionend&&void 0!==e.onwebkittransitionend?(M="-webkit-",A="WebkitTransition",j="webkitTransitionEnd transitionend"):(A="transition",j="transitionend"),void 0===e.onanimationend&&void 0!==e.onwebkitanimationend?(M="-webkit-",T="WebkitAnimation",O="webkitAnimationEnd animationend"):(T="animation",O="animationend");var D,N="Duration",R="Property",I="Delay",F="IterationCount",U="$$ngAnimateKey",L="$$ngAnimateCSS3Data",V="ng-animate-block-transitions",B=3,z=1.5,H=1e3,G={},W=0,Q=[],Y=null,X=0,J=[];return{enter:function(e,t){return q("enter",e,"ng-enter",t)},leave:function(e,t){return q("leave",e,"ng-leave",t)},move:function(e,t){return q("move",e,"ng-move",t)},beforeSetClass:function(e,t,n,r){var i=P(n,"-remove")+" "+P(t,"-add"),o=S("setClass",e,i,function(r){var i=e.attr("class");e.removeClass(n),e.addClass(t);var o=r();return e.attr("class",i),o});if(o)return c(e,function(){b(e,i),x(e),r()}),o;s(),r()},beforeAddClass:function(e,t,n){var r=S("addClass",e,P(t,"-add"),function(n){e.addClass(t);var r=n();return e.removeClass(t),r});if(r)return c(e,function(){b(e,t),x(e),n()}),r;s(),n()},setClass:function(e,t,n,r){return E("setClass",e,(n=P(n,"-remove"))+" "+(t=P(t,"-add")),r)},addClass:function(e,t,n){return E("addClass",e,P(t,"-add"),n)},beforeRemoveClass:function(e,t,n){var r=S("removeClass",e,P(t,"-remove"),function(n){var r=e.attr("class");e.removeClass(t);var i=n();return e.attr("class",r),i});if(r)return c(e,function(){b(e,t),x(e),n()}),r;n()},removeClass:function(e,t,n){return E("removeClass",e,P(t,"-remove"),n)}}}])}])}(window,window.angular);for(var vendors=["webkit","moz"],i=0;i<vendors.length&&!window.requestAnimationFrame;++i){var vp=vendors[i];window.requestAnimationFrame=window[vp+"RequestAnimationFrame"],window.cancelAnimationFrame=window[vp+"CancelAnimationFrame"]||window[vp+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var lastTime=0;window.requestAnimationFrame=function(e){var t=+new Date,n=Math.max(lastTime+16,t);return setTimeout(function(){e(lastTime=n)},n-t)},window.cancelAnimationFrame=clearTimeout}var dropInAnimation=["$window","timerNow",animation],fadeAnimation=["$window","timerNow",animation$1],slideAnimation=["$window","timerNow",animation$2],module$19=angular.module("pi.animate",["ngAnimate"]);module$19.animation(".drop-in",dropInAnimation),module$19.animation(".fade",fadeAnimation),module$19.animation(".slide",slideAnimation),consoleProvider$4.$inject=["piConsolePrototype"];var LOGFUNCTIONS$2=["log","info","warn","error","debug"],LEVELS$2={none:9,error:1,warn:2,info:3,log:4,debug:4};consolePrototypeProvider$4.$inject=["$log","$rootScope"];var template$12='<div>\n\t<div\n\t\tng-repeat="log in logs | orderBy:\'time\':true"\n\t\tclass="alert"\n\t\tng-class="{\n\t\t\t\'alert-warning\':log.type == \'warn\',\n\t\t\t\'alert-danger\':log.type == \'error\',\n\t\t\t\'alert-info\':log.type == \'info\',\n\t\t\t\'alert-success\':log.type == \'log\',\n\t\t\t\'alert-success\':log.type == \'debug\'\n\n\t\t}"\n\t\trole="alert"\n\t>\n\t\t<button ng-click="remove(log)" type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>\n\t\t<strong>{{ log.type | uppercase}}:</strong> <i class="text-danger">{{log.time | date : \'HH:mm:ss:sss\'}}</i> - <strong>{{log.tags.join(\' \')}}</strong>:</br>\n\t\t<span\n\t\t\tng-repeat="arg in log.args track by $index"\n\t\t\tng-click="pre = !pre"\n\t\t\tng-class="{pre:pre}"\n\t\t\tng-bind-html="arg | stringify:pre"\n\t\t></span>\n\n\t</div>\n</div>';directive$16.$inject=["$rootScope"];var module$20=angular.module("piConsole",[]);module$20.service("piConsole",consoleProvider$4),module$20.service("piConsolePrototype",consolePrototypeProvider$4),module$20.directive("piConsole",directive$16),module$20.filter("stringify",function(){return stringify$2}),window.require=require,window.requirejs=requirejs$1,window.define=define;var submodules=[module$1.name,module$14.name,module$15.name,module$19.name,module$20.name],app$1=angular.module("piApp",submodules);app$1.run(["$rootScope","$rootElement","$parse","$window",function(e,t,n,r){var i=n(t.attr("pi-global"))(r);window.piGlobal||(window.piGlobal={}),e.global=window.piGlobal,i&&lodash.extend(e.global,i)}]),app$1.config(["$provide",function(e){"function"!=typeof Object.getPrototypeOf&&(Object.getPrototypeOf="object"==typeof"test".__proto__?function(e){return e.__proto__}:function(e){return e.constructor.prototype});e.decorator("$rootScope",["$delegate",function(e){function t(){return++e.$id}var n=Object.getPrototypeOf(e);return n.$new=function(e){var r;return e?((r=new n.constructor).$root=this.$root,r.$$asyncQueue=this.$$asyncQueue,r.$$postDigestQueue=this.$$postDigestQueue):(this.$$childScopeClass||(this.$$childScopeClass=function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$id=t(),this.$$childScopeClass=null},this.$$childScopeClass.prototype=this),r=new this.$$childScopeClass),r.this=r,r.$parent=this,r.$$prevSibling=this.$$childTail,this.$$childHead?(this.$$childTail.$$nextSibling=r,this.$$childTail=r):this.$$childHead=this.$$childTail=r,r},e.$new=n.$new,e}])}]);var noop=function(){};return window.console||(window.console={log:noop,info:noop,error:noop}),define("managerAPI",lodash.constant(manager)),define("timeAPI",lodash.constant(api$1)),define("pipAPI",lodash.constant(api$1)),define("questAPI",lodash.constant(quest)),define("lodash",lodash.constant(lodash)),define("underscore",lodash.constant(lodash)),define("angular",lodash.constant(angular)),angular.element(document).ready(function(){var e=document.getElementById("minno-app");e&&activate$1(e)}),activate$1}();
//# sourceMappingURL=minno.js.map
