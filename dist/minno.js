/**
 * @preserve minno-quest v0.2.14
 * @license Apache-2.0 (2018)
 */
var minnoQuest=function(){"use strict";
/**
 * @license AngularJS v1.2.27
 * (c) 2010-2014 Google, Inc. http://angularjs.org
 * License: MIT
 */
/**
 * @license AngularJS v1.2.27
 * (c) 2010-2014 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(m,Z,ee){function S(s){return function(){var e,t,n,r=arguments[0],i="["+(s?s+":":"")+r+"] ",o=arguments[1],a=arguments;for(e=(e=i+o.replace(/\{\d+\}/g,function(e){var t,n=+e.slice(1,-1);return n+2<a.length?"function"==typeof(t=a[n+2])?t.toString().replace(/ ?\{[\s\S]*$/,""):void 0===t?"undefined":"string"!=typeof t?H(t):t:e}))+"\nhttp://errors.angularjs.org/1.2.27/"+(s?s+"/":"")+r,t=2;t<arguments.length;t++)e=e+(2==t?"?":"&")+"p"+(t-2)+"="+encodeURIComponent("function"==typeof(n=arguments[t])?n.toString().replace(/ \{[\s\S]*$/,""):void 0===n?"undefined":"string"!=typeof n?JSON.stringify(n):n);return new Error(e)}}var x="validity",k=function(e){return oe(e)?e.toLowerCase():e},C=Object.prototype.hasOwnProperty,l=function(e){return oe(e)?e.toUpperCase():e};"i"!=="I".toLowerCase()&&(k=function(e){return oe(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(32|e.charCodeAt(0))}):e},l=function(e){return oe(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(-33&e.charCodeAt(0))}):e});var te,ne,h,p,T,c=[].slice,e=[].push,s=Object.prototype.toString,f=S("ng"),d=m.angular||(m.angular={}),n=["0","0","0"];function P(e){if(null==e||O(e))return!1;var t=e.length;return!(1!==e.nodeType||!t)||(oe(e)||ae(e)||0===t||"number"==typeof t&&0<t&&t-1 in e)}function re(e,t,n){var r;if(e)if(se(e))for(r in e)"prototype"==r||"length"==r||"name"==r||e.hasOwnProperty&&!e.hasOwnProperty(r)||t.call(n,e[r],r);else if(ae(e)||P(e))for(r=0;r<e.length;r++)t.call(n,e[r],r);else if(e.forEach&&e.forEach!==re)e.forEach(t,n);else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r);return e}function I(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t.sort()}function v(n){return function(e,t){n(t,e)}}function i(){for(var e,t=n.length;t;){if(57==(e=n[--t].charCodeAt(0)))return n[t]="A",n.join("");if(90!=e)return n[t]=String.fromCharCode(e+1),n.join("");n[t]="0"}return n.unshift("0"),n.join("")}function g(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function j(n){var e=n.$$hashKey;return re(arguments,function(e){e!==n&&re(e,function(e,t){n[t]=e})}),g(n,e),n}function E(e){return parseInt(e,10)}function $(e,t){return j(new(j(function(){},{prototype:e})),t)}function q(){}function y(e){return e}function w(e){return function(){return e}}function _(e){return void 0===e}function L(e){return void 0!==e}function ie(e){return null!=e&&"object"==typeof e}function oe(e){return"string"==typeof e}function b(e){return"number"==typeof e}function A(e){return"[object Date]"===s.call(e)}te=E((/msie (\d+)/.exec(k(navigator.userAgent))||[])[1]),isNaN(te)&&(te=E((/trident\/.*; rv:(\d+)/.exec(k(navigator.userAgent))||[])[1])),q.$inject=[],y.$inject=[];var ae=se(Array.isArray)?Array.isArray:function(e){return"[object Array]"===s.call(e)};function se(e){return"function"==typeof e}function M(e){return"[object RegExp]"===s.call(e)}function O(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function D(e){return e&&e.$evalAsync&&e.$watch}function R(e){return e&&se(e.then)}var ue=String.prototype.trim?function(e){return oe(e)?e.trim():e}:function(e){return oe(e)?e.replace(/^\s\s*/,"").replace(/\s\s*$/,""):e};function t(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function N(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(t===e[n])return n;return-1}function F(e,t){var n=N(e,t);return 0<=n&&e.splice(n,1),t}function U(e,n,t,r){if(O(e)||D(e))throw f("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(n){if(e===n)throw f("cpi","Can't copy! Source and destination are identical.");if(t=t||[],r=r||[],ie(e)){var i=N(t,e);if(-1!==i)return r[i];t.push(e),r.push(n)}var o;if(ae(e))for(var a=n.length=0;a<e.length;a++)o=U(e[a],null,t,r),ie(e[a])&&(t.push(e[a]),r.push(o)),n.push(o);else{var s=n.$$hashKey;for(var u in ae(n)?n.length=0:re(n,function(e,t){delete n[t]}),e)o=U(e[u],null,t,r),ie(e[u])&&(t.push(e[u]),r.push(o)),n[u]=o;g(n,s)}}else(n=e)&&(ae(e)?n=U(e,[],t,r):A(e)?n=new Date(e.getTime()):M(e)?(n=new RegExp(e.source,e.toString().match(/[^\/]*$/)[0])).lastIndex=e.lastIndex:ie(e)&&(n=U(e,{},t,r)));return n}function le(e,t){if(ae(e)){t=t||[];for(var n=0;n<e.length;n++)t[n]=e[n]}else if(ie(e))for(var r in t=t||{},e)!C.call(e,r)||"$"===r.charAt(0)&&"$"===r.charAt(1)||(t[r]=e[r]);return t||e}function ce(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!=e&&t!=t)return!0;var n,r,i,o=typeof e;if(o==typeof t&&"object"==o){if(!ae(e)){if(A(e))return!!A(t)&&(isNaN(e.getTime())&&isNaN(t.getTime())||e.getTime()===t.getTime());if(M(e)&&M(t))return e.toString()==t.toString();if(D(e)||D(t)||O(e)||O(t)||ae(t))return!1;for(r in i={},e)if("$"!==r.charAt(0)&&!se(e[r])){if(!ce(e[r],t[r]))return!1;i[r]=!0}for(r in t)if(!i.hasOwnProperty(r)&&"$"!==r.charAt(0)&&t[r]!==ee&&!se(t[r]))return!1;return!0}if(!ae(t))return!1;if((n=e.length)==t.length){for(r=0;r<n;r++)if(!ce(e[r],t[r]))return!1;return!0}}return!1}T=te<9?function(e){return(e=e.nodeName?e:e[0]).scopeName&&"HTML"!=e.scopeName?l(e.scopeName+":"+e.nodeName):e.nodeName}:function(e){return e.nodeName?e.nodeName:e[0].nodeName};var V=function(){if(L(V.isActive_))return V.isActive_;var t=!(!Z.querySelector("[ng-csp]")&&!Z.querySelector("[data-ng-csp]"));if(!t)try{new Function("")}catch(e){t=!0}return V.isActive_=t};function B(e,t,n){return e.concat(c.call(t,n))}function fe(e,t){return c.call(e,t||0)}function z(e,t){var n=2<arguments.length?fe(arguments,2):[];return!se(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,n.concat(c.call(arguments,0))):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function r(e,t){var n=t;return"string"==typeof e&&"$"===e.charAt(0)?n=ee:O(t)?n="$WINDOW":t&&Z===t?n="$DOCUMENT":D(t)&&(n="$SCOPE"),n}function H(e,t){return void 0===e?ee:JSON.stringify(e,r,t?"  ":null)}function a(e){return oe(e)?JSON.parse(e):e}function W(e){if("function"==typeof e)e=!0;else if(e&&0!==e.length){var t=k(""+e);e=!("f"==t||"0"==t||"false"==t||"no"==t||"n"==t||"[]"==t)}else e=!1;return e}function de(e){e=ne(e).clone();try{e.empty()}catch(e){}var t=ne("<div>").append(e).html();try{return 3===e[0].nodeType?k(t):t.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(e,t){return"<"+k(t)})}catch(e){return k(t)}}function o(e){try{return decodeURIComponent(e)}catch(e){}}function u(e){var n,r,i={};return re((e||"").split("&"),function(e){if(e&&(n=e.replace(/\+/g,"%20").split("="),L(r=o(n[0])))){var t=!L(n[1])||o(n[1]);C.call(i,r)?ae(i[r])?i[r].push(t):i[r]=[i[r],t]:i[r]=t}}),i}function G(e){var n=[];return re(e,function(e,t){ae(e)?re(e,function(e){n.push(Q(t,!0)+(!0===e?"":"="+Q(e,!0)))}):n.push(Q(t,!0)+(!0===e?"":"="+Q(e,!0)))}),n.length?n.join("&"):""}function X(e){return Q(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Q(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,t?"%20":"+")}function Y(n,r){var t=function(){if((n=ne(n)).injector()){var e=n[0]===Z?"document":de(n);throw f("btstrpd","App Already Bootstrapped with this Element '{0}'",e.replace(/</,"&lt;").replace(/>/,"&gt;"))}(r=r||[]).unshift(["$provide",function(e){e.value("$rootElement",n)}]),r.unshift("ng");var t=st(r);return t.invoke(["$rootScope","$rootElement","$compile","$injector","$animate",function(e,t,n,r,i){e.$apply(function(){t.data("$injector",r),n(t)(e)})}]),t},e=/^NG_DEFER_BOOTSTRAP!/;if(m&&!e.test(m.name))return t();m.name=m.name.replace(e,""),d.resumeBootstrap=function(e){re(e,function(e){r.push(e)}),t()}}var J=/[A-Z]/g;function pe(e,n){return n=n||"_",e.replace(J,function(e,t){return(t?n:"")+e.toLowerCase()})}function he(e,t,n){if(!e)throw f("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function K(e,t,n){return n&&ae(e)&&(e=e[e.length-1]),he(se(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function me(e,t){if("hasOwnProperty"===e)throw f("badname","hasOwnProperty is not a valid {0} name",t)}function ve(e,t,n){if(!t)return e;for(var r,i=t.split("."),o=e,a=i.length,s=0;s<a;s++)r=i[s],e&&(e=(o=e)[r]);return!n&&se(e)?z(o,e):e}function ge(e){var t=e[0],n=e[e.length-1];if(t===n)return ne(t);var r=t,i=[r];do{if(!(r=r.nextSibling))break;i.push(r)}while(r!==n);return ne(i)}var $e={full:"1.2.27",major:1,minor:2,dot:27,codeName:"prime-factorization"};De.expando="ng339";var ye=De.cache={},we=1,be=m.document.addEventListener?function(e,t,n){e.addEventListener(t,n,!1)}:function(e,t,n){e.attachEvent("on"+t,n)},xe=m.document.removeEventListener?function(e,t,n){e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent("on"+t,n)};De._data=function(e){return this.cache[e[this.expando]]||{}};var Se=/([\:\-\_]+(.))/g,Ce=/^moz([A-Z])/,Ee=S("jqLite");function ke(e){return e.replace(Se,function(e,t,n,r){return r?n.toUpperCase():n}).replace(Ce,"Moz$1")}function qe(e,c,f,d){var p=h.fn[e];function t(e){var t,n,r,i,o,a,s,u=f&&e?[this.filter(e)]:[this],l=c;if(!d||null!=e)for(;u.length;)for(n=0,r=(t=u.shift()).length;n<r;n++)for(i=ne(t[n]),l?i.triggerHandler("$destroy"):l=!l,o=0,a=(s=i.children()).length;o<a;o++)u.push(h(s[o]));return p.apply(this,arguments)}p=p.$original||p,t.$original=p,h.fn[e]=t}var _e=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Ae=/<|&#?\w+;/,Pe=/<([\w:]+)/,Me=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Te={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function je(e){return!Ae.test(e)}function Oe(e,t){var n;return t=t||Z,(n=_e.exec(e))?[t.createElement(n[1])]:function(e,t){var n,r,i,o,a,s,u=t.createDocumentFragment(),l=[];if(je(e))l.push(t.createTextNode(e));else{for(n=u.appendChild(t.createElement("div")),r=(Pe.exec(e)||["",""])[1].toLowerCase(),i=Te[r]||Te._default,n.innerHTML="<div>&#160;</div>"+i[1]+e.replace(Me,"<$1></$2>")+i[2],n.removeChild(n.firstChild),o=i[0];o--;)n=n.lastChild;for(a=0,s=n.childNodes.length;a<s;++a)l.push(n.childNodes[a]);(n=u.firstChild).textContent=""}return u.textContent="",u.innerHTML="",l}(e,t)}function De(e){if(e instanceof De)return e;if(oe(e)&&(e=ue(e)),!(this instanceof De)){if(oe(e)&&"<"!=e.charAt(0))throw Ee("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new De(e)}oe(e)?(He(this,Oe(e)),ne(Z.createDocumentFragment()).append(this)):He(this,e)}function Re(e){return e.cloneNode(!0)}function Ne(e){Ie(e);for(var t=0,n=e.childNodes||[];t<n.length;t++)Ne(n[t])}function Fe(n,e,t,r){if(L(r))throw Ee("offargs","jqLite#off() does not support the `selector` argument");var i=Le(n,"events");Le(n,"handle")&&(_(e)?re(i,function(e,t){xe(n,t,e),delete i[t]}):re(e.split(" "),function(e){_(t)?(xe(n,e,i[e]),delete i[e]):F(i[e]||[],t)}))}function Ie(e,t){var n=e.ng339,r=ye[n];if(r){if(t)return void delete ye[n].data[t];r.handle&&(r.events.$destroy&&r.handle({},"$destroy"),Fe(e)),delete ye[n],e.ng339=ee}}function Le(e,t,n){var r=e.ng339,i=ye[r||-1];if(!L(n))return i&&i[t];i||(e.ng339=r=++we,i=ye[r]={}),i[t]=n}function Ue(e,t,n){var r=Le(e,"data"),i=L(n),o=!i&&L(t),a=o&&!ie(t);if(r||a||Le(e,"data",r={}),i)r[t]=n;else{if(!o)return r;if(a)return r&&r[t];j(r,t)}}function Ve(e,t){return!!e.getAttribute&&-1<(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")}function Be(t,e){e&&t.setAttribute&&re(e.split(" "),function(e){t.setAttribute("class",ue((" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+ue(e)+" "," ")))})}function ze(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");re(t.split(" "),function(e){e=ue(e),-1===n.indexOf(" "+e+" ")&&(n+=e+" ")}),e.setAttribute("class",ue(n))}}function He(e,t){if(t){t=t.nodeName||!L(t.length)||O(t)?[t]:t;for(var n=0;n<t.length;n++)e.push(t[n])}}function We(e,t){return Ge(e,"$"+(t||"ngController")+"Controller")}function Ge(e,t,n){9==e.nodeType&&(e=e.documentElement);for(var r=ae(t)?t:[t];e;){for(var i=0,o=r.length;i<o;i++)if((n=ne.data(e,r[i]))!==ee)return n;e=e.parentNode||11===e.nodeType&&e.host}}function Xe(e){for(var t=0,n=e.childNodes;t<n.length;t++)Ne(n[t]);for(;e.firstChild;)e.removeChild(e.firstChild)}Te.optgroup=Te.option,Te.tbody=Te.tfoot=Te.colgroup=Te.caption=Te.thead,Te.th=Te.td;var Qe=De.prototype={ready:function(e){var t=!1;function n(){t||(t=!0,e())}"complete"===Z.readyState?setTimeout(n):(this.on("DOMContentLoaded",n),De(m).on("load",n))},toString:function(){var t=[];return re(this,function(e){t.push(""+e)}),"["+t.join(", ")+"]"},eq:function(e){return ne(0<=e?this[e]:this[this.length+e])},length:0,push:e,sort:[].sort,splice:[].splice},Ye={};re("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){Ye[k(e)]=e});var Je={};function Ke(e,t){var n=Ye[t.toLowerCase()];return n&&Je[e.nodeName]&&n}function Ze(e,t){var n,r=typeof e;return"function"==r||"object"==r&&null!==e?"function"==typeof(n=e.$$hashKey)?n=e.$$hashKey():n===ee&&(n=e.$$hashKey=(t||i)()):n=e,r+":"+n}function et(e,t){if(t){var n=0;this.nextUid=function(){return++n}}re(e,this.put,this)}re("input,select,option,textarea,button,form,details".split(","),function(e){Je[l(e)]=!0}),re({data:Ue,removeData:Ie},function(e,t){De[t]=e}),re({data:Ue,inheritedData:Ge,scope:function(e){return ne.data(e,"$scope")||Ge(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return ne.data(e,"$isolateScope")||ne.data(e,"$isolateScopeNoTemplate")},controller:We,injector:function(e){return Ge(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:Ve,css:function(e,t,n){var r;if(t=ke(t),!L(n))return te<=8&&""===(r=e.currentStyle&&e.currentStyle[t])&&(r="auto"),r=r||e.style[t],te<=8&&(r=""===r?ee:r),r;e.style[t]=n},attr:function(e,t,n){var r=k(t);if(Ye[r]){if(!L(n))return e[t]||(e.attributes.getNamedItem(t)||q).specified?r:ee;n?(e[t]=!0,e.setAttribute(t,r)):(e[t]=!1,e.removeAttribute(r))}else if(L(n))e.setAttribute(t,n);else if(e.getAttribute){var i=e.getAttribute(t,2);return null===i?ee:i}},prop:function(e,t,n){if(!L(n))return e[t];e[t]=n},text:function(){var r=[];return te<9?(r[1]="innerText",r[3]="nodeValue"):r[1]=r[3]="textContent",e.$dv="",e;function e(e,t){var n=r[e.nodeType];if(_(t))return n?e[n]:"";e[n]=t}}(),val:function(e,t){if(_(t)){if("SELECT"===T(e)&&e.multiple){var n=[];return re(e.options,function(e){e.selected&&n.push(e.value||e.text)}),0===n.length?null:n}return e.value}e.value=t},html:function(e,t){if(_(t))return e.innerHTML;for(var n=0,r=e.childNodes;n<r.length;n++)Ne(r[n]);e.innerHTML=t},empty:Xe},function(l,e){De.prototype[e]=function(e,t){var n,r,i=this.length;if(l!==Xe&&(2==l.length&&l!==Ve&&l!==We?e:t)===ee){if(ie(e)){for(n=0;n<i;n++)if(l===Ue)l(this[n],e);else for(r in e)l(this[n],r,e[r]);return this}for(var o=l.$dv,a=o===ee?Math.min(i,1):i,s=0;s<a;s++){var u=l(this[s],e,t);o=o?o+u:u}return o}for(n=0;n<i;n++)l(this[n],e,t);return this}}),re({removeData:Ie,dealoc:Ne,on:function t(i,e,o,n){if(L(n))throw Ee("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");var r,a,s,u=Le(i,"events"),l=Le(i,"handle");u||Le(i,"events",u={}),l||Le(i,"handle",(a=u,(s=function(t,e){if(t.preventDefault||(t.preventDefault=function(){t.returnValue=!1}),t.stopPropagation||(t.stopPropagation=function(){t.cancelBubble=!0}),t.target||(t.target=t.srcElement||Z),_(t.defaultPrevented)){var n=t.preventDefault;t.preventDefault=function(){t.defaultPrevented=!0,n.call(t)},t.defaultPrevented=!1}t.isDefaultPrevented=function(){return t.defaultPrevented||!1===t.returnValue},re(le(a[e||t.type]||[]),function(e){e.call(r,t)}),te<=8?(t.preventDefault=null,t.stopPropagation=null,t.isDefaultPrevented=null):(delete t.preventDefault,delete t.stopPropagation,delete t.isDefaultPrevented)}).elem=r=i,l=s)),re(e.split(" "),function(n){var e=u[n];if(!e){if("mouseenter"==n||"mouseleave"==n){var r=Z.body.contains||Z.body.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1};u[n]=[];t(i,{mouseleave:"mouseout",mouseenter:"mouseover"}[n],function(e){var t=e.relatedTarget;t&&(t===this||r(this,t))||l(e,n)})}else be(i,n,l),u[n]=[];e=u[n]}e.push(o)})},off:Fe,one:function(t,n,r){(t=ne(t)).on(n,function e(){t.off(n,r),t.off(n,e)}),t.on(n,r)},replaceWith:function(t,e){var n,r=t.parentNode;Ne(t),re(new De(e),function(e){n?r.insertBefore(e,n.nextSibling):r.replaceChild(e,t),n=e})},children:function(e){var t=[];return re(e.childNodes,function(e){1===e.nodeType&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(t,e){re(new De(e),function(e){1!==t.nodeType&&11!==t.nodeType||t.appendChild(e)})},prepend:function(t,e){if(1===t.nodeType){var n=t.firstChild;re(new De(e),function(e){t.insertBefore(e,n)})}},wrap:function(e,t){t=ne(t)[0];var n=e.parentNode;n&&n.replaceChild(t,e),t.appendChild(e)},remove:function(e){Ne(e);var t=e.parentNode;t&&t.removeChild(e)},after:function(e,t){var n=e,r=e.parentNode;re(new De(t),function(e){r.insertBefore(e,n.nextSibling),n=e})},addClass:ze,removeClass:Be,toggleClass:function(n,e,r){e&&re(e.split(" "),function(e){var t=r;_(t)&&(t=!Ve(n,e)),(t?ze:Be)(n,e)})},parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},next:function(e){if(e.nextElementSibling)return e.nextElementSibling;for(var t=e.nextSibling;null!=t&&1!==t.nodeType;)t=t.nextSibling;return t},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:Re,triggerHandler:function(t,e,n){var r,i,o,a=e.type||e,s=(Le(t,"events")||{})[a];s&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopPropagation:q,type:a,target:t},e.type&&(r=j(r,e)),i=le(s),o=n?[r].concat(n):[r],re(i,function(e){e.apply(t,o)}))}},function(o,e){De.prototype[e]=function(e,t,n){for(var r,i=0;i<this.length;i++)_(r)?L(r=o(this[i],e,t,n))&&(r=ne(r)):He(r,o(this[i],e,t,n));return L(r)?r:this},De.prototype.bind=De.prototype.on,De.prototype.unbind=De.prototype.off}),et.prototype={put:function(e,t){this[Ze(e,this.nextUid)]=t},get:function(e){return this[Ze(e,this.nextUid)]},remove:function(e){var t=this[e=Ze(e,this.nextUid)];return delete this[e],t}};var tt=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,nt=/,/,rt=/^\s*(_?)(\S+?)\1\s*$/,it=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,ot=S("$injector");function at(e){var r,t;return"function"==typeof e?(r=e.$inject)||(r=[],e.length&&re(e.toString().replace(it,"").match(tt)[1].split(nt),function(e){e.replace(rt,function(e,t,n){r.push(n)})}),e.$inject=r):ae(e)?(K(e[t=e.length-1],"fn"),r=e.slice(0,t)):K(e,"fn",!0),r}function st(e){var r={},i="Provider",a=[],l=new et([],!0),s={$provide:{provider:t(u),factory:t(f),service:t(function(e,t){return f(e,["$injector",function(e){return e.instantiate(t)}])}),value:t(function(e,t){return f(e,w(t))}),constant:t(function(e,t){me(e,"constant"),s[e]=t,n[e]=t}),decorator:function(e,t){var n=c.get(e+i),r=n.$get;n.$get=function(){var e=o.invoke(r,n);return o.invoke(t,null,{$delegate:e})}}}},c=s.$injector=d(s,function(){throw ot("unpr","Unknown provider: {0}",a.join(" <- "))}),n={},o=n.$injector=d(n,function(e){var t=c.get(e+i);return o.invoke(t.$get,t)});return re(function r(e){var i,o,a,s,u=[];re(e,function(t){if(!l.get(t)){l.put(t,!0);try{if(oe(t))for(i=p(t),u=u.concat(r(i.requires)).concat(i._runBlocks),o=i._invokeQueue,a=0,s=o.length;a<s;a++){var e=o[a],n=c.get(e[0]);n[e[1]].apply(n,e[2])}else se(t)?u.push(c.invoke(t)):ae(t)?u.push(c.invoke(t)):K(t,"module")}catch(e){throw ae(t)&&(t=t[t.length-1]),e.message&&e.stack&&-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),ot("modulerr","Failed to instantiate module {0} due to:\n{1}",t,e.stack||e.message||e)}}});return u}(e),function(e){o.invoke(e||q)}),o;function t(n){return function(e,t){if(!ie(e))return n(e,t);re(e,v(n))}}function u(e,t){if(me(e,"service"),(se(t)||ae(t))&&(t=c.instantiate(t)),!t.$get)throw ot("pget","Provider '{0}' must define $get factory method.",e);return s[e+i]=t}function f(e,t){return u(e,{$get:t})}function d(n,e){function u(t){if(n.hasOwnProperty(t)){if(n[t]===r)throw ot("cdep","Circular dependency found: {0}",t+" <- "+a.join(" <- "));return n[t]}try{return a.unshift(t),n[t]=r,n[t]=e(t)}catch(e){throw n[t]===r&&delete n[t],e}finally{a.shift()}}function o(e,t,n){var r,i,o,a=[],s=at(e);for(i=0,r=s.length;i<r;i++){if("string"!=typeof(o=s[i]))throw ot("itkn","Incorrect injection token! Expected service name as string, got {0}",o);a.push(n&&n.hasOwnProperty(o)?n[o]:u(o))}return ae(e)&&(e=e[r]),e.apply(t,a)}return{invoke:o,instantiate:function(e,t){var n,r,i=function(){};return i.prototype=(ae(e)?e[e.length-1]:e).prototype,ie(r=o(e,n=new i,t))||se(r)?r:n},get:u,annotate:at,has:function(e){return s.hasOwnProperty(e+i)||n.hasOwnProperty(e)}}}}function ut(){var n=!0;this.disableAutoScrolling=function(){n=!1},this.$get=["$window","$location","$rootScope",function(i,o,e){var a=i.document;function t(){var e,t,n,r=o.hash();r?(e=a.getElementById(r))?e.scrollIntoView():(t=a.getElementsByName(r),n=null,re(t,function(e){n||"a"!==k(e.nodeName)||(n=e)}),(e=n)?e.scrollIntoView():"top"===r&&i.scrollTo(0,0)):i.scrollTo(0,0)}return n&&e.$watch(function(){return o.hash()},function(){e.$evalAsync(t)}),t}]}var lt=S("$animate"),ct=["$provide",function(r){this.$$selectors={},this.register=function(e,t){var n=e+"-animation";if(e&&"."!=e.charAt(0))throw lt("notcsel","Expecting class selector starting with '.' got '{0}'.",e);this.$$selectors[e.substr(1)]=n,r.factory(n,t)},this.classNameFilter=function(e){return 1===arguments.length&&(this.$$classNameFilter=e instanceof RegExp?e:null),this.$$classNameFilter},this.$get=["$timeout","$$asyncCallback",function(e,t){function i(e){e&&t(e)}return{enter:function(e,t,n,r){n?n.after(e):(t&&t[0]||(t=n.parent()),t.append(e)),i(r)},leave:function(e,t){e.remove(),i(t)},move:function(e,t,n,r){this.enter(e,t,n,r)},addClass:function(e,t,n){t=oe(t)?t:ae(t)?t.join(" "):"",re(e,function(e){ze(e,t)}),i(n)},removeClass:function(e,t,n){t=oe(t)?t:ae(t)?t.join(" "):"",re(e,function(e){Be(e,t)}),i(n)},setClass:function(e,t,n,r){re(e,function(e){ze(e,t),Be(e,n)}),i(r)},enabled:q}}]}];function ft(){this.$get=["$$rAF","$timeout",function(t,n){return t.supported?function(e){return t(e)}:function(e){return n(e,0,!1)}}]}function dt(r,e,s,i){var o=this,u=e[0],a=r.location,l=r.history,c=r.setTimeout,t=r.clearTimeout,f={};o.isMock=!1;var d=0,n=[];function p(e){try{e.apply(null,fe(arguments,1))}finally{if(0===--d)for(;n.length;)try{n.pop()()}catch(e){s.error(e)}}}o.$$completeOutstandingRequest=p,o.$$incOutstandingRequestCount=function(){d++},o.notifyWhenNoOutstandingRequests=function(e){re(m,function(e){e()}),0===d?e():n.push(e)};var h,m=[];o.addPollFn=function(e){var t,n;return _(h)&&(t=100,n=c,function e(){re(m,function(e){e()}),h=n(e,t)}()),m.push(e),e};var v=a.href,g=e.find("base"),$=null;o.url=function(e,t){if(a!==r.location&&(a=r.location),l!==r.history&&(l=r.history),e){if(v==e)return;var n=v&&Vt(v)===Vt(e);return v=e,!n&&i.history?t?l.replaceState(null,"",e):(l.pushState(null,"",e),g.attr("href",g.attr("href"))):(n||($=e),t?a.replace(e):a.href=e),o}return $||a.href.replace(/%27/g,"'")};var y=[],w=!1;function b(){v!=o.url()&&(v=o.url(),re(y,function(e){e(o.url())}))}o.onUrlChange=function(e){return w||(i.history&&ne(r).on("popstate",b),i.hashchange?ne(r).on("hashchange",b):o.addPollFn(b),w=!0),y.push(e),e},o.$$checkUrlChange=b,o.baseHref=function(){var e=g.attr("href");return e?e.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var x={},S="",C=o.baseHref();o.cookies=function(e,t){var n,r,i,o,a;if(!e){if(u.cookie!==S)for(r=(S=u.cookie).split("; "),x={},o=0;o<r.length;o++)0<(a=(i=r[o]).indexOf("="))&&(e=unescape(i.substring(0,a)),x[e]===ee&&(x[e]=unescape(i.substring(a+1))));return x}t===ee?u.cookie=escape(e)+"=;path="+C+";expires=Thu, 01 Jan 1970 00:00:00 GMT":oe(t)&&4096<(n=(u.cookie=escape(e)+"="+escape(t)+";path="+C).length+1)&&s.warn("Cookie '"+e+"' possibly not set or overflowed because it was too large ("+n+" > 4096 bytes)!")},o.defer=function(e,t){var n;return d++,n=c(function(){delete f[n],p(e)},t||0),f[n]=!0,n},o.defer.cancel=function(e){return!!f[e]&&(delete f[e],t(e),p(q),!0)}}function pt(){this.$get=["$window","$log","$sniffer","$document",function(e,t,n,r){return new dt(e,r,t,n)}]}function ht(){this.$get=function(){var f={};function e(e,t){if(e in f)throw S("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var n=0,r=j({},t,{id:e}),i={},o=t&&t.capacity||Number.MAX_VALUE,a={},s=null,u=null;return f[e]={put:function(e,t){o<Number.MAX_VALUE&&l(a[e]||(a[e]={key:e}));if(!_(t))return e in i||n++,i[e]=t,o<n&&this.remove(u.key),t},get:function(e){if(o<Number.MAX_VALUE){var t=a[e];if(!t)return;l(t)}return i[e]},remove:function(e){if(o<Number.MAX_VALUE){var t=a[e];if(!t)return;t==s&&(s=t.p),t==u&&(u=t.n),c(t.n,t.p),delete a[e]}delete i[e],n--},removeAll:function(){i={},n=0,a={},s=u=null},destroy:function(){a=r=i=null,delete f[e]},info:function(){return j({},r,{size:n})}};function l(e){e!=s&&(u?u==e&&(u=e.n):u=e,c(e.n,e.p),c(e,s),(s=e).n=null)}function c(e,t){e!=t&&(e&&(e.p=t),t&&(t.n=e))}}return e.info=function(){var n={};return re(f,function(e,t){n[t]=e.info()}),n},e.get=function(e){return f[e]},e}}function mt(){this.$get=["$cacheFactory",function(e){return e("templates")}]}var vt=S("$compile");function gt(n,t){var p={},h="Directive",P=/^\s*directive\:\s*([\d\w_\-]+)\s+(.*)$/,M=/(([\d\w_\-]+)(?:\:([^;]+))?;?)/,l=/^(on[a-z]+|formaction)$/;this.directive=function e(a,t){return me(a,"directive"),oe(a)?(he(t,"directiveFactory"),p.hasOwnProperty(a)||(p[a]=[],n.factory(a+h,["$injector","$exceptionHandler",function(r,i){var o=[];return re(p[a],function(e,t){try{var n=r.invoke(e);se(n)?n={compile:w(n)}:!n.compile&&n.link&&(n.compile=w(n.link)),n.priority=n.priority||0,n.index=t,n.name=n.name||a,n.require=n.require||n.controller&&n.name,n.restrict=n.restrict||"A",o.push(n)}catch(e){i(e)}}),o}])),p[a].push(t)):re(a,v(e)),this},this.aHrefSanitizationWhitelist=function(e){return L(e)?(t.aHrefSanitizationWhitelist(e),this):t.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return L(e)?(t.imgSrcSanitizationWhitelist(e),this):t.imgSrcSanitizationWhitelist()},this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(d,R,N,e,t,F,I,o,n,s,i,u){var L=function(e,t){this.$$element=e,this.$attr=t||{}};L.prototype={$normalize:yt,$addClass:function(e){e&&0<e.length&&i.addClass(this.$$element,e)},$removeClass:function(e){e&&0<e.length&&i.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=wt(e,t),r=wt(t,e);0===n.length?i.removeClass(this.$$element,r):0===r.length?i.addClass(this.$$element,n):i.setClass(this.$$element,n,r)},$set:function(e,t,n,r){var i,o=Ke(this.$$element[0],e);o&&(this.$$element.prop(e,t),r=o),this[e]=t,r?this.$attr[e]=r:(r=this.$attr[e])||(this.$attr[e]=r=pe(e,"-")),("A"===(i=T(this.$$element))&&"href"===e||"IMG"===i&&"src"===e)&&(this[e]=t=u(t,"src"===e)),!1!==n&&(null===t||t===ee?this.$$element.removeAttr(r):this.$$element.attr(r,t));var a=this.$$observers;a&&re(a[e],function(e){try{e(t)}catch(e){N(e)}})},$observe:function(e,t){var n=this,r=n.$$observers||(n.$$observers={}),i=r[e]||(r[e]=[]);return i.push(t),o.$evalAsync(function(){i.$$inter||t(n[e])}),t}};var r=R.startSymbol(),a=R.endSymbol(),U="{{"==r||"}}"==a?y:function(e){return e.replace(/\{\{/g,r).replace(/}}/g,a)},S=/^ngAttr[A-Z]/;return V;function V(u,e,t,n,r){u instanceof ne||(u=ne(u)),re(u,function(e,t){3==e.nodeType&&e.nodeValue.match(/\S+/)&&(u[t]=e=ne(e).wrap("<span></span>").parent()[0])});var l=q(u,e,u,t,n,r);return B(u,"ng-scope"),function(e,t,n,r){he(e,"scope");var i=t?Qe.clone.call(u):u;re(n,function(e,t){i.data("$"+t+"Controller",e)});for(var o=0,a=i.length;o<a;o++){var s=i[o].nodeType;1!==s&&9!==s||i.eq(o).data("$scope",e)}return t&&t(i,e),l&&l(e,i,i,r),i}}function B(e,t){try{e.addClass(t)}catch(e){}}function q(e,h,t,n,r,i){for(var o,a,s,u,l,c,m=[],f=0;f<e.length;f++)o=new L,(s=(a=z(e[f],[],o,0===f?n:ee,r)).length?A(a,e[f],o,h,t,null,[],[],i):null)&&s.scope&&B(o.$$element,"ng-scope"),l=s&&s.terminal||!(u=e[f].childNodes)||!u.length?null:q(u,s?(s.transcludeOnThisElement||!s.templateOnThisElement)&&s.transclude:h),m.push(s,l),c=c||s||l,i=null;return c?function(e,t,n,r){var i,o,a,s,u,l,c,f,d=t.length,p=new Array(d);for(u=0;u<d;u++)p[u]=t[u];for(c=u=0,l=m.length;u<l;c++)a=p[c],i=m[u++],o=m[u++],i?(i.scope?(s=e.$new(),ne.data(a,"$scope",s)):s=e,f=i.transcludeOnThisElement?_(e,i.transclude,r):!i.templateOnThisElement&&r?r:!r&&h?_(e,h):null,i(o,s,a,n,f)):o&&o(e,a.childNodes,ee,r)}:null}function _(o,a,s){return function(e,t,n){var r=!1;e||(r=(e=o.$new()).$$transcluded=!0);var i=a(e,t,n,s);return r&&i.on("$destroy",function(){e.$destroy()}),i}}function z(e,t,n,r,i){var o,a,s,u,l,c=e.nodeType,f=n.$attr;switch(c){case 1:C(t,yt(T(e).toLowerCase()),"E",r,i);for(var d,p,h,m,v,g,$=e.attributes,y=0,w=$&&$.length;y<w;y++){var b=!1,x=!1;if(d=$[y],!te||8<=te||d.specified)p=d.name,v=ue(d.value),m=yt(p),(g=S.test(m))&&(p=pe(m.substr(6),"-")),m===m.replace(/(Start|End)$/,"")+"Start"&&(x=(b=p).substr(0,p.length-5)+"end",p=p.substr(0,p.length-6)),f[h=yt(p.toLowerCase())]=p,!g&&n.hasOwnProperty(h)||(n[h]=v,Ke(e,h)&&(n[h]=!0)),k(e,t,v,h),C(t,h,"A",r,i,b,x)}if(oe(a=e.className)&&""!==a)for(;o=M.exec(a);)C(t,h=yt(o[2]),"C",r,i)&&(n[h]=ue(o[3])),a=a.substr(o.index+o[0].length);break;case 3:s=t,u=e.nodeValue,(l=R(u,!0))&&s.push({priority:0,compile:function(e){var t=e.parent(),i=t.length;return i&&B(e.parent(),"ng-binding"),function(e,t){var n=t.parent(),r=n.data("$binding")||[];r.push(l),n.data("$binding",r),i||B(n,"ng-binding"),e.$watch(l,function(e){t[0].nodeValue=e})}}});break;case 8:try{(o=P.exec(e.nodeValue))&&C(t,h=yt(o[1]),"M",r,i)&&(n[h]=ue(o[2]))}catch(e){}}return t.sort(E),t}function H(e,t,n){var r=[],i=0;if(t&&e.hasAttribute&&e.hasAttribute(t))do{if(!e)throw vt("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);1==e.nodeType&&(e.hasAttribute(t)&&i++,e.hasAttribute(n)&&i--),r.push(e),e=e.nextSibling}while(0<i);else r.push(e);return ne(r)}function W(o,a,s){return function(e,t,n,r,i){return t=H(t[0],a,s),o(e,t,n,r,i)}}function A(e,v,g,t,n,r,$,y,i){i=i||{};for(var o,a,s,u,l,c,f=-Number.MAX_VALUE,w=i.controllerDirectives,b=i.newIsolateScopeDirective,x=i.templateDirective,d=i.nonTlbTranscludeDirective,p=!1,h=!1,S=i.hasElementTranscludeDirective,m=g.$$element=ne(v),C=r,E=t,k=0,q=e.length;k<q;k++){var _=(a=e[k]).$$start,A=a.$$end;if(_&&(m=H(v,_,A)),u=ee,f>a.priority)break;if((c=a.scope)&&(o=o||a,a.templateUrl||(Y("new/isolated scope",b,a,m),ie(c)&&(b=a))),s=a.name,!a.templateUrl&&a.controller&&(c=a.controller,Y("'"+s+"' controller",(w=w||{})[s],a,m),w[s]=a),(c=a.transclude)&&(p=!0,a.$$tlb||(Y("transclusion",d,a,m),d=a),"element"==c?(S=!0,f=a.priority,u=m,m=g.$$element=ne(Z.createComment(" "+s+": "+g[s]+" ")),v=m[0],J(n,fe(u),v),E=V(u,t,f,C&&C.name,{nonTlbTranscludeDirective:d})):(u=ne(Re(v)).contents(),m.empty(),E=V(u,t))),a.template)if(h=!0,Y("template",x,a,m),c=se((x=a).template)?a.template(m,g):a.template,c=U(c),a.replace){if(C=a,u=je(c)?[]:ne(ue(c)),v=u[0],1!=u.length||1!==v.nodeType)throw vt("tplrt","Template for directive '{0}' must have exactly one root element. {1}",s,"");J(n,m,v);var P={$attr:{}},M=z(v,[],P),T=e.splice(k+1,e.length-(k+1));b&&G(M),e=e.concat(M).concat(T),X(g,P),q=e.length}else m.html(c);if(a.templateUrl)h=!0,Y("template",x,a,m),(x=a).replace&&(C=a),D=Q(e.splice(k,e.length-k),m,g,n,p&&E,$,y,{controllerDirectives:w,newIsolateScopeDirective:b,templateDirective:x,nonTlbTranscludeDirective:d}),q=e.length;else if(a.compile)try{se(l=a.compile(m,g,E))?j(null,l,_,A):l&&j(l.pre,l.post,_,A)}catch(e){N(e,de(m))}a.terminal&&(D.terminal=!0,f=Math.max(f,a.priority))}return D.scope=o&&!0===o.scope,D.transcludeOnThisElement=p,D.templateOnThisElement=h,D.transclude=E,i.hasElementTranscludeDirective=S,D;function j(e,t,n,r){e&&(n&&(e=W(e,n,r)),e.require=a.require,e.directiveName=s,(b===a||a.$$isolateScope)&&(e=K(e,{isolateScope:!0})),$.push(e)),t&&(n&&(t=W(t,n,r)),t.require=a.require,t.directiveName=s,(b===a||a.$$isolateScope)&&(t=K(t,{isolateScope:!0})),y.push(t))}function O(t,e,n,r){var i,o="data",a=!1;if(oe(e)){for(;"^"==(i=e.charAt(0))||"?"==i;)e=e.substr(1),"^"==i&&(o="inheritedData"),a=a||"?"==i;if(i=null,r&&"data"===o&&(i=r[e]),!(i=i||n[o]("$"+e+"Controller"))&&!a)throw vt("ctreq","Controller '{0}', required by directive '{1}', can't be found!",e,t);return i}return ae(e)&&(i=[],re(e,function(e){i.push(O(t,e,n,r))})),i}function D(e,c,t,n,r){var f,i,o,a,s,u,d,l,p={};if(f=v===t?g:le(g,new L(ne(t),g.$attr)),i=f.$$element,b){var h=/^\s*([@=&])(\??)\s*(\w*)\s*$/;d=c.$new(!0),!x||x!==b&&x!==b.$$originalDirective?i.data("$isolateScopeNoTemplate",d):i.data("$isolateScope",d),B(i,"ng-isolate-scope"),re(b.scope,function(e,t){var n,r,i,o,a=e.match(h)||[],s=a[3]||t,u="?"==a[2],l=a[1];switch(d.$$isolateBindings[t]=l+s,l){case"@":f.$observe(s,function(e){d[t]=e}),f.$$observers[s].$$scope=c,f[s]&&(d[t]=R(f[s])(c));break;case"=":if(u&&!f[s])return;r=F(f[s]),o=r.literal?ce:function(e,t){return e===t||e!=e&&t!=t},i=r.assign||function(){throw n=d[t]=r(c),vt("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",f[s],b.name)},n=d[t]=r(c),d.$watch(function(){var e=r(c);return o(e,d[t])||(o(e,n)?i(c,e=d[t]):d[t]=e),n=e},null,r.literal);break;case"&":r=F(f[s]),d[t]=function(e){return r(c,e)};break;default:throw vt("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",b.name,t,e)}})}for(l=r&&function(e,t){var n;arguments.length<2&&(t=e,e=ee);S&&(n=p);return r(e,t,n)},w&&re(w,function(e){var t,n={$scope:e===b||e.$$isolateScope?d:c,$element:i,$attrs:f,$transclude:l};"@"==(u=e.controller)&&(u=f[e.name]),t=I(u,n),p[e.name]=t,S||i.data("$"+e.name+"Controller",t),e.controllerAs&&(n.$scope[e.controllerAs]=t)}),o=0,a=$.length;o<a;o++)try{(s=$[o])(s.isolateScope?d:c,i,f,s.require&&O(s.directiveName,s.require,i,p),l)}catch(e){N(e,de(i))}var m=c;for(b&&(b.template||null===b.templateUrl)&&(m=d),e&&e(m,t.childNodes,ee,r),o=y.length-1;0<=o;o--)try{(s=y[o])(s.isolateScope?d:c,i,f,s.require&&O(s.directiveName,s.require,i,p),l)}catch(e){N(e,de(i))}}}function G(e){for(var t=0,n=e.length;t<n;t++)e[t]=$(e[t],{$$isolateScope:!0})}function C(e,t,n,r,i,o,a){if(t===i)return null;var s=null;if(p.hasOwnProperty(t))for(var u,l=d.get(t+h),c=0,f=l.length;c<f;c++)try{u=l[c],(r===ee||r>u.priority)&&-1!=u.restrict.indexOf(n)&&(o&&(u=$(u,{$$start:o,$$end:a})),e.push(u),s=u)}catch(e){N(e)}return s}function X(n,r){var i=r.$attr,o=n.$attr,a=n.$$element;re(n,function(e,t){"$"!=t.charAt(0)&&(r[t]&&r[t]!==e&&(e+=("style"===t?";":" ")+r[t]),n.$set(t,e,!0,i[t]))}),re(r,function(e,t){"class"==t?(B(a,e),n.class=(n.class?n.class+" ":"")+e):"style"==t?(a.attr("style",a.attr("style")+";"+e),n.style=(n.style?n.style+";":"")+e):"$"==t.charAt(0)||n.hasOwnProperty(t)||(n[t]=e,o[t]=i[t])})}function Q(d,p,h,m,v,g,$,y){var w,b,x=[],S=p[0],C=d.shift(),E=j({},C,{templateUrl:null,transclude:null,replace:null,$$originalDirective:C}),k=se(C.templateUrl)?C.templateUrl(p,h):C.templateUrl;return p.empty(),e.get(s.getTrustedResourceUrl(k),{cache:t}).success(function(e){var n,t,r,i;if(e=U(e),C.replace){if(r=je(e)?[]:ne(ue(e)),n=r[0],1!=r.length||1!==n.nodeType)throw vt("tplrt","Template for directive '{0}' must have exactly one root element. {1}",C.name,k);t={$attr:{}},J(m,p,n);var o=z(n,[],t);ie(C.scope)&&G(o),d=o.concat(d),X(h,t)}else n=S,p.html(e);for(d.unshift(E),w=A(d,n,h,v,p,C,g,$,y),re(m,function(e,t){e==n&&(m[t]=p[0])}),b=q(p[0].childNodes,v);x.length;){var a=x.shift(),s=x.shift(),u=x.shift(),l=x.shift(),c=p[0];if(s!==S){var f=s.className;y.hasElementTranscludeDirective&&C.replace||(c=Re(n)),J(u,ne(s),c),B(ne(c),f)}i=w.transcludeOnThisElement?_(a,w.transclude,l):l,w(b,a,c,m,i)}x=null}).error(function(e,t,n,r){throw vt("tpload","Failed to load template: {0}",r.url)}),function(e,t,n,r,i){var o=i;x?(x.push(t),x.push(n),x.push(r),x.push(o)):(w.transcludeOnThisElement&&(o=_(t,w.transclude,i)),w(b,t,n,r,o))}}function E(e,t){var n=t.priority-e.priority;return 0!==n?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function Y(e,t,n,r){if(t)throw vt("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",t.name,n.name,e,de(r))}function k(i,e,t,o){var a=R(t,!0);if(a){if("multiple"===o&&"SELECT"===T(i))throw vt("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",de(i));e.push({priority:100,compile:function(){return{pre:function(e,t,n){var r=n.$$observers||(n.$$observers={});if(l.test(o))throw vt("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");(a=R(n[o],!0,function(e,t){if("srcdoc"==t)return s.HTML;var n=T(e);return"xlinkHref"==t||"FORM"==n&&"action"==t||"IMG"!=n&&("src"==t||"ngSrc"==t)?s.RESOURCE_URL:void 0}(i,o)))&&(n[o]=a(e),(r[o]||(r[o]=[])).$$inter=!0,(n.$$observers&&n.$$observers[o].$$scope||e).$watch(a,function(e,t){"class"===o&&e!=t?n.$updateClass(e,t):n.$set(o,e)}))}}}})}}function J(e,t,n){var r,i,o=t[0],a=t.length,s=o.parentNode;if(e)for(r=0,i=e.length;r<i;r++)if(e[r]==o){e[r++]=n;for(var u=r,l=u+a-1,c=e.length;u<c;u++,l++)l<c?e[u]=e[l]:delete e[u];e.length-=a-1;break}s&&s.replaceChild(n,o);var f=Z.createDocumentFragment();f.appendChild(o),n[ne.expando]=o[ne.expando];for(var d=1,p=t.length;d<p;d++){var h=t[d];ne(h).remove(),f.appendChild(h),delete t[d]}t[0]=n,t.length=1}function K(e,t){return j(function(){return e.apply(null,arguments)},e,t)}}]}gt.$inject=["$provide","$$sanitizeUriProvider"];var $t=/^(x[\:\-_]|data[\:\-_])/i;function yt(e){return ke(e.replace($t,""))}function wt(e,t){var n="",r=e.split(/\s+/),i=t.split(/\s+/);e:for(var o=0;o<r.length;o++){for(var a=r[o],s=0;s<i.length;s++)if(a==i[s])continue e;n+=(0<n.length?" ":"")+a}return n}function bt(){var u={},l=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(e,t){me(e,"controller"),ie(e)?j(u,e):u[e]=t},this.$get=["$injector","$window",function(a,s){return function(e,t){var n,r,i,o;if(oe(e)&&(i=(r=e.match(l))[1],o=r[3],K(e=u.hasOwnProperty(i)?u[i]:ve(t.$scope,i,!0)||ve(s,i,!0),i,!0)),n=a.instantiate(e,t),o){if(!t||"object"!=typeof t.$scope)throw S("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",i||e.name,o);t.$scope[o]=n}return n}}]}function xt(){this.$get=["$window",function(e){return ne(e.document)}]}function St(){this.$get=["$log",function(n){return function(e,t){n.error.apply(n,arguments)}}]}function Ct(e){var t,n,r,i={};return e&&re(e.split("\n"),function(e){r=e.indexOf(":"),t=k(ue(e.substr(0,r))),n=ue(e.substr(r+1)),t&&(i[t]=i[t]?i[t]+", "+n:n)}),i}function Et(t){var n=ie(t)?t:ee;return function(e){return n||(n=Ct(t)),e?n[k(e)]||null:n}}function kt(t,n,e){return se(e)?e(t,n):(re(e,function(e){t=e(t,n)}),t)}function qt(e){return 200<=e&&e<300}function _t(){var t=/^\s*(\[|\{[^\{])/,n=/[\}\]]\s*$/,r=/^\)\]\}',?\n/,e={"Content-Type":"application/json;charset=utf-8"},g=this.defaults={transformResponse:[function(e){return oe(e)&&(e=e.replace(r,""),t.test(e)&&n.test(e)&&(e=a(e))),e}],transformRequest:[function(e){return ie(e)&&(n=e,"[object File]"!==s.call(n))&&(t=e,"[object Blob]"!==s.call(t))?H(e):e;var t,n}],headers:{common:{Accept:"application/json, text/plain, */*"},post:le(e),put:le(e),patch:le(e)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},i=this.interceptors=[],o=this.responseInterceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(f,d,e,p,h,r){var m=e("$http"),u=[];function v(e){var n={method:"get",transformRequest:g.transformRequest,transformResponse:g.transformResponse},r=function(e){var t,n,r,i=g.headers,o=j({},e.headers);i=j({},i.common,i[k(e.method)]);e:for(t in i){for(r in n=k(t),o)if(k(r)===n)continue e;o[t]=i[t]}return a=o,re(a,function(e,t){se(e)&&(null!=(s=e())?a[t]=s:delete a[t])}),o;var a,s}(e);j(n,e),n.headers=r,n.method=l(n.method);var t=[function(e){r=e.headers;var t=kt(e.data,Et(r),e.transformRequest);return _(t)&&re(r,function(e,t){"content-type"===k(t)&&delete r[t]}),_(e.withCredentials)&&!_(g.withCredentials)&&(e.withCredentials=g.withCredentials),function(i,e,t){var o,n,a=h.defer(),r=a.promise,s=function(e,t){if(!t)return e;var n=[];return function(e,t,n){for(var r=I(e),i=0;i<r.length;i++)t.call(n,e[r[i]],r[i])}(t,function(e,t){null===e||_(e)||(ae(e)||(e=[e]),re(e,function(e){ie(e)&&(e=A(e)?e.toISOString():H(e)),n.push(Q(t)+"="+Q(e))}))}),0<n.length&&(e+=(-1==e.indexOf("?")?"?":"&")+n.join("&")),e}(i.url,i.params);if(v.pendingRequests.push(i),r.then(c,c),!i.cache&&!g.cache||!1===i.cache||"GET"!==i.method&&"JSONP"!==i.method||(o=ie(i.cache)?i.cache:ie(g.cache)?g.cache:m),o)if(L(n=o.get(s))){if(R(n))return n.then(c,c),n;ae(n)?l(n[1],n[0],le(n[2]),n[3]):l(n,200,{},"OK")}else o.put(s,r);if(_(n)){var u=Mn(i.url)?d.cookies()[i.xsrfCookieName||g.xsrfCookieName]:ee;u&&(t[i.xsrfHeaderName||g.xsrfHeaderName]=u),f(i.method,s,e,function(e,t,n,r){o&&(qt(e)?o.put(s,[e,t,Ct(n),r]):o.remove(s)),l(t,e,n,r),p.$$phase||p.$apply()},t,i.timeout,i.withCredentials,i.responseType)}return r;function l(e,t,n,r){(qt(t=Math.max(t,0))?a.resolve:a.reject)({data:e,status:t,headers:Et(n),config:i,statusText:r})}function c(){var e=N(v.pendingRequests,i);-1!==e&&v.pendingRequests.splice(e,1)}}(e,t,r).then(s,s)},ee],i=h.when(n);for(re(u,function(e){(e.request||e.requestError)&&t.unshift(e.request,e.requestError),(e.response||e.responseError)&&t.push(e.response,e.responseError)});t.length;){var o=t.shift(),a=t.shift();i=i.then(o,a)}return i.success=function(t){return i.then(function(e){t(e.data,e.status,e.headers,n)}),i},i.error=function(t){return i.then(null,function(e){t(e.data,e.status,e.headers,n)}),i},i;function s(e){var t=j({},e,{data:kt(e.data,e.headers,n.transformResponse)});return qt(e.status)?t:h.reject(t)}}return re(i,function(e){u.unshift(oe(e)?r.get(e):r.invoke(e))}),re(o,function(e,t){var n=oe(e)?r.get(e):r.invoke(e);u.splice(t,0,{response:function(e){return n(h.when(e))},responseError:function(e){return n(h.reject(e))}})}),v.pendingRequests=[],function(e){re(arguments,function(n){v[n]=function(e,t){return v(j(t||{},{method:n,url:e}))}})}("get","delete","head","jsonp"),function(e){re(arguments,function(r){v[r]=function(e,t,n){return v(j(n||{},{method:r,url:e,data:t}))}})}("post","put","patch"),v.defaults=g,v}]}function At(e){if(te<=8&&(!e.match(/^(get|post|head|put|delete|options)$/i)||!m.XMLHttpRequest))return new m.ActiveXObject("Microsoft.XMLHTTP");if(m.XMLHttpRequest)return new m.XMLHttpRequest;throw S("$httpBackend")("noxhr","This browser does not support XMLHttpRequest.")}function Pt(){this.$get=["$browser","$window","$document",function(e,t,n){return b=At,x=(w=e).defer,S=t.angular.callbacks,C=n[0],E=-1,function(e,o,t,r,n,i,a,s){var u,l,c,f,d,p;if(w.$$incOutstandingRequestCount(),o=o||w.url(),"jsonp"==k(e)){var h="_"+(S.counter++).toString(36);S[h]=function(e){S[h].data=e,S[h].called=!0};var m=(l=o.replace("JSON_CALLBACK","angular.callbacks."+h),c=h,f=function(e,t){y(r,e,S[h].data,"",t),S[h]=q},d=C.createElement("script"),p=null,d.type="text/javascript",d.src=l,d.async=!0,p=function(e){xe(d,"load",p),xe(d,"error",p),C.body.removeChild(d),d=null;var t=-1,n="unknown";e&&("load"!==e.type||S[c].called||(e={type:"error"}),n=e.type,t="error"===e.type?404:200),f&&f(t,n)},be(d,"load",p),be(d,"error",p),te<=8&&(d.onreadystatechange=function(){oe(d.readyState)&&/loaded|complete/.test(d.readyState)&&(d.onreadystatechange=null,p({type:"load"}))}),C.body.appendChild(d),p)}else{var v=b(e);if(v.open(e,o,!0),re(n,function(e,t){L(e)&&v.setRequestHeader(t,e)}),v.onreadystatechange=function(){if(v&&4==v.readyState){var e=null,t=null,n="";u!==E&&(e=v.getAllResponseHeaders(),t="response"in v?v.response:v.responseText),u===E&&te<10||(n=v.statusText),y(r,u||v.status,t,e,n)}},a&&(v.withCredentials=!0),s)try{v.responseType=s}catch(e){if("json"!==s)throw e}v.send(t||null)}if(0<i)var g=x($,i);else R(i)&&i.then($);function $(){u=E,m&&m(),v&&v.abort()}function y(e,t,n,r,i){g&&x.cancel(g),m=v=null,0===t&&(t=n?200:"file"==Pn(o).protocol?404:0),e(t=1223===t?204:t,n,r,i=i||""),w.$$completeOutstandingRequest(q)}};var w,b,x,S,C,E}]}var Mt=S("$interpolate");function Tt(){var g="{{",$="}}";this.startSymbol=function(e){return e?(g=e,this):g},this.endSymbol=function(e){return e?($=e,this):$},this.$get=["$parse","$exceptionHandler","$sce",function(d,p,h){var m=g.length,v=$.length;function e(o,e,a){for(var t,n,r,i,s=0,u=[],l=o.length,c=!1,f=[];s<l;)-1!=(t=o.indexOf(g,s))&&-1!=(n=o.indexOf($,t+m))?(s!=t&&u.push(o.substring(s,t)),u.push(r=d(i=o.substring(t+m,n))),r.exp=i,s=n+v,c=!0):(s!=l&&u.push(o.substring(s)),s=l);if((l=u.length)||(u.push(""),l=1),a&&1<u.length)throw Mt("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",o);if(!e||c)return f.length=l,(r=function(e){try{for(var t,n=0,r=l;n<r;n++){if("function"==typeof(t=u[n]))if(t=t(e),null==(t=a?h.getTrusted(a,t):h.valueOf(t)))t="";else switch(typeof t){case"string":break;case"number":t=""+t;break;default:t=H(t)}f[n]=t}return f.join("")}catch(e){var i=Mt("interr","Can't interpolate: {0}\n{1}",o,e.toString());p(i)}}).exp=o,r.parts=u,r}return e.startSymbol=function(){return g},e.endSymbol=function(){return $},e}]}function jt(){this.$get=["$rootScope","$window","$q",function(c,f,d){var p={};function e(e,t,n,r){var i=f.setInterval,o=f.clearInterval,a=d.defer(),s=a.promise,u=0,l=L(r)&&!r;return n=L(n)?n:0,s.then(null,null,e),s.$$intervalId=i(function(){a.notify(u++),0<n&&n<=u&&(a.resolve(u),o(s.$$intervalId),delete p[s.$$intervalId]),l||c.$apply()},t),p[s.$$intervalId]=a,s}return e.cancel=function(e){return!!(e&&e.$$intervalId in p)&&(p[e.$$intervalId].reject("canceled"),f.clearInterval(e.$$intervalId),delete p[e.$$intervalId],!0)},e}]}function Ot(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"¤",posSuf:"",negPre:"(¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a",short:"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(e){return 1===e?"one":"other"}}}}var Dt=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,Rt={http:80,https:443,ftp:21},Nt=S("$location");function Ft(e){for(var t=e.split("/"),n=t.length;n--;)t[n]=X(t[n]);return t.join("/")}function It(e,t,n){var r=Pn(e,n);t.$$protocol=r.protocol,t.$$host=r.hostname,t.$$port=E(r.port)||Rt[r.protocol]||null}function Lt(e,t,n){var r="/"!==e.charAt(0);r&&(e="/"+e);var i=Pn(e,n);t.$$path=decodeURIComponent(r&&"/"===i.pathname.charAt(0)?i.pathname.substring(1):i.pathname),t.$$search=u(i.search),t.$$hash=decodeURIComponent(i.hash),t.$$path&&"/"!=t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function Ut(e,t){if(0===t.indexOf(e))return t.substr(e.length)}function Vt(e){var t=e.indexOf("#");return-1==t?e:e.substr(0,t)}function Bt(e){return e.substr(0,Vt(e).lastIndexOf("/")+1)}function zt(o,a){this.$$html5=!0,a=a||"";var s=Bt(o);It(o,this,o),this.$$parse=function(e){var t=Ut(s,e);if(!oe(t))throw Nt("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',e,s);Lt(t,this,o),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=G(this.$$search),t=this.$$hash?"#"+X(this.$$hash):"";this.$$url=Ft(this.$$path)+(e?"?"+e:"")+t,this.$$absUrl=s+this.$$url.substr(1)},this.$$parseLinkUrl=function(e,t){var n,r,i;return(n=Ut(o,e))!==ee?i=(n=Ut(a,r=n))!==ee?s+(Ut("/",n)||n):o+r:(n=Ut(s,e))!==ee?i=s+n:s==e+"/"&&(i=s),i&&this.$$parse(i),!!i}}function Ht(r,i){var o=Bt(r);It(r,this,r),this.$$parse=function(e){var t=Ut(r,e)||Ut(o,e),n="#"==t.charAt(0)?Ut(i,t):this.$$html5?t:"";if(!oe(n))throw Nt("ihshprfx",'Invalid url "{0}", missing hash prefix "{1}".',e,i);Lt(n,this,r),this.$$path=function(e,t,n){var r,i=/^\/[A-Z]:(\/.*)/;0===t.indexOf(n)&&(t=t.replace(n,""));if(i.exec(t))return e;return(r=i.exec(e))?r[1]:e}(this.$$path,n,r),this.$$compose()},this.$$compose=function(){var e=G(this.$$search),t=this.$$hash?"#"+X(this.$$hash):"";this.$$url=Ft(this.$$path)+(e?"?"+e:"")+t,this.$$absUrl=r+(this.$$url?i+this.$$url:"")},this.$$parseLinkUrl=function(e,t){return Vt(r)==Vt(e)&&(this.$$parse(e),!0)}}function Wt(i,o){this.$$html5=!0,Ht.apply(this,arguments);var a=Bt(i);this.$$parseLinkUrl=function(e,t){var n,r;return i==Vt(e)?n=e:(r=Ut(a,e))?n=i+o+r:a===e+"/"&&(n=a),n&&this.$$parse(n),!!n},this.$$compose=function(){var e=G(this.$$search),t=this.$$hash?"#"+X(this.$$hash):"";this.$$url=Ft(this.$$path)+(e?"?"+e:"")+t,this.$$absUrl=i+o+this.$$url}}function Gt(e){return function(){return this[e]}}function Xt(t,n){return function(e){return _(e)?this[t]:(this[t]=n(e),this.$$compose(),this)}}function Qt(){var p="",h=!1;this.hashPrefix=function(e){return L(e)?(p=e,this):p},this.html5Mode=function(e){return L(e)?(h=e,this):h},this.$get=["$rootScope","$browser","$sniffer","$rootElement",function(i,o,e,a){var s,t,n,r,u=o.baseHref(),l=o.url();h?(n=(r=l).substring(0,r.indexOf("/",r.indexOf("//")+2))+(u||"/"),t=e.history?zt:Wt):(n=Vt(l),t=Ht),(s=new t(n,"#"+p)).$$parseLinkUrl(l,l);var c=/^\s*(javascript|mailto):/i;a.on("click",function(e){if(!e.ctrlKey&&!e.metaKey&&2!=e.which){for(var t=ne(e.target);"a"!==k(t[0].nodeName);)if(t[0]===a[0]||!(t=t.parent())[0])return;var n=t.prop("href"),r=t.attr("href")||t.attr("xlink:href");ie(n)&&"[object SVGAnimatedString]"===n.toString()&&(n=Pn(n.animVal).href),c.test(n)||!n||t.attr("target")||e.isDefaultPrevented()||s.$$parseLinkUrl(n,r)&&(e.preventDefault(),s.absUrl()!=o.url()&&(i.$apply(),m.angular["ff-684208-preventDefault"]=!0))}}),s.absUrl()!=l&&o.url(s.absUrl(),!0),o.onUrlChange(function(t){s.absUrl()!=t&&(i.$evalAsync(function(){var e=s.absUrl();s.$$parse(t),i.$broadcast("$locationChangeStart",t,e).defaultPrevented?(s.$$parse(e),o.url(e)):d(e)}),i.$$phase||i.$digest())});var f=0;return i.$watch(function(){var e=o.url(),t=s.$$replace;return f&&e==s.absUrl()||(f++,i.$evalAsync(function(){i.$broadcast("$locationChangeStart",s.absUrl(),e).defaultPrevented?s.$$parse(e):(o.url(s.absUrl(),t),d(e))})),s.$$replace=!1,f}),s;function d(e){i.$broadcast("$locationChangeSuccess",s.absUrl(),e)}}]}function Yt(){var n=!0,r=this;this.debugEnabled=function(e){return L(e)?(n=e,this):n},this.$get=["$window",function(i){return{log:t("log"),info:t("info"),warn:t("warn"),error:t("error"),debug:(e=t("debug"),function(){n&&e.apply(r,arguments)})};var e;function t(e){var t=i.console||{},r=t[e]||t.log||q,n=!1;try{n=!!r.apply}catch(e){}return n?function(){var n=[];return re(arguments,function(e){var t;n.push(((t=e)instanceof Error&&(t.stack?t=t.message&&-1===t.stack.indexOf(t.message)?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t))}),r.apply(t,n)}:function(e,t){r(e,null==t?"":t)}}}]}Wt.prototype=Ht.prototype=zt.prototype={$$html5:!1,$$replace:!1,absUrl:Gt("$$absUrl"),url:function(e){if(_(e))return this.$$url;var t=Dt.exec(e);return t[1]&&this.path(decodeURIComponent(t[1])),(t[2]||t[1])&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:Gt("$$protocol"),host:Gt("$$host"),port:Gt("$$port"),path:Xt("$$path",function(e){return"/"==(e=null!==e?e.toString():"").charAt(0)?e:"/"+e}),search:function(n,e){switch(arguments.length){case 0:return this.$$search;case 1:if(oe(n)||b(n))n=n.toString(),this.$$search=u(n);else{if(!ie(n))throw Nt("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");re(n,function(e,t){null==e&&delete n[t]}),this.$$search=n}break;default:_(e)||null===e?delete this.$$search[n]:this.$$search[n]=e}return this.$$compose(),this},hash:Xt("$$hash",function(e){return null!==e?e.toString():""}),replace:function(){return this.$$replace=!0,this}};var Jt,Kt=S("$parse"),Zt={};function en(e,t){if("__defineGetter__"===e||"__defineSetter__"===e||"__lookupGetter__"===e||"__lookupSetter__"===e||"__proto__"===e)throw Kt("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",t);return e}function tn(e,t){if(e){if(e.constructor===e)throw Kt("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e.document&&e.location&&e.alert&&e.setInterval)throw Kt("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",t);if(e.children&&(e.nodeName||e.prop&&e.attr&&e.find))throw Kt("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",t);if(e===Object)throw Kt("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",t)}return e}var nn=Function.prototype.call,rn=Function.prototype.apply,on=Function.prototype.bind;var an={null:function(){return null},true:function(){return!0},false:function(){return!1},undefined:q,"+":function(e,t,n,r){return n=n(e,t),r=r(e,t),L(n)?L(r)?n+r:n:L(r)?r:ee},"-":function(e,t,n,r){return n=n(e,t),r=r(e,t),(L(n)?n:0)-(L(r)?r:0)},"*":function(e,t,n,r){return n(e,t)*r(e,t)},"/":function(e,t,n,r){return n(e,t)/r(e,t)},"%":function(e,t,n,r){return n(e,t)%r(e,t)},"^":function(e,t,n,r){return n(e,t)^r(e,t)},"=":q,"===":function(e,t,n,r){return n(e,t)===r(e,t)},"!==":function(e,t,n,r){return n(e,t)!==r(e,t)},"==":function(e,t,n,r){return n(e,t)==r(e,t)},"!=":function(e,t,n,r){return n(e,t)!=r(e,t)},"<":function(e,t,n,r){return n(e,t)<r(e,t)},">":function(e,t,n,r){return n(e,t)>r(e,t)},"<=":function(e,t,n,r){return n(e,t)<=r(e,t)},">=":function(e,t,n,r){return n(e,t)>=r(e,t)},"&&":function(e,t,n,r){return n(e,t)&&r(e,t)},"||":function(e,t,n,r){return n(e,t)||r(e,t)},"&":function(e,t,n,r){return n(e,t)&r(e,t)},"|":function(e,t,n,r){return r(e,t)(e,t,n(e,t))},"!":function(e,t,n){return!n(e,t)}},sn={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},un=function(e){this.options=e};un.prototype={constructor:un,lex:function(e){for(this.text=e,this.index=0,this.ch=ee,this.lastCh=":",this.tokens=[];this.index<this.text.length;){if(this.ch=this.text.charAt(this.index),this.is("\"'"))this.readString(this.ch);else if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(this.ch))this.readIdent();else if(this.is("(){}[].,;:?"))this.tokens.push({index:this.index,text:this.ch}),this.index++;else{if(this.isWhitespace(this.ch)){this.index++;continue}var t=this.ch+this.peek(),n=t+this.peek(2),r=an[this.ch],i=an[t],o=an[n];o?(this.tokens.push({index:this.index,text:n,fn:o}),this.index+=3):i?(this.tokens.push({index:this.index,text:t,fn:i}),this.index+=2):r?(this.tokens.push({index:this.index,text:this.ch,fn:r}),this.index+=1):this.throwError("Unexpected next character ",this.index,this.index+1)}this.lastCh=this.ch}return this.tokens},is:function(e){return-1!==e.indexOf(this.ch)},was:function(e){return-1!==e.indexOf(this.lastCh)},peek:function(e){var t=e||1;return this.index+t<this.text.length&&this.text.charAt(this.index+t)},isNumber:function(e){return"0"<=e&&e<="9"},isWhitespace:function(e){return" "===e||"\r"===e||"\t"===e||"\n"===e||"\v"===e||" "===e},isIdent:function(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"||"_"===e||"$"===e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var r=L(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw Kt("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,r,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=k(this.text.charAt(this.index));if("."==n||this.isNumber(n))e+=n;else{var r=this.peek();if("e"==n&&this.isExpOperator(r))e+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"==e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!=e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}e*=1,this.tokens.push({index:t,text:e,literal:!0,constant:!0,fn:function(){return e}})},readIdent:function(){for(var e,t,n,r,i=this,o="",a=this.index;this.index<this.text.length&&("."===(r=this.text.charAt(this.index))||this.isIdent(r)||this.isNumber(r));)"."===r&&(e=this.index),o+=r,this.index++;if(e)for(t=this.index;t<this.text.length;){if("("===(r=this.text.charAt(t))){n=o.substr(e-a+1),o=o.substr(0,e-a),this.index=t;break}if(!this.isWhitespace(r))break;t++}var s={index:a,text:o};if(an.hasOwnProperty(o))s.fn=an[o],s.literal=!0,s.constant=!0;else{var u=mn(o,this.options,this.text);s.fn=j(function(e,t){return u(e,t)},{assign:function(e,t){return cn(e,o,t,i.text,i.options)}})}this.tokens.push(s),n&&(this.tokens.push({index:e,text:"."}),this.tokens.push({index:e+1,text:n}))},readString:function(e){var t=this.index;this.index++;for(var n="",r=e,i=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(r+=o,i){if("u"===o){var a=this.text.substring(this.index+1,this.index+5);a.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+a+"]"),this.index+=4,n+=String.fromCharCode(parseInt(a,16))}else{n+=sn[o]||o}i=!1}else if("\\"===o)i=!0;else{if(o===e)return this.index++,void this.tokens.push({index:t,text:r,string:n,literal:!0,constant:!0,fn:function(){return n}});n+=o}this.index++}this.throwError("Unterminated quote",t)}};var ln=function(e,t,n){this.lexer=e,this.$filter=t,this.options=n};function cn(e,t,n,r,i){tn(e,r),i=i||{};for(var o,a=t.split("."),s=0;1<a.length;s++){var u=tn(e[o=en(a.shift(),r)],r);u||(u={},e[o]=u),(e=u).then&&i.unwrapPromises&&(Jt(r),"$$v"in e||function(t){t.then(function(e){t.$$v=e})}(e),e.$$v===ee&&(e.$$v={}),e=e.$$v)}return tn(e[o=en(a.shift(),r)],r),e[o]=n}ln.ZERO=j(function(){return 0},{constant:!0}),ln.prototype={constructor:ln,parse:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t.literal=!!t.literal,t.constant=!!t.constant,t},primary:function(){var e,t,n;if(this.expect("("))e=this.filterChain(),this.consume(")");else if(this.expect("["))e=this.arrayDeclaration();else if(this.expect("{"))e=this.object();else{var r=this.expect();(e=r.fn)||this.throwError("not a primary expression",r),e.literal=!!r.literal,e.constant=!!r.constant}for(;t=this.expect("(","[",".");)"("===t.text?(e=this.functionCall(e,n),n=null):"["===t.text?(n=e,e=this.objectIndex(e)):"."===t.text?(n=e,e=this.fieldAccess(e)):this.throwError("IMPOSSIBLE");return e},throwError:function(e,t){throw Kt("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},peekToken:function(){if(0===this.tokens.length)throw Kt("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,r){if(0<this.tokens.length){var i=this.tokens[0],o=i.text;if(o===e||o===t||o===n||o===r||!e&&!t&&!n&&!r)return i}return!1},expect:function(e,t,n,r){var i=this.peek(e,t,n,r);return!!i&&(this.tokens.shift(),i)},consume:function(e){this.expect(e)||this.throwError("is unexpected, expecting ["+e+"]",this.peek())},unaryFn:function(n,r){return j(function(e,t){return n(e,t,r)},{constant:r.constant})},ternaryFn:function(n,r,i){return j(function(e,t){return n(e,t)?r(e,t):i(e,t)},{constant:n.constant&&r.constant&&i.constant})},binaryFn:function(n,r,i){return j(function(e,t){return r(e,t,n,i)},{constant:n.constant&&i.constant})},statements:function(){for(var o=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&o.push(this.filterChain()),!this.expect(";"))return 1===o.length?o[0]:function(e,t){for(var n,r=0;r<o.length;r++){var i=o[r];i&&(n=i(e,t))}return n}},filterChain:function(){for(var e,t=this.expression();;){if(!(e=this.expect("|")))return t;t=this.binaryFn(t,e.fn,this.filter())}},filter:function(){for(var e=this.expect(),o=this.$filter(e.text),a=[];;){if(!(e=this.expect(":"))){var t=function(e,t,n){for(var r=[n],i=0;i<a.length;i++)r.push(a[i](e,t));return o.apply(e,r)};return function(){return t}}a.push(this.expression())}},expression:function(){return this.assignment()},assignment:function(){var n,e,r=this.ternary();return(e=this.expect("="))?(r.assign||this.throwError("implies assignment but ["+this.text.substring(0,e.index)+"] can not be assigned to",e),n=this.ternary(),function(e,t){return r.assign(e,n(e,t),t)}):r},ternary:function(){var e,t,n=this.logicalOR();return(t=this.expect("?"))?(e=this.assignment(),(t=this.expect(":"))?this.ternaryFn(n,e,this.assignment()):void this.throwError("expected :",t)):n},logicalOR:function(){for(var e,t=this.logicalAND();;){if(!(e=this.expect("||")))return t;t=this.binaryFn(t,e.fn,this.logicalAND())}},logicalAND:function(){var e,t=this.equality();return(e=this.expect("&&"))&&(t=this.binaryFn(t,e.fn,this.logicalAND())),t},equality:function(){var e,t=this.relational();return(e=this.expect("==","!=","===","!=="))&&(t=this.binaryFn(t,e.fn,this.equality())),t},relational:function(){var e,t=this.additive();return(e=this.expect("<",">","<=",">="))&&(t=this.binaryFn(t,e.fn,this.relational())),t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t=this.binaryFn(t,e.fn,this.multiplicative());return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t=this.binaryFn(t,e.fn,this.unary());return t},unary:function(){var e;return this.expect("+")?this.primary():(e=this.expect("-"))?this.binaryFn(ln.ZERO,e.fn,this.unary()):(e=this.expect("!"))?this.unaryFn(e.fn,this.unary()):this.primary()},fieldAccess:function(i){var o=this,a=this.expect().text,r=mn(a,this.options,this.text);return j(function(e,t,n){return r(n||i(e,t))},{assign:function(e,t,n){var r=i(e,n);return r||i.assign(e,r={}),cn(r,a,t,o.text,o.options)}})},objectIndex:function(a){var s=this,u=this.expression();return this.consume("]"),j(function(e,t){var n,r,i=a(e,t),o=u(e,t);return en(o,s.text),i?((n=tn(i[o],s.text))&&n.then&&s.options.unwrapPromises&&("$$v"in(r=n)||(r.$$v=ee,r.then(function(e){r.$$v=e})),n=n.$$v),n):ee},{assign:function(e,t,n){var r=en(u(e,n),s.text),i=tn(a(e,n),s.text);return i||a.assign(e,i={}),i[r]=t}})},functionCall:function(a,s){var u=[];if(")"!==this.peekToken().text)for(;u.push(this.expression()),this.expect(","););this.consume(")");var l=this;return function(e,t){for(var n=[],r=s?s(e,t):e,i=0;i<u.length;i++)n.push(tn(u[i](e,t),l.text));var o=a(e,t,r)||q;return tn(r,l.text),function(e,t){if(e){if(e.constructor===e)throw Kt("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e===nn||e===rn||on&&e===on)throw Kt("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",t)}}(o,l.text),tn(o.apply?o.apply(r,n):o(n[0],n[1],n[2],n[3],n[4]),l.text)}},arrayDeclaration:function(){var i=[],e=!0;if("]"!==this.peekToken().text)do{if(this.peek("]"))break;var t=this.expression();i.push(t),t.constant||(e=!1)}while(this.expect(","));return this.consume("]"),j(function(e,t){for(var n=[],r=0;r<i.length;r++)n.push(i[r](e,t));return n},{literal:!0,constant:e})},object:function(){var o=[],e=!0;if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var t=this.expect(),n=t.string||t.text;this.consume(":");var r=this.expression();o.push({key:n,value:r}),r.constant||(e=!1)}while(this.expect(","));return this.consume("}"),j(function(e,t){for(var n={},r=0;r<o.length;r++){var i=o[r];n[i.key]=i.value(e,t)}return n},{literal:!0,constant:e})}};var fn={},dn={};function pn(e){return"constructor"==e}function hn(i,o,a,s,u,l,e){en(i,l),en(o,l),en(a,l),en(s,l),en(u,l);var t=function(e){return tn(e,l)},n=e.expensiveChecks,c=n||pn(i)?t:y,f=n||pn(o)?t:y,d=n||pn(a)?t:y,p=n||pn(s)?t:y,h=n||pn(u)?t:y;return e.unwrapPromises?function(e,t){var n,r=t&&t.hasOwnProperty(i)?t:e;return null==r?r:((r=c(r[i]))&&r.then&&(Jt(l),"$$v"in r||((n=r).$$v=ee,n.then(function(e){n.$$v=c(e)})),r=c(r.$$v)),o?null==r?ee:((r=f(r[o]))&&r.then&&(Jt(l),"$$v"in r||((n=r).$$v=ee,n.then(function(e){n.$$v=f(e)})),r=f(r.$$v)),a?null==r?ee:((r=d(r[a]))&&r.then&&(Jt(l),"$$v"in r||((n=r).$$v=ee,n.then(function(e){n.$$v=d(e)})),r=d(r.$$v)),s?null==r?ee:((r=p(r[s]))&&r.then&&(Jt(l),"$$v"in r||((n=r).$$v=ee,n.then(function(e){n.$$v=p(e)})),r=p(r.$$v)),u?null==r?ee:((r=h(r[u]))&&r.then&&(Jt(l),"$$v"in r||((n=r).$$v=ee,n.then(function(e){n.$$v=h(e)})),r=h(r.$$v)),r):r):r):r):r)}:function(e,t){var n=t&&t.hasOwnProperty(i)?t:e;return null==n?n:(n=c(n[i]),o?null==n?ee:(n=f(n[o]),a?null==n?ee:(n=d(n[a]),s?null==n?ee:(n=p(n[s]),u?null==n?ee:n=h(n[u]):n):n):n):n)}}function mn(e,i,o){var a=i.expensiveChecks,t=a?dn:fn;if(t.hasOwnProperty(e))return t[e];var n,r,s,u=e.split("."),l=u.length;if(i.csp)n=l<6?hn(u[0],u[1],u[2],u[3],u[4],o,i):function(e,t){for(var n,r=0;n=hn(u[r++],u[r++],u[r++],u[r++],u[r++],o,i)(e,t),t=ee,e=n,r<l;);return n};else{var c="var p;\n";a&&(c+="s = eso(s, fe);\nl = eso(l, fe);\n");var f=a;re(u,function(e,t){en(e,o);var n=(t?"s":'((l&&l.hasOwnProperty("'+e+'"))?l:s)')+'["'+e+'"]',r=a||pn(e);r&&(n="eso("+n+", fe)",f=!0),c+="if(s == null) return undefined;\ns="+n+";\n",i.unwrapPromises&&(c+='if (s && s.then) {\n pw("'+o.replace(/(["\r\n])/g,"\\$1")+'");\n if (!("$$v" in s)) {\n p=s;\n p.$$v = undefined;\n p.then(function(v) {p.$$v='+(r?"eso(v)":"v")+";});\n}\n s="+(r?"eso(s.$$v)":"s.$$v")+"\n}\n")}),c+="return s;";var d=new Function("s","l","pw","eso","fe",c);d.toString=w(c),(f||i.unwrapPromises)&&(r=d,s=o,d=function(e,t){return r(e,t,Jt,tn,s)}),n=d}return"hasOwnProperty"!==e&&(t[e]=n),n}function vn(){var u={},l={},c={csp:!1,unwrapPromises:!1,logPromiseWarnings:!0,expensiveChecks:!1};this.unwrapPromises=function(e){return L(e)?(c.unwrapPromises=!!e,this):c.unwrapPromises},this.logPromiseWarnings=function(e){return L(e)?(c.logPromiseWarnings=e,this):c.logPromiseWarnings},this.$get=["$filter","$sniffer","$log",function(a,e,t){c.csp=e.csp;var s={csp:c.csp,unwrapPromises:c.unwrapPromises,logPromiseWarnings:c.logPromiseWarnings,expensiveChecks:!0};return Jt=function(e){c.logPromiseWarnings&&!Zt.hasOwnProperty(e)&&(Zt[e]=!0,t.warn("[$parse] Promise found in the expression `"+e+"`. Automatic unwrapping of promises in Angular expressions is deprecated."))},function(e,t){var n;switch(typeof e){case"string":var r=t?l:u;if(r.hasOwnProperty(e))return r[e];var i=t?s:c,o=new un(i);return n=new ln(o,a,i).parse(e),"hasOwnProperty"!==e&&(r[e]=n),n;case"function":return e;default:return q}}}]}function gn(){this.$get=["$rootScope","$exceptionHandler",function(t,e){return function(l,c){var f=function(){var s,t,u=[];return t={resolve:function(e){if(u){var r=u;u=ee,s=d(e),r.length&&l(function(){for(var e,t=0,n=r.length;t<n;t++)e=r[t],s.then(e[0],e[1],e[2])})}},reject:function(e){t.resolve(n(e))},notify:function(n){if(u){var r=u;u.length&&l(function(){for(var e=0,t=r.length;e<t;e++)r[e][2](n)})}},promise:{then:function(t,n,r){var i=f(),e=function(e){try{i.resolve((se(t)?t:h)(e))}catch(e){i.reject(e),c(e)}},o=function(e){try{i.resolve((se(n)?n:m)(e))}catch(e){i.reject(e),c(e)}},a=function(e){try{i.notify((se(r)?r:h)(e))}catch(e){c(e)}};return u?u.push([e,o,a]):s.then(e,o,a),i.promise},catch:function(e){return this.then(null,e)},finally:function(r){function i(e,t){var n=f();return t?n.resolve(e):n.reject(e),n.promise}function t(e,t){var n=null;try{n=(r||h)()}catch(e){return i(e,!1)}return R(n)?n.then(function(){return i(e,t)},function(e){return i(e,!1)}):i(e,t)}return this.then(function(e){return t(e,!0)},function(e){return t(e,!1)})}}}},d=function(n){return R(n)?n:{then:function(e){var t=f();return l(function(){t.resolve(e(n))}),t.promise}}},p=function(e){var t=f();return t.reject(e),t.promise},n=function(r){return{then:function(e,t){var n=f();return l(function(){try{n.resolve((se(t)?t:m)(r))}catch(e){n.reject(e),c(e)}}),n.promise}}};function h(e){return e}function m(e){return p(e)}return{defer:f,reject:p,when:function(e,t,n,r){var i,o=f(),a=function(e){try{return(se(t)?t:h)(e)}catch(e){return c(e),p(e)}},s=function(e){try{return(se(n)?n:m)(e)}catch(e){return c(e),p(e)}},u=function(e){try{return(se(r)?r:h)(e)}catch(e){c(e)}};return l(function(){d(e).then(function(e){i||(i=!0,o.resolve(d(e).then(a,s,u)))},function(e){i||(i=!0,o.resolve(s(e)))},function(e){i||o.notify(u(e))})}),o.promise},all:function(e){var n=f(),r=0,i=ae(e)?[]:{};re(e,function(e,t){r++,d(e).then(function(e){i.hasOwnProperty(t)||(i[t]=e,--r||n.resolve(i))},function(e){i.hasOwnProperty(t)||n.reject(e)})}),0===r&&n.resolve(i);return n.promise}}}(function(e){t.$evalAsync(e)},e)}]}function $n(){this.$get=["$window","$timeout",function(e,n){var r=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame,i=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,t=!!r,o=t?function(e){var t=r(e);return function(){i(t)}}:function(e){var t=n(e,16.66,!1);return function(){n.cancel(t)}};return o.supported=t,o}]}function yn(){var w=10,b=S("$rootScope"),x=null;this.digestTtl=function(e){return arguments.length&&(w=e),w},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(e,m,h,v){function n(){this.$id=i(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.this=this.$root=this,this.$$destroyed=!1,this.$$asyncQueue=[],this.$$postDigestQueue=[],this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings={}}n.prototype={constructor:n,$new:function(e){var t;return e?((t=new n).$root=this.$root,t.$$asyncQueue=this.$$asyncQueue,t.$$postDigestQueue=this.$$postDigestQueue):(this.$$childScopeClass||(this.$$childScopeClass=function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$id=i(),this.$$childScopeClass=null},this.$$childScopeClass.prototype=this),t=new this.$$childScopeClass),(t.this=t).$parent=this,t.$$prevSibling=this.$$childTail,this.$$childHead?(this.$$childTail.$$nextSibling=t,this.$$childTail=t):this.$$childHead=this.$$childTail=t,t},$watch:function(e,t,n){var r=u(e,"watch"),i=this.$$watchers,o={fn:t,last:y,get:r,exp:e,eq:!!n};if(x=null,!se(t)){var a=u(t||q,"listener");o.fn=function(e,t,n){a(n)}}if("string"==typeof e&&r.constant){var s=o.fn;o.fn=function(e,t,n){s.call(this,e,t,n),F(i,o)}}return i||(i=this.$$watchers=[]),i.unshift(o),function(){F(i,o),x=null}},$watchCollection:function(e,n){var r,i,o,a=this,s=1<n.length,u=0,l=h(e),c=[],f={},d=!0,p=0;return this.$watch(function(){var e,t;if(ie(r=l(a)))if(P(r)){i!==c&&(p=(i=c).length=0,u++),e=r.length,p!==e&&(u++,i.length=p=e);for(var n=0;n<e;n++)i[n]!=i[n]&&r[n]!=r[n]||i[n]===r[n]||(u++,i[n]=r[n])}else{for(t in i!==f&&(i=f={},p=0,u++),e=0,r)r.hasOwnProperty(t)&&(e++,i.hasOwnProperty(t)?i[t]!=i[t]&&r[t]!=r[t]||i[t]===r[t]||(u++,i[t]=r[t]):(p++,i[t]=r[t],u++));if(e<p)for(t in u++,i)i.hasOwnProperty(t)&&!r.hasOwnProperty(t)&&(p--,delete i[t])}else i!==r&&(i=r,u++);return u},function(){if(d?(d=!1,n(r,r,a)):n(r,o,a),s)if(ie(r))if(P(r)){o=new Array(r.length);for(var e=0;e<r.length;e++)o[e]=r[e]}else for(var t in o={},r)C.call(r,t)&&(o[t]=r[t]);else o=r})},$digest:function(){var e,t,n,r,i,o,a,s,u,l,c,f=this.$$asyncQueue,d=this.$$postDigestQueue,p=w,h=[];g("$digest"),v.$$checkUrlChange(),x=null;do{for(o=!1,s=this;f.length;){try{(c=f.shift()).scope.$eval(c.expression)}catch(e){$(),m(e)}x=null}e:do{if(r=s.$$watchers)for(i=r.length;i--;)try{if(e=r[i])if((t=e.get(s))===(n=e.last)||(e.eq?ce(t,n):"number"==typeof t&&"number"==typeof n&&isNaN(t)&&isNaN(n))){if(e===x){o=!1;break e}}else o=!0,(x=e).last=e.eq?U(t,null):t,e.fn(t,n===y?t:n,s),p<5&&(h[u=4-p]||(h[u]=[]),l=se(e.exp)?"fn: "+(e.exp.name||e.exp.toString()):e.exp,l+="; newVal: "+H(t)+"; oldVal: "+H(n),h[u].push(l))}catch(e){$(),m(e)}if(!(a=s.$$childHead||s!==this&&s.$$nextSibling))for(;s!==this&&!(a=s.$$nextSibling);)s=s.$parent}while(s=a);if((o||f.length)&&!p--)throw $(),b("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",w,H(h))}while(o||f.length);for($();d.length;)try{d.shift()()}catch(e){m(e)}},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this!==t&&(re(this.$$listenerCount,z(null,o,this)),e.$$childHead==this&&(e.$$childHead=this.$$nextSibling),e.$$childTail==this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=null,this.$$listeners={},this.$$watchers=this.$$asyncQueue=this.$$postDigestQueue=[],this.$destroy=this.$digest=this.$apply=q,this.$on=this.$watch=function(){return q})}},$eval:function(e,t){return h(e)(this,t)},$evalAsync:function(e){t.$$phase||t.$$asyncQueue.length||v.defer(function(){t.$$asyncQueue.length&&t.$digest()}),this.$$asyncQueue.push({scope:this,expression:e})},$$postDigest:function(e){this.$$postDigestQueue.push(e)},$apply:function(e){try{return g("$apply"),this.$eval(e)}catch(e){m(e)}finally{$();try{t.$digest()}catch(e){throw m(e),e}}},$on:function(t,n){var r=this.$$listeners[t];r||(this.$$listeners[t]=r=[]),r.push(n);for(var e=this;e.$$listenerCount[t]||(e.$$listenerCount[t]=0),e.$$listenerCount[t]++,e=e.$parent;);var i=this;return function(){var e=N(r,n);-1!==e&&(r[e]=null,o(i,1,t))}},$emit:function(e,t){var n,r,i,o=[],a=this,s=!1,u={name:e,targetScope:a,stopPropagation:function(){s=!0},preventDefault:function(){u.defaultPrevented=!0},defaultPrevented:!1},l=B([u],arguments,1);do{for(n=a.$$listeners[e]||o,u.currentScope=a,r=0,i=n.length;r<i;r++)if(n[r])try{n[r].apply(null,l)}catch(e){m(e)}else n.splice(r,1),r--,i--;if(s)return u;a=a.$parent}while(a);return u},$broadcast:function(e,t){for(var n,r,i,o=this,a=o,s=o,u={name:e,targetScope:o,preventDefault:function(){u.defaultPrevented=!0},defaultPrevented:!1},l=B([u],arguments,1);a=s;){for(r=0,i=(n=(u.currentScope=a).$$listeners[e]||[]).length;r<i;r++)if(n[r])try{n[r].apply(null,l)}catch(e){m(e)}else n.splice(r,1),r--,i--;if(!(s=a.$$listenerCount[e]&&a.$$childHead||a!==o&&a.$$nextSibling))for(;a!==o&&!(s=a.$$nextSibling);)a=a.$parent}return u}};var t=new n;return t;function g(e){if(t.$$phase)throw b("inprog","{0} already in progress",t.$$phase);t.$$phase=e}function $(){t.$$phase=null}function u(e,t){var n=h(e);return K(n,t),n}function o(e,t,n){for(;e.$$listenerCount[n]-=t,0===e.$$listenerCount[n]&&delete e.$$listenerCount[n],e=e.$parent;);}function y(){}}]}function wn(){var i=/^\s*(https?|ftp|mailto|tel|file):/,o=/^\s*((https?|ftp|file):|data:image\/)/;this.aHrefSanitizationWhitelist=function(e){return L(e)?(i=e,this):i},this.imgSrcSanitizationWhitelist=function(e){return L(e)?(o=e,this):o},this.$get=function(){return function(e,t){var n,r=t?o:i;return te&&!(8<=te)||""===(n=Pn(e).href)||n.match(r)?e:"unsafe:"+n}}}var bn=S("$sce"),xn={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"};function Sn(e){var t=[];return L(e)&&re(e,function(e){t.push(function(e){if("self"===e)return e;if(oe(e)){if(-1<e.indexOf("***"))throw bn("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=(t=e,t.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+e+"$")}if(M(e))return new RegExp("^"+e.source+"$");throw bn("imatcher",'Matchers may only be "self", string patterns or RegExp objects');var t}(e))}),t}function Cn(){this.SCE_CONTEXTS=xn;var a=["self"],s=[];this.resourceUrlWhitelist=function(e){return arguments.length&&(a=Sn(e)),a},this.resourceUrlBlacklist=function(e){return arguments.length&&(s=Sn(e)),s},this.$get=["$injector",function(e){var r=function(e){throw bn("unsafe","Attempting to use an unsafe value in a safe context.")};function o(e,t){return"self"===e?Mn(t):!!e.exec(t.href)}function t(e){var t=function(e){this.$$unwrapTrustedValue=function(){return e}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}e.has("$sanitize")&&(r=e.get("$sanitize"));var n=t(),i={};return i[xn.HTML]=t(n),i[xn.CSS]=t(n),i[xn.URL]=t(n),i[xn.JS]=t(n),i[xn.RESOURCE_URL]=t(i[xn.URL]),{trustAs:function(e,t){var n=i.hasOwnProperty(e)?i[e]:null;if(!n)throw bn("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null===t||t===ee||""===t)return t;if("string"!=typeof t)throw bn("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new n(t)},getTrusted:function(e,t){if(null===t||t===ee||""===t)return t;var n=i.hasOwnProperty(e)?i[e]:null;if(n&&t instanceof n)return t.$$unwrapTrustedValue();if(e===xn.RESOURCE_URL){if(function(e){var t,n,r=Pn(e.toString()),i=!1;for(t=0,n=a.length;t<n;t++)if(o(a[t],r)){i=!0;break}if(i)for(t=0,n=s.length;t<n;t++)if(o(s[t],r)){i=!1;break}return i}(t))return t;throw bn("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString())}if(e===xn.HTML)return r(t);throw bn("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(e){return e instanceof n?e.$$unwrapTrustedValue():e}}}]}function En(){var s=!0;this.enabled=function(e){return arguments.length&&(s=!!e),s},this.$get=["$parse","$sniffer","$sceDelegate",function(t,e,n){if(s&&e.msie&&e.msieDocumentMode<8)throw bn("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 9 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var i=le(xn);i.isEnabled=function(){return s},i.trustAs=n.trustAs,i.getTrusted=n.getTrusted,i.valueOf=n.valueOf,s||(i.trustAs=i.getTrusted=function(e,t){return t},i.valueOf=y),i.parseAs=function(n,e){var r=t(e);return r.literal&&r.constant?r:function(e,t){return i.getTrusted(n,r(e,t))}};var r=i.parseAs,o=i.getTrusted,a=i.trustAs;return re(xn,function(t,e){var n=k(e);i[ke("parse_as_"+n)]=function(e){return r(t,e)},i[ke("get_trusted_"+n)]=function(e){return o(t,e)},i[ke("trust_as_"+n)]=function(e){return a(t,e)}}),i}]}function kn(){this.$get=["$window","$document",function(e,t){var n,r,i={},o=E((/android (\d+)/.exec(k((e.navigator||{}).userAgent))||[])[1]),a=/Boxee/i.test((e.navigator||{}).userAgent),s=t[0]||{},u=s.documentMode,l=/^(Moz|webkit|O|ms)(?=[A-Z])/,c=s.body&&s.body.style,f=!1,d=!1;if(c){for(var p in c)if(r=l.exec(p)){n=(n=r[0]).substr(0,1).toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in c&&"webkit"),f=!!("transition"in c||n+"Transition"in c),d=!!("animation"in c||n+"Animation"in c),!o||f&&d||(f=oe(s.body.style.webkitTransition),d=oe(s.body.style.webkitAnimation))}return{history:!(!e.history||!e.history.pushState||o<4||a),hashchange:"onhashchange"in e&&(!u||7<u),hasEvent:function(e){if("input"==e&&9==te)return!1;if(_(i[e])){var t=s.createElement("div");i[e]="on"+e in t}return i[e]},csp:V(),vendorPrefix:n,transitions:f,animations:d,android:o,msie:te,msieDocumentMode:u}}]}function qn(){this.$get=["$rootScope","$browser","$q","$exceptionHandler",function(s,u,l,c){var f={};function e(e,t,n){var r,i=l.defer(),o=i.promise,a=L(n)&&!n;return r=u.defer(function(){try{i.resolve(e())}catch(e){i.reject(e),c(e)}finally{delete f[o.$$timeoutId]}a||s.$apply()},t),o.$$timeoutId=r,f[r]=i,o}return e.cancel=function(e){return!!(e&&e.$$timeoutId in f)&&(f[e.$$timeoutId].reject("canceled"),delete f[e.$$timeoutId],u.defer.cancel(e.$$timeoutId))},e}]}var _n=Z.createElement("a"),An=Pn(m.location.href,!0);function Pn(e,t){var n=e;return te&&(_n.setAttribute("href",n),n=_n.href),_n.setAttribute("href",n),{href:_n.href,protocol:_n.protocol?_n.protocol.replace(/:$/,""):"",host:_n.host,search:_n.search?_n.search.replace(/^\?/,""):"",hash:_n.hash?_n.hash.replace(/^#/,""):"",hostname:_n.hostname,port:_n.port,pathname:"/"===_n.pathname.charAt(0)?_n.pathname:"/"+_n.pathname}}function Mn(e){var t=oe(e)?Pn(e):e;return t.protocol===An.protocol&&t.host===An.host}function Tn(){this.$get=w(m)}function jn(r){var i="Filter";function o(e,t){if(ie(e)){var n={};return re(e,function(e,t){n[t]=o(t,e)}),n}return r.factory(e+i,t)}this.register=o,this.$get=["$injector",function(t){return function(e){return t.get(e+i)}}],o("currency",Dn),o("date",Hn),o("filter",On),o("json",Wn),o("limitTo",Qn),o("lowercase",Gn),o("number",Rn),o("orderBy",Yn),o("uppercase",Xn)}function On(){return function(e,n,i){if(!ae(e))return e;var t=typeof i,r=[];r.check=function(e){for(var t=0;t<r.length;t++)if(!r[t](e))return!1;return!0},"function"!==t&&(i="boolean"===t&&i?function(e,t){return d.equals(e,t)}:function(e,t){if(e&&t&&"object"==typeof e&&"object"==typeof t){for(var n in e)if("$"!==n.charAt(0)&&C.call(e,n)&&i(e[n],t[n]))return!0;return!1}return t=(""+t).toLowerCase(),-1<(""+e).toLowerCase().indexOf(t)});var o=function(e,t){if("string"==typeof t&&"!"===t.charAt(0))return!o(e,t.substr(1));switch(typeof e){case"boolean":case"number":case"string":return i(e,t);case"object":switch(typeof t){case"object":return i(e,t);default:for(var n in e)if("$"!==n.charAt(0)&&o(e[n],t))return!0}return!1;case"array":for(var r=0;r<e.length;r++)if(o(e[r],t))return!0;return!1;default:return!1}};switch(typeof n){case"boolean":case"number":case"string":n={$:n};case"object":for(var a in n)!function(t){void 0!==n[t]&&r.push(function(e){return o("$"==t?e:e&&e[t],n[t])})}(a);break;case"function":r.push(n);break;default:return e}for(var s=[],u=0;u<e.length;u++){var l=e[u];r.check(l)&&s.push(l)}return s}}function Dn(e){var n=e.NUMBER_FORMATS;return function(e,t){return _(t)&&(t=n.CURRENCY_SYM),Fn(e,n.PATTERNS[1],n.GROUP_SEP,n.DECIMAL_SEP,2).replace(/\u00A4/g,t)}}function Rn(e){var n=e.NUMBER_FORMATS;return function(e,t){return Fn(e,n.PATTERNS[0],n.GROUP_SEP,n.DECIMAL_SEP,t)}}jn.$inject=["$provide"],Dn.$inject=["$locale"],Rn.$inject=["$locale"];var Nn=".";function Fn(e,t,n,r,i){if(null==e||!isFinite(e)||ie(e))return"";var o=e<0,a=(e=Math.abs(e))+"",s="",u=[],l=!1;if(-1!==a.indexOf("e")){var c=a.match(/([\d\.]+)e(-?)(\d+)/);c&&"-"==c[2]&&c[3]>i+1?(a="0",e=0):(s=a,l=!0)}if(l)0<i&&-1<e&&e<1&&(s=e.toFixed(i));else{var f=(a.split(Nn)[1]||"").length;_(i)&&(i=Math.min(Math.max(t.minFrac,f),t.maxFrac)),0===(e=+(Math.round(+(e.toString()+"e"+i)).toString()+"e"+-i))&&(o=!1);var d=(""+e).split(Nn),p=d[0];d=d[1]||"";var h,m=0,v=t.lgSize,g=t.gSize;if(p.length>=v+g)for(m=p.length-v,h=0;h<m;h++)(m-h)%g==0&&0!==h&&(s+=n),s+=p.charAt(h);for(h=m;h<p.length;h++)(p.length-h)%v==0&&0!==h&&(s+=n),s+=p.charAt(h);for(;d.length<i;)d+="0";i&&"0"!==i&&(s+=r+d.substr(0,i))}return u.push(o?t.negPre:t.posPre),u.push(s),u.push(o?t.negSuf:t.posSuf),u.join("")}function In(e,t,n){var r="";for(e<0&&(r="-",e=-e),e=""+e;e.length<t;)e="0"+e;return n&&(e=e.substr(e.length-t)),r+e}function Ln(n,r,i,o){return i=i||0,function(e){var t=e["get"+n]();return(0<i||-i<t)&&(t+=i),0===t&&-12==i&&(t=12),In(t,r,o)}}function Un(r,i){return function(e,t){var n=e["get"+r]();return t[l(i?"SHORT"+r:r)][n]}}var Vn={yyyy:Ln("FullYear",4),yy:Ln("FullYear",2,0,!0),y:Ln("FullYear",1),MMMM:Un("Month"),MMM:Un("Month",!0),MM:Ln("Month",2,1),M:Ln("Month",1,1),dd:Ln("Date",2),d:Ln("Date",1),HH:Ln("Hours",2),H:Ln("Hours",1),hh:Ln("Hours",2,-12),h:Ln("Hours",1,-12),mm:Ln("Minutes",2),m:Ln("Minutes",1),ss:Ln("Seconds",2),s:Ln("Seconds",1),sss:Ln("Milliseconds",3),EEEE:Un("Day"),EEE:Un("Day",!0),a:function(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]},Z:function(e){var t=-1*e.getTimezoneOffset(),n=0<=t?"+":"";return n+=In(Math[0<t?"floor":"ceil"](t/60),2)+In(Math.abs(t%60),2)}},Bn=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,zn=/^\-?\d+$/;function Hn(a){var f=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(t,e){var n,r,i="",o=[];if(e=e||"mediumDate",e=a.DATETIME_FORMATS[e]||e,oe(t)&&(t=zn.test(t)?E(t):function(e){var t;if(t=e.match(f)){var n=new Date(0),r=0,i=0,o=t[8]?n.setUTCFullYear:n.setFullYear,a=t[8]?n.setUTCHours:n.setHours;t[9]&&(r=E(t[9]+t[10]),i=E(t[9]+t[11])),o.call(n,E(t[1]),E(t[2])-1,E(t[3]));var s=E(t[4]||0)-r,u=E(t[5]||0)-i,l=E(t[6]||0),c=Math.round(1e3*parseFloat("0."+(t[7]||0)));return a.call(n,s,u,l,c),n}return e}(t)),b(t)&&(t=new Date(t)),!A(t))return t;for(;e;)(r=Bn.exec(e))?e=(o=B(o,r,1)).pop():(o.push(e),e=null);return re(o,function(e){n=Vn[e],i+=n?n(t,a.DATETIME_FORMATS):e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),i}}function Wn(){return function(e){return H(e,!0)}}Hn.$inject=["$locale"];var Gn=w(k),Xn=w(l);function Qn(){return function(e,t){if(!ae(e)&&!oe(e))return e;if(t=Math.abs(Number(t))===1/0?Number(t):E(t),oe(e))return t?0<=t?e.slice(0,t):e.slice(t,e.length):"";var n,r,i=[];for(t>e.length?t=e.length:t<-e.length&&(t=-e.length),0<t?(n=0,r=t):(n=e.length+t,r=e.length);n<r;n++)i.push(e[n]);return i}}function Yn(l){return function(e,i,t){return P(e)?(0===(i=ae(i)?i:[i]).length&&(i=["+"]),r=function(e){var t=!1,n=e||y;if(oe(e)){if("+"!=e.charAt(0)&&"-"!=e.charAt(0)||(t="-"==e.charAt(0),e=e.substring(1)),""===e)return s(function(e,t){return u(e,t)},t);if((n=l(e)).constant){var r=n();return s(function(e,t){return u(e[r],t[r])},t)}}return s(function(e,t){return u(n(e),n(t))},t)},a=[],re(i,function(e,t,n){a.push(r.call(o,e,t,n))}),i=a,c.call(e).sort(s(function(e,t){for(var n=0;n<i.length;n++){var r=i[n](e,t);if(0!==r)return r}return 0},t))):e;var r,o,a;function s(n,e){return W(e)?function(e,t){return n(t,e)}:n}function u(e,t){var n=typeof e,r=typeof t;return n==r?(A(e)&&A(t)&&(e=e.valueOf(),t=t.valueOf()),"string"==n&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t?0:e<t?-1:1):n<r?-1:1}}}function Jn(e){return se(e)&&(e={link:e}),e.restrict=e.restrict||"AC",w(e)}Yn.$inject=["$parse"];var Kn=w({restrict:"E",compile:function(e,t){if(te<=8&&(t.href||t.name||t.$set("href",""),e.append(Z.createComment("IE fix"))),!t.href&&!t.xlinkHref&&!t.name)return function(e,t){var n="[object SVGAnimatedString]"===s.call(t.prop("href"))?"xlink:href":"href";t.on("click",function(e){t.attr(n)||e.preventDefault()})}}}),Zn={};re(Ye,function(e,r){if("multiple"!=e){var i=yt("ng-"+r);Zn[i]=function(){return{priority:100,link:function(e,t,n){e.$watch(n[i],function(e){n.$set(r,!!e)})}}}}}),re(["src","srcset","href"],function(o){var a=yt("ng-"+o);Zn[a]=function(){return{priority:99,link:function(e,t,n){var r=o,i=o;"href"===o&&"[object SVGAnimatedString]"===s.call(t.prop("href"))&&(i="xlinkHref",n.$attr[i]="xlink:href",r=null),n.$observe(a,function(e){e?(n.$set(i,e),te&&r&&t.prop(r,n[i])):"href"===o&&n.$set(i,null)})}}}});var er={$addControl:q,$removeControl:q,$setValidity:q,$setDirty:q,$setPristine:q};function tr(n,e,t,r){var i=this,o=n.parent().controller("form")||er,a=0,s=i.$error={},u=[];function l(e,t){t=t?"-"+pe(t,"-"):"",r.setClass(n,(e?hr:mr)+t,(e?mr:hr)+t)}i.$name=e.name||e.ngForm,i.$dirty=!1,i.$pristine=!0,i.$valid=!0,i.$invalid=!1,o.$addControl(i),n.addClass(vr),l(!0),i.$addControl=function(e){me(e.$name,"input"),u.push(e),e.$name&&(i[e.$name]=e)},i.$removeControl=function(n){n.$name&&i[n.$name]===n&&delete i[n.$name],re(s,function(e,t){i.$setValidity(t,!0,n)}),F(u,n)},i.$setValidity=function(e,t,n){var r=s[e];if(t)r&&(F(r,n),r.length||(--a||(l(t),i.$valid=!0,i.$invalid=!1),l(!(s[e]=!1),e),o.$setValidity(e,!0,i)));else{if(a||l(t),r){if(-1!=N(r,n))return}else s[e]=r=[],a++,l(!1,e),o.$setValidity(e,!1,i);r.push(n),i.$valid=!1,i.$invalid=!0}},i.$setDirty=function(){r.removeClass(n,vr),r.addClass(n,gr),i.$dirty=!0,i.$pristine=!1,o.$setDirty()},i.$setPristine=function(){r.removeClass(n,gr),r.addClass(n,vr),i.$dirty=!1,i.$pristine=!0,re(u,function(e){e.$setPristine()})}}tr.$inject=["$element","$attrs","$scope","$animate"];var nr=function(e){return["$timeout",function(s){return{name:"form",restrict:e?"EAC":"E",controller:tr,compile:function(){return{pre:function(e,t,n,r){if(!n.action){var i=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1};be(t[0],"submit",i),t.on("$destroy",function(){s(function(){xe(t[0],"submit",i)},0,!1)})}var o=t.parent().controller("form"),a=n.name||n.ngForm;a&&cn(e,a,r,a),o&&t.on("$destroy",function(){o.$removeControl(r),a&&cn(e,a,ee,a),j(r,er)})}}}}}]},rr=nr(),ir=nr(!0),or=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,ar=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,sr=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,ur={text:fr,number:function(e,t,n,r,i,o){if(fr(e,t,n,r,i,o),r.$parsers.push(function(e){var t=r.$isEmpty(e);return t||sr.test(e)?(r.$setValidity("number",!0),""===e?null:t?e:parseFloat(e)):(r.$setValidity("number",!1),ee)}),s=r,u="number",l=dr,c=null,f=r.$$validityState,ie(f)&&(s.$$hasNativeValidators=!0,s.$parsers.push(function(e){if(s.$error[u]||cr(f,c)||!cr(f,l))return e;s.$setValidity(u,!1)})),r.$formatters.push(function(e){return r.$isEmpty(e)?"":""+e}),n.min){var a=function(e){var t=parseFloat(n.min);return lr(r,"min",r.$isEmpty(e)||t<=e,e)};r.$parsers.push(a),r.$formatters.push(a)}var s,u,l,c,f;if(n.max){var d=function(e){var t=parseFloat(n.max);return lr(r,"max",r.$isEmpty(e)||e<=t,e)};r.$parsers.push(d),r.$formatters.push(d)}r.$formatters.push(function(e){return lr(r,"number",r.$isEmpty(e)||b(e),e)})},url:function(e,t,n,r,i,o){fr(e,t,n,r,i,o);var a=function(e){return lr(r,"url",r.$isEmpty(e)||or.test(e),e)};r.$formatters.push(a),r.$parsers.push(a)},email:function(e,t,n,r,i,o){fr(e,t,n,r,i,o);var a=function(e){return lr(r,"email",r.$isEmpty(e)||ar.test(e),e)};r.$formatters.push(a),r.$parsers.push(a)},radio:function(e,t,n,r){_(n.name)&&t.attr("name",i());t.on("click",function(){t[0].checked&&e.$apply(function(){r.$setViewValue(n.value)})}),r.$render=function(){var e=n.value;t[0].checked=e==r.$viewValue},n.$observe("value",r.$render)},checkbox:function(e,t,n,r){var i=n.ngTrueValue,o=n.ngFalseValue;oe(i)||(i=!0);oe(o)||(o=!1);t.on("click",function(){e.$apply(function(){r.$setViewValue(t[0].checked)})}),r.$render=function(){t[0].checked=r.$viewValue},r.$isEmpty=function(e){return e!==i},r.$formatters.push(function(e){return e===i}),r.$parsers.push(function(e){return e?i:o})},hidden:q,button:q,submit:q,reset:q,file:q};function lr(e,t,n,r){return e.$setValidity(t,n),n?r:ee}function cr(e,t){var n;if(t)for(n=0;n<t.length;++n)if(e[t[n]])return!0;return!1}function fr(r,i,o,a,e,t){var s=i.prop(x),u=i[0].placeholder,l={},c=k(i[0].type);if(a.$$validityState=s,!e.android){var f=!1;i.on("compositionstart",function(e){f=!0}),i.on("compositionend",function(){f=!1,n()})}var n=function(e){if(!f){var t=i.val();if(te&&"input"===(e||l).type&&i[0].placeholder!==u)u=i[0].placeholder;else{"password"!==c&&W(o.ngTrim||"T")&&(t=ue(t));var n=s&&a.$$hasNativeValidators;(a.$viewValue!==t||""===t&&n)&&(r.$root.$$phase?a.$setViewValue(t):r.$apply(function(){a.$setViewValue(t)}))}}};if(e.hasEvent("input"))i.on("input",n);else{var d,p=function(){d||(d=t.defer(function(){n(),d=null}))};i.on("keydown",function(e){var t=e.keyCode;91===t||15<t&&t<19||37<=t&&t<=40||p()}),e.hasEvent("paste")&&i.on("paste cut",p)}i.on("change",n),a.$render=function(){i.val(a.$isEmpty(a.$viewValue)?"":a.$viewValue)};var h,m,v=o.ngPattern;if(v){var g=function(e,t){return lr(a,"pattern",a.$isEmpty(t)||e.test(t),t)};(m=v.match(/^\/(.*)\/([gim]*)$/))?(v=new RegExp(m[1],m[2]),h=function(e){return g(v,e)}):h=function(e){var t=r.$eval(v);if(!t||!t.test)throw S("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",v,t,de(i));return g(t,e)},a.$formatters.push(h),a.$parsers.push(h)}if(o.ngMinlength){var $=E(o.ngMinlength),y=function(e){return lr(a,"minlength",a.$isEmpty(e)||e.length>=$,e)};a.$parsers.push(y),a.$formatters.push(y)}if(o.ngMaxlength){var w=E(o.ngMaxlength),b=function(e){return lr(a,"maxlength",a.$isEmpty(e)||e.length<=w,e)};a.$parsers.push(b),a.$formatters.push(b)}}var dr=["badInput"];var pr=["$browser","$sniffer",function(i,o){return{restrict:"E",require:"?ngModel",link:function(e,t,n,r){r&&(ur[k(n.type)]||ur.text)(e,t,n,r,o,i)}}}],hr="ng-valid",mr="ng-invalid",vr="ng-pristine",gr="ng-dirty",$r=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate",function(r,n,e,i,t,o){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$name=e.name;var a=t(e.ngModel),s=a.assign;if(!s)throw S("ngModel")("nonassign","Expression '{0}' is non-assignable. Element: {1}",e.ngModel,de(i));this.$render=q,this.$isEmpty=function(e){return _(e)||""===e||null===e||e!=e};var u=i.inheritedData("$formController")||er,l=0,c=this.$error={};function f(e,t){t=t?"-"+pe(t,"-"):"",o.removeClass(i,(e?mr:hr)+t),o.addClass(i,(e?hr:mr)+t)}i.addClass(vr),f(!0),this.$setValidity=function(e,t){c[e]!==!t&&(t?(c[e]&&l--,l||(f(!0),this.$valid=!0,this.$invalid=!1)):(f(!1),this.$invalid=!0,this.$valid=!1,l++),c[e]=!t,f(t,e),u.$setValidity(e,t,this))},this.$setPristine=function(){this.$dirty=!1,this.$pristine=!0,o.removeClass(i,gr),o.addClass(i,vr)},this.$setViewValue=function(t){this.$viewValue=t,this.$pristine&&(this.$dirty=!0,this.$pristine=!1,o.removeClass(i,vr),o.addClass(i,gr),u.$setDirty()),re(this.$parsers,function(e){t=e(t)}),this.$modelValue!==t&&(this.$modelValue=t,s(r,t),re(this.$viewChangeListeners,function(e){try{e()}catch(e){n(e)}}))};var d=this;r.$watch(function(){var e=a(r);if(d.$modelValue!==e){var t=d.$formatters,n=t.length;for(d.$modelValue=e;n--;)e=t[n](e);d.$viewValue!==e&&(d.$viewValue=e,d.$render())}return e})}],yr=function(){return{require:["ngModel","^?form"],controller:$r,link:function(e,t,n,r){var i=r[0],o=r[1]||er;o.$addControl(i),e.$on("$destroy",function(){o.$removeControl(i)})}}},wr=w({require:"ngModel",link:function(e,t,n,r){r.$viewChangeListeners.push(function(){e.$eval(n.ngChange)})}}),br=function(){return{require:"?ngModel",link:function(e,t,n,r){if(r){n.required=!0;var i=function(e){return n.required&&r.$isEmpty(e)?void r.$setValidity("required",!1):(r.$setValidity("required",!0),e)};r.$formatters.push(i),r.$parsers.unshift(i),n.$observe("required",function(){i(r.$viewValue)})}}}},xr=function(){return{require:"ngModel",link:function(e,t,n,r){var i=/\/(.*)\//.exec(n.ngList),o=i&&new RegExp(i[1])||n.ngList||",";r.$parsers.push(function(e){if(!_(e)){var t=[];return e&&re(e.split(o),function(e){e&&t.push(ue(e))}),t}}),r.$formatters.push(function(e){return ae(e)?e.join(", "):ee}),r.$isEmpty=function(e){return!e||!e.length}}}},Sr=/^(true|false|\d+)$/,Cr=function(){return{priority:100,compile:function(e,t){return Sr.test(t.ngValue)?function(e,t,n){n.$set("value",e.$eval(n.ngValue))}:function(e,t,n){e.$watch(n.ngValue,function(e){n.$set("value",e)})}}}},Er=Jn({compile:function(e){return e.addClass("ng-binding"),function(e,t,n){t.data("$binding",n.ngBind),e.$watch(n.ngBind,function(e){t.text(e==ee?"":e)})}}}),kr=["$interpolate",function(i){return function(e,t,n){var r=i(t.attr(n.$attr.ngBindTemplate));t.addClass("ng-binding").data("$binding",r),n.$observe("ngBindTemplate",function(e){t.text(e)})}}],qr=["$sce","$parse",function(i,o){return{compile:function(e){return e.addClass("ng-binding"),function(t,n,e){n.data("$binding",e.ngBindHtml);var r=o(e.ngBindHtml);t.$watch(function(){return(r(t)||"").toString()},function(e){n.html(i.getTrustedHtml(r(t))||"")})}}}}];function _r(a,m){return a="ngClass"+a,["$animate",function(d){return{restrict:"AC",link:function(s,u,o){var l;function c(e){var t=f(e,1);o.$addClass(t)}function f(e,t){var n=u.data("$classCounts")||{},r=[];return re(e,function(e){(0<t||n[e])&&(n[e]=(n[e]||0)+t,n[e]===+(0<t)&&r.push(e))}),u.data("$classCounts",n),r.join(" ")}function t(e){if(!0===m||s.$index%2===m){var t=h(e||[]);if(l){if(!ce(e,l)){var n=h(l);o=p(i=t,r=n),a=f(a=p(r,i),-1),0===(o=f(o,1)).length?d.removeClass(u,a):0===a.length?d.addClass(u,o):d.setClass(u,o,a)}}else c(t)}var r,i,o,a;l=le(e)}s.$watch(o[a],t,!0),o.$observe("class",function(e){t(s.$eval(o[a]))}),"ngClass"!==a&&s.$watch("$index",function(e,t){var n,r=1&e;if(r!==(1&t)){var i=h(s.$eval(o[a]));r===m?c(i):(n=f(i,-1),o.$removeClass(n))}})}};function p(e,t){var n=[];e:for(var r=0;r<e.length;r++){for(var i=e[r],o=0;o<t.length;o++)if(i==t[o])continue e;n.push(i)}return n}function h(e){if(ae(e))return e;if(oe(e))return e.split(" ");if(ie(e)){var n=[];return re(e,function(e,t){e&&(n=n.concat(t.split(" ")))}),n}return e}}]}var Ar=_r("",!0),Pr=_r("Odd",0),Mr=_r("Even",1),Tr=Jn({compile:function(e,t){t.$set("ngCloak",ee),e.removeClass("ng-cloak")}}),jr=[function(){return{scope:!0,controller:"@",priority:500}}],Or={},Dr={blur:!0,focus:!0};re("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(o){var a=yt("ng-"+o);Or[a]=["$parse","$rootScope",function(n,i){return{compile:function(e,t){var r=n(t[a],!0);return function(n,e){e.on(o,function(e){var t=function(){r(n,{$event:e})};Dr[o]&&i.$$phase?n.$evalAsync(t):n.$apply(t)})}}}}]});var Rr=["$animate",function(u){return{transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(t,n,r,e,i){var o,a,s;t.$watch(r.ngIf,function(e){W(e)?a||(a=t.$new(),i(a,function(e){e[e.length++]=Z.createComment(" end ngIf: "+r.ngIf+" "),o={clone:e},u.enter(e,n.parent(),n)})):(s&&(s.remove(),s=null),a&&(a.$destroy(),a=null),o&&(s=ge(o.clone),u.leave(s,function(){s=null}),o=null))})}}}],Nr=["$http","$templateCache","$anchorScroll","$animate","$sce",function(m,v,g,$,r){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:d.noop,compile:function(e,t){var n=t.ngInclude||t.src,p=t.onload||"",h=t.autoscroll;return function(o,a,e,s,u){var l,t,c,f=0,d=function(){t&&(t.remove(),t=null),l&&(l.$destroy(),l=null),c&&($.leave(c,function(){t=null}),t=c,c=null)};o.$watch(r.parseAsResourceUrl(n),function(e){var r=function(){!L(h)||h&&!o.$eval(h)||g()},i=++f;e?(m.get(e,{cache:v}).success(function(e){if(i===f){var t=o.$new();s.template=e;var n=u(t,function(e){d(),$.enter(e,null,a,r)});c=n,(l=t).$emit("$includeContentLoaded"),o.$eval(p)}}).error(function(){i===f&&d()}),o.$emit("$includeContentRequested")):(d(),s.template=null)})}}}}],Fr=["$compile",function(i){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(e,t,n,r){t.html(r.template),i(t.contents())(e)}}}],Ir=Jn({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),Lr=Jn({terminal:!0,priority:1e3}),Ur=["$locale","$interpolate",function(f,d){var p=/{}/g;return{restrict:"EA",link:function(t,n,r){var i=r.count,e=r.$attr.when&&n.attr(r.$attr.when),o=r.offset||0,a=t.$eval(e)||{},s={},u=d.startSymbol(),l=d.endSymbol(),c=/^when(Minus)?(.+)$/;re(r,function(e,t){c.test(t)&&(a[k(t.replace("when","").replace("Minus","-"))]=n.attr(r.$attr[t]))}),re(a,function(e,t){s[t]=d(e.replace(p,u+i+"-"+o+l))}),t.$watch(function(){var e=parseFloat(t.$eval(i));return isNaN(e)?"":(e in a||(e=f.pluralCat(e-o)),s[e](t,n,!0))},function(e){n.text(e)})}}}],Vr=["$parse","$animate",function(u,k){var q="$$NG_REMOVED",_=S("ngRepeat");return{transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,link:function(v,g,e,t,$){var n,r,y,w,b,i,o,x,S,C=e.ngRepeat,a=C.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),s={$id:Ze};if(!a)throw _("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",C);if(i=a[1],o=a[2],(n=a[3])?(r=u(n),y=function(e,t,n){return S&&(s[S]=e),s[x]=t,s.$index=n,r(v,s)}):(w=function(e,t){return Ze(t)},b=function(e){return e}),!(a=i.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/)))throw _("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",i);x=a[3]||a[1],S=a[2];var E={};v.$watchCollection(o,function(e){var t,n,r,i,o,a,s,u,l,c,f,d,p=g[0],h={},m=[];if(P(e))c=e,l=y||w;else{for(a in l=y||b,c=[],e)e.hasOwnProperty(a)&&"$"!=a.charAt(0)&&c.push(a);c.sort()}for(i=c.length,n=m.length=c.length,t=0;t<n;t++)if(me(u=l(a=e===c?t:c[t],s=e[a],t),"`track by` id"),E.hasOwnProperty(u))f=E[u],delete E[u],h[u]=f,m[t]=f;else{if(h.hasOwnProperty(u))throw re(m,function(e){e&&e.scope&&(E[e.id]=e)}),_("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",C,u,H(s));m[t]={id:u},h[u]=!1}for(a in E)E.hasOwnProperty(a)&&(d=ge((f=E[a]).clone),k.leave(d),re(d,function(e){e[q]=!0}),f.scope.$destroy());for(t=0,n=c.length;t<n;t++){if(s=e[a=e===c?t:c[t]],f=m[t],m[t-1]&&(p=A(m[t-1])),f.scope){for(o=f.scope,r=p;(r=r.nextSibling)&&r[q];);f.clone[0]!=r&&k.move(ge(f.clone),null,ne(p)),p=A(f)}else o=v.$new();o[x]=s,S&&(o[S]=a),o.$index=t,o.$first=0===t,o.$last=t===i-1,o.$middle=!(o.$first||o.$last),o.$odd=!(o.$even=0==(1&t)),f.scope||$(o,function(e){e[e.length++]=Z.createComment(" end ngRepeat: "+C+" "),k.enter(e,null,ne(p)),p=e,f.scope=o,f.clone=e,h[f.id]=f})}E=h})}};function A(e){return e.clone[e.clone.length-1]}}],Br=["$animate",function(r){return function(e,t,n){e.$watch(n.ngShow,function(e){r[W(e)?"removeClass":"addClass"](t,"ng-hide")})}}],zr=["$animate",function(r){return function(e,t,n){e.$watch(n.ngHide,function(e){r[W(e)?"addClass":"removeClass"](t,"ng-hide")})}}],Hr=Jn(function(e,n,t){e.$watch(t.ngStyle,function(e,t){t&&e!==t&&re(t,function(e,t){n.css(t,"")}),e&&n.css(e)},!0)}),Wr=["$animate",function(f){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(i,e,o,a){var t=o.ngSwitch||o.on,s=[],u=[],l=[],c=[];i.$watch(t,function(e){var t,n;for(t=0,n=l.length;t<n;++t)l[t].remove();for(l.length=0,t=0,n=c.length;t<n;++t){var r=u[t];c[t].$destroy(),l[t]=r,f.leave(r,function(){l.splice(t,1)})}u.length=0,c.length=0,(s=a.cases["!"+e]||a.cases["?"])&&(i.$eval(o.change),re(s,function(n){var e=i.$new();c.push(e),n.transclude(e,function(e){var t=n.element;u.push(e),f.enter(e,t.parent(),t)})}))})}}}],Gr=Jn({transclude:"element",priority:800,require:"^ngSwitch",link:function(e,t,n,r,i){r.cases["!"+n.ngSwitchWhen]=r.cases["!"+n.ngSwitchWhen]||[],r.cases["!"+n.ngSwitchWhen].push({transclude:i,element:t})}}),Xr=Jn({transclude:"element",priority:800,require:"^ngSwitch",link:function(e,t,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:t})}}),Qr=Jn({link:function(e,t,n,r,i){if(!i)throw S("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",de(t));i(function(e){t.empty(),t.append(e)})}}),Yr=["$templateCache",function(i){return{restrict:"E",terminal:!0,compile:function(e,t){if("text/ng-template"==t.type){var n=t.id,r=e[0].text;i.put(n,r)}}}}],Jr=S("ngOptions"),Kr=w({terminal:!0}),Zr=["$compile","$parse",function(y,w){var b=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,s={$setViewValue:q};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(n,e,t){var r,i=this,o={},a=s;i.databound=t.ngModel,i.init=function(e,t,n){a=e,r=n},i.addOption=function(e){me(e,'"option value"'),o[e]=!0,a.$viewValue==e&&(n.val(e),r.parent()&&r.remove())},i.removeOption=function(e){this.hasOption(e)&&(delete o[e],a.$viewValue==e&&this.renderUnknownOption(e))},i.renderUnknownOption=function(e){var t="? "+Ze(e)+" ?";r.val(t),n.prepend(r),n.val(t),r.prop("selected",!0)},i.hasOption=function(e){return o.hasOwnProperty(e)},e.$on("$destroy",function(){i.renderUnknownOption=q})}],link:function(e,t,n,r){if(r[1]){for(var i,o,a,s,u,l,c,f,d,O=r[0],p=r[1],D=n.multiple,h=n.ngOptions,R=!1,N=ne(Z.createElement("option")),F=ne(Z.createElement("optgroup")),m=N.clone(),v=0,g=t.children(),$=g.length;v<$;v++)if(""===g[v].value){i=R=g.eq(v);break}O.init(p,R,m),D&&(p.$isEmpty=function(e){return!e||0===e.length}),h?function(S,C,E){var e;if(!(e=h.match(b)))throw Jr("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",h,de(C));var k=w(e[2]||e[1]),q=e[4]||e[6],_=e[5],A=w(e[3]||""),P=w(e[2]?e[1]:q),M=w(e[7]),T=e[8]?w(e[8]):null,j=[[{element:C,label:""}]];R&&(y(R)(S),R.removeClass("ng-scope"),R.remove());C.empty(),C.on("change",function(){S.$apply(function(){var e,t,n,r,i,o,a,s,u,l=M(S)||[],c={};if(D){for(n=[],o=0,s=j.length;o<s;o++)for(i=1,a=(e=j[o]).length;i<a;i++)if((r=e[i].element)[0].selected){if(t=r.val(),_&&(c[_]=t),T)for(u=0;u<l.length&&(c[q]=l[u],T(S,c)!=t);u++);else c[q]=l[t];n.push(P(S,c))}}else if("?"==(t=C.val()))n=ee;else if(""===t)n=null;else if(T){for(u=0;u<l.length;u++)if(c[q]=l[u],T(S,c)==t){n=P(S,c);break}}else c[q]=l[t],_&&(c[_]=t),n=P(S,c);E.$setViewValue(n),f()})}),E.$render=f,S.$watchCollection(M,f),S.$watchCollection(function(){var e={},t=M(S);if(t){for(var n=new Array(t.length),r=0,i=t.length;r<i;r++)e[q]=t[r],n[r]=k(S,e);return n}},f),D&&S.$watchCollection(function(){return E.$modelValue},f);function f(){var e,t,n,r,i,o,a,s,u,l,c,f,d,p,h,m={"":[]},v=[""],g=E.$modelValue,$=M(S)||[],y=_?I($):$,w={},b=function(){var e=!1;if(D){var t=E.$modelValue;if(T&&ae(t)){e=new et([]);for(var n={},r=0;r<t.length;r++)n[q]=t[r],e.put(T(S,n),t[r])}else e=new et(t)}return e}();for(c=0;u=y.length,c<u;c++){if(a=c,_){if("$"===(a=y[c]).charAt(0))continue;w[_]=a}if(w[q]=$[a],e=A(S,w)||"",(t=m[e])||(t=m[e]=[],v.push(e)),D)f=L(b.remove(T?T(S,w):P(S,w)));else{if(T){var x={};x[q]=g,f=T(S,x)===T(S,w)}else f=g===P(S,w);b=b||f}h=L(h=k(S,w))?h:"",t.push({id:T?T(S,w):_?y[c]:c,label:h,selected:f})}for(D||(R||null===g?m[""].unshift({id:"",label:"",selected:!b}):b||m[""].unshift({id:"?",label:"",selected:!0})),l=0,s=v.length;l<s;l++){for(e=v[l],t=m[e],j.length<=l?(r={element:F.clone().attr("label",e),label:t.label},i=[r],j.push(i),C.append(r.element)):(i=j[l],(r=i[0]).label!=e&&r.element.attr("label",r.label=e)),d=null,c=0,u=t.length;c<u;c++)n=t[c],(o=i[c+1])?(d=o.element,o.label!==n.label&&(d.text(o.label=n.label),d.prop("label",o.label)),o.id!==n.id&&d.val(o.id=n.id),d[0].selected!==n.selected&&(d.prop("selected",o.selected=n.selected),te&&d.prop("selected",o.selected))):(""===n.id&&R?p=R:(p=N.clone()).val(n.id).prop("selected",n.selected).attr("selected",n.selected).prop("label",n.label).text(n.label),i.push(o={element:p,label:n.label,id:n.id,selected:n.selected}),O.addOption(n.label,p),d?d.after(p):r.element.append(p),d=p);for(c++;i.length>c;)n=i.pop(),O.removeOption(n.label),n.element.remove()}for(;j.length>l;)j.pop()[0].element.remove()}}(e,t,p):D?(l=e,c=t,(f=p).$render=function(){var t=new et(f.$viewValue);re(c.find("option"),function(e){e.selected=L(t.get(e.value))})},l.$watch(function(){ce(d,f.$viewValue)||(d=le(f.$viewValue),f.$render())}),c.on("change",function(){l.$apply(function(){var t=[];re(c.find("option"),function(e){e.selected&&t.push(e.value)}),f.$setViewValue(t)})})):(o=e,a=t,u=O,(s=p).$render=function(){var e=s.$viewValue;u.hasOption(e)?(m.parent()&&m.remove(),a.val(e),""===e&&i.prop("selected",!0)):_(e)&&i?a.val(""):u.renderUnknownOption(e)},a.on("change",function(){o.$apply(function(){m.parent()&&m.remove(),s.$setViewValue(a.val())})}))}}}}],ei=["$interpolate",function(n){var s={addOption:q,removeOption:q};return{restrict:"E",priority:100,compile:function(e,t){if(_(t.value)){var a=n(e.text(),!0);a||t.$set("value",e.text())}return function(e,t,n){var r="$selectController",i=t.parent(),o=i.data(r)||i.parent().data(r);o&&o.databound?t.prop("selected",!1):o=s,a?e.$watch(a,function(e,t){n.$set("value",e),e!==t&&o.removeOption(t),o.addOption(e)}):o.addOption(n.value),t.on("$destroy",function(){o.removeOption(n.value)})}}}}],ti=w({restrict:"E",terminal:!0});m.angular.bootstrap?console.log("WARNING: Tried to load angular more than once."):((h=m.jQuery)&&h.fn.on?(j((ne=h).fn,{scope:Qe.scope,isolateScope:Qe.isolateScope,controller:Qe.controller,injector:Qe.injector,inheritedData:Qe.inheritedData}),qe("remove",!0,!0,!1),qe("empty",!1,!1,!1),qe("html",!1,!1,!0)):ne=De,d.element=ne,function(e){j(e,{bootstrap:Y,copy:U,extend:j,equals:ce,element:ne,forEach:re,injector:st,noop:q,bind:z,toJson:H,fromJson:a,identity:y,isUndefined:_,isDefined:L,isString:oe,isFunction:se,isObject:ie,isNumber:b,isElement:t,isArray:ae,version:$e,isDate:A,lowercase:k,uppercase:l,callbacks:{counter:0},$$minErr:S,$$csp:V}),p=function(e){var u=S("$injector"),n=S("ng");function t(e,t,n){return e[t]||(e[t]=n())}var r=t(e,"angular",Object);return r.$$minErr=r.$$minErr||S,t(r,"module",function(){var e={};return function(o,a,s){return function(e,t){if("hasOwnProperty"===e)throw n("badname","hasOwnProperty is not a valid {0} name",t)}(o,"module"),a&&e.hasOwnProperty(o)&&(e[o]=null),t(e,o,function(){if(!a)throw u("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",o);var r=[],t=[],e=n("$injector","invoke"),i={_invokeQueue:r,_runBlocks:t,requires:a,name:o,provider:n("$provide","provider"),factory:n("$provide","factory"),service:n("$provide","service"),value:n("$provide","value"),constant:n("$provide","constant","unshift"),animation:n("$animateProvider","register"),filter:n("$filterProvider","register"),controller:n("$controllerProvider","register"),directive:n("$compileProvider","directive"),config:e,run:function(e){return t.push(e),this}};return s&&e(s),i;function n(e,t,n){return function(){return r[n||"push"]([e,t,arguments]),i}}})}})}(m);try{p("ngLocale")}catch(e){p("ngLocale",[]).provider("$locale",Ot)}p("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:wn}),e.provider("$compile",gt).directive({a:Kn,input:pr,textarea:pr,form:rr,script:Yr,select:Zr,style:ti,option:ei,ngBind:Er,ngBindHtml:qr,ngBindTemplate:kr,ngClass:Ar,ngClassEven:Mr,ngClassOdd:Pr,ngCloak:Tr,ngController:jr,ngForm:ir,ngHide:zr,ngIf:Rr,ngInclude:Nr,ngInit:Ir,ngNonBindable:Lr,ngPluralize:Ur,ngRepeat:Vr,ngShow:Br,ngStyle:Hr,ngSwitch:Wr,ngSwitchWhen:Gr,ngSwitchDefault:Xr,ngOptions:Kr,ngTransclude:Qr,ngModel:yr,ngList:xr,ngChange:wr,required:br,ngRequired:br,ngValue:Cr}).directive({ngInclude:Fr}).directive(Zn).directive(Or),e.provider({$anchorScroll:ut,$animate:ct,$browser:pt,$cacheFactory:ht,$controller:bt,$document:xt,$exceptionHandler:St,$filter:jn,$interpolate:Tt,$interval:jt,$http:_t,$httpBackend:Pt,$location:Qt,$log:Yt,$parse:vn,$rootScope:yn,$q:gn,$sce:En,$sceDelegate:Cn,$sniffer:kn,$templateCache:mt,$timeout:qn,$window:Tn,$$rAF:$n,$$asyncCallback:ft})}])}(d),ne(Z).ready(function(){!function(t,e){var r,i,n=[t],o=["ng:app","ng-app","x-ng-app","data-ng-app"],a=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;function s(e){e&&n.push(e)}re(o,function(e){o[e]=!0,s(Z.getElementById(e)),e=e.replace(":","\\:"),t.querySelectorAll&&(re(t.querySelectorAll("."+e),s),re(t.querySelectorAll("."+e+"\\:"),s),re(t.querySelectorAll("["+e+"]"),s))}),re(n,function(t){if(!r){var e=" "+t.className+" ",n=a.exec(e);n?(r=t,i=(n[2]||"").replace(/\s+/g,",")):re(t.attributes,function(e){!r&&o[e.name]&&(r=t,i=e.value)})}}),r&&e(r,i?[i]:[])}(Z,Y)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\\:form{display:block;}.ng-animate-block-transitions{transition:0s all!important;-webkit-transition:0s all!important;}.ng-hide-add-active,.ng-hide-remove{display:block!important;}</style>');var commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var lodash=createCommonjsModule(function($,y){
/**
 * @license
 * lodash 3.10.1 (Custom Build) <https://lodash.com/>
 * Build: `lodash modern -d -o ./index.js`
 * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <https://lodash.com/license>
 */
(function(){var hi,e,t,mi="3.10.1",vi=1,gi=2,$i=4,yi=8,wi=16,bi=32,xi=64,Si=128,Ci=256,Ei=30,ki="...",qi=150,_i=16,Ai=200,Pi=1,Mi=2,Ti="Expected a function",ji="__lodash_placeholder__",Oi="[object Arguments]",Di="[object Array]",Ri="[object Boolean]",Ni="[object Date]",Fi="[object Error]",Ii="[object Function]",n="[object Map]",Li="[object Number]",Ui="[object Object]",Vi="[object RegExp]",r="[object Set]",Bi="[object String]",i="[object WeakMap]",zi="[object ArrayBuffer]",Hi="[object Float32Array]",Wi="[object Float64Array]",Gi="[object Int8Array]",Xi="[object Int16Array]",Qi="[object Int32Array]",Yi="[object Uint8Array]",Ji="[object Uint8ClampedArray]",Ki="[object Uint16Array]",Zi="[object Uint32Array]",eo=/\b__p \+= '';/g,to=/\b(__p \+=) '' \+/g,no=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ro=/&(?:amp|lt|gt|quot|#39|#96);/g,io=/[&<>"'`]/g,oo=RegExp(ro.source),ao=RegExp(io.source),so=/<%-([\s\S]+?)%>/g,uo=/<%([\s\S]+?)%>/g,lo=/<%=([\s\S]+?)%>/g,co=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,fo=/^\w*$/,po=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,ho=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,mo=RegExp(ho.source),vo=/[\u0300-\u036f\ufe20-\ufe23]/g,go=/\\(\\)?/g,$o=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,yo=/\w*$/,wo=/^0[xX]/,bo=/^\[object .+?Constructor\]$/,xo=/^\d+$/,So=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Co=/($^)/,Eo=/['\n\r\u2028\u2029\\]/g,ko=(e="[A-Z\\xc0-\\xd6\\xd8-\\xde]",t="[a-z\\xdf-\\xf6\\xf8-\\xff]+",RegExp(e+"+(?="+e+t+")|"+e+"?"+t+"|"+e+"+|[0-9]+","g")),qo=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],_o=-1,Ao={};Ao[Hi]=Ao[Wi]=Ao[Gi]=Ao[Xi]=Ao[Qi]=Ao[Yi]=Ao[Ji]=Ao[Ki]=Ao[Zi]=!0,Ao[Oi]=Ao[Di]=Ao[zi]=Ao[Ri]=Ao[Ni]=Ao[Fi]=Ao[Ii]=Ao[n]=Ao[Li]=Ao[Ui]=Ao[Vi]=Ao[r]=Ao[Bi]=Ao[i]=!1;var Po={};Po[Oi]=Po[Di]=Po[zi]=Po[Ri]=Po[Ni]=Po[Hi]=Po[Wi]=Po[Gi]=Po[Xi]=Po[Qi]=Po[Li]=Po[Ui]=Po[Vi]=Po[Bi]=Po[Yi]=Po[Ji]=Po[Ki]=Po[Zi]=!0,Po[Fi]=Po[Ii]=Po[n]=Po[r]=Po[i]=!1;var o={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},s={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},u={function:!0,object:!0},l={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},c={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},f=u.object&&y&&!y.nodeType&&y,d=u.object&&$&&!$.nodeType&&$,p=f&&d&&"object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object&&commonjsGlobal,h=u[typeof self]&&self&&self.Object&&self,m=u[typeof window]&&window&&window.Object&&window,v=d&&d.exports===f&&f,Mo=p||m!==(this&&this.window)&&m||h||this;function To(e,t){if(e!==t){var n=null===e,r=e===hi,i=e==e,o=null===t,a=t===hi,s=t==t;if(t<e&&!o||!i||n&&!a&&s||r&&s)return 1;if(e<t&&!n||!s||o&&!r&&i||a&&i)return-1}return 0}function jo(e,t,n){for(var r=e.length,i=n?r:-1;n?i--:++i<r;)if(t(e[i],i,e))return i;return-1}function Oo(e,t,n){if(t!=t)return zo(e,n);for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function Do(e){return"function"==typeof e||!1}function Ro(e){return null==e?"":e+""}function No(e,t){for(var n=-1,r=e.length;++n<r&&-1<t.indexOf(e.charAt(n)););return n}function Fo(e,t){for(var n=e.length;n--&&-1<t.indexOf(e.charAt(n)););return n}function Io(e,t){return To(e.criteria,t.criteria)||e.index-t.index}function Lo(e){return o[e]}function Uo(e){return a[e]}function Vo(e,t,n){return t?e=l[e]:n&&(e=c[e]),"\\"+e}function Bo(e){return"\\"+c[e]}function zo(e,t,n){for(var r=e.length,i=t+(n?0:-1);n?i--:++i<r;){var o=e[i];if(o!=o)return i}return-1}function Ho(e){return!!e&&"object"==typeof e}function g(e){return e<=160&&9<=e&&e<=13||32==e||160==e||5760==e||6158==e||8192<=e&&(e<=8202||8232==e||8233==e||8239==e||8287==e||12288==e||65279==e)}function Wo(e,t){for(var n=-1,r=e.length,i=-1,o=[];++n<r;)e[n]===t&&(e[n]=ji,o[++i]=n);return o}function Go(e){for(var t=-1,n=e.length;++t<n&&g(e.charCodeAt(t)););return t}function Xo(e){for(var t=e.length;t--&&g(e.charCodeAt(t)););return t}function Qo(e){return s[e]}var Yo=function e(t){var A=(t=t?Yo.defaults(Mo.Object(),t,Yo.pick(Mo,qo)):Mo).Array,n=t.Date,r=t.Error,v=t.Function,i=t.Math,o=t.Number,g=t.Object,$=t.RegExp,a=t.String,y=t.TypeError,s=A.prototype,u=g.prototype,l=a.prototype,c=v.prototype.toString,w=u.hasOwnProperty,f=0,b=u.toString,d=Mo._,p=$("^"+c.call(w).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),h=t.ArrayBuffer,x=t.clearTimeout,m=t.parseFloat,S=i.pow,C=u.propertyIsEnumerable,E=Dt(t,"Set"),k=t.setTimeout,q=s.splice,_=t.Uint8Array,P=Dt(t,"WeakMap"),M=i.ceil,T=Dt(g,"create"),j=i.floor,O=Dt(A,"isArray"),D=t.isFinite,R=Dt(g,"keys"),N=i.max,F=i.min,I=Dt(n,"now"),L=t.parseInt,U=i.random,V=o.NEGATIVE_INFINITY,B=o.POSITIVE_INFINITY,z=4294967295,H=z-1,W=z>>>1,G=9007199254740991,X=P&&new P,Q={};function Y(e){if(Ho(e)&&!cr(e)&&!(e instanceof Z)){if(e instanceof K)return e;if(w.call(e,"__chain__")&&w.call(e,"__wrapped__"))return Zt(e)}return new K(e)}function J(){}function K(e,t,n){this.__wrapped__=e,this.__actions__=n||[],this.__chain__=!!t}Y.support={};function Z(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=B,this.__views__=[]}function ee(){this.__data__={}}function te(e){var t=e?e.length:0;for(this.data={hash:T(null),set:new E};t--;)this.push(e[t])}function ne(e,t){var n=e.data;return("string"==typeof t||hr(t)?n.set.has(t):n.hash[t])?0:-1}function re(e,t){var n=-1,r=e.length;for(t||(t=A(r));++n<r;)t[n]=e[n];return t}function ie(e,t){for(var n=-1,r=e.length;++n<r&&!1!==t(e[n],n,e););return e}function oe(e,t){for(var n=-1,r=e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function ae(e,t){for(var n=-1,r=e.length,i=-1,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[++i]=a)}return o}function se(e,t){for(var n=-1,r=e.length,i=A(r);++n<r;)i[n]=t(e[n],n,e);return i}function ue(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function le(e,t,n,r){var i=-1,o=e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function ce(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function fe(e,t,n,r){return e!==hi&&w.call(r,n)?e:t}function de(e,t,n){for(var r=-1,i=Dr(t),o=i.length;++r<o;){var a=i[r],s=e[a],u=n(s,t[a],a,e,t);(u==u?u===s:s!=s)&&(s!==hi||a in e)||(e[a]=u)}return e}function pe(e,t){return null==t?e:me(t,Dr(t),e)}function he(e,t){for(var n=-1,r=null==e,i=!r&&Nt(e),o=i?e.length:0,a=t.length,s=A(a);++n<a;){var u=t[n];s[n]=i?Ft(u,o)?e[u]:hi:r?hi:e[u]}return s}function me(e,t,n){n||(n={});for(var r=-1,i=t.length;++r<i;){var o=t[r];n[o]=e[o]}return n}function ve(e,t,n){var r=typeof e;return"function"==r?t===hi?e:Ze(e,t,n):null==e?ti:"object"==r?Ne(e):t===hi?si(e):Fe(e,t)}function ge(n,r,i,e,t,o,a){var s;if(i&&(s=t?i(n,e,t):i(n)),s!==hi)return s;if(!hr(n))return n;var u,l,c,f,d=cr(n);if(d){if(c=(l=n).length,f=new l.constructor(c),c&&"string"==typeof l[0]&&w.call(l,"index")&&(f.index=l.index,f.input=l.input),s=f,!r)return re(n,s)}else{var p=b.call(n),h=p==Ii;if(p!=Ui&&p!=Oi&&(!h||t))return Po[p]?function(e,t,n){var r=e.constructor;switch(t){case zi:return et(e);case Ri:case Ni:return new r(+e);case Hi:case Wi:case Gi:case Xi:case Qi:case Yi:case Ji:case Ki:case Zi:var i=e.buffer;return new r(n?et(i):i,e.byteOffset,e.length);case Li:case Bi:return new r(e);case Vi:var o=new r(e.source,yo.exec(e));o.lastIndex=e.lastIndex}return o}(n,p,r):t?n:{};if("function"==typeof(u=(h?{}:n).constructor)&&u instanceof u||(u=g),s=new u,!r)return pe(s,n)}o||(o=[]),a||(a=[]);for(var m=o.length;m--;)if(o[m]==n)return a[m];return o.push(n),a.push(s),(d?ie:Pe)(n,function(e,t){s[t]=ge(e,r,i,t,n,o,a)}),s}Y.templateSettings={escape:so,evaluate:uo,interpolate:lo,variable:"",imports:{_:Y}};var $e=function(){function n(){}return function(e){if(hr(e)){n.prototype=e;var t=new n;n.prototype=hi}return t||{}}}();function ye(e,t,n){if("function"!=typeof e)throw new y(Ti);return k(function(){e.apply(hi,n)},t)}function we(e,t){var n=e?e.length:0,r=[];if(!n)return r;var i=-1,o=Tt(),a=o==Oo,s=a&&t.length>=Ai?st(t):null,u=t.length;s&&(o=ne,a=!1,t=s);e:for(;++i<n;){var l=e[i];if(a&&l==l){for(var c=u;c--;)if(t[c]===l)continue e;r.push(l)}else o(t,l,0)<0&&r.push(l)}return r}var be=ot(Pe),xe=ot(Me,!0);function Se(e,r){var i=!0;return be(e,function(e,t,n){return i=!!r(e,t,n)}),i}function Ce(e,r){var i=[];return be(e,function(e,t,n){r(e,t,n)&&i.push(e)}),i}function Ee(e,r,t,i){var o;return t(e,function(e,t,n){if(r(e,t,n))return o=i?t:e,!1}),o}function ke(e,t,n,r){r||(r=[]);for(var i=-1,o=e.length;++i<o;){var a=e[i];Ho(a)&&Nt(a)&&(n||cr(a)||lr(a))?t?ke(a,t,n,r):ue(r,a):n||(r[r.length]=a)}return r}var qe=at(),_e=at(!0);function Ae(e,t){return qe(e,t,Rr)}function Pe(e,t){return qe(e,t,Dr)}function Me(e,t){return _e(e,t,Dr)}function Te(e,t){for(var n=-1,r=t.length,i=-1,o=[];++n<r;){var a=t[n];pr(e[a])&&(o[++i]=a)}return o}function je(e,t,n){if(null!=e){n!==hi&&n in Jt(e)&&(t=[n]);for(var r=0,i=t.length;null!=e&&r<i;)e=e[t[r++]];return r&&r==i?e:hi}}function Oe(e,t,n,r,i,o){return e===t||(null==e||null==t||!hr(e)&&!Ho(t)?e!=e&&t!=t:function(e,t,n,r,i,o,a){var s=cr(e),u=cr(t),l=Di,c=Di;s||((l=b.call(e))==Oi?l=Ui:l!=Ui&&(s=wr(e))),u||((c=b.call(t))==Oi?c=Ui:c!=Ui&&(u=wr(t)));var f=l==Ui,d=c==Ui,p=l==c;if(p&&!s&&!f)return function(e,t,n){switch(n){case Ri:case Ni:return+e==+t;case Fi:return e.name==t.name&&e.message==t.message;case Li:return e!=+e?t!=+t:e==+t;case Vi:case Bi:return e==t+""}return!1}(e,t,l);if(!i){var h=f&&w.call(e,"__wrapped__"),m=d&&w.call(t,"__wrapped__");if(h||m)return n(h?e.value():e,m?t.value():t,r,i,o,a)}if(!p)return!1;o||(o=[]),a||(a=[]);for(var v=o.length;v--;)if(o[v]==e)return a[v]==t;o.push(e),a.push(t);var g=(s?function(e,t,n,r,i,o,a){var s=-1,u=e.length,l=t.length;if(u!=l&&!(i&&u<l))return!1;for(;++s<u;){var c=e[s],f=t[s],d=r?r(i?f:c,i?c:f,s):hi;if(d!==hi){if(d)continue;return!1}if(i){if(!ce(t,function(e){return c===e||n(c,e,r,i,o,a)}))return!1}else if(c!==f&&!n(c,f,r,i,o,a))return!1}return!0}:function(e,t,n,r,i,o,a){var s=Dr(e),u=s.length,l=Dr(t).length;if(u!=l&&!i)return!1;for(var c=u;c--;){var f=s[c];if(!(i?f in t:w.call(t,f)))return!1}for(var d=i;++c<u;){f=s[c];var p=e[f],h=t[f],m=r?r(i?h:p,i?p:h,f):hi;if(!(m===hi?n(p,h,r,i,o,a):m))return!1;d||(d="constructor"==f)}if(!d){var v=e.constructor,g=t.constructor;if(v!=g&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof g&&g instanceof g))return!1}return!0})(e,t,n,r,i,o,a);return o.pop(),a.pop(),g}(e,t,Oe,n,r,i,o))}function De(e,t,n){var r=t.length,i=r,o=!n;if(null==e)return!i;for(e=Jt(e);r--;){var a=t[r];if(o&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++r<i;){var s=(a=t[r])[0],u=e[s],l=a[1];if(o&&a[2]){if(u===hi&&!(s in e))return!1}else{var c=n?n(u,l,s):hi;if(!(c===hi?Oe(l,u,n,!0):c))return!1}}return!0}function Re(e,r){var i=-1,o=Nt(e)?A(e.length):[];return be(e,function(e,t,n){o[++i]=r(e,t,n)}),o}function Ne(e){var t=Ot(e);if(1==t.length&&t[0][2]){var n=t[0][0],r=t[0][1];return function(e){return null!=e&&e[n]===r&&(r!==hi||n in Jt(e))}}return function(e){return De(e,t)}}function Fe(n,r){var i=cr(n),o=Lt(n)&&Bt(r),a=n+"";return n=Kt(n),function(e){if(null==e)return!1;var t=a;if(e=Jt(e),(i||!o)&&!(t in e)){if(null==(e=1==n.length?e:je(e,Be(n,0,-1))))return!1;t=ln(n),e=Jt(e)}return e[t]===r?r!==hi||t in e:Oe(r,e[t],hi,!0)}}function Ie(t){return function(e){return null==e?hi:e[t]}}function Le(e,t){for(var n=e?t.length:0;n--;){var r=t[n];if(r!=i&&Ft(r)){var i=r;q.call(e,r,1)}}return e}function Ue(e,t){return e+j(U()*(t-e+1))}var Ve=X?function(e,t){return X.set(e,t),e}:ti;function Be(e,t,n){var r=-1,i=e.length;(t=null==t?0:+t||0)<0&&(t=i<-t?0:i+t),(n=n===hi||i<n?i:+n||0)<0&&(n+=i),i=n<t?0:n-t>>>0,t>>>=0;for(var o=A(i);++r<i;)o[r]=e[r+t];return o}function ze(e,r){var i;return be(e,function(e,t,n){return!(i=r(e,t,n))}),!!i}function He(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function We(e,n,r){var t=At(),i=-1;return n=se(n,function(e){return t(e)}),He(Re(e,function(t){return{criteria:se(n,function(e){return e(t)}),index:++i,value:t}}),function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;++r<a;){var u=To(i[r],o[r]);if(u){if(s<=r)return u;var l=n[r];return u*("asc"===l||!0===l?1:-1)}}return e.index-t.index}(e,t,r)})}function Ge(e,t){var n=-1,r=Tt(),i=e.length,o=r==Oo,a=o&&Ai<=i,s=a?st():null,u=[];s?(r=ne,o=!1):(a=!1,s=t?[]:u);e:for(;++n<i;){var l=e[n],c=t?t(l,n,e):l;if(o&&l==l){for(var f=s.length;f--;)if(s[f]===c)continue e;t&&s.push(c),u.push(l)}else r(s,c,0)<0&&((t||a)&&s.push(c),u.push(l))}return u}function Xe(e,t){for(var n=-1,r=t.length,i=A(r);++n<r;)i[n]=e[t[n]];return i}function Qe(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?Be(e,r?0:o,r?o+1:i):Be(e,r?o+1:0,r?i:o)}function Ye(e,t){var n=e;n instanceof Z&&(n=n.value());for(var r=-1,i=t.length;++r<i;){var o=t[r];n=o.func.apply(o.thisArg,ue([n],o.args))}return n}function Je(e,t,n){var r=0,i=e?e.length:r;if("number"==typeof t&&t==t&&i<=W){for(;r<i;){var o=r+i>>>1,a=e[o];(n?a<=t:a<t)&&null!==a?r=o+1:i=o}return i}return Ke(e,t,ti,n)}function Ke(e,t,n,r){t=n(t);for(var i=0,o=e?e.length:0,a=t!=t,s=null===t,u=t===hi;i<o;){var l=j((i+o)/2),c=n(e[l]),f=c!==hi,d=c==c;if(a)var p=d||r;else p=s?d&&f&&(r||null!=c):u?d&&(r||f):null!=c&&(r?c<=t:c<t);p?i=l+1:o=l}return F(o,H)}function Ze(o,a,e){if("function"!=typeof o)return ti;if(a===hi)return o;switch(e){case 1:return function(e){return o.call(a,e)};case 3:return function(e,t,n){return o.call(a,e,t,n)};case 4:return function(e,t,n,r){return o.call(a,e,t,n,r)};case 5:return function(e,t,n,r,i){return o.call(a,e,t,n,r,i)}}return function(){return o.apply(a,arguments)}}function et(e){var t=new h(e.byteLength);return new _(t).set(new _(e)),t}function tt(e,t,n){for(var r=n.length,i=-1,o=N(e.length-r,0),a=-1,s=t.length,u=A(s+o);++a<s;)u[a]=t[a];for(;++i<r;)u[n[i]]=e[i];for(;o--;)u[a++]=e[i++];return u}function nt(e,t,n){for(var r=-1,i=n.length,o=-1,a=N(e.length-i,0),s=-1,u=t.length,l=A(a+u);++o<a;)l[o]=e[o];for(var c=o;++s<u;)l[c+s]=t[s];for(;++r<i;)l[c+n[r]]=e[o++];return l}function rt(s,u){return function(e,r,t){var i=u?u():{};if(r=At(r,t,3),cr(e))for(var n=-1,o=e.length;++n<o;){var a=e[n];s(i,a,r(a,n,e),e)}else be(e,function(e,t,n){s(i,e,r(e,t,n),n)});return i}}function it(u){return sr(function(e,t){var n=-1,r=null==e?0:t.length,i=2<r?t[r-2]:hi,o=2<r?t[2]:hi,a=1<r?t[r-1]:hi;for("function"==typeof i?(i=Ze(i,a,5),r-=2):r-=(i="function"==typeof a?a:hi)?1:0,o&&It(t[0],t[1],o)&&(i=r<3?hi:i,r=1);++n<r;){var s=t[n];s&&u(e,s,i)}return e})}function ot(o,a){return function(e,t){var n=e?jt(e):0;if(!Vt(n))return o(e,t);for(var r=a?n:-1,i=Jt(e);(a?r--:++r<n)&&!1!==t(i[r],r,i););return e}}function at(u){return function(e,t,n){for(var r=Jt(e),i=n(e),o=i.length,a=u?o:-1;u?a--:++a<o;){var s=i[a];if(!1===t(r[s],s,r))break}return e}}function st(e){return T&&E?new te(e):null}function ut(o){return function(e){for(var t=-1,n=Kr(zr(e)),r=n.length,i="";++t<r;)i=o(i,n[t],t);return i}}function lt(r){return function(){var e=arguments;switch(e.length){case 0:return new r;case 1:return new r(e[0]);case 2:return new r(e[0],e[1]);case 3:return new r(e[0],e[1],e[2]);case 4:return new r(e[0],e[1],e[2],e[3]);case 5:return new r(e[0],e[1],e[2],e[3],e[4]);case 6:return new r(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new r(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var t=$e(r.prototype),n=r.apply(t,e);return hr(n)?n:t}}function ct(o){return function e(t,n,r){r&&It(t,n,r)&&(n=hi);var i=_t(t,o,hi,hi,hi,hi,hi,n);return i.placeholder=e.placeholder,i}}function ft(n,r){return sr(function(e){var t=e[0];return null==t?t:(e.push(r),n.apply(hi,e))})}function dt(l,c){return function(e,t,n){if(n&&It(e,t,n)&&(t=hi),1==(t=At(t,n,3)).length){var r=function(e,t,n,r){for(var i=-1,o=e.length,a=r,s=a;++i<o;){var u=e[i],l=+t(u);n(l,a)&&(a=l,s=u)}return s}(e=cr(e)?e:Yt(e),t,l,c);if(!e.length||r!==c)return r}return i=t,o=l,u=s=a=c,be(e,function(e,t,n){var r=+i(e,t,n);(o(r,s)||r===a&&r===u)&&(s=r,u=e)}),u;var i,o,a,s,u}}function pt(i,o){return function(e,t,n){if(t=At(t,n,3),cr(e)){var r=jo(e,t,o);return-1<r?e[r]:hi}return Ee(e,t,i)}}function ht(r){return function(e,t,n){return e&&e.length?jo(e,t=At(t,n,3),r):-1}}function mt(r){return function(e,t,n){return Ee(e,t=At(t,n,3),r,!0)}}function vt(u){return function(){for(var i,o=arguments.length,e=u?o:-1,t=0,a=A(o);u?e--:++e<o;){var n=a[t++]=arguments[e];if("function"!=typeof n)throw new y(Ti);!i&&K.prototype.thru&&"wrapper"==Mt(n)&&(i=new K([],!0))}for(e=i?-1:o;++e<o;){var r=Mt(n=a[e]),s="wrapper"==r?Pt(n):hi;i=s&&Ut(s[0])&&s[1]==(Si|yi|bi|Ci)&&!s[4].length&&1==s[9]?i[Mt(s[0])].apply(i,s[3]):1==n.length&&Ut(n)?i[r]():i.thru(n)}return function(){var e=arguments,t=e[0];if(i&&1==e.length&&cr(t)&&t.length>=Ai)return i.plant(t).value();for(var n=0,r=o?a[n].apply(this,e):t;++n<o;)r=a[n].call(this,r);return r}}}function gt(r,i){return function(e,t,n){return"function"==typeof t&&n===hi&&cr(e)?r(e,t):i(e,Ze(t,n,3))}}function $t(r){return function(e,t,n){return"function"==typeof t&&n===hi||(t=Ze(t,n,3)),r(e,t,Rr)}}function yt(r){return function(e,t,n){return"function"==typeof t&&n===hi||(t=Ze(t,n,3)),r(e,t)}}function wt(a){return function(e,i,t){var o={};return i=At(i,t,3),Pe(e,function(e,t,n){var r=i(e,t,n);e=a?e:r,o[t=a?r:t]=e}),o}}function bt(r){return function(e,t,n){return e=Ro(e),(r?e:"")+Et(e,t,n)+(r?"":e)}}function xt(r){var i=sr(function(e,t){var n=Wo(t,i.placeholder);return _t(e,r,hi,t,n)});return i}function St(l,c){return function(e,t,n,r){var i,o,a,s,u=arguments.length<3;return"function"==typeof t&&r===hi&&cr(e)?l(e,t,n,u):(i=e,o=At(t,r,4),a=n,s=u,c(i,function(e,t,n){a=s?(s=!1,e):o(a,e,t,n)}),a)}}function Ct(d,p,h,m,v,g,$,y,w,b){var x=p&Si,S=p&vi,C=p&gi,E=p&yi,k=p&$i,q=p&wi,_=C?hi:lt(d);return function e(){for(var t=arguments.length,n=t,r=A(t);n--;)r[n]=arguments[n];if(m&&(r=tt(r,m,v)),g&&(r=nt(r,g,$)),E||q){var i=e.placeholder,o=Wo(r,i);if((t-=o.length)<b){var a=y?re(y):hi,s=N(b-t,0);p|=E?bi:xi,p&=~(E?xi:bi),k||(p&=~(vi|gi));var u=[d,p,h,E?r:hi,E?o:hi,E?hi:r,E?hi:o,a,w,s],l=Ct.apply(hi,u);return Ut(d)&&Xt(l,u),l.placeholder=i,l}}var c=S?h:this,f=C?c[d]:d;return y&&(r=function(e,t){for(var n=e.length,r=F(t.length,n),i=re(e);r--;){var o=t[r];e[r]=Ft(o,n)?i[o]:hi}return e}(r,y)),x&&w<r.length&&(r.length=w),this&&this!==Mo&&this instanceof e&&(f=_||lt(d)),f.apply(c,r)}}function Et(e,t,n){var r=e.length;if((t=+t)<=r||!D(t))return"";var i=t-r;return Xr(n=null==n?" ":n+"",M(i/n.length)).slice(0,i)}function kt(e){var n=i[e];return function(e,t){return(t=t===hi?0:+t||0)?(t=S(10,t),n(e*t)/t):n(e)}}function qt(o){return function(e,t,n,r){var i=At(n);return null==n&&i===ve?Je(e,t,o):Ke(e,t,i(n,r,1),o)}}function _t(e,t,n,r,i,o,a,s){var u=t&gi;if(!u&&"function"!=typeof e)throw new y(Ti);var l=r?r.length:0;if(l||(t&=~(bi|xi),r=i=hi),l-=i?i.length:0,t&xi){var c=r,f=i;r=i=hi}var d,p,h,m=u?hi:Pt(e),v=[e,t,n,r,i,c,f,o,a,s];if(m&&(function(e,t){var n=e[1],r=t[1],i=n|r,o=i<Si,a=r==Si&&n==yi||r==Si&&n==Ci&&e[7].length<=t[8]||r==(Si|Ci)&&n==yi;if(o||a){r&vi&&(e[2]=t[2],i|=n&vi?0:$i);var s=t[3];if(s){var u=e[3];e[3]=u?tt(u,s,t[4]):re(s),e[4]=u?Wo(e[3],ji):re(t[4])}(s=t[5])&&(u=e[5],e[5]=u?nt(u,s,t[6]):re(s),e[6]=u?Wo(e[5],ji):re(t[6])),(s=t[7])&&(e[7]=re(s)),r&Si&&(e[8]=null==e[8]?t[8]:F(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}}(v,m),t=v[1],s=v[9]),v[9]=null==s?u?0:e.length:N(s-l,0)||0,t==vi)var g=(d=v[0],p=v[2],h=lt(d),function e(){return(this&&this!==Mo&&this instanceof e?h:d).apply(p,arguments)});else g=t!=bi&&t!=(vi|bi)||v[4].length?Ct.apply(hi,v):function(a,e,s,u){var l=e&vi,c=lt(a);return function e(){for(var t=-1,n=arguments.length,r=-1,i=u.length,o=A(i+n);++r<i;)o[r]=u[r];for(;n--;)o[r++]=arguments[++t];return(this&&this!==Mo&&this instanceof e?c:a).apply(l?s:this,o)}}.apply(hi,v);return(m?Ve:Xt)(g,v)}function At(e,t,n){var r=Y.callback||ei;return r=r===ei?ve:r,n?r(e,t,n):r}var Pt=X?function(e){return X.get(e)}:ai;function Mt(e){for(var t=e.name,n=Q[t],r=n?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function Tt(e,t,n){var r=Y.indexOf||sn;return r=r===sn?Oo:r,e?r(e,t,n):r}var jt=Ie("length");function Ot(e){for(var t=Lr(e),n=t.length;n--;)t[n][2]=Bt(t[n][1]);return t}function Dt(e,t){var n=null==e?hi:e[t];return mr(n)?n:hi}function Rt(e,t,n){null==e||Lt(t,e)||(e=1==(t=Kt(t)).length?e:je(e,Be(t,0,-1)),t=ln(t));var r=null==e?e:e[t];return null==r?hi:r.apply(e,n)}function Nt(e){return null!=e&&Vt(jt(e))}function Ft(e,t){return e="number"==typeof e||xo.test(e)?+e:-1,t=null==t?G:t,-1<e&&e%1==0&&e<t}function It(e,t,n){if(!hr(n))return!1;var r=typeof t;if("number"==r?Nt(n)&&Ft(t,n.length):"string"==r&&t in n){var i=n[t];return e==e?e===i:i!=i}return!1}function Lt(e,t){var n=typeof e;return!!("string"==n&&fo.test(e)||"number"==n)||!cr(e)&&(!co.test(e)||null!=t&&e in Jt(t))}function Ut(e){var t=Mt(e);if(!(t in Z.prototype))return!1;var n=Y[t];if(e===n)return!0;var r=Pt(n);return!!r&&e===r[0]}function Vt(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=G}function Bt(e){return e==e&&!hr(e)}function zt(e,t){e=Jt(e);for(var n=-1,r=t.length,i={};++n<r;){var o=t[n];o in e&&(i[o]=e[o])}return i}function Ht(e,r){var i={};return Ae(e,function(e,t,n){r(e,t,n)&&(i[t]=e)}),i}var Wt,Gt,Xt=(Gt=Wt=0,function(e,t){var n=zn(),r=_i-(n-Gt);if(Gt=n,0<r){if(++Wt>=qi)return e}else Wt=0;return Ve(e,t)});function Qt(e){for(var t=Rr(e),n=t.length,r=n&&e.length,i=!!r&&Vt(r)&&(cr(e)||lr(e)),o=-1,a=[];++o<n;){var s=t[o];(i&&Ft(s,r)||w.call(e,s))&&a.push(s)}return a}function Yt(e){return null==e?[]:Nt(e)?hr(e)?e:g(e):Vr(e)}function Jt(e){return hr(e)?e:g(e)}function Kt(e){if(cr(e))return e;var i=[];return Ro(e).replace(po,function(e,t,n,r){i.push(n?r.replace(go,"$1"):t||e)}),i}function Zt(e){return e instanceof Z?e.clone():new K(e.__wrapped__,e.__chain__,re(e.__actions__))}var en=sr(function(e,t){return Ho(e)&&Nt(e)?we(e,ke(t,!1,!0)):[]});function tn(e,t,n){return e&&e.length?((n?It(e,t,n):null==t)&&(t=1),Be(e,t<0?0:t)):[]}function nn(e,t,n){var r=e?e.length:0;return r?((n?It(e,t,n):null==t)&&(t=1),Be(e,0,(t=r-(+t||0))<0?0:t)):[]}var rn=ht(),on=ht(!0);function an(e){return e?e[0]:hi}function sn(e,t,n){var r=e?e.length:0;if(!r)return-1;if("number"==typeof n)n=n<0?N(r+n,0):n;else if(n){var i=Je(e,t);return i<r&&(t==t?t===e[i]:e[i]!=e[i])?i:-1}return Oo(e,t,n||0)}var un=sr(function(e){for(var t=e.length,n=t,r=A(c),i=Tt(),o=i==Oo,a=[];n--;){var s=e[n]=Nt(s=e[n])?s:[];r[n]=o&&120<=s.length?st(n&&s):null}var u=e[0],l=-1,c=u?u.length:0,f=r[0];e:for(;++l<c;)if(s=u[l],(f?ne(f,s):i(a,s,0))<0){for(n=t;--n;){var d=r[n];if((d?ne(d,s):i(e[n],s,0))<0)continue e}f&&f.push(s),a.push(s)}return a});function ln(e){var t=e?e.length:0;return t?e[t-1]:hi}var cn=sr(function(e,t){var n=he(e,t=ke(t));return Le(e,t.sort(To)),n});function fn(e){return tn(e,1)}var dn=qt(),pn=qt(!0);var hn=sr(function(e){return Ge(ke(e,!1,!0))});function mn(e,t,n,r){if(!e||!e.length)return[];null!=t&&"boolean"!=typeof t&&(n=It(e,t,r=n)?hi:t,t=!1);var i=At();return null==n&&i===ve||(n=i(n,r,3)),t&&Tt()==Oo?function(e,t){for(var n,r=-1,i=e.length,o=-1,a=[];++r<i;){var s=e[r],u=t?t(s,r,e):s;r&&n===u||(n=u,a[++o]=s)}return a}(e,n):Ge(e,n)}function vn(e){if(!e||!e.length)return[];var t=-1,n=0;e=ae(e,function(e){if(Nt(e))return n=N(e.length,n),!0});for(var r=A(n);++t<n;)r[t]=se(e,Ie(t));return r}function gn(e,t,n){if(!e||!e.length)return[];var r=vn(e);return null==t?r:(t=Ze(t,n,4),se(r,function(e){return le(e,t,hi,!0)}))}var $n=sr(function(e,t){return Nt(e)?we(e,t):[]});var yn=sr(vn);function wn(e,t){var n=-1,r=e?e.length:0,i={};for(!r||t||cr(e[0])||(t=[]);++n<r;){var o=e[n];t?i[o]=t[n]:o&&(i[o[0]]=o[1])}return i}var bn=sr(function(e){var t=e.length,n=2<t?e[t-2]:hi,r=1<t?e[t-1]:hi;return 2<t&&"function"==typeof n?t-=2:(n=1<t&&"function"==typeof r?(--t,r):hi,r=hi),e.length=t,gn(e,n,r)});function xn(e){var t=Y(e);return t.__chain__=!0,t}function Sn(e,t,n){return t.call(n,e)}var Cn=sr(function(t){return t=ke(t),this.thru(function(e){return function(e,t){for(var n=-1,r=e.length,i=-1,o=t.length,a=A(r+o);++n<r;)a[n]=e[n];for(;++i<o;)a[n++]=t[i];return a}(cr(e)?e:[Jt(e)],t)})});var En=sr(function(e,t){return he(e,ke(t))}),kn=rt(function(e,t,n){w.call(e,n)?++e[n]:e[n]=1});function qn(e,t,n){var r=cr(e)?oe:Se;return n&&It(e,t,n)&&(t=hi),"function"==typeof t&&n===hi||(t=At(t,n,3)),r(e,t)}function _n(e,t,n){return(cr(e)?ae:Ce)(e,t=At(t,n,3))}var An=pt(be),Pn=pt(xe,!0);var Mn=gt(ie,be),Tn=gt(function(e,t){for(var n=e.length;n--&&!1!==t(e[n],n,e););return e},xe),jn=rt(function(e,t,n){w.call(e,n)?e[n].push(t):e[n]=[t]});function On(e,t,n,r){var i=e?jt(e):0;return Vt(i)||(i=(e=Vr(e)).length),n="number"!=typeof n||r&&It(t,n,r)?0:n<0?N(i+n,0):n||0,"string"==typeof e||!cr(e)&&yr(e)?n<=i&&-1<e.indexOf(t,n):!!i&&-1<Tt(e,t,n)}var Dn=rt(function(e,t,n){e[n]=t}),Rn=sr(function(e,n,r){var i=-1,o="function"==typeof n,a=Lt(n),s=Nt(e)?A(e.length):[];return be(e,function(e){var t=o?n:a&&null!=e?e[n]:hi;s[++i]=t?t.apply(e,r):Rt(e,n,r)}),s});function Nn(e,t,n){return(cr(e)?se:Re)(e,t=At(t,n,3))}var Fn=rt(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});var In=St(le,be),Ln=St(function(e,t,n,r){var i=e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n},xe);function Un(e,t,n){if(n?It(e,t,n):null==t)return 0<(r=(e=Yt(e)).length)?e[Ue(0,r-1)]:hi;var r,i=-1,o=xr(e),a=(r=o.length)-1;for(t=F(t<0?0:+t||0,r);++i<t;){var s=Ue(i,a),u=o[s];o[s]=o[i],o[i]=u}return o.length=t,o}function Vn(e,t,n){var r=cr(e)?ce:ze;return n&&It(e,t,n)&&(t=hi),"function"==typeof t&&n===hi||(t=At(t,n,3)),r(e,t)}var Bn=sr(function(e,t){if(null==e)return[];var n=t[2];return n&&It(t[0],t[1],n)&&(t.length=1),We(e,ke(t),[])});var zn=I||function(){return(new n).getTime()};function Hn(e,t){var n;if("function"!=typeof t){if("function"!=typeof e)throw new y(Ti);var r=e;e=t,t=r}return function(){return 0<--e&&(n=t.apply(this,arguments)),e<=1&&(t=hi),n}}var Wn=sr(function(e,t,n){var r=vi;if(n.length){var i=Wo(n,Wn.placeholder);r|=bi}return _t(e,r,t,n,i)}),Gn=sr(function(e,t){for(var n=-1,r=(t=t.length?ke(t):Or(e)).length;++n<r;){var i=t[n];e[i]=_t(e[i],vi,e)}return e}),Xn=sr(function(e,t,n){var r=vi|gi;if(n.length){var i=Wo(n,Xn.placeholder);r|=bi}return _t(t,r,e,n,i)}),Qn=ct(yi),Yn=ct(wi);function Jn(r,i,e){var o,a,s,u,l,c,f,d=0,p=!1,h=!0;if("function"!=typeof r)throw new y(Ti);if(i=i<0?0:+i||0,!0===e){var m=!0;h=!1}else hr(e)&&(m=!!e.leading,p="maxWait"in e&&N(+e.maxWait||0,i),h="trailing"in e?!!e.trailing:h);function t(e,t){t&&x(t),a=c=f=hi,e&&(d=zn(),s=r.apply(l,o),c||a||(o=l=hi))}function v(){var e=i-(zn()-u);e<=0||i<e?t(f,a):c=k(v,e)}function g(){t(h,c)}function n(){if(o=arguments,u=zn(),l=this,f=h&&(c||!m),!1===p)var e=m&&!c;else{a||m||(d=u);var t=p-(u-d),n=t<=0||p<t;n?(a&&(a=x(a)),d=u,s=r.apply(l,o)):a||(a=k(g,t))}return n&&c?c=x(c):c||i===p||(c=k(v,i)),e&&(n=!0,s=r.apply(l,o)),!n||c||a||(o=l=hi),s}return n.cancel=function(){c&&x(c),a&&x(a),d=0,a=c=f=hi},n}var Kn=sr(function(e,t){return ye(e,1,t)}),Zn=sr(function(e,t,n){return ye(e,t,n)}),er=vt(),tr=vt(!0);function nr(i,o){if("function"!=typeof i||o&&"function"!=typeof o)throw new y(Ti);var a=function(){var e=arguments,t=o?o.apply(this,e):e[0],n=a.cache;if(n.has(t))return n.get(t);var r=i.apply(this,e);return a.cache=n.set(t,r),r};return a.cache=new nr.Cache,a}var rr=sr(function(n,r){if(r=ke(r),"function"!=typeof n||!oe(r,Do))throw new y(Ti);var i=r.length;return sr(function(e){for(var t=F(e.length,i);t--;)e[t]=r[t](e[t]);return n.apply(this,e)})});var ir=xt(bi),or=xt(xi),ar=sr(function(e,t){return _t(e,Ci,hi,hi,hi,ke(t))});function sr(o,a){if("function"!=typeof o)throw new y(Ti);return a=N(a===hi?o.length-1:+a||0,0),function(){for(var e=arguments,t=-1,n=N(e.length-a,0),r=A(n);++t<n;)r[t]=e[a+t];switch(a){case 0:return o.call(this,r);case 1:return o.call(this,e[0],r);case 2:return o.call(this,e[0],e[1],r)}var i=A(a+1);for(t=-1;++t<a;)i[t]=e[t];return i[a]=r,o.apply(this,i)}}function ur(e,t){return t<e}function lr(e){return Ho(e)&&Nt(e)&&w.call(e,"callee")&&!C.call(e,"callee")}var cr=O||function(e){return Ho(e)&&Vt(e.length)&&b.call(e)==Di};function fr(e,t,n,r){var i=(n="function"==typeof n?Ze(n,r,3):hi)?n(e,t):hi;return i===hi?Oe(e,t,n):!!i}function dr(e){return Ho(e)&&"string"==typeof e.message&&b.call(e)==Fi}function pr(e){return hr(e)&&b.call(e)==Ii}function hr(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function mr(e){return null!=e&&(pr(e)?p.test(c.call(e)):Ho(e)&&bo.test(e))}function vr(e){return"number"==typeof e||Ho(e)&&b.call(e)==Li}function gr(e){var t,n;return!(!Ho(e)||b.call(e)!=Ui||lr(e)||!(w.call(e,"constructor")||"function"!=typeof(t=e.constructor)||t instanceof t))&&(Ae(e,function(e,t){n=t}),n===hi||w.call(e,n))}function $r(e){return hr(e)&&b.call(e)==Vi}function yr(e){return"string"==typeof e||Ho(e)&&b.call(e)==Bi}function wr(e){return Ho(e)&&Vt(e.length)&&!!Ao[b.call(e)]}function br(e,t){return e<t}function xr(e){var t=e?jt(e):0;return Vt(t)?t?re(e):[]:Vr(e)}function Sr(e){return me(e,Rr(e))}var Cr=it(function o(a,s,u,l,c){if(!hr(a))return a;var f=Nt(s)&&(cr(s)||wr(s)),d=f?hi:Dr(s);return ie(d||s,function(e,t){if(d&&(e=s[t=e]),Ho(e))l||(l=[]),c||(c=[]),function(e,t,n,r,i,o,a){for(var s=o.length,u=t[n];s--;)if(o[s]==u)return e[n]=a[s];var l=e[n],c=i?i(l,u,n,e,t):hi,f=c===hi;f&&(Nt(c=u)&&(cr(u)||wr(u))?c=cr(l)?l:Nt(l)?re(l):[]:gr(u)||lr(u)?c=lr(l)?Sr(l):gr(l)?l:{}:f=!1),o.push(u),a.push(c),f?e[n]=r(c,u,i,o,a):(c==c?c!==l:l==l)&&(e[n]=c)}(a,s,t,o,u,l,c);else{var n=a[t],r=u?u(n,e,t,a,s):hi,i=r===hi;i&&(r=e),r===hi&&(!f||t in a)||!i&&(r==r?r===n:n!=n)||(a[t]=r)}}),a}),Er=it(function(e,t,n){return n?de(e,t,n):pe(e,t)});var kr=ft(Er,function(e,t){return e===hi?t:e}),qr=ft(Cr,function e(t,n){return t===hi?n:Cr(t,n,e)}),_r=mt(Pe),Ar=mt(Me),Pr=$t(qe),Mr=$t(_e),Tr=yt(Pe),jr=yt(Me);function Or(e){return Te(e,Rr(e))}var Dr=R?function(e){var t=null==e?hi:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&Nt(e)?Qt(e):hr(e)?R(e):[]}:Qt;function Rr(e){if(null==e)return[];hr(e)||(e=g(e));var t=e.length;t=t&&Vt(t)&&(cr(e)||lr(e))&&t||0;for(var n=e.constructor,r=-1,i="function"==typeof n&&n.prototype===e,o=A(t),a=0<t;++r<t;)o[r]=r+"";for(var s in e)a&&Ft(s,t)||"constructor"==s&&(i||!w.call(e,s))||o.push(s);return o}var Nr=wt(!0),Fr=wt(),Ir=sr(function(e,t){if(null==e)return{};if("function"!=typeof t[0])return t=se(ke(t),a),zt(e,we(Rr(e),t));var r=Ze(t[0],t[1],3);return Ht(e,function(e,t,n){return!r(e,t,n)})});function Lr(e){e=Jt(e);for(var t=-1,n=Dr(e),r=n.length,i=A(r);++t<r;){var o=n[t];i[t]=[o,e[o]]}return i}var Ur=sr(function(e,t){return null==e?{}:"function"==typeof t[0]?Ht(e,Ze(t[0],t[1],3)):zt(e,ke(t))});function Vr(e){return Xe(e,Dr(e))}var Br=ut(function(e,t,n){return t=t.toLowerCase(),e+(n?t.charAt(0).toUpperCase()+t.slice(1):t)});function zr(e){return(e=Ro(e))&&e.replace(So,Lo).replace(vo,"")}var Hr=ut(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()});var Wr=bt(),Gr=bt(!0);function Xr(e,t){var n="";if(e=Ro(e),(t=+t)<1||!e||!D(t))return n;for(;t%2&&(n+=e),e+=e,t=j(t/2););return n}var Qr=ut(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Yr=ut(function(e,t,n){return e+(n?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))});function Jr(e,t,n){var r=e;return(e=Ro(e))?(n?It(r,t,n):null==t)?e.slice(Go(e),Xo(e)+1):(t+="",e.slice(No(e,t),Fo(e,t)+1)):e}function Kr(e,t,n){return n&&It(e,t,n)&&(t=hi),(e=Ro(e)).match(t||ko)||[]}var Zr=sr(function(e,t){try{return e.apply(hi,t)}catch(e){return dr(e)?e:new r(e)}});function ei(e,t,n){return n&&It(e,t,n)&&(t=hi),Ho(e)?ni(e):ve(e,t)}function ti(e){return e}function ni(e){return Ne(ge(e,!0))}var ri=sr(function(t,n){return function(e){return Rt(e,t,n)}}),ii=sr(function(t,n){return function(e){return Rt(t,e,n)}});function oi(r,e,t){if(null==t){var n=hr(e),i=n?Dr(e):hi,o=i&&i.length?Te(e,i):hi;(o?o.length:n)||(o=!1,t=e,e=r,r=this)}o||(o=Te(e,Dr(e)));var a=!0,s=-1,u=pr(r),l=o.length;!1===t?a=!1:hr(t)&&"chain"in t&&(a=t.chain);for(;++s<l;){var c=o[s],f=e[c];r[c]=f,u&&(r.prototype[c]=function(n){return function(){var e=this.__chain__;if(a||e){var t=r(this.__wrapped__);return(t.__actions__=re(this.__actions__)).push({func:n,args:arguments,thisArg:r}),t.__chain__=e,t}return n.apply(r,ue([this.value()],arguments))}}(f))}return r}function ai(){}function si(e){return Lt(e)?Ie(e):(n=(t=e)+"",t=Kt(t),function(e){return je(e,t,n)});var t,n}var ui,li=kt("ceil"),ci=kt("floor"),fi=dt(ur,V),di=dt(br,B),pi=kt("round");return Y.prototype=J.prototype,(K.prototype=$e(J.prototype)).constructor=K,(Z.prototype=$e(J.prototype)).constructor=Z,ee.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},ee.prototype.get=function(e){return"__proto__"==e?hi:this.__data__[e]},ee.prototype.has=function(e){return"__proto__"!=e&&w.call(this.__data__,e)},ee.prototype.set=function(e,t){return"__proto__"!=e&&(this.__data__[e]=t),this},te.prototype.push=function(e){var t=this.data;"string"==typeof e||hr(e)?t.set.add(e):t.hash[e]=!0},nr.Cache=ee,Y.after=function(e,t){if("function"!=typeof t){if("function"!=typeof e)throw new y(Ti);var n=e;e=t,t=n}return e=D(e=+e)?e:0,function(){if(--e<1)return t.apply(this,arguments)}},Y.ary=function(e,t,n){return n&&It(e,t,n)&&(t=hi),t=e&&null==t?e.length:N(+t||0,0),_t(e,Si,hi,hi,hi,hi,t)},Y.assign=Er,Y.at=En,Y.before=Hn,Y.bind=Wn,Y.bindAll=Gn,Y.bindKey=Xn,Y.callback=ei,Y.chain=xn,Y.chunk=function(e,t,n){t=(n?It(e,t,n):null==t)?1:N(j(t)||1,1);for(var r=0,i=e?e.length:0,o=-1,a=A(M(i/t));r<i;)a[++o]=Be(e,r,r+=t);return a},Y.compact=function(e){for(var t=-1,n=e?e.length:0,r=-1,i=[];++t<n;){var o=e[t];o&&(i[++r]=o)}return i},Y.constant=function(e){return function(){return e}},Y.countBy=kn,Y.create=function(e,t,n){var r=$e(e);return n&&It(e,t,n)&&(t=hi),t?pe(r,t):r},Y.curry=Qn,Y.curryRight=Yn,Y.debounce=Jn,Y.defaults=kr,Y.defaultsDeep=qr,Y.defer=Kn,Y.delay=Zn,Y.difference=en,Y.drop=tn,Y.dropRight=nn,Y.dropRightWhile=function(e,t,n){return e&&e.length?Qe(e,At(t,n,3),!0,!0):[]},Y.dropWhile=function(e,t,n){return e&&e.length?Qe(e,At(t,n,3),!0):[]},Y.fill=function(e,t,n,r){var i=e?e.length:0;return i?(n&&"number"!=typeof n&&It(e,t,n)&&(n=0,r=i),function(e,t,n,r){var i=e.length;for((n=null==n?0:+n||0)<0&&(n=i<-n?0:i+n),(r=r===hi||i<r?i:+r||0)<0&&(r+=i),i=r<n?0:r>>>0,n>>>=0;n<i;)e[n++]=t;return e}(e,t,n,r)):[]},Y.filter=_n,Y.flatten=function(e,t,n){var r=e?e.length:0;return n&&It(e,t,n)&&(t=!1),r?ke(e,t):[]},Y.flattenDeep=function(e){return e&&e.length?ke(e,!0):[]},Y.flow=er,Y.flowRight=tr,Y.forEach=Mn,Y.forEachRight=Tn,Y.forIn=Pr,Y.forInRight=Mr,Y.forOwn=Tr,Y.forOwnRight=jr,Y.functions=Or,Y.groupBy=jn,Y.indexBy=Dn,Y.initial=function(e){return nn(e,1)},Y.intersection=un,Y.invert=function(e,t,n){n&&It(e,t,n)&&(t=hi);for(var r=-1,i=Dr(e),o=i.length,a={};++r<o;){var s=i[r],u=e[s];t?w.call(a,u)?a[u].push(s):a[u]=[s]:a[u]=s}return a},Y.invoke=Rn,Y.keys=Dr,Y.keysIn=Rr,Y.map=Nn,Y.mapKeys=Nr,Y.mapValues=Fr,Y.matches=ni,Y.matchesProperty=function(e,t){return Fe(e,ge(t,!0))},Y.memoize=nr,Y.merge=Cr,Y.method=ri,Y.methodOf=ii,Y.mixin=oi,Y.modArgs=rr,Y.negate=function(e){if("function"!=typeof e)throw new y(Ti);return function(){return!e.apply(this,arguments)}},Y.omit=Ir,Y.once=function(e){return Hn(2,e)},Y.pairs=Lr,Y.partial=ir,Y.partialRight=or,Y.partition=Fn,Y.pick=Ur,Y.pluck=function(e,t){return Nn(e,si(t))},Y.property=si,Y.propertyOf=function(t){return function(e){return je(t,Kt(e),e+"")}},Y.pull=function(){var e=arguments,t=e[0];if(!t||!t.length)return t;for(var n=0,r=Tt(),i=e.length;++n<i;)for(var o=0,a=e[n];-1<(o=r(t,a,o));)q.call(t,o,1);return t},Y.pullAt=cn,Y.range=function(e,t,n){n&&It(e,t,n)&&(t=n=hi),e=+e||0,null==t?(t=e,e=0):t=+t||0;for(var r=-1,i=N(M((t-e)/((n=null==n?1:+n||0)||1)),0),o=A(i);++r<i;)o[r]=e,e+=n;return o},Y.rearg=ar,Y.reject=function(e,r,t){var n=cr(e)?ae:Ce;return r=At(r,t,3),n(e,function(e,t,n){return!r(e,t,n)})},Y.remove=function(e,t,n){var r=[];if(!e||!e.length)return r;var i=-1,o=[],a=e.length;for(t=At(t,n,3);++i<a;){var s=e[i];t(s,i,e)&&(r.push(s),o.push(i))}return Le(e,o),r},Y.rest=fn,Y.restParam=sr,Y.set=function(e,t,n){if(null==e)return e;for(var r=t+"",i=-1,o=(t=null!=e[r]||Lt(t,e)?[r]:Kt(t)).length,a=o-1,s=e;null!=s&&++i<o;){var u=t[i];hr(s)&&(i==a?s[u]=n:null==s[u]&&(s[u]=Ft(t[i+1])?[]:{})),s=s[u]}return e},Y.shuffle=function(e){return Un(e,B)},Y.slice=function(e,t,n){var r=e?e.length:0;return r?(n&&"number"!=typeof n&&It(e,t,n)&&(t=0,n=r),Be(e,t,n)):[]},Y.sortBy=function(e,r,t){if(null==e)return[];t&&It(e,r,t)&&(r=hi);var i=-1;return r=At(r,t,3),He(Re(e,function(e,t,n){return{criteria:r(e,t,n),index:++i,value:e}}),Io)},Y.sortByAll=Bn,Y.sortByOrder=function(e,t,n,r){return null==e?[]:(r&&It(t,n,r)&&(n=hi),cr(t)||(t=null==t?[]:[t]),cr(n)||(n=null==n?[]:[n]),We(e,t,n))},Y.spread=function(t){if("function"!=typeof t)throw new y(Ti);return function(e){return t.apply(this,e)}},Y.take=function(e,t,n){return e&&e.length?((n?It(e,t,n):null==t)&&(t=1),Be(e,0,t<0?0:t)):[]},Y.takeRight=function(e,t,n){var r=e?e.length:0;return r?((n?It(e,t,n):null==t)&&(t=1),Be(e,(t=r-(+t||0))<0?0:t)):[]},Y.takeRightWhile=function(e,t,n){return e&&e.length?Qe(e,At(t,n,3),!1,!0):[]},Y.takeWhile=function(e,t,n){return e&&e.length?Qe(e,At(t,n,3)):[]},Y.tap=function(e,t,n){return t.call(n,e),e},Y.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new y(Ti);return!1===n?r=!1:hr(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Jn(e,t,{leading:r,maxWait:+t,trailing:i})},Y.thru=Sn,Y.times=function(e,t,n){if((e=j(e))<1||!D(e))return[];var r=-1,i=A(F(e,z));for(t=Ze(t,n,1);++r<e;)r<z?i[r]=t(r):t(r);return i},Y.toArray=xr,Y.toPlainObject=Sr,Y.transform=function(e,r,i,t){var n=cr(e)||wr(e);if(r=At(r,t,4),null==i)if(n||hr(e)){var o=e.constructor;i=n?cr(e)?new o:[]:$e(pr(o)?o.prototype:hi)}else i={};return(n?ie:Pe)(e,function(e,t,n){return r(i,e,t,n)}),i},Y.union=hn,Y.uniq=mn,Y.unzip=vn,Y.unzipWith=gn,Y.values=Vr,Y.valuesIn=function(e){return Xe(e,Rr(e))},Y.where=function(e,t){return _n(e,Ne(t))},Y.without=$n,Y.wrap=function(e,t){return _t(t=null==t?ti:t,bi,hi,[e],[])},Y.xor=function(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(Nt(n))var r=r?ue(we(r,n),we(n,r)):n}return r?Ge(r):[]},Y.zip=yn,Y.zipObject=wn,Y.zipWith=bn,Y.backflow=tr,Y.collect=Nn,Y.compose=tr,Y.each=Mn,Y.eachRight=Tn,Y.extend=Er,Y.iteratee=ei,Y.methods=Or,Y.object=wn,Y.select=_n,Y.tail=fn,Y.unique=mn,oi(Y,Y),Y.add=function(e,t){return(+e||0)+(+t||0)},Y.attempt=Zr,Y.camelCase=Br,Y.capitalize=function(e){return(e=Ro(e))&&e.charAt(0).toUpperCase()+e.slice(1)},Y.ceil=li,Y.clone=function(e,t,n,r){return t&&"boolean"!=typeof t&&It(e,t,n)?t=!1:"function"==typeof t&&(r=n,n=t,t=!1),"function"==typeof n?ge(e,t,Ze(n,r,1)):ge(e,t)},Y.cloneDeep=function(e,t,n){return"function"==typeof t?ge(e,!0,Ze(t,n,1)):ge(e,!0)},Y.deburr=zr,Y.endsWith=function(e,t,n){t+="";var r=(e=Ro(e)).length;return n=n===hi?r:F(n<0?0:+n||0,r),0<=(n-=t.length)&&e.indexOf(t,n)==n},Y.escape=function(e){return(e=Ro(e))&&ao.test(e)?e.replace(io,Uo):e},Y.escapeRegExp=function(e){return(e=Ro(e))&&mo.test(e)?e.replace(ho,Vo):e||"(?:)"},Y.every=qn,Y.find=An,Y.findIndex=rn,Y.findKey=_r,Y.findLast=Pn,Y.findLastIndex=on,Y.findLastKey=Ar,Y.findWhere=function(e,t){return An(e,Ne(t))},Y.first=an,Y.floor=ci,Y.get=function(e,t,n){var r=null==e?hi:je(e,Kt(t),t+"");return r===hi?n:r},Y.gt=ur,Y.gte=function(e,t){return t<=e},Y.has=function(e,t){if(null==e)return!1;var n=w.call(e,t);if(!n&&!Lt(t)){if(null==(e=1==(t=Kt(t)).length?e:je(e,Be(t,0,-1))))return!1;t=ln(t),n=w.call(e,t)}return n||Vt(e.length)&&Ft(t,e.length)&&(cr(e)||lr(e))},Y.identity=ti,Y.includes=On,Y.indexOf=sn,Y.inRange=function(e,t,n){return t=+t||0,n===hi?(n=t,t=0):n=+n||0,e>=F(t,n)&&e<N(t,n)},Y.isArguments=lr,Y.isArray=cr,Y.isBoolean=function(e){return!0===e||!1===e||Ho(e)&&b.call(e)==Ri},Y.isDate=function(e){return Ho(e)&&b.call(e)==Ni},Y.isElement=function(e){return!!e&&1===e.nodeType&&Ho(e)&&!gr(e)},Y.isEmpty=function(e){return null==e||(Nt(e)&&(cr(e)||yr(e)||lr(e)||Ho(e)&&pr(e.splice))?!e.length:!Dr(e).length)},Y.isEqual=fr,Y.isError=dr,Y.isFinite=function(e){return"number"==typeof e&&D(e)},Y.isFunction=pr,Y.isMatch=function(e,t,n,r){return n="function"==typeof n?Ze(n,r,3):hi,De(e,Ot(t),n)},Y.isNaN=function(e){return vr(e)&&e!=+e},Y.isNative=mr,Y.isNull=function(e){return null===e},Y.isNumber=vr,Y.isObject=hr,Y.isPlainObject=gr,Y.isRegExp=$r,Y.isString=yr,Y.isTypedArray=wr,Y.isUndefined=function(e){return e===hi},Y.kebabCase=Hr,Y.last=ln,Y.lastIndexOf=function(e,t,n){var r=e?e.length:0;if(!r)return-1;var i=r;if("number"==typeof n)i=(n<0?N(r+n,0):F(n||0,r-1))+1;else if(n){var o=e[i=Je(e,t,!0)-1];return(t==t?t===o:o!=o)?i:-1}if(t!=t)return zo(e,i,!0);for(;i--;)if(e[i]===t)return i;return-1},Y.lt=br,Y.lte=function(e,t){return e<=t},Y.max=fi,Y.min=di,Y.noConflict=function(){return Mo._=d,this},Y.noop=ai,Y.now=zn,Y.pad=function(e,t,n){t=+t;var r=(e=Ro(e)).length;if(t<=r||!D(t))return e;var i=(t-r)/2,o=j(i);return(n=Et("",M(i),n)).slice(0,o)+e+n},Y.padLeft=Wr,Y.padRight=Gr,Y.parseInt=function(e,t,n){return(n?It(e,t,n):null==t)?t=0:t&&(t=+t),e=Jr(e),L(e,t||(wo.test(e)?16:10))},Y.random=function(e,t,n){n&&It(e,t,n)&&(t=n=hi);var r=null==e,i=null==t;if(null==n&&(i&&"boolean"==typeof e?(n=e,e=1):"boolean"==typeof t&&(n=t,i=!0)),r&&i&&(i=!(t=1)),e=+e||0,i?(t=e,e=0):t=+t||0,n||e%1||t%1){var o=U();return F(e+o*(t-e+m("1e-"+((o+"").length-1))),t)}return Ue(e,t)},Y.reduce=In,Y.reduceRight=Ln,Y.repeat=Xr,Y.result=function(e,t,n){var r=null==e?hi:e[t];return r===hi&&(null==e||Lt(t,e)||(r=null==(e=1==(t=Kt(t)).length?e:je(e,Be(t,0,-1)))?hi:e[ln(t)]),r=r===hi?n:r),pr(r)?r.call(e):r},Y.round=pi,Y.runInContext=e,Y.size=function(e){var t=e?jt(e):0;return Vt(t)?t:Dr(e).length},Y.snakeCase=Qr,Y.some=Vn,Y.sortedIndex=dn,Y.sortedLastIndex=pn,Y.startCase=Yr,Y.startsWith=function(e,t,n){return e=Ro(e),n=null==n?0:F(n<0?0:+n||0,e.length),e.lastIndexOf(t,n)==n},Y.sum=function(e,t,n){return n&&It(e,t,n)&&(t=hi),1==(t=At(t,n,3)).length?function(e,t){for(var n=e.length,r=0;n--;)r+=+t(e[n])||0;return r}(cr(e)?e:Yt(e),t):(r=t,i=0,be(e,function(e,t,n){i+=+r(e,t,n)||0}),i);var r,i},Y.template=function(a,e,t){var n=Y.templateSettings;t&&It(a,e,t)&&(e=t=hi),a=Ro(a);var s,u,r=de(pe({},(e=de(pe({},t||e),n,fe)).imports),n.imports,fe),i=Dr(r),o=Xe(r,i),l=0,c=e.interpolate||Co,f="__p += '",d=$((e.escape||Co).source+"|"+c.source+"|"+(c===lo?$o:Co).source+"|"+(e.evaluate||Co).source+"|$","g"),p="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++_o+"]")+"\n";a.replace(d,function(e,t,n,r,i,o){return n||(n=r),f+=a.slice(l,o).replace(Eo,Bo),t&&(s=!0,f+="' +\n__e("+t+") +\n'"),i&&(u=!0,f+="';\n"+i+";\n__p += '"),n&&(f+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),l=o+e.length,e}),f+="';\n";var h=e.variable;h||(f="with (obj) {\n"+f+"\n}\n"),f=(u?f.replace(eo,""):f).replace(to,"$1").replace(no,"$1;"),f="function("+(h||"obj")+") {\n"+(h?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var m=Zr(function(){return v(i,p+"return "+f).apply(hi,o)});if(m.source=f,dr(m))throw m;return m},Y.trim=Jr,Y.trimLeft=function(e,t,n){var r=e;return(e=Ro(e))?(n?It(r,t,n):null==t)?e.slice(Go(e)):e.slice(No(e,t+"")):e},Y.trimRight=function(e,t,n){var r=e;return(e=Ro(e))?(n?It(r,t,n):null==t)?e.slice(0,Xo(e)+1):e.slice(0,Fo(e,t+"")+1):e},Y.trunc=function(e,t,n){n&&It(e,t,n)&&(t=hi);var r=Ei,i=ki;if(null!=t)if(hr(t)){var o="separator"in t?t.separator:o;r="length"in t?+t.length||0:r,i="omission"in t?Ro(t.omission):i}else r=+t||0;if(r>=(e=Ro(e)).length)return e;var a=r-i.length;if(a<1)return i;var s=e.slice(0,a);if(null==o)return s+i;if($r(o)){if(e.slice(a).search(o)){var u,l,c=e.slice(0,a);for(o.global||(o=$(o.source,(yo.exec(o)||"")+"g")),o.lastIndex=0;u=o.exec(c);)l=u.index;s=s.slice(0,null==l?a:l)}}else if(e.indexOf(o,a)!=a){var f=s.lastIndexOf(o);-1<f&&(s=s.slice(0,f))}return s+i},Y.unescape=function(e){return(e=Ro(e))&&oo.test(e)?e.replace(ro,Qo):e},Y.uniqueId=function(e){var t=++f;return Ro(e)+t},Y.words=Kr,Y.all=qn,Y.any=Vn,Y.contains=On,Y.eq=fr,Y.detect=An,Y.foldl=In,Y.foldr=Ln,Y.head=an,Y.include=On,Y.inject=In,oi(Y,(ui={},Pe(Y,function(e,t){Y.prototype[t]||(ui[t]=e)}),ui),!1),Y.sample=Un,Y.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(e){return Un(e,t)}):Un(this.value())},Y.VERSION=mi,ie(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){Y[e].placeholder=Y}),ie(["drop","take"],function(r,i){Z.prototype[r]=function(e){var t=this.__filtered__;if(t&&!i)return new Z(this);e=null==e?1:N(j(e)||0,0);var n=this.clone();return t?n.__takeCount__=F(n.__takeCount__,e):n.__views__.push({size:e,type:r+(n.__dir__<0?"Right":"")}),n},Z.prototype[r+"Right"]=function(e){return this.reverse()[r](e).reverse()}}),ie(["filter","map","takeWhile"],function(e,t){var r=t+1,i=r!=Mi;Z.prototype[e]=function(e,t){var n=this.clone();return n.__iteratees__.push({iteratee:At(e,t,1),type:r}),n.__filtered__=n.__filtered__||i,n}}),ie(["first","last"],function(e,t){var n="take"+(t?"Right":"");Z.prototype[e]=function(){return this[n](1).value()[0]}}),ie(["initial","rest"],function(e,t){var n="drop"+(t?"":"Right");Z.prototype[e]=function(){return this.__filtered__?new Z(this):this[n](1)}}),ie(["pluck","where"],function(e,t){var n=t?"filter":"map",r=t?Ne:si;Z.prototype[e]=function(e){return this[n](r(e))}}),Z.prototype.compact=function(){return this.filter(ti)},Z.prototype.reject=function(t,e){return t=At(t,e,1),this.filter(function(e){return!t(e)})},Z.prototype.slice=function(e,t){e=null==e?0:+e||0;var n=this;return n.__filtered__&&(0<e||t<0)?new Z(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==hi&&(n=(t=+t||0)<0?n.dropRight(-t):n.take(t-e)),n)},Z.prototype.takeRightWhile=function(e,t){return this.reverse().takeWhile(e,t).reverse()},Z.prototype.toArray=function(){return this.take(B)},Pe(Z.prototype,function(f,e){var d=/^(?:filter|map|reject)|While$/.test(e),p=/^(?:first|last)$/.test(e),h=Y[p?"take"+("last"==e?"Right":""):e];h&&(Y.prototype[e]=function(){var t=p?[1]:arguments,n=this.__chain__,e=this.__wrapped__,r=!!this.__actions__.length,i=e instanceof Z,o=t[0],a=i||cr(e);a&&d&&"function"==typeof o&&1!=o.length&&(i=a=!1);var s=function(e){return p&&n?h(e,1)[0]:h.apply(hi,ue([e],t))},u={func:Sn,args:[s],thisArg:hi},l=i&&!r;if(p&&!n)return l?((e=e.clone()).__actions__.push(u),f.call(e)):h.call(hi,this.value())[0];if(!p&&a){e=l?e:new Z(this);var c=f.apply(e,t);return c.__actions__.push(u),new K(c,n)}return this.thru(s)})}),ie(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(e){var n=(/^(?:replace|split)$/.test(e)?l:s)[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:join|pop|replace|shift)$/.test(e);Y.prototype[e]=function(){var t=arguments;return i&&!this.__chain__?n.apply(this.value(),t):this[r](function(e){return n.apply(e,t)})}}),Pe(Z.prototype,function(e,t){var n=Y[t];if(n){var r=n.name;(Q[r]||(Q[r]=[])).push({name:t,func:n})}}),Q[Ct(hi,gi).name]=[{name:"wrapper",func:hi}],Z.prototype.clone=function(){var e=new Z(this.__wrapped__);return e.__actions__=re(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=re(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=re(this.__views__),e},Z.prototype.reverse=function(){if(this.__filtered__){var e=new Z(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Z.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=cr(e),r=t<0,i=n?e.length:0,o=function(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=F(t,e+a);break;case"takeRight":e=N(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,l=r?s:a-1,c=this.__iteratees__,f=c.length,d=0,p=F(u,this.__takeCount__);if(!n||i<Ai||i==u&&p==u)return Ye(r&&n?e.reverse():e,this.__actions__);var h=[];e:for(;u--&&d<p;){for(var m=-1,v=e[l+=t];++m<f;){var g=c[m],$=g.iteratee,y=g.type,w=$(v);if(y==Mi)v=w;else if(!w){if(y==Pi)continue e;break e}}h[d++]=v}return h},Y.prototype.chain=function(){return xn(this)},Y.prototype.commit=function(){return new K(this.value(),this.__chain__)},Y.prototype.concat=Cn,Y.prototype.plant=function(e){for(var t,n=this;n instanceof J;){var r=Zt(n);t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t},Y.prototype.reverse=function(){var e=this.__wrapped__,t=function(e){return n&&n.__dir__<0?e:e.reverse()};if(e instanceof Z){var n=e;return this.__actions__.length&&(n=new Z(this)),(n=n.reverse()).__actions__.push({func:Sn,args:[t],thisArg:hi}),new K(n,this.__chain__)}return this.thru(t)},Y.prototype.toString=function(){return this.value()+""},Y.prototype.run=Y.prototype.toJSON=Y.prototype.valueOf=Y.prototype.value=function(){return Ye(this.__wrapped__,this.__actions__)},Y.prototype.collect=Y.prototype.map,Y.prototype.head=Y.prototype.first,Y.prototype.select=Y.prototype.filter,Y.prototype.tail=Y.prototype.rest,Y}();"function"==typeof hi&&"object"==typeof hi.amd&&hi.amd?(Mo._=Yo,hi(function(){return Yo})):f&&d?v?(d.exports=Yo)._=Yo:f._=Yo:Mo._=Yo}).call(commonjsGlobal)});function mixProvider(r,u){function i(e){var t=e.mixer;if(!(lodash.isPlainObject(e)&&"mixer"in e))return[e];if(lodash.isUndefined(i.mixers[t]))throw new Error("Mixer: unknow mixer type = "+t);if(!e.remix&&e.$parsed)return e.$parsed;if(e.$parsed=i.mixers[t].apply(null,arguments),!lodash.isArray(e.$parsed))throw new Error("Mixer: mixers must return an array (mixer: "+t+")");return e.$parsed}function l(e,r){return lodash.reduce(e,function(e,t){if(lodash.isPlainObject(t)&&"mixer"in t&&"wrapper"!=t.mixer&&!t.wrapper){var n=l(i(t,r),r);return e.concat(n)}return e.concat([t])},[])}return i.mixers={wrapper:function(e){return e.data},repeat:function(e){var t,n=e.data||[],r=[];for(t=0;t<e.times;t++)r=r.concat(lodash.clone(n,!0));return r},random:function(e,t){var n=e.data?l(e.data,t):[];return r(n)},choose:function(e,t){var n=e.data?l(e.data,t):[];return lodash.take(r(n),e.n?e.n:1)},custom:function(e,t){return lodash.isFunction(e.fn)?e.fn(e,t):[]},weightedRandom:e,weightedChoose:e},i;function e(r,e){var t,i=r.data?l(r.data,e):[],n=r.n||1,o=[],a=lodash.reduce(r.weights,function(e,t){return e+t});for(t=0;t<n;t++)o.push(s());return o;function s(){var e,t=u()*a,n=0;for(e=0;e<i.length;e++)if(t<=(n=+(n+=r.weights[e]).toFixed(3)))return r.data[e];throw new Error("Mixer: something went wrong with weightedRandom")}}}function mixerDotNotationProvider$1(n){return function(e,t){return lodash.isString(e)?/[^/]\./.test(e)?n(e,t):e.replace("/.","."):e}}function mixerConditionProvider$1(s,u){var l={gt:e(lodash.gt),greaterThan:e(lodash.gt),gte:e(lodash.gte),greaterThanOrEqual:e(lodash.gte),equals:lodash.eq,in:lodash.rearg(lodash.contains,1,0),contains:lodash.rearg(lodash.contains,1,0),exactly:function(e,t){return e===t},isTruthy:c};return function(e,t){var n,r,i=(r=(n=e).operator,lodash.isFunction(n)?n:lodash.has(n,"operator")?lodash.isFunction(r)?r:l[r]:lodash.has(n,"to")?lodash.eq:c),o=s(e.compare,t),a=s(e.to,t);return e.DEBUG&&u({type:"info",message:"Condition info",rows:[["Left: ",o],["Operator: ",e.operator||"equals"],["Right: ",a]],context:e}),e.negate?!i.apply(t,[o,a,t]):i.apply(t,[o,a,t])};function c(e){return!!e}function e(n){return function(e,t){return!![e,t].every(lodash.isNumber)&&n(e,t)}}}function evaluateProvider(i){return function t(e,n){function r(e){return t(e,n)}return lodash.isArray(e)&&(e={and:e}),e.and?lodash.every(e.and,r):e.nand?!lodash.every(e.nand,r):e.or?lodash.some(e.or,r):e.nor?!lodash.some(e.nor,r):i(e,n)}}function mixerBranchingDecorator$1(e,r,i){return e.mixers.branch=function(e,t){return t=lodash.extend(t||{},i),r(e.conditions,t)?e.data||[]:e.elseData||[]},e.mixers.multiBranch=function(e,t){var n;if(t=lodash.extend(t||{},i),n=lodash.find(e.branches,function(e){return r(e.conditions,t)}))return n.data||[];return e.elseData||[]},e}function mixerSequenceProvider$1(o){function e(e){this.sequence=e,this.stack=[],this.add(e),this.pointer=0}return lodash.extend(e.prototype,{add:function(e,t){this.stack.push({pointer:t?e.length:-1,sequence:e})},proceed:function(e,t){var n=this.stack[this.stack.length-1],r="next"===e;if(!n)throw new Error("mixerSequence: subSequence not found");n.pointer+=r?1:-1;var i=n.sequence[n.pointer];return lodash.isUndefined(i)&&1<this.stack.length?(this.stack.pop(),this.proceed.call(this,e,t)):i&&i.mixer?(this.add(o(i,t),!r),this.proceed.call(this,e,t)):this},next:function(e){return this.pointer++,this.proceed.call(this,"next",e)},prev:function(e){return this.pointer--,this.proceed.call(this,"prev",e)},current:function(){var e=this.stack[this.stack.length-1];if(!e)throw new Error("mixerSequence: subSequence not found");var t=e.sequence[e.pointer];if(t)return t.$meta=this.meta(),t},meta:function(){return{number:this.pointer,outOf:lodash.reduce(this.stack,function(e,t){return e+t.sequence.length-1},0)+1}}}),e}function dotNotation$1(e,t){if(!lodash.isUndefined(e))return lodash.isString(e)&&(e=e.split(".")),e.reduce(function(e,t){if(lodash.isPlainObject(e)||lodash.isArray(e))return e[t]},t)}function piConsoleFactory(r){return window.DEBUG?function e(t){if(lodash.get(e,"settings.hideConsole",!1))return window.postMessage({type:"kill-console"},"*");r[t.type]&&r[t.type](t.message);window.postMessage((n=t,lodash.cloneDeep(n,function(e){return lodash.isFunction(e)?e.toString():lodash.isError(e)?{name:e.name,message:e.message,stack:e.stack}:void 0})),"*");var n}:lodash.noop}mixProvider.$inject=["randomizeShuffle","randomizeRandom"],mixerDotNotationProvider$1.$inject=["dotNotation"],mixerConditionProvider$1.$inject=["mixerDotNotation","piConsole"],evaluateProvider.$inject=["mixerCondition"],mixerBranchingDecorator$1.$inject=["$delegate","mixerEvaluate","mixerDefaultContext"],mixerSequenceProvider$1.$inject=["mixer"],piConsoleFactory.$inject=["$log"];var piConsole$1=piConsoleFactory(console),mixer=mixProvider(lodash.shuffle,Math.random),mixerDotNotation=mixerDotNotationProvider$1(dotNotation$1),mixerCondition=mixerConditionProvider$1(mixerDotNotation,piConsole$1),mixerEvaluate=evaluateProvider(mixerCondition),mixerDefaultContext={};mixerBranchingDecorator$1(mixer,mixerEvaluate,mixerDefaultContext);var MixerSequence=mixerSequenceProvider$1(mixer);function templateObjProvider$1(u){return function(e,t,n){var r,i=lodash.get(n,"skip",[]),o={},a=lodash.assign({},t,u);for(r in e)o[r]=-1==i.indexOf(r)?s(e[r]):e[r];return o;function s(e){return lodash.isString(e)?~(t=e).indexOf("<%")?lodash.template(t)(a):t:lodash.isArray(e)?e.map(s):lodash.isPlainObject(e)?lodash.mapValues(e,s):e;var t}}}templateObjProvider$1.$inject=["templateDefaultContext"];var templateObj=templateObjProvider$1({});function collectionService(){function n(e){if(e instanceof n)return e;if(!(lodash.isUndefined(e)||lodash.isArray(e)||e instanceof n))throw new Error("Collections can only be constructed from arrays");this.collection=e||[],this.length=this.collection.length,this.pointer=-1}lodash.extend(n.prototype,{first:function(){return this.pointer=0,this.collection[this.pointer]},last:function(){return this.pointer=this.collection.length-1,this.collection[this.pointer]},end:function(){this.pointer=this.collection.length},current:function(){return this.collection[this.pointer]},next:function(){return this.collection[++this.pointer]},previous:function(){return this.collection[--this.pointer]},add:function(e){return arguments.length&&(e=lodash.isArray(e)?e:[e],this.collection=this.collection.concat(e),this.length=this.collection.length),this},at:function(e){return this.collection[e]}});var r=Array.prototype.slice;return lodash.each(["where","filter"],function(t){n.prototype[t]=function(){var e=r.call(arguments);return e.unshift(this.collection),new n(lodash[t].apply(lodash,e))}}),n}function RandomizerProvider(i,a,s){function e(){this._cache={random:{},exRandom:{},sequential:{}}}return lodash.extend(e.prototype,{random:function(e,t,n){var r=this._cache.random;if(n&&!lodash.isUndefined(r[t]))return r[t];return r[t]=i(e),r[t]},exRandom:function(e,t,n){var r,i=this._cache.exRandom,o=i[t];if(lodash.isUndefined(o))return(o=i[t]=new s(a(e))).first();if(o.length!==e)throw new Error("This seed  ("+t+") points to a collection with the wrong length, you can only use a seed for sets of the same length");if(n)return o.current();return r=o.next(),lodash.isUndefined(r)?(o=i[t]=new s(a(e))).first():r},sequential:function(e,t,n){var r,i=this._cache.sequential,o=i[t];if(lodash.isUndefined(o))return(o=i[t]=new s(lodash.range(e))).first();if(o.length!==e)throw new Error("This seed  ("+t+") points to a collection with the wrong length, you can only use a seed for sets of the same length");if(n)return o.current();return r=o.next(),lodash.isUndefined(r)?o.first():r}}),e}function storeProvider$1(t){function e(){this.store={}}return lodash.extend(e.prototype,{create:function(e){if(this.store[e])throw new Error("The name space "+e+" already exists");this.store[e]=new t,this.store[e].namespace=e},read:function(e){if(!this.store[e])throw new Error("The name space "+e+" does not exist");return this.store[e]},update:function(e,t){this.read(e).add(t)},del:function(e){this.store[e]=void 0}}),e}function SequenceProvider(r){function e(e,t,n){this.namespace=e,this.mixerSequence=new r(t),this.db=n}return lodash.extend(e.prototype,{next:function(e){return this.mixerSequence.next(e),this},prev:function(e){return this.mixerSequence.prev(e),this},current:function(e,t){e||(e={});var n=this.mixerSequence.current(e);return n?this.db.inflate(this.namespace,n,e,t):n},all:function(e,t){for(var n=[],r=this.next().current(e,t);r;)n.push(r),r=this.next().current(e,t);return n}}),e}function DatabaseProvider(e,t,a,s,n,u){function r(){this.store=new e,this.randomizer=new t}return lodash.extend(r.prototype,{createColl:function(e){this.store.create(e)},getColl:function(e){return this.store.read(e)},add:function(e,t){this.store.read(e).add(t)},inflate:function(e,t,n,r){var i,o=this.getColl(e);try{t.$inflated&&!t.reinflate||(t.$inflated=a(t,o,this.randomizer),t.$templated=null)}catch(e){throw u({type:"error",message:"Failed to inherit",error:e,context:t}),this.onError&&this.onError(e),e}try{t.$templated&&!t.$inflated.regenerateTemplate||(n[e+"Meta"]=t.$meta,n[e+"Data"]=s(t.$inflated.data||{},n,r),t.$templated=s(t.$inflated,n,r))}catch(e){throw u({type:"error",message:"Failed to apply template",error:e,context:t.$inflated}),this.onError&&this.onError(e),e}return i=t.$templated,n.global&&i.addGlobal&&lodash.extend(n.global,i.addGlobal),n.current&&i.addCurrent&&lodash.extend(n.current,i.addCurrent),i},sequence:function(e,t){if(!lodash.isArray(t))throw new Error("Sequence must be an array.");return new n(e,t,this)}}),r}function queryProvider$1(u){return function(t,e,n){var r=new u(e);if(lodash.isFunction(t))return t(e);(lodash.isString(t)||lodash.isNumber(t))&&(t={set:t,type:"random"}),t.set&&(r=r.where({set:t.set})),lodash.isString(t.data)&&(r=r.filter(function(e){return e.handle===t.data||e.data&&e.data.handle===t.data})),lodash.isPlainObject(t.data)&&(r=r.where({data:t.data})),lodash.isFunction(t.data)&&(r=r.filter(t.data));var i,o=t.seed||"$"+e.namespace+t.set,a=r.length,s=t.repeat;switch(t.type){case void 0:case"byData":case"random":i=n.random(a,o,s);break;case"exRandom":i=n.exRandom(a,o,s);break;case"sequential":i=n.sequential(a,o,s);break;case"first":i=0;break;case"last":i=a-1;break;default:throw new Error("Unknow query type: "+t.type)}if(lodash.isUndefined(r.at(i)))throw new Error("Query failed, object ("+JSON.stringify(t)+") not found. If you are trying to apply a template, you should know that they are not supported for inheritance.");return r.at(i)}}function inflateProvider$1(l,t){function c(e){return lodash.isFunction(e.customize)&&e.customize.apply(e,[e,t.global]),e}return function e(t,n,r,i,o){if(!(o=i?--o:10))throw new Error("Inheritance loop too deep, you can only inherit up to 10 levels down");if(!lodash.isPlainObject(t))throw new Error("You are trying to inflate a non object ("+JSON.stringify(t)+")");var a,s=lodash.cloneDeep(t),u=s.inherit;if(!s.inherit)return i||c(s),s;if(!(a=l(u,n,r)))throw new Error("Query failed, object ("+JSON.stringify(u)+") not found.");if(a=e(a,n,r,!0,o),u.merge&&!lodash.isArray(u.merge))throw new Error("Inheritance error: inherit.merge must be an array.");return lodash.each(a,function(e,t){var n,r;if(t in s){if(-1!=lodash.indexOf(u.merge,t)){if(n=s[t],r=e,lodash.isArray(n)){if(!lodash.isArray(r))throw new Error('Inheritance error: You tried merging an array with an non array (for "'+t+'")');s[t]=n.concat(r)}if(lodash.isPlainObject(n)){if(!lodash.isPlainObject(r))throw new Error('Inheritance error: You tried merging an object with an non object (for "'+t+'")');s[t]=lodash.extend({},r,n)}}}else s[t]=lodash.isFunction(e)?e:lodash.cloneDeep(e)}),a.data&&(s.data=lodash.extend(a.data,s.data||{})),!i&&c(s),s}}RandomizerProvider.$inject=["randomizeInt","randomizeRange","Collection"],storeProvider$1.$inject=["Collection"],SequenceProvider.$inject=["MixerSequence"],DatabaseProvider.$inject=["DatabaseStore","DatabaseRandomizer","databaseInflate","templateObj","databaseSequence","piConsole"],queryProvider$1.$inject=["Collection"],inflateProvider$1.$inject=["databaseQuery","$rootScope"];var global$1=window.piGlobal,piConsole=piConsoleFactory(console),collection=collectionService(),DatabaseRandomizer=RandomizerProvider(randomInt,randomArr,collection),databaseQuery=queryProvider$1(collection,piConsole),databaseInflate=inflateProvider$1(databaseQuery,{global:global$1},piConsole),DatabaseStore=storeProvider$1(collection),databaseSequence=SequenceProvider(MixerSequence),Database$2=DatabaseProvider(DatabaseStore,DatabaseRandomizer,databaseInflate,templateObj,databaseSequence,piConsole);function randomArr(e){return lodash.shuffle(lodash.range(e))}function randomInt(e){return Math.floor(Math.random()*e)}window.piGlobal||(window.piGlobal={});var global$2=window.piGlobal;function APIconstructor(e){function t(){var t=this.script={type:e.type,name:"anonymous "+e.type,settings:{},current:{},sequence:[]};this.settings=t.settings,lodash.forEach(e.sets,function(e){t[e+"Sets"]=[]})}return lodash.forEach(e.sets,function(e){t.prototype[lodash.camelCase("add-"+e+"-set")]=add_set(e)}),lodash.extend(t.prototype,e.static,{setName:function(e){this.script.name=e},addSettings:function(e,t){if(!lodash.isString(e))throw new Error("The first argument to API.addSettings must be a string");return lodash.isPlainObject(t)?this.settings[e]=lodash.extend(this.settings[e]||{},t):this.settings[e]=t,this},addSequence:function(e){var t=this.script;return lodash.isArray(e)||(e=[e]),t.sequence=t.sequence.concat(e),this},addGlobal:function(e){if(!lodash.isPlainObject(e))throw new Error("global must be an object");return lodash.merge(global$2,e)},getGlobal:function(){return global$2},addCurrent:function(e){if(!lodash.isPlainObject(e))throw new Error("current must be an object");return lodash.merge(this.script.current,e)},getCurrent:function(){return this.script.current},addScript:function(e){return lodash.merge(this.script,e)},getScript:function(){return this.script},save:function(e){var t=this.script,n=t._toSave||(t._toSave=[]);if(!lodash.isPlainObject(e))throw new Error("API.save can send only objects.");return t._save?t._save(e):n.push(e)},post:function(t,n){return angular.injector(["ng"]).invoke(["$http",function(e){return e.post(t,n)}])},shuffle:lodash.shuffle.bind(lodash)}),t}function add_set(i){function o(t,e){return e.map(function(e){return lodash.set(e,"set",t)})}function a(e){return lodash.isArray(e)?e:[e]}return function(e,t){var n,r=this.script[i+"Sets"]||(this.script[i+"Sets"]=[]);if(lodash.isUndefined(e))throw new Error('There is an undefined "'+i+'Set".');lodash.isArray(e)&&(n=e),lodash.isString(e)&&(n=o(e,a(t))),lodash.isPlainObject(e)&&(n=lodash.map(e,function(e,t){return o(t,a(e))}),n=lodash.flatten(n)),function(e){if(lodash.isUndefined(e))throw new Error('Error parsing "'+i+'Set": Unknown set type.');if(!e.every(function(e){return lodash.has(e,"set")}))throw new Error('All elements must be defined and belong to a set (error parsing "'+i+'Set")')}(n),r.push.apply(r,n)}}var PROGRESS_BAR=['<div class="row" style="opacity:0.4;">','<div class="hidden-xs col-sm-3 text-right" style="font-weight:bold;">Progress:&nbsp;</div>','<div class="col-xs-12 col-sm-7">','<div class="progress">','<div class="progress-bar" style="width: <%= 100 * tasksMeta.number / tasksMeta.outOf %>%;"></div>',"</div>","</div>","</div>"].join("\n"),manager=APIconstructor({type:"manager",sets:["tasks"],static:{PROGRESS_BAR:PROGRESS_BAR}}),api$1=APIconstructor({type:"minno-time",sets:["trial","stimulus","media"]});api$1.prototype.addTrialSets=api$1.prototype.addTrialSet,api$1.prototype.addStimulusSets=api$1.prototype.addStimulusSet,api$1.prototype.addMediaSets=api$1.prototype.addMediaSet,api$1.prototype.getLogs=function(){return this.script.current.logs};var quest=APIconstructor({type:"minnno-quest",sets:["pages","questions"]});function ComputeD(){lodash.extend(this,{dataArray:{},AnalyzedVar:"latency",ErrorVar:"error",condVar:"",cond1VarValues:[],cond2VarValues:[],parcelVar:"",parcelValue:[],fastRT:300,maxFastTrialsRate:.1,minRT:400,maxRT:1e4,maxErrorParcelRate:.4,errorLatency:{use:"latency",penalty:600,useForSTD:!0},postSettings:{}})}lodash.extend(ComputeD.prototype,{setComputeObject:function(e){lodash.extend(this,e)},setDataArray:function(){var e=window.piGlobal;this.dataArray=e.current.logs}});var messages={MessageDef:[],manyErrors:"There were too many errors made to determine a result.",tooFast:"There were too many fast trials to determine a result.",notEnough:"There were not enough trials to determine a result."},requirejs$1,require,define;function Message(){this.messages=lodash.extend({},messages)}function ParcelMng$1(e){this.parcelArray=[],this.scoreData={},this.msgMan=e}function Scorer(){this.computeData=new ComputeD,this.msgMan=new Message,this.parcelMng=new ParcelMng$1(this.msgMan)}function post(r,i){return new Promise(function(e,t){var n=new XMLHttpRequest;n.open("POST",r,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),n.onreadystatechange=function(){4===this.readyState&&(200<=this.status&&this.status<400?e(this.responseText):t(new Error("Failed posting to: "+r)))},n.send(JSON.stringify(i))})}
/** vim: et:ts=4:sw=4:sts=4
 * @license RequireJS 2.3.5 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, https://github.com/requirejs/requirejs/blob/master/LICENSE
 */lodash.extend(Message.prototype,{setMsgObject:function(e){lodash.extend(this.messages,e)},getScoreMsg:function(e){var t=this.messages.MessageDef;if(!t||!t.length)throw new Error('You must define a "MessageDef" array.');var n=parseFloat(e),r=null,i=null,o="error: msg was not set",a=!1;if(lodash.each(t,function(e){r=parseFloat(e.cut),i=e.message,n<=r&&!a&&(o=i,a=!0)}),!a){var s=t[t.length-1];o=s.message}return o},getMessage:function(e){return this.messages[e]}}),lodash.extend(ParcelMng$1.prototype,{Init:function(r){var i=this,e=this.msgMan,o=window.piGlobal.current.logs;i.parcelArray=[],i.scoreData={},i.msgMan=e;var a=r.AnalyzedVar,s=r.ErrorVar,u=r.parcelVar,t=r.parcelValue,l=r.minRT,c=r.maxRT,f=r.fastRT,d=0,p=0,h=0,m=0,n=parseFloat(r.maxFastTrialsRate);if(void 0===t||0===t.length){m=p=d=h=0;var v={name:"general",trialIData:[]};lodash.each(o,function(e){e[a]>=l&&e[a]<=c?(h++,1==e.data[s]&&m++,i.validate(v,e,r)&&d++):e[a]<=f&&p++}),i.checkErrors(h,m,r),i.parcelArray[0]=v}else lodash.each(t,function(t,e){m=p=d=h=0;var n={};n.name=t,n.trialIData=[],lodash.each(o,function(e){e.data[u]==t&&(e[a]>=l&&e[a]<=c?(h++,1==e.data[s]&&m++,i.validate(n,e,r)&&d++):e[a]<=f&&p++)}),i.checkErrors(h,m,r),i.parcelArray[e]=n});n<p/d&&(i.scoreData.errorMessage=this.msgMan.getMessage("tooFast"))},checkErrors:function(e,t,n){n.maxErrorParcelRate<t/e&&(this.scoreData.errorMessage=this.msgMan.getMessage("manyErrors"))},validate:function(e,t,n){var r=n.errorLatency,i=n.ErrorVar,o=t.data;return"latency"==r.use?(e.trialIData.push(t),!0):"false"==r.use?"1"!=o[i]&&(e.trialIData.push(t),!0):"penalty"==r.use?(e.trialIData.push(t),!0):void 0},addPenalty:function(e,t){var n=t.errorLatency,a=this;if("penalty"==n.use){var s=parseFloat(n.penalty),u=t.ErrorVar,l=t.AnalyzedVar,c=t.condVar,f=t.cond1VarValues,d=t.cond2VarValues,r=e.trialIData,p=e.avgCon1,h=e.avgCon2;lodash.each(r,function(e){var t=e.data,n=t[u],r=t[c],i=a.checkArray(r,f),o=a.checkArray(r,d);"1"==n&&(i?e[l]+=p+s:o&&(e[l]+=h+s))})}},avgAll:function(t){var n=this;lodash.each(n.parcelArray,function(e){n.avgParcel(e,t)})},avgParcel:function(e,t){var a=this,n=e.trialIData,s=t.condVar,u=t.cond1VarValues,l=t.cond2VarValues,c=t.AnalyzedVar,f=0,d=0,p=0,h=0,m=0,v=0;lodash.each(n,function(e){var t=e[c],n=e.data;p+=t,v++;var r=n[s],i=a.checkArray(r,u),o=a.checkArray(r,l);i?(h++,f+=t):o&&(m++,d+=t)}),(h<=2||m<=2)&&(a.scoreData.errorMessage=this.msgMan.getMessage("notEnough")),0!==h&&(f/=h),0!==m&&(d/=m),e.avgCon1=f,e.avgCon2=d,e.diff=e.avgCon1-e.avgCon2,0!==v&&(e.avgBoth=p/v),a.addPenalty(e,t)},checkArray:function(e,t){for(var n=0;n<t.length;n++){if(t[n]==e)return!0}return!1},varianceAll:function(t){var n=this;lodash.each(n.parcelArray,function(e){n.varianceParcel(e,t)})},varianceParcel:function(e,s){var t,u=this,l=s.AnalyzedVar,n=e.trialIData,c=s.cond1VarValues,f=s.cond2VarValues,d=s.condVar,r=e.avgBoth,i=0,o=0,p=[],h=[],m=s.errorLatency.useForSTD;lodash.each(n,function(e){var t=e.data,n=e[l],r=t[s.ErrorVar],i=t[d],o=u.checkArray(i,c),a=u.checkArray(i,f);o?m?p.push(n):"0"==r&&p.push(n):a&&(m?h.push(n):"0"==r&&p.push(n))}),t=p.concat(h),lodash.each(t,function(e){o+=(i=e-r)*i}),e.variance=o/(t.length-1)},scoreAll:function(t){var n=this,r=0;lodash.each(n.parcelArray,function(e){n.scoreParcel(e,t),r+=e.score});var e=r/n.parcelArray.length;n.scoreData.score=e.toFixed(2)},scoreParcel:function(e){var t=Math.sqrt(e.variance);0===t?(this.scoreData.errorMessage=this.msgMan.getMessage("notEnough"),e.score=e.diff):e.score=e.diff/t}}),lodash.extend(Scorer.prototype,{addSettings:function(e,t){switch(e){case"compute":this.computeData.setComputeObject(t);break;case"message":this.msgMan.setMsgObject(t);break;default:throw new Error('SCORER:addSettings: unknow "type" '+e)}},computeD:function(){var e=this.computeData,t=this.parcelMng;e.setDataArray(),t.Init(e),t.avgAll(e),t.varianceAll(e),t.scoreAll(e);var n=t.scoreData;return void 0===n.errorMessage||null===n.errorMessage?{FBMsg:this.getFBMsg(n.score),DScore:n.score,error:!1}:{FBMsg:n.errorMessage,DScore:"",error:!0}},postToServer:function(e,t,n,r){var i=this.computeData.postSettings||{},o=i.url,a={};return n||(n=i.score),r||(r=i.msg),a[n]=e,a[r]=t,post(o,a)},dynamicPost:function(e){return post((this.computeData.postSettings||{}).url,e)},getFBMsg:function(e){return this.msgMan.getScoreMsg(e)}}),function(global,setTimeout){var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.3.5",commentRegExp=/\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;function commentReplace(e,t){return t||""}function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){var n;if(e)for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}function eachReverse(e,t){var n;if(e)for(n=e.length-1;-1<n&&(!e[n]||!t(e[n],n,e));n-=1);}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(n,e,r,i){return e&&eachProp(e,function(e,t){!r&&hasProp(n,t)||(!i||"object"!=typeof e||!e||isArray(e)||isFunction(e)||e instanceof RegExp?n[t]=e:(n[t]||(n[t]={}),mixin(n[t],e,r,i)))}),n}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,r){var i=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return i.requireType=e,i.requireModules=r,n&&(i.originalError=n),i}if(void 0===define){if(void 0!==requirejs$1){if(isFunction(requirejs$1))return;cfg=requirejs$1,requirejs$1=void 0}void 0===require||isFunction(require)||(cfg=require,require=void 0),req=requirejs$1=function(e,t,n,r){var i,o,a=defContextName;return isArray(e)||"string"==typeof e||(o=e,isArray(t)?(e=t,t=n,n=r):e=[]),o&&o.context&&(a=o.context),(i=getOwn(contexts,a))||(i=contexts[a]=req.s.newContext(a)),o&&i.configure(o),i.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick=void 0!==setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(t){req[t]=function(){var e=contexts[defContextName];return e.require[t].apply(e,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,n){var r=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return r.type=e.scriptType||"text/javascript",r.charset="utf-8",r.async=!0,r},req.load=function(t,n,r){var e,i=t&&t.config||{};if(isBrowser)return(e=req.createNode(i,n,r)).setAttribute("data-requirecontext",t.contextName),e.setAttribute("data-requiremodule",n),!e.attachEvent||e.attachEvent.toString&&e.attachEvent.toString().indexOf("[native code")<0||isOpera?(e.addEventListener("load",t.onScriptLoad,!1),e.addEventListener("error",t.onScriptError,!1)):(useInteractive=!0,e.attachEvent("onreadystatechange",t.onScriptLoad)),e.src=r,i.onNodeCreated&&i.onNodeCreated(e,i,n,r),currentlyAddingScript=e,baseElement?head.insertBefore(e,baseElement):head.appendChild(e),currentlyAddingScript=null,e;if(isWebWorker)try{setTimeout(function(){},0),importScripts(r),t.completeLoad(n)}catch(e){t.onError(makeError("importscripts","importScripts failed for "+n+" at "+r,e,[n]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){if(head||(head=e.parentNode),dataMain=e.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||-1!==mainScript.indexOf("!")||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(e,n,t){var r,i;"string"!=typeof e&&(t=n,n=e,e=null),isArray(n)||(t=n,n=null),!n&&isFunction(t)&&(n=[],t.length&&(t.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,function(e,t){n.push(t)}),n=(1===t.length?["require"]:["require","exports","module"]).concat(n))),useInteractive&&(r=currentlyAddingScript||getInteractiveScript())&&(e||(e=r.getAttribute("data-requiremodule")),i=contexts[r.getAttribute("data-requirecontext")]),i?(i.defQueue.push([e,n,t]),i.defQueueMap[e]=!0):globalDefQueue.push([e,n,t])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}function newContext(u){var n,e,p,l,c,v={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},f={},d={},r={},h=[],m={},i={},g={},$=1,y=1;function w(e,t,n){var r,i,o,a,s,u,l,c,f,d,p=t&&t.split("/"),h=v.map,m=h&&h["*"];if(e&&(u=(e=e.split("/")).length-1,v.nodeIdCompat&&jsSuffixRegExp.test(e[u])&&(e[u]=e[u].replace(jsSuffixRegExp,"")),"."===e[0].charAt(0)&&p&&(e=p.slice(0,p.length-1).concat(e)),function(e){var t,n;for(t=0;t<e.length;t++)if("."===(n=e[t]))e.splice(t,1),t-=1;else if(".."===n){if(0===t||1===t&&".."===e[2]||".."===e[t-1])continue;0<t&&(e.splice(t-1,2),t-=2)}}(e),e=e.join("/")),n&&h&&(p||m)){e:for(o=(i=e.split("/")).length;0<o;o-=1){if(s=i.slice(0,o).join("/"),p)for(a=p.length;0<a;a-=1)if((r=getOwn(h,p.slice(0,a).join("/")))&&(r=getOwn(r,s))){l=r,c=o;break e}!f&&m&&getOwn(m,s)&&(f=getOwn(m,s),d=o)}!l&&f&&(l=f,c=d),l&&(i.splice(0,c,l),e=i.join("/"))}return getOwn(v.pkgs,e)||e}function b(t){isBrowser&&each(scripts(),function(e){if(e.getAttribute("data-requiremodule")===t&&e.getAttribute("data-requirecontext")===p.contextName)return e.parentNode.removeChild(e),!0})}function x(e){var t=getOwn(v.paths,e);if(t&&isArray(t)&&1<t.length)return t.shift(),p.require.undef(e),p.makeRequire(null,{skipMap:!0})([e]),!0}function S(e){var t,n=e?e.indexOf("!"):-1;return-1<n&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function C(e,t,n,r){var i,o,a,s,u=null,l=t?t.name:null,c=e,f=!0,d="";return e||(f=!1,e="_@r"+($+=1)),u=(s=S(e))[0],e=s[1],u&&(u=w(u,l,r),o=getOwn(m,u)),e&&(u?d=n?e:o&&o.normalize?o.normalize(e,function(e){return w(e,l,r)}):-1===e.indexOf("!")?w(e,l,r):e:(u=(s=S(d=w(e,l,r)))[0],d=s[1],n=!0,i=p.nameToUrl(d))),{prefix:u,name:d,parentMap:t,unnormalized:!!(a=!u||o||n?"":"_unnormalized"+(y+=1)),url:i,originalName:c,isDefine:f,id:(u?u+"!"+d:d)+a}}function E(e){var t=e.id,n=getOwn(f,t);return n||(n=f[t]=new p.Module(e)),n}function k(e,t,n){var r=e.id,i=getOwn(f,r);!hasProp(m,r)||i&&!i.defineEmitComplete?(i=E(e)).error&&"error"===t?n(i.error):i.on(t,n):"defined"===t&&n(m[r])}function q(n,e){var t=n.requireModules,r=!1;e?e(n):(each(t,function(e){var t=getOwn(f,e);t&&(t.error=n,t.events.error&&(r=!0,t.emit("error",n)))}),r||req.onError(n))}function _(){globalDefQueue.length&&(each(globalDefQueue,function(e){var t=e[0];"string"==typeof t&&(p.defQueueMap[t]=!0),h.push(e)}),globalDefQueue=[])}function A(e){delete f[e],delete d[e]}function P(){var e,r,t=1e3*v.waitSeconds,i=t&&p.startTime+t<(new Date).getTime(),o=[],a=[],s=!1,u=!0;if(!n){if(n=!0,eachProp(d,function(e){var t=e.map,n=t.id;if(e.enabled&&(t.isDefine||a.push(e),!e.error))if(!e.inited&&i)x(n)?s=r=!0:(o.push(n),b(n));else if(!e.inited&&e.fetched&&t.isDefine&&(s=!0,!t.prefix))return u=!1}),i&&o.length)return(e=makeError("timeout","Load timeout for modules: "+o,null,o)).contextName=p.contextName,q(e);u&&each(a,function(e){!function i(o,a,s){var e=o.map.id;o.error?o.emit("error",o.error):(a[e]=!0,each(o.depMaps,function(e,t){var n=e.id,r=getOwn(f,n);!r||o.depMatched[t]||s[n]||(getOwn(a,n)?(o.defineDep(t,m[n]),o.check()):i(r,a,s))}),s[e]=!0)}(e,{},{})}),i&&!r||!s||!isBrowser&&!isWebWorker||c||(c=setTimeout(function(){c=0,P()},50)),n=!1}}function a(e){hasProp(m,e[0])||E(C(e[0],null,!0)).init(e[1],e[2])}function o(e,t,n,r){e.detachEvent&&!isOpera?r&&e.detachEvent(r,t):e.removeEventListener(n,t,!1)}function s(e){var t=e.currentTarget||e.srcElement;return o(t,p.onScriptLoad,"load","onreadystatechange"),o(t,p.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function M(){var e;for(_();h.length;){if(null===(e=h.shift())[0])return q(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));a(e)}p.defQueueMap={}}return l={require:function(e){return e.require?e.require:e.require=p.makeRequire(e.map)},exports:function(e){if(e.usingExports=!0,e.map.isDefine)return e.exports?m[e.map.id]=e.exports:e.exports=m[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(v.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},(e=function(e){this.events=getOwn(r,e.id)||{},this.map=e,this.shim=getOwn(v.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0}).prototype={init:function(e,t,n,r){r=r||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,p.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();p.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;i[e]||(i[e]=!0,p.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var t,e,n=this.map.id,r=this.depExports,i=this.exports,o=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{i=p.execCb(n,o,r,i)}catch(e){t=e}else i=p.execCb(n,o,r,i);if(this.map.isDefine&&void 0===i&&((e=this.module)?i=e.exports:this.usingExports&&(i=this.exports)),t)return t.requireMap=this.map,t.requireModules=this.map.isDefine?[this.map.id]:null,t.requireType=this.map.isDefine?"define":"require",q(this.error=t)}else i=o;if(this.exports=i,this.map.isDefine&&!this.ignore&&(m[n]=i,req.onResourceLoad)){var a=[];each(this.depMaps,function(e){a.push(e.normalizedMap||e)}),req.onResourceLoad(p,this.map,a)}A(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(p.defQueueMap,n)||this.fetch()}},callPlugin:function(){var u=this.map,l=u.id,e=C(u.prefix);this.depMaps.push(e),k(e,"defined",bind(this,function(e){var o,t,n,r=getOwn(g,this.map.id),i=this.map.name,a=this.map.parentMap?this.map.parentMap.name:null,s=p.makeRequire(u.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(e.normalize&&(i=e.normalize(i,function(e){return w(e,a,!0)})||""),k(t=C(u.prefix+"!"+i,this.map.parentMap,!0),"defined",bind(this,function(e){this.map.normalizedMap=t,this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),void((n=getOwn(f,t.id))&&(this.depMaps.push(t),this.events.error&&n.on("error",bind(this,function(e){this.emit("error",e)})),n.enable()))):r?(this.map.url=p.nameToUrl(r),void this.load()):((o=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})})).error=bind(this,function(e){this.inited=!0,(this.error=e).requireModules=[l],eachProp(f,function(e){0===e.map.id.indexOf(l+"_unnormalized")&&A(e.map.id)}),q(e)}),o.fromText=bind(this,function(e,t){var n=u.name,r=C(n),i=useInteractive;t&&(e=t),i&&(useInteractive=!1),E(r),hasProp(v.config,l)&&(v.config[n]=v.config[l]);try{req.exec(e)}catch(e){return q(makeError("fromtexteval","fromText eval for "+l+" failed: "+e,e,[l]))}i&&(useInteractive=!0),this.depMaps.push(r),p.completeLoad(n),s([n],o)}),void e.load(u.name,s,o,v))})),p.enable(e,this),this.pluginMaps[e.id]=e},enable:function(){(d[this.map.id]=this).enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,r,i;if("string"==typeof e){if(e=C(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,i=getOwn(l,e.id))return void(this.depExports[t]=i(this));this.depCount+=1,k(e,"defined",bind(this,function(e){this.undefed||(this.defineDep(t,e),this.check())})),this.errback?k(e,"error",bind(this,this.errback)):this.events.error&&k(e,"error",bind(this,function(e){this.emit("error",e)}))}n=e.id,r=f[n],hasProp(l,n)||!r||r.enabled||p.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(f,e.id);t&&!t.enabled&&p.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},(p={config:v,contextName:u,registry:f,defined:m,urlFetched:i,defQueue:h,defQueueMap:{},Module:e,makeModuleMap:C,nextTick:req.nextTick,onError:q,configure:function(e){if(e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/"),"string"==typeof e.urlArgs){var n=e.urlArgs;e.urlArgs=function(e,t){return(-1===t.indexOf("?")?"?":"&")+n}}var r=v.shim,i={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){i[t]?(v[t]||(v[t]={}),mixin(v[t],e,!0,!0)):v[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(g[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=p.makeShimExports(e)),r[t]=e}),v.shim=r),e.packages&&each(e.packages,function(e){var t;t=(e="string"==typeof e?{name:e}:e).name,e.location&&(v.paths[t]=e.location),v.pkgs[t]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(f,function(e,t){e.inited||e.map.unnormalized||(e.map=C(t,null,!0))}),(e.deps||e.callback)&&p.require(e.deps||[],e.callback)},makeShimExports:function(t){return function(){var e;return t.init&&(e=t.init.apply(global,arguments)),e||t.exports&&getGlobal(t.exports)}},makeRequire:function(o,a){function s(e,t,n){var r,i;return a.enableBuildCallback&&t&&isFunction(t)&&(t.__requireJsBuild=!0),"string"==typeof e?isFunction(t)?q(makeError("requireargs","Invalid require call"),n):o&&hasProp(l,e)?l[e](f[o.id]):req.get?req.get(p,e,o,s):(r=C(e,o,!1,!0).id,hasProp(m,r)?m[r]:q(makeError("notloaded",'Module name "'+r+'" has not been loaded yet for context: '+u+(o?"":". Use require([])")))):(M(),p.nextTick(function(){M(),(i=E(C(null,o))).skipMap=a.skipMap,i.init(e,t,n,{enabled:!0}),P()}),s)}return a=a||{},mixin(s,{isBrowser:isBrowser,toUrl:function(e){var t,n=e.lastIndexOf("."),r=e.split("/")[0];return-1!==n&&(!("."===r||".."===r)||1<n)&&(t=e.substring(n,e.length),e=e.substring(0,n)),p.nameToUrl(w(e,o&&o.id,!0),t,!0)},defined:function(e){return hasProp(m,C(e,o,!1,!0).id)},specified:function(e){return e=C(e,o,!1,!0).id,hasProp(m,e)||hasProp(f,e)}}),o||(s.undef=function(n){_();var e=C(n,o,!0),t=getOwn(f,n);t.undefed=!0,b(n),delete m[n],delete i[e.url],delete r[n],eachReverse(h,function(e,t){e[0]===n&&h.splice(t,1)}),delete p.defQueueMap[n],t&&(t.events.defined&&(r[n]=t.events),A(n))}),s},enable:function(e){getOwn(f,e.id)&&E(e).enable()},completeLoad:function(e){var t,n,r,i=getOwn(v.shim,e)||{},o=i.exports;for(_();h.length;){if(null===(n=h.shift())[0]){if(n[0]=e,t)break;t=!0}else n[0]===e&&(t=!0);a(n)}if(p.defQueueMap={},r=getOwn(f,e),!t&&!hasProp(m,e)&&r&&!r.inited){if(!(!v.enforceDefine||o&&getGlobal(o)))return x(e)?void 0:q(makeError("nodefine","No define call for "+e,null,[e]));a([e,i.deps||[],i.exportsFn])}P()},nameToUrl:function(e,t,n){var r,i,o,a,s,u,l=getOwn(v.pkgs,e);if(l&&(e=l),u=getOwn(g,e))return p.nameToUrl(u,t,n);if(req.jsExtRegExp.test(e))a=e+(t||"");else{for(r=v.paths,o=(i=e.split("/")).length;0<o;o-=1)if(s=getOwn(r,i.slice(0,o).join("/"))){isArray(s)&&(s=s[0]),i.splice(0,o,s);break}a=i.join("/"),a=("/"===(a+=t||(/^data\:|^blob\:|\?/.test(a)||n?"":".js")).charAt(0)||a.match(/^[\w\+\.\-]+:/)?"":v.baseUrl)+a}return v.urlArgs&&!/^blob\:/.test(a)?a+v.urlArgs(e,a):a},load:function(e,t){req.load(p,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=s(e);p.completeLoad(t.id)}},onScriptError:function(e){var n=s(e);if(!x(n.id)){var r=[];return eachProp(f,function(e,t){0!==t.indexOf("_@r")&&each(e.depMaps,function(e){if(e.id===n.id)return r.push(t),!0})}),q(makeError("scripterror",'Script error for "'+n.id+(r.length?'", needed by: '+r.join(", "):'"'),e,[n.id]))}}}).require=p.makeRequire(),p}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState||eachReverse(scripts(),function(e){if("interactive"===e.readyState)return interactiveScript=e}),interactiveScript}}(void 0,"undefined"==typeof setTimeout?void 0:setTimeout);var module$5=angular.module("randomize",[]);module$5.value("randomizeRandom",Math.random),module$5.value("randomizeShuffle",lodash.shuffle),module$5.value("randomizeInt",function(e){return Math.floor(Math.random()*e)}),module$5.value("randomizeRange",function(e){return lodash.shuffle(lodash.range(e))});var consoleModule$1=angular.module("piConsole",[]);function mixerSequentialProvider(a){return function e(t,n,r){var i,o=t[0];if(r=r||0,10<=r++)throw new Error("Mixer: the mixer allows a maximum depth of 10");return lodash.isUndefined(o.mixer)?t:(i=a(o,n),t.shift(),i=i.concat(t),lodash.isUndefined(i[0])||lodash.isUndefined(i[0].mixer)?i:e(i,n,r))}}function mixerRecursiveProvider(i){return function t(e,n,r){if(r=r||0,10<=r++)throw new Error("Mixer: the mixer allows a maximum depth of 10");return lodash(e).map(function(e){return lodash.isUndefined(e.mixer)?e:t(i(e,n),n,r)}).flatten().value()}}consoleModule$1.factory("piConsole",piConsoleFactory),mixerSequentialProvider.$inject=["mixer"],mixerRecursiveProvider.$inject=["mixer"];var module$4=angular.module("mixer",[module$5.name,consoleModule$1.name]);function templateFilter$1(n,r){return function(t,e){if(!~t.indexOf("<%"))return t;e=lodash.extend(e||{},r);try{return lodash.template(t)(e)}catch(e){return n.error('ERROR: "'+e.message+'" in the following template: ',t),""}}}module$4.service("mixer",mixProvider),module$4.service("mixerSequential",mixerSequentialProvider),module$4.service("mixerRecursive",mixerRecursiveProvider),module$4.service("MixerSequence",mixerSequenceProvider$1),module$4.value("dotNotation",dotNotation$1),module$4.service("mixerDotNotation",mixerDotNotationProvider$1),module$4.service("mixerCondition",mixerConditionProvider$1),module$4.service("mixerEvaluate",evaluateProvider),module$4.config(["$provide",function(e){e.decorator("mixer",mixerBranchingDecorator$1)}]),module$4.constant("mixerDefaultContext",{}),templateFilter$1.$inject=["$log","templateDefaultContext"];var module$6=angular.module("template",[]);module$6.filter("template",templateFilter$1),module$6.service("templateObj",templateObjProvider$1),module$6.constant("templateDefaultContext",{});var module$3=angular.module("database",[module$4.name,module$6.name,consoleModule$1.name]).service("Collection",collectionService).service("DatabaseRandomizer",RandomizerProvider).service("databaseQuery",queryProvider$1).service("databaseInflate",inflateProvider$1).service("DatabaseStore",storeProvider$1).service("Database",DatabaseProvider).service("databaseSequence",SequenceProvider),module$7=angular.module("piConsole",[]);function piConsoleFactory$1(r){return window.DEBUG?function e(t){if(lodash.get(e,"settings.hideConsole",!1))return window.postMessage({type:"kill-console"},"*");r[t.type]&&r[t.type](t.message);window.postMessage((n=t,lodash.cloneDeep(n,function(e){return lodash.isFunction(e)?"Function: "+e.name:lodash.isError(e)?{name:e.name,message:e.message,stack:e.stack}:void 0})),"*");var n}:lodash.noop}function SequenceProvider$1(){function e(e,t){if(!t)throw new Error("Sequences need to take a db as the second argument");this.sequence=t.sequence("pages",e),this.db=t}return lodash.extend(e.prototype,{next:function(e){return this.sequence.next(e),this},prev:function(e){return this.sequence.prev(e),this},current:function(e){var t,n=this.sequence.current(e,{skip:["questions"]});if(!n)return n;t=n.questions?lodash.isArray(n.questions)?n.questions:[n.questions]:[];var r=this.db.sequence("questions",t).all({pagesData:n.data,pagesMeta:n.$meta});return(n=lodash.clone(n,!0)).questions=r,n}}),e}module$7.factory("piConsole",piConsoleFactory$1),piConsoleFactory$1.$inject=["$log"];var stream=createCommonjsModule(function(e){!function(){var t=0,i={};function a(){function e(){return 0<arguments.length&&arguments[0]!==i&&r(e,arguments[0]),e._state.value}var n;return(n=e).constructor=a,n._state={id:t++,value:void 0,state:0,derive:void 0,recover:void 0,deps:{},parents:[],endStream:void 0,unregister:void 0},n.map=n["fantasy-land/map"]=c,n["fantasy-land/ap"]=f,n["fantasy-land/of"]=a,n.valueOf=d,n.toJSON=p,n.toString=d,Object.defineProperties(n,{end:{get:function(){if(!n._state.endStream){var t=a();t.map(function(e){return!0===e&&(l(n),t._state.unregister=function(){l(t)}),e}),n._state.endStream=t}return n._state.endStream}}}),0<arguments.length&&arguments[0]!==i&&r(e,arguments[0]),e}function r(e,t){for(var n in o(e,t),e._state.deps)s(e._state.deps[n],!1);null!=e._state.unregister&&e._state.unregister(),function(e){for(var t in e._state.changed=!1,e._state.deps)e._state.deps[t]._state.changed=!1}(e)}function o(e,t){e._state.value=t,e._state.changed=!0,2!==e._state.state&&(e._state.state=1)}function s(e,t){var n=e._state.parents;if(0<n.length&&n.every(m)&&(t||n.some(v))){var r=e._state.derive();if(r===i)return!1;o(e,r)}}function u(e,t){if(!t.every(h))throw new Error("Ensure that each item passed to stream.combine/stream.merge is a stream");return n=a(),r=t,i=function(){return e.apply(this,t.concat([t.filter(v)]))},(o=n._state).derive=i,o.parents=r.filter(g),function e(t,n){for(var r=0;r<n.length;r++)n[r]._state.deps[t._state.id]=t,e(t,n[r]._state.parents)}(n,o.parents),s(n,!0),n;var n,r,i,o}function l(e){for(var t=0;t<e._state.parents.length;t++){delete e._state.parents[t]._state.deps[e._state.id]}for(var n in e._state.deps){var r=e._state.deps[n],i=r._state.parents.indexOf(e);-1<i&&r._state.parents.splice(i,1)}e._state.state=2,e._state.deps={}}function c(t){return u(function(e){return t(e())},[this])}function f(e){return u(function(e,t){return e()(t())},[e,this])}function d(){return this._state.value}function p(){return null!=this._state.value&&"function"==typeof this._state.value.toJSON?this._state.value.toJSON():this._state.value}function h(e){return e._state}function m(e){return 1===e._state.state}function v(e){return e._state.changed}function g(e){return 2!==e._state.state}(a["fantasy-land/of"]=a).merge=function(e){return u(function(){return e.map(function(e){return e()})},e)},a.combine=u,a.scan=function(t,n,e){var r=u(function(e){return n=t(n,e._state.value)},[e]);return 0===r._state.state&&r(n),r},a.scanMerge=function(r,i){var e=r.map(function(e){var t=e[0];return 0===t._state.state&&t(void 0),t});return u(function(){var n=arguments[arguments.length-1];return e.forEach(function(e,t){-1<n.indexOf(e)&&(i=r[t][1](i,e._state.value))}),i},e)},a.HALT=i,e.exports=a}()});function createLogs(e,t,n){var r,i=t.logger||t.logMap||n;return e.map((r=i,function(e){return r.apply(null,e)}))}function dfltQuestLogger(e,t){var n=lodash.extend({},t,e);return n.declined&&(n.response=e.responseObj=void 0),n}function TaskProvider(i,o,a,s,u){function e(e){var t=this,n=e.settings||{},r=u.global;if(!lodash.isArray(e.sequence))throw new Error("Task: no sequence was defined");this.script=e,this.db=new o,this.sequence=new a(e.sequence,this.db),this.$logSource=stream(),this.$logs=createLogs(this.$logSource,n.logger||{},dfltQuestLogger),this.q=i.defer(),this.promise=this.q.promise.then(function(){lodash.each(u.current.questions,function(e){if(e.$logged)return!0;t.log(e,{},r),e.$logged=!0}),t.$logSource.end(!0),t.$logs.end(!0)}).finally(n.onEnd||lodash.noop),s(e,this.db)}return lodash.extend(e.prototype,{log:function(){this.$logSource.call(null,[].slice.call(arguments))},current:function(){var e=this.sequence.current();return e||this.end(),e},next:function(){return this.sequence.next()},prev:function(){return this.sequence.prev()},end:function(){this.q.resolve()}}),e}function parseProvider(){return function(e,t){t.createColl("pages"),t.createColl("questions"),t.add("pages",e.pagesSets||[]),t.add("questions",e.questionsSets||[]),e.settings||(e.settings={})}}TaskProvider.$inject=["$q","Database","QuestSequence","taskParse","$rootScope"];var module$2=angular.module("task",[module$3.name,module$7.name]),nowFn;function stopperProvider(e){function t(){this.startTime=e()}return t.prototype.now=function(){return e()-this.startTime},t}function timerController(f,t){var d=this,p={};function h(){var e=p.options,t=d.stopper.now(),n=d.targetTime-t;if(t>=d.targetTime)return p.$emit("timer-end"),void(e.removeOnEnd&&d.remove());var r,i,o,a,s,u,l,c="up"===e.direction?t:n;lodash.extend(p,(r=c,i=Math.floor(r/1e3),o=Math.floor(i/3600),a=i%3600,s=Math.floor(a/60),u=a%60,l=Math.ceil(u),{current:r,hours:o,minutes:s,seconds:l,milis:r%1e3})),d.timeoutId=f(h,Math.min(100,n)),p.$emit("timer-tick")}d.start=function(e){if(!lodash.isPlainObject(e))throw new Error("Timer options must be an object");(p=d.getScope()).options=lodash.defaults(e,{direction:"down",template:"normal",show:!0,removeOnEnd:!0,duration:0}),d.stopper=new t,d.targetTime=1e3*p.options.duration,p.options.show&&d.show(),h()},d.stop=function(){var e=p.options||{};p=d.getScope(),f.cancel(d.timeoutId),e.removeOnEnd&&d.remove()}}function timerDirective(u){return{controller:timerController,priority:400,link:function(e,t,n,r){var i,o='<div class="pi-timer well well-sm text-center" style="font-family: monospace;">{{minutes}}:{{zeroPad(seconds)}}</div>',a=e.$new();function s(){i&&i.remove(),i=null}r.show=function(){i=angular.element(o),t.prepend(i),u(i.contents())(a)},r.remove=s,r.getScope=function(){return a},a.zeroPad=function(e){return e<10?"0"+e:e},e.$on("$destroy",s)}}}module$2.service("QuestSequence",SequenceProvider$1),module$2.service("QuestTask",TaskProvider),module$2.service("taskParse",parseProvider),module$2.value("dfltQuestLogger",dfltQuestLogger),stopperProvider.$inject=["timerNow"],timerController.$inject=["$timeout","timerStopper"],timerDirective.$inject=["$compile"],window.performance&&(nowFn=performance.now||performance.mozNow||performance.webkitNow||performance.msNow||performance.oNow);var timerNow=nowFn?function(){return nowFn.apply(performance)}:function(){return+new Date},module$9=angular.module("timer",[]);module$9.service("timerStopper",stopperProvider),module$9.directive("piTimer",timerDirective),module$9.value("timerNow",timerNow);var preloadImages=preload.bind(null,preloadImg);function preload(e,t){var n=0;function r(){n<t.length&&e(t[n++],r)}r(),r(),r(),r()}function preloadImg(e,t){var n=new Image;n.onload=t,n.onerror=t,n.src=e}var module$10=angular.module("pi.utils",[]);module$10.value("piPreloadImages",preloadImages),module$10.service("piInvoke",["$injector",function(r){var i=r.get("$rootScope");return function(e,t){var n=i.global||{};e&&r.invoke(e,null,lodash.extend(t,{global:n,current:n.current}))}}]);var buttons=angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(e){this.activeClass=e.activeClass||"active",this.toggleEvent=e.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(t,n,r,e){var i=e[0],o=e[1];o.$render=function(){n.toggleClass(i.activeClass,angular.equals(o.$modelValue,t.$eval(r.btnRadio)))},n.bind(i.toggleEvent,function(){var e=n.hasClass(i.activeClass);e&&!angular.isDefined(r.uncheckable)||t.$apply(function(){o.$setViewValue(e?null:t.$eval(r.btnRadio)),o.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(r,e,t,n){var i=n[0],o=n[1];function a(){return s(t.btnCheckboxTrue,!0)}function s(e,t){var n=r.$eval(e);return angular.isDefined(n)?n:t}o.$render=function(){e.toggleClass(i.activeClass,angular.equals(o.$modelValue,a()))},e.bind(i.toggleEvent,function(){r.$apply(function(){o.$setViewValue(e.hasClass(i.activeClass)?s(t.btnCheckboxFalse,!1):a()),o.$render()})})}}}),template='<div class="modal in minno-modal" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n\t<div class="modal-dialog">\n\t\t<div class="modal-content">\n\t\t\t<div class="modal-header" ng-if="header">\n\t\t\t\t<button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="close()"><span aria-hidden="true">&times;</span></button>\n\t\t\t\t<h4 class="modal-title" id="myModalLabel">{{ header }}</h4>\n\t\t\t</div>\n\t\t\t<div class="modal-body">{{body}}</div>\n\t\t\t<div class="modal-footer">\n\t\t\t\t<button type="button" class="btn btn-default" ng-click="close()">{{button || "Close"}}</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n';function modalConstructor(n,r,i,o,a){var s,u,l,c=angular.element('<div class="modal-backdrop in"/>');function f(){s&&s.remove(),u&&u.$destroy(),l&&l.resolve(),c.remove(),a.off("keydown",f),r.removeClass("modal-open")}this.open=function(e){var t=e.context||{};return f(),l=o.defer(),(u=(e.$scope||n).$new()).close=f,a.on("keydown",f),u.header=lodash.template(e.header)(t),u.body=lodash.template(e.body)(t),u.button=lodash.template(e.button)(t),s=angular.element(template),r.addClass("modal-open"),r.prepend(c),r.prepend(s),i(s.contents())(u),u.$digest(),l.promise},this.close=f}modalConstructor.$inject=["$rootScope","$rootElement","$compile","$q","$document"];var module$11=angular.module("pi.modal",[]);function questController$1(o,e,a,s,u,l,t,c){var f,d,p=this,h={dflt:NaN,data:o.data};this.scope=o,this.stopper=new e,this.registerModel=function(r,e){e=lodash.defaults(e||{},h),d=e.data;var t=a(s.ngModel),n=d.hasOwnProperty("dflt")?d.dflt:e.dflt;o.model=r,f=t(o.$parent),lodash.isUndefined(f)?(f={},t.assign(o.$parent,f)):u({type:"warn",message:'This question has already been in use: "'+f.name+'"',context:f,tags:["question"]});d.name||u({type:"warn",message:"There is a question without a name! I'd tell you what it is, but it has no name!",tags:["question"],context:d});p.log=r.$modelValue=f,lodash.defaults(f,{name:d.name,response:n,serial:c()}),o.response=r.$viewValue=f.response,r.$formatters.push(function(e){return e.response}),r.$parsers.push(function(e){var t=p.stopper.now();return f.response=e,f.latency=t,f.pristineLatency||(f.pristineLatency=t),f}),o.$watch("response",function(e,t){lodash.isEqual(e,t)||(r.$setViewValue(e),l(d.onChange,{log:f,question:d}))}),o.$on("$destroy",function(){l(d.onDestroy,{log:f,question:d})}),d.correct&&(r.$parsers.push(i),d.response=i(this.log));function i(e){var t=e.response,n=d.correctValue;return lodash.isNumber(n)&&(n+=""),lodash.isNumber(t)&&(t+=""),lodash.isEqual(n,t)?r.$setValidity("correct",!0):r.$setValidity("correct",!1),e}l(d.onCreate,{log:f,question:d}),o.$evalAsync(function(){l(d.onLoad,{log:f,question:d})})},o.$on("quest:submit",function(e){e.preventDefault(),f.declined=void 0,f.submitLatency=p.stopper.now(),l(d.onSubmit,{log:f,question:d})}),o.$on("quest:decline",function(e){e.preventDefault(),f.declined=!0,f.submitLatency=p.stopper.now(),l(d.onDecline,{log:f,question:d})}),o.$on("quest:timeout",function(e){e.preventDefault(),f.timeout=!0,l(d.onTimeout,{log:f,question:d})})}function guidFactory(){var e=0;return function(){return e++}}module$11.service("piModal",modalConstructor),questController$1.$inject=["$scope","timerStopper","$parse","$attrs","piConsole","piInvoke","$rootScope","questGuid"];var template$1="<div piq-page></div>",jqLite=angular.element;function piQuestCtrl(r,e,t,n,i,o){var a,s=new t(r.script),u=e.global,l=e.current||{};this.task=s,this.timerSetup=function(e){var n=lodash.get(r,"script.settings.timer");if(!n)return;e.start(n),e.getScope().$on("timer-end",function(){var e=n.message;function t(){s.end()}e?(lodash.isString(e)&&(e={body:e}),lodash.defaults(e,{$context:a}),o.open(e).then(t)):t()}),r.$on("$destroy",lodash.bind(e.stop,e))},l.questions||(l.questions={}),a={global:u,current:l,questions:l.questions},lodash.extend(n,a),lodash.extend(i,a),s.next(),r.$on("quest:next",function(e,t){s.next(t),r.$emit("quest:newPage")}),r.$on("quest:prev",function(e,t){s.prev(t),r.$emit("quest:newPage")}),r.$on("quest:log",function(e,t,n){s.log(t,n,r.global)})}function directive(d,p,h,m){return{controller:piQuestCtrl,terminal:!0,replace:!0,template:"<div pi-timer></div>",require:["piQuest","piTimer"],link:function(r,i,e,t){var o,a,n,s=t[0],u=s.task,l=t[1];function c(){n&&(n.remove(),n=null),o&&(o.$destroy(),o=null),a&&(p.leave(a,function(){n=null}),n=a,a=null)}function f(){var e=u.current();if(e){var t=r.$new(),n=jqLite(template$1);(function(e,t){if(!t)return;var n=t.split(" ");lodash.each(n,function(e){h.has("."+e+"-animation")||m({type:"error",message:'Unknown animation type: "'+e+'"',tags:["page","animation"]})}),e.addClass(t)})(n,(t.page=e).animate),c(),a=d(n)(t),p.enter(a,i),(o=t).$emit("quest:updated")}else c()}s.timerSetup(l),r.$on("quest:refresh",function(){o.page=u.current()}),r.$on("quest:newPage",f),f()}}}piQuestCtrl.$inject=["$scope","$rootScope","QuestTask","templateDefaultContext","mixerDefaultContext","piModal"],directive.$inject=["$compile","$animate","$injector","piConsole"];var template$2='<div ng-form name="pageForm" pi-timer>\n\t<h3 ng-if="page.header" ng-bind-html="page.header" ng-style="page.headerStyle"></h3>\n\t<div pi-timer="page.timer"></div>\n\t<div ng-if="page.progressBar" class="text-center" ng-bind-html="page.progressBar"></div>\n\n\t<div ng-bind-html="page.text"></div>\n\t<ol ng-class="{\'list-unstyled\':!page.numbered}" start="{{page.numberStart}}">\n\t\t<li ng-repeat="quest in page.questions">\n\t\t\t<div quest-wrapper quest-data="quest" quest-current="current"></div>\n\t\t</li>\n\t</ol>\n\n\t<div pi-quest-validation="pageForm.$error.pageValidation" pi-post-submit="submitAttempt">{{page.pageValidationText || \'Invalid page\'}}</div>\n\n\t<div class="page-buttons">\n\t\t<button\n\t\t\tng-click="prev()"\n\t\t\tclass="btn page-prev"\n\t\t\tng-if="page.prev && page.$meta.number > 1"\n\t\t>{{page.prevText || "Go Back"}}</button>\n\n\t\t<button\n\t\t\tng-click="decline($event)"\n\t\t\tclass="btn page-decline"\n\t\t\tng-if="page.decline"\n\t\t>{{page.declineText || "Decline"}}</button>\n\n\t\t<button\n\t\t\tng-click="submit()"\n\t\t\tclass="btn page-submit"\n\t\t\tng-if="!page.noSubmit"\n\t\t>{{page.submitText || "Submit"}}</button>\n\t</div>\n</div>\n';function piqPageCtrl(i,e,o,a){var s=this;i.global=o.global,i.current=o.current,this.harvest=function(n){var r=i.current.questions;lodash.each(i.page.questions,function(e){if(e.name&&(n||e.lognow)){var t=r[e.name];t.$logged||(i.$emit("quest:log",t,s.log),t.$logged=!0)}})},i.submit=function(e){var t=i.pageForm.$valid;if(i.submitAttempt=!0,!t&&!0!==e)return!0;i.$broadcast("quest:submit"),s.proceed(),i.$emit("quest:next")},i.decline=function(e){var t=angular.element(e.target);"double"!==this.page.decline||t.hasClass("active")?(i.$broadcast("quest:decline"),s.proceed(),i.$emit("quest:next")):t.addClass("active")},i.prev=function(){s.proceed(),i.$emit("quest:prev")},this.proceed=function(){s.timer.stop(),s.harvest(i.page.lognow)},this.setup=function(e){var n=i.page;s.timer=e,s.log={name:n.name,startTime:+new Date},n.timer&&(e.start(n.timer),e.getScope().$on("timer-end",function(){var e,t=n.timer.message;s.log.timeout=!0,i.$broadcast("quest:timeout"),t?(e={pagesMeta:n.$meta,pagesData:n.data,global:o.global,current:o.current},lodash.isString(t)&&(t={body:t}),lodash.defaults(t,{$context:e,$scope:i}),a.open(t).then(r)):r()}));function r(){var e=n.timer.submitOnEnd||lodash.isUndefined(n.timer.submitOnEnd);e&&i.submit(!0)}},i.$watch("current.questions",function(){i.$emit("quest:refresh")},!0),i.$on("quest:submit:now",function(){i.submit()})}function directive$1(o){return{replace:!0,controller:piqPageCtrl,template:template$2,require:["piqPage","piTimer"],link:function(e,t,n,r){var i=e.page;o.scrollTo(0,0),r[0].setup(r[1]),lodash.isFunction(i.pageValidation)&&e.$watch(function(){e.pageForm.$setValidity("pageValidation",i.pageValidation(i,e.current))})}}}piqPageCtrl.$inject=["$scope","$timeout","$rootScope","piModal"],directive$1.$inject=["$window"];var template$3='<div class="form-group" ng-form="questForm">\n\t<label ng-hide="data.inline" for="{{data.name}}" ng-bind-html="data.stem" ng-style="data.stemCss"></label>\n\t<div ng-bind-html="data.description"></div>\n\t<div quest-data="data" ng-model="current.questions[data.name]" ng-style="{\'max-width\':data.maxWidth}"></div>\n\t<p class="help-block" ng-if="data.help" ng-bind-html="data.helpText"></p>\n</div>\n',PREFIX="quest";function capitaliseFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}function directive$2(o,a){return{replace:!0,template:template$3,priority:5,scope:{data:"=questData",current:"=questCurrent"},link:function(e,t){var n=e.data.type||"text",r=t.children().eq(2),i=PREFIX+capitaliseFirstLetter(n);if(!a.has(i+"Directive"))throw new Error('Unknown question type: "'+n+'"');i=lodash.kebabCase(i),r.attr(i,!0),o(r)(e)}}}directive$2.$inject=["$compile","$injector"];var textTemplate='<div ng-form ng-class="{\'form-inline\':data.inline}">\n\t<label ng-show="data.inline" for="{{data.name}}" ng-bind-html="data.stem" ng-style="data.stemCss"></label>\n\t<input\n\t \ttype="text"\n\t\tng-model="response"\n\t\tng-minlength="{{data.minLength || data.minlength}}"\n\t\tng-maxlength="{{data.maxlength}}"\n\t\tng-pattern="data.pattern | toRegex"\n\t\tng-required="{{data.required}}"\n\t\tclass="form-control"\n\t\tng-attr-style="width:{{data.width | dfltUnits}}"\n\n\t\tng-keydown="data.maxlengthLimit && maxlengthLimit($event)"\n\t\tng-keyup="data.maxlengthLimit && maxlengthLimit($event)"\n\t/>\n\t<div pi-quest-validation="form.$error.minlength">{{data.errorMsg.minLength || data.errorMsg.minlength || "Too short!"}}</div>\n\t<div pi-quest-validation="form.$error.maxlength">{{data.errorMsg.maxlength || "Too long!"}}</div>\n\t<div pi-quest-validation="form.$error.pattern">{{data.errorMsg.pattern || "wrong pattern!"}}</div>\n\t<div pi-quest-validation="form.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n\t<div pi-quest-validation="model.$error.correct">{{data.errorMsg.correct || "You must answer the correct answer!"}}</div>\n</div>',textareaTemplate='<div ng-form ng-class="{\'form-inline\':data.inline}">\n\t<label ng-show="data.inline" for="{{data.name}}" ng-bind-html="data.stem" ng-style="data.stemCss"></label>\n\t<textarea\n\t \ttype="text"\n\t\tng-model="response"\n\t\tng-minlength="{{data.minLength || data.minlength}}"\n\t\tng-maxlength="{{data.maxlength}}"\n\t\tng-pattern="data.pattern | toRegex"\n\t\tng-required="{{data.required}}"\n\t\tclass="form-control"\n\n\t\tng-attr-style="resize:none;width:{{data.columns? \'auto\' : data.width | dfltUnits}};"\n\t\tcols="{{data.columns}}"\n\t\trows="{{data.rows}}"\n\n\t\tng-keydown="data.maxlengthLimit && maxlengthLimit($event)"\n\t\tng-keyup="data.maxlengthLimit && maxlengthLimit($event)"\n\t/>\n\t<div pi-quest-validation="form.$error.minlength">{{data.errorMsg.minLength || data.errorMsg.minlength || "Too short!"}}</div>\n\t<div pi-quest-validation="form.$error.maxlength">{{data.errorMsg.maxlength || "Too long!"}}</div>\n\t<div pi-quest-validation="form.$error.pattern">{{data.errorMsg.pattern || "wrong pattern!"}}</div>\n\t<div pi-quest-validation="form.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n\t<div pi-quest-validation="model.$error.correct">{{data.errorMsg.correct || "You must answer the correct answer!"}}</div>\n</div>';function textDirective(){return{replace:!0,template:function(e,t){return"questText"in t?textTemplate:textareaTemplate},require:["form","ngModel"],controller:"questController",controllerAs:"ctrl",scope:{data:"=questData"},link:function(r,e,t,n){var i=n[0],o=n[1],a=r.ctrl,s=r.data;r.form=i,r.maxlengthLimit=function(e){var t=angular.element(e.target).val(),n=s.maxlength||t.length;r.response=t.slice(0,n)},a.registerModel(o,{dflt:""}),s.autoSubmit&&e.bind("keydown keypress",function(e){13===e.which&&(r.$apply(function(){r.$emit("quest:submit:now")}),e.preventDefault())})}}}var template$4='<div ng-form ng-class="{\'form-inline\':data.inline}">\n\t<label ng-show="data.inline" for="{{data.name}}" ng-bind-html="data.stem" ng-style="data.stemCss"></label>\n\t<input\n\t \ttype="number"\n\t\tng-model="response"\n\t\tng-required="{{data.required}}"\n\t\tclass="form-control"\n\t\tng-attr-style="width:{{data.width | dfltUnits}}"\n\t>\n\t<div pi-quest-validation="form.$error.number">{{data.errorMsg.number || "Must be a number!"}}</div>\n\t<div pi-quest-validation="form.$error.qstMin">{{data.errorMsg.min || "Too small!"}}</div>\n\t<div pi-quest-validation="form.$error.qstMax">{{data.errorMsg.max || "Too big!"}}</div>\n\t<div pi-quest-validation="form.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n\t<div pi-quest-validation="model.$error.correct">{{data.errorMsg.correct || "You must answer the correct answer!"}}</div>\n</div>',directive$3=function(){return{replace:!0,template:template$4,require:["form","ngModel","^?piqPage"],controller:"questController",controllerAs:"ctrl",scope:{data:"=questData"},link:function(n,e,t,r){var i=r[0],o=e.find("input").eq(0).controller("ngModel");n.form=i,n.ctrl.registerModel(r[1],{dflt:""}),n.data.autoSubmit&&e.bind("keydown keypress",function(e){13===e.which&&(n.$apply(function(){n.$emit("quest:submit:now")}),e.preventDefault())});var a=function(e){var t=parseFloat(n.data.min);return!isNaN(t)&&e<t?void o.$setValidity("qstMin",!1):(o.$setValidity("qstMin",!0),e)};o.$parsers.push(a),o.$formatters.push(a);var s=function(e){var t=parseFloat(n.data.max);return!isNaN(t)&&t<e?void o.$setValidity("qstMax",!1):(o.$setValidity("qstMax",!0),e)};o.$parsers.push(s),o.$formatters.push(s)}}};function selectMixerProvider(r,i){return function(e,n){var t=i(e);return t=lodash.map(t,function(e,t){return lodash.isPlainObject(e)||(e={text:e}),lodash.isUndefined(e.value)&&(e.value=n.numericValues?t+1:e.text),e}),n.reverse&&(t=lodash(t).reverse().value()),n.randomize&&(t=r(t)),lodash.each(t,function(e,t){e.order=t}),t}}selectMixerProvider.$inject=["randomizeShuffle","mixerRecursive"];var template$5='<div ng-form>\n\t<select\n\t\tng-model="response"\n\t\tng-options="answer.value as answer.text group by answer.group for answer in quest.answers"\n\t\tng-required="data.required"\n\t\tng-change="data.autoSubmit && autoSubmit($event)"\n\t\tclass="form-control"\n\t\t>\n\t\t<option value="">{{chooseText || "-- Choose an option --"}}</option>\n\t</select>\n\t<div pi-quest-validation="form.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n\t<div pi-quest-validation="model.$error.correct">{{data.errorMsg.correct || "You must answer the correct answer!"}}</div>\n</div>';function directive$4(a,s){return{replace:!0,template:template$5,require:["ngModel","form"],controller:"questController",controllerAs:"ctrl",scope:{data:"=questData"},link:function(e,t,n,r){var i=r[0],o=e.ctrl;e.form=r[1],o.registerModel(i,{dflt:NaN}),e.quest={answers:a(e.data.answers||[],e.data)},e.chooseText="chooseText"in e.data&&e.data.chooseText,e.autoSubmit=function(){s(function(){e.$emit("quest:submit:now")})}}}}directive$4.$inject=["questSelectMixer","$timeout"];var template$6='<div>\n\t<div ng-class="listClass" ng-style="listCss">\n\t\t\x3c!-- track by in the ng-repeat allows us to keep the repeated object clean so that angular doesn\'t add a $$hashkey property --\x3e\n\t\t\x3c!-- using interpolation within class, so that we can keep the style info separate within the directive --\x3e\n\t\t<a\n\t\t\ttabindex="-1"\n\t\t\tng-repeat="answer in quest.answers track by answer.order"\n\t\t\tng-model="$parent.responseObj"\n\t\t\tbtn-radio="answer"\n\t\t\tng-class="$parent.listItemClass"\n\t\t\tng-style="listItemCss"\n\t\t\tclass="{{ $parent.response == answer.value ? \'active\' : \'\' }}"\n\t\t\tuncheckable\n\t\t\tng-click="data.autoSubmit && autoSubmit($event)"\n\t\t\tng-bind-html="answer.text"\n\t\t\tunselectable="on"\n\t\t></a>\n\t</div>\n\t<div pi-quest-validation="model.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n\t<div pi-quest-validation="model.$error.correct">{{data.errorMsg.correct || "You must answer the correct answer!"}}</div>\n</div>';function directive$5(u,l,c){return{replace:!0,require:["ngModel"],controller:"questController",controllerAs:"ctrl",scope:{data:"=questData"},link:function(n,e,t,r){var i=r[0],o=n.ctrl,a=n.data;switch(e.html(template$6),c(e.contents())(n),o.registerModel(i,{dflt:NaN}),n.quest={answers:u(n.data.answers||[],n.data)},n.$watch("responseObj",function(e,t){e!==t&&(n.response=e&&e.value)}),n.data.required&&(i.$formatters.push(s),i.$parsers.unshift(s),s(n.response)),n.data.buttons?n.data.style="horizontal":"horizontal"==n.data.style&&(n.data.buttons=!0),n.listCss={},n.listItemCss={},a.style){case"horizontal":n.listClass="btn-group btn-group-justified btn-group-lg",n.listItemClass="btn btn-select";break;case"multiButtons":n.listClass="btn-toolbar",n.listItemClass="btn  btn-select",n.listCss.lineHeight=2.8;break;case"list":default:n.listClass="list-group",n.listItemClass="list-group-item"}function s(e){var t=i;return t.$isEmpty(e)?void t.$setValidity("required",!1):(t.$setValidity("required",!0),e)}a.minWidth&&(n.listItemCss.minWidth=a.minWidth),n.autoSubmit=function(e){n.data.autoSubmit&&(angular.element(e.currentTarget).hasClass(l.activeClass)&&n.$emit("quest:submit:now"))}}}}directive$5.$inject=["questSelectMixer","buttonConfig","$compile"];var template$7='<div>\n\t<div ng-class="listClass" ng-style="listCss">\n\t\t\x3c!-- track by in the ng-repeat allows us to keep the repeated object clean so that angular doesn\'t add a $$hashkey property --\x3e\n\t\t<a\n\t\t\thref="javascript:void(0);"\n\t\t\tng-repeat="answer in quest.answers track by answer.order"\n\t\t\tng-model="answer.chosen"\n\t\t\tbtn-checkbox\n\t\t\tng-class="$parent.listItemClass"\n\t\t\tng-style="listItemCss"\n\t\t\tclass="{{ answer.chosen ? \'active\' : \'\' }}"\n\t\t\tuncheckable\n\t\t\tng-bind-html="answer.text"\n\t\t\tunselectable="on"\n\t\t>\n\t\t</a>\n\t</div>\n\t<div pi-quest-validation="model.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n\t<div pi-quest-validation="model.$error.correct">{{data.errorMsg.correct || "You must answer the correct answer!"}}</div>\n</div>';function directive$6(u){return{replace:!0,template:template$7,require:["^?piqPage","ngModel"],controller:"questController",controllerAs:"ctrl",scope:{data:"=questData"},link:function(n,e,t,r){var i=n.ctrl,o=r[1],a=n.data;switch(i.registerModel(o,{dflt:[]}),o.$isEmpty=function(){return lodash.isEmpty(o.$viewValue)},n.quest={answers:u(n.data.answers||[],n.data)},lodash.each(n.quest.answers,function(e){~lodash.indexOf(n.response,e.value)&&(e.chosen=!0)}),n.data.buttons?n.data.style="horizontal":"horizontal"==n.data.style&&(n.data.buttons=!0),n.listCss={},n.listItemCss={},a.style){case"horizontal":n.listClass="btn-group btn-group-justified btn-group-lg",n.listItemClass="btn btn-select";break;case"multiButtons":n.listClass="btn-toolbar",n.listItemClass="btn  btn-select",n.listCss.lineHeight=2.8;break;case"list":default:n.listClass="list-group",n.listItemClass="list-group-item"}function s(e){return o.$setValidity("required",!o.$isEmpty(e)),e}a.minWidth&&(n.listItemCss.minWidth=a.minWidth),a.required&&(o.$parsers.unshift(s),s(o.$viewValue)),n.$watch("quest.answers",function(e,t){e!==t&&(n.response=lodash(e).filter(function(e){return e.chosen}).pluck("value").value())},!0)}}}directive$6.$inject=["questSelectMixer"];var atoa=function(e,t){return Array.prototype.slice.call(e,t)},si="function"==typeof setImmediate,tick;tick=si?function(e){setImmediate(e)}:"undefined"!=typeof process&&process.nextTick?process.nextTick:function(e){setTimeout(e,0)};var ticky=tick,debounce=function(e,t,n){e&&ticky(function(){e.apply(n||null,t||[])})},emitter=function(i,e){var o=e||{},a={};return void 0===i&&(i={}),i.on=function(e,t){return a[e]?a[e].push(t):a[e]=[t],i},i.once=function(e,t){return t._once=!0,i.on(e,t),i},i.off=function(e,t){var n=arguments.length;if(1===n)delete a[e];else if(0===n)a={};else{var r=a[e];if(!r)return i;r.splice(r.indexOf(t),1)}return i},i.emit=function(){var e=atoa(arguments);return i.emitterSnapshot(e.shift()).apply(this,e)},i.emitterSnapshot=function(r){var e=(a[r]||[]).slice(0);return function(){var t=atoa(arguments),n=this||i;if("error"===r&&!1!==o.throws&&!e.length)throw 1===t.length?t[0]:t;return e.forEach(function(e){o.async?debounce(e,t,n):e.apply(n,t),e._once&&i.off(r,e)}),i}},i},NativeCustomEvent=commonjsGlobal.CustomEvent;function useNative(){try{var e=new NativeCustomEvent("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}var customEvent=useNative()?NativeCustomEvent:"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n},eventmap=[],eventname="",ron=/^on/;for(eventname in commonjsGlobal)ron.test(eventname)&&eventmap.push(eventname.slice(2));var eventmap_1=eventmap,doc$1=commonjsGlobal.document,addEvent=addEventEasy,removeEvent=removeEventEasy,hardCache=[];commonjsGlobal.addEventListener||(addEvent=addEventHard,removeEvent=removeEventHard);var crossvent={add:addEvent,remove:removeEvent,fabricate:fabricateEvent};function addEventEasy(e,t,n,r){return e.addEventListener(t,n,r)}function addEventHard(e,t,n){return e.attachEvent("on"+t,wrap(e,t,n))}function removeEventEasy(e,t,n,r){return e.removeEventListener(t,n,r)}function removeEventHard(e,t,n){var r=unwrap(e,t,n);if(r)return e.detachEvent("on"+t,r)}function fabricateEvent(e,t,n){var r=-1===eventmap_1.indexOf(t)?new customEvent(t,{detail:n}):function(){var e;doc$1.createEvent?(e=doc$1.createEvent("Event")).initEvent(t,!0,!0):doc$1.createEventObject&&(e=doc$1.createEventObject());return e}();e.dispatchEvent?e.dispatchEvent(r):e.fireEvent("on"+t,r)}function wrapperFactory(n,e,r){return function(e){var t=e||commonjsGlobal.event;t.target=t.target||t.srcElement,t.preventDefault=t.preventDefault||function(){t.returnValue=!1},t.stopPropagation=t.stopPropagation||function(){t.cancelBubble=!0},t.which=t.which||t.keyCode,r.call(n,t)}}function wrap(e,t,n){var r=unwrap(e,t,n)||wrapperFactory(e,t,n);return hardCache.push({wrapper:r,element:e,type:t,fn:n}),r}function unwrap(e,t,n){var r=find(e,t,n);if(r){var i=hardCache[r].wrapper;return hardCache.splice(r,1),i}}function find(e,t,n){var r,i;for(r=0;r<hardCache.length;r++)if((i=hardCache[r]).element===e&&i.type===t&&i.fn===n)return r}var cache={},start="(?:^|\\s)",end="(?:\\s|$)";function lookupClass(e){var t=cache[e];return t?t.lastIndex=0:cache[e]=t=new RegExp(start+e+end,"g"),t}function addClass(e,t){var n=e.className;n.length?lookupClass(t).test(n)||(e.className+=" "+t):e.className=t}function rmClass(e,t){e.className=e.className.replace(lookupClass(t)," ").trim()}var classes={add:addClass,rm:rmClass},doc=document,documentElement=doc.documentElement;function dragula(e,t){var p,h,m,v,g,o,a,$,y,w,n;1===arguments.length&&!1===Array.isArray(e)&&(t=e,e=[]);var s,b=null,x=t||{};void 0===x.moves&&(x.moves=always),void 0===x.accepts&&(x.accepts=always),void 0===x.invalid&&(x.invalid=function(){return!1}),void 0===x.containers&&(x.containers=e||[]),void 0===x.isContainer&&(x.isContainer=never),void 0===x.copy&&(x.copy=!1),void 0===x.copySortSource&&(x.copySortSource=!1),void 0===x.revertOnSpill&&(x.revertOnSpill=!1),void 0===x.removeOnSpill&&(x.removeOnSpill=!1),void 0===x.direction&&(x.direction="vertical"),void 0===x.ignoreInputTextSelection&&(x.ignoreInputTextSelection=!0),void 0===x.mirrorContainer&&(x.mirrorContainer=doc.body);var S=emitter({containers:x.containers,start:function(e){var t=C(e);t&&E(t)},end:k,cancel:M,remove:P,destroy:function(){r(!0),_({})},canMove:function(e){return!!C(e)},dragging:!1});return!0===x.removeOnSpill&&S.on("over",function(e){classes.rm(e,"gu-hide")}).on("out",function(e){S.dragging&&classes.add(e,"gu-hide")}),r(),S;function u(e){return-1!==S.containers.indexOf(e)||x.isContainer(e)}function r(e){var t=e?"remove":"add";touchy(documentElement,t,"mousedown",f),touchy(documentElement,t,"mouseup",_)}function l(e){touchy(documentElement,e?"remove":"add","mousemove",d)}function c(e){var t=e?"remove":"add";crossvent[t](documentElement,"selectstart",i),crossvent[t](documentElement,"click",i)}function i(e){s&&e.preventDefault()}function f(e){if(o=e.clientX,a=e.clientY,!(1!==whichMouseButton(e)||e.metaKey||e.ctrlKey)){var t=e.target,n=C(t);n&&(s=n,l(),"mousedown"===e.type&&(isInput(t)?t.focus():e.preventDefault()))}}function d(e){if(s)if(0!==whichMouseButton(e)){if(void 0===e.clientX||e.clientX!==o||void 0===e.clientY||e.clientY!==a){if(x.ignoreInputTextSelection){var t=getCoord("clientX",e),n=getCoord("clientY",e);if(isInput(doc.elementFromPoint(t,n)))return}var r=s;l(!0),c(),k(),E(r);var i=getOffset(m);v=getCoord("pageX",e)-i.left,g=getCoord("pageY",e)-i.top,classes.add(w||m,"gu-transit"),function(){if(p)return;var e=m.getBoundingClientRect();(p=m.cloneNode(!0)).style.width=getRectWidth(e)+"px",p.style.height=getRectHeight(e)+"px",classes.rm(p,"gu-transit"),classes.add(p,"gu-mirror"),x.mirrorContainer.appendChild(p),touchy(documentElement,"add","mousemove",D),classes.add(x.mirrorContainer,"gu-unselectable"),S.emit("cloned",p,m,"mirror")}(),D(e)}}else _({})}function C(e){if(!(S.dragging&&p||u(e))){for(var t=e;getParent(e)&&!1===u(getParent(e));){if(x.invalid(e,t))return;if(!(e=getParent(e)))return}var n=getParent(e);if(n)if(!x.invalid(e,t))if(x.moves(e,n,t,nextEl(e)))return{item:e,source:n}}}function E(e){var t,n;t=e.item,n=e.source,("boolean"==typeof x.copy?x.copy:x.copy(t,n))&&(w=e.item.cloneNode(!0),S.emit("cloned",w,e.item,"copy")),h=e.source,m=e.item,$=y=nextEl(e.item),S.dragging=!0,S.emit("drag",m,h)}function k(){if(S.dragging){var e=w||m;A(e,getParent(e))}}function q(){l(!(s=!1)),c(!0)}function _(e){if(q(),S.dragging){var t=w||m,n=getCoord("clientX",e),r=getCoord("clientY",e),i=O(getElementBehindPoint(p,n,r),n,r);i&&(w&&x.copySortSource||!w||i!==h)?A(t,i):x.removeOnSpill?P():M()}}function A(e,t){var n=getParent(e);w&&x.copySortSource&&t===h&&n.removeChild(m),j(t)?S.emit("cancel",e,h,h):S.emit("drop",e,t,h,y),T()}function P(){if(S.dragging){var e=w||m,t=getParent(e);t&&t.removeChild(e),S.emit(w?"cancel":"remove",e,t,h),T()}}function M(e){if(S.dragging){var t=0<arguments.length?e:x.revertOnSpill,n=w||m,r=getParent(n),i=j(r);!1===i&&t&&(w?r&&r.removeChild(w):h.insertBefore(n,$)),i||t?S.emit("cancel",n,h,h):S.emit("drop",n,r,h,y),T()}}function T(){var e=w||m;q(),p&&(classes.rm(x.mirrorContainer,"gu-unselectable"),touchy(documentElement,"remove","mousemove",D),getParent(p).removeChild(p),p=null),e&&classes.rm(e,"gu-transit"),n&&clearTimeout(n),S.dragging=!1,b&&S.emit("out",e,b,h),S.emit("dragend",e),h=m=w=$=y=n=b=null}function j(e,t){var n;return n=void 0!==t?t:p?y:nextEl(w||m),e===h&&n===$}function O(n,r,i){for(var o=n;o&&!e();)o=getParent(o);return o;function e(){if(!1===u(o))return!1;var e=R(o,n),t=N(o,e,r,i);return!!j(o,t)||x.accepts(m,o,h,t)}}function D(e){if(p){e.preventDefault();var t=getCoord("clientX",e),n=getCoord("clientY",e),r=t-v,i=n-g;p.style.left=r+"px",p.style.top=i+"px";var o=w||m,a=getElementBehindPoint(p,t,n),s=O(a,t,n),u=null!==s&&s!==b;(u||null===s)&&(b&&d("out"),b=s,u&&d("over"));var l=getParent(o);if(s!==h||!w||x.copySortSource){var c,f=R(s,a);if(null!==f)c=N(s,f,t,n);else{if(!0!==x.revertOnSpill||w)return void(w&&l&&l.removeChild(o));c=$,s=h}(null===c&&u||c!==o&&c!==nextEl(o))&&(y=c,s.insertBefore(o,c),S.emit("shadow",o,s,h))}else l&&l.removeChild(o)}function d(e){S.emit(e,o,b,h)}}function R(e,t){for(var n=t;n!==e&&getParent(n)!==e;)n=getParent(n);return n===documentElement?null:n}function N(i,t,o,a){var s="horizontal"===x.direction;return t!==i?function(){var e=t.getBoundingClientRect();if(s)return n(o>e.left+getRectWidth(e)/2);return n(a>e.top+getRectHeight(e)/2)}():function(){var e,t,n,r=i.children.length;for(e=0;e<r;e++){if(t=i.children[e],n=t.getBoundingClientRect(),s&&n.left+n.width/2>o)return t;if(!s&&n.top+n.height/2>a)return t}return null}();function n(e){return e?nextEl(t):t}}}function touchy(e,t,n,r){commonjsGlobal.navigator.pointerEnabled?crossvent[t](e,{mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"}[n],r):commonjsGlobal.navigator.msPointerEnabled?crossvent[t](e,{mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"}[n],r):(crossvent[t](e,{mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"}[n],r),crossvent[t](e,n,r))}function whichMouseButton(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var t=e.button;return void 0!==t?1&t?1:2&t?3:4&t?2:0:void 0}function getOffset(e){var t=e.getBoundingClientRect();return{left:t.left+getScroll("scrollLeft","pageXOffset"),top:t.top+getScroll("scrollTop","pageYOffset")}}function getScroll(e,t){return void 0!==commonjsGlobal[t]?commonjsGlobal[t]:documentElement.clientHeight?documentElement[e]:doc.body[e]}function getElementBehindPoint(e,t,n){var r,i=e||{},o=i.className;return i.className+=" gu-hide",r=doc.elementFromPoint(t,n),i.className=o,r}function never(){return!1}function always(){return!0}function getRectWidth(e){return e.width||e.right-e.left}function getRectHeight(e){return e.height||e.bottom-e.top}function getParent(e){return e.parentNode===doc?null:e.parentNode}function isInput(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||isEditable(e)}function isEditable(e){return!!e&&("false"!==e.contentEditable&&("true"===e.contentEditable||isEditable(getParent(e))))}function nextEl(t){return t.nextElementSibling||function(){var e=t;for(;e=e.nextSibling,e&&1!==e.nodeType;);return e}()}function getEventHost(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function getCoord(e,t){var n=getEventHost(t),r={pageX:"clientX",pageY:"clientY"};return e in r&&!(e in n)&&r[e]in n&&(e=r[e]),n[e]}var dragula_1=dragula,template$8='<div>\n    <div class="list-group" dragula-container>\n        <a href="javascript:void(0)" class="list-group-item" ng-repeat="row in list track by row.id">\n            <div class="row">\n                <div class="col-xs-1">\n                    <select ng-init="setupWatch(this)" ng-model="selected" ng-change="$parent.move(row.order, selected, this)">\n                        <option ng-repeat="r in list" ng-selected="r.order === row.order" label="{{r.order+1}}" value="{{r.order}}">{{r.order+1}}</option>\n                    </select>\n                </div>\n                <div class="col-xs-11"> {{row.text}} </div>\n            </div>\n        </a>\n    </div>\n\t<div pi-quest-validation="model.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n\t<div pi-quest-validation="model.$error.correct">{{data.errorMsg.correct || "You must answer the correct answer!"}}</div>\n</div>\n';function directive$7(){return{replace:!0,require:["ngModel"],controller:"questController",controllerAs:"ctrl",template:template$8,scope:{data:"=questData"},link:function(n,t,e,r){var i=r[0],o=n.ctrl,a=n.data,s=lodash.isArray(a.list)&&a.list.length?lodash.range(1,a.list.length+1):[];o.registerModel(i,{dflt:lodash.get(a,"randomize",!0)?lodash.shuffle(s):s}),i.$isEmpty=function(e){return lodash.isEqual(e,lodash.range(1,c.length+1))};var u,l,c=n.list=o.log.response.map(function(e,t){return{order:t,id:e,text:a.list[e-1]}});n.$watchCollection("list",function(){n.response=lodash.pluck(c,"id")}),n.setupWatch=function(e){e.$watch("$parent.response",function(){e.$evalAsync("selected = row.order")})},n.reset=function(){c=n.list=lodash.sortBy(c,"id")},n.move=function(e,t){var n,r,i,o;i=t,o=(n=c)[r=e],n.splice(r,1),n.splice(i,0,o),c.forEach(function(e,t){e.order=t})};var f=dragula_1({isContainer:function(e){return e.hasAttribute("dragula-container")&&t[0].contains(e)}});function d(e,t){return Array.prototype.indexOf.call(angular.element(t).children(),e)}function p(e){var t=i;return t.$isEmpty(e)?void t.$setValidity("required",!1):(t.$setValidity("required",!0),e)}f.on("drag",function(e,t){u=d(e,t)}),f.on("drop",function(e,t){l=d(e,t),n.move(u,l),n.$digest()}),n.$on("$destroy",f.destroy),a.required&&(i.$formatters.push(p),i.$parsers.unshift(p),p(n.response))}}}directive$7.$inject=["$compile"];var grid='<div ng-form class="table-responsive" ng-class="{\'pi-page-submitted\':$parent.$parent.submitAttempt}">\n\t<table class="table table-hover">\n\t\t<colgroup>\n\t\t\t<col\n\t\t\t\tng-if="!data.rowStemHide"\n\t\t\t></col>\n\t\t\t<col\n\t\t\t\tng-repeat="column in columns"\n\t\t\t\tng-style="column.css"\n\t\t\t></col>\n\t\t</colgroup>\n\t\t<thead ng-if="!data.columnStemHide">\n\t\t\t<tr>\n\t\t\t\t<th\n\t\t\t\t\tng-style="allCss(data.columnStemCss,column.stemCss, data.rowStemCss)"\n\t\t\t\t\tng-if="!data.rowStemHide"\n\t\t\t\t></th>\n\t\t\t\t<th\n\t\t\t\t\tng-repeat="column in columns"\n\t\t\t\t\tng-bind-html="column.stem"\n\t\t\t\t\tng-style="allCss(data.columnStemCss,column.stemCss)"\n\t\t\t\t></th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr\n\t\t\t\tng-repeat="row in rows"\n\t\t\t\tquest-grid-row="row"\n\t\t\t\tquest-grid-data="data"\n\t\t\t\tng-model="$parent.$parent.current.questions[row.name]"\n\t\t\t\tng-required="{{data.required || row.required}}"\n\t\t\t></tr>\n\t\t</tbody>\n\t</table>\n\t<div pi-quest-validation="form.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n</div>';function gridDirective$1(l){return{replace:!0,template:grid,require:["ngModel","form"],controller:"questController",controllerAs:"ctrl",scope:{data:"=questData",current:"=questCurrent"},link:function(t,e,n,r){var i,o,a=r[0],s=t.ctrl,u=t.data;t.form=r[1],t.columns=(u.columns||[]).map(f),t.rows=(i=u.rows,o=u,lodash(i||[]).map(f).each(function(e,t){e.hasOwnProperty("name")||(e.name=o.name+function(e,t){var n=Math.abs(e),r=1+Math.floor(Math.log(n)/Math.LN10);if(t<=r)return e;var i=Math.pow(10,t-r).toString().substr(1);return e<0?"-"+i+n:i+n}(t+1,3))}).thru(o.shuffle?l:lodash.identity).value()),t.allCss=c,t.$watchCollection(function(){return lodash.pluck(t.rows,"$response")},function(e){t.response=lodash.reduce(e,function(e,t){return lodash.isFinite(t)?e+t:e},0)}),s.registerModel(a,{dflt:0})}};function c(){var e=lodash.toArray(arguments);return e.unshift({}),lodash.extend.apply(lodash,e)}function f(e){return lodash.isPlainObject(e)?e:{stem:e}}}gridDirective$1.$inject=["questShuffle"];var gridRow='<tr>\n\t<th\n\t\tscope="row"\n\t\tng-if="!data.rowStemHide"\n\t\tng-bind-html="row.stem"\n\t\tng-style="data.rowStemCss"\n\t></th>\n\t<td ng-repeat="column in columns">\n\t\t<div ng-switch="column.type">\n\t\t\t<button\n\t\t\t\tclass="btn btn-default"\n\t\t\t\tng-switch-when="checkbox"\n\t\t\t\tbtn-radio="row.reverse && !column.noReverse ? column.reverseValue : column.value"\n\t\t\t\tng-model="$parent.$parent.response"\n\t\t\t\tng-class="data.checkboxType"\n\t\t\t\tuncheckable\n\t\t\t></button>\n\t\t\t<div\n\t\t\t\tclass="text"\n\t\t\t\tng-switch-when="text"\n\t\t\t\tng-bind-html="row[column.textProperty]"\n\t\t\t></div>\n\t\t\t<div\n\t\t\t\tclass="grid-input input-group input-group-small"\n\t\t\t\tng-switch-when="input"\n                ng-init="response=\'\'"\n                title="insert your response"\n\t\t\t>\n                <span class="input-group-addon">\n                    <span class="glyphicon glyphicon-edit" ng-class="{active:$parent.$parent.response===response}"></span>\n                </span>\n                <input type="text" class="form-control" ng-model="response" ng-change="$parent.$parent.response = response">\n            </div>\n            <div ng-switch-when="dropdown" ng-init="response=\'\'"> \n                <select ng-model="response" ng-change="$parent.$parent.response = response" class="form-control">\n                    <option value="" ng-selected="response===undefined">----</option>\n                    <option ng-repeat="r in column.answers" ng-selected="r.value === $parent.$parent.response" value="{{r.value}}">{{r.text}}</option>\n                </select>\n            </div>\n\t\t</div>\n\t\t<div\n\t\t\tclass="cell-labels"\n\t\t\tng-if="data.cellLabels"\n\t\t\tng-bind-html="column.stem"\n\t\t></div>\n\t</td>\n</tr>\n';function gridRowDirective$1(){return{replace:!0,template:gridRow,require:["ngModel"],controller:"questController",controllerAs:"ctrl",scope:{row:"=questGridRow",data:"=questGridData"},link:function(n,e,t,r){var i=r[0],o=n.ctrl,a=n.columns=n.$parent.columns.map(function(e,t){return lodash.get(n,"row.overwrite["+t+"]")||e}).map(function(e){return e.hasOwnProperty("type")||(e.type="checkbox"),"dropdown"==e.type&&(lodash.isArray(e.answers)||(e.answers=[]),e.answers=e.answers.map(function(e,t){return lodash.isObject(e)||(e={text:e}),"value"in e||(e.value=t+1),e})),e});a.filter(function(e){return"text"!=e.type}).forEach(function(e,t){e.hasOwnProperty("value")||(e.value=t+1)}),a.filter(function(e){return!e.noReverse}).filter(function(e){return"text"!=e.type}).forEach(function(e,t,n){e.reverseValue=n[n.length-t-1].value}),n.model=i,n.$watch("response",function(e){n.row.$response=e}),o.registerModel(i,{data:n.row})}}}var multiGrid='<div ng-form class="table-responsive" ng-class="{\'pi-page-submitted\':$parent.$parent.submitAttempt}">\n\t<table class="table table-hover">\n\t\t<colgroup>\n\t\t\t<col\n\t\t\t\tng-if="!data.rowStemHide"\n\t\t\t></col>\n\t\t\t<col\n\t\t\t\tng-repeat="column in columns"\n\t\t\t\tng-style="column.css"\n\t\t\t></col>\n\t\t</colgroup>\n\t\t<thead ng-if="!data.columnStemHide">\n\t\t\t<tr>\n\t\t\t\t<th\n\t\t\t\t\tng-style="allCss(data.columnStemCss,column.stemCss, data.rowStemCss)"\n\t\t\t\t\tng-if="!data.rowStemHide"\n\t\t\t\t></th>\n\t\t\t\t<th\n\t\t\t\t\tng-repeat="column in columns"\n\t\t\t\t\tng-bind-html="column.stem"\n\t\t\t\t\tng-style="allCss(data.columnStemCss,column.stemCss)"\n\t\t\t\t></th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr\n\t\t\t\tng-repeat="row in rows"\n\t\t\t\tquest-multi-grid-row="row"\n\t\t\t\tquest-multi-grid-data="data"\n\t\t\t\tng-model="$parent.$parent.current.questions[row.name]"\n\t\t\t></tr>\n\t\t</tbody>\n\t</table>\n\t<div pi-quest-validation="form.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n\t<div pi-quest-validation="form.$error.pattern">{{data.errorMsg.pattern || "wrong pattern!"}}</div>\n</div>\n';function gridDirective$2(s){return{replace:!0,template:multiGrid,require:["ngModel","form"],controllerAs:"ctrl",scope:{data:"=questData",current:"=questCurrent"},link:function(e,t,n,r){var i,o,a=e.data;e.form=r[1],e.columns=(a.columns||[]).map(l),e.rows=(i=a.rows,o=a,lodash(i||[]).map(l).each(function(e,t){e.hasOwnProperty("name")||(e.name=o.name+function(e,t){var n=Math.abs(e),r=1+Math.floor(Math.log(n)/Math.LN10);if(t<=r)return e;var i=Math.pow(10,t-r).toString().substr(1);return e<0?"-"+i+n:i+n}(t+1,3))}).thru(o.shuffle?s:lodash.identity).value()),e.allCss=u}};function u(){var e=lodash.toArray(arguments);return e.unshift({}),lodash.extend.apply(lodash,e)}function l(e){return lodash.isPlainObject(e)?e:{stem:e}}}gridDirective$2.$inject=["questShuffle"];var multiGridRow='<tr>\n\t<th\n\t\tscope="row"\n\t\tng-if="!data.rowStemHide"\n\t\tng-bind-html="row.stem"\n\t\tng-style="data.rowStemCss"\n\t></th>\n\t<td ng-repeat="column in columns">\n\t\t<div ng-switch="column.type">\n\t\t\t<button\n\t\t\t\tclass="btn btn-default"\n\t\t\t\tng-switch-when="checkbox"\n\t\t\t\tbtn-checkbox\n                btn-checkbox-true="column.value || true"\n\t\t\t\tng-model="$parent.$parent.response[$index]"\n\t\t\t\tng-class="data.checkboxType"\n\t\t\t\tuncheckable\n\t\t\t></button>\n\t\t\t<div\n\t\t\t\tclass="text"\n\t\t\t\tng-switch-when="text"\n\t\t\t\tng-bind-html="row[column.textProperty]"\n\t\t\t></div>\n\t\t\t<div\n\t\t\t\tclass="grid-input input-group input-group-small"\n\t\t\t\tng-switch-when="input"\n                title="insert your response"\n\t\t\t>\n                <span class="input-group-addon glyphicon glyphicon-edit"></span>\n                <input type="text" class="form-control" ng-model="$parent.$parent.response[$index]" >\n            </div>\n            <div ng-switch-when="dropdown"> \n                <select ng-model="$parent.$parent.response[$index]" class="form-control" ng-options="r.value as r.text for r in column.answers">\n                    <option value="">{{column.chooseText || "-- Choose an option --"}}</option>\n                </select>\n            </div>\n\t\t</div>\n\t\t<div\n\t\t\tclass="cell-labels"\n\t\t\tng-if="data.cellLabels"\n\t\t\tng-bind-html="column.stem"\n\t\t></div>\n\t</td>\n</tr>\n';function gridRowDirective$2(){return{replace:!0,template:multiGridRow,require:["ngModel"],controller:"questController",controllerAs:"ctrl",scope:{row:"=questMultiGridRow",data:"=questMultiGridData"},link:function(i,e,t,n){var o=n[0],r=i.ctrl;function a(r){var e=i.columns.every(function(e,t){var n=r[t];if(!i.data.required&&!i.row.required&&!e.required)return!0;switch(e.type){case"text":return!0;case"input":return""!==n;case"dropdown":return!isNaN(n)&&null!==n;default:return n}});return o.$setValidity("required",e),r}i.model=o,i.columns=i.$parent.columns.map(function(e,t){return lodash.get(i,"row.overwrite["+t+"]",e)}).map(function(e){return e.hasOwnProperty("type")||(e.type="checkbox"),"dropdown"==e.type&&(lodash.isArray(e.answers)||(e.answers=[]),e.answers=e.answers.map(function(e,t){return lodash.isObject(e)||(e={text:e}),"value"in e||(e.value=t+1),e})),e}),r.registerModel(o,{data:i.row,dflt:(i.columns||[]).map(mapDefault)}),o.$parsers.unshift(a),o.$parsers.unshift(function(r){var e=i.columns.every(function(e,t){var n=r[t];if("input"!==e.type||!e.pattern)return!0;return!(!lodash.isNumber(n)&&!lodash.isString(n))&&new RegExp(e.pattern).test(n)});return o.$setValidity("pattern",e),r}),a(o.$viewValue),i.$watchCollection("response",function(e){o.$setViewValue(e.slice())})}}}function mapDefault(e){return"string"!=typeof e&&("text"===e.type?null:"input"===e.type?"":"dropdown"===e.type&&NaN)}var slider='<div ng-form>\n\t<div\n\t\tpi-slider\n\t\tng-model="sliderResponse"\n\t\tpi-slider-options="data"\n\t\tng-required="{{data.required}}"\n\t></div>\n\t<h4 ng-if="data.displayValue" class="text-center"><span class="label label-info">{{ sliderResponse | number }}</span></h4>\n\t<div pi-quest-validation="form.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n</div>\n';function sliderDirective$1(){return{replace:!0,template:slider,require:["form","ngModel"],controller:"questController",controllerAs:"ctrl",scope:{data:"=questData"},link:function(n,e,t,r){var i=r[0],o=r[1],a=n.ctrl,s=n.data;n.form=i,a.registerModel(o,{dflt:void 0}),n.sliderResponse=n.response;var u=n.$on("slider:change",function(e,t){n.$apply(function(){n.response=t}),s.autoSubmit&&n.$emit("quest:submit:now")});n.$on("quest:timeout",u)}}}var slider$1=slider$2();function slider$2(){var p="slider:change";function e(d){return{scope:{options:"=piSliderOptions"},replace:!0,require:"ngModel",template:['<div class="slider" ng-class="{\'slider-ticks\':options.showTicks}" pi-pointerdown="onSliderMouseDown($event)">','<div class="slider-label-left" ng-style="options.leftLabelCss">{{options.leftLabel}}</div>','<div class="slider-label-right" ng-style="options.rightLabelCss">{{options.rightLabel}}</div>','<div class="slider-container">','<div class="slider-bar">','<div class="slider-bar-highlight" ng-style="highlightStyle"></div>',"</div>",'<div class="slider-handle" pi-pointerdown="onHandleMousedown($event)" ng-style="handleStyle"></div>',"</div>",'<ul class="slider-pips" ng-if="!options.hidePips">','<li ng-repeat="i in getNumber(steps) track by $index" ng-style="{width: pipWidth + \'%\'}" ng-class="{last:$last}"></li>',"</ul>",'<ul class="slider-labels">','<li ng-repeat="label in labels track by $index" ng-style="{width: labelsWidth + \'%\'}" ng-class="{first:$first, last:$last}">{{label}}</li>',"</ul>","</div>"].join("\n"),link:function(o,a,e,s){var u,i=o.options||{};function l(e){s.$setViewValue(e),s.$render()}function c(e){return!o.steps||s.$isEmpty(e)?e:Math.round(e*o.steps)/o.steps}function f(e){var n,r;function i(e){h(e),e.preventDefault();var t=n+(e.pageX-r)/(a.prop("clientWidth")-u);t=Math.min(t,1),t=Math.max(t,0),o.$apply(function(){l(t)})}h(e),e.preventDefault(),e.stopPropagation(),r=e.pageX,n=s.$viewValue,d.on("mousemove touchmove",i),d.on("mouseup touchend",function e(t){t.preventDefault();d.off("mousemove touchmove",i);d.off("mouseup touchend",e);o.$emit(p,s.$modelValue)})}u=a[0].querySelector(".slider-handle").clientWidth,o.ngModel=s,o.min=i.min||0,o.max=i.max||o.min+100,o.range=o.max-o.min,o.steps=i.steps?i.steps-1:0,o.pipWidth=i.steps&&100/o.steps,o.labels=i.labels,o.labelsWidth=i.labels&&100/i.labels.length,s.$isEmpty=t,s.$render=function(){var e=c(s.$viewValue),t=!isNaN(e),n=t?"block":"none",r=t&&i.highlight?"block":"none";switch(i.highlightDirection){case"rtl":o.highlightStyle={left:100*e+"%",display:r};break;case"center":o.highlightStyle=.5<e?{left:"50%",width:100*(e-.5)+"%",display:r}:{right:"50%",width:100*(.5-e)+"%",display:r};break;default:o.highlightStyle={right:100-100*e+"%",display:r}}o.handleStyle={left:100*e+"%",display:n}},s.$formatters.push(function(e){if(s.$isEmpty(e))return NaN;return((e=Math.min(Math.max(e,o.min),o.max))-o.min)/o.range}),s.$parsers.push(function(e){return+(o.min+c(e)*o.range).toFixed(4)}),o.onHandleMousedown=f,o.onSliderMouseDown=function(e){h(e),e.preventDefault();var t=a.prop("clientWidth"),n=a[0].getBoundingClientRect().left,r=(e.pageX-n-u/2)/(t-u);r=Math.min(r,1),l(r=Math.max(r,0)),f(e)},o.getNumber=function(e){return new Array(e)}}}}return e.$inject=["$document","$sce"],e;function h(e){var t,n,r;null==e.pageX&&null!=e.clientX&&(n=(t=e.target.ownerDocument||document).documentElement,r=t.body,e.pageX=e.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0),e.pageY=e.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0)),null==e.pageX&&e.touches&&(e.pageX=e.touches[0].pageX,e.pageY=e.touches[0].pageY)}function t(e){return isNaN(parseFloat(e))||!isFinite(e)}}var EVENTNAME="touchstart mousedown",DIRECTIVENAME="piPointerdown";function piPointerdownDirective(n){return{compile:function(e,t){var r=n(t[DIRECTIVENAME],!0);return function(t,e){function n(e){t.$apply(function(){r(t,{$event:e})})}e.on(EVENTNAME,n),t.$on("$destroy",function(){e.off(EVENTNAME,n)})}}}}function toRegexFilter(n){return function(e){var t;if(lodash.isUndefined(e))return/(?:)/;{if(lodash.isRegExp(e)||lodash.isString(e))return new RegExp(e);throw t=new Error("Question pattern is not a valid regular expression"),n({tags:"text",type:"error",message:"pattern",error:t,context:e}),t}}}piPointerdownDirective.$inject=["$parse"],toRegexFilter.$inject=["piConsole"];var dfltUnitsFilter=function(){return dfltUnits};function dfltUnits(e,t){return e||0===e||"0"===e?isNumeric(e)?e+(lodash.isUndefined(t)?"px":String(t)):e:""}function isNumeric(e){return!lodash.isArray(e)&&0<=e-parseFloat(e)+1}var module$8=angular.module("questDirectives",[module$9.name,module$10.name,buttons.name,module$6.name,module$7.name,module$11.name]);module$8.controller("questController",questController$1),module$8.factory("questGuid",guidFactory),module$8.directive("piQuest",directive),module$8.directive("piqPage",directive$1),module$8.directive("questWrapper",directive$2),module$8.directive("questInfo",function(){return{}}),module$8.directive("questText",textDirective),module$8.directive("questTextarea",textDirective),module$8.directive("questTextNumber",directive$3),module$8.service("questSelectMixer",selectMixerProvider),module$8.directive("questDropdown",directive$4),module$8.directive("questSelectOne",directive$5),module$8.directive("questSelectMulti",directive$6),module$8.directive("questRank",directive$7),module$8.value("questShuffle",lodash.shuffle),module$8.directive("questGrid",gridDirective$1),module$8.directive("questGridRow",gridRowDirective$1),module$8.directive("questMultiGrid",gridDirective$2),module$8.directive("questMultiGridRow",gridRowDirective$2),module$8.directive("questSlider",sliderDirective$1),module$8.directive("piSlider",slider$1),module$8.directive("piPointerdown",piPointerdownDirective),module$8.config(["$sceProvider",function(e){e.enabled(!1)}]),module$8.directive("piQuestValidation",function(){return{replace:!0,transclude:!0,scope:{unvalid:"=piQuestValidation",postSubmit:"=piPostSubmit"},template:['<div class="alert alert-danger" role="alert" ng-show="unvalid && ($parent.$parent.$parent.submitAttempt || postSubmit)">','<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>',"<span ng-transclude></span>","</div>"].join("")}}),module$8.filter("toRegex",toRegexFilter),module$8.filter("dfltUnits",dfltUnitsFilter),module$8.directive("piqPage",function(){return{link:function(e,n){e.page.autoFocus&&setTimeout(function(){var e=n[0].querySelector("[quest-wrapper]"),t=e&&e.querySelector("input, textArea, select, button");t&&t.focus()})}}});var module$1=angular.module("piQuest",[module$8.name,module$2.name]);function directive$8(s,u,l,c){return{link:function(r,e){var t,i=r.script,n=r.newScope=r.$new(),o={global:u.global,current:u.current,task:i,tasksData:lodash.get(i,"data",{})};null==i.$template&&c({tags:"message",type:"error",message:"missing template for message",context:i});try{t=lodash.template(i.$template)(o)}catch(e){t=i.$template,c({tags:"message",type:"error",message:"failed to render template",error:e})}function a(e){var t=lodash.isArray(i.keys)?i.keys:[i.keys],n=lodash.map(t,function(e){return lodash.isString(e)?e.toUpperCase().charCodeAt(0):e});~lodash.indexOf(n,e.which)&&r.done()}lodash.extend(r,o),r.done=function(){n.$destroy(),e.empty(),r.$emit("message:done")},l.on("keydown",a),r.$on("$destroy",function(){l.off("keydown",a)}),e.html(t),s(e.contents())(n)}}}function directive$9(){return{link:function(e,t){t.on("click",function(){e.done()})}}}directive$8.$inject=["$compile","$rootScope","$document","piConsole"],directive$9.$inject=[];var module$12=angular.module("pi.message",[module$7.name]);function provider(){var n={};this.$get=taskActivateProvider,this.set=function(e,t){n[e]=t},this.get=function(e){return n[e]}}function taskActivateProvider(l,c,f){var d=this;return function(e,t,n,r){var i,o=l.defer(),a=c.global,s=e.$script,u=function(e,t){var n;if(lodash.isFunction(e)||lodash.isArray(e))return e;if(e&&lodash.isFunction(e.play))return(n=lodash.bind(e.play,e)).$inject=f.annotate(e.play),n;if(e&&lodash.isArray(e.play))return(n=lodash.bind(lodash.last(e.play),e)).$inject=f.annotate(e.play),n;if(t.type)return d.get(t.type);throw new Error('Activator function not found for the "'+t.type+'" task')}(s,e);return i=f.invoke(u,null,{done:lodash.bind(o.resolve,o),task:e,script:s,$element:t,$scope:n,global:a,logger:r}),lodash.isFunction(i)&&o.promise.finally(i),o}}function directive$10(v,g,$,y,w,b){return{scope:{task:"=piTask"},link:function(e,t){var n,r,i,o,a,s=e.task,u=s.$script||{},l=s.$name,c=e.$parent.settings||{},f=e.$parent.manager.logger,d=window.piGlobal;function p(e){var t=e.which||e.keyCode,n=(e.key||"").toUpperCase();82!=t&&"R"!=n||!e.ctrlKey||(m(e,"current"),e.preventDefault()),27==t&&$.one("keydown",h)}function h(e){var t=e.which||e.keyCode;37==t&&m(e,"prev"),39==t&&m(e,"next")}function m(e,t){e.preventDefault(),a={type:t,bustCache:!0},i.resolve()}s&&(c.skip&&!0===window.DEBUG&&($.on("keydown",p),e.$on("$destroy",function(){$.off("keydown",p),$.off("keydown",h)})),w.current=d.current=u.current||{},l&&(d[l]&&b({type:"warn",tags:["task"],message:'This taskName has already been in use: "'+l+'"'}),lodash.extend(w.current,d[l]||{}),y.piGlobal[l]=u.current),o=(i=v(s,t,e.$new(),f)).promise,n=g(s.canvas),o.finally(n),s.title&&(r=$[0].title,$[0].title=s.title,o.finally(function(){$[0].title=r})),o.finally(function(){e.$emit("task:done",a)}))}}}function createLog(e,t,n){var r=n.$name,i=n.type,o=cloneSet(lodash.get(t,"settings.logger",{}),lodash.camelCase("is-"+i),!0),a=e.createLog(r,o),s=e.createLog(r,cloneSet(o,"isSave",!0));return a.end(s.end),t._save=s,t._toSave&&(t._toSave.map(s),t._toSave.length=0),a}function cloneSet(e,t,n){return lodash.assign(lodash.set({},t,n),e)}function activateQuest$1(e,t,n,r,i,o,a){var s,u=createLog(a,i,o);i.name=o.$name,n.script=i,t.append("<div pi-quest></div>"),r(s=t.contents())(n),s.controller("piQuest").task.promise.finally(e);var l=s.controller("piQuest").task.$logs;return l.map(u),l.end.map(u.end),function(){s.scope().$destroy(),s.remove()}}function activateMessage$1(e,t,n,r,i){var o;return r.script=n,t.append("<div pi-message></div>"),i(o=t.contents())(r),r.$on("message:done",function(){e()}),function(){r.$destroy(),o.remove()}}function xhr(r){return new Promise(function(e,t){var n=new XMLHttpRequest;n.open(r.method||"POST",r.url,!0),n.setRequestHeader("Content-Type",r.contentType||"application/json; charset=UTF-8"),n.onreadystatechange=function(){4===n.readyState&&(200<=n.status&&n.status<400?e(n.responseText):t(new Error('Failed sending to: "'+r.url+'". '+n.statusText+" ("+n.status+")")))},n.send(r.body)})}module$12.directive("piMessage",directive$8),module$12.directive("piMessageDone",directive$9),taskActivateProvider.$inject=["$q","$rootScope","$injector"],directive$10.$inject=["taskActivate","managerCanvas","$document","$window","$rootScope","piConsole"],activateQuest$1.$inject=["done","$element","$scope","$compile","script","task","logger"],activateMessage$1.$inject=["done","$element","task","$scope","$compile"];var csvLogger={onRow:function(e,t,n,r){(r.csv||(r.csv=[])).push(lodash.assign({taskName:e},t))},onEnd:function(e,t,n){if("manager"==e)return n.logs},serialize:function(e,t){return toCsv(createMatrix(t))},send:function(t,n,r,i){return xhr({url:lodash.isString(r.postCsv)?r.postCsv:r.url,body:n}).catch(function(e){r.onError.apply(null,[e,t,n,r,i])})}};function createMatrix(e){var t,r=GetIndex(),n=e.map(function(e){var n=[];return lodash.forEach(e,function(e,t){n[r(t)]="object"==typeof e?JSON.stringify(e):e}),n}),i=r();return n.forEach((t=i.length,function(e){e.length=t})),[i].concat(n)}function GetIndex(){var t={taskName:0},n=1;return function(e){return arguments.length?e in t?t[e]:t[e]=n++:lodash.keys(t)}}var quotableRgx=/(\n|,|")/;function toCsv(e){return e.map(buildRow).join("\n")}function buildRow(e){return e.map(normalize).join(",")}function normalize(e){return quotableRgx.test(e)?'"'+e.replace(/"/g,'""')+'"':e}function postCsv(e,t,n){var r=n.ctx.logs;if(!r||!r.length)return e();var i=csvLogger.serialize("manager",r);csvLogger.send("manager",i,t).then(function(){r.length=0}).finally(e)}function activatePost$1(n,r,e,t,i,o){var a=t.defer(),s=i.global,u=r.path?lodash.get(s,r.path):r.data;return e.post(r.url,u,{timeout:a.promise}).then(n,function(e){var t=new Error('Post error("'+r.url+'"): '+e.statusText);throw n(),o({type:"error",error:t,message:"Post error",context:r}),t}),a.resolve}function activateRedirect$1(e,t,n){if(!lodash.result(t,"condition",!0))return e();n.deactivate(),location.href=t.url}function activatePIP$1(t,e,n,r,i,o){var a,s,u,l=createLog(o,r,n);return r.name=n.$name,.4<n.version?(e.append("<div pi-player></div>"),a=e.contents(),requirejs$1([n.baseUrl+"/dist/time.js"],function(e){(u=e(a[0],r)).onEnd(t),u.$messages.map(i),u.$logs.map(l),u.$logs.end.map(l.end)},function(e){throw i({type:"error",message:"Failed to load minno-time, please make sure that task.baseUrl is set correctly",error:e}),e}),function(){l.end(!0),a.remove(),u&&u.end()}):(s=requirejs$1.config({context:lodash.uniqueId(),baseUrl:n.baseUrl+"/dist/js",paths:{text:["//cdnjs.cloudflare.com/ajax/libs/require-text/2.0.3/text.min","../../bower_components/require-text/text"],jquery:["//cdnjs.cloudflare.com/ajax/libs/jquery/1.10.2/jquery.min","../../bower_components/jquery/dist/jquery.min"],underscore:["//cdnjs.cloudflare.com/ajax/libs/lodash.js/3.10.1/lodash.min","../../bower_components/lodash-compat/lodash.min"],backbone:["//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min","../../bower_components/backbone/backbone"]},deps:["jquery","backbone","underscore"]}),n.name&&(r.name=n.name),e.append("<div pi-player></div>"),(a=e.contents()).addClass("pi-spinner"),s(["activatePIP"],function(e){a.removeClass("pi-spinner"),e(r,t)}),function(){a.remove(),s(["app/task/main_view"],function(e){e.deferred.resolve(),e.destroy()})})}function log(){console.log.apply(console,arguments)}postCsv.$inject=["done","task","logger"],activatePost$1.$inject=["done","task","$http","$q","$rootScope","piConsole"],activateRedirect$1.$inject=["done","task","managerBeforeUnload"],activatePIP$1.$inject=["done","$element","task","script","piConsole","logger"],Date.now||(Date.now=function(){return(new Date).getTime()}),function(e){var t,n=["now","webkitNow","msNow","mozNow"];if(e.performance)for(var r=0;r<n.length;++r){var i=n[r];if(e.performance[i]){t=function(){return e.performance[i]()};break}}t||(t=Date.now),e.perfNow=t}(window),console.group||(console.group=log),console.groupCollapsed||(console.groupCollapsed=log),console.groupEnd||(console.groupEnd=log),console.table||(console.table=log),function(){for(var e=["webkit","moz"],t=0;t<e.length&&!window.requestAnimationFrame;++t){var n=e[t];window.requestAnimationFrame=window[n+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var r=0;window.requestAnimationFrame=function(e){var t=Date.now(),n=Math.max(r+16,t);return setTimeout(function(){e(r=n)},n-t)},window.cancelAnimationFrame=clearTimeout}}();var PromisePolyfill=function(e){if(!(this instanceof PromisePolyfill))throw new Error("Promise must be called with `new`");if("function"!=typeof e)throw new TypeError("executor must be a function");var o=this,a=[],s=[],i=t(a,!0),u=t(s,!1),l=o._instance={resolvers:a,rejectors:s},c="function"==typeof setImmediate?setImmediate:setTimeout;function t(r,i){return function t(n){var e;try{if(!i||null==n||"object"!=typeof n&&"function"!=typeof n||"function"!=typeof(e=n.then))c(function(){i||0!==r.length||console.error("Possible unhandled promise rejection:",n);for(var e=0;e<r.length;e++)r[e](n);a.length=0,s.length=0,l.state=i,l.retry=function(){t(n)}});else{if(n===o)throw new TypeError("Promise can't be resolved w/ itself");f(e.bind(n))}}catch(e){u(e)}}}function f(e){var n=0;function t(t){return function(e){0<n++||t(e)}}var r=t(u);try{e(t(i),r)}catch(e){r(e)}}f(e)};function styleInject(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}PromisePolyfill.prototype.then=function(e,t){var i,o,a=this._instance;function n(t,e,n,r){e.push(function(e){if("function"!=typeof t)n(e);else try{i(t(e))}catch(e){o&&o(e)}}),"function"==typeof a.retry&&r===a.state&&a.retry()}var r=new PromisePolyfill(function(e,t){i=e,o=t});return n(e,a.resolvers,i,!0),n(t,a.rejectors,o,!1),r},PromisePolyfill.prototype.catch=function(e){return this.then(null,e)},PromisePolyfill.resolve=function(t){return t instanceof PromisePolyfill?t:new PromisePolyfill(function(e){e(t)})},PromisePolyfill.reject=function(n){return new PromisePolyfill(function(e,t){t(n)})},PromisePolyfill.all=function(s){return new PromisePolyfill(function(n,r){var i=s.length,o=0,a=[];if(0===s.length)n([]);else for(var e=0;e<s.length;e++)!function(t){function e(e){o++,a[t]=e,o===i&&n(a)}null==s[t]||"object"!=typeof s[t]&&"function"!=typeof s[t]||"function"!=typeof s[t].then?e(s[t]):s[t].then(e,r)}(e)})},PromisePolyfill.race=function(r){return new PromisePolyfill(function(e,t){for(var n=0;n<r.length;n++)r[n].then(e,t)})},void 0===window.Promise&&(window.Promise=PromisePolyfill);var css=".minno-canvas{height:400px;width:500px;position:relative;border:5px solid #fff;margin:auto;margin-top:10px;-webkit-text-size-adjust:none;-webkit-touch-callout:none;-webkit-tap-highlight-color:transparent;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.minno-stimulus{position:absolute;text-align:center;overflow:hidden;visibility:hidden;width:fit-content}.minno-stimulus-visible{visibility:visible}.minno-stimulus-center-x{left:50%;transform:translateX(-50%)}.minno-stimulus-center-y{top:50%;transform:translateY(-50%)}.minno-stimulus-center-y.minno-stimulus-center-x{transform:translate(-50%,-50%)}.minno-progress{background-color:#20201f;border-radius:20px;padding:4px;position:relative;top:50%;width:80%;margin-left:10%;margin-top:-12px}.minno-progress-bar{background-color:#807b7a;width:0;height:16px;border-radius:10px}";styleInject(css);var glob=window.piGlobal||(window.piGlobal={});function global$3(){return glob}function go$1(e,t,n){var r=this.mixerSequence;switch(e){case"nextWhere":case"previousWhere":where("next",t,n,r);break;case"current":break;case"first":for(;r.prev(n),r.current(n););break;case"last":for(;r.next(n),r.current(n););r.prev();break;case"end":for(;r.next(n),r.current(n););break;case"next":r.next(n);break;default:throw new Error('Unknow destination "'+e+'" for goto.')}return this}function where(e,t,n,r){for(var i;r[e](),(i=r.current(n))&&!lodash.callback(t)(i.data););}function createDB$1(e){var t=new Database$2;if(t.createColl("trial"),t.createColl("stimulus"),t.createColl("media"),t.add("trial",e.trialSets||[]),t.add("stimulus",e.stimulusSets||[]),t.add("media",e.mediaSets||[]),!lodash.isArray(e.sequence))throw new Error("You must set a sequence array.");var n=t.sequence("trial",e.sequence);return n.go=go$1,t.currentSequence=n,t}function getSize$1(e){var t=window.getComputedStyle(e);return{height:parse$1(e.offsetHeight)-parse$1(t.borderTopWidth)-parse$1(t.borderBottomWidth),width:parse$1(e.offsetWidth)-parse$1(t.borderLeftWidth)-parse$1(t.borderRightWidth)}}function parse$1(e){return parseFloat(e,10)||0}function adjust_canvas(n,r){return lodash.throttle(function(e){"orientationchange"==e.type?setTimeout(t,500):t()},16);function t(){var e=getTargetSize(r,n),t=window.getComputedStyle(n);e.height-=parse(t.borderTopWidth)+parse(t.borderBottomWidth)+parse(t.marginTop),e.width-=parse(t.borderLeftWidth)+parse(t.borderRightWidth),n.style.width=e.width+"px",n.style.height=e.height+"px",n.style.fontSize=e.height*(r.textSize||3)/100+"px",window.scrollTo(0,1)}}function getProportions(e){if(!lodash.isPlainObject(e))return e||.8;if([e.height,e.width].every(lodash.isFinite))return e.height/e.width;throw new Error("The canvas proportions object`s height and a width properties must be numeric")}function getTargetSize(e,t){var n=getProportions(e.proportions);if(e.width)return{width:e.width,height:e.width*n};var r=window.document.documentElement,i=r.clientHeight,o=Math.min(e.maxWidth||1/0,r.clientWidth,getSize$1(t.parentNode).width);return n*o<i?{height:o*n,width:o}:{height:i,width:i/n}}function parse(e){return parseFloat(e,10)||0}function canvasContructor(r,e){var t;if(!lodash.isPlainObject(r))throw new Error("canvas(map): You must set a rule map for canvas to work properly");if(lodash.isUndefined(e))return lodash.noop;if(!lodash.isPlainObject(e))throw new Error("canvas(settings): canvas settings must be an object");return t=lodash.map(e,function(e,t){var n=r[t];if(n)return on(n.element,n.property,e);throw new Error("canvas("+t+"): unknow key in canvas object.")}),function(){lodash.forEach(t,function(e){e.call()})}}function on(e,t,n){var r=e.style[t];return e.style[t]=n,function(){e.style[t]=r}}var css_1=css$2;function css$2(e,t){var n,r=e.style;if(t)for(var i in t)r[(n=i,n.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()}))]=t[i]}function setupCanvas(e,t){t||(t={});var n=stream();if(!lodash.isElement(e))throw new Error("Minno-time: canvas is not a DOM element");e.classList.add("minno-canvas");var r=canvasContructor({background:{element:document.body,property:"backgroundColor"},canvasBackground:{element:e,property:"backgroundColor"},borderColor:{element:e,property:"borderColor"},borderWidth:{element:e,property:"borderWidth"}},lodash.pick(t,["background","canvasBackground","borderColor","borderWidth"]));return t.css&&css_1(e,t.css),n.map(adjust_canvas(e,t)),n({}),window.addEventListener("orientationchange",n),window.addEventListener("resize",n),n.end.map(function(){e.classList.remove("minno-canvas")}).map(function(){window.removeEventListener("orientationchange",n),window.removeEventListener("resize",n)}).map(r),n}function setup$1(e,t){var n=setupCanvas(e,lodash.get(t,"settings.canvas",{})),r=createDB$1(t);return setupVars(t),{db:r,$resize:n,canvas:e,script:t,settings:t.settings||{}}}function setupVars(e){var t=global$3(global$3()),n=e.name||"anonymous minno-time",r=e.current?e.current:{};r.logs||(r.logs=[]),t[n]=t.current=r}var srcStack=[],defStack=[],stackDone=0,getText=lodash.memoize(getXhr),loader={load:load,all:function(){return Promise.all(defStack)},progress:function(){return defStack.length?stackDone/defStack.length:1}};function load(t,e){if(-1!==srcStack.indexOf(t))return!1;var n="template"==e?getText(t):getImage(t);return n.then(function(){stackDone++}).then(function(){loader.onload&&loader.onload(t)}).catch(function(e){loader.onerror&&loader.onerror(e,t)}),defStack.push(n),srcStack.push(t),n}function getImage(r){return new Promise(function(e,t){var n=document.createElement("img");n.onload=function(){e(n)},n.onerror=function(){t(new Error("Image not found: "+r))},n.src=r})}function getXhr(r){return new Promise(function(e,t){var n=new XMLHttpRequest;n.open("GET",r,!0),n.onreadystatechange=function(){4===this.readyState&&(200<=this.status&&this.status<400?e(this.responseText):t(new Error("Template not found:"+r)))},n.send()})}function buildUrl(e,t,n){return"image"==n&&/^data:image/.test(t)?t:(lodash.isObject(e)&&(e=e[n]),e?"/"!=e[e.length-1]&&(e+="/"):e="",e+t)}function preloadScript(e,t){return getScriptMedia(e).forEach(function(e){lodash.isUndefined(e.image)||loader.load(buildUrl(t,e.image,"image"),"image");lodash.isUndefined(e.template)||loader.load(buildUrl(t,e.template,"template"),"template")}),loader}function getScriptMedia(e){var t=e.mediaSets,n=lodash.map(e.stimulusSets,getStimMedia),r=lodash.map(e.trialSets,getTrialMedia),i=lodash.filter(e.sequence,notMixer).map(getTrialMedia);return lodash.flattenDeep([t,n,r,i]).filter(notUndefined)}function getTrialMedia(e){return[lodash.map(e.input,function(e){return e.element}),lodash.map(e.stimuli,getStimMedia),lodash.map(e.layout,getStimMedia)]}function getStimMedia(e){return e.media}function notMixer(e){return!e.mixer}function notUndefined(e){return!lodash.isUndefined(e)}var fastdom=createCommonjsModule(function(u){!function(e){var i=function(){},t=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||function(e){return setTimeout(e,16)};function n(){this.reads=[],this.writes=[],this.raf=t.bind(e)}function o(e){e.scheduled||(e.scheduled=!0,e.raf(function(e){var t,n=e.writes,r=e.reads;try{i("flushing reads",r.length),a(r),i("flushing writes",n.length),a(n)}catch(e){t=e}e.scheduled=!1,(r.length||n.length)&&o(e);if(t){if(i("task errored",t.message),!e.catch)throw t;e.catch(t)}}.bind(null,e)))}function a(e){for(var t;t=e.shift();)t()}function r(e,t){var n=e.indexOf(t);return!!~n&&!!e.splice(n,1)}n.prototype={constructor:n,measure:function(e,t){var n=t?e.bind(t):e;return this.reads.push(n),o(this),n},mutate:function(e,t){var n=t?e.bind(t):e;return this.writes.push(n),o(this),n},clear:function(e){return r(this.reads,e)||r(this.writes,e)},extend:function(e){if("object"!=typeof e)throw new Error("expected object");var t=Object.create(this);return function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}(t,e),t.fastdom=this,t.initialize&&t.initialize(),t},catch:null};var s=e.fastdom=e.fastdom||new n;u.exports=s}("undefined"!=typeof window?window:commonjsGlobal)});function preloadPhase$1(e,t,n){var r=preloadScript(t,t.settings.base_url);if(1==r.progress())return Promise.resolve().then(o);e.innerHTML='<div class="minno-progress"><div class="minno-progress-bar"></div></div>';var i=e.getElementsByClassName("minno-progress-bar")[0].style;return i.width=r.progress()+"%",r.onload=function(){fastdom.mutate(function(){i.width=100*r.progress()+"%"})},r.onerror=function(e,t){n({type:"error",message:"Failed to preload",error:e,context:t})},r.all().then(o).catch(function(e){throw new Error("loading resource failed, do something about it! (you can start by checking the error log, you are probably reffering to the wrong url - "+e+")")});function o(){for(;e.firstChild;)e.removeChild(e.firstChild)}}function mouseEvents$1(e,n,t){var r=stream(),i=n.element;return i&&(css_1(i,n.css),fastdom.mutate(function(){t.appendChild(i)})),t.addEventListener(e,function(e){var t=e.target;return i&&t===i?r(e):i||t.getAttribute("data-handle")!==n.stimHandle?void 0:r(e)}),r.end.map(function(){i&&t.removeChild(i);t.removeEventListener(e,r)}),r}var keyDownArr=[];function keypressed$1(e){var t=stream(),n=(Array.isArray(e.key)?e.key:[e.key]).map(function(e){return"string"==typeof e?e.toUpperCase().charCodeAt(0):e});return document.addEventListener("keydown",r),t.end.map(function(){document.removeEventListener("keydown",r)}),t;function r(e){keyDownArr[e.which]||-1===n.indexOf(e.which)||(e.preventDefault(),keyDownArr[e.which]=!0,t(e))}}function keyup$1(e){var t=stream(),n=(Array.isArray(e.key)?e.key:[e.key]).map(function(e){return"string"==typeof e?e.toUpperCase().charCodeAt(0):e});return document.addEventListener("keyup",function(e){if(-1===n.indexOf(e.which))return;return e.preventDefault(),t(e)}),t.end.map(function(){document.removeEventListener("keyup",t)}),t}function simpleRandomize(e,t){if(lodash.isArray(e))return e[Math.floor(Math.random()*e.length)];if(lodash.isFunction(e))return e.call(t);if(lodash.isPlainObject(e)){if(!lodash.isNumber(e.min)||!lodash.isNumber(e.max)||e.min>e.max)throw new Error("randomization objects need both a max and a minimum property, also max has to be larger than min");return e.min+(e.max-e.min)*Math.random()}return e}function timeout$1(e){var t,n=stream(),r=simpleRandomize(e.duration)||0;return n.end.map(function(){clearTimeout(t)}),r?setTimeout(n.bind(null,{}),r):n({}),n}function inputBinder(e,t){var n=e.on;switch(n){case"keypressed":return keypressed$1(e);case"keyup":return keyup$1(e);case"click":case"mousedown":return mouseEvents$1("mousedown",e,t);case"mouseup":return mouseEvents$1("mouseup",e,t);case"mouseenter":return mouseEvents$1("mouseenter",e,t);case"mouseleave":return mouseEvents$1("mouseleave",e,t);case"timeout":return timeout$1(e);case"enter":return keypressed$1(lodash.assign({key:13},e));case"space":return keypressed$1(lodash.assign({key:32},e));case"esc":return keypressed$1(lodash.assign({key:27},e));case"leftTouch":return e.element=r(e.css,{position:"absolute",left:0,width:"30%",height:"100%",background:"#00FF00",opacity:.3}),mouseEvents$1("mousedown",e,t);case"rightTouch":return e.element=r(e.css,{position:"absolute",right:0,width:"30%",height:"100%",background:"#00FF00",opacity:.3}),mouseEvents$1("mousedown",e,t);case"topTouch":return e.element=r(e.css,{position:"absolute",top:0,width:"100%",height:"30%",background:"#00FF00",opacity:.3}),mouseEvents$1("mousedown",e,t);case"bottomTouch":return e.element=r(e.css,{position:"absolute",bottom:0,width:"100%",height:"30%",background:"#00FF00",opacity:.3}),mouseEvents$1("mousedown",e,t);default:throw new Error('You have an input element with an unrecognized "on" property: '+n)}function r(e,t){var n=document.createElement("div");return css_1(n,t),css_1(n,e),n}}function createListener$1(e,t){var n=getListener(e,t);if(!isStream(n))throw new Error("Input functions must return valid streams: "+logObj(e));return"handle"in e&&(n.handle=e.handle),n}function getListener(e,t){var n;if(lodash.isFunction(e))return e(e,t,stream);if(lodash.isPlainObject(e)){if(lodash.isString(e.on))return inputBinder(e,t,stream);lodash.isFunction(e.on)&&(n=e.on(e,t,stream)),lodash.isFunction(e.off)&&n.end.map(e.off)}throw new Error("Input must only contain objects and functions, do you have an undefined value?")}function logObj(e){return lodash.isFunction(e)?e.toString():JSON.stringify(e)}function isStream(e){return e._state}document.addEventListener("keyup",function(e){keyDownArr[e.which]=!1});var now=window.performance.now?window.performance.now.bind(window.performance):Date.now.bind(Date);function interfaceFn(n,r){var i=[],o=0;return{add:function(e){if(!e)throw new Error("Missing input element. Could not add input listener");var t=createListener$1(e,r);t.map(function(e){return{handle:t.handle,event:e,timestamp:+new Date,latency:now()-o}}).map(n),i.push(t)},remove:function(e){for(var t=i.length-1;0<=t;t--){var n=i[t];n.handle===e&&(n.end(!0),i.splice(t,1))}},removeAll:function(){i.forEach(function(e){e.end(!0)}),i.length=0},resetTimer:function(){o=now()}}}function getMedia$1(n){var r,e=n.html||n.inlineTemplate||n.template;return lodash.isFunction(n)?customMedia(n):(lodash.isString(n)&&(n={word:n}),n.word?((r=document.createElement("div")).textContent=n.word,Promise.resolve(r)):e?((r=document.createElement("div")).innerHTML=e,Promise.resolve(r)):n.image?new Promise(function(e,t){(r=document.createElement("img")).onload=function(){e(r)},r.onerror=function(){t(new Error("Image not found: "+r.src))},r.src=n.image}):n.jquery?Promise.reject(new Error("Jquery is no longer supported in minno-time")):Promise.reject(new Error("Unrecognized media type")))}function customMedia(e){var t,n=e();return(t=n)&&lodash.isFunction(t.then)?n.then(function(e){return lodash.isElement(e)?e:Promise.reject("Custom media must resolve with an element")}):Promise.reject(new Error("Custom media must return a promise"))}function setSize$1(e,t){var n=e.style,r=t.size||{};return r.font_size&&(n.fontSize=r.font_size),isSet("height",r)&&!isWordMedia(t.media)&&(n.height=r.height+"%"),isSet("width",r)&&(n.width=r.width+"%"),e}function isSet(e,t){return e in t}function isWordMedia(e){return lodash.isString(e)||lodash.isString(e.word)}var YCLASS="minno-stimulus-center-y",XCLASS="minno-stimulus-center-x";function setPlace$1(n,e){var r=e.location||{};("center"==r.top||"center"==r.bottom||void 0===r.top&&void 0===r.bottom)&&n.classList.add(YCLASS),("center"==r.left||"center"==r.right||void 0===r.left&&void 0===r.right)&&n.classList.add(XCLASS),["top","bottom","left","right"].forEach(function(e){t=r[e],isNaN(+t)||(n.style[e]=r[e]+"%");var t})}function fixIE(r,e){var i=r.style,o=r.classList.contains(XCLASS),a=r.classList.contains(YCLASS);if(!o&&!a)return e(r);fastdom.measure(function(){var e=window.getComputedStyle(r),t=parseFloat(e.width),n=parseFloat(e.height);fastdom.mutate(function(){i.transform="none",o&&(i.marginLeft="-"+t/2+"px"),a&&(i.marginTop="-"+n/2+"px")})})}function Stimulus$1(e,t,n){var r={el:null,source:e,trial:t,canvas:n,init:init,show:show,hide:hide,name:name,mediaName:mediaName,destroy:destroy$1};return r.data=e.data||{},r.handle=r.data.handle=r.data.handle||e.handle||e.set,r}function init(){var t=this.source,n=this.trial.$messages;if(!this.source.media)throw new Error("Media object not defined for "+this.name());return getMedia$1(this.source.media).then(setupElement.bind(this,this.canvas),function(e){throw n({type:"error",message:"trial.stimulus error",error:e,context:t}),e})}function setupElement(t,n){var r=this;return this.el=n,new Promise(function(e){fastdom.mutate(function(){n.classList.add("minno-stimulus"),n.setAttribute("data-handle",r.handle),setSize$1(n,r.source),setPlace$1(n,r.source),css_1(n,r.source.css||{}),r.source.isLayout&&n.classList.add("minno-stimulus-visible"),t.appendChild(n),document.documentMode?fixIE(n,e):e(n)})})}function show(){var e=this.el;if(!e)throw new Error("A stimulus can not be shown before init is called");fastdom.mutate(function(){e.classList.add("minno-stimulus-visible")})}function hide(){var e=this.el;if(!e)throw new Error("A stimulus can not be hidden before init is called");fastdom.mutate(function(){e.classList.remove("minno-stimulus-visible")})}function destroy$1(){var e=this.el,t=this.canvas;fastdom.mutate(function(){t.removeChild(e)})}function name(){var e=this.source;return e.alias?e.alias:this.data.alias?this.data.alias:e.inherit&&e.inherit.set?e.inherit.set:this.handle?this.handle:void 0}function mediaName(e){var t=this.source.media,n=e&&e.fullpath;if(t.alias)return t.alias;for(var r in t){if(contains$1(["image","template"],r))return n?t[r]:t[r].replace(/^.*[\\/]/,"");if(contains$1(["word","html","inlineTemplate"],r)&&t[r])return t[r]}}function contains$1(e,t){return-1!=e.indexOf(t)}function stimCollection(t,n){validateStimuli("stimuli",t._source),validateStimuli("layout",t._source);var e=t._source,r=lodash.map(e.stimuli,a),i=lodash.map(e.layout,function(e){return e.isLayout=!0,e}).map(a),o=Promise.all(r.concat(i).map(function(e){return e.init()}));return{canvas:n,stimuli:r,layout:i,ready:o,getStimlist:getStimlist,getMedialist:getMedialist,destroy:destroy};function a(e){return Stimulus$1(e,t,n)}}function getStimlist(){return this.stimuli.filter(function(e){return!e.source.nolog}).map(function(e,t){return e.name()||"stim"+t})}function getMedialist(n){return this.stimuli.filter(function(e){return!e.source.nolog}).map(function(e,t){return e.mediaName(n)||"media"+t})}function destroy(){this.stimuli.concat(this.layout).forEach(function(e){e.destroy()})}function validateStimuli(e,t){var n=t[e];if(n){if(!Array.isArray(n))throw new Error(e+" must be an array");if(!n.every(function(e){return"media"in e}))throw new Error("Each "+e+" stimulus must have a media property")}}var global$4=global$3(),conditionHash={begin:begin,inputEquals:inputEquals,inputEqualsTrial:inputEqualsTrial,inputEqualsStim:inputEqualsStim,trialEquals:trialEquals,inputEqualsGlobal:inputEqualsGlobal,globalEquals:globalEquals,globalEqualsTrial:globalEqualsTrial,globalEqualsStim:globalEqualsStim,currentEquals:currentEquals,currentEqualsTrial:currentEqualsTrial,currentEqualsStim:currentEqualsStim,inputEqualsCurrent:inputEqualsCurrent,fn:fn,custom:custom};function getConditonFn(e){if(lodash.isFunction(e))return e;if(lodash.isFunction(conditionHash[e.type]))return conditionHash[e.type];throw new Error("Unknown condition type: "+JSON.stringify(e))}function begin(e){return"begin"===e.type}function inputEquals(e,t){return-1!==(Array.isArray(t.value)?t.value:[t.value]).indexOf(e.handle)}function inputEqualsTrial(e,t,n){return e.handle===n.data[t.property]}function inputEqualsStim(e,t,n){var r={};return t.handle&&(r.handle=t.handle),r[t.property]=e.handle,hasData(r,n)}function trialEquals(e,t,n){if(lodash.isUndefined(t.property)||lodash.isUndefined(t.value))throw new Error('trialEquals requires both "property" and "value" to be defined');return t.value===n.data[t.property]}function inputEqualsGlobal(e,t){if(lodash.isUndefined(t.property))throw new Error('inputEqualsGlobal requires "property" to be defined');return e.handle===global$4[t.property]}function globalEquals(e,t){if(void 0===t.property||void 0===t.value)throw new Error('globalEquals requires both "property" and "value" to be defined');return t.value===global$4[t.property]}function globalEqualsTrial(e,t,n){if(void 0===t.globalProp||void 0===t.trialProp)throw new Error('globalEqualsTrial requires both "globalProp" and "trialProp" to be defined');return global$4[t.globalProp]!==n.data[t.trialProp]}function globalEqualsStim(e,t,n){if(void 0===t.globalProp||void 0===t.stimProp)throw new Error('globalEqualsStim requires both "globalProp" and "stimProp" to be defined');var r={};return t.handle&&(r.handle=t.handle),r[t.stimProp]=global$4[t.globalProp],hasData(r,n)}function inputEqualsCurrent(e,t){var n=global$4.current;if(void 0===t.property)throw new Error('inputEqualsCurrent requires "property" to be defined');return e.handle===n[t.property]}function currentEquals(e,t){var n=global$4.current;if(void 0===t.property||void 0===t.value)throw new Error('currentEquals requires both "property" and "value" to be defined');return t.value!==n[t.property]}function currentEqualsTrial(e,t,n){var r=global$4.current;if(void 0===t.currentProp||void 0===t.trialProp)throw new Error('currentEqualsTrial requires both "currentProp" and "trialProp" to be defined');return r[t.currentProp]===n.data[t.trialProp]}function currentEqualsStim(e,t,n){var r=global$4.current;if(void 0===t.currentProp||void 0===t.stimProp)throw new Error('currentEqualsStim requires both "currentProp" and "stimProp" to be defined');var i={};return t.handle&&(i.handle=t.handle),i[t.stimProp]=r[t.currentProp],hasData(i,n)}function fn(e,t,n){return t.value.apply(n,[t,e,n])}function custom(e,t,n){return t.fn.apply(null,[t,e,n])}function hasData(r,e){return e.stimulusCollection.stimuli.some(function(e){var t=e.data;for(var n in r)if(r[n]!==t[n])return!1;return!0})}function conditionsEvaluate(e,t,n){return e=Array.isArray(e)?e:[e],("begin"!=t.type||!e.every(function(e){return"begin"!=e.type}))&&e.every(function(e){return getConditonFn(e)(t,e,n)})}var actions={showStim:function(e,t,n){var r=e.handle||e;n.stimulusCollection.stimuli.forEach(function(e){"All"!=r&&e.handle!=r||e.show()})},hideStim:function(e,t,n){var r=e.handle||e;n.stimulusCollection.stimuli.forEach(function(e){"All"!=r&&e.handle!=r||e.hide()})},setStimAttr:function(e,t,n){var r=e.handle,i=e.setter;n.stimulusCollection.stimuli.forEach(function(e){"All"!=r&&e.handle!=r||(lodash.isFunction(i)?i.apply(e):lodash.extend(e.data,i))})},setTrialAttr:function(e,t,n){var r=e.setter;if(void 0===r)throw new Error("The setTrialAttr action requires a setter property");lodash.isFunction(r)?r.apply(n,[n.data,t]):lodash.extend(n.data,r)},setInput:function(e,t,n){if(void 0===e.input)throw new Error("The setInput action requires an input property");n.input.add(e.input)},trigger:function(e,t,n){if(void 0===e.handle)throw new Error("The trigger action requires a handle property");n.input.add({handle:e.handle,on:"timeout",duration:+e.duration||0})},removeInput:function(e,t,n){var r=n.input,i=e.handle;if(void 0===i)throw new Error("The removeInput action requires a handle property");"All"==i||lodash.include(i,"All")?r.removeAll():r.remove(i)},goto:function(e,t,n){n._next=[e.destination,e.properties]},endTrial:function(){},resetTimer:function(e,t,n){function r(){t.latency=0,n.input.resetTimer()}e.immidiate?r():fastdom.mutate(r)},log:function(e,t,n){n.$logs(arguments)},setGlobalAttr:function(e){switch(typeof e.setter){case"function":e.setter.apply(null,[global$3(),e]);break;case"object":lodash.extend(global$3(),e.setter);break;default:throw new Error('setGlobalAttr requires a "setter" property')}},custom:function(e,t,n){if("function"!=typeof e.fn)throw new Error("The custom action requires a fn propery");e.fn(e,t,n)},canvas:function(e,t,n){var r=n.cavnas,i=canvasContructor({background:{element:document.body,property:"backgroundColor"},canvasBackground:{element:r,property:"backgroundColor"},borderColor:{element:r,property:"borderColor"},borderWidth:{element:r,property:"borderWidth"}},lodash.pick(e,["background","canvasBackground","borderColor","borderWidth"]));n.$end.map(i)}};function applyActions(e,n,r){var i=!1;return e=lodash.isArray(e)?e:[e],lodash.forEach(e,function(e){var t=lodash.isFunction(e)?e:actions[e.type];if(!t)throw new Error("unknown action: "+e.type);"endTrial"===e.type&&(i=!0),t(e,n,r)}),i}var MAX_RECURSION_DEPTH=50;function interactions$1(s){var u=0,l=s._source.interactions;try{validateInteractions(l)}catch(e){throw s.$messages({type:"error",message:"trial.interactions error",error:e,context:s._source}),e}return function(e){var t,n,r,i,o="Event: "+(e.handle||e.type),a=[];if(MAX_RECURSION_DEPTH<u)throw new Error("It seem you have created an infinite loop. Minno has been halted");u++;try{for(t=0;t<l.length&&(n=l[t],r=conditionsEvaluate(n.conditions,e,s),a.push([r,n.conditions]),r&&(i=applyActions(n.actions,e,s)),!i);t++);}catch(e){throw s.$messages({type:"error",message:"trial.interactions error",error:e}),e}u--,s.$messages({type:"debug",message:o,rows:a}),i&&s.end();return e}}function validateInteractions(e){if(!Array.isArray(e))throw new Error("Interactions must be an array");if(!e.length)throw new Error("There are no interactions defined");if(!e.every(lodash.isPlainObject))throw new Error("Interactions must be plain objects");if(!e.every(t("conditions")))throw new Error("Conditions must be either an array or a function");if(!e.every(t("actions")))throw new Error("Actions must be either an array or a function");function t(t){return function(e){return Array.isArray(e[t])||lodash.isFunction(e[t])}}}var gid=0;function Trial$1(e,t,n){if(!e.interactions)throw new Error("Interactions not defined");this.canvas=t,this.settings=n,this._source=e,this.$logs=stream(),this.$messages=stream(),this.$events=stream(),this.$end=this.$events.end,this.data=e.data||{},this._id=lodash.uniqueId("trial_"),this.counter=gid++,this.input=interfaceFn(this.$events,t),this.stimulusCollection=stimCollection(this,t),this._next=["next",{}]}function addTrialDetails(t){return function(e){return lodash.assign(e,{trialId:t._id,counter:t.counter})}}function nextTrial$1(i,o,e){var t,n=e[0],r=e[1],a=i.currentSequence,s=global$3(),u={global:s,current:s.current};return a.go(n,r,u),(t=a.current(u,{skip:["layout","stimuli"]}))?(t.stimuli=lodash.map(t.stimuli||[],c,u),t.layout=lodash.map(t.layout||[],c,u),u.trialData=null,{value:t}):{done:!0};function l(e,t,n){var r=e[t];if(lodash.isUndefined(r))return!1;lodash.isString(r)&&(r={word:r}),(r=i.inflate("media",r,n)).image&&(r.image=buildUrl(o.base_url,r.image,"image")),r.template&&(r.inlineTemplate=requirejs("text!"+buildUrl(o.base_url,r.template,"template")),r.inlineTemplate=lodash.template(r.inlineTemplate)(n)),e[t]=r,n.mediaData=null,n.mediaMeta=null}function c(e){return l(e=i.inflate("stimulus",e,this,{skip:["media","touchMedia"]}),"media",this),l(e,"touchMedia",this),this.stimulusData=null,this.stimulusMeta=null,e}}function createLogs$3(e,t,n){var r,i=t.logger||t.logMap||n;return e.map((r=i,function(e){return r.apply(null,e)}))}function transformLogs(e,t,n){var r=window.piGlobal,i=n.data,o=t,a=r.current.logs,s=lodash.get(n,"settings.logger.fullpath",!1),u=n.stimulusCollection.getStimlist(),l=n.stimulusCollection.getMedialist({fullpath:s});return{log_serial:a.length,trial_id:n.counter,name:n.name(),responseHandle:o.handle,latency:Math.floor(o.latency),stimuli:u,media:l,data:i}}function playerPhase(e){var r,i=e.canvas,n=e.db,o=e.settings,a=stream(),t=a.map(function(e){var t=r,n=r=new Trial$1(e,i,o);return n.$logs.map(s),n.$messages.map(u),e.DEBUG&&window.DEBUG&&setupDebug(n),n.$end.map(function(){f(n._next)}),n.start(),t&&fastdom.mutate(function(){t.stimulusCollection.destroy()}),n}),s=stream(),u=stream(),l=createLogs$3(s,composeLoggerSettings(e.script,global$3()),transformLogs),c=lodash.get(o,"hooks.endTask",o.onEnd||lodash.noop);return a.end.map(t.end).map(s.end).map(function(){var e=t();e&&e.stimulusCollection.destroy()}).map(c),lodash.extend({$trial:t,end:a.end.bind(null,!0),$logs:l,$messages:u,start:f.bind(null,["next",{}]),onEnd:function(e){a.end.map(e)}},e);function f(e){var t=nextTrial$1(n,o,e);t.done?a.end(!0):a(t.value)}}function setupDebug(e){var t="Trial :"+e.counter;console.group(t),e.$messages.map(function(e){if("debug"!==e.type)return e;e.rows?(console.groupCollapsed(e.message),e.rows.forEach(function(e){console.log.apply(console,e)}),console.groupEnd(e.message)):console.log(e.message);return e}),e.$events.end.map(function(){console.groupEnd(t)})}function composeLoggerSettings(e,t){var n=lodash.assign({},lodash.get(e,"settings.logger")),r=lodash.assign({taskName:e.name},t.$meta,n.metaData);return n.metaData=r,n}function activate$2(e,t){var n=playerPhase(setup$1(e,t));return n.$trial.end.map(n.$resize.end),preloadPhase$1(e,t,n.$messages).then(n.start),n}function activateTime$1(e,t,n,r,i,o){var a,s,u=createLog(o,r,n);return r.name=n.$name,t.append("<div pi-player></div>"),a=t.contents(),(s=activate$2(a[0],r)).onEnd(e),s.$messages.map(i),s.$logs.map(u),s.$logs.end.map(u.end),function(){u.end(!0),a.remove(),s.end()}}lodash.extend(Trial$1.prototype,{start:function(){var e=this;return e.stimulusCollection.ready.then(function(){e.$events.map(addTrialDetails(e)).map(interactions$1(e)),lodash.forEach(e._source.input,e.input.add),e.input.resetTimer(),e.$events({type:"begin",latency:0})})},end:function(){this.input.removeAll(),this.$end(!0)},name:function(){return this.alias?this.alias:this.data.alias?this.data.alias:lodash.isString(this._source.inherit)?this._source.inherit:lodash.isPlainObject(this._source.inherit)?this._source.inherit.set:void 0}}),activateTime$1.$inject=["done","$element","task","script","piConsole","logger"];var module$14=angular.module("pi.task",[]);function canvasContructor$1(r,e){var t;if(!lodash.isPlainObject(r))throw new Error("canvas(map): You must set a rule map for canvas to work properly");if(lodash.isUndefined(e))return lodash.noop;if(!lodash.isPlainObject(e))throw new Error("canvas(settings): canvas settings must be an object");return t=lodash.map(e,function(e,t){var n=r[t];if(n)return on$1(n.element,n.property,e);throw new Error("canvas("+t+"): unknow key in canvas object.")}),function(){lodash.forEach(t,function(e){e.call()})}}function on$1(e,t,n){var r=e.css(t);return e.css(t,n),lodash.bind(e.css,e,t,r)}function managerCanvasService(e,t){var n={background:{element:angular.element(t[0].body),property:"backgroundColor"},canvasBackground:{element:e,property:"backgroundColor"},fontSize:{element:e,property:"fontSize"},fontColor:{element:e,property:"color"}};return lodash.bind(canvasContructor$1,null,n)}module$14.provider("taskActivate",provider),module$14.directive("piTask",directive$10),module$14.config(["taskActivateProvider",function(e){e.set("postCsv",postCsv),e.set("quest",activateQuest$1),e.set("message",activateMessage$1),e.set("post",activatePost$1),e.set("redirect",activateRedirect$1),e.set("pip",activatePIP$1),e.set("time",activateTime$1)}]),managerCanvasService.$inject=["$rootElement","$document"];var module$15=angular.module("pi.canvas",[]);function swapControler(e){this.$scope=e}function swapDirective(e,c,f){return{transclude:!0,controller:swapControler,controllerAs:"ctrl",compile:function(){return{pre:this.pre,post:function(){}}},pre:function(i,e,t,n,o){i.enter=function(e,t){var n=t||{};if(n.pre&&n.pre(),!e)return l(n);var r=lodash.extend(i.$new(),e);o(r,function(e){!function(e,t){if(!t)return;var n=t.split(" ");lodash.each(n,function(e){if(!f.has("."+e+"-animation"))throw new Error('Unknown animation type: "'+e+'"')}),e.addClass(t)}(e,n.animate),l(n),s=e,a=r,c.enter(s,u,null,function(){n.post&&n.post()})})},i.empty=l,i.refresh=function(e){lodash.extend(a,e)};var a,s,r,u=e;function l(e){var t=e||{};r&&(r.remove(),r=null),a&&(a.$destroy(),a=null),s&&(c.leave(s,function(){r=null,t.postLeave&&t.postLeave()}),r=s,s=null)}}}}module$15.service("managerCanvas",managerCanvasService),swapControler.$inject=["$scope"],lodash.extend(swapControler.prototype,{next:function(e,t){this.$scope.enter(e,t)},prev:function(e,t){this.$scope.enter(e,t)},refresh:function(e){this.$scope.refresh(e)},empty:function(e){this.$scope.empty(e)}}),swapDirective.$inject=["$compile","$animate","$injector"];var template$9='<div>\n\t<img ng-if="spinner" class="pi-logo" src="img/loader.gif" />\n\t<div ng-if="!spinner" ng-transclude></div>\n</div>\n';function directive$11(){return{transclude:!0,replace:!0,template:template$9,require:[],scope:{spinner:"=piSpinner"}}}directive$11.$inject=[];var module$16=angular.module("piHelperDirective",[]);function Logger$1(a){var s={};return{createLog:function(t,e){var n=stream(),r=stream(),i=lodash.defaults({},e,a);if(!lodash.isString(t)&&!lodash.isNumber(t))throw new Error("Log name must be a string");return function(t){if(!["onRow","onEnd","serialize","send"].every(function(e){return lodash.isFunction(t[e])}))throw new Error('The Logger requires all four of the following functions: "onRow","onEnd","serialize","send"')}(i),n.map(o(function(e){return i.onRow(t,e,i,s)})).map(r),n.end.map(o(function(){return i.onEnd(t,i,s)})).map(r),r.map(function(e){return lodash.isUndefined(e)?stream.HALT:e}).map(o(function(e){return i.serialize(t,e,i,s)})).map(o(function(e){return i.send(t,e,i,s)})),n;function o(e){return function(){try{return e.apply(this,arguments)}catch(e){if(i.onError)return i.onError.apply(this,[e].concat(arguments));throw e}}}},ctx:s}}module$16.directive("piSwap",swapDirective),module$16.directive("piSpinner",directive$11);var dfltLogger={onRow:onRow,onEnd:onEnd,serialize:serialize,send:send};function onRow(e,t,n,r){var i=r[e]||(r[e]=[]);if(t.isSave)return[lodash.set(t,"$isManual",!0)];if(n.isManager)return[t];if(i.push(t),n.pulse&&i.length>=n.pulse){var o=[].concat(i);return i.length=0,o}}function onEnd(e,t,n){var r=n[e]||(n[e]=[]);if(r.length)return r}function serialize(t,e,n){var r=lodash.assign({data:e.map(function(e){return lodash.set(e,"taskName",t)})},window.piGlobal.$meta,n.meta);return JSON.stringify(r)}function send(t,n,r,i){r.url&&xhr({url:r.url,method:"PUT",body:n}).catch(function(e){r.onError.apply(null,[e,t,n,r,i])})}var serial=1e3,taskNumber=0,lastTrialId,oldLogger={onRow:onRow$1,onEnd:onEnd$1,serialize:serialize$1,send:send$1};function onRow$1(e,t,n,r){var i,o=r[e]||(r[e]=[]);if(n.isSave)return i=t,lodash.pairs(i).map(function(e){return{name:e[0],response:e[1],serial:serial++}});if(n.isManager)return t;if((n.isPIP||n.isTime)&&(t.trial_id===lastTrialId&&n.onError.apply(null,[new Error("minno-time: PI server does not accept multiple logs per trial"),e,t,n,r]),lastTrialId=t.trial_id),o.push(t),n.pulse&&o.length>=n.pulse){var a=[].concat(o);return o.length=0,a}}function onEnd$1(e,t,n){var r=n[e]||(n[e]=[]);if(taskNumber++,serial=1e3,r.length)return r}function serialize$1(e,t,n){var r,i,o=lodash.assign({taskName:e,taskNumber:taskNumber},window.piGlobal.$meta,n.meta);return n.isManager&&!n.isSave?JSON.stringify(lodash.assign(o,t)):n.isPIP||n.isTime?(r="json="+encodeURIComponent(JSON.stringify(t)))+((i=function(e){var t,n=[];for(t in e)n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return n.join("&").replace(/%20/g,"+")}(o))?"&"+i:""):(r=t.map(function(e){return lodash.assign({},e,o)}),JSON.stringify(r))}function send$1(t,n,r,i){var e=!r.isSave&&(r.isPIP||r.isTime)&&"application/x-www-form-urlencoded; charset=UTF-8";xhr({url:r.isSave||r.isQuest?"/implicit/PiQuest":r.isPIP||r.isTime?"/implicit/PiPlayerApplet":"/implicit/PiManager",mehtod:"POST",body:n,contentType:e}).catch(function(e){r.onError.apply(null,[e,t,n,r,i])})}var debugLogger={onRow:onRow$2,onEnd:onEnd$2,serialize:serialize$2,send:send$2};function onRow$2(e,t,n,r){var i=r[e]||(r[e]=[]);if(i.push(t),n.pulse&&i.length>=n.pulse){var o=[].concat(i);return i.length=0,o}}function onEnd$2(e,t,n){var r=n[e]||(n[e]=[]);if(r.length)return r}function serialize$2(e,t){return t}function send$2(t,e,n){n.url||console.warn("Logger("+t+"): You have not set a logger url"),e.map(function(e){console.info("Logger("+t+"):",e)})}function managerLogger(e,t){return Logger$1(lodash.assign({onError:function(){t({type:"error",message:"Logger failed",error:lodash.first(arguments),rows:[["Task Name:",arguments[1]],["Data processed:",5==arguments.length?arguments[2]:"N/A"],["Settings:",arguments[arguments.length-2]]]})}},getSettingsObject(e),e))}function getSettingsObject(e){var t=e.type;return e.postCsv?csvLogger:"csv"==t?csvLogger:"old"==t?oldLogger:"debug"==t?debugLogger:dfltLogger}function managerService(e,t,i,o,d,a){function s(e,t){var n=this,r=t.settings||{};if(!(this instanceof s))return new s(e,t);this.$scope=e,this.script=t,this.logger=managerLogger(r.logger||{},a),this.log=createLog(this.logger,this.script,{type:"manager",$name:t.name||"manager"}),e.$on("$destroy",function(){n.log.end(!0)}),this.sequence=new i(t),function(e,t){var n,r,i=d.get("managerCanvas"),o=d.get("$document"),a=d.get("piPreloadImages"),s=d.get("managerBeforeUnload"),u=d.get("managerInjectStyle"),l=d.get("$rootElement"),c=t.skin||"default",f=d.get("piConsole");s.activate(),e.$on("$destroy",s.deactivate),n=i(t.canvas),e.$on("$destroy",n),r=u(t.injectStyle),e.$on("$destroy",r),a(t.preloadImages||[]),t.title&&(o[0].title=t.title);l.addClass(c+"-skin"),f.settings=t.DEBUG||{}}(e,r),e.$on("manager:next",function(e,t){switch(t||(t={type:"next"}),t.type){case"current":n.load(t);break;case"prev":n.prev(t);break;case"next":default:n.next(t)}}),e.$on("manager:prev",function(){n.prev()})}return lodash.extend(s.prototype,{next:function(e){this.sequence.next(),this.load(e)},prev:function(e){this.sequence.prev(),this.load(e)},current:function(){return this.sequence.current()},load:function(e){var t=this.current(),n=this.$scope,r={baseUrl:this.baseUrl,bustCache:e&&e.bustCache};if(t)return o(t,r).then(function(){a({tags:["manager"],type:"debug",message:"Manager:currentTask",context:t}),n.$emit("manager:loaded")});n.$emit("manager:loaded")},setBaseUrl:function(e){this.baseUrl=e}}),s}function sequenceProvider(r,i,o,a){function s(e){var t,n;if(!(this instanceof s))return new s(e);(t=this.db=new r).createColl("tasks"),t.add("tasks",e.tasksSets||[]),n={global:i.global},lodash.extend(o,n),lodash.extend(a,n),this.sequence=t.sequence("tasks",e.sequence)}return lodash.extend(s.prototype,{next:function(){return this.sequence.next(),this},prev:function(){return this.sequence.prev(),this},current:function(){return this.sequence.current()}}),s}function managerLoadService(n,r){return function(e){var t=lodash.isString(e)?r(e):e;return n.when(t)}}function getScriptProvider(){var s=lodash.memoize(function(r){return new Promise(function(e,t){var n=new XMLHttpRequest;n.open("GET",r,!0),n.onreadystatechange=function(){4===this.readyState&&(200<=this.status&&this.status<400?e(this.responseText):t(new Error("Failed posting to: "+r)))},n.send()})});return function(e,t){t||(t={});var n,r=(i=e,o=t,a="",o.baseUrl&&!/^\/|:/.test(i)&&(a+=o.baseUrl+"/"),a+=i,o.bustCache&&(a+="?bust="+ +new Date),a);var i,o,a;return t.isText?s(r):(n=r,new Promise(function(e,t){require([n],e,t)}))}}function taskLoadService(i,t,r){return function(t,e){var n,r;return n=t.scriptUrl?o(t.scriptUrl,e):t.script,r=t.templateUrl?o(t.templateUrl,lodash.extend({isText:!0},e)):t.template,i.all({script:i.when(n),template:i.when(r)}).then(function(e){return t.$name=t.name||lodash.get(e.script,"name","unnamedTask"),t.$script=e.script,t.$template=e.template,t})};function o(n,e){return t(n,e).then(function(e){if(!lodash.isUndefined(e))return e;var t=new Error("Could not load task "+n);throw r({tags:"task",type:"error",context:n,message:"Make sure that you returned the script and that your script does not have any errors",error:t}),t})}}managerService.$inject=["$rootScope","$q","managerSequence","managerTaskLoad","$injector","piConsole"],sequenceProvider.$inject=["Database","$rootScope","mixerDefaultContext","templateDefaultContext"],managerLoadService.$inject=["$q","managerGetScript"],taskLoadService.$inject=["$q","managerGetScript","piConsole"];var addEvent$1=window.attachEvent||window.addEventListener,removeEvent$1=window.detachEvent||window.removeEventListener,chkevent=window.attachEvent?"onbeforeunload":"beforeunload",proto={activate:function(){addEvent$1(chkevent,leaveEvent)},deactivate:function(){removeEvent$1(chkevent,leaveEvent)}};function leaveEvent(e){var t="Are you sure you want to leave this page? You may have some unsaved data here.";return(e||window.event).returnValue=t}function beforeunloadFactory(){return lodash.create(proto)}function injectStyle(e){var t=document.head||document.querySelector("head"),n=document.createElement("style");return n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n),function(){t.removeChild(n)}}function managerControler(r,i,o,a){this.init=function(e){var t,n=this;try{t=r.$eval(e)}catch(e){}finally{t||(t=e)}o(t).then(function(e){r.script=e,r.settings=e&&e.settings||{},r.manager=n.manager=new i(r,e),n.manager.setBaseUrl(function(e){if(!lodash.isString(e))return;return e.substring(0,e.lastIndexOf("/"))}(t)),r.$emit("manager:next")},function(e){a({type:"error",message:"Failed to load "+t,tags:["manager"],error:e})})}}function directive$12(l,c,f){return{priority:1e3,replace:!0,template:["<div pi-swap ng-cloak ng-class=\"{'pi-spinner':loading}\">",'<div ng-bind-html="task.preText"></div>','<div pi-task="task"></div>','<div ng-bind-html="task.postText"></div>',"</div>"].join("\n"),controller:managerControler,require:["piManager","piSwap"],link:function(n,e,t,r){var i,o,a=r[1],s=r[0];function u(e,n){var t=l.when();lodash(e).map(function(t){return function(){var e=lodash.isFunction(t)?c.invoke(t,null,n||{}):t;return l.when(e)}}).reduce(function(e,t){return e.then(t,function(e){f({type:"error",message:"There was an error in the task sequence.",tags:["manager"],error:e})})},t)}s.init(t.piManager),n.$on("manager:loaded",function(){n.loading=!1,o=i,(i=s.manager.current())?(t={prevTask:o,currentTask:i,managerSettings:n.settings},u([function(){var e={taskName:i.name||"namelessTask",taskNumber:lodash.get(i,"$meta.number"),taskURL:i.scriptUrl||i.templateUrl};s.manager.log(e,n.settings)},n.settings.onPreTask,lodash.get(o,"post"),i.pre,lodash.bind(a.next,a,{task:i,settings:n.settings}),i.load,function(){n.loading=!1}],t)):(e={prevTask:o,currentTask:i},u([o&&o.post,lodash.bind(a.empty,a),n.settings.onEnd,function(){n.loading=!1,n.$emit("manager:done"),n.$destroy()}],e));var e;var t}),n.$on("task:done",function(e,t){e.stopPropagation(),n.loading=!0,n.$emit("manager:next",t)}),n.loading=!0}}}function directive$13(){return{priority:1e3,template:'<div pi-manager="script"></div>',compile:function(){return{pre:function(e,t,n){var r,i=n.piManagerTask;try{r=e.$eval(i)}catch(e){}var o=r||{scriptUrl:i};e.script={sequence:[{script:["done","managerBeforeUnload",function(e,t){t.deactivate(),e()}]},o]}}}}}}function piLinkDirective(n){return{link:function(e,t){t.on("click",function(){n.deactivate()})}}}managerControler.$inject=["$scope","managerService","managerLoad","piConsole"],directive$12.$inject=["$q","$injector","piConsole"],piLinkDirective.$inject=["managerBeforeUnload"];var module$13=angular.module("taskManager",[module$14.name,module$15.name,module$10.name,module$16.name,module$7.name]),Wrb,Xrb,Yrb;module$13.service("managerService",managerService),module$13.service("managerSequence",sequenceProvider),module$13.service("managerLoad",managerLoadService),module$13.service("managerGetScript",getScriptProvider),module$13.service("managerTaskLoad",taskLoadService),module$13.factory("managerBeforeUnload",beforeunloadFactory),module$13.constant("managerInjectStyle",injectStyle),module$13.directive("piManager",directive$12),module$13.directive("piManagerTask",directive$13),module$13.directive("piLink",piLinkDirective),
/**
 * @license AngularJS v1.2.27
 * (c) 2010-2014 Google, Inc. http://angularjs.org
 * License: MIT
 */
Wrb=window,Xrb=window.angular,Xrb.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){var i="$$ngAnimateChildren";return function(e,t,n){var r=n.ngAnimateChildren;Xrb.isString(r)&&0===r.length?t.data(i,!0):e.$watch(r,function(e){t.data(i,!!e)})}}).factory("$$animateReflow",["$$rAF","$document",function(t,e){var n=e[0].body;return function(e){return t(function(){n.offsetWidth,e()})}}]).config(["$provide","$animateProvider",function(e,n){var U=Xrb.noop,V=Xrb.forEach,b=n.$$selectors,B=1,P="$$ngAnimateState",M="$$ngAnimateChildren",T="ng-animate",j={running:!0};function z(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.nodeType==B)return n}}function l(e){return e&&Xrb.element(e)}function c(e){return Xrb.element(z(e))}function O(e,t){return z(e)==z(t)}e.decorator("$animate",["$delegate","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document",function(i,$,y,E,k,o,e){var q=0;E.data(P,j),o.$$postDigest(function(){o.$$postDigest(function(){j.running=!1})});var t=n.classNameFilter(),w=t?function(e){return t.test(e)}:function(){return!0};function a(e){var t=e.data(P)||{};t.running=!0,e.data(P,t)}function _(s,t,u){var e=s[0];if(e){var l,c,n="setClass"==t,r=n||"addClass"==t||"removeClass"==t;Xrb.isArray(u)&&(l=u[0],c=u[1],u=l+" "+c);var i=s.attr("class")+" "+u;if(w(i)){var o=U,a=[],f=[],d=U,p=[],h=[],m=(" "+i).replace(/\s+/g,".");return V(function(e){if(e){var t=[],n={},r=e.substr(1).split(".");(y.transitions||y.animations)&&t.push($.get(b[""]));for(var i=0;i<r.length;i++){var o=r[i],a=b[o];a&&!n[o]&&(t.push($.get(a)),n[o]=!0)}return t}}(m),function(e){!v(e,t)&&n&&(v(e,"addClass"),v(e,"removeClass"))}),{node:e,event:t,className:u,isClassBased:r,isSetClassOperation:n,before:function(e){o=e,g(f,a,function(){o=U,e()})},after:function(e){d=e,g(h,p,function(){d=U,e()})},cancel:function(){V(a,function(e){(e||U)(!0)}),o(!0),V(p,function(e){(e||U)(!0)}),d(!0)}}}}function v(e,t){var n=e[t],r=e["before"+t.charAt(0).toUpperCase()+t.substr(1)];if(n||r)return"leave"==t&&(r=n,n=null),h.push({event:t,fn:n}),f.push({event:t,fn:r}),!0}function g(e,r,i){var o=[];V(e,function(e){e.fn&&o.push(e)});var a=0;V(o,function(e,t){var n=function(){!function(e){if(r){if((r[e]||U)(),++a<o.length)return;r=null}i()}(t)};switch(e.event){case"setClass":r.push(e.fn(s,l,c,n));break;case"addClass":r.push(e.fn(s,l||u,n));break;case"removeClass":r.push(e.fn(s,c||u,n));break;default:r.push(e.fn(s,n))}}),r&&0===r.length&&i()}}return{enter:function(e,t,n,r){e=Xrb.element(e),t=l(t),n=l(n),a(e),i.enter(e,t,n),o.$$postDigest(function(){s("enter","ng-enter",e=c(e),t,n,U,r)})},leave:function(e,t){u(e=Xrb.element(e)),a(e),o.$$postDigest(function(){s("leave","ng-leave",c(e),null,null,function(){i.leave(e)},t)})},move:function(e,t,n,r){e=Xrb.element(e),t=l(t),n=l(n),u(e),a(e),i.move(e,t,n),o.$$postDigest(function(){s("move","ng-move",e=c(e),t,n,U,r)})},addClass:function(e,t,n){e=c(e=Xrb.element(e)),s("addClass",t,e,null,null,function(){i.addClass(e,t)},n)},removeClass:function(e,t,n){e=c(e=Xrb.element(e)),s("removeClass",t,e,null,null,function(){i.removeClass(e,t)},n)},setClass:function(e,t,n,r){e=c(e=Xrb.element(e)),s("setClass",[t,n],e,null,null,function(){i.setClass(e,t,n)},r)},enabled:function(e,t){switch(arguments.length){case 2:if(e)A(t);else{var n=t.data(P)||{};n.disabled=!0,t.data(P,n)}break;case 1:j.disabled=!e;break;default:e=!j.disabled}return!!e}};function s(n,r,i,e,t,o,a){var s=_(i,n,r);if(!s)return S(),w(),b(),void C();r=s.className;var u=Xrb.element._data(s.node);u=u&&u.events,e||(e=t?t.parent():i.parent());var l,c=i.data(P)||{},f=c.active||{},d=c.totalActive||0,p=c.last;if(s.isClassBased&&(l=c.running||c.disabled||p&&!p.isClassBased),l||function(e,t){if(j.disabled)return!0;if(O(e,E))return j.running;var n,r,i;do{if(0===t.length)break;var o=O(t,E),a=o?j:t.data(P)||{};if(a.disabled)return!0;if(o&&(i=!0),!1!==n){var s=t.data(M);Xrb.isDefined(s)&&(n=s)}r=r||a.running||a.last&&!a.last.isClassBased}while(t=t.parent());return!i||!n&&r}(i,e))return S(),w(),b(),void C();var h=!1;if(0<d){var m=[];if(s.isClassBased){if("setClass"==p.event)m.push(p),A(i,r);else if(f[r]){var v=f[r];v.event==n?h=!0:(m.push(v),A(i,r))}}else if("leave"==n&&f["ng-leave"])h=!0;else{for(var g in f)m.push(f[g]),A(i,g);f={},d=0}0<m.length&&V(m,function(e){e.cancel()})}if(!s.isClassBased||s.isSetClassOperation||h||(h="addClass"==n==i.hasClass(r)),h)return S(),w(),b(),void x();"leave"==n&&i.one("$destroy",function(e){var t=Xrb.element(this),n=t.data(P);if(n){var r=n.active["ng-leave"];r&&(r.cancel(),A(t,"ng-leave"))}}),i.addClass(T);var $=q++;function y(e){var t="$animate:"+e;u&&u[t]&&0<u[t].length&&k(function(){i.triggerHandler(t,{event:n,className:r})})}function w(){y("before")}function b(){y("after")}function x(){y("close"),a&&k(function(){a()})}function S(){S.hasBeenRun||(S.hasBeenRun=!0,o())}function C(){if(!C.hasBeenRun){C.hasBeenRun=!0;var e=i.data(P);e&&(s&&s.isClassBased?A(i,r):(k(function(){var e=i.data(P)||{};$==e.index&&A(i,r)}),i.data(P,e))),x()}}d++,f[r]=s,i.data(P,{last:s,active:f,index:$,totalActive:d}),w(),s.before(function(e){var t=i.data(P);e=e||!t||!t.active[r]||s.isClassBased&&t.active[r].event!=n,S(),!0===e?C():(b(),s.after(C))})}function u(e){var t=z(e);if(t){var n=Xrb.isFunction(t.getElementsByClassName)?t.getElementsByClassName(T):t.querySelectorAll("."+T);V(n,function(e){var t=(e=Xrb.element(e)).data(P);t&&t.active&&V(t.active,function(e){e.cancel()})})}}function A(e,t){if(O(e,E))j.disabled||(j.running=!1,j.structural=!1);else if(t){var n=e.data(P)||{},r=!0===t;!r&&n.active&&n.active[t]&&(n.totalActive--,delete n.active[t]),!r&&n.totalActive||(e.removeClass(T),e.removeData(P))}}}]),n.register("",["$window","$sniffer","$timeout","$$animateReflow",function(f,e,i,n){var x,S,C,E,k="";Wrb.ontransitionend===Yrb&&Wrb.onwebkittransitionend!==Yrb?(k="-webkit-",x="WebkitTransition",S="webkitTransitionEnd transitionend"):(x="transition",S="transitionend"),Wrb.onanimationend===Yrb&&Wrb.onwebkitanimationend!==Yrb?(k="-webkit-",C="WebkitAnimation",E="webkitAnimationEnd animationend"):(C="animation",E="animationend");var r,d="Duration",q="Property",p="Delay",h="IterationCount",_="$$ngAnimateKey",A="$$ngAnimateCSS3Data",P="ng-animate-block-transitions",M=3,T=1.5,j=1e3,O={},D=0,o=[];function a(){r||(r=n(function(){o=[],r=null,O={}}))}function s(e,t){r&&r(),o.push(t),r=n(function(){V(o,function(e){e()}),o=[],r=null,O={}})}var u=null,l=0,c=[];function R(e,t){var n=z(e);e=Xrb.element(n),c.push(e);var r=Date.now()+t;r<=l||(i.cancel(u),l=r,u=i(function(){V(c,function(e){var t=e.data(A);t&&(t.closeAnimationFn||U)()}),c=[]},t,!1))}function N(e,t){var n=t?O[t]:null;if(!n){var r,i,o,a,s=0,u=0,l=0,c=0;V(e,function(e){if(e.nodeType==B){var t=f.getComputedStyle(e)||{};o=t[x+d],s=Math.max(m(o),s),a=t[x+q],r=t[x+p],u=Math.max(m(r),u),i=t[C+p],c=Math.max(m(i),c);var n=m(t[C+d]);0<n&&(n*=parseInt(t[C+h],10)||1),l=Math.max(n,l)}}),n={total:0,transitionPropertyStyle:a,transitionDurationStyle:o,transitionDelayStyle:r,transitionDelay:u,transitionDuration:s,animationDelayStyle:i,animationDelay:c,animationDuration:l},t&&(O[t]=n)}return n}function m(e){var t=0,n=Xrb.isString(e)?e.split(/\s*,\s*/):[];return V(n,function(e){t=Math.max(parseFloat(e)||0,t)}),t}function v(e,t,n,r){var i,o,a,s=(o=(i=t).parent(),(a=o.data(_))||(o.data(_,++D),a=D),a+"-"+z(i).getAttribute("class")),u=s+" "+n,l=O[u]?++O[u].total:0,c={};if(0<l){var f=n+"-stagger",d=s+" "+f,p=!O[d];p&&t.addClass(f),c=N(t,d),p&&t.removeClass(f)}r=r||function(e){return e()},t.addClass(n);var h=t.data(A)||{},m=r(function(){return N(t,u)}),v=m.transitionDuration,g=m.animationDuration;if(0===v&&0===g)return t.removeClass(n),!1;t.data(A,{running:h.running||0,itemIndex:l,stagger:c,timings:m,closeAnimationFn:U});var $,y,w,b=0<h.running||"setClass"==e;return 0<v&&($=t,y=b,"ng-enter"!=(w=n)&&"ng-move"!=w&&"ng-leave"!=w&&y?$.addClass(P):z($).style[x+q]="none"),0<g&&0<c.animationDelay&&0===c.animationDuration&&(z(t).style[C]="none 0s"),!0}function g(e,t){var n=x+q,r=z(e);r.style[n]&&0<r.style[n].length&&(r.style[n]=""),e.removeClass(P)}function $(e){var t=C,n=z(e);n.style[t]&&0<n.style[t].length&&(n.style[t]="")}function F(e,n,r){var i="";return V(e.split(","),function(e,t){i+=(0<t?",":"")+(r*n+parseInt(e,10))+"s"}),i}function y(e,t,n,r){if(v(e,t,n,r))return function(e){e&&I(t,n)}}function w(e,t,n,r){if(t.data(A))return function(e,r,i,o){var t=z(r),n=r.data(A);if(-1!=t.getAttribute("class").indexOf(i)&&n){var a="";V(i.split(" "),function(e,t){a+=(0<t?" ":"")+e+"-active"});var s=n.stagger,u=n.timings,l=n.itemIndex,c=Math.max(u.transitionDuration,u.animationDuration),f=Math.max(u.transitionDelay,u.animationDelay),d=f*j,p=Date.now(),h=E+" "+S,m="",v=[];if(0<u.transitionDuration){var g=u.transitionPropertyStyle;-1==g.indexOf("all")&&(m+=k+"transition-property: "+g+";",m+=k+"transition-duration: "+u.transitionDurationStyle+";",v.push(k+"transition-property"),v.push(k+"transition-duration"))}if(0<l){if(0<s.transitionDelay&&0===s.transitionDuration){var $=u.transitionDelayStyle;m+=k+"transition-delay: "+F($,s.transitionDelay,l)+"; ",v.push(k+"transition-delay")}0<s.animationDelay&&0===s.animationDuration&&(m+=k+"animation-delay: "+F(u.animationDelayStyle,s.animationDelay,l)+"; ",v.push(k+"animation-delay"))}if(0<v.length){var y=t.getAttribute("style")||"";t.setAttribute("style",y+"; "+m)}r.on(h,x),r.addClass(a),n.closeAnimationFn=function(){b(),o()};var w=(l*(Math.max(s.animationDelay,s.transitionDelay)||0)+(f+c)*T)*j;return n.running++,R(r,w),b}function b(e){r.off(h,x),r.removeClass(a),I(r,i);var t=z(r);for(var n in v)t.style.removeProperty(v[n])}function x(e){e.stopPropagation();var t=e.originalEvent||e,n=t.$manualTimeStamp||t.timeStamp||Date.now(),r=parseFloat(t.elapsedTime.toFixed(M));Math.max(n-p,0)>=d&&c<=r&&o()}o()}(0,t,n,r);I(t,n),r()}function b(e,t,n,r){var i=y(e,t,n);if(!i)return a(),void r();var o=i;return s(0,function(){g(t),$(t),o=w(0,t,n,r)}),function(e){(o||U)(e)}}function I(e,t){e.removeClass(t);var n=e.data(A);n&&(n.running&&n.running--,n.running&&0!==n.running||e.removeData(A))}return{enter:function(e,t){return b("enter",e,"ng-enter",t)},leave:function(e,t){return b("leave",e,"ng-leave",t)},move:function(e,t){return b("move",e,"ng-move",t)},beforeSetClass:function(r,i,o,e){var t=L(o,"-remove")+" "+L(i,"-add"),n=y("setClass",r,t,function(e){var t=r.attr("class");r.removeClass(o),r.addClass(i);var n=e();return r.attr("class",t),n});if(n)return s(0,function(){g(r),$(r),e()}),n;a(),e()},beforeAddClass:function(n,r,e){var t=y("addClass",n,L(r,"-add"),function(e){n.addClass(r);var t=e();return n.removeClass(r),t});if(t)return s(0,function(){g(n),$(n),e()}),t;a(),e()},setClass:function(e,t,n,r){return w(0,e,(n=L(n,"-remove"))+" "+(t=L(t,"-add")),r)},addClass:function(e,t,n){return w(0,e,L(t,"-add"),n)},beforeRemoveClass:function(r,i,e){var t=y("removeClass",r,L(i,"-remove"),function(e){var t=r.attr("class");r.removeClass(i);var n=e();return r.attr("class",t),n});if(t)return s(0,function(){g(r),$(r),e()}),t;e()},removeClass:function(e,t,n){return w(0,e,L(t,"-remove"),n)}};function L(e,n){var r="";return e=Xrb.isArray(e)?e:e.split(/\s+/),V(e,function(e,t){e&&0<e.length&&(r+=(0<t?" ":"")+e+n)}),r}}])}]);for(var vendors=["webkit","moz"],i=0;i<vendors.length&&!window.requestAnimationFrame;++i){var vp=vendors[i];window.requestAnimationFrame=window[vp+"RequestAnimationFrame"],window.cancelAnimationFrame=window[vp+"CancelAnimationFrame"]||window[vp+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var lastTime=0;window.requestAnimationFrame=function(e){var t=+new Date,n=Math.max(lastTime+16,t);return setTimeout(function(){e(lastTime=n)},n-t)},window.cancelAnimationFrame=clearTimeout}function animation(e,s){var u=60,l=300,c=e.requestAnimationFrame,f=e.cancelAnimationFrame;return{enter:function(t,r){var i,o=t[0],a=s();return t.css({top:-u+"px"}),i=c(function e(){var t=s()-a;var n=t/l;if(l<t)return o.style.top=0,f(i),void r();o.style.top=u*(n-1)+"px";i=c(e)}),function(e){e&&(f(i),t.css({top:"0px"}))}},leave:function(e,r){var i,o=e[0],a=s();return i=c(function e(){var t=s()-a;var n=1-t/l;if(l<t)return f(i),void r();o.style.top=u*(n-1)+"px";i=c(e)}),function(e){e&&f(i)}}}}var dropInAnimation=["$window","timerNow",animation];function animation$1(e,s){var u=300,l=e.requestAnimationFrame,c=e.cancelAnimationFrame;return{enter:function(e,r){var i,o=e[0],a=s();return o.style.opacity=0,i=l(function e(){var t=s()-a;var n=t/u;if(u<t)return o.style.opacity=1,c(i),void r();o.style.opacity=n;i=l(e)}),function(e){e&&(c(i),o.style.opacity=1)}},leave:function(e,r){var i,o=e[0],a=s();return i=l(function e(){var t=s()-a;var n=1-t/u;if(u<t)return o.style.opacity=0,c(i),void r();o.style.opacity=n;i=l(e)}),function(e){e&&(c(i),o.style.opacity=0)}}}}var fadeAnimation=["$window","timerNow",animation$1];function animation$2(e,s){var u=300,l=e.requestAnimationFrame,c=e.cancelAnimationFrame;return{enter:function(e,r){var i,o=e[0],a=s();return o.style.left="-100%",i=l(function e(){var t=s()-a;var n=1-t/u;if(u<t)return o.style.left="0%",c(i),void r();o.style.left=100*-n+"%";i=l(e)}),function(e){e&&(c(i),o.style.left="0%")}},leave:function(e,r){var i,o=e[0],a=s();return i=l(function e(){var t=s()-a;var n=t/u;if(u<t)return o.style.left="100%",c(i),void r();o.style.left=100*n+"%";i=l(e)}),function(e){e&&(c(i),o.style.left="100%")}}}}var slideAnimation=["$window","timerNow",animation$2],module$17=angular.module("pi.animate",["ngAnimate"]);module$17.animation(".drop-in",dropInAnimation),module$17.animation(".fade",fadeAnimation),module$17.animation(".slide",slideAnimation),window.require=require,window.requirejs=requirejs$1,window.define=define;var submodules=[module$1.name,module$12.name,module$13.name,module$17.name,module$7.name],app$1=angular.module("piApp",submodules);function activate$1(e){angular.bootstrap(e,[app$1.name])}return app$1.run(["$rootScope","$rootElement","$parse","$window",function(e,t,n,r){var i=n(t.attr("pi-global"))(r);window.piGlobal||(window.piGlobal={}),e.global=window.piGlobal,i&&lodash.extend(e.global,i)}]),app$1.config(["$provide",function(e){"function"!=typeof Object.getPrototypeOf&&(Object.getPrototypeOf="object"==typeof"test".__proto__?function(e){return e.__proto__}:function(e){return e.constructor.prototype});e.decorator("$rootScope",["$delegate",function(n){var r=Object.getPrototypeOf(n);return r.$new=function(e){var t;return e?((t=new r.constructor).$root=this.$root,t.$$asyncQueue=this.$$asyncQueue,t.$$postDigestQueue=this.$$postDigestQueue):(this.$$childScopeClass||(this.$$childScopeClass=function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$id=++n.$id,this.$$childScopeClass=null},this.$$childScopeClass.prototype=this),t=new this.$$childScopeClass),(t.this=t).$parent=this,t.$$prevSibling=this.$$childTail,this.$$childHead?(this.$$childTail.$$nextSibling=t,this.$$childTail=t):this.$$childHead=this.$$childTail=t,t},n.$new=r.$new,n}])}]),define("managerAPI",lodash.constant(manager)),define("timeAPI",lodash.constant(api$1)),define("pipAPI",lodash.constant(api$1)),define("questAPI",lodash.constant(quest)),define("minno-sequencer",lodash.constant(Database$2)),define("lodash",lodash.constant(lodash)),define("underscore",lodash.constant(lodash)),define("angular",lodash.constant(angular)),define("pipScorer",lodash.constant(Scorer)),define("dscore",lodash.constant(Scorer)),angular.element(document).ready(function(){var e=document.getElementById("minno-app");e&&activate$1(e)}),activate$1}();
//# sourceMappingURL=minno.js.map
