/**
 * @preserve minno-quest v0.2.19
 * @license Apache-2.0 (2018)
 */
var minnoQuest=function(){"use strict";
/**
 * @license AngularJS v1.2.27
 * (c) 2010-2014 Google, Inc. http://angularjs.org
 * License: MIT
 */
/**
 * @license AngularJS v1.2.27
 * (c) 2010-2014 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(v,Z,tt){function x(u){return function(){var t,e,n,r=arguments[0],i="["+(u?u+":":"")+r+"] ",o=arguments[1],a=arguments;for(t=(t=i+o.replace(/\{\d+\}/g,function(t){var e,n=+t.slice(1,-1);return n+2<a.length?"function"==typeof(e=a[n+2])?e.toString().replace(/ ?\{[\s\S]*$/,""):void 0===e?"undefined":"string"!=typeof e?W(e):e:t}))+"\nhttp://errors.angularjs.org/1.2.27/"+(u?u+"/":"")+r,e=2;e<arguments.length;e++)t=t+(2==e?"?":"&")+"p"+(e-2)+"="+encodeURIComponent("function"==typeof(n=arguments[e])?n.toString().replace(/ \{[\s\S]*$/,""):void 0===n?"undefined":"string"!=typeof n?JSON.stringify(n):n);return new Error(t)}}var _="validity",S=function(t){return ot(t)?t.toLowerCase():t},E=Object.prototype.hasOwnProperty,c=function(t){return ot(t)?t.toUpperCase():t};"i"!=="I".toLowerCase()&&(S=function(t){return ot(t)?t.replace(/[A-Z]/g,function(t){return String.fromCharCode(32|t.charCodeAt(0))}):t},c=function(t){return ot(t)?t.replace(/[a-z]/g,function(t){return String.fromCharCode(-33&t.charCodeAt(0))}):t});var et,nt,h,p,T,l=[].slice,t=[].push,u=Object.prototype.toString,f=x("ng"),d=v.angular||(v.angular={}),n=["0","0","0"];function j(t){if(null==t||M(t))return!1;var e=t.length;return!(1!==t.nodeType||!e)||(ot(t)||at(t)||0===e||"number"==typeof e&&0<e&&e-1 in t)}function rt(t,e,n){var r;if(t)if(ut(t))for(r in t)"prototype"==r||"length"==r||"name"==r||t.hasOwnProperty&&!t.hasOwnProperty(r)||e.call(n,t[r],r);else if(at(t)||j(t))for(r=0;r<t.length;r++)e.call(n,t[r],r);else if(t.forEach&&t.forEach!==rt)t.forEach(e,n);else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r);return t}function U(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e.sort()}function g(n){return function(t,e){n(e,t)}}function i(){for(var t,e=n.length;e;){if(57==(t=n[--e].charCodeAt(0)))return n[e]="A",n.join("");if(90!=t)return n[e]=String.fromCharCode(t+1),n.join("");n[e]="0"}return n.unshift("0"),n.join("")}function m(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function O(n){var t=n.$$hashKey;return rt(arguments,function(t){t!==n&&rt(t,function(t,e){n[e]=t})}),m(n,t),n}function C(t){return parseInt(t,10)}function $(t,e){return O(new(O(function(){},{prototype:t})),e)}function k(){}function y(t){return t}function w(t){return function(){return t}}function q(t){return void 0===t}function L(t){return void 0!==t}function it(t){return null!=t&&"object"==typeof t}function ot(t){return"string"==typeof t}function b(t){return"number"==typeof t}function A(t){return"[object Date]"===u.call(t)}et=C((/msie (\d+)/.exec(S(navigator.userAgent))||[])[1]),isNaN(et)&&(et=C((/trident\/.*; rv:(\d+)/.exec(S(navigator.userAgent))||[])[1])),k.$inject=[],y.$inject=[];var at=ut(Array.isArray)?Array.isArray:function(t){return"[object Array]"===u.call(t)};function ut(t){return"function"==typeof t}function P(t){return"[object RegExp]"===u.call(t)}function M(t){return t&&t.document&&t.location&&t.alert&&t.setInterval}function D(t){return t&&t.$evalAsync&&t.$watch}function R(t){return t&&ut(t.then)}var st=String.prototype.trim?function(t){return ot(t)?t.trim():t}:function(t){return ot(t)?t.replace(/^\s\s*/,"").replace(/\s\s*$/,""):t};function e(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}function I(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(e===t[n])return n;return-1}function N(t,e){var n=I(t,e);return 0<=n&&t.splice(n,1),e}function F(t,n,e,r){if(M(t)||D(t))throw f("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(n){if(t===n)throw f("cpi","Can't copy! Source and destination are identical.");if(e=e||[],r=r||[],it(t)){var i=I(e,t);if(-1!==i)return r[i];e.push(t),r.push(n)}var o;if(at(t))for(var a=n.length=0;a<t.length;a++)o=F(t[a],null,e,r),it(t[a])&&(e.push(t[a]),r.push(o)),n.push(o);else{var u=n.$$hashKey;for(var s in at(n)?n.length=0:rt(n,function(t,e){delete n[e]}),t)o=F(t[s],null,e,r),it(t[s])&&(e.push(t[s]),r.push(o)),n[s]=o;m(n,u)}}else(n=t)&&(at(t)?n=F(t,[],e,r):A(t)?n=new Date(t.getTime()):P(t)?(n=new RegExp(t.source,t.toString().match(/[^\/]*$/)[0])).lastIndex=t.lastIndex:it(t)&&(n=F(t,{},e,r)));return n}function ct(t,e){if(at(t)){e=e||[];for(var n=0;n<t.length;n++)e[n]=t[n]}else if(it(t))for(var r in e=e||{},t)!E.call(t,r)||"$"===r.charAt(0)&&"$"===r.charAt(1)||(e[r]=t[r]);return e||t}function lt(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;var n,r,i,o=typeof t;if(o==typeof e&&"object"==o){if(!at(t)){if(A(t))return!!A(e)&&(isNaN(t.getTime())&&isNaN(e.getTime())||t.getTime()===e.getTime());if(P(t)&&P(e))return t.toString()==e.toString();if(D(t)||D(e)||M(t)||M(e)||at(e))return!1;for(r in i={},t)if("$"!==r.charAt(0)&&!ut(t[r])){if(!lt(t[r],e[r]))return!1;i[r]=!0}for(r in e)if(!i.hasOwnProperty(r)&&"$"!==r.charAt(0)&&e[r]!==tt&&!ut(e[r]))return!1;return!0}if(!at(e))return!1;if((n=t.length)==e.length){for(r=0;r<n;r++)if(!lt(t[r],e[r]))return!1;return!0}}return!1}T=et<9?function(t){return(t=t.nodeName?t:t[0]).scopeName&&"HTML"!=t.scopeName?c(t.scopeName+":"+t.nodeName):t.nodeName}:function(t){return t.nodeName?t.nodeName:t[0].nodeName};var z=function(){if(L(z.isActive_))return z.isActive_;var e=!(!Z.querySelector("[ng-csp]")&&!Z.querySelector("[data-ng-csp]"));if(!e)try{new Function("")}catch(t){e=!0}return z.isActive_=e};function B(t,e,n){return t.concat(l.call(e,n))}function ft(t,e){return l.call(t,e||0)}function V(t,e){var n=2<arguments.length?ft(arguments,2):[];return!ut(e)||e instanceof RegExp?e:n.length?function(){return arguments.length?e.apply(t,n.concat(l.call(arguments,0))):e.apply(t,n)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}function r(t,e){var n=e;return"string"==typeof t&&"$"===t.charAt(0)?n=tt:M(e)?n="$WINDOW":e&&Z===e?n="$DOCUMENT":D(e)&&(n="$SCOPE"),n}function W(t,e){return void 0===t?tt:JSON.stringify(t,r,e?"  ":null)}function a(t){return ot(t)?JSON.parse(t):t}function H(t){if("function"==typeof t)t=!0;else if(t&&0!==t.length){var e=S(""+t);t=!("f"==e||"0"==e||"false"==e||"no"==e||"n"==e||"[]"==e)}else t=!1;return t}function dt(t){t=nt(t).clone();try{t.empty()}catch(t){}var e=nt("<div>").append(t).html();try{return 3===t[0].nodeType?S(e):e.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(t,e){return"<"+S(e)})}catch(t){return S(e)}}function o(t){try{return decodeURIComponent(t)}catch(t){}}function s(t){var n,r,i={};return rt((t||"").split("&"),function(t){if(t&&(n=t.replace(/\+/g,"%20").split("="),L(r=o(n[0])))){var e=!L(n[1])||o(n[1]);E.call(i,r)?at(i[r])?i[r].push(e):i[r]=[i[r],e]:i[r]=e}}),i}function G(t){var n=[];return rt(t,function(t,e){at(t)?rt(t,function(t){n.push(Y(e,!0)+(!0===t?"":"="+Y(t,!0)))}):n.push(Y(e,!0)+(!0===t?"":"="+Y(t,!0)))}),n.length?n.join("&"):""}function Q(t){return Y(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Y(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,e?"%20":"+")}function X(n,r){var e=function(){if((n=nt(n)).injector()){var t=n[0]===Z?"document":dt(n);throw f("btstrpd","App Already Bootstrapped with this Element '{0}'",t.replace(/</,"&lt;").replace(/>/,"&gt;"))}(r=r||[]).unshift(["$provide",function(t){t.value("$rootElement",n)}]),r.unshift("ng");var e=ue(r);return e.invoke(["$rootScope","$rootElement","$compile","$injector","$animate",function(t,e,n,r,i){t.$apply(function(){e.data("$injector",r),n(e)(t)})}]),e},t=/^NG_DEFER_BOOTSTRAP!/;if(v&&!t.test(v.name))return e();v.name=v.name.replace(t,""),d.resumeBootstrap=function(t){rt(t,function(t){r.push(t)}),e()}}var J=/[A-Z]/g;function pt(t,n){return n=n||"_",t.replace(J,function(t,e){return(e?n:"")+t.toLowerCase()})}function ht(t,e,n){if(!t)throw f("areq","Argument '{0}' is {1}",e||"?",n||"required");return t}function K(t,e,n){return n&&at(t)&&(t=t[t.length-1]),ht(ut(t),e,"not a function, got "+(t&&"object"==typeof t?t.constructor.name||"Object":typeof t)),t}function vt(t,e){if("hasOwnProperty"===t)throw f("badname","hasOwnProperty is not a valid {0} name",e)}function gt(t,e,n){if(!e)return t;for(var r,i=e.split("."),o=t,a=i.length,u=0;u<a;u++)r=i[u],t&&(t=(o=t)[r]);return!n&&ut(t)?V(o,t):t}function mt(t){var e=t[0],n=t[t.length-1];if(e===n)return nt(e);var r=e,i=[r];do{if(!(r=r.nextSibling))break;i.push(r)}while(r!==n);return nt(i)}var $t={full:"1.2.27",major:1,minor:2,dot:27,codeName:"prime-factorization"};Dt.expando="ng339";var yt=Dt.cache={},wt=1,bt=v.document.addEventListener?function(t,e,n){t.addEventListener(e,n,!1)}:function(t,e,n){t.attachEvent("on"+e,n)},_t=v.document.removeEventListener?function(t,e,n){t.removeEventListener(e,n,!1)}:function(t,e,n){t.detachEvent("on"+e,n)};Dt._data=function(t){return this.cache[t[this.expando]]||{}};var xt=/([\:\-\_]+(.))/g,Et=/^moz([A-Z])/,St=x("jqLite");function Ct(t){return t.replace(xt,function(t,e,n,r){return r?n.toUpperCase():n}).replace(Et,"Moz$1")}function kt(t,l,f,d){var p=h.fn[t];function e(t){var e,n,r,i,o,a,u,s=f&&t?[this.filter(t)]:[this],c=l;if(!d||null!=t)for(;s.length;)for(n=0,r=(e=s.shift()).length;n<r;n++)for(i=nt(e[n]),c?i.triggerHandler("$destroy"):c=!c,o=0,a=(u=i.children()).length;o<a;o++)s.push(h(u[o]));return p.apply(this,arguments)}p=p.$original||p,e.$original=p,h.fn[t]=e}var qt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,At=/<|&#?\w+;/,jt=/<([\w:]+)/,Pt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Mt={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Tt(t){return!At.test(t)}function Ot(t,e){var n;return e=e||Z,(n=qt.exec(t))?[e.createElement(n[1])]:function(t,e){var n,r,i,o,a,u,s=e.createDocumentFragment(),c=[];if(Tt(t))c.push(e.createTextNode(t));else{for(n=s.appendChild(e.createElement("div")),r=(jt.exec(t)||["",""])[1].toLowerCase(),i=Mt[r]||Mt._default,n.innerHTML="<div>&#160;</div>"+i[1]+t.replace(Pt,"<$1></$2>")+i[2],n.removeChild(n.firstChild),o=i[0];o--;)n=n.lastChild;for(a=0,u=n.childNodes.length;a<u;++a)c.push(n.childNodes[a]);(n=s.firstChild).textContent=""}return s.textContent="",s.innerHTML="",c}(t,e)}function Dt(t){if(t instanceof Dt)return t;if(ot(t)&&(t=st(t)),!(this instanceof Dt)){if(ot(t)&&"<"!=t.charAt(0))throw St("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new Dt(t)}ot(t)?(Wt(this,Ot(t)),nt(Z.createDocumentFragment()).append(this)):Wt(this,t)}function Rt(t){return t.cloneNode(!0)}function It(t){Ut(t);for(var e=0,n=t.childNodes||[];e<n.length;e++)It(n[e])}function Nt(n,t,e,r){if(L(r))throw St("offargs","jqLite#off() does not support the `selector` argument");var i=Lt(n,"events");Lt(n,"handle")&&(q(t)?rt(i,function(t,e){_t(n,e,t),delete i[e]}):rt(t.split(" "),function(t){q(e)?(_t(n,t,i[t]),delete i[t]):N(i[t]||[],e)}))}function Ut(t,e){var n=t.ng339,r=yt[n];if(r){if(e)return void delete yt[n].data[e];r.handle&&(r.events.$destroy&&r.handle({},"$destroy"),Nt(t)),delete yt[n],t.ng339=tt}}function Lt(t,e,n){var r=t.ng339,i=yt[r||-1];if(!L(n))return i&&i[e];i||(t.ng339=r=++wt,i=yt[r]={}),i[e]=n}function Ft(t,e,n){var r=Lt(t,"data"),i=L(n),o=!i&&L(e),a=o&&!it(e);if(r||a||Lt(t,"data",r={}),i)r[e]=n;else{if(!o)return r;if(a)return r&&r[e];O(r,e)}}function zt(t,e){return!!t.getAttribute&&-1<(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")}function Bt(e,t){t&&e.setAttribute&&rt(t.split(" "),function(t){e.setAttribute("class",st((" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+st(t)+" "," ")))})}function Vt(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");rt(e.split(" "),function(t){t=st(t),-1===n.indexOf(" "+t+" ")&&(n+=t+" ")}),t.setAttribute("class",st(n))}}function Wt(t,e){if(e){e=e.nodeName||!L(e.length)||M(e)?[e]:e;for(var n=0;n<e.length;n++)t.push(e[n])}}function Ht(t,e){return Gt(t,"$"+(e||"ngController")+"Controller")}function Gt(t,e,n){9==t.nodeType&&(t=t.documentElement);for(var r=at(e)?e:[e];t;){for(var i=0,o=r.length;i<o;i++)if((n=nt.data(t,r[i]))!==tt)return n;t=t.parentNode||11===t.nodeType&&t.host}}function Qt(t){for(var e=0,n=t.childNodes;e<n.length;e++)It(n[e]);for(;t.firstChild;)t.removeChild(t.firstChild)}Mt.optgroup=Mt.option,Mt.tbody=Mt.tfoot=Mt.colgroup=Mt.caption=Mt.thead,Mt.th=Mt.td;var Yt=Dt.prototype={ready:function(t){var e=!1;function n(){e||(e=!0,t())}"complete"===Z.readyState?setTimeout(n):(this.on("DOMContentLoaded",n),Dt(v).on("load",n))},toString:function(){var e=[];return rt(this,function(t){e.push(""+t)}),"["+e.join(", ")+"]"},eq:function(t){return nt(0<=t?this[t]:this[this.length+t])},length:0,push:t,sort:[].sort,splice:[].splice},Xt={};rt("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(t){Xt[S(t)]=t});var Jt={};function Kt(t,e){var n=Xt[e.toLowerCase()];return n&&Jt[t.nodeName]&&n}function Zt(t,e){var n,r=typeof t;return"function"==r||"object"==r&&null!==t?"function"==typeof(n=t.$$hashKey)?n=t.$$hashKey():n===tt&&(n=t.$$hashKey=(e||i)()):n=t,r+":"+n}function te(t,e){if(e){var n=0;this.nextUid=function(){return++n}}rt(t,this.put,this)}rt("input,select,option,textarea,button,form,details".split(","),function(t){Jt[c(t)]=!0}),rt({data:Ft,removeData:Ut},function(t,e){Dt[e]=t}),rt({data:Ft,inheritedData:Gt,scope:function(t){return nt.data(t,"$scope")||Gt(t.parentNode||t,["$isolateScope","$scope"])},isolateScope:function(t){return nt.data(t,"$isolateScope")||nt.data(t,"$isolateScopeNoTemplate")},controller:Ht,injector:function(t){return Gt(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:zt,css:function(t,e,n){var r;if(e=Ct(e),!L(n))return et<=8&&""===(r=t.currentStyle&&t.currentStyle[e])&&(r="auto"),r=r||t.style[e],et<=8&&(r=""===r?tt:r),r;t.style[e]=n},attr:function(t,e,n){var r=S(e);if(Xt[r]){if(!L(n))return t[e]||(t.attributes.getNamedItem(e)||k).specified?r:tt;n?(t[e]=!0,t.setAttribute(e,r)):(t[e]=!1,t.removeAttribute(r))}else if(L(n))t.setAttribute(e,n);else if(t.getAttribute){var i=t.getAttribute(e,2);return null===i?tt:i}},prop:function(t,e,n){if(!L(n))return t[e];t[e]=n},text:function(){var r=[];return et<9?(r[1]="innerText",r[3]="nodeValue"):r[1]=r[3]="textContent",t.$dv="",t;function t(t,e){var n=r[t.nodeType];if(q(e))return n?t[n]:"";t[n]=e}}(),val:function(t,e){if(q(e)){if("SELECT"===T(t)&&t.multiple){var n=[];return rt(t.options,function(t){t.selected&&n.push(t.value||t.text)}),0===n.length?null:n}return t.value}t.value=e},html:function(t,e){if(q(e))return t.innerHTML;for(var n=0,r=t.childNodes;n<r.length;n++)It(r[n]);t.innerHTML=e},empty:Qt},function(c,t){Dt.prototype[t]=function(t,e){var n,r,i=this.length;if(c!==Qt&&(2==c.length&&c!==zt&&c!==Ht?t:e)===tt){if(it(t)){for(n=0;n<i;n++)if(c===Ft)c(this[n],t);else for(r in t)c(this[n],r,t[r]);return this}for(var o=c.$dv,a=o===tt?Math.min(i,1):i,u=0;u<a;u++){var s=c(this[u],t,e);o=o?o+s:s}return o}for(n=0;n<i;n++)c(this[n],t,e);return this}}),rt({removeData:Ut,dealoc:It,on:function e(i,t,o,n){if(L(n))throw St("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");var r,a,u,s=Lt(i,"events"),c=Lt(i,"handle");s||Lt(i,"events",s={}),c||Lt(i,"handle",(a=s,(u=function(e,t){if(e.preventDefault||(e.preventDefault=function(){e.returnValue=!1}),e.stopPropagation||(e.stopPropagation=function(){e.cancelBubble=!0}),e.target||(e.target=e.srcElement||Z),q(e.defaultPrevented)){var n=e.preventDefault;e.preventDefault=function(){e.defaultPrevented=!0,n.call(e)},e.defaultPrevented=!1}e.isDefaultPrevented=function(){return e.defaultPrevented||!1===e.returnValue},rt(ct(a[t||e.type]||[]),function(t){t.call(r,e)}),et<=8?(e.preventDefault=null,e.stopPropagation=null,e.isDefaultPrevented=null):(delete e.preventDefault,delete e.stopPropagation,delete e.isDefaultPrevented)}).elem=r=i,c=u)),rt(t.split(" "),function(n){var t=s[n];if(!t){if("mouseenter"==n||"mouseleave"==n){var r=Z.body.contains||Z.body.compareDocumentPosition?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1};s[n]=[];e(i,{mouseleave:"mouseout",mouseenter:"mouseover"}[n],function(t){var e=t.relatedTarget;e&&(e===this||r(this,e))||c(t,n)})}else bt(i,n,c),s[n]=[];t=s[n]}t.push(o)})},off:Nt,one:function(e,n,r){(e=nt(e)).on(n,function t(){e.off(n,r),e.off(n,t)}),e.on(n,r)},replaceWith:function(e,t){var n,r=e.parentNode;It(e),rt(new Dt(t),function(t){n?r.insertBefore(t,n.nextSibling):r.replaceChild(t,e),n=t})},children:function(t){var e=[];return rt(t.childNodes,function(t){1===t.nodeType&&e.push(t)}),e},contents:function(t){return t.contentDocument||t.childNodes||[]},append:function(e,t){rt(new Dt(t),function(t){1!==e.nodeType&&11!==e.nodeType||e.appendChild(t)})},prepend:function(e,t){if(1===e.nodeType){var n=e.firstChild;rt(new Dt(t),function(t){e.insertBefore(t,n)})}},wrap:function(t,e){e=nt(e)[0];var n=t.parentNode;n&&n.replaceChild(e,t),e.appendChild(t)},remove:function(t){It(t);var e=t.parentNode;e&&e.removeChild(t)},after:function(t,e){var n=t,r=t.parentNode;rt(new Dt(e),function(t){r.insertBefore(t,n.nextSibling),n=t})},addClass:Vt,removeClass:Bt,toggleClass:function(n,t,r){t&&rt(t.split(" "),function(t){var e=r;q(e)&&(e=!zt(n,t)),(e?Vt:Bt)(n,t)})},parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},next:function(t){if(t.nextElementSibling)return t.nextElementSibling;for(var e=t.nextSibling;null!=e&&1!==e.nodeType;)e=e.nextSibling;return e},find:function(t,e){return t.getElementsByTagName?t.getElementsByTagName(e):[]},clone:Rt,triggerHandler:function(e,t,n){var r,i,o,a=t.type||t,u=(Lt(e,"events")||{})[a];u&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopPropagation:k,type:a,target:e},t.type&&(r=O(r,t)),i=ct(u),o=n?[r].concat(n):[r],rt(i,function(t){t.apply(e,o)}))}},function(o,t){Dt.prototype[t]=function(t,e,n){for(var r,i=0;i<this.length;i++)q(r)?L(r=o(this[i],t,e,n))&&(r=nt(r)):Wt(r,o(this[i],t,e,n));return L(r)?r:this},Dt.prototype.bind=Dt.prototype.on,Dt.prototype.unbind=Dt.prototype.off}),te.prototype={put:function(t,e){this[Zt(t,this.nextUid)]=e},get:function(t){return this[Zt(t,this.nextUid)]},remove:function(t){var e=this[t=Zt(t,this.nextUid)];return delete this[t],e}};var ee=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,ne=/,/,re=/^\s*(_?)(\S+?)\1\s*$/,ie=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,oe=x("$injector");function ae(t){var r,e;return"function"==typeof t?(r=t.$inject)||(r=[],t.length&&rt(t.toString().replace(ie,"").match(ee)[1].split(ne),function(t){t.replace(re,function(t,e,n){r.push(n)})}),t.$inject=r):at(t)?(K(t[e=t.length-1],"fn"),r=t.slice(0,e)):K(t,"fn",!0),r}function ue(t){var r={},i="Provider",a=[],c=new te([],!0),u={$provide:{provider:e(s),factory:e(f),service:e(function(t,e){return f(t,["$injector",function(t){return t.instantiate(e)}])}),value:e(function(t,e){return f(t,w(e))}),constant:e(function(t,e){vt(t,"constant"),u[t]=e,n[t]=e}),decorator:function(t,e){var n=l.get(t+i),r=n.$get;n.$get=function(){var t=o.invoke(r,n);return o.invoke(e,null,{$delegate:t})}}}},l=u.$injector=d(u,function(){throw oe("unpr","Unknown provider: {0}",a.join(" <- "))}),n={},o=n.$injector=d(n,function(t){var e=l.get(t+i);return o.invoke(e.$get,e)});return rt(function r(t){var i,o,a,u,s=[];rt(t,function(e){if(!c.get(e)){c.put(e,!0);try{if(ot(e))for(i=p(e),s=s.concat(r(i.requires)).concat(i._runBlocks),o=i._invokeQueue,a=0,u=o.length;a<u;a++){var t=o[a],n=l.get(t[0]);n[t[1]].apply(n,t[2])}else ut(e)?s.push(l.invoke(e)):at(e)?s.push(l.invoke(e)):K(e,"module")}catch(t){throw at(e)&&(e=e[e.length-1]),t.message&&t.stack&&-1==t.stack.indexOf(t.message)&&(t=t.message+"\n"+t.stack),oe("modulerr","Failed to instantiate module {0} due to:\n{1}",e,t.stack||t.message||t)}}});return s}(t),function(t){o.invoke(t||k)}),o;function e(n){return function(t,e){if(!it(t))return n(t,e);rt(t,g(n))}}function s(t,e){if(vt(t,"service"),(ut(e)||at(e))&&(e=l.instantiate(e)),!e.$get)throw oe("pget","Provider '{0}' must define $get factory method.",t);return u[t+i]=e}function f(t,e){return s(t,{$get:e})}function d(n,t){function s(e){if(n.hasOwnProperty(e)){if(n[e]===r)throw oe("cdep","Circular dependency found: {0}",e+" <- "+a.join(" <- "));return n[e]}try{return a.unshift(e),n[e]=r,n[e]=t(e)}catch(t){throw n[e]===r&&delete n[e],t}finally{a.shift()}}function o(t,e,n){var r,i,o,a=[],u=ae(t);for(i=0,r=u.length;i<r;i++){if("string"!=typeof(o=u[i]))throw oe("itkn","Incorrect injection token! Expected service name as string, got {0}",o);a.push(n&&n.hasOwnProperty(o)?n[o]:s(o))}return at(t)&&(t=t[r]),t.apply(e,a)}return{invoke:o,instantiate:function(t,e){var n,r,i=function(){};return i.prototype=(at(t)?t[t.length-1]:t).prototype,it(r=o(t,n=new i,e))||ut(r)?r:n},get:s,annotate:ae,has:function(t){return u.hasOwnProperty(t+i)||n.hasOwnProperty(t)}}}}function se(){var n=!0;this.disableAutoScrolling=function(){n=!1},this.$get=["$window","$location","$rootScope",function(i,o,t){var a=i.document;function e(){var t,e,n,r=o.hash();r?(t=a.getElementById(r))?t.scrollIntoView():(e=a.getElementsByName(r),n=null,rt(e,function(t){n||"a"!==S(t.nodeName)||(n=t)}),(t=n)?t.scrollIntoView():"top"===r&&i.scrollTo(0,0)):i.scrollTo(0,0)}return n&&t.$watch(function(){return o.hash()},function(){t.$evalAsync(e)}),e}]}var ce=x("$animate"),le=["$provide",function(r){this.$$selectors={},this.register=function(t,e){var n=t+"-animation";if(t&&"."!=t.charAt(0))throw ce("notcsel","Expecting class selector starting with '.' got '{0}'.",t);this.$$selectors[t.substr(1)]=n,r.factory(n,e)},this.classNameFilter=function(t){return 1===arguments.length&&(this.$$classNameFilter=t instanceof RegExp?t:null),this.$$classNameFilter},this.$get=["$timeout","$$asyncCallback",function(t,e){function i(t){t&&e(t)}return{enter:function(t,e,n,r){n?n.after(t):(e&&e[0]||(e=n.parent()),e.append(t)),i(r)},leave:function(t,e){t.remove(),i(e)},move:function(t,e,n,r){this.enter(t,e,n,r)},addClass:function(t,e,n){e=ot(e)?e:at(e)?e.join(" "):"",rt(t,function(t){Vt(t,e)}),i(n)},removeClass:function(t,e,n){e=ot(e)?e:at(e)?e.join(" "):"",rt(t,function(t){Bt(t,e)}),i(n)},setClass:function(t,e,n,r){rt(t,function(t){Vt(t,e),Bt(t,n)}),i(r)},enabled:k}}]}];function fe(){this.$get=["$$rAF","$timeout",function(e,n){return e.supported?function(t){return e(t)}:function(t){return n(t,0,!1)}}]}function de(r,t,u,i){var o=this,s=t[0],a=r.location,c=r.history,l=r.setTimeout,e=r.clearTimeout,f={};o.isMock=!1;var d=0,n=[];function p(t){try{t.apply(null,ft(arguments,1))}finally{if(0===--d)for(;n.length;)try{n.pop()()}catch(t){u.error(t)}}}o.$$completeOutstandingRequest=p,o.$$incOutstandingRequestCount=function(){d++},o.notifyWhenNoOutstandingRequests=function(t){rt(v,function(t){t()}),0===d?t():n.push(t)};var h,v=[];o.addPollFn=function(t){var e,n;return q(h)&&(e=100,n=l,function t(){rt(v,function(t){t()}),h=n(t,e)}()),v.push(t),t};var g=a.href,m=t.find("base"),$=null;o.url=function(t,e){if(a!==r.location&&(a=r.location),c!==r.history&&(c=r.history),t){if(g==t)return;var n=g&&ze(g)===ze(t);return g=t,!n&&i.history?e?c.replaceState(null,"",t):(c.pushState(null,"",t),m.attr("href",m.attr("href"))):(n||($=t),e?a.replace(t):a.href=t),o}return $||a.href.replace(/%27/g,"'")};var y=[],w=!1;function b(){g!=o.url()&&(g=o.url(),rt(y,function(t){t(o.url())}))}o.onUrlChange=function(t){return w||(i.history&&nt(r).on("popstate",b),i.hashchange?nt(r).on("hashchange",b):o.addPollFn(b),w=!0),y.push(t),t},o.$$checkUrlChange=b,o.baseHref=function(){var t=m.attr("href");return t?t.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var _={},x="",E=o.baseHref();o.cookies=function(t,e){var n,r,i,o,a;if(!t){if(s.cookie!==x)for(r=(x=s.cookie).split("; "),_={},o=0;o<r.length;o++)0<(a=(i=r[o]).indexOf("="))&&(t=unescape(i.substring(0,a)),_[t]===tt&&(_[t]=unescape(i.substring(a+1))));return _}e===tt?s.cookie=escape(t)+"=;path="+E+";expires=Thu, 01 Jan 1970 00:00:00 GMT":ot(e)&&4096<(n=(s.cookie=escape(t)+"="+escape(e)+";path="+E).length+1)&&u.warn("Cookie '"+t+"' possibly not set or overflowed because it was too large ("+n+" > 4096 bytes)!")},o.defer=function(t,e){var n;return d++,n=l(function(){delete f[n],p(t)},e||0),f[n]=!0,n},o.defer.cancel=function(t){return!!f[t]&&(delete f[t],e(t),p(k),!0)}}function pe(){this.$get=["$window","$log","$sniffer","$document",function(t,e,n,r){return new de(t,r,e,n)}]}function he(){this.$get=function(){var f={};function t(t,e){if(t in f)throw x("$cacheFactory")("iid","CacheId '{0}' is already taken!",t);var n=0,r=O({},e,{id:t}),i={},o=e&&e.capacity||Number.MAX_VALUE,a={},u=null,s=null;return f[t]={put:function(t,e){o<Number.MAX_VALUE&&c(a[t]||(a[t]={key:t}));if(!q(e))return t in i||n++,i[t]=e,o<n&&this.remove(s.key),e},get:function(t){if(o<Number.MAX_VALUE){var e=a[t];if(!e)return;c(e)}return i[t]},remove:function(t){if(o<Number.MAX_VALUE){var e=a[t];if(!e)return;e==u&&(u=e.p),e==s&&(s=e.n),l(e.n,e.p),delete a[t]}delete i[t],n--},removeAll:function(){i={},n=0,a={},u=s=null},destroy:function(){a=r=i=null,delete f[t]},info:function(){return O({},r,{size:n})}};function c(t){t!=u&&(s?s==t&&(s=t.n):s=t,l(t.n,t.p),l(t,u),(u=t).n=null)}function l(t,e){t!=e&&(t&&(t.p=e),e&&(e.n=t))}}return t.info=function(){var n={};return rt(f,function(t,e){n[e]=t.info()}),n},t.get=function(t){return f[t]},t}}function ve(){this.$get=["$cacheFactory",function(t){return t("templates")}]}var ge=x("$compile");function me(n,e){var p={},h="Directive",P=/^\s*directive\:\s*([\d\w_\-]+)\s+(.*)$/,M=/(([\d\w_\-]+)(?:\:([^;]+))?;?)/,c=/^(on[a-z]+|formaction)$/;this.directive=function t(a,e){return vt(a,"directive"),ot(a)?(ht(e,"directiveFactory"),p.hasOwnProperty(a)||(p[a]=[],n.factory(a+h,["$injector","$exceptionHandler",function(r,i){var o=[];return rt(p[a],function(t,e){try{var n=r.invoke(t);ut(n)?n={compile:w(n)}:!n.compile&&n.link&&(n.compile=w(n.link)),n.priority=n.priority||0,n.index=e,n.name=n.name||a,n.require=n.require||n.controller&&n.name,n.restrict=n.restrict||"A",o.push(n)}catch(t){i(t)}}),o}])),p[a].push(e)):rt(a,g(t)),this},this.aHrefSanitizationWhitelist=function(t){return L(t)?(e.aHrefSanitizationWhitelist(t),this):e.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(t){return L(t)?(e.imgSrcSanitizationWhitelist(t),this):e.imgSrcSanitizationWhitelist()},this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(d,R,I,t,e,N,U,o,n,u,i,s){var L=function(t,e){this.$$element=t,this.$attr=e||{}};L.prototype={$normalize:ye,$addClass:function(t){t&&0<t.length&&i.addClass(this.$$element,t)},$removeClass:function(t){t&&0<t.length&&i.removeClass(this.$$element,t)},$updateClass:function(t,e){var n=we(t,e),r=we(e,t);0===n.length?i.removeClass(this.$$element,r):0===r.length?i.addClass(this.$$element,n):i.setClass(this.$$element,n,r)},$set:function(t,e,n,r){var i,o=Kt(this.$$element[0],t);o&&(this.$$element.prop(t,e),r=o),this[t]=e,r?this.$attr[t]=r:(r=this.$attr[t])||(this.$attr[t]=r=pt(t,"-")),("A"===(i=T(this.$$element))&&"href"===t||"IMG"===i&&"src"===t)&&(this[t]=e=s(e,"src"===t)),!1!==n&&(null===e||e===tt?this.$$element.removeAttr(r):this.$$element.attr(r,e));var a=this.$$observers;a&&rt(a[t],function(t){try{t(e)}catch(t){I(t)}})},$observe:function(t,e){var n=this,r=n.$$observers||(n.$$observers={}),i=r[t]||(r[t]=[]);return i.push(e),o.$evalAsync(function(){i.$$inter||e(n[t])}),e}};var r=R.startSymbol(),a=R.endSymbol(),F="{{"==r||"}}"==a?y:function(t){return t.replace(/\{\{/g,r).replace(/}}/g,a)},E=/^ngAttr[A-Z]/;return z;function z(s,t,e,n,r){s instanceof nt||(s=nt(s)),rt(s,function(t,e){3==t.nodeType&&t.nodeValue.match(/\S+/)&&(s[e]=t=nt(t).wrap("<span></span>").parent()[0])});var c=k(s,t,s,e,n,r);return B(s,"ng-scope"),function(t,e,n,r){ht(t,"scope");var i=e?Yt.clone.call(s):s;rt(n,function(t,e){i.data("$"+e+"Controller",t)});for(var o=0,a=i.length;o<a;o++){var u=i[o].nodeType;1!==u&&9!==u||i.eq(o).data("$scope",t)}return e&&e(i,t),c&&c(t,i,i,r),i}}function B(t,e){try{t.addClass(e)}catch(t){}}function k(t,h,e,n,r,i){for(var o,a,u,s,c,l,v=[],f=0;f<t.length;f++)o=new L,(u=(a=V(t[f],[],o,0===f?n:tt,r)).length?A(a,t[f],o,h,e,null,[],[],i):null)&&u.scope&&B(o.$$element,"ng-scope"),c=u&&u.terminal||!(s=t[f].childNodes)||!s.length?null:k(s,u?(u.transcludeOnThisElement||!u.templateOnThisElement)&&u.transclude:h),v.push(u,c),l=l||u||c,i=null;return l?function(t,e,n,r){var i,o,a,u,s,c,l,f,d=e.length,p=new Array(d);for(s=0;s<d;s++)p[s]=e[s];for(l=s=0,c=v.length;s<c;l++)a=p[l],i=v[s++],o=v[s++],i?(i.scope?(u=t.$new(),nt.data(a,"$scope",u)):u=t,f=i.transcludeOnThisElement?q(t,i.transclude,r):!i.templateOnThisElement&&r?r:!r&&h?q(t,h):null,i(o,u,a,n,f)):o&&o(t,a.childNodes,tt,r)}:null}function q(o,a,u){return function(t,e,n){var r=!1;t||(r=(t=o.$new()).$$transcluded=!0);var i=a(t,e,n,u);return r&&i.on("$destroy",function(){t.$destroy()}),i}}function V(t,e,n,r,i){var o,a,u,s,c,l=t.nodeType,f=n.$attr;switch(l){case 1:S(e,ye(T(t).toLowerCase()),"E",r,i);for(var d,p,h,v,g,m,$=t.attributes,y=0,w=$&&$.length;y<w;y++){var b=!1,_=!1;if(d=$[y],!et||8<=et||d.specified){p=d.name,g=st(d.value),v=ye(p),(m=E.test(v))&&(p=pt(v.substr(6),"-"));var x=v.replace(/(Start|End)$/,"");v===x+"Start"&&(_=(b=p).substr(0,p.length-5)+"end",p=p.substr(0,p.length-6)),f[h=ye(p.toLowerCase())]=p,!m&&n.hasOwnProperty(h)||(n[h]=g,Kt(t,h)&&(n[h]=!0)),j(t,e,g,h),S(e,h,"A",r,i,b,_)}}if(ot(a=t.className)&&""!==a)for(;o=M.exec(a);)S(e,h=ye(o[2]),"C",r,i)&&(n[h]=st(o[3])),a=a.substr(o.index+o[0].length);break;case 3:u=e,s=t.nodeValue,(c=R(s,!0))&&u.push({priority:0,compile:function(t){var e=t.parent(),i=e.length;return i&&B(t.parent(),"ng-binding"),function(t,e){var n=e.parent(),r=n.data("$binding")||[];r.push(c),n.data("$binding",r),i||B(n,"ng-binding"),t.$watch(c,function(t){e[0].nodeValue=t})}}});break;case 8:try{(o=P.exec(t.nodeValue))&&S(e,h=ye(o[1]),"M",r,i)&&(n[h]=st(o[2]))}catch(t){}}return e.sort(C),e}function W(t,e,n){var r=[],i=0;if(e&&t.hasAttribute&&t.hasAttribute(e))do{if(!t)throw ge("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",e,n);1==t.nodeType&&(t.hasAttribute(e)&&i++,t.hasAttribute(n)&&i--),r.push(t),t=t.nextSibling}while(0<i);else r.push(t);return nt(r)}function H(o,a,u){return function(t,e,n,r,i){return e=W(e[0],a,u),o(t,e,n,r,i)}}function A(t,g,m,e,n,r,$,y,i){i=i||{};for(var o,a,u,s,c,l,f=-Number.MAX_VALUE,w=i.controllerDirectives,b=i.newIsolateScopeDirective,_=i.templateDirective,d=i.nonTlbTranscludeDirective,p=!1,h=!1,x=i.hasElementTranscludeDirective,v=m.$$element=nt(g),E=r,S=e,C=0,k=t.length;C<k;C++){var q=(a=t[C]).$$start,A=a.$$end;if(q&&(v=W(g,q,A)),s=tt,f>a.priority)break;if((l=a.scope)&&(o=o||a,a.templateUrl||(X("new/isolated scope",b,a,v),it(l)&&(b=a))),u=a.name,!a.templateUrl&&a.controller&&(l=a.controller,X("'"+u+"' controller",(w=w||{})[u],a,v),w[u]=a),(l=a.transclude)&&(p=!0,a.$$tlb||(X("transclusion",d,a,v),d=a),"element"==l?(x=!0,f=a.priority,s=v,v=m.$$element=nt(Z.createComment(" "+u+": "+m[u]+" ")),g=v[0],J(n,ft(s),g),S=z(s,e,f,E&&E.name,{nonTlbTranscludeDirective:d})):(s=nt(Rt(g)).contents(),v.empty(),S=z(s,e))),a.template)if(h=!0,X("template",_,a,v),l=ut((_=a).template)?a.template(v,m):a.template,l=F(l),a.replace){if(E=a,s=Tt(l)?[]:nt(st(l)),g=s[0],1!=s.length||1!==g.nodeType)throw ge("tplrt","Template for directive '{0}' must have exactly one root element. {1}",u,"");J(n,v,g);var j={$attr:{}},P=V(g,[],j),M=t.splice(C+1,t.length-(C+1));b&&G(P),t=t.concat(P).concat(M),Q(m,j),k=t.length}else v.html(l);if(a.templateUrl)h=!0,X("template",_,a,v),(_=a).replace&&(E=a),D=Y(t.splice(C,t.length-C),v,m,n,p&&S,$,y,{controllerDirectives:w,newIsolateScopeDirective:b,templateDirective:_,nonTlbTranscludeDirective:d}),k=t.length;else if(a.compile)try{ut(c=a.compile(v,m,S))?T(null,c,q,A):c&&T(c.pre,c.post,q,A)}catch(t){I(t,dt(v))}a.terminal&&(D.terminal=!0,f=Math.max(f,a.priority))}return D.scope=o&&!0===o.scope,D.transcludeOnThisElement=p,D.templateOnThisElement=h,D.transclude=S,i.hasElementTranscludeDirective=x,D;function T(t,e,n,r){t&&(n&&(t=H(t,n,r)),t.require=a.require,t.directiveName=u,(b===a||a.$$isolateScope)&&(t=K(t,{isolateScope:!0})),$.push(t)),e&&(n&&(e=H(e,n,r)),e.require=a.require,e.directiveName=u,(b===a||a.$$isolateScope)&&(e=K(e,{isolateScope:!0})),y.push(e))}function O(e,t,n,r){var i,o="data",a=!1;if(ot(t)){for(;"^"==(i=t.charAt(0))||"?"==i;)t=t.substr(1),"^"==i&&(o="inheritedData"),a=a||"?"==i;if(i=null,r&&"data"===o&&(i=r[t]),!(i=i||n[o]("$"+t+"Controller"))&&!a)throw ge("ctreq","Controller '{0}', required by directive '{1}', can't be found!",t,e);return i}return at(t)&&(i=[],rt(t,function(t){i.push(O(e,t,n,r))})),i}function D(t,l,e,n,r){var f,i,o,a,u,s,d,c,p={};if(f=g===e?m:ct(m,new L(nt(e),m.$attr)),i=f.$$element,b){var h=/^\s*([@=&])(\??)\s*(\w*)\s*$/;d=l.$new(!0),!_||_!==b&&_!==b.$$originalDirective?i.data("$isolateScopeNoTemplate",d):i.data("$isolateScope",d),B(i,"ng-isolate-scope"),rt(b.scope,function(t,e){var n,r,i,o,a=t.match(h)||[],u=a[3]||e,s="?"==a[2],c=a[1];switch(d.$$isolateBindings[e]=c+u,c){case"@":f.$observe(u,function(t){d[e]=t}),f.$$observers[u].$$scope=l,f[u]&&(d[e]=R(f[u])(l));break;case"=":if(s&&!f[u])return;r=N(f[u]),o=r.literal?lt:function(t,e){return t===e||t!=t&&e!=e},i=r.assign||function(){throw n=d[e]=r(l),ge("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",f[u],b.name)},n=d[e]=r(l),d.$watch(function(){var t=r(l);return o(t,d[e])||(o(t,n)?i(l,t=d[e]):d[e]=t),n=t},null,r.literal);break;case"&":r=N(f[u]),d[e]=function(t){return r(l,t)};break;default:throw ge("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",b.name,e,t)}})}for(c=r&&function(t,e){var n;arguments.length<2&&(e=t,t=tt);x&&(n=p);return r(t,e,n)},w&&rt(w,function(t){var e,n={$scope:t===b||t.$$isolateScope?d:l,$element:i,$attrs:f,$transclude:c};"@"==(s=t.controller)&&(s=f[t.name]),e=U(s,n),p[t.name]=e,x||i.data("$"+t.name+"Controller",e),t.controllerAs&&(n.$scope[t.controllerAs]=e)}),o=0,a=$.length;o<a;o++)try{(u=$[o])(u.isolateScope?d:l,i,f,u.require&&O(u.directiveName,u.require,i,p),c)}catch(t){I(t,dt(i))}var v=l;for(b&&(b.template||null===b.templateUrl)&&(v=d),t&&t(v,e.childNodes,tt,r),o=y.length-1;0<=o;o--)try{(u=y[o])(u.isolateScope?d:l,i,f,u.require&&O(u.directiveName,u.require,i,p),c)}catch(t){I(t,dt(i))}}}function G(t){for(var e=0,n=t.length;e<n;e++)t[e]=$(t[e],{$$isolateScope:!0})}function S(t,e,n,r,i,o,a){if(e===i)return null;var u=null;if(p.hasOwnProperty(e))for(var s,c=d.get(e+h),l=0,f=c.length;l<f;l++)try{s=c[l],(r===tt||r>s.priority)&&-1!=s.restrict.indexOf(n)&&(o&&(s=$(s,{$$start:o,$$end:a})),t.push(s),u=s)}catch(t){I(t)}return u}function Q(n,r){var i=r.$attr,o=n.$attr,a=n.$$element;rt(n,function(t,e){"$"!=e.charAt(0)&&(r[e]&&r[e]!==t&&(t+=("style"===e?";":" ")+r[e]),n.$set(e,t,!0,i[e]))}),rt(r,function(t,e){"class"==e?(B(a,t),n.class=(n.class?n.class+" ":"")+t):"style"==e?(a.attr("style",a.attr("style")+";"+t),n.style=(n.style?n.style+";":"")+t):"$"==e.charAt(0)||n.hasOwnProperty(e)||(n[e]=t,o[e]=i[e])})}function Y(d,p,h,v,g,m,$,y){var w,b,_=[],x=p[0],E=d.shift(),S=O({},E,{templateUrl:null,transclude:null,replace:null,$$originalDirective:E}),C=ut(E.templateUrl)?E.templateUrl(p,h):E.templateUrl;return p.empty(),t.get(u.getTrustedResourceUrl(C),{cache:e}).success(function(t){var n,e,r,i;if(t=F(t),E.replace){if(r=Tt(t)?[]:nt(st(t)),n=r[0],1!=r.length||1!==n.nodeType)throw ge("tplrt","Template for directive '{0}' must have exactly one root element. {1}",E.name,C);e={$attr:{}},J(v,p,n);var o=V(n,[],e);it(E.scope)&&G(o),d=o.concat(d),Q(h,e)}else n=x,p.html(t);for(d.unshift(S),w=A(d,n,h,g,p,E,m,$,y),rt(v,function(t,e){t==n&&(v[e]=p[0])}),b=k(p[0].childNodes,g);_.length;){var a=_.shift(),u=_.shift(),s=_.shift(),c=_.shift(),l=p[0];if(u!==x){var f=u.className;y.hasElementTranscludeDirective&&E.replace||(l=Rt(n)),J(s,nt(u),l),B(nt(l),f)}i=w.transcludeOnThisElement?q(a,w.transclude,c):c,w(b,a,l,v,i)}_=null}).error(function(t,e,n,r){throw ge("tpload","Failed to load template: {0}",r.url)}),function(t,e,n,r,i){var o=i;_?(_.push(e),_.push(n),_.push(r),_.push(o)):(w.transcludeOnThisElement&&(o=q(e,w.transclude,i)),w(b,e,n,r,o))}}function C(t,e){var n=e.priority-t.priority;return 0!==n?n:t.name!==e.name?t.name<e.name?-1:1:t.index-e.index}function X(t,e,n,r){if(e)throw ge("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",e.name,n.name,t,dt(r))}function j(i,t,e,o){var a=R(e,!0);if(a){if("multiple"===o&&"SELECT"===T(i))throw ge("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",dt(i));t.push({priority:100,compile:function(){return{pre:function(t,e,n){var r=n.$$observers||(n.$$observers={});if(c.test(o))throw ge("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");(a=R(n[o],!0,function(t,e){if("srcdoc"==e)return u.HTML;var n=T(t);return"xlinkHref"==e||"FORM"==n&&"action"==e||"IMG"!=n&&("src"==e||"ngSrc"==e)?u.RESOURCE_URL:void 0}(i,o)))&&(n[o]=a(t),(r[o]||(r[o]=[])).$$inter=!0,(n.$$observers&&n.$$observers[o].$$scope||t).$watch(a,function(t,e){"class"===o&&t!=e?n.$updateClass(t,e):n.$set(o,t)}))}}}})}}function J(t,e,n){var r,i,o=e[0],a=e.length,u=o.parentNode;if(t)for(r=0,i=t.length;r<i;r++)if(t[r]==o){t[r++]=n;for(var s=r,c=s+a-1,l=t.length;s<l;s++,c++)c<l?t[s]=t[c]:delete t[s];t.length-=a-1;break}u&&u.replaceChild(n,o);var f=Z.createDocumentFragment();f.appendChild(o),n[nt.expando]=o[nt.expando];for(var d=1,p=e.length;d<p;d++){var h=e[d];nt(h).remove(),f.appendChild(h),delete e[d]}e[0]=n,e.length=1}function K(t,e){return O(function(){return t.apply(null,arguments)},t,e)}}]}me.$inject=["$provide","$$sanitizeUriProvider"];var $e=/^(x[\:\-_]|data[\:\-_])/i;function ye(t){return Ct(t.replace($e,""))}function we(t,e){var n="",r=t.split(/\s+/),i=e.split(/\s+/);t:for(var o=0;o<r.length;o++){for(var a=r[o],u=0;u<i.length;u++)if(a==i[u])continue t;n+=(0<n.length?" ":"")+a}return n}function be(){var s={},c=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(t,e){vt(t,"controller"),it(t)?O(s,t):s[t]=e},this.$get=["$injector","$window",function(a,u){return function(t,e){var n,r,i,o;if(ot(t)&&(i=(r=t.match(c))[1],o=r[3],K(t=s.hasOwnProperty(i)?s[i]:gt(e.$scope,i,!0)||gt(u,i,!0),i,!0)),n=a.instantiate(t,e),o){if(!e||"object"!=typeof e.$scope)throw x("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",i||t.name,o);e.$scope[o]=n}return n}}]}function _e(){this.$get=["$window",function(t){return nt(t.document)}]}function xe(){this.$get=["$log",function(n){return function(t,e){n.error.apply(n,arguments)}}]}function Ee(t){var e,n,r,i={};return t&&rt(t.split("\n"),function(t){r=t.indexOf(":"),e=S(st(t.substr(0,r))),n=st(t.substr(r+1)),e&&(i[e]=i[e]?i[e]+", "+n:n)}),i}function Se(e){var n=it(e)?e:tt;return function(t){return n||(n=Ee(e)),t?n[S(t)]||null:n}}function Ce(e,n,t){return ut(t)?t(e,n):(rt(t,function(t){e=t(e,n)}),e)}function ke(t){return 200<=t&&t<300}function qe(){var e=/^\s*(\[|\{[^\{])/,n=/[\}\]]\s*$/,r=/^\)\]\}',?\n/,t={"Content-Type":"application/json;charset=utf-8"},m=this.defaults={transformResponse:[function(t){return ot(t)&&(t=t.replace(r,""),e.test(t)&&n.test(t)&&(t=a(t))),t}],transformRequest:[function(t){return it(t)&&(n=t,"[object File]"!==u.call(n))&&(e=t,"[object Blob]"!==u.call(e))?W(t):t;var e,n}],headers:{common:{Accept:"application/json, text/plain, */*"},post:ct(t),put:ct(t),patch:ct(t)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},i=this.interceptors=[],o=this.responseInterceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(f,d,t,p,h,r){var v=t("$http"),s=[];function g(t){var n={method:"get",transformRequest:m.transformRequest,transformResponse:m.transformResponse},r=function(t){var e,n,r,i=m.headers,o=O({},t.headers);i=O({},i.common,i[S(t.method)]);t:for(e in i){for(r in n=S(e),o)if(S(r)===n)continue t;o[e]=i[e]}return a=o,rt(a,function(t,e){ut(t)&&(null!=(u=t())?a[e]=u:delete a[e])}),o;var a,u}(t);O(n,t),n.headers=r,n.method=c(n.method);var e=[function(t){r=t.headers;var e=Ce(t.data,Se(r),t.transformRequest);return q(e)&&rt(r,function(t,e){"content-type"===S(e)&&delete r[e]}),q(t.withCredentials)&&!q(m.withCredentials)&&(t.withCredentials=m.withCredentials),function(i,t,e){var o,n,a=h.defer(),r=a.promise,u=function(t,e){if(!e)return t;var n=[];return function(t,e,n){for(var r=U(t),i=0;i<r.length;i++)e.call(n,t[r[i]],r[i])}(e,function(t,e){null===t||q(t)||(at(t)||(t=[t]),rt(t,function(t){it(t)&&(t=A(t)?t.toISOString():W(t)),n.push(Y(e)+"="+Y(t))}))}),0<n.length&&(t+=(-1==t.indexOf("?")?"?":"&")+n.join("&")),t}(i.url,i.params);if(g.pendingRequests.push(i),r.then(l,l),!i.cache&&!m.cache||!1===i.cache||"GET"!==i.method&&"JSONP"!==i.method||(o=it(i.cache)?i.cache:it(m.cache)?m.cache:v),o)if(L(n=o.get(u))){if(R(n))return n.then(l,l),n;at(n)?c(n[1],n[0],ct(n[2]),n[3]):c(n,200,{},"OK")}else o.put(u,r);if(q(n)){var s=Pn(i.url)?d.cookies()[i.xsrfCookieName||m.xsrfCookieName]:tt;s&&(e[i.xsrfHeaderName||m.xsrfHeaderName]=s),f(i.method,u,t,function(t,e,n,r){o&&(ke(t)?o.put(u,[t,e,Ee(n),r]):o.remove(u)),c(e,t,n,r),p.$$phase||p.$apply()},e,i.timeout,i.withCredentials,i.responseType)}return r;function c(t,e,n,r){(ke(e=Math.max(e,0))?a.resolve:a.reject)({data:t,status:e,headers:Se(n),config:i,statusText:r})}function l(){var t=I(g.pendingRequests,i);-1!==t&&g.pendingRequests.splice(t,1)}}(t,e,r).then(u,u)},tt],i=h.when(n);for(rt(s,function(t){(t.request||t.requestError)&&e.unshift(t.request,t.requestError),(t.response||t.responseError)&&e.push(t.response,t.responseError)});e.length;){var o=e.shift(),a=e.shift();i=i.then(o,a)}return i.success=function(e){return i.then(function(t){e(t.data,t.status,t.headers,n)}),i},i.error=function(e){return i.then(null,function(t){e(t.data,t.status,t.headers,n)}),i},i;function u(t){var e=O({},t,{data:Ce(t.data,t.headers,n.transformResponse)});return ke(t.status)?e:h.reject(e)}}return rt(i,function(t){s.unshift(ot(t)?r.get(t):r.invoke(t))}),rt(o,function(t,e){var n=ot(t)?r.get(t):r.invoke(t);s.splice(e,0,{response:function(t){return n(h.when(t))},responseError:function(t){return n(h.reject(t))}})}),g.pendingRequests=[],function(t){rt(arguments,function(n){g[n]=function(t,e){return g(O(e||{},{method:n,url:t}))}})}("get","delete","head","jsonp"),function(t){rt(arguments,function(r){g[r]=function(t,e,n){return g(O(n||{},{method:r,url:t,data:e}))}})}("post","put","patch"),g.defaults=m,g}]}function Ae(t){if(et<=8&&(!t.match(/^(get|post|head|put|delete|options)$/i)||!v.XMLHttpRequest))return new v.ActiveXObject("Microsoft.XMLHTTP");if(v.XMLHttpRequest)return new v.XMLHttpRequest;throw x("$httpBackend")("noxhr","This browser does not support XMLHttpRequest.")}function je(){this.$get=["$browser","$window","$document",function(t,e,n){return b=Ae,_=(w=t).defer,x=e.angular.callbacks,E=n[0],function(t,o,e,r,n,i,a,u){var s,c,l,f,d,p;if(w.$$incOutstandingRequestCount(),o=o||w.url(),"jsonp"==S(t)){var h="_"+(x.counter++).toString(36);x[h]=function(t){x[h].data=t,x[h].called=!0};var v=(c=o.replace("JSON_CALLBACK","angular.callbacks."+h),l=h,f=function(t,e){y(r,t,x[h].data,"",e),x[h]=k},d=E.createElement("script"),p=null,d.type="text/javascript",d.src=c,d.async=!0,bt(d,"load",p=function(t){_t(d,"load",p),_t(d,"error",p),E.body.removeChild(d),d=null;var e=-1,n="unknown";t&&("load"!==t.type||x[l].called||(t={type:"error"}),n=t.type,e="error"===t.type?404:200),f&&f(e,n)}),bt(d,"error",p),et<=8&&(d.onreadystatechange=function(){ot(d.readyState)&&/loaded|complete/.test(d.readyState)&&(d.onreadystatechange=null,p({type:"load"}))}),E.body.appendChild(d),p)}else{var g=b(t);if(g.open(t,o,!0),rt(n,function(t,e){L(t)&&g.setRequestHeader(e,t)}),g.onreadystatechange=function(){if(g&&4==g.readyState){var t=null,e=null,n="";-1!==s&&(t=g.getAllResponseHeaders(),e="response"in g?g.response:g.responseText),-1===s&&et<10||(n=g.statusText),y(r,s||g.status,e,t,n)}},a&&(g.withCredentials=!0),u)try{g.responseType=u}catch(t){if("json"!==u)throw t}g.send(e||null)}if(0<i)var m=_($,i);else R(i)&&i.then($);function $(){s=-1,v&&v(),g&&g.abort()}function y(t,e,n,r,i){m&&_.cancel(m),v=g=null,0===e&&(e=n?200:"file"==jn(o).protocol?404:0),t(e=1223===e?204:e,n,r,i=i||""),w.$$completeOutstandingRequest(k)}};var w,b,_,x,E}]}var Pe=x("$interpolate");function Me(){var m="{{",$="}}";this.startSymbol=function(t){return t?(m=t,this):m},this.endSymbol=function(t){return t?($=t,this):$},this.$get=["$parse","$exceptionHandler","$sce",function(d,p,h){var v=m.length,g=$.length;function t(o,t,a){for(var e,n,r,i,u=0,s=[],c=o.length,l=!1,f=[];u<c;)-1!=(e=o.indexOf(m,u))&&-1!=(n=o.indexOf($,e+v))?(u!=e&&s.push(o.substring(u,e)),s.push(r=d(i=o.substring(e+v,n))),r.exp=i,u=n+g,l=!0):(u!=c&&s.push(o.substring(u)),u=c);if((c=s.length)||(s.push(""),c=1),a&&1<s.length)throw Pe("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",o);if(!t||l)return f.length=c,(r=function(t){try{for(var e,n=0,r=c;n<r;n++){if("function"==typeof(e=s[n]))if(e=e(t),null==(e=a?h.getTrusted(a,e):h.valueOf(e)))e="";else switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=W(e)}f[n]=e}return f.join("")}catch(t){var i=Pe("interr","Can't interpolate: {0}\n{1}",o,t.toString());p(i)}}).exp=o,r.parts=s,r}return t.startSymbol=function(){return m},t.endSymbol=function(){return $},t}]}function Te(){this.$get=["$rootScope","$window","$q",function(l,f,d){var p={};function t(t,e,n,r){var i=f.setInterval,o=f.clearInterval,a=d.defer(),u=a.promise,s=0,c=L(r)&&!r;return n=L(n)?n:0,u.then(null,null,t),u.$$intervalId=i(function(){a.notify(s++),0<n&&n<=s&&(a.resolve(s),o(u.$$intervalId),delete p[u.$$intervalId]),c||l.$apply()},e),p[u.$$intervalId]=a,u}return t.cancel=function(t){return!!(t&&t.$$intervalId in p)&&(p[t.$$intervalId].reject("canceled"),f.clearInterval(t.$$intervalId),delete p[t.$$intervalId],!0)},t}]}function Oe(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"¤",posSuf:"",negPre:"(¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a",short:"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(t){return 1===t?"one":"other"}}}}var De=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,Re={http:80,https:443,ftp:21},Ie=x("$location");function Ne(t){for(var e=t.split("/"),n=e.length;n--;)e[n]=Q(e[n]);return e.join("/")}function Ue(t,e,n){var r=jn(t,n);e.$$protocol=r.protocol,e.$$host=r.hostname,e.$$port=C(r.port)||Re[r.protocol]||null}function Le(t,e,n){var r="/"!==t.charAt(0);r&&(t="/"+t);var i=jn(t,n);e.$$path=decodeURIComponent(r&&"/"===i.pathname.charAt(0)?i.pathname.substring(1):i.pathname),e.$$search=s(i.search),e.$$hash=decodeURIComponent(i.hash),e.$$path&&"/"!=e.$$path.charAt(0)&&(e.$$path="/"+e.$$path)}function Fe(t,e){if(0===e.indexOf(t))return e.substr(t.length)}function ze(t){var e=t.indexOf("#");return-1==e?t:t.substr(0,e)}function Be(t){return t.substr(0,ze(t).lastIndexOf("/")+1)}function Ve(o,a){this.$$html5=!0,a=a||"";var u=Be(o);Ue(o,this,o),this.$$parse=function(t){var e=Fe(u,t);if(!ot(e))throw Ie("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,u);Le(e,this,o),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var t=G(this.$$search),e=this.$$hash?"#"+Q(this.$$hash):"";this.$$url=Ne(this.$$path)+(t?"?"+t:"")+e,this.$$absUrl=u+this.$$url.substr(1)},this.$$parseLinkUrl=function(t,e){var n,r,i;return(n=Fe(o,t))!==tt?i=(n=Fe(a,r=n))!==tt?u+(Fe("/",n)||n):o+r:(n=Fe(u,t))!==tt?i=u+n:u==t+"/"&&(i=u),i&&this.$$parse(i),!!i}}function We(r,i){var o=Be(r);Ue(r,this,r),this.$$parse=function(t){var e=Fe(r,t)||Fe(o,t),n="#"==e.charAt(0)?Fe(i,e):this.$$html5?e:"";if(!ot(n))throw Ie("ihshprfx",'Invalid url "{0}", missing hash prefix "{1}".',t,i);Le(n,this,r),this.$$path=function(t,e,n){var r,i=/^\/[A-Z]:(\/.*)/;0===e.indexOf(n)&&(e=e.replace(n,""));if(i.exec(e))return t;return(r=i.exec(t))?r[1]:t}(this.$$path,n,r),this.$$compose()},this.$$compose=function(){var t=G(this.$$search),e=this.$$hash?"#"+Q(this.$$hash):"";this.$$url=Ne(this.$$path)+(t?"?"+t:"")+e,this.$$absUrl=r+(this.$$url?i+this.$$url:"")},this.$$parseLinkUrl=function(t,e){return ze(r)==ze(t)&&(this.$$parse(t),!0)}}function He(i,o){this.$$html5=!0,We.apply(this,arguments);var a=Be(i);this.$$parseLinkUrl=function(t,e){var n,r;return i==ze(t)?n=t:(r=Fe(a,t))?n=i+o+r:a===t+"/"&&(n=a),n&&this.$$parse(n),!!n},this.$$compose=function(){var t=G(this.$$search),e=this.$$hash?"#"+Q(this.$$hash):"";this.$$url=Ne(this.$$path)+(t?"?"+t:"")+e,this.$$absUrl=i+o+this.$$url}}function Ge(t){return function(){return this[t]}}function Qe(e,n){return function(t){return q(t)?this[e]:(this[e]=n(t),this.$$compose(),this)}}function Ye(){var p="",h=!1;this.hashPrefix=function(t){return L(t)?(p=t,this):p},this.html5Mode=function(t){return L(t)?(h=t,this):h},this.$get=["$rootScope","$browser","$sniffer","$rootElement",function(i,o,t,a){var u,e,n,r,s=o.baseHref(),c=o.url();h?(n=(r=c).substring(0,r.indexOf("/",r.indexOf("//")+2))+(s||"/"),e=t.history?Ve:He):(n=ze(c),e=We),(u=new e(n,"#"+p)).$$parseLinkUrl(c,c);var l=/^\s*(javascript|mailto):/i;a.on("click",function(t){if(!t.ctrlKey&&!t.metaKey&&2!=t.which){for(var e=nt(t.target);"a"!==S(e[0].nodeName);)if(e[0]===a[0]||!(e=e.parent())[0])return;var n=e.prop("href"),r=e.attr("href")||e.attr("xlink:href");it(n)&&"[object SVGAnimatedString]"===n.toString()&&(n=jn(n.animVal).href),l.test(n)||!n||e.attr("target")||t.isDefaultPrevented()||u.$$parseLinkUrl(n,r)&&(t.preventDefault(),u.absUrl()!=o.url()&&(i.$apply(),v.angular["ff-684208-preventDefault"]=!0))}}),u.absUrl()!=c&&o.url(u.absUrl(),!0),o.onUrlChange(function(e){u.absUrl()!=e&&(i.$evalAsync(function(){var t=u.absUrl();u.$$parse(e),i.$broadcast("$locationChangeStart",e,t).defaultPrevented?(u.$$parse(t),o.url(t)):d(t)}),i.$$phase||i.$digest())});var f=0;return i.$watch(function(){var t=o.url(),e=u.$$replace;return f&&t==u.absUrl()||(f++,i.$evalAsync(function(){i.$broadcast("$locationChangeStart",u.absUrl(),t).defaultPrevented?u.$$parse(t):(o.url(u.absUrl(),e),d(t))})),u.$$replace=!1,f}),u;function d(t){i.$broadcast("$locationChangeSuccess",u.absUrl(),t)}}]}function Xe(){var n=!0,r=this;this.debugEnabled=function(t){return L(t)?(n=t,this):n},this.$get=["$window",function(i){return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:(t=e("debug"),function(){n&&t.apply(r,arguments)})};var t;function e(t){var e=i.console||{},r=e[t]||e.log||k,n=!1;try{n=!!r.apply}catch(t){}return n?function(){var n=[];return rt(arguments,function(t){var e;n.push(((e=t)instanceof Error&&(e.stack?e=e.message&&-1===e.stack.indexOf(e.message)?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e))}),r.apply(e,n)}:function(t,e){r(t,null==e?"":e)}}}]}He.prototype=We.prototype=Ve.prototype={$$html5:!1,$$replace:!1,absUrl:Ge("$$absUrl"),url:function(t){if(q(t))return this.$$url;var e=De.exec(t);return e[1]&&this.path(decodeURIComponent(e[1])),(e[2]||e[1])&&this.search(e[3]||""),this.hash(e[5]||""),this},protocol:Ge("$$protocol"),host:Ge("$$host"),port:Ge("$$port"),path:Qe("$$path",function(t){return"/"==(t=null!==t?t.toString():"").charAt(0)?t:"/"+t}),search:function(n,t){switch(arguments.length){case 0:return this.$$search;case 1:if(ot(n)||b(n))n=n.toString(),this.$$search=s(n);else{if(!it(n))throw Ie("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");rt(n,function(t,e){null==t&&delete n[e]}),this.$$search=n}break;default:q(t)||null===t?delete this.$$search[n]:this.$$search[n]=t}return this.$$compose(),this},hash:Qe("$$hash",function(t){return null!==t?t.toString():""}),replace:function(){return this.$$replace=!0,this}};var Je,Ke=x("$parse"),Ze={};function tn(t,e){if("__defineGetter__"===t||"__defineSetter__"===t||"__lookupGetter__"===t||"__lookupSetter__"===t||"__proto__"===t)throw Ke("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",e);return t}function en(t,e){if(t){if(t.constructor===t)throw Ke("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",e);if(t.document&&t.location&&t.alert&&t.setInterval)throw Ke("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",e);if(t.children&&(t.nodeName||t.prop&&t.attr&&t.find))throw Ke("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",e);if(t===Object)throw Ke("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",e)}return t}var nn=Function.prototype.call,rn=Function.prototype.apply,on=Function.prototype.bind;var an={null:function(){return null},true:function(){return!0},false:function(){return!1},undefined:k,"+":function(t,e,n,r){return n=n(t,e),r=r(t,e),L(n)?L(r)?n+r:n:L(r)?r:tt},"-":function(t,e,n,r){return n=n(t,e),r=r(t,e),(L(n)?n:0)-(L(r)?r:0)},"*":function(t,e,n,r){return n(t,e)*r(t,e)},"/":function(t,e,n,r){return n(t,e)/r(t,e)},"%":function(t,e,n,r){return n(t,e)%r(t,e)},"^":function(t,e,n,r){return n(t,e)^r(t,e)},"=":k,"===":function(t,e,n,r){return n(t,e)===r(t,e)},"!==":function(t,e,n,r){return n(t,e)!==r(t,e)},"==":function(t,e,n,r){return n(t,e)==r(t,e)},"!=":function(t,e,n,r){return n(t,e)!=r(t,e)},"<":function(t,e,n,r){return n(t,e)<r(t,e)},">":function(t,e,n,r){return n(t,e)>r(t,e)},"<=":function(t,e,n,r){return n(t,e)<=r(t,e)},">=":function(t,e,n,r){return n(t,e)>=r(t,e)},"&&":function(t,e,n,r){return n(t,e)&&r(t,e)},"||":function(t,e,n,r){return n(t,e)||r(t,e)},"&":function(t,e,n,r){return n(t,e)&r(t,e)},"|":function(t,e,n,r){return r(t,e)(t,e,n(t,e))},"!":function(t,e,n){return!n(t,e)}},un={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},sn=function(t){this.options=t};sn.prototype={constructor:sn,lex:function(t){for(this.text=t,this.index=0,this.ch=tt,this.lastCh=":",this.tokens=[];this.index<this.text.length;){if(this.ch=this.text.charAt(this.index),this.is("\"'"))this.readString(this.ch);else if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(this.ch))this.readIdent();else if(this.is("(){}[].,;:?"))this.tokens.push({index:this.index,text:this.ch}),this.index++;else{if(this.isWhitespace(this.ch)){this.index++;continue}var e=this.ch+this.peek(),n=e+this.peek(2),r=an[this.ch],i=an[e],o=an[n];o?(this.tokens.push({index:this.index,text:n,fn:o}),this.index+=3):i?(this.tokens.push({index:this.index,text:e,fn:i}),this.index+=2):r?(this.tokens.push({index:this.index,text:this.ch,fn:r}),this.index+=1):this.throwError("Unexpected next character ",this.index,this.index+1)}this.lastCh=this.ch}return this.tokens},is:function(t){return-1!==t.indexOf(this.ch)},was:function(t){return-1!==t.indexOf(this.lastCh)},peek:function(t){var e=t||1;return this.index+e<this.text.length&&this.text.charAt(this.index+e)},isNumber:function(t){return"0"<=t&&t<="9"},isWhitespace:function(t){return" "===t||"\r"===t||"\t"===t||"\n"===t||"\v"===t||" "===t},isIdent:function(t){return"a"<=t&&t<="z"||"A"<=t&&t<="Z"||"_"===t||"$"===t},isExpOperator:function(t){return"-"===t||"+"===t||this.isNumber(t)},throwError:function(t,e,n){n=n||this.index;var r=L(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,n)+"]":" "+n;throw Ke("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",t,r,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var n=S(this.text.charAt(this.index));if("."==n||this.isNumber(n))t+=n;else{var r=this.peek();if("e"==n&&this.isExpOperator(r))t+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"==t.charAt(t.length-1))t+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!=t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}t*=1,this.tokens.push({index:e,text:t,literal:!0,constant:!0,fn:function(){return t}})},readIdent:function(){for(var t,e,n,r,i=this,o="",a=this.index;this.index<this.text.length&&("."===(r=this.text.charAt(this.index))||this.isIdent(r)||this.isNumber(r));)"."===r&&(t=this.index),o+=r,this.index++;if(t)for(e=this.index;e<this.text.length;){if("("===(r=this.text.charAt(e))){n=o.substr(t-a+1),o=o.substr(0,t-a),this.index=e;break}if(!this.isWhitespace(r))break;e++}var u={index:a,text:o};if(an.hasOwnProperty(o))u.fn=an[o],u.literal=!0,u.constant=!0;else{var s=vn(o,this.options,this.text);u.fn=O(function(t,e){return s(t,e)},{assign:function(t,e){return ln(t,o,e,i.text,i.options)}})}this.tokens.push(u),n&&(this.tokens.push({index:t,text:"."}),this.tokens.push({index:t+1,text:n}))},readString:function(t){var e=this.index;this.index++;for(var n="",r=t,i=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(r+=o,i){if("u"===o){var a=this.text.substring(this.index+1,this.index+5);a.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+a+"]"),this.index+=4,n+=String.fromCharCode(parseInt(a,16))}else{n+=un[o]||o}i=!1}else if("\\"===o)i=!0;else{if(o===t)return this.index++,void this.tokens.push({index:e,text:r,string:n,literal:!0,constant:!0,fn:function(){return n}});n+=o}this.index++}this.throwError("Unterminated quote",e)}};var cn=function(t,e,n){this.lexer=t,this.$filter=e,this.options=n};function ln(t,e,n,r,i){en(t,r),i=i||{};for(var o,a=e.split("."),u=0;1<a.length;u++){var s=en(t[o=tn(a.shift(),r)],r);s||(s={},t[o]=s),(t=s).then&&i.unwrapPromises&&(Je(r),"$$v"in t||function(e){e.then(function(t){e.$$v=t})}(t),t.$$v===tt&&(t.$$v={}),t=t.$$v)}return en(t[o=tn(a.shift(),r)],r),t[o]=n}cn.ZERO=O(function(){return 0},{constant:!0}),cn.prototype={constructor:cn,parse:function(t){this.text=t,this.tokens=this.lexer.lex(t);var e=this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e.literal=!!e.literal,e.constant=!!e.constant,e},primary:function(){var t,e,n;if(this.expect("("))t=this.filterChain(),this.consume(")");else if(this.expect("["))t=this.arrayDeclaration();else if(this.expect("{"))t=this.object();else{var r=this.expect();(t=r.fn)||this.throwError("not a primary expression",r),t.literal=!!r.literal,t.constant=!!r.constant}for(;e=this.expect("(","[",".");)"("===e.text?(t=this.functionCall(t,n),n=null):"["===e.text?(n=t,t=this.objectIndex(t)):"."===e.text?(n=t,t=this.fieldAccess(t)):this.throwError("IMPOSSIBLE");return t},throwError:function(t,e){throw Ke("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",e.text,t,e.index+1,this.text,this.text.substring(e.index))},peekToken:function(){if(0===this.tokens.length)throw Ke("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(t,e,n,r){if(0<this.tokens.length){var i=this.tokens[0],o=i.text;if(o===t||o===e||o===n||o===r||!t&&!e&&!n&&!r)return i}return!1},expect:function(t,e,n,r){var i=this.peek(t,e,n,r);return!!i&&(this.tokens.shift(),i)},consume:function(t){this.expect(t)||this.throwError("is unexpected, expecting ["+t+"]",this.peek())},unaryFn:function(n,r){return O(function(t,e){return n(t,e,r)},{constant:r.constant})},ternaryFn:function(n,r,i){return O(function(t,e){return n(t,e)?r(t,e):i(t,e)},{constant:n.constant&&r.constant&&i.constant})},binaryFn:function(n,r,i){return O(function(t,e){return r(t,e,n,i)},{constant:n.constant&&i.constant})},statements:function(){for(var o=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&o.push(this.filterChain()),!this.expect(";"))return 1===o.length?o[0]:function(t,e){for(var n,r=0;r<o.length;r++){var i=o[r];i&&(n=i(t,e))}return n}},filterChain:function(){for(var t,e=this.expression();;){if(!(t=this.expect("|")))return e;e=this.binaryFn(e,t.fn,this.filter())}},filter:function(){for(var t=this.expect(),o=this.$filter(t.text),a=[];;){if(!(t=this.expect(":"))){var e=function(t,e,n){for(var r=[n],i=0;i<a.length;i++)r.push(a[i](t,e));return o.apply(t,r)};return function(){return e}}a.push(this.expression())}},expression:function(){return this.assignment()},assignment:function(){var n,t,r=this.ternary();return(t=this.expect("="))?(r.assign||this.throwError("implies assignment but ["+this.text.substring(0,t.index)+"] can not be assigned to",t),n=this.ternary(),function(t,e){return r.assign(t,n(t,e),e)}):r},ternary:function(){var t,e,n=this.logicalOR();return(e=this.expect("?"))?(t=this.assignment(),(e=this.expect(":"))?this.ternaryFn(n,t,this.assignment()):void this.throwError("expected :",e)):n},logicalOR:function(){for(var t,e=this.logicalAND();;){if(!(t=this.expect("||")))return e;e=this.binaryFn(e,t.fn,this.logicalAND())}},logicalAND:function(){var t,e=this.equality();return(t=this.expect("&&"))&&(e=this.binaryFn(e,t.fn,this.logicalAND())),e},equality:function(){var t,e=this.relational();return(t=this.expect("==","!=","===","!=="))&&(e=this.binaryFn(e,t.fn,this.equality())),e},relational:function(){var t,e=this.additive();return(t=this.expect("<",">","<=",">="))&&(e=this.binaryFn(e,t.fn,this.relational())),e},additive:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e=this.binaryFn(e,t.fn,this.multiplicative());return e},multiplicative:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e=this.binaryFn(e,t.fn,this.unary());return e},unary:function(){var t;return this.expect("+")?this.primary():(t=this.expect("-"))?this.binaryFn(cn.ZERO,t.fn,this.unary()):(t=this.expect("!"))?this.unaryFn(t.fn,this.unary()):this.primary()},fieldAccess:function(i){var o=this,a=this.expect().text,r=vn(a,this.options,this.text);return O(function(t,e,n){return r(n||i(t,e))},{assign:function(t,e,n){var r=i(t,n);return r||i.assign(t,r={}),ln(r,a,e,o.text,o.options)}})},objectIndex:function(a){var u=this,s=this.expression();return this.consume("]"),O(function(t,e){var n,r,i=a(t,e),o=s(t,e);return tn(o,u.text),i?((n=en(i[o],u.text))&&n.then&&u.options.unwrapPromises&&("$$v"in(r=n)||(r.$$v=tt,r.then(function(t){r.$$v=t})),n=n.$$v),n):tt},{assign:function(t,e,n){var r=tn(s(t,n),u.text),i=en(a(t,n),u.text);return i||a.assign(t,i={}),i[r]=e}})},functionCall:function(a,u){var s=[];if(")"!==this.peekToken().text)for(;s.push(this.expression()),this.expect(","););this.consume(")");var c=this;return function(t,e){for(var n=[],r=u?u(t,e):t,i=0;i<s.length;i++)n.push(en(s[i](t,e),c.text));var o=a(t,e,r)||k;return en(r,c.text),function(t,e){if(t){if(t.constructor===t)throw Ke("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",e);if(t===nn||t===rn||on&&t===on)throw Ke("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",e)}}(o,c.text),en(o.apply?o.apply(r,n):o(n[0],n[1],n[2],n[3],n[4]),c.text)}},arrayDeclaration:function(){var i=[],t=!0;if("]"!==this.peekToken().text)do{if(this.peek("]"))break;var e=this.expression();i.push(e),e.constant||(t=!1)}while(this.expect(","));return this.consume("]"),O(function(t,e){for(var n=[],r=0;r<i.length;r++)n.push(i[r](t,e));return n},{literal:!0,constant:t})},object:function(){var o=[],t=!0;if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var e=this.expect(),n=e.string||e.text;this.consume(":");var r=this.expression();o.push({key:n,value:r}),r.constant||(t=!1)}while(this.expect(","));return this.consume("}"),O(function(t,e){for(var n={},r=0;r<o.length;r++){var i=o[r];n[i.key]=i.value(t,e)}return n},{literal:!0,constant:t})}};var fn={},dn={};function pn(t){return"constructor"==t}function hn(i,o,a,u,s,c,t){tn(i,c),tn(o,c),tn(a,c),tn(u,c),tn(s,c);var e=function(t){return en(t,c)},n=t.expensiveChecks,l=n||pn(i)?e:y,f=n||pn(o)?e:y,d=n||pn(a)?e:y,p=n||pn(u)?e:y,h=n||pn(s)?e:y;return t.unwrapPromises?function(t,e){var n,r=e&&e.hasOwnProperty(i)?e:t;return null==r?r:((r=l(r[i]))&&r.then&&(Je(c),"$$v"in r||((n=r).$$v=tt,n.then(function(t){n.$$v=l(t)})),r=l(r.$$v)),o?null==r?tt:((r=f(r[o]))&&r.then&&(Je(c),"$$v"in r||((n=r).$$v=tt,n.then(function(t){n.$$v=f(t)})),r=f(r.$$v)),a?null==r?tt:((r=d(r[a]))&&r.then&&(Je(c),"$$v"in r||((n=r).$$v=tt,n.then(function(t){n.$$v=d(t)})),r=d(r.$$v)),u?null==r?tt:((r=p(r[u]))&&r.then&&(Je(c),"$$v"in r||((n=r).$$v=tt,n.then(function(t){n.$$v=p(t)})),r=p(r.$$v)),s?null==r?tt:((r=h(r[s]))&&r.then&&(Je(c),"$$v"in r||((n=r).$$v=tt,n.then(function(t){n.$$v=h(t)})),r=h(r.$$v)),r):r):r):r):r)}:function(t,e){var n=e&&e.hasOwnProperty(i)?e:t;return null==n?n:(n=l(n[i]),o?null==n?tt:(n=f(n[o]),a?null==n?tt:(n=d(n[a]),u?null==n?tt:(n=p(n[u]),s?null==n?tt:n=h(n[s]):n):n):n):n)}}function vn(t,i,o){var a=i.expensiveChecks,e=a?dn:fn;if(e.hasOwnProperty(t))return e[t];var n,r,u,s=t.split("."),c=s.length;if(i.csp)n=c<6?hn(s[0],s[1],s[2],s[3],s[4],o,i):function(t,e){for(var n,r=0;n=hn(s[r++],s[r++],s[r++],s[r++],s[r++],o,i)(t,e),e=tt,t=n,r<c;);return n};else{var l="var p;\n";a&&(l+="s = eso(s, fe);\nl = eso(l, fe);\n");var f=a;rt(s,function(t,e){tn(t,o);var n=(e?"s":'((l&&l.hasOwnProperty("'+t+'"))?l:s)')+'["'+t+'"]',r=a||pn(t);r&&(n="eso("+n+", fe)",f=!0),l+="if(s == null) return undefined;\ns="+n+";\n",i.unwrapPromises&&(l+='if (s && s.then) {\n pw("'+o.replace(/(["\r\n])/g,"\\$1")+'");\n if (!("$$v" in s)) {\n p=s;\n p.$$v = undefined;\n p.then(function(v) {p.$$v='+(r?"eso(v)":"v")+";});\n}\n s="+(r?"eso(s.$$v)":"s.$$v")+"\n}\n")}),l+="return s;";var d=new Function("s","l","pw","eso","fe",l);d.toString=w(l),(f||i.unwrapPromises)&&(r=d,u=o,d=function(t,e){return r(t,e,Je,en,u)}),n=d}return"hasOwnProperty"!==t&&(e[t]=n),n}function gn(){var s={},c={},l={csp:!1,unwrapPromises:!1,logPromiseWarnings:!0,expensiveChecks:!1};this.unwrapPromises=function(t){return L(t)?(l.unwrapPromises=!!t,this):l.unwrapPromises},this.logPromiseWarnings=function(t){return L(t)?(l.logPromiseWarnings=t,this):l.logPromiseWarnings},this.$get=["$filter","$sniffer","$log",function(a,t,e){l.csp=t.csp;var u={csp:l.csp,unwrapPromises:l.unwrapPromises,logPromiseWarnings:l.logPromiseWarnings,expensiveChecks:!0};return Je=function(t){l.logPromiseWarnings&&!Ze.hasOwnProperty(t)&&(Ze[t]=!0,e.warn("[$parse] Promise found in the expression `"+t+"`. Automatic unwrapping of promises in Angular expressions is deprecated."))},function(t,e){var n;switch(typeof t){case"string":var r=e?c:s;if(r.hasOwnProperty(t))return r[t];var i=e?u:l,o=new sn(i);return n=new cn(o,a,i).parse(t),"hasOwnProperty"!==t&&(r[t]=n),n;case"function":return t;default:return k}}}]}function mn(){this.$get=["$rootScope","$exceptionHandler",function(e,t){return function(c,l){var f=function(){var u,e,s=[];return e={resolve:function(t){if(s){var r=s;s=tt,u=d(t),r.length&&c(function(){for(var t,e=0,n=r.length;e<n;e++)t=r[e],u.then(t[0],t[1],t[2])})}},reject:function(t){e.resolve(n(t))},notify:function(n){if(s){var r=s;s.length&&c(function(){for(var t=0,e=r.length;t<e;t++)r[t][2](n)})}},promise:{then:function(e,n,r){var i=f(),t=function(t){try{i.resolve((ut(e)?e:h)(t))}catch(t){i.reject(t),l(t)}},o=function(t){try{i.resolve((ut(n)?n:v)(t))}catch(t){i.reject(t),l(t)}},a=function(t){try{i.notify((ut(r)?r:h)(t))}catch(t){l(t)}};return s?s.push([t,o,a]):u.then(t,o,a),i.promise},catch:function(t){return this.then(null,t)},finally:function(r){function i(t,e){var n=f();return e?n.resolve(t):n.reject(t),n.promise}function e(t,e){var n=null;try{n=(r||h)()}catch(t){return i(t,!1)}return R(n)?n.then(function(){return i(t,e)},function(t){return i(t,!1)}):i(t,e)}return this.then(function(t){return e(t,!0)},function(t){return e(t,!1)})}}}},d=function(n){return R(n)?n:{then:function(t){var e=f();return c(function(){e.resolve(t(n))}),e.promise}}},p=function(t){var e=f();return e.reject(t),e.promise},n=function(r){return{then:function(t,e){var n=f();return c(function(){try{n.resolve((ut(e)?e:v)(r))}catch(t){n.reject(t),l(t)}}),n.promise}}};function h(t){return t}function v(t){return p(t)}return{defer:f,reject:p,when:function(t,e,n,r){var i,o=f(),a=function(t){try{return(ut(e)?e:h)(t)}catch(t){return l(t),p(t)}},u=function(t){try{return(ut(n)?n:v)(t)}catch(t){return l(t),p(t)}},s=function(t){try{return(ut(r)?r:h)(t)}catch(t){l(t)}};return c(function(){d(t).then(function(t){i||(i=!0,o.resolve(d(t).then(a,u,s)))},function(t){i||(i=!0,o.resolve(u(t)))},function(t){i||o.notify(s(t))})}),o.promise},all:function(t){var n=f(),r=0,i=at(t)?[]:{};rt(t,function(t,e){r++,d(t).then(function(t){i.hasOwnProperty(e)||(i[e]=t,--r||n.resolve(i))},function(t){i.hasOwnProperty(e)||n.reject(t)})}),0===r&&n.resolve(i);return n.promise}}}(function(t){e.$evalAsync(t)},t)}]}function $n(){this.$get=["$window","$timeout",function(t,n){var r=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame,i=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.mozCancelAnimationFrame||t.webkitCancelRequestAnimationFrame,e=!!r,o=e?function(t){var e=r(t);return function(){i(e)}}:function(t){var e=n(t,16.66,!1);return function(){n.cancel(e)}};return o.supported=e,o}]}function yn(){var w=10,b=x("$rootScope"),_=null;this.digestTtl=function(t){return arguments.length&&(w=t),w},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(t,v,h,g){function n(){this.$id=i(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.this=this.$root=this,this.$$destroyed=!1,this.$$asyncQueue=[],this.$$postDigestQueue=[],this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings={}}n.prototype={constructor:n,$new:function(t){var e;return t?((e=new n).$root=this.$root,e.$$asyncQueue=this.$$asyncQueue,e.$$postDigestQueue=this.$$postDigestQueue):(this.$$childScopeClass||(this.$$childScopeClass=function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$id=i(),this.$$childScopeClass=null},this.$$childScopeClass.prototype=this),e=new this.$$childScopeClass),(e.this=e).$parent=this,e.$$prevSibling=this.$$childTail,this.$$childHead?(this.$$childTail.$$nextSibling=e,this.$$childTail=e):this.$$childHead=this.$$childTail=e,e},$watch:function(t,e,n){var r=s(t,"watch"),i=this.$$watchers,o={fn:e,last:y,get:r,exp:t,eq:!!n};if(_=null,!ut(e)){var a=s(e||k,"listener");o.fn=function(t,e,n){a(n)}}if("string"==typeof t&&r.constant){var u=o.fn;o.fn=function(t,e,n){u.call(this,t,e,n),N(i,o)}}return i||(i=this.$$watchers=[]),i.unshift(o),function(){N(i,o),_=null}},$watchCollection:function(t,n){var r,i,o,a=this,u=1<n.length,s=0,c=h(t),l=[],f={},d=!0,p=0;return this.$watch(function(){var t,e;if(it(r=c(a)))if(j(r)){i!==l&&(p=(i=l).length=0,s++),t=r.length,p!==t&&(s++,i.length=p=t);for(var n=0;n<t;n++)i[n]!=i[n]&&r[n]!=r[n]||i[n]===r[n]||(s++,i[n]=r[n])}else{for(e in i!==f&&(i=f={},p=0,s++),t=0,r)r.hasOwnProperty(e)&&(t++,i.hasOwnProperty(e)?i[e]!=i[e]&&r[e]!=r[e]||i[e]===r[e]||(s++,i[e]=r[e]):(p++,i[e]=r[e],s++));if(t<p)for(e in s++,i)i.hasOwnProperty(e)&&!r.hasOwnProperty(e)&&(p--,delete i[e])}else i!==r&&(i=r,s++);return s},function(){if(d?(d=!1,n(r,r,a)):n(r,o,a),u)if(it(r))if(j(r)){o=new Array(r.length);for(var t=0;t<r.length;t++)o[t]=r[t]}else for(var e in o={},r)E.call(r,e)&&(o[e]=r[e]);else o=r})},$digest:function(){var t,e,n,r,i,o,a,u,s,c,l,f=this.$$asyncQueue,d=this.$$postDigestQueue,p=w,h=[];m("$digest"),g.$$checkUrlChange(),_=null;do{for(o=!1,u=this;f.length;){try{(l=f.shift()).scope.$eval(l.expression)}catch(t){$(),v(t)}_=null}t:do{if(r=u.$$watchers)for(i=r.length;i--;)try{if(t=r[i])if((e=t.get(u))===(n=t.last)||(t.eq?lt(e,n):"number"==typeof e&&"number"==typeof n&&isNaN(e)&&isNaN(n))){if(t===_){o=!1;break t}}else o=!0,(_=t).last=t.eq?F(e,null):e,t.fn(e,n===y?e:n,u),p<5&&(h[s=4-p]||(h[s]=[]),c=ut(t.exp)?"fn: "+(t.exp.name||t.exp.toString()):t.exp,c+="; newVal: "+W(e)+"; oldVal: "+W(n),h[s].push(c))}catch(t){$(),v(t)}if(!(a=u.$$childHead||u!==this&&u.$$nextSibling))for(;u!==this&&!(a=u.$$nextSibling);)u=u.$parent}while(u=a);if((o||f.length)&&!p--)throw $(),b("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",w,W(h))}while(o||f.length);for($();d.length;)try{d.shift()()}catch(t){v(t)}},$destroy:function(){if(!this.$$destroyed){var t=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this!==e&&(rt(this.$$listenerCount,V(null,o,this)),t.$$childHead==this&&(t.$$childHead=this.$$nextSibling),t.$$childTail==this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=null,this.$$listeners={},this.$$watchers=this.$$asyncQueue=this.$$postDigestQueue=[],this.$destroy=this.$digest=this.$apply=k,this.$on=this.$watch=function(){return k})}},$eval:function(t,e){return h(t)(this,e)},$evalAsync:function(t){e.$$phase||e.$$asyncQueue.length||g.defer(function(){e.$$asyncQueue.length&&e.$digest()}),this.$$asyncQueue.push({scope:this,expression:t})},$$postDigest:function(t){this.$$postDigestQueue.push(t)},$apply:function(t){try{return m("$apply"),this.$eval(t)}catch(t){v(t)}finally{$();try{e.$digest()}catch(t){throw v(t),t}}},$on:function(e,n){var r=this.$$listeners[e];r||(this.$$listeners[e]=r=[]),r.push(n);for(var t=this;t.$$listenerCount[e]||(t.$$listenerCount[e]=0),t.$$listenerCount[e]++,t=t.$parent;);var i=this;return function(){var t=I(r,n);-1!==t&&(r[t]=null,o(i,1,e))}},$emit:function(t,e){var n,r,i,o=[],a=this,u=!1,s={name:t,targetScope:a,stopPropagation:function(){u=!0},preventDefault:function(){s.defaultPrevented=!0},defaultPrevented:!1},c=B([s],arguments,1);do{for(n=a.$$listeners[t]||o,s.currentScope=a,r=0,i=n.length;r<i;r++)if(n[r])try{n[r].apply(null,c)}catch(t){v(t)}else n.splice(r,1),r--,i--;if(u)return s;a=a.$parent}while(a);return s},$broadcast:function(t,e){for(var n,r,i,o=this,a=o,u=o,s={name:t,targetScope:o,preventDefault:function(){s.defaultPrevented=!0},defaultPrevented:!1},c=B([s],arguments,1);a=u;){for(r=0,i=(n=(s.currentScope=a).$$listeners[t]||[]).length;r<i;r++)if(n[r])try{n[r].apply(null,c)}catch(t){v(t)}else n.splice(r,1),r--,i--;if(!(u=a.$$listenerCount[t]&&a.$$childHead||a!==o&&a.$$nextSibling))for(;a!==o&&!(u=a.$$nextSibling);)a=a.$parent}return s}};var e=new n;return e;function m(t){if(e.$$phase)throw b("inprog","{0} already in progress",e.$$phase);e.$$phase=t}function $(){e.$$phase=null}function s(t,e){var n=h(t);return K(n,e),n}function o(t,e,n){for(;t.$$listenerCount[n]-=e,0===t.$$listenerCount[n]&&delete t.$$listenerCount[n],t=t.$parent;);}function y(){}}]}function wn(){var i=/^\s*(https?|ftp|mailto|tel|file):/,o=/^\s*((https?|ftp|file):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return L(t)?(i=t,this):i},this.imgSrcSanitizationWhitelist=function(t){return L(t)?(o=t,this):o},this.$get=function(){return function(t,e){var n,r=e?o:i;return et&&!(8<=et)||""===(n=jn(t).href)||n.match(r)?t:"unsafe:"+n}}}var bn=x("$sce"),_n={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"};function xn(t){var e=[];return L(t)&&rt(t,function(t){e.push(function(t){if("self"===t)return t;if(ot(t)){if(-1<t.indexOf("***"))throw bn("iwcard","Illegal sequence *** in string matcher.  String: {0}",t);return t=(e=t,e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+t+"$")}if(P(t))return new RegExp("^"+t.source+"$");throw bn("imatcher",'Matchers may only be "self", string patterns or RegExp objects');var e}(t))}),e}function En(){this.SCE_CONTEXTS=_n;var a=["self"],u=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(a=xn(t)),a},this.resourceUrlBlacklist=function(t){return arguments.length&&(u=xn(t)),u},this.$get=["$injector",function(t){var r=function(t){throw bn("unsafe","Attempting to use an unsafe value in a safe context.")};function o(t,e){return"self"===t?Pn(e):!!t.exec(e.href)}function e(t){var e=function(t){this.$$unwrapTrustedValue=function(){return t}};return t&&(e.prototype=new t),e.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},e.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},e}t.has("$sanitize")&&(r=t.get("$sanitize"));var n=e(),i={};return i[_n.HTML]=e(n),i[_n.CSS]=e(n),i[_n.URL]=e(n),i[_n.JS]=e(n),i[_n.RESOURCE_URL]=e(i[_n.URL]),{trustAs:function(t,e){var n=i.hasOwnProperty(t)?i[t]:null;if(!n)throw bn("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",t,e);if(null===e||e===tt||""===e)return e;if("string"!=typeof e)throw bn("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",t);return new n(e)},getTrusted:function(t,e){if(null===e||e===tt||""===e)return e;var n=i.hasOwnProperty(t)?i[t]:null;if(n&&e instanceof n)return e.$$unwrapTrustedValue();if(t===_n.RESOURCE_URL){if(function(t){var e,n,r=jn(t.toString()),i=!1;for(e=0,n=a.length;e<n;e++)if(o(a[e],r)){i=!0;break}if(i)for(e=0,n=u.length;e<n;e++)if(o(u[e],r)){i=!1;break}return i}(e))return e;throw bn("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",e.toString())}if(t===_n.HTML)return r(e);throw bn("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(t){return t instanceof n?t.$$unwrapTrustedValue():t}}}]}function Sn(){var u=!0;this.enabled=function(t){return arguments.length&&(u=!!t),u},this.$get=["$parse","$sniffer","$sceDelegate",function(e,t,n){if(u&&t.msie&&t.msieDocumentMode<8)throw bn("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 9 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var i=ct(_n);i.isEnabled=function(){return u},i.trustAs=n.trustAs,i.getTrusted=n.getTrusted,i.valueOf=n.valueOf,u||(i.trustAs=i.getTrusted=function(t,e){return e},i.valueOf=y),i.parseAs=function(n,t){var r=e(t);return r.literal&&r.constant?r:function(t,e){return i.getTrusted(n,r(t,e))}};var r=i.parseAs,o=i.getTrusted,a=i.trustAs;return rt(_n,function(e,t){var n=S(t);i[Ct("parse_as_"+n)]=function(t){return r(e,t)},i[Ct("get_trusted_"+n)]=function(t){return o(e,t)},i[Ct("trust_as_"+n)]=function(t){return a(e,t)}}),i}]}function Cn(){this.$get=["$window","$document",function(t,e){var n,r,i={},o=C((/android (\d+)/.exec(S((t.navigator||{}).userAgent))||[])[1]),a=/Boxee/i.test((t.navigator||{}).userAgent),u=e[0]||{},s=u.documentMode,c=/^(Moz|webkit|O|ms)(?=[A-Z])/,l=u.body&&u.body.style,f=!1,d=!1;if(l){for(var p in l)if(r=c.exec(p)){n=(n=r[0]).substr(0,1).toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in l&&"webkit"),f=!!("transition"in l||n+"Transition"in l),d=!!("animation"in l||n+"Animation"in l),!o||f&&d||(f=ot(u.body.style.webkitTransition),d=ot(u.body.style.webkitAnimation))}return{history:!(!t.history||!t.history.pushState||o<4||a),hashchange:"onhashchange"in t&&(!s||7<s),hasEvent:function(t){if("input"==t&&9==et)return!1;if(q(i[t])){var e=u.createElement("div");i[t]="on"+t in e}return i[t]},csp:z(),vendorPrefix:n,transitions:f,animations:d,android:o,msie:et,msieDocumentMode:s}}]}function kn(){this.$get=["$rootScope","$browser","$q","$exceptionHandler",function(u,s,c,l){var f={};function t(t,e,n){var r,i=c.defer(),o=i.promise,a=L(n)&&!n;return r=s.defer(function(){try{i.resolve(t())}catch(t){i.reject(t),l(t)}finally{delete f[o.$$timeoutId]}a||u.$apply()},e),o.$$timeoutId=r,f[r]=i,o}return t.cancel=function(t){return!!(t&&t.$$timeoutId in f)&&(f[t.$$timeoutId].reject("canceled"),delete f[t.$$timeoutId],s.defer.cancel(t.$$timeoutId))},t}]}var qn=Z.createElement("a"),An=jn(v.location.href,!0);function jn(t,e){var n=t;return et&&(qn.setAttribute("href",n),n=qn.href),qn.setAttribute("href",n),{href:qn.href,protocol:qn.protocol?qn.protocol.replace(/:$/,""):"",host:qn.host,search:qn.search?qn.search.replace(/^\?/,""):"",hash:qn.hash?qn.hash.replace(/^#/,""):"",hostname:qn.hostname,port:qn.port,pathname:"/"===qn.pathname.charAt(0)?qn.pathname:"/"+qn.pathname}}function Pn(t){var e=ot(t)?jn(t):t;return e.protocol===An.protocol&&e.host===An.host}function Mn(){this.$get=w(v)}function Tn(r){var i="Filter";function o(t,e){if(it(t)){var n={};return rt(t,function(t,e){n[e]=o(e,t)}),n}return r.factory(t+i,e)}this.register=o,this.$get=["$injector",function(e){return function(t){return e.get(t+i)}}],o("currency",Dn),o("date",Wn),o("filter",On),o("json",Hn),o("limitTo",Yn),o("lowercase",Gn),o("number",Rn),o("orderBy",Xn),o("uppercase",Qn)}function On(){return function(t,n,i){if(!at(t))return t;var e=typeof i,r=[];r.check=function(t){for(var e=0;e<r.length;e++)if(!r[e](t))return!1;return!0},"function"!==e&&(i="boolean"===e&&i?function(t,e){return d.equals(t,e)}:function(t,e){if(t&&e&&"object"==typeof t&&"object"==typeof e){for(var n in t)if("$"!==n.charAt(0)&&E.call(t,n)&&i(t[n],e[n]))return!0;return!1}return e=(""+e).toLowerCase(),-1<(""+t).toLowerCase().indexOf(e)});var o=function(t,e){if("string"==typeof e&&"!"===e.charAt(0))return!o(t,e.substr(1));switch(typeof t){case"boolean":case"number":case"string":return i(t,e);case"object":switch(typeof e){case"object":return i(t,e);default:for(var n in t)if("$"!==n.charAt(0)&&o(t[n],e))return!0}return!1;case"array":for(var r=0;r<t.length;r++)if(o(t[r],e))return!0;return!1;default:return!1}};switch(typeof n){case"boolean":case"number":case"string":n={$:n};case"object":for(var a in n)!function(e){void 0!==n[e]&&r.push(function(t){return o("$"==e?t:t&&t[e],n[e])})}(a);break;case"function":r.push(n);break;default:return t}for(var u=[],s=0;s<t.length;s++){var c=t[s];r.check(c)&&u.push(c)}return u}}function Dn(t){var n=t.NUMBER_FORMATS;return function(t,e){return q(e)&&(e=n.CURRENCY_SYM),Nn(t,n.PATTERNS[1],n.GROUP_SEP,n.DECIMAL_SEP,2).replace(/\u00A4/g,e)}}function Rn(t){var n=t.NUMBER_FORMATS;return function(t,e){return Nn(t,n.PATTERNS[0],n.GROUP_SEP,n.DECIMAL_SEP,e)}}Tn.$inject=["$provide"],Dn.$inject=["$locale"],Rn.$inject=["$locale"];var In=".";function Nn(t,e,n,r,i){if(null==t||!isFinite(t)||it(t))return"";var o=t<0,a=(t=Math.abs(t))+"",u="",s=[],c=!1;if(-1!==a.indexOf("e")){var l=a.match(/([\d\.]+)e(-?)(\d+)/);l&&"-"==l[2]&&l[3]>i+1?(a="0",t=0):(u=a,c=!0)}if(c)0<i&&-1<t&&t<1&&(u=t.toFixed(i));else{var f=(a.split(In)[1]||"").length;q(i)&&(i=Math.min(Math.max(e.minFrac,f),e.maxFrac)),0===(t=+(Math.round(+(t.toString()+"e"+i)).toString()+"e"+-i))&&(o=!1);var d=(""+t).split(In),p=d[0];d=d[1]||"";var h,v=0,g=e.lgSize,m=e.gSize;if(p.length>=g+m)for(v=p.length-g,h=0;h<v;h++)(v-h)%m==0&&0!==h&&(u+=n),u+=p.charAt(h);for(h=v;h<p.length;h++)(p.length-h)%g==0&&0!==h&&(u+=n),u+=p.charAt(h);for(;d.length<i;)d+="0";i&&"0"!==i&&(u+=r+d.substr(0,i))}return s.push(o?e.negPre:e.posPre),s.push(u),s.push(o?e.negSuf:e.posSuf),s.join("")}function Un(t,e,n){var r="";for(t<0&&(r="-",t=-t),t=""+t;t.length<e;)t="0"+t;return n&&(t=t.substr(t.length-e)),r+t}function Ln(n,r,i,o){return i=i||0,function(t){var e=t["get"+n]();return(0<i||-i<e)&&(e+=i),0===e&&-12==i&&(e=12),Un(e,r,o)}}function Fn(r,i){return function(t,e){var n=t["get"+r]();return e[c(i?"SHORT"+r:r)][n]}}var zn={yyyy:Ln("FullYear",4),yy:Ln("FullYear",2,0,!0),y:Ln("FullYear",1),MMMM:Fn("Month"),MMM:Fn("Month",!0),MM:Ln("Month",2,1),M:Ln("Month",1,1),dd:Ln("Date",2),d:Ln("Date",1),HH:Ln("Hours",2),H:Ln("Hours",1),hh:Ln("Hours",2,-12),h:Ln("Hours",1,-12),mm:Ln("Minutes",2),m:Ln("Minutes",1),ss:Ln("Seconds",2),s:Ln("Seconds",1),sss:Ln("Milliseconds",3),EEEE:Fn("Day"),EEE:Fn("Day",!0),a:function(t,e){return t.getHours()<12?e.AMPMS[0]:e.AMPMS[1]},Z:function(t){var e=-1*t.getTimezoneOffset(),n=0<=e?"+":"";return n+=Un(Math[0<e?"floor":"ceil"](e/60),2)+Un(Math.abs(e%60),2)}},Bn=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,Vn=/^\-?\d+$/;function Wn(a){var f=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(e,t){var n,r,i="",o=[];if(t=t||"mediumDate",t=a.DATETIME_FORMATS[t]||t,ot(e)&&(e=Vn.test(e)?C(e):function(t){var e;if(e=t.match(f)){var n=new Date(0),r=0,i=0,o=e[8]?n.setUTCFullYear:n.setFullYear,a=e[8]?n.setUTCHours:n.setHours;e[9]&&(r=C(e[9]+e[10]),i=C(e[9]+e[11])),o.call(n,C(e[1]),C(e[2])-1,C(e[3]));var u=C(e[4]||0)-r,s=C(e[5]||0)-i,c=C(e[6]||0),l=Math.round(1e3*parseFloat("0."+(e[7]||0)));return a.call(n,u,s,c,l),n}return t}(e)),b(e)&&(e=new Date(e)),!A(e))return e;for(;t;)(r=Bn.exec(t))?t=(o=B(o,r,1)).pop():(o.push(t),t=null);return rt(o,function(t){n=zn[t],i+=n?n(e,a.DATETIME_FORMATS):t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),i}}function Hn(){return function(t){return W(t,!0)}}Wn.$inject=["$locale"];var Gn=w(S),Qn=w(c);function Yn(){return function(t,e){if(!at(t)&&!ot(t))return t;if(e=Math.abs(Number(e))===1/0?Number(e):C(e),ot(t))return e?0<=e?t.slice(0,e):t.slice(e,t.length):"";var n,r,i=[];for(e>t.length?e=t.length:e<-t.length&&(e=-t.length),0<e?(n=0,r=e):(n=t.length+e,r=t.length);n<r;n++)i.push(t[n]);return i}}function Xn(c){return function(t,i,e){return j(t)?(0===(i=at(i)?i:[i]).length&&(i=["+"]),r=function(t){var e=!1,n=t||y;if(ot(t)){if("+"!=t.charAt(0)&&"-"!=t.charAt(0)||(e="-"==t.charAt(0),t=t.substring(1)),""===t)return u(function(t,e){return s(t,e)},e);if((n=c(t)).constant){var r=n();return u(function(t,e){return s(t[r],e[r])},e)}}return u(function(t,e){return s(n(t),n(e))},e)},a=[],rt(i,function(t,e,n){a.push(r.call(o,t,e,n))}),i=a,l.call(t).sort(u(function(t,e){for(var n=0;n<i.length;n++){var r=i[n](t,e);if(0!==r)return r}return 0},e))):t;var r,o,a;function u(n,t){return H(t)?function(t,e){return n(e,t)}:n}function s(t,e){var n=typeof t,r=typeof e;return n==r?(A(t)&&A(e)&&(t=t.valueOf(),e=e.valueOf()),"string"==n&&(t=t.toLowerCase(),e=e.toLowerCase()),t===e?0:t<e?-1:1):n<r?-1:1}}}function Jn(t){return ut(t)&&(t={link:t}),t.restrict=t.restrict||"AC",w(t)}Xn.$inject=["$parse"];var Kn=w({restrict:"E",compile:function(t,e){if(et<=8&&(e.href||e.name||e.$set("href",""),t.append(Z.createComment("IE fix"))),!e.href&&!e.xlinkHref&&!e.name)return function(t,e){var n="[object SVGAnimatedString]"===u.call(e.prop("href"))?"xlink:href":"href";e.on("click",function(t){e.attr(n)||t.preventDefault()})}}}),Zn={};rt(Xt,function(t,r){if("multiple"!=t){var i=ye("ng-"+r);Zn[i]=function(){return{priority:100,link:function(t,e,n){t.$watch(n[i],function(t){n.$set(r,!!t)})}}}}}),rt(["src","srcset","href"],function(o){var a=ye("ng-"+o);Zn[a]=function(){return{priority:99,link:function(t,e,n){var r=o,i=o;"href"===o&&"[object SVGAnimatedString]"===u.call(e.prop("href"))&&(i="xlinkHref",n.$attr[i]="xlink:href",r=null),n.$observe(a,function(t){t?(n.$set(i,t),et&&r&&e.prop(r,n[i])):"href"===o&&n.$set(i,null)})}}}});var tr={$addControl:k,$removeControl:k,$setValidity:k,$setDirty:k,$setPristine:k};function er(n,t,e,r){var i=this,o=n.parent().controller("form")||tr,a=0,u=i.$error={},s=[];function c(t,e){e=e?"-"+pt(e,"-"):"",r.setClass(n,(t?hr:vr)+e,(t?vr:hr)+e)}i.$name=t.name||t.ngForm,i.$dirty=!1,i.$pristine=!0,i.$valid=!0,i.$invalid=!1,o.$addControl(i),n.addClass(gr),c(!0),i.$addControl=function(t){vt(t.$name,"input"),s.push(t),t.$name&&(i[t.$name]=t)},i.$removeControl=function(n){n.$name&&i[n.$name]===n&&delete i[n.$name],rt(u,function(t,e){i.$setValidity(e,!0,n)}),N(s,n)},i.$setValidity=function(t,e,n){var r=u[t];if(e)r&&(N(r,n),r.length||(--a||(c(e),i.$valid=!0,i.$invalid=!1),c(!(u[t]=!1),t),o.$setValidity(t,!0,i)));else{if(a||c(e),r){if(-1!=I(r,n))return}else u[t]=r=[],a++,c(!1,t),o.$setValidity(t,!1,i);r.push(n),i.$valid=!1,i.$invalid=!0}},i.$setDirty=function(){r.removeClass(n,gr),r.addClass(n,mr),i.$dirty=!0,i.$pristine=!1,o.$setDirty()},i.$setPristine=function(){r.removeClass(n,mr),r.addClass(n,gr),i.$dirty=!1,i.$pristine=!0,rt(s,function(t){t.$setPristine()})}}er.$inject=["$element","$attrs","$scope","$animate"];var nr=function(t){return["$timeout",function(u){return{name:"form",restrict:t?"EAC":"E",controller:er,compile:function(){return{pre:function(t,e,n,r){if(!n.action){var i=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1};bt(e[0],"submit",i),e.on("$destroy",function(){u(function(){_t(e[0],"submit",i)},0,!1)})}var o=e.parent().controller("form"),a=n.name||n.ngForm;a&&ln(t,a,r,a),o&&e.on("$destroy",function(){o.$removeControl(r),a&&ln(t,a,tt,a),O(r,tr)})}}}}}]},rr=nr(),ir=nr(!0),or=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,ar=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,ur=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,sr={text:fr,number:function(t,e,n,r,i,o){if(fr(t,e,n,r,i,o),r.$parsers.push(function(t){var e=r.$isEmpty(t);return e||ur.test(t)?(r.$setValidity("number",!0),""===t?null:e?t:parseFloat(t)):(r.$setValidity("number",!1),tt)}),u=r,s="number",c=dr,l=null,f=r.$$validityState,it(f)&&(u.$$hasNativeValidators=!0,u.$parsers.push(function(t){if(u.$error[s]||lr(f,l)||!lr(f,c))return t;u.$setValidity(s,!1)})),r.$formatters.push(function(t){return r.$isEmpty(t)?"":""+t}),n.min){var a=function(t){var e=parseFloat(n.min);return cr(r,"min",r.$isEmpty(t)||e<=t,t)};r.$parsers.push(a),r.$formatters.push(a)}var u,s,c,l,f;if(n.max){var d=function(t){var e=parseFloat(n.max);return cr(r,"max",r.$isEmpty(t)||t<=e,t)};r.$parsers.push(d),r.$formatters.push(d)}r.$formatters.push(function(t){return cr(r,"number",r.$isEmpty(t)||b(t),t)})},url:function(t,e,n,r,i,o){fr(t,e,n,r,i,o);var a=function(t){return cr(r,"url",r.$isEmpty(t)||or.test(t),t)};r.$formatters.push(a),r.$parsers.push(a)},email:function(t,e,n,r,i,o){fr(t,e,n,r,i,o);var a=function(t){return cr(r,"email",r.$isEmpty(t)||ar.test(t),t)};r.$formatters.push(a),r.$parsers.push(a)},radio:function(t,e,n,r){q(n.name)&&e.attr("name",i());e.on("click",function(){e[0].checked&&t.$apply(function(){r.$setViewValue(n.value)})}),r.$render=function(){var t=n.value;e[0].checked=t==r.$viewValue},n.$observe("value",r.$render)},checkbox:function(t,e,n,r){var i=n.ngTrueValue,o=n.ngFalseValue;ot(i)||(i=!0);ot(o)||(o=!1);e.on("click",function(){t.$apply(function(){r.$setViewValue(e[0].checked)})}),r.$render=function(){e[0].checked=r.$viewValue},r.$isEmpty=function(t){return t!==i},r.$formatters.push(function(t){return t===i}),r.$parsers.push(function(t){return t?i:o})},hidden:k,button:k,submit:k,reset:k,file:k};function cr(t,e,n,r){return t.$setValidity(e,n),n?r:tt}function lr(t,e){var n;if(e)for(n=0;n<e.length;++n)if(t[e[n]])return!0;return!1}function fr(r,i,o,a,t,e){var u=i.prop(_),s=i[0].placeholder,c={},l=S(i[0].type);if(a.$$validityState=u,!t.android){var f=!1;i.on("compositionstart",function(t){f=!0}),i.on("compositionend",function(){f=!1,n()})}var n=function(t){if(!f){var e=i.val();if(et&&"input"===(t||c).type&&i[0].placeholder!==s)s=i[0].placeholder;else{"password"!==l&&H(o.ngTrim||"T")&&(e=st(e));var n=u&&a.$$hasNativeValidators;(a.$viewValue!==e||""===e&&n)&&(r.$root.$$phase?a.$setViewValue(e):r.$apply(function(){a.$setViewValue(e)}))}}};if(t.hasEvent("input"))i.on("input",n);else{var d,p=function(){d||(d=e.defer(function(){n(),d=null}))};i.on("keydown",function(t){var e=t.keyCode;91===e||15<e&&e<19||37<=e&&e<=40||p()}),t.hasEvent("paste")&&i.on("paste cut",p)}i.on("change",n),a.$render=function(){i.val(a.$isEmpty(a.$viewValue)?"":a.$viewValue)};var h,v,g=o.ngPattern;if(g){var m=function(t,e){return cr(a,"pattern",a.$isEmpty(e)||t.test(e),e)};(v=g.match(/^\/(.*)\/([gim]*)$/))?(g=new RegExp(v[1],v[2]),h=function(t){return m(g,t)}):h=function(t){var e=r.$eval(g);if(!e||!e.test)throw x("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",g,e,dt(i));return m(e,t)},a.$formatters.push(h),a.$parsers.push(h)}if(o.ngMinlength){var $=C(o.ngMinlength),y=function(t){return cr(a,"minlength",a.$isEmpty(t)||t.length>=$,t)};a.$parsers.push(y),a.$formatters.push(y)}if(o.ngMaxlength){var w=C(o.ngMaxlength),b=function(t){return cr(a,"maxlength",a.$isEmpty(t)||t.length<=w,t)};a.$parsers.push(b),a.$formatters.push(b)}}var dr=["badInput"];var pr=["$browser","$sniffer",function(i,o){return{restrict:"E",require:"?ngModel",link:function(t,e,n,r){r&&(sr[S(n.type)]||sr.text)(t,e,n,r,o,i)}}}],hr="ng-valid",vr="ng-invalid",gr="ng-pristine",mr="ng-dirty",$r=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate",function(r,n,t,i,e,o){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$name=t.name;var a=e(t.ngModel),u=a.assign;if(!u)throw x("ngModel")("nonassign","Expression '{0}' is non-assignable. Element: {1}",t.ngModel,dt(i));this.$render=k,this.$isEmpty=function(t){return q(t)||""===t||null===t||t!=t};var s=i.inheritedData("$formController")||tr,c=0,l=this.$error={};function f(t,e){e=e?"-"+pt(e,"-"):"",o.removeClass(i,(t?vr:hr)+e),o.addClass(i,(t?hr:vr)+e)}i.addClass(gr),f(!0),this.$setValidity=function(t,e){l[t]!==!e&&(e?(l[t]&&c--,c||(f(!0),this.$valid=!0,this.$invalid=!1)):(f(!1),this.$invalid=!0,this.$valid=!1,c++),l[t]=!e,f(e,t),s.$setValidity(t,e,this))},this.$setPristine=function(){this.$dirty=!1,this.$pristine=!0,o.removeClass(i,mr),o.addClass(i,gr)},this.$setViewValue=function(e){this.$viewValue=e,this.$pristine&&(this.$dirty=!0,this.$pristine=!1,o.removeClass(i,gr),o.addClass(i,mr),s.$setDirty()),rt(this.$parsers,function(t){e=t(e)}),this.$modelValue!==e&&(this.$modelValue=e,u(r,e),rt(this.$viewChangeListeners,function(t){try{t()}catch(t){n(t)}}))};var d=this;r.$watch(function(){var t=a(r);if(d.$modelValue!==t){var e=d.$formatters,n=e.length;for(d.$modelValue=t;n--;)t=e[n](t);d.$viewValue!==t&&(d.$viewValue=t,d.$render())}return t})}],yr=function(){return{require:["ngModel","^?form"],controller:$r,link:function(t,e,n,r){var i=r[0],o=r[1]||tr;o.$addControl(i),t.$on("$destroy",function(){o.$removeControl(i)})}}},wr=w({require:"ngModel",link:function(t,e,n,r){r.$viewChangeListeners.push(function(){t.$eval(n.ngChange)})}}),br=function(){return{require:"?ngModel",link:function(t,e,n,r){if(r){n.required=!0;var i=function(t){return n.required&&r.$isEmpty(t)?void r.$setValidity("required",!1):(r.$setValidity("required",!0),t)};r.$formatters.push(i),r.$parsers.unshift(i),n.$observe("required",function(){i(r.$viewValue)})}}}},_r=function(){return{require:"ngModel",link:function(t,e,n,r){var i=/\/(.*)\//.exec(n.ngList),o=i&&new RegExp(i[1])||n.ngList||",";r.$parsers.push(function(t){if(!q(t)){var e=[];return t&&rt(t.split(o),function(t){t&&e.push(st(t))}),e}}),r.$formatters.push(function(t){return at(t)?t.join(", "):tt}),r.$isEmpty=function(t){return!t||!t.length}}}},xr=/^(true|false|\d+)$/,Er=function(){return{priority:100,compile:function(t,e){return xr.test(e.ngValue)?function(t,e,n){n.$set("value",t.$eval(n.ngValue))}:function(t,e,n){t.$watch(n.ngValue,function(t){n.$set("value",t)})}}}},Sr=Jn({compile:function(t){return t.addClass("ng-binding"),function(t,e,n){e.data("$binding",n.ngBind),t.$watch(n.ngBind,function(t){e.text(t==tt?"":t)})}}}),Cr=["$interpolate",function(i){return function(t,e,n){var r=i(e.attr(n.$attr.ngBindTemplate));e.addClass("ng-binding").data("$binding",r),n.$observe("ngBindTemplate",function(t){e.text(t)})}}],kr=["$sce","$parse",function(i,o){return{compile:function(t){return t.addClass("ng-binding"),function(e,n,t){n.data("$binding",t.ngBindHtml);var r=o(t.ngBindHtml);e.$watch(function(){return(r(e)||"").toString()},function(t){n.html(i.getTrustedHtml(r(e))||"")})}}}}];function qr(a,v){return a="ngClass"+a,["$animate",function(d){return{restrict:"AC",link:function(u,s,o){var c;function l(t){var e=f(t,1);o.$addClass(e)}function f(t,e){var n=s.data("$classCounts")||{},r=[];return rt(t,function(t){(0<e||n[t])&&(n[t]=(n[t]||0)+e,n[t]===+(0<e)&&r.push(t))}),s.data("$classCounts",n),r.join(" ")}function e(t){if(!0===v||u.$index%2===v){var e=h(t||[]);if(c){if(!lt(t,c)){var n=h(c);o=p(i=e,r=n),a=f(a=p(r,i),-1),0===(o=f(o,1)).length?d.removeClass(s,a):0===a.length?d.addClass(s,o):d.setClass(s,o,a)}}else l(e)}var r,i,o,a;c=ct(t)}u.$watch(o[a],e,!0),o.$observe("class",function(t){e(u.$eval(o[a]))}),"ngClass"!==a&&u.$watch("$index",function(t,e){var n,r=1&t;if(r!==(1&e)){var i=h(u.$eval(o[a]));r===v?l(i):(n=f(i,-1),o.$removeClass(n))}})}};function p(t,e){var n=[];t:for(var r=0;r<t.length;r++){for(var i=t[r],o=0;o<e.length;o++)if(i==e[o])continue t;n.push(i)}return n}function h(t){if(at(t))return t;if(ot(t))return t.split(" ");if(it(t)){var n=[];return rt(t,function(t,e){t&&(n=n.concat(e.split(" ")))}),n}return t}}]}var Ar=qr("",!0),jr=qr("Odd",0),Pr=qr("Even",1),Mr=Jn({compile:function(t,e){e.$set("ngCloak",tt),t.removeClass("ng-cloak")}}),Tr=[function(){return{scope:!0,controller:"@",priority:500}}],Or={},Dr={blur:!0,focus:!0};rt("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(o){var a=ye("ng-"+o);Or[a]=["$parse","$rootScope",function(n,i){return{compile:function(t,e){var r=n(e[a],!0);return function(n,t){t.on(o,function(t){var e=function(){r(n,{$event:t})};Dr[o]&&i.$$phase?n.$evalAsync(e):n.$apply(e)})}}}}]});var Rr=["$animate",function(s){return{transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(e,n,r,t,i){var o,a,u;e.$watch(r.ngIf,function(t){H(t)?a||(a=e.$new(),i(a,function(t){t[t.length++]=Z.createComment(" end ngIf: "+r.ngIf+" "),o={clone:t},s.enter(t,n.parent(),n)})):(u&&(u.remove(),u=null),a&&(a.$destroy(),a=null),o&&(u=mt(o.clone),s.leave(u,function(){u=null}),o=null))})}}}],Ir=["$http","$templateCache","$anchorScroll","$animate","$sce",function(v,g,m,$,r){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:d.noop,compile:function(t,e){var n=e.ngInclude||e.src,p=e.onload||"",h=e.autoscroll;return function(o,a,t,u,s){var c,e,l,f=0,d=function(){e&&(e.remove(),e=null),c&&(c.$destroy(),c=null),l&&($.leave(l,function(){e=null}),e=l,l=null)};o.$watch(r.parseAsResourceUrl(n),function(t){var r=function(){!L(h)||h&&!o.$eval(h)||m()},i=++f;t?(v.get(t,{cache:g}).success(function(t){if(i===f){var e=o.$new();u.template=t;var n=s(e,function(t){d(),$.enter(t,null,a,r)});l=n,(c=e).$emit("$includeContentLoaded"),o.$eval(p)}}).error(function(){i===f&&d()}),o.$emit("$includeContentRequested")):(d(),u.template=null)})}}}}],Nr=["$compile",function(i){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(t,e,n,r){e.html(r.template),i(e.contents())(t)}}}],Ur=Jn({priority:450,compile:function(){return{pre:function(t,e,n){t.$eval(n.ngInit)}}}}),Lr=Jn({terminal:!0,priority:1e3}),Fr=["$locale","$interpolate",function(f,d){var p=/{}/g;return{restrict:"EA",link:function(e,n,r){var i=r.count,t=r.$attr.when&&n.attr(r.$attr.when),o=r.offset||0,a=e.$eval(t)||{},u={},s=d.startSymbol(),c=d.endSymbol(),l=/^when(Minus)?(.+)$/;rt(r,function(t,e){l.test(e)&&(a[S(e.replace("when","").replace("Minus","-"))]=n.attr(r.$attr[e]))}),rt(a,function(t,e){u[e]=d(t.replace(p,s+i+"-"+o+c))}),e.$watch(function(){var t=parseFloat(e.$eval(i));return isNaN(t)?"":(t in a||(t=f.pluralCat(t-o)),u[t](e,n,!0))},function(t){n.text(t)})}}}],zr=["$parse","$animate",function(s,C){var k="$$NG_REMOVED",q=x("ngRepeat");return{transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,link:function(g,m,t,e,$){var n,r,y,w,b,i,o,_,x,E=t.ngRepeat,a=E.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),u={$id:Zt};if(!a)throw q("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",E);if(i=a[1],o=a[2],(n=a[3])?(r=s(n),y=function(t,e,n){return x&&(u[x]=t),u[_]=e,u.$index=n,r(g,u)}):(w=function(t,e){return Zt(e)},b=function(t){return t}),!(a=i.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/)))throw q("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",i);_=a[3]||a[1],x=a[2];var S={};g.$watchCollection(o,function(t){var e,n,r,i,o,a,u,s,c,l,f,d,p=m[0],h={},v=[];if(j(t))l=t,c=y||w;else{for(a in c=y||b,l=[],t)t.hasOwnProperty(a)&&"$"!=a.charAt(0)&&l.push(a);l.sort()}for(i=l.length,n=v.length=l.length,e=0;e<n;e++)if(vt(s=c(a=t===l?e:l[e],u=t[a],e),"`track by` id"),S.hasOwnProperty(s))f=S[s],delete S[s],h[s]=f,v[e]=f;else{if(h.hasOwnProperty(s))throw rt(v,function(t){t&&t.scope&&(S[t.id]=t)}),q("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",E,s,W(u));v[e]={id:s},h[s]=!1}for(a in S)S.hasOwnProperty(a)&&(d=mt((f=S[a]).clone),C.leave(d),rt(d,function(t){t[k]=!0}),f.scope.$destroy());for(e=0,n=l.length;e<n;e++){if(u=t[a=t===l?e:l[e]],f=v[e],v[e-1]&&(p=A(v[e-1])),f.scope){for(o=f.scope,r=p;(r=r.nextSibling)&&r[k];);f.clone[0]!=r&&C.move(mt(f.clone),null,nt(p)),p=A(f)}else o=g.$new();o[_]=u,x&&(o[x]=a),o.$index=e,o.$first=0===e,o.$last=e===i-1,o.$middle=!(o.$first||o.$last),o.$odd=!(o.$even=0==(1&e)),f.scope||$(o,function(t){t[t.length++]=Z.createComment(" end ngRepeat: "+E+" "),C.enter(t,null,nt(p)),p=t,f.scope=o,f.clone=t,h[f.id]=f})}S=h})}};function A(t){return t.clone[t.clone.length-1]}}],Br=["$animate",function(r){return function(t,e,n){t.$watch(n.ngShow,function(t){r[H(t)?"removeClass":"addClass"](e,"ng-hide")})}}],Vr=["$animate",function(r){return function(t,e,n){t.$watch(n.ngHide,function(t){r[H(t)?"addClass":"removeClass"](e,"ng-hide")})}}],Wr=Jn(function(t,n,e){t.$watch(e.ngStyle,function(t,e){e&&t!==e&&rt(e,function(t,e){n.css(e,"")}),t&&n.css(t)},!0)}),Hr=["$animate",function(f){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(i,t,o,a){var e=o.ngSwitch||o.on,u=[],s=[],c=[],l=[];i.$watch(e,function(t){var e,n;for(e=0,n=c.length;e<n;++e)c[e].remove();for(c.length=0,e=0,n=l.length;e<n;++e){var r=s[e];l[e].$destroy(),c[e]=r,f.leave(r,function(){c.splice(e,1)})}s.length=0,l.length=0,(u=a.cases["!"+t]||a.cases["?"])&&(i.$eval(o.change),rt(u,function(n){var t=i.$new();l.push(t),n.transclude(t,function(t){var e=n.element;s.push(t),f.enter(t,e.parent(),e)})}))})}}}],Gr=Jn({transclude:"element",priority:800,require:"^ngSwitch",link:function(t,e,n,r,i){r.cases["!"+n.ngSwitchWhen]=r.cases["!"+n.ngSwitchWhen]||[],r.cases["!"+n.ngSwitchWhen].push({transclude:i,element:e})}}),Qr=Jn({transclude:"element",priority:800,require:"^ngSwitch",link:function(t,e,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:e})}}),Yr=Jn({link:function(t,e,n,r,i){if(!i)throw x("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",dt(e));i(function(t){e.empty(),e.append(t)})}}),Xr=["$templateCache",function(i){return{restrict:"E",terminal:!0,compile:function(t,e){if("text/ng-template"==e.type){var n=e.id,r=t[0].text;i.put(n,r)}}}}],Jr=x("ngOptions"),Kr=w({terminal:!0}),Zr=["$compile","$parse",function(y,w){var b=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,u={$setViewValue:k};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(n,t,e){var r,i=this,o={},a=u;i.databound=e.ngModel,i.init=function(t,e,n){a=t,r=n},i.addOption=function(t){vt(t,'"option value"'),o[t]=!0,a.$viewValue==t&&(n.val(t),r.parent()&&r.remove())},i.removeOption=function(t){this.hasOption(t)&&(delete o[t],a.$viewValue==t&&this.renderUnknownOption(t))},i.renderUnknownOption=function(t){var e="? "+Zt(t)+" ?";r.val(e),n.prepend(r),n.val(e),r.prop("selected",!0)},i.hasOption=function(t){return o.hasOwnProperty(t)},t.$on("$destroy",function(){i.renderUnknownOption=k})}],link:function(t,e,n,r){if(r[1]){for(var i,o,a,u,s,c,l,f,d,O=r[0],p=r[1],D=n.multiple,h=n.ngOptions,R=!1,I=nt(Z.createElement("option")),N=nt(Z.createElement("optgroup")),v=I.clone(),g=0,m=e.children(),$=m.length;g<$;g++)if(""===m[g].value){i=R=m.eq(g);break}O.init(p,R,v),D&&(p.$isEmpty=function(t){return!t||0===t.length}),h?function(x,E,S){var t;if(!(t=h.match(b)))throw Jr("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",h,dt(E));var C=w(t[2]||t[1]),k=t[4]||t[6],q=t[5],A=w(t[3]||""),j=w(t[2]?t[1]:k),P=w(t[7]),M=t[8]?w(t[8]):null,T=[[{element:E,label:""}]];R&&(y(R)(x),R.removeClass("ng-scope"),R.remove());E.empty(),E.on("change",function(){x.$apply(function(){var t,e,n,r,i,o,a,u,s,c=P(x)||[],l={};if(D){for(n=[],o=0,u=T.length;o<u;o++)for(i=1,a=(t=T[o]).length;i<a;i++)if((r=t[i].element)[0].selected){if(e=r.val(),q&&(l[q]=e),M)for(s=0;s<c.length&&(l[k]=c[s],M(x,l)!=e);s++);else l[k]=c[e];n.push(j(x,l))}}else if("?"==(e=E.val()))n=tt;else if(""===e)n=null;else if(M){for(s=0;s<c.length;s++)if(l[k]=c[s],M(x,l)==e){n=j(x,l);break}}else l[k]=c[e],q&&(l[q]=e),n=j(x,l);S.$setViewValue(n),f()})}),S.$render=f,x.$watchCollection(P,f),x.$watchCollection(function(){var t={},e=P(x);if(e){for(var n=new Array(e.length),r=0,i=e.length;r<i;r++)t[k]=e[r],n[r]=C(x,t);return n}},f),D&&x.$watchCollection(function(){return S.$modelValue},f);function f(){var t,e,n,r,i,o,a,u,s,c,l,f,d,p,h,v={"":[]},g=[""],m=S.$modelValue,$=P(x)||[],y=q?U($):$,w={},b=function(){var t=!1;if(D){var e=S.$modelValue;if(M&&at(e)){t=new te([]);for(var n={},r=0;r<e.length;r++)n[k]=e[r],t.put(M(x,n),e[r])}else t=new te(e)}return t}();for(l=0;s=y.length,l<s;l++){if(a=l,q){if("$"===(a=y[l]).charAt(0))continue;w[q]=a}if(w[k]=$[a],t=A(x,w)||"",(e=v[t])||(e=v[t]=[],g.push(t)),D)f=L(b.remove(M?M(x,w):j(x,w)));else{if(M){var _={};_[k]=m,f=M(x,_)===M(x,w)}else f=m===j(x,w);b=b||f}h=L(h=C(x,w))?h:"",e.push({id:M?M(x,w):q?y[l]:l,label:h,selected:f})}for(D||(R||null===m?v[""].unshift({id:"",label:"",selected:!b}):b||v[""].unshift({id:"?",label:"",selected:!0})),c=0,u=g.length;c<u;c++){for(t=g[c],e=v[t],T.length<=c?(r={element:N.clone().attr("label",t),label:e.label},i=[r],T.push(i),E.append(r.element)):(i=T[c],(r=i[0]).label!=t&&r.element.attr("label",r.label=t)),d=null,l=0,s=e.length;l<s;l++)n=e[l],(o=i[l+1])?(d=o.element,o.label!==n.label&&(d.text(o.label=n.label),d.prop("label",o.label)),o.id!==n.id&&d.val(o.id=n.id),d[0].selected!==n.selected&&(d.prop("selected",o.selected=n.selected),et&&d.prop("selected",o.selected))):(""===n.id&&R?p=R:(p=I.clone()).val(n.id).prop("selected",n.selected).attr("selected",n.selected).prop("label",n.label).text(n.label),i.push(o={element:p,label:n.label,id:n.id,selected:n.selected}),O.addOption(n.label,p),d?d.after(p):r.element.append(p),d=p);for(l++;i.length>l;)n=i.pop(),O.removeOption(n.label),n.element.remove()}for(;T.length>c;)T.pop()[0].element.remove()}}(t,e,p):D?(c=t,l=e,(f=p).$render=function(){var e=new te(f.$viewValue);rt(l.find("option"),function(t){t.selected=L(e.get(t.value))})},c.$watch(function(){lt(d,f.$viewValue)||(d=ct(f.$viewValue),f.$render())}),l.on("change",function(){c.$apply(function(){var e=[];rt(l.find("option"),function(t){t.selected&&e.push(t.value)}),f.$setViewValue(e)})})):(o=t,a=e,s=O,(u=p).$render=function(){var t=u.$viewValue;s.hasOption(t)?(v.parent()&&v.remove(),a.val(t),""===t&&i.prop("selected",!0)):q(t)&&i?a.val(""):s.renderUnknownOption(t)},a.on("change",function(){o.$apply(function(){v.parent()&&v.remove(),u.$setViewValue(a.val())})}))}}}}],ti=["$interpolate",function(n){var u={addOption:k,removeOption:k};return{restrict:"E",priority:100,compile:function(t,e){if(q(e.value)){var a=n(t.text(),!0);a||e.$set("value",t.text())}return function(t,e,n){var r="$selectController",i=e.parent(),o=i.data(r)||i.parent().data(r);o&&o.databound?e.prop("selected",!1):o=u,a?t.$watch(a,function(t,e){n.$set("value",t),t!==e&&o.removeOption(e),o.addOption(t)}):o.addOption(n.value),e.on("$destroy",function(){o.removeOption(n.value)})}}}}],ei=w({restrict:"E",terminal:!0});v.angular.bootstrap?console.log("WARNING: Tried to load angular more than once."):((h=v.jQuery)&&h.fn.on?(O((nt=h).fn,{scope:Yt.scope,isolateScope:Yt.isolateScope,controller:Yt.controller,injector:Yt.injector,inheritedData:Yt.inheritedData}),kt("remove",!0,!0,!1),kt("empty",!1,!1,!1),kt("html",!1,!1,!0)):nt=Dt,d.element=nt,function(t){O(t,{bootstrap:X,copy:F,extend:O,equals:lt,element:nt,forEach:rt,injector:ue,noop:k,bind:V,toJson:W,fromJson:a,identity:y,isUndefined:q,isDefined:L,isString:ot,isFunction:ut,isObject:it,isNumber:b,isElement:e,isArray:at,version:$t,isDate:A,lowercase:S,uppercase:c,callbacks:{counter:0},$$minErr:x,$$csp:z}),p=function(t){var s=x("$injector"),n=x("ng");function e(t,e,n){return t[e]||(t[e]=n())}var r=e(t,"angular",Object);return r.$$minErr=r.$$minErr||x,e(r,"module",function(){var t={};return function(o,a,u){return function(t,e){if("hasOwnProperty"===t)throw n("badname","hasOwnProperty is not a valid {0} name",e)}(o,"module"),a&&t.hasOwnProperty(o)&&(t[o]=null),e(t,o,function(){if(!a)throw s("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",o);var r=[],e=[],t=n("$injector","invoke"),i={_invokeQueue:r,_runBlocks:e,requires:a,name:o,provider:n("$provide","provider"),factory:n("$provide","factory"),service:n("$provide","service"),value:n("$provide","value"),constant:n("$provide","constant","unshift"),animation:n("$animateProvider","register"),filter:n("$filterProvider","register"),controller:n("$controllerProvider","register"),directive:n("$compileProvider","directive"),config:t,run:function(t){return e.push(t),this}};return u&&t(u),i;function n(t,e,n){return function(){return r[n||"push"]([t,e,arguments]),i}}})}})}(v);try{p("ngLocale")}catch(t){p("ngLocale",[]).provider("$locale",Oe)}p("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:wn}),t.provider("$compile",me).directive({a:Kn,input:pr,textarea:pr,form:rr,script:Xr,select:Zr,style:ei,option:ti,ngBind:Sr,ngBindHtml:kr,ngBindTemplate:Cr,ngClass:Ar,ngClassEven:Pr,ngClassOdd:jr,ngCloak:Mr,ngController:Tr,ngForm:ir,ngHide:Vr,ngIf:Rr,ngInclude:Ir,ngInit:Ur,ngNonBindable:Lr,ngPluralize:Fr,ngRepeat:zr,ngShow:Br,ngStyle:Wr,ngSwitch:Hr,ngSwitchWhen:Gr,ngSwitchDefault:Qr,ngOptions:Kr,ngTransclude:Yr,ngModel:yr,ngList:_r,ngChange:wr,required:br,ngRequired:br,ngValue:Er}).directive({ngInclude:Nr}).directive(Zn).directive(Or),t.provider({$anchorScroll:se,$animate:le,$browser:pe,$cacheFactory:he,$controller:be,$document:_e,$exceptionHandler:xe,$filter:Tn,$interpolate:Me,$interval:Te,$http:qe,$httpBackend:je,$location:Ye,$log:Xe,$parse:gn,$rootScope:yn,$q:mn,$sce:Sn,$sceDelegate:En,$sniffer:Cn,$templateCache:ve,$timeout:kn,$window:Mn,$$rAF:$n,$$asyncCallback:fe})}])}(d),nt(Z).ready(function(){!function(e,t){var r,i,n=[e],o=["ng:app","ng-app","x-ng-app","data-ng-app"],a=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;function u(t){t&&n.push(t)}rt(o,function(t){o[t]=!0,u(Z.getElementById(t)),t=t.replace(":","\\:"),e.querySelectorAll&&(rt(e.querySelectorAll("."+t),u),rt(e.querySelectorAll("."+t+"\\:"),u),rt(e.querySelectorAll("["+t+"]"),u))}),rt(n,function(e){if(!r){var t=" "+e.className+" ",n=a.exec(t);n?(r=e,i=(n[2]||"").replace(/\s+/g,",")):rt(e.attributes,function(t){!r&&o[t.name]&&(r=e,i=t.value)})}}),r&&t(r,i?[i]:[])}(Z,X)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\\:form{display:block;}.ng-animate-block-transitions{transition:0s all!important;-webkit-transition:0s all!important;}.ng-hide-add-active,.ng-hide-remove{display:block!important;}</style>');var commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(t,e){return t(e={exports:{}},e.exports),e.exports}var lodash=createCommonjsModule(function($,y){
/**
 * @license
 * lodash 3.10.1 (Custom Build) <https://lodash.com/>
 * Build: `lodash modern -d -o ./index.js`
 * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <https://lodash.com/license>
 */
(function(){var hi,t,e,vi="3.10.1",gi=1,mi=2,$i=4,yi=8,wi=16,bi=32,_i=64,xi=128,Ei=256,Si=30,Ci="...",ki=150,qi=16,Ai=200,ji=1,Pi=2,Mi="Expected a function",Ti="__lodash_placeholder__",Oi="[object Arguments]",Di="[object Array]",Ri="[object Boolean]",Ii="[object Date]",Ni="[object Error]",Ui="[object Function]",n="[object Map]",Li="[object Number]",Fi="[object Object]",zi="[object RegExp]",r="[object Set]",Bi="[object String]",i="[object WeakMap]",Vi="[object ArrayBuffer]",Wi="[object Float32Array]",Hi="[object Float64Array]",Gi="[object Int8Array]",Qi="[object Int16Array]",Yi="[object Int32Array]",Xi="[object Uint8Array]",Ji="[object Uint8ClampedArray]",Ki="[object Uint16Array]",Zi="[object Uint32Array]",to=/\b__p \+= '';/g,eo=/\b(__p \+=) '' \+/g,no=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ro=/&(?:amp|lt|gt|quot|#39|#96);/g,io=/[&<>"'`]/g,oo=RegExp(ro.source),ao=RegExp(io.source),uo=/<%-([\s\S]+?)%>/g,so=/<%([\s\S]+?)%>/g,co=/<%=([\s\S]+?)%>/g,lo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,fo=/^\w*$/,po=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,ho=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,vo=RegExp(ho.source),go=/[\u0300-\u036f\ufe20-\ufe23]/g,mo=/\\(\\)?/g,$o=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,yo=/\w*$/,wo=/^0[xX]/,bo=/^\[object .+?Constructor\]$/,_o=/^\d+$/,xo=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Eo=/($^)/,So=/['\n\r\u2028\u2029\\]/g,Co=(t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",e="[a-z\\xdf-\\xf6\\xf8-\\xff]+",RegExp(t+"+(?="+t+e+")|"+t+"?"+e+"|"+t+"+|[0-9]+","g")),ko=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],qo=-1,Ao={};Ao[Wi]=Ao[Hi]=Ao[Gi]=Ao[Qi]=Ao[Yi]=Ao[Xi]=Ao[Ji]=Ao[Ki]=Ao[Zi]=!0,Ao[Oi]=Ao[Di]=Ao[Vi]=Ao[Ri]=Ao[Ii]=Ao[Ni]=Ao[Ui]=Ao[n]=Ao[Li]=Ao[Fi]=Ao[zi]=Ao[r]=Ao[Bi]=Ao[i]=!1;var jo={};jo[Oi]=jo[Di]=jo[Vi]=jo[Ri]=jo[Ii]=jo[Wi]=jo[Hi]=jo[Gi]=jo[Qi]=jo[Yi]=jo[Li]=jo[Fi]=jo[zi]=jo[Bi]=jo[Xi]=jo[Ji]=jo[Ki]=jo[Zi]=!0,jo[Ni]=jo[Ui]=jo[n]=jo[r]=jo[i]=!1;var o={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},u={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},s={function:!0,object:!0},c={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},l={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},f=s.object&&y&&!y.nodeType&&y,d=s.object&&$&&!$.nodeType&&$,p=f&&d&&"object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object&&commonjsGlobal,h=s[typeof self]&&self&&self.Object&&self,v=s[typeof window]&&window&&window.Object&&window,g=d&&d.exports===f&&f,Po=p||v!==(this&&this.window)&&v||h||this;function Mo(t,e){if(t!==e){var n=null===t,r=t===hi,i=t==t,o=null===e,a=e===hi,u=e==e;if(e<t&&!o||!i||n&&!a&&u||r&&u)return 1;if(t<e&&!n||!u||o&&!r&&i||a&&i)return-1}return 0}function To(t,e,n){for(var r=t.length,i=n?r:-1;n?i--:++i<r;)if(e(t[i],i,t))return i;return-1}function Oo(t,e,n){if(e!=e)return Vo(t,n);for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function Do(t){return"function"==typeof t||!1}function Ro(t){return null==t?"":t+""}function Io(t,e){for(var n=-1,r=t.length;++n<r&&-1<e.indexOf(t.charAt(n)););return n}function No(t,e){for(var n=t.length;n--&&-1<e.indexOf(t.charAt(n)););return n}function Uo(t,e){return Mo(t.criteria,e.criteria)||t.index-e.index}function Lo(t){return o[t]}function Fo(t){return a[t]}function zo(t,e,n){return e?t=c[t]:n&&(t=l[t]),"\\"+t}function Bo(t){return"\\"+l[t]}function Vo(t,e,n){for(var r=t.length,i=e+(n?0:-1);n?i--:++i<r;){var o=t[i];if(o!=o)return i}return-1}function Wo(t){return!!t&&"object"==typeof t}function m(t){return t<=160&&9<=t&&t<=13||32==t||160==t||5760==t||6158==t||8192<=t&&(t<=8202||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function Ho(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n<r;)t[n]===e&&(t[n]=Ti,o[++i]=n);return o}function Go(t){for(var e=-1,n=t.length;++e<n&&m(t.charCodeAt(e)););return e}function Qo(t){for(var e=t.length;e--&&m(t.charCodeAt(e)););return e}function Yo(t){return u[t]}var Xo=function t(e){var A=(e=e?Xo.defaults(Po.Object(),e,Xo.pick(Po,ko)):Po).Array,n=e.Date,r=e.Error,g=e.Function,i=e.Math,o=e.Number,m=e.Object,$=e.RegExp,a=e.String,y=e.TypeError,u=A.prototype,s=m.prototype,c=a.prototype,l=g.prototype.toString,w=s.hasOwnProperty,f=0,b=s.toString,d=Po._,p=$("^"+l.call(w).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),h=e.ArrayBuffer,_=e.clearTimeout,v=e.parseFloat,x=i.pow,E=s.propertyIsEnumerable,S=De(e,"Set"),C=e.setTimeout,k=u.splice,q=e.Uint8Array,j=De(e,"WeakMap"),P=i.ceil,M=De(m,"create"),T=i.floor,O=De(A,"isArray"),D=e.isFinite,R=De(m,"keys"),I=i.max,N=i.min,U=De(n,"now"),L=e.parseInt,F=i.random,z=o.NEGATIVE_INFINITY,B=o.POSITIVE_INFINITY,V=4294967295,W=V-1,H=V>>>1,G=9007199254740991,Q=j&&new j,Y={};function X(t){if(Wo(t)&&!lr(t)&&!(t instanceof Z)){if(t instanceof K)return t;if(w.call(t,"__chain__")&&w.call(t,"__wrapped__"))return Ze(t)}return new K(t)}function J(){}function K(t,e,n){this.__wrapped__=t,this.__actions__=n||[],this.__chain__=!!e}X.support={};function Z(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=B,this.__views__=[]}function tt(){this.__data__={}}function et(t){var e=t?t.length:0;for(this.data={hash:M(null),set:new S};e--;)this.push(t[e])}function nt(t,e){var n=t.data;return("string"==typeof e||hr(e)?n.set.has(e):n.hash[e])?0:-1}function rt(t,e){var n=-1,r=t.length;for(e||(e=A(r));++n<r;)e[n]=t[n];return e}function it(t,e){for(var n=-1,r=t.length;++n<r&&!1!==e(t[n],n,t););return t}function ot(t,e){for(var n=-1,r=t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function at(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[++i]=a)}return o}function ut(t,e){for(var n=-1,r=t.length,i=A(r);++n<r;)i[n]=e(t[n],n,t);return i}function st(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function ct(t,e,n,r){var i=-1,o=t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function lt(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function ft(t,e,n,r){return t!==hi&&w.call(r,n)?t:e}function dt(t,e,n){for(var r=-1,i=Dr(e),o=i.length;++r<o;){var a=i[r],u=t[a],s=n(u,e[a],a,t,e);(s==s?s===u:u!=u)&&(u!==hi||a in t)||(t[a]=s)}return t}function pt(t,e){return null==e?t:vt(e,Dr(e),t)}function ht(t,e){for(var n=-1,r=null==t,i=!r&&Ie(t),o=i?t.length:0,a=e.length,u=A(a);++n<a;){var s=e[n];u[n]=i?Ne(s,o)?t[s]:hi:r?hi:t[s]}return u}function vt(t,e,n){n||(n={});for(var r=-1,i=e.length;++r<i;){var o=e[r];n[o]=t[o]}return n}function gt(t,e,n){var r=typeof t;return"function"==r?e===hi?t:Zt(t,e,n):null==t?ei:"object"==r?It(t):e===hi?ui(t):Nt(t,e)}function mt(n,r,i,t,e,o,a){var u;if(i&&(u=e?i(n,t,e):i(n)),u!==hi)return u;if(!hr(n))return n;var s,c,l,f,d=lr(n);if(d){if(l=(c=n).length,f=new c.constructor(l),l&&"string"==typeof c[0]&&w.call(c,"index")&&(f.index=c.index,f.input=c.input),u=f,!r)return rt(n,u)}else{var p=b.call(n),h=p==Ui;if(p!=Fi&&p!=Oi&&(!h||e))return jo[p]?function(t,e,n){var r=t.constructor;switch(e){case Vi:return te(t);case Ri:case Ii:return new r(+t);case Wi:case Hi:case Gi:case Qi:case Yi:case Xi:case Ji:case Ki:case Zi:var i=t.buffer;return new r(n?te(i):i,t.byteOffset,t.length);case Li:case Bi:return new r(t);case zi:var o=new r(t.source,yo.exec(t));o.lastIndex=t.lastIndex}return o}(n,p,r):e?n:{};if("function"==typeof(s=(h?{}:n).constructor)&&s instanceof s||(s=m),u=new s,!r)return pt(u,n)}o||(o=[]),a||(a=[]);for(var v=o.length;v--;)if(o[v]==n)return a[v];return o.push(n),a.push(u),(d?it:jt)(n,function(t,e){u[e]=mt(t,r,i,e,n,o,a)}),u}X.templateSettings={escape:uo,evaluate:so,interpolate:co,variable:"",imports:{_:X}};var $t=function(){function n(){}return function(t){if(hr(t)){n.prototype=t;var e=new n;n.prototype=hi}return e||{}}}();function yt(t,e,n){if("function"!=typeof t)throw new y(Mi);return C(function(){t.apply(hi,n)},e)}function wt(t,e){var n=t?t.length:0,r=[];if(!n)return r;var i=-1,o=Me(),a=o==Oo,u=a&&e.length>=Ai?ue(e):null,s=e.length;u&&(o=nt,a=!1,e=u);t:for(;++i<n;){var c=t[i];if(a&&c==c){for(var l=s;l--;)if(e[l]===c)continue t;r.push(c)}else o(e,c,0)<0&&r.push(c)}return r}var bt=oe(jt),_t=oe(Pt,!0);function xt(t,r){var i=!0;return bt(t,function(t,e,n){return i=!!r(t,e,n)}),i}function Et(t,r){var i=[];return bt(t,function(t,e,n){r(t,e,n)&&i.push(t)}),i}function St(t,r,e,i){var o;return e(t,function(t,e,n){if(r(t,e,n))return o=i?e:t,!1}),o}function Ct(t,e,n,r){r||(r=[]);for(var i=-1,o=t.length;++i<o;){var a=t[i];Wo(a)&&Ie(a)&&(n||lr(a)||cr(a))?e?Ct(a,e,n,r):st(r,a):n||(r[r.length]=a)}return r}var kt=ae(),qt=ae(!0);function At(t,e){return kt(t,e,Rr)}function jt(t,e){return kt(t,e,Dr)}function Pt(t,e){return qt(t,e,Dr)}function Mt(t,e){for(var n=-1,r=e.length,i=-1,o=[];++n<r;){var a=e[n];pr(t[a])&&(o[++i]=a)}return o}function Tt(t,e,n){if(null!=t){n!==hi&&n in Je(t)&&(e=[n]);for(var r=0,i=e.length;null!=t&&r<i;)t=t[e[r++]];return r&&r==i?t:hi}}function Ot(t,e,n,r,i,o){return t===e||(null==t||null==e||!hr(t)&&!Wo(e)?t!=t&&e!=e:function(t,e,n,r,i,o,a){var u=lr(t),s=lr(e),c=Di,l=Di;u||((c=b.call(t))==Oi?c=Fi:c!=Fi&&(u=wr(t))),s||((l=b.call(e))==Oi?l=Fi:l!=Fi&&(s=wr(e)));var f=c==Fi,d=l==Fi,p=c==l;if(p&&!u&&!f)return function(t,e,n){switch(n){case Ri:case Ii:return+t==+e;case Ni:return t.name==e.name&&t.message==e.message;case Li:return t!=+t?e!=+e:t==+e;case zi:case Bi:return t==e+""}return!1}(t,e,c);if(!i){var h=f&&w.call(t,"__wrapped__"),v=d&&w.call(e,"__wrapped__");if(h||v)return n(h?t.value():t,v?e.value():e,r,i,o,a)}if(!p)return!1;o||(o=[]),a||(a=[]);for(var g=o.length;g--;)if(o[g]==t)return a[g]==e;o.push(t),a.push(e);var m=(u?function(t,e,n,r,i,o,a){var u=-1,s=t.length,c=e.length;if(s!=c&&!(i&&s<c))return!1;for(;++u<s;){var l=t[u],f=e[u],d=r?r(i?f:l,i?l:f,u):hi;if(d!==hi){if(d)continue;return!1}if(i){if(!lt(e,function(t){return l===t||n(l,t,r,i,o,a)}))return!1}else if(l!==f&&!n(l,f,r,i,o,a))return!1}return!0}:function(t,e,n,r,i,o,a){var u=Dr(t),s=u.length,c=Dr(e).length;if(s!=c&&!i)return!1;for(var l=s;l--;){var f=u[l];if(!(i?f in e:w.call(e,f)))return!1}for(var d=i;++l<s;){f=u[l];var p=t[f],h=e[f],v=r?r(i?h:p,i?p:h,f):hi;if(!(v===hi?n(p,h,r,i,o,a):v))return!1;d||(d="constructor"==f)}if(!d){var g=t.constructor,m=e.constructor;if(g!=m&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof m&&m instanceof m))return!1}return!0})(t,e,n,r,i,o,a);return o.pop(),a.pop(),m}(t,e,Ot,n,r,i,o))}function Dt(t,e,n){var r=e.length,i=r,o=!n;if(null==t)return!i;for(t=Je(t);r--;){var a=e[r];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++r<i;){var u=(a=e[r])[0],s=t[u],c=a[1];if(o&&a[2]){if(s===hi&&!(u in t))return!1}else{var l=n?n(s,c,u):hi;if(!(l===hi?Ot(c,s,n,!0):l))return!1}}return!0}function Rt(t,r){var i=-1,o=Ie(t)?A(t.length):[];return bt(t,function(t,e,n){o[++i]=r(t,e,n)}),o}function It(t){var e=Oe(t);if(1==e.length&&e[0][2]){var n=e[0][0],r=e[0][1];return function(t){return null!=t&&t[n]===r&&(r!==hi||n in Je(t))}}return function(t){return Dt(t,e)}}function Nt(n,r){var i=lr(n),o=Le(n)&&Be(r),a=n+"";return n=Ke(n),function(t){if(null==t)return!1;var e=a;if(t=Je(t),(i||!o)&&!(e in t)){if(null==(t=1==n.length?t:Tt(t,Bt(n,0,-1))))return!1;e=cn(n),t=Je(t)}return t[e]===r?r!==hi||e in t:Ot(r,t[e],hi,!0)}}function Ut(e){return function(t){return null==t?hi:t[e]}}function Lt(t,e){for(var n=t?e.length:0;n--;){var r=e[n];if(r!=i&&Ne(r)){var i=r;k.call(t,r,1)}}return t}function Ft(t,e){return t+T(F()*(e-t+1))}var zt=Q?function(t,e){return Q.set(t,e),t}:ei;function Bt(t,e,n){var r=-1,i=t.length;(e=null==e?0:+e||0)<0&&(e=i<-e?0:i+e),(n=n===hi||i<n?i:+n||0)<0&&(n+=i),i=n<e?0:n-e>>>0,e>>>=0;for(var o=A(i);++r<i;)o[r]=t[r+e];return o}function Vt(t,r){var i;return bt(t,function(t,e,n){return!(i=r(t,e,n))}),!!i}function Wt(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function Ht(t,n,r){var e=Ae(),i=-1;return n=ut(n,function(t){return e(t)}),Wt(Rt(t,function(e){return{criteria:ut(n,function(t){return t(e)}),index:++i,value:e}}),function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,u=n.length;++r<a;){var s=Mo(i[r],o[r]);if(s){if(u<=r)return s;var c=n[r];return s*("asc"===c||!0===c?1:-1)}}return t.index-e.index}(t,e,r)})}function Gt(t,e){var n=-1,r=Me(),i=t.length,o=r==Oo,a=o&&Ai<=i,u=a?ue():null,s=[];u?(r=nt,o=!1):(a=!1,u=e?[]:s);t:for(;++n<i;){var c=t[n],l=e?e(c,n,t):c;if(o&&c==c){for(var f=u.length;f--;)if(u[f]===l)continue t;e&&u.push(l),s.push(c)}else r(u,l,0)<0&&((e||a)&&u.push(l),s.push(c))}return s}function Qt(t,e){for(var n=-1,r=e.length,i=A(r);++n<r;)i[n]=t[e[n]];return i}function Yt(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?Bt(t,r?0:o,r?o+1:i):Bt(t,r?o+1:0,r?i:o)}function Xt(t,e){var n=t;n instanceof Z&&(n=n.value());for(var r=-1,i=e.length;++r<i;){var o=e[r];n=o.func.apply(o.thisArg,st([n],o.args))}return n}function Jt(t,e,n){var r=0,i=t?t.length:r;if("number"==typeof e&&e==e&&i<=H){for(;r<i;){var o=r+i>>>1,a=t[o];(n?a<=e:a<e)&&null!==a?r=o+1:i=o}return i}return Kt(t,e,ei,n)}function Kt(t,e,n,r){e=n(e);for(var i=0,o=t?t.length:0,a=e!=e,u=null===e,s=e===hi;i<o;){var c=T((i+o)/2),l=n(t[c]),f=l!==hi,d=l==l;if(a)var p=d||r;else p=u?d&&f&&(r||null!=l):s?d&&(r||f):null!=l&&(r?l<=e:l<e);p?i=c+1:o=c}return N(o,W)}function Zt(o,a,t){if("function"!=typeof o)return ei;if(a===hi)return o;switch(t){case 1:return function(t){return o.call(a,t)};case 3:return function(t,e,n){return o.call(a,t,e,n)};case 4:return function(t,e,n,r){return o.call(a,t,e,n,r)};case 5:return function(t,e,n,r,i){return o.call(a,t,e,n,r,i)}}return function(){return o.apply(a,arguments)}}function te(t){var e=new h(t.byteLength);return new q(e).set(new q(t)),e}function ee(t,e,n){for(var r=n.length,i=-1,o=I(t.length-r,0),a=-1,u=e.length,s=A(u+o);++a<u;)s[a]=e[a];for(;++i<r;)s[n[i]]=t[i];for(;o--;)s[a++]=t[i++];return s}function ne(t,e,n){for(var r=-1,i=n.length,o=-1,a=I(t.length-i,0),u=-1,s=e.length,c=A(a+s);++o<a;)c[o]=t[o];for(var l=o;++u<s;)c[l+u]=e[u];for(;++r<i;)c[l+n[r]]=t[o++];return c}function re(u,s){return function(t,r,e){var i=s?s():{};if(r=Ae(r,e,3),lr(t))for(var n=-1,o=t.length;++n<o;){var a=t[n];u(i,a,r(a,n,t),t)}else bt(t,function(t,e,n){u(i,t,r(t,e,n),n)});return i}}function ie(s){return ur(function(t,e){var n=-1,r=null==t?0:e.length,i=2<r?e[r-2]:hi,o=2<r?e[2]:hi,a=1<r?e[r-1]:hi;for("function"==typeof i?(i=Zt(i,a,5),r-=2):r-=(i="function"==typeof a?a:hi)?1:0,o&&Ue(e[0],e[1],o)&&(i=r<3?hi:i,r=1);++n<r;){var u=e[n];u&&s(t,u,i)}return t})}function oe(o,a){return function(t,e){var n=t?Te(t):0;if(!ze(n))return o(t,e);for(var r=a?n:-1,i=Je(t);(a?r--:++r<n)&&!1!==e(i[r],r,i););return t}}function ae(s){return function(t,e,n){for(var r=Je(t),i=n(t),o=i.length,a=s?o:-1;s?a--:++a<o;){var u=i[a];if(!1===e(r[u],u,r))break}return t}}function ue(t){return M&&S?new et(t):null}function se(o){return function(t){for(var e=-1,n=Kr(Vr(t)),r=n.length,i="";++e<r;)i=o(i,n[e],e);return i}}function ce(r){return function(){var t=arguments;switch(t.length){case 0:return new r;case 1:return new r(t[0]);case 2:return new r(t[0],t[1]);case 3:return new r(t[0],t[1],t[2]);case 4:return new r(t[0],t[1],t[2],t[3]);case 5:return new r(t[0],t[1],t[2],t[3],t[4]);case 6:return new r(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new r(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var e=$t(r.prototype),n=r.apply(e,t);return hr(n)?n:e}}function le(o){return function t(e,n,r){r&&Ue(e,n,r)&&(n=hi);var i=qe(e,o,hi,hi,hi,hi,hi,n);return i.placeholder=t.placeholder,i}}function fe(n,r){return ur(function(t){var e=t[0];return null==e?e:(t.push(r),n.apply(hi,t))})}function de(c,l){return function(t,e,n){if(n&&Ue(t,e,n)&&(e=hi),1==(e=Ae(e,n,3)).length){var r=function(t,e,n,r){for(var i=-1,o=t.length,a=r,u=a;++i<o;){var s=t[i],c=+e(s);n(c,a)&&(a=c,u=s)}return u}(t=lr(t)?t:Xe(t),e,c,l);if(!t.length||r!==l)return r}return i=e,o=c,s=u=a=l,bt(t,function(t,e,n){var r=+i(t,e,n);(o(r,u)||r===a&&r===s)&&(u=r,s=t)}),s;var i,o,a,u,s}}function pe(i,o){return function(t,e,n){if(e=Ae(e,n,3),lr(t)){var r=To(t,e,o);return-1<r?t[r]:hi}return St(t,e,i)}}function he(r){return function(t,e,n){return t&&t.length?To(t,e=Ae(e,n,3),r):-1}}function ve(r){return function(t,e,n){return St(t,e=Ae(e,n,3),r,!0)}}function ge(s){return function(){for(var i,o=arguments.length,t=s?o:-1,e=0,a=A(o);s?t--:++t<o;){var n=a[e++]=arguments[t];if("function"!=typeof n)throw new y(Mi);!i&&K.prototype.thru&&"wrapper"==Pe(n)&&(i=new K([],!0))}for(t=i?-1:o;++t<o;){var r=Pe(n=a[t]),u="wrapper"==r?je(n):hi;i=u&&Fe(u[0])&&u[1]==(xi|yi|bi|Ei)&&!u[4].length&&1==u[9]?i[Pe(u[0])].apply(i,u[3]):1==n.length&&Fe(n)?i[r]():i.thru(n)}return function(){var t=arguments,e=t[0];if(i&&1==t.length&&lr(e)&&e.length>=Ai)return i.plant(e).value();for(var n=0,r=o?a[n].apply(this,t):e;++n<o;)r=a[n].call(this,r);return r}}}function me(r,i){return function(t,e,n){return"function"==typeof e&&n===hi&&lr(t)?r(t,e):i(t,Zt(e,n,3))}}function $e(r){return function(t,e,n){return"function"==typeof e&&n===hi||(e=Zt(e,n,3)),r(t,e,Rr)}}function ye(r){return function(t,e,n){return"function"==typeof e&&n===hi||(e=Zt(e,n,3)),r(t,e)}}function we(a){return function(t,i,e){var o={};return i=Ae(i,e,3),jt(t,function(t,e,n){var r=i(t,e,n);t=a?t:r,o[e=a?r:e]=t}),o}}function be(r){return function(t,e,n){return t=Ro(t),(r?t:"")+Se(t,e,n)+(r?"":t)}}function _e(r){var i=ur(function(t,e){var n=Ho(e,i.placeholder);return qe(t,r,hi,e,n)});return i}function xe(c,l){return function(t,e,n,r){var i,o,a,u,s=arguments.length<3;return"function"==typeof e&&r===hi&&lr(t)?c(t,e,n,s):(i=t,o=Ae(e,r,4),a=n,u=s,l(i,function(t,e,n){a=u?(u=!1,t):o(a,t,e,n)}),a)}}function Ee(d,p,h,v,g,m,$,y,w,b){var _=p&xi,x=p&gi,E=p&mi,S=p&yi,C=p&$i,k=p&wi,q=E?hi:ce(d);return function t(){for(var e=arguments.length,n=e,r=A(e);n--;)r[n]=arguments[n];if(v&&(r=ee(r,v,g)),m&&(r=ne(r,m,$)),S||k){var i=t.placeholder,o=Ho(r,i);if((e-=o.length)<b){var a=y?rt(y):hi,u=I(b-e,0);p|=S?bi:_i,p&=~(S?_i:bi),C||(p&=~(gi|mi));var s=[d,p,h,S?r:hi,S?o:hi,S?hi:r,S?hi:o,a,w,u],c=Ee.apply(hi,s);return Fe(d)&&Qe(c,s),c.placeholder=i,c}}var l=x?h:this,f=E?l[d]:d;return y&&(r=function(t,e){for(var n=t.length,r=N(e.length,n),i=rt(t);r--;){var o=e[r];t[r]=Ne(o,n)?i[o]:hi}return t}(r,y)),_&&w<r.length&&(r.length=w),this&&this!==Po&&this instanceof t&&(f=q||ce(d)),f.apply(l,r)}}function Se(t,e,n){var r=t.length;if((e=+e)<=r||!D(e))return"";var i=e-r;return Qr(n=null==n?" ":n+"",P(i/n.length)).slice(0,i)}function Ce(t){var n=i[t];return function(t,e){return(e=e===hi?0:+e||0)?(e=x(10,e),n(t*e)/e):n(t)}}function ke(o){return function(t,e,n,r){var i=Ae(n);return null==n&&i===gt?Jt(t,e,o):Kt(t,e,i(n,r,1),o)}}function qe(t,e,n,r,i,o,a,u){var s=e&mi;if(!s&&"function"!=typeof t)throw new y(Mi);var c=r?r.length:0;if(c||(e&=~(bi|_i),r=i=hi),c-=i?i.length:0,e&_i){var l=r,f=i;r=i=hi}var d,p,h,v=s?hi:je(t),g=[t,e,n,r,i,l,f,o,a,u];if(v&&(function(t,e){var n=t[1],r=e[1],i=n|r,o=i<xi,a=r==xi&&n==yi||r==xi&&n==Ei&&t[7].length<=e[8]||r==(xi|Ei)&&n==yi;if(o||a){r&gi&&(t[2]=e[2],i|=n&gi?0:$i);var u=e[3];if(u){var s=t[3];t[3]=s?ee(s,u,e[4]):rt(u),t[4]=s?Ho(t[3],Ti):rt(e[4])}(u=e[5])&&(s=t[5],t[5]=s?ne(s,u,e[6]):rt(u),t[6]=s?Ho(t[5],Ti):rt(e[6])),(u=e[7])&&(t[7]=rt(u)),r&xi&&(t[8]=null==t[8]?e[8]:N(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}}(g,v),e=g[1],u=g[9]),g[9]=null==u?s?0:t.length:I(u-c,0)||0,e==gi)var m=(d=g[0],p=g[2],h=ce(d),function t(){return(this&&this!==Po&&this instanceof t?h:d).apply(p,arguments)});else m=e!=bi&&e!=(gi|bi)||g[4].length?Ee.apply(hi,g):function(a,t,u,s){var c=t&gi,l=ce(a);return function t(){for(var e=-1,n=arguments.length,r=-1,i=s.length,o=A(i+n);++r<i;)o[r]=s[r];for(;n--;)o[r++]=arguments[++e];return(this&&this!==Po&&this instanceof t?l:a).apply(c?u:this,o)}}.apply(hi,g);return(v?zt:Qe)(m,g)}function Ae(t,e,n){var r=X.callback||ti;return r=r===ti?gt:r,n?r(t,e,n):r}var je=Q?function(t){return Q.get(t)}:ai;function Pe(t){for(var e=t.name,n=Y[e],r=n?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function Me(t,e,n){var r=X.indexOf||un;return r=r===un?Oo:r,t?r(t,e,n):r}var Te=Ut("length");function Oe(t){for(var e=Lr(t),n=e.length;n--;)e[n][2]=Be(e[n][1]);return e}function De(t,e){var n=null==t?hi:t[e];return vr(n)?n:hi}function Re(t,e,n){null==t||Le(e,t)||(t=1==(e=Ke(e)).length?t:Tt(t,Bt(e,0,-1)),e=cn(e));var r=null==t?t:t[e];return null==r?hi:r.apply(t,n)}function Ie(t){return null!=t&&ze(Te(t))}function Ne(t,e){return t="number"==typeof t||_o.test(t)?+t:-1,e=null==e?G:e,-1<t&&t%1==0&&t<e}function Ue(t,e,n){if(!hr(n))return!1;var r=typeof e;if("number"==r?Ie(n)&&Ne(e,n.length):"string"==r&&e in n){var i=n[e];return t==t?t===i:i!=i}return!1}function Le(t,e){var n=typeof t;return!!("string"==n&&fo.test(t)||"number"==n)||!lr(t)&&(!lo.test(t)||null!=e&&t in Je(e))}function Fe(t){var e=Pe(t);if(!(e in Z.prototype))return!1;var n=X[e];if(t===n)return!0;var r=je(n);return!!r&&t===r[0]}function ze(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=G}function Be(t){return t==t&&!hr(t)}function Ve(t,e){t=Je(t);for(var n=-1,r=e.length,i={};++n<r;){var o=e[n];o in t&&(i[o]=t[o])}return i}function We(t,r){var i={};return At(t,function(t,e,n){r(t,e,n)&&(i[e]=t)}),i}var He,Ge,Qe=(Ge=He=0,function(t,e){var n=Vn(),r=qi-(n-Ge);if(Ge=n,0<r){if(++He>=ki)return t}else He=0;return zt(t,e)});function Ye(t){for(var e=Rr(t),n=e.length,r=n&&t.length,i=!!r&&ze(r)&&(lr(t)||cr(t)),o=-1,a=[];++o<n;){var u=e[o];(i&&Ne(u,r)||w.call(t,u))&&a.push(u)}return a}function Xe(t){return null==t?[]:Ie(t)?hr(t)?t:m(t):zr(t)}function Je(t){return hr(t)?t:m(t)}function Ke(t){if(lr(t))return t;var i=[];return Ro(t).replace(po,function(t,e,n,r){i.push(n?r.replace(mo,"$1"):e||t)}),i}function Ze(t){return t instanceof Z?t.clone():new K(t.__wrapped__,t.__chain__,rt(t.__actions__))}var tn=ur(function(t,e){return Wo(t)&&Ie(t)?wt(t,Ct(e,!1,!0)):[]});function en(t,e,n){return t&&t.length?((n?Ue(t,e,n):null==e)&&(e=1),Bt(t,e<0?0:e)):[]}function nn(t,e,n){var r=t?t.length:0;return r?((n?Ue(t,e,n):null==e)&&(e=1),Bt(t,0,(e=r-(+e||0))<0?0:e)):[]}var rn=he(),on=he(!0);function an(t){return t?t[0]:hi}function un(t,e,n){var r=t?t.length:0;if(!r)return-1;if("number"==typeof n)n=n<0?I(r+n,0):n;else if(n){var i=Jt(t,e);return i<r&&(e==e?e===t[i]:t[i]!=t[i])?i:-1}return Oo(t,e,n||0)}var sn=ur(function(t){for(var e=t.length,n=e,r=A(l),i=Me(),o=i==Oo,a=[];n--;){var u=t[n]=Ie(u=t[n])?u:[];r[n]=o&&120<=u.length?ue(n&&u):null}var s=t[0],c=-1,l=s?s.length:0,f=r[0];t:for(;++c<l;)if(u=s[c],(f?nt(f,u):i(a,u,0))<0){for(n=e;--n;){var d=r[n];if((d?nt(d,u):i(t[n],u,0))<0)continue t}f&&f.push(u),a.push(u)}return a});function cn(t){var e=t?t.length:0;return e?t[e-1]:hi}var ln=ur(function(t,e){var n=ht(t,e=Ct(e));return Lt(t,e.sort(Mo)),n});function fn(t){return en(t,1)}var dn=ke(),pn=ke(!0);var hn=ur(function(t){return Gt(Ct(t,!1,!0))});function vn(t,e,n,r){if(!t||!t.length)return[];null!=e&&"boolean"!=typeof e&&(n=Ue(t,e,r=n)?hi:e,e=!1);var i=Ae();return null==n&&i===gt||(n=i(n,r,3)),e&&Me()==Oo?function(t,e){for(var n,r=-1,i=t.length,o=-1,a=[];++r<i;){var u=t[r],s=e?e(u,r,t):u;r&&n===s||(n=s,a[++o]=u)}return a}(t,n):Gt(t,n)}function gn(t){if(!t||!t.length)return[];var e=-1,n=0;t=at(t,function(t){if(Ie(t))return n=I(t.length,n),!0});for(var r=A(n);++e<n;)r[e]=ut(t,Ut(e));return r}function mn(t,e,n){if(!t||!t.length)return[];var r=gn(t);return null==e?r:(e=Zt(e,n,4),ut(r,function(t){return ct(t,e,hi,!0)}))}var $n=ur(function(t,e){return Ie(t)?wt(t,e):[]});var yn=ur(gn);function wn(t,e){var n=-1,r=t?t.length:0,i={};for(!r||e||lr(t[0])||(e=[]);++n<r;){var o=t[n];e?i[o]=e[n]:o&&(i[o[0]]=o[1])}return i}var bn=ur(function(t){var e=t.length,n=2<e?t[e-2]:hi,r=1<e?t[e-1]:hi;return 2<e&&"function"==typeof n?e-=2:(n=1<e&&"function"==typeof r?(--e,r):hi,r=hi),t.length=e,mn(t,n,r)});function _n(t){var e=X(t);return e.__chain__=!0,e}function xn(t,e,n){return e.call(n,t)}var En=ur(function(e){return e=Ct(e),this.thru(function(t){return function(t,e){for(var n=-1,r=t.length,i=-1,o=e.length,a=A(r+o);++n<r;)a[n]=t[n];for(;++i<o;)a[n++]=e[i];return a}(lr(t)?t:[Je(t)],e)})});var Sn=ur(function(t,e){return ht(t,Ct(e))}),Cn=re(function(t,e,n){w.call(t,n)?++t[n]:t[n]=1});function kn(t,e,n){var r=lr(t)?ot:xt;return n&&Ue(t,e,n)&&(e=hi),"function"==typeof e&&n===hi||(e=Ae(e,n,3)),r(t,e)}function qn(t,e,n){return(lr(t)?at:Et)(t,e=Ae(e,n,3))}var An=pe(bt),jn=pe(_t,!0);var Pn=me(it,bt),Mn=me(function(t,e){for(var n=t.length;n--&&!1!==e(t[n],n,t););return t},_t),Tn=re(function(t,e,n){w.call(t,n)?t[n].push(e):t[n]=[e]});function On(t,e,n,r){var i=t?Te(t):0;return ze(i)||(i=(t=zr(t)).length),n="number"!=typeof n||r&&Ue(e,n,r)?0:n<0?I(i+n,0):n||0,"string"==typeof t||!lr(t)&&yr(t)?n<=i&&-1<t.indexOf(e,n):!!i&&-1<Me(t,e,n)}var Dn=re(function(t,e,n){t[n]=e}),Rn=ur(function(t,n,r){var i=-1,o="function"==typeof n,a=Le(n),u=Ie(t)?A(t.length):[];return bt(t,function(t){var e=o?n:a&&null!=t?t[n]:hi;u[++i]=e?e.apply(t,r):Re(t,n,r)}),u});function In(t,e,n){return(lr(t)?ut:Rt)(t,e=Ae(e,n,3))}var Nn=re(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});var Un=xe(ct,bt),Ln=xe(function(t,e,n,r){var i=t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n},_t);function Fn(t,e,n){if(n?Ue(t,e,n):null==e)return 0<(r=(t=Xe(t)).length)?t[Ft(0,r-1)]:hi;var r,i=-1,o=_r(t),a=(r=o.length)-1;for(e=N(e<0?0:+e||0,r);++i<e;){var u=Ft(i,a),s=o[u];o[u]=o[i],o[i]=s}return o.length=e,o}function zn(t,e,n){var r=lr(t)?lt:Vt;return n&&Ue(t,e,n)&&(e=hi),"function"==typeof e&&n===hi||(e=Ae(e,n,3)),r(t,e)}var Bn=ur(function(t,e){if(null==t)return[];var n=e[2];return n&&Ue(e[0],e[1],n)&&(e.length=1),Ht(t,Ct(e),[])});var Vn=U||function(){return(new n).getTime()};function Wn(t,e){var n;if("function"!=typeof e){if("function"!=typeof t)throw new y(Mi);var r=t;t=e,e=r}return function(){return 0<--t&&(n=e.apply(this,arguments)),t<=1&&(e=hi),n}}var Hn=ur(function(t,e,n){var r=gi;if(n.length){var i=Ho(n,Hn.placeholder);r|=bi}return qe(t,r,e,n,i)}),Gn=ur(function(t,e){for(var n=-1,r=(e=e.length?Ct(e):Or(t)).length;++n<r;){var i=e[n];t[i]=qe(t[i],gi,t)}return t}),Qn=ur(function(t,e,n){var r=gi|mi;if(n.length){var i=Ho(n,Qn.placeholder);r|=bi}return qe(e,r,t,n,i)}),Yn=le(yi),Xn=le(wi);function Jn(r,i,t){var o,a,u,s,c,l,f,d=0,p=!1,h=!0;if("function"!=typeof r)throw new y(Mi);if(i=i<0?0:+i||0,!0===t){var v=!0;h=!1}else hr(t)&&(v=!!t.leading,p="maxWait"in t&&I(+t.maxWait||0,i),h="trailing"in t?!!t.trailing:h);function e(t,e){e&&_(e),a=l=f=hi,t&&(d=Vn(),u=r.apply(c,o),l||a||(o=c=hi))}function g(){var t=i-(Vn()-s);t<=0||i<t?e(f,a):l=C(g,t)}function m(){e(h,l)}function n(){if(o=arguments,s=Vn(),c=this,f=h&&(l||!v),!1===p)var t=v&&!l;else{a||v||(d=s);var e=p-(s-d),n=e<=0||p<e;n?(a&&(a=_(a)),d=s,u=r.apply(c,o)):a||(a=C(m,e))}return n&&l?l=_(l):l||i===p||(l=C(g,i)),t&&(n=!0,u=r.apply(c,o)),!n||l||a||(o=c=hi),u}return n.cancel=function(){l&&_(l),a&&_(a),d=0,a=l=f=hi},n}var Kn=ur(function(t,e){return yt(t,1,e)}),Zn=ur(function(t,e,n){return yt(t,e,n)}),tr=ge(),er=ge(!0);function nr(i,o){if("function"!=typeof i||o&&"function"!=typeof o)throw new y(Mi);var a=function(){var t=arguments,e=o?o.apply(this,t):t[0],n=a.cache;if(n.has(e))return n.get(e);var r=i.apply(this,t);return a.cache=n.set(e,r),r};return a.cache=new nr.Cache,a}var rr=ur(function(n,r){if(r=Ct(r),"function"!=typeof n||!ot(r,Do))throw new y(Mi);var i=r.length;return ur(function(t){for(var e=N(t.length,i);e--;)t[e]=r[e](t[e]);return n.apply(this,t)})});var ir=_e(bi),or=_e(_i),ar=ur(function(t,e){return qe(t,Ei,hi,hi,hi,Ct(e))});function ur(o,a){if("function"!=typeof o)throw new y(Mi);return a=I(a===hi?o.length-1:+a||0,0),function(){for(var t=arguments,e=-1,n=I(t.length-a,0),r=A(n);++e<n;)r[e]=t[a+e];switch(a){case 0:return o.call(this,r);case 1:return o.call(this,t[0],r);case 2:return o.call(this,t[0],t[1],r)}var i=A(a+1);for(e=-1;++e<a;)i[e]=t[e];return i[a]=r,o.apply(this,i)}}function sr(t,e){return e<t}function cr(t){return Wo(t)&&Ie(t)&&w.call(t,"callee")&&!E.call(t,"callee")}var lr=O||function(t){return Wo(t)&&ze(t.length)&&b.call(t)==Di};function fr(t,e,n,r){var i=(n="function"==typeof n?Zt(n,r,3):hi)?n(t,e):hi;return i===hi?Ot(t,e,n):!!i}function dr(t){return Wo(t)&&"string"==typeof t.message&&b.call(t)==Ni}function pr(t){return hr(t)&&b.call(t)==Ui}function hr(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function vr(t){return null!=t&&(pr(t)?p.test(l.call(t)):Wo(t)&&bo.test(t))}function gr(t){return"number"==typeof t||Wo(t)&&b.call(t)==Li}function mr(t){var e,n;return!(!Wo(t)||b.call(t)!=Fi||cr(t)||!(w.call(t,"constructor")||"function"!=typeof(e=t.constructor)||e instanceof e))&&(At(t,function(t,e){n=e}),n===hi||w.call(t,n))}function $r(t){return hr(t)&&b.call(t)==zi}function yr(t){return"string"==typeof t||Wo(t)&&b.call(t)==Bi}function wr(t){return Wo(t)&&ze(t.length)&&!!Ao[b.call(t)]}function br(t,e){return t<e}function _r(t){var e=t?Te(t):0;return ze(e)?e?rt(t):[]:zr(t)}function xr(t){return vt(t,Rr(t))}var Er=ie(function o(a,u,s,c,l){if(!hr(a))return a;var f=Ie(u)&&(lr(u)||wr(u)),d=f?hi:Dr(u);return it(d||u,function(t,e){if(d&&(t=u[e=t]),Wo(t))c||(c=[]),l||(l=[]),function(t,e,n,r,i,o,a){for(var u=o.length,s=e[n];u--;)if(o[u]==s)return t[n]=a[u];var c=t[n],l=i?i(c,s,n,t,e):hi,f=l===hi;f&&(Ie(l=s)&&(lr(s)||wr(s))?l=lr(c)?c:Ie(c)?rt(c):[]:mr(s)||cr(s)?l=cr(c)?xr(c):mr(c)?c:{}:f=!1),o.push(s),a.push(l),f?t[n]=r(l,s,i,o,a):(l==l?l!==c:c==c)&&(t[n]=l)}(a,u,e,o,s,c,l);else{var n=a[e],r=s?s(n,t,e,a,u):hi,i=r===hi;i&&(r=t),r===hi&&(!f||e in a)||!i&&(r==r?r===n:n!=n)||(a[e]=r)}}),a}),Sr=ie(function(t,e,n){return n?dt(t,e,n):pt(t,e)});var Cr=fe(Sr,function(t,e){return t===hi?e:t}),kr=fe(Er,function t(e,n){return e===hi?n:Er(e,n,t)}),qr=ve(jt),Ar=ve(Pt),jr=$e(kt),Pr=$e(qt),Mr=ye(jt),Tr=ye(Pt);function Or(t){return Mt(t,Rr(t))}var Dr=R?function(t){var e=null==t?hi:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&Ie(t)?Ye(t):hr(t)?R(t):[]}:Ye;function Rr(t){if(null==t)return[];hr(t)||(t=m(t));var e=t.length;e=e&&ze(e)&&(lr(t)||cr(t))&&e||0;for(var n=t.constructor,r=-1,i="function"==typeof n&&n.prototype===t,o=A(e),a=0<e;++r<e;)o[r]=r+"";for(var u in t)a&&Ne(u,e)||"constructor"==u&&(i||!w.call(t,u))||o.push(u);return o}var Ir=we(!0),Nr=we(),Ur=ur(function(t,e){if(null==t)return{};if("function"!=typeof e[0])return e=ut(Ct(e),a),Ve(t,wt(Rr(t),e));var r=Zt(e[0],e[1],3);return We(t,function(t,e,n){return!r(t,e,n)})});function Lr(t){t=Je(t);for(var e=-1,n=Dr(t),r=n.length,i=A(r);++e<r;){var o=n[e];i[e]=[o,t[o]]}return i}var Fr=ur(function(t,e){return null==t?{}:"function"==typeof e[0]?We(t,Zt(e[0],e[1],3)):Ve(t,Ct(e))});function zr(t){return Qt(t,Dr(t))}var Br=se(function(t,e,n){return e=e.toLowerCase(),t+(n?e.charAt(0).toUpperCase()+e.slice(1):e)});function Vr(t){return(t=Ro(t))&&t.replace(xo,Lo).replace(go,"")}var Wr=se(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()});var Hr=be(),Gr=be(!0);function Qr(t,e){var n="";if(t=Ro(t),(e=+e)<1||!t||!D(e))return n;for(;e%2&&(n+=t),t+=t,e=T(e/2););return n}var Yr=se(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Xr=se(function(t,e,n){return t+(n?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))});function Jr(t,e,n){var r=t;return(t=Ro(t))?(n?Ue(r,e,n):null==e)?t.slice(Go(t),Qo(t)+1):(e+="",t.slice(Io(t,e),No(t,e)+1)):t}function Kr(t,e,n){return n&&Ue(t,e,n)&&(e=hi),(t=Ro(t)).match(e||Co)||[]}var Zr=ur(function(t,e){try{return t.apply(hi,e)}catch(t){return dr(t)?t:new r(t)}});function ti(t,e,n){return n&&Ue(t,e,n)&&(e=hi),Wo(t)?ni(t):gt(t,e)}function ei(t){return t}function ni(t){return It(mt(t,!0))}var ri=ur(function(e,n){return function(t){return Re(t,e,n)}}),ii=ur(function(e,n){return function(t){return Re(e,t,n)}});function oi(r,t,e){if(null==e){var n=hr(t),i=n?Dr(t):hi,o=i&&i.length?Mt(t,i):hi;(o?o.length:n)||(o=!1,e=t,t=r,r=this)}o||(o=Mt(t,Dr(t)));var a=!0,u=-1,s=pr(r),c=o.length;!1===e?a=!1:hr(e)&&"chain"in e&&(a=e.chain);for(;++u<c;){var l=o[u],f=t[l];r[l]=f,s&&(r.prototype[l]=function(n){return function(){var t=this.__chain__;if(a||t){var e=r(this.__wrapped__);return(e.__actions__=rt(this.__actions__)).push({func:n,args:arguments,thisArg:r}),e.__chain__=t,e}return n.apply(r,st([this.value()],arguments))}}(f))}return r}function ai(){}function ui(t){return Le(t)?Ut(t):(n=(e=t)+"",e=Ke(e),function(t){return Tt(t,e,n)});var e,n}var si,ci=Ce("ceil"),li=Ce("floor"),fi=de(sr,z),di=de(br,B),pi=Ce("round");return X.prototype=J.prototype,(K.prototype=$t(J.prototype)).constructor=K,(Z.prototype=$t(J.prototype)).constructor=Z,tt.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},tt.prototype.get=function(t){return"__proto__"==t?hi:this.__data__[t]},tt.prototype.has=function(t){return"__proto__"!=t&&w.call(this.__data__,t)},tt.prototype.set=function(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this},et.prototype.push=function(t){var e=this.data;"string"==typeof t||hr(t)?e.set.add(t):e.hash[t]=!0},nr.Cache=tt,X.after=function(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new y(Mi);var n=t;t=e,e=n}return t=D(t=+t)?t:0,function(){if(--t<1)return e.apply(this,arguments)}},X.ary=function(t,e,n){return n&&Ue(t,e,n)&&(e=hi),e=t&&null==e?t.length:I(+e||0,0),qe(t,xi,hi,hi,hi,hi,e)},X.assign=Sr,X.at=Sn,X.before=Wn,X.bind=Hn,X.bindAll=Gn,X.bindKey=Qn,X.callback=ti,X.chain=_n,X.chunk=function(t,e,n){e=(n?Ue(t,e,n):null==e)?1:I(T(e)||1,1);for(var r=0,i=t?t.length:0,o=-1,a=A(P(i/e));r<i;)a[++o]=Bt(t,r,r+=e);return a},X.compact=function(t){for(var e=-1,n=t?t.length:0,r=-1,i=[];++e<n;){var o=t[e];o&&(i[++r]=o)}return i},X.constant=function(t){return function(){return t}},X.countBy=Cn,X.create=function(t,e,n){var r=$t(t);return n&&Ue(t,e,n)&&(e=hi),e?pt(r,e):r},X.curry=Yn,X.curryRight=Xn,X.debounce=Jn,X.defaults=Cr,X.defaultsDeep=kr,X.defer=Kn,X.delay=Zn,X.difference=tn,X.drop=en,X.dropRight=nn,X.dropRightWhile=function(t,e,n){return t&&t.length?Yt(t,Ae(e,n,3),!0,!0):[]},X.dropWhile=function(t,e,n){return t&&t.length?Yt(t,Ae(e,n,3),!0):[]},X.fill=function(t,e,n,r){var i=t?t.length:0;return i?(n&&"number"!=typeof n&&Ue(t,e,n)&&(n=0,r=i),function(t,e,n,r){var i=t.length;for((n=null==n?0:+n||0)<0&&(n=i<-n?0:i+n),(r=r===hi||i<r?i:+r||0)<0&&(r+=i),i=r<n?0:r>>>0,n>>>=0;n<i;)t[n++]=e;return t}(t,e,n,r)):[]},X.filter=qn,X.flatten=function(t,e,n){var r=t?t.length:0;return n&&Ue(t,e,n)&&(e=!1),r?Ct(t,e):[]},X.flattenDeep=function(t){return t&&t.length?Ct(t,!0):[]},X.flow=tr,X.flowRight=er,X.forEach=Pn,X.forEachRight=Mn,X.forIn=jr,X.forInRight=Pr,X.forOwn=Mr,X.forOwnRight=Tr,X.functions=Or,X.groupBy=Tn,X.indexBy=Dn,X.initial=function(t){return nn(t,1)},X.intersection=sn,X.invert=function(t,e,n){n&&Ue(t,e,n)&&(e=hi);for(var r=-1,i=Dr(t),o=i.length,a={};++r<o;){var u=i[r],s=t[u];e?w.call(a,s)?a[s].push(u):a[s]=[u]:a[s]=u}return a},X.invoke=Rn,X.keys=Dr,X.keysIn=Rr,X.map=In,X.mapKeys=Ir,X.mapValues=Nr,X.matches=ni,X.matchesProperty=function(t,e){return Nt(t,mt(e,!0))},X.memoize=nr,X.merge=Er,X.method=ri,X.methodOf=ii,X.mixin=oi,X.modArgs=rr,X.negate=function(t){if("function"!=typeof t)throw new y(Mi);return function(){return!t.apply(this,arguments)}},X.omit=Ur,X.once=function(t){return Wn(2,t)},X.pairs=Lr,X.partial=ir,X.partialRight=or,X.partition=Nn,X.pick=Fr,X.pluck=function(t,e){return In(t,ui(e))},X.property=ui,X.propertyOf=function(e){return function(t){return Tt(e,Ke(t),t+"")}},X.pull=function(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var n=0,r=Me(),i=t.length;++n<i;)for(var o=0,a=t[n];-1<(o=r(e,a,o));)k.call(e,o,1);return e},X.pullAt=ln,X.range=function(t,e,n){n&&Ue(t,e,n)&&(e=n=hi),t=+t||0,null==e?(e=t,t=0):e=+e||0;for(var r=-1,i=I(P((e-t)/((n=null==n?1:+n||0)||1)),0),o=A(i);++r<i;)o[r]=t,t+=n;return o},X.rearg=ar,X.reject=function(t,r,e){var n=lr(t)?at:Et;return r=Ae(r,e,3),n(t,function(t,e,n){return!r(t,e,n)})},X.remove=function(t,e,n){var r=[];if(!t||!t.length)return r;var i=-1,o=[],a=t.length;for(e=Ae(e,n,3);++i<a;){var u=t[i];e(u,i,t)&&(r.push(u),o.push(i))}return Lt(t,o),r},X.rest=fn,X.restParam=ur,X.set=function(t,e,n){if(null==t)return t;for(var r=e+"",i=-1,o=(e=null!=t[r]||Le(e,t)?[r]:Ke(e)).length,a=o-1,u=t;null!=u&&++i<o;){var s=e[i];hr(u)&&(i==a?u[s]=n:null==u[s]&&(u[s]=Ne(e[i+1])?[]:{})),u=u[s]}return t},X.shuffle=function(t){return Fn(t,B)},X.slice=function(t,e,n){var r=t?t.length:0;return r?(n&&"number"!=typeof n&&Ue(t,e,n)&&(e=0,n=r),Bt(t,e,n)):[]},X.sortBy=function(t,r,e){if(null==t)return[];e&&Ue(t,r,e)&&(r=hi);var i=-1;return r=Ae(r,e,3),Wt(Rt(t,function(t,e,n){return{criteria:r(t,e,n),index:++i,value:t}}),Uo)},X.sortByAll=Bn,X.sortByOrder=function(t,e,n,r){return null==t?[]:(r&&Ue(e,n,r)&&(n=hi),lr(e)||(e=null==e?[]:[e]),lr(n)||(n=null==n?[]:[n]),Ht(t,e,n))},X.spread=function(e){if("function"!=typeof e)throw new y(Mi);return function(t){return e.apply(this,t)}},X.take=function(t,e,n){return t&&t.length?((n?Ue(t,e,n):null==e)&&(e=1),Bt(t,0,e<0?0:e)):[]},X.takeRight=function(t,e,n){var r=t?t.length:0;return r?((n?Ue(t,e,n):null==e)&&(e=1),Bt(t,(e=r-(+e||0))<0?0:e)):[]},X.takeRightWhile=function(t,e,n){return t&&t.length?Yt(t,Ae(e,n,3),!1,!0):[]},X.takeWhile=function(t,e,n){return t&&t.length?Yt(t,Ae(e,n,3)):[]},X.tap=function(t,e,n){return e.call(n,t),t},X.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new y(Mi);return!1===n?r=!1:hr(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Jn(t,e,{leading:r,maxWait:+e,trailing:i})},X.thru=xn,X.times=function(t,e,n){if((t=T(t))<1||!D(t))return[];var r=-1,i=A(N(t,V));for(e=Zt(e,n,1);++r<t;)r<V?i[r]=e(r):e(r);return i},X.toArray=_r,X.toPlainObject=xr,X.transform=function(t,r,i,e){var n=lr(t)||wr(t);if(r=Ae(r,e,4),null==i)if(n||hr(t)){var o=t.constructor;i=n?lr(t)?new o:[]:$t(pr(o)?o.prototype:hi)}else i={};return(n?it:jt)(t,function(t,e,n){return r(i,t,e,n)}),i},X.union=hn,X.uniq=vn,X.unzip=gn,X.unzipWith=mn,X.values=zr,X.valuesIn=function(t){return Qt(t,Rr(t))},X.where=function(t,e){return qn(t,It(e))},X.without=$n,X.wrap=function(t,e){return qe(e=null==e?ei:e,bi,hi,[t],[])},X.xor=function(){for(var t=-1,e=arguments.length;++t<e;){var n=arguments[t];if(Ie(n))var r=r?st(wt(r,n),wt(n,r)):n}return r?Gt(r):[]},X.zip=yn,X.zipObject=wn,X.zipWith=bn,X.backflow=er,X.collect=In,X.compose=er,X.each=Pn,X.eachRight=Mn,X.extend=Sr,X.iteratee=ti,X.methods=Or,X.object=wn,X.select=qn,X.tail=fn,X.unique=vn,oi(X,X),X.add=function(t,e){return(+t||0)+(+e||0)},X.attempt=Zr,X.camelCase=Br,X.capitalize=function(t){return(t=Ro(t))&&t.charAt(0).toUpperCase()+t.slice(1)},X.ceil=ci,X.clone=function(t,e,n,r){return e&&"boolean"!=typeof e&&Ue(t,e,n)?e=!1:"function"==typeof e&&(r=n,n=e,e=!1),"function"==typeof n?mt(t,e,Zt(n,r,1)):mt(t,e)},X.cloneDeep=function(t,e,n){return"function"==typeof e?mt(t,!0,Zt(e,n,1)):mt(t,!0)},X.deburr=Vr,X.endsWith=function(t,e,n){e+="";var r=(t=Ro(t)).length;return n=n===hi?r:N(n<0?0:+n||0,r),0<=(n-=e.length)&&t.indexOf(e,n)==n},X.escape=function(t){return(t=Ro(t))&&ao.test(t)?t.replace(io,Fo):t},X.escapeRegExp=function(t){return(t=Ro(t))&&vo.test(t)?t.replace(ho,zo):t||"(?:)"},X.every=kn,X.find=An,X.findIndex=rn,X.findKey=qr,X.findLast=jn,X.findLastIndex=on,X.findLastKey=Ar,X.findWhere=function(t,e){return An(t,It(e))},X.first=an,X.floor=li,X.get=function(t,e,n){var r=null==t?hi:Tt(t,Ke(e),e+"");return r===hi?n:r},X.gt=sr,X.gte=function(t,e){return e<=t},X.has=function(t,e){if(null==t)return!1;var n=w.call(t,e);if(!n&&!Le(e)){if(null==(t=1==(e=Ke(e)).length?t:Tt(t,Bt(e,0,-1))))return!1;e=cn(e),n=w.call(t,e)}return n||ze(t.length)&&Ne(e,t.length)&&(lr(t)||cr(t))},X.identity=ei,X.includes=On,X.indexOf=un,X.inRange=function(t,e,n){return e=+e||0,n===hi?(n=e,e=0):n=+n||0,t>=N(e,n)&&t<I(e,n)},X.isArguments=cr,X.isArray=lr,X.isBoolean=function(t){return!0===t||!1===t||Wo(t)&&b.call(t)==Ri},X.isDate=function(t){return Wo(t)&&b.call(t)==Ii},X.isElement=function(t){return!!t&&1===t.nodeType&&Wo(t)&&!mr(t)},X.isEmpty=function(t){return null==t||(Ie(t)&&(lr(t)||yr(t)||cr(t)||Wo(t)&&pr(t.splice))?!t.length:!Dr(t).length)},X.isEqual=fr,X.isError=dr,X.isFinite=function(t){return"number"==typeof t&&D(t)},X.isFunction=pr,X.isMatch=function(t,e,n,r){return n="function"==typeof n?Zt(n,r,3):hi,Dt(t,Oe(e),n)},X.isNaN=function(t){return gr(t)&&t!=+t},X.isNative=vr,X.isNull=function(t){return null===t},X.isNumber=gr,X.isObject=hr,X.isPlainObject=mr,X.isRegExp=$r,X.isString=yr,X.isTypedArray=wr,X.isUndefined=function(t){return t===hi},X.kebabCase=Wr,X.last=cn,X.lastIndexOf=function(t,e,n){var r=t?t.length:0;if(!r)return-1;var i=r;if("number"==typeof n)i=(n<0?I(r+n,0):N(n||0,r-1))+1;else if(n){var o=t[i=Jt(t,e,!0)-1];return(e==e?e===o:o!=o)?i:-1}if(e!=e)return Vo(t,i,!0);for(;i--;)if(t[i]===e)return i;return-1},X.lt=br,X.lte=function(t,e){return t<=e},X.max=fi,X.min=di,X.noConflict=function(){return Po._=d,this},X.noop=ai,X.now=Vn,X.pad=function(t,e,n){e=+e;var r=(t=Ro(t)).length;if(e<=r||!D(e))return t;var i=(e-r)/2,o=T(i);return(n=Se("",P(i),n)).slice(0,o)+t+n},X.padLeft=Hr,X.padRight=Gr,X.parseInt=function(t,e,n){return(n?Ue(t,e,n):null==e)?e=0:e&&(e=+e),t=Jr(t),L(t,e||(wo.test(t)?16:10))},X.random=function(t,e,n){n&&Ue(t,e,n)&&(e=n=hi);var r=null==t,i=null==e;if(null==n&&(i&&"boolean"==typeof t?(n=t,t=1):"boolean"==typeof e&&(n=e,i=!0)),r&&i&&(i=!(e=1)),t=+t||0,i?(e=t,t=0):e=+e||0,n||t%1||e%1){var o=F();return N(t+o*(e-t+v("1e-"+((o+"").length-1))),e)}return Ft(t,e)},X.reduce=Un,X.reduceRight=Ln,X.repeat=Qr,X.result=function(t,e,n){var r=null==t?hi:t[e];return r===hi&&(null==t||Le(e,t)||(r=null==(t=1==(e=Ke(e)).length?t:Tt(t,Bt(e,0,-1)))?hi:t[cn(e)]),r=r===hi?n:r),pr(r)?r.call(t):r},X.round=pi,X.runInContext=t,X.size=function(t){var e=t?Te(t):0;return ze(e)?e:Dr(t).length},X.snakeCase=Yr,X.some=zn,X.sortedIndex=dn,X.sortedLastIndex=pn,X.startCase=Xr,X.startsWith=function(t,e,n){return t=Ro(t),n=null==n?0:N(n<0?0:+n||0,t.length),t.lastIndexOf(e,n)==n},X.sum=function(t,e,n){return n&&Ue(t,e,n)&&(e=hi),1==(e=Ae(e,n,3)).length?function(t,e){for(var n=t.length,r=0;n--;)r+=+e(t[n])||0;return r}(lr(t)?t:Xe(t),e):(r=e,i=0,bt(t,function(t,e,n){i+=+r(t,e,n)||0}),i);var r,i},X.template=function(a,t,e){var n=X.templateSettings;e&&Ue(a,t,e)&&(t=e=hi),a=Ro(a);var u,s,r=dt(pt({},(t=dt(pt({},e||t),n,ft)).imports),n.imports,ft),i=Dr(r),o=Qt(r,i),c=0,l=t.interpolate||Eo,f="__p += '",d=$((t.escape||Eo).source+"|"+l.source+"|"+(l===co?$o:Eo).source+"|"+(t.evaluate||Eo).source+"|$","g"),p="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++qo+"]")+"\n";a.replace(d,function(t,e,n,r,i,o){return n||(n=r),f+=a.slice(c,o).replace(So,Bo),e&&(u=!0,f+="' +\n__e("+e+") +\n'"),i&&(s=!0,f+="';\n"+i+";\n__p += '"),n&&(f+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),c=o+t.length,t}),f+="';\n";var h=t.variable;h||(f="with (obj) {\n"+f+"\n}\n"),f=(s?f.replace(to,""):f).replace(eo,"$1").replace(no,"$1;"),f="function("+(h||"obj")+") {\n"+(h?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(u?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=Zr(function(){return g(i,p+"return "+f).apply(hi,o)});if(v.source=f,dr(v))throw v;return v},X.trim=Jr,X.trimLeft=function(t,e,n){var r=t;return(t=Ro(t))?(n?Ue(r,e,n):null==e)?t.slice(Go(t)):t.slice(Io(t,e+"")):t},X.trimRight=function(t,e,n){var r=t;return(t=Ro(t))?(n?Ue(r,e,n):null==e)?t.slice(0,Qo(t)+1):t.slice(0,No(t,e+"")+1):t},X.trunc=function(t,e,n){n&&Ue(t,e,n)&&(e=hi);var r=Si,i=Ci;if(null!=e)if(hr(e)){var o="separator"in e?e.separator:o;r="length"in e?+e.length||0:r,i="omission"in e?Ro(e.omission):i}else r=+e||0;if(r>=(t=Ro(t)).length)return t;var a=r-i.length;if(a<1)return i;var u=t.slice(0,a);if(null==o)return u+i;if($r(o)){if(t.slice(a).search(o)){var s,c,l=t.slice(0,a);for(o.global||(o=$(o.source,(yo.exec(o)||"")+"g")),o.lastIndex=0;s=o.exec(l);)c=s.index;u=u.slice(0,null==c?a:c)}}else if(t.indexOf(o,a)!=a){var f=u.lastIndexOf(o);-1<f&&(u=u.slice(0,f))}return u+i},X.unescape=function(t){return(t=Ro(t))&&oo.test(t)?t.replace(ro,Yo):t},X.uniqueId=function(t){var e=++f;return Ro(t)+e},X.words=Kr,X.all=kn,X.any=zn,X.contains=On,X.eq=fr,X.detect=An,X.foldl=Un,X.foldr=Ln,X.head=an,X.include=On,X.inject=Un,oi(X,(si={},jt(X,function(t,e){X.prototype[e]||(si[e]=t)}),si),!1),X.sample=Fn,X.prototype.sample=function(e){return this.__chain__||null!=e?this.thru(function(t){return Fn(t,e)}):Fn(this.value())},X.VERSION=vi,it(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){X[t].placeholder=X}),it(["drop","take"],function(r,i){Z.prototype[r]=function(t){var e=this.__filtered__;if(e&&!i)return new Z(this);t=null==t?1:I(T(t)||0,0);var n=this.clone();return e?n.__takeCount__=N(n.__takeCount__,t):n.__views__.push({size:t,type:r+(n.__dir__<0?"Right":"")}),n},Z.prototype[r+"Right"]=function(t){return this.reverse()[r](t).reverse()}}),it(["filter","map","takeWhile"],function(t,e){var r=e+1,i=r!=Pi;Z.prototype[t]=function(t,e){var n=this.clone();return n.__iteratees__.push({iteratee:Ae(t,e,1),type:r}),n.__filtered__=n.__filtered__||i,n}}),it(["first","last"],function(t,e){var n="take"+(e?"Right":"");Z.prototype[t]=function(){return this[n](1).value()[0]}}),it(["initial","rest"],function(t,e){var n="drop"+(e?"":"Right");Z.prototype[t]=function(){return this.__filtered__?new Z(this):this[n](1)}}),it(["pluck","where"],function(t,e){var n=e?"filter":"map",r=e?It:ui;Z.prototype[t]=function(t){return this[n](r(t))}}),Z.prototype.compact=function(){return this.filter(ei)},Z.prototype.reject=function(e,t){return e=Ae(e,t,1),this.filter(function(t){return!e(t)})},Z.prototype.slice=function(t,e){t=null==t?0:+t||0;var n=this;return n.__filtered__&&(0<t||e<0)?new Z(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==hi&&(n=(e=+e||0)<0?n.dropRight(-e):n.take(e-t)),n)},Z.prototype.takeRightWhile=function(t,e){return this.reverse().takeWhile(t,e).reverse()},Z.prototype.toArray=function(){return this.take(B)},jt(Z.prototype,function(f,t){var d=/^(?:filter|map|reject)|While$/.test(t),p=/^(?:first|last)$/.test(t),h=X[p?"take"+("last"==t?"Right":""):t];h&&(X.prototype[t]=function(){var e=p?[1]:arguments,n=this.__chain__,t=this.__wrapped__,r=!!this.__actions__.length,i=t instanceof Z,o=e[0],a=i||lr(t);a&&d&&"function"==typeof o&&1!=o.length&&(i=a=!1);var u=function(t){return p&&n?h(t,1)[0]:h.apply(hi,st([t],e))},s={func:xn,args:[u],thisArg:hi},c=i&&!r;if(p&&!n)return c?((t=t.clone()).__actions__.push(s),f.call(t)):h.call(hi,this.value())[0];if(!p&&a){t=c?t:new Z(this);var l=f.apply(t,e);return l.__actions__.push(s),new K(l,n)}return this.thru(u)})}),it(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(t){var n=(/^(?:replace|split)$/.test(t)?c:u)[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:join|pop|replace|shift)$/.test(t);X.prototype[t]=function(){var e=arguments;return i&&!this.__chain__?n.apply(this.value(),e):this[r](function(t){return n.apply(t,e)})}}),jt(Z.prototype,function(t,e){var n=X[e];if(n){var r=n.name;(Y[r]||(Y[r]=[])).push({name:e,func:n})}}),Y[Ee(hi,mi).name]=[{name:"wrapper",func:hi}],Z.prototype.clone=function(){var t=new Z(this.__wrapped__);return t.__actions__=rt(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=rt(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=rt(this.__views__),t},Z.prototype.reverse=function(){if(this.__filtered__){var t=new Z(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Z.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=lr(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=N(e,t+a);break;case"takeRight":t=I(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,u=o.end,s=u-a,c=r?u:a-1,l=this.__iteratees__,f=l.length,d=0,p=N(s,this.__takeCount__);if(!n||i<Ai||i==s&&p==s)return Xt(r&&n?t.reverse():t,this.__actions__);var h=[];t:for(;s--&&d<p;){for(var v=-1,g=t[c+=e];++v<f;){var m=l[v],$=m.iteratee,y=m.type,w=$(g);if(y==Pi)g=w;else if(!w){if(y==ji)continue t;break t}}h[d++]=g}return h},X.prototype.chain=function(){return _n(this)},X.prototype.commit=function(){return new K(this.value(),this.__chain__)},X.prototype.concat=En,X.prototype.plant=function(t){for(var e,n=this;n instanceof J;){var r=Ze(n);e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e},X.prototype.reverse=function(){var t=this.__wrapped__,e=function(t){return n&&n.__dir__<0?t:t.reverse()};if(t instanceof Z){var n=t;return this.__actions__.length&&(n=new Z(this)),(n=n.reverse()).__actions__.push({func:xn,args:[e],thisArg:hi}),new K(n,this.__chain__)}return this.thru(e)},X.prototype.toString=function(){return this.value()+""},X.prototype.run=X.prototype.toJSON=X.prototype.valueOf=X.prototype.value=function(){return Xt(this.__wrapped__,this.__actions__)},X.prototype.collect=X.prototype.map,X.prototype.head=X.prototype.first,X.prototype.select=X.prototype.filter,X.prototype.tail=X.prototype.rest,X}();"function"==typeof hi&&"object"==typeof hi.amd&&hi.amd?(Po._=Xo,hi(function(){return Xo})):f&&d?g?(d.exports=Xo)._=Xo:f._=Xo:Po._=Xo}).call(commonjsGlobal)});function mixProvider(r,a){function i(t){var e=t.mixer;if(!(lodash.isPlainObject(t)&&"mixer"in t))return[t];if(lodash.isUndefined(i.mixers[e]))throw new Error("Mixer: unknow mixer type = "+e);if(!t.remix&&t.$parsed)return t.$parsed;if(t.$parsed=i.mixers[e].apply(null,arguments),!lodash.isArray(t.$parsed))throw new Error("Mixer: mixers must return an array (mixer: "+e+")");return t.$parsed}function u(t,r){return lodash.reduce(t,function(t,e){if(lodash.isPlainObject(e)&&"mixer"in e&&"wrapper"!=e.mixer&&!e.wrapper){var n=u(i(e,r),r);return t.concat(n)}return t.concat([e])},[])}return i.mixers={wrapper:function(t){return t.data},repeat:function(t){var e,n=t.data||[],r=[];for(e=0;e<t.times;e++)r=r.concat(lodash.clone(n,!0));return r},random:function(t,e){var n=t.data?u(t.data,e):[];return r(n)},choose:function(t,e){var n=t.data?u(t.data,e):[];return lodash.take(r(n),t.n?t.n:1)},custom:function(t,e){return lodash.isFunction(t.fn)?t.fn(t,e):[]},weightedRandom:t,weightedChoose:t},i;function t(r,t){var i=r.data?u(r.data,t):[],e=r.n||1,o=lodash.sum(r.weights);if(!lodash.isArray(r.weights))throw new Error("Mixer: weightedRandom requires an array of weights");return lodash.range(0,e).map(function(){var t,e=a()*o,n=0;for(t=0;t<i.length;t++)if(n=+(n+=r.weights[t]).toFixed(3),e<=n)return r.data[t];throw new Error("Mixer: something went wrong with weightedRandom")}).map(lodash.clone)}}function mixerDotNotationProvider$1(n){return function(t,e){return lodash.isString(t)?/[^/]\./.test(t)?n(t,e):t.replace("/.","."):t}}function mixerConditionProvider$1(u,s){var c={gt:t(lodash.gt),greaterThan:t(lodash.gt),gte:t(lodash.gte),greaterThanOrEqual:t(lodash.gte),equals:lodash.eq,in:lodash.rearg(lodash.contains,1,0),contains:lodash.rearg(lodash.contains,1,0),exactly:function(t,e){return t===e},isTruthy:l};return function(t,e){var n,r,i=(r=(n=t).operator,lodash.isFunction(n)?n:lodash.has(n,"operator")?lodash.isFunction(r)?r:c[r]:lodash.has(n,"to")?lodash.eq:l),o=u(t.compare,e),a=u(t.to,e);return t.DEBUG&&s({type:"info",message:"Condition info",rows:[["Left: ",o],["Operator: ",t.operator||"equals"],["Right: ",a]],context:t}),t.negate?!i.apply(e,[o,a,e]):i.apply(e,[o,a,e])};function l(t){return!!t}function t(n){return function(t,e){return!![t,e].every(lodash.isNumber)&&n(t,e)}}}function evaluateProvider(i){return function e(t,n){function r(t){return e(t,n)}return lodash.isArray(t)&&(t={and:t}),t.and?lodash.every(t.and,r):t.nand?!lodash.every(t.nand,r):t.or?lodash.some(t.or,r):t.nor?!lodash.some(t.nor,r):i(t,n)}}function mixerBranchingDecorator$1(t,r,i){return t.mixers.branch=function(t,e){return e=lodash.extend(e||{},i),r(t.conditions,e)?t.data||[]:t.elseData||[]},t.mixers.multiBranch=function(t,e){var n;if(e=lodash.extend(e||{},i),n=lodash.find(t.branches,function(t){return r(t.conditions,e)}))return n.data||[];return t.elseData||[]},t}function mixerSequenceProvider$1(o){function t(t){this.sequence=t,this.stack=[],this.add(t),this.pointer=0}return lodash.extend(t.prototype,{add:function(t,e){this.stack.push({pointer:e?t.length:-1,sequence:t})},proceed:function(t,e){var n=this.stack[this.stack.length-1],r="next"===t;if(!n)throw new Error("mixerSequence: subSequence not found");n.pointer+=r?1:-1;var i=n.sequence[n.pointer];return lodash.isUndefined(i)&&1<this.stack.length?(this.stack.pop(),this.proceed.call(this,t,e)):i&&i.mixer?(this.add(o(i,e),!r),this.proceed.call(this,t,e)):this},next:function(t){return this.pointer++,this.proceed.call(this,"next",t)},prev:function(t){return this.pointer--,this.proceed.call(this,"prev",t)},current:function(){var t=this.stack[this.stack.length-1];if(!t)throw new Error("mixerSequence: subSequence not found");var e=t.sequence[t.pointer];if(e)return e.$meta=this.meta(),e},meta:function(){return{number:this.pointer,outOf:lodash.reduce(this.stack,function(t,e){return t+e.sequence.length-1},0)+1}}}),t}function dotNotation$1(t,e){if(!lodash.isUndefined(t))return lodash.isString(t)&&(t=t.split(".")),t.reduce(function(t,e){if(lodash.isPlainObject(t)||lodash.isArray(t))return t[e]},e)}function piConsoleFactory(r){return window.DEBUG?function t(e){if(lodash.get(t,"settings.hideConsole",!1))return window.postMessage({type:"kill-console"},"*");r[e.type]&&r[e.type](e.message);window.postMessage((n=e,lodash.cloneDeep(n,function(t){return lodash.isFunction(t)?t.toString():lodash.isError(t)?{name:t.name,message:t.message,stack:t.stack}:void 0})),"*");var n}:lodash.noop}mixProvider.$inject=["randomizeShuffle","randomizeRandom"],mixerDotNotationProvider$1.$inject=["dotNotation"],mixerConditionProvider$1.$inject=["mixerDotNotation","piConsole"],evaluateProvider.$inject=["mixerCondition"],mixerBranchingDecorator$1.$inject=["$delegate","mixerEvaluate","mixerDefaultContext"],mixerSequenceProvider$1.$inject=["mixer"],piConsoleFactory.$inject=["$log"];var piConsole$1=piConsoleFactory(console),mixer=mixProvider(lodash.shuffle,Math.random),mixerDotNotation=mixerDotNotationProvider$1(dotNotation$1),mixerCondition=mixerConditionProvider$1(mixerDotNotation,piConsole$1),mixerEvaluate=evaluateProvider(mixerCondition),mixerDefaultContext={};mixerBranchingDecorator$1(mixer,mixerEvaluate,mixerDefaultContext);var MixerSequence=mixerSequenceProvider$1(mixer);function templateObjProvider$1(s){return function(t,e,n){var r,i=lodash.get(n,"skip",[]),o={},a=lodash.assign({},e,s);for(r in t)o[r]=-1==i.indexOf(r)?u(t[r]):t[r];return o;function u(t){return lodash.isString(t)?~(e=t).indexOf("<%")?lodash.template(e)(a):e:lodash.isArray(t)?t.map(u):lodash.isPlainObject(t)?lodash.mapValues(t,u):t;var e}}}templateObjProvider$1.$inject=["templateDefaultContext"];var templateObj=templateObjProvider$1({});function collectionService(){function n(t){if(t instanceof n)return t;if(!(lodash.isUndefined(t)||lodash.isArray(t)||t instanceof n))throw new Error("Collections can only be constructed from arrays");this.collection=t||[],this.length=this.collection.length,this.pointer=-1}lodash.extend(n.prototype,{first:function(){return this.pointer=0,this.collection[this.pointer]},last:function(){return this.pointer=this.collection.length-1,this.collection[this.pointer]},end:function(){this.pointer=this.collection.length},current:function(){return this.collection[this.pointer]},next:function(){return this.collection[++this.pointer]},previous:function(){return this.collection[--this.pointer]},add:function(t){return arguments.length&&(t=lodash.isArray(t)?t:[t],this.collection=this.collection.concat(t),this.length=this.collection.length),this},at:function(t){return this.collection[t]}});var r=Array.prototype.slice;return lodash.each(["where","filter"],function(e){n.prototype[e]=function(){var t=r.call(arguments);return t.unshift(this.collection),new n(lodash[e].apply(lodash,t))}}),n}function RandomizerProvider(i,a,u){function t(){this._cache={random:{},exRandom:{},sequential:{}}}return lodash.extend(t.prototype,{random:function(t,e,n){var r=this._cache.random;if(n&&!lodash.isUndefined(r[e]))return r[e];return r[e]=i(t),r[e]},exRandom:function(t,e,n){var r,i=this._cache.exRandom,o=i[e];if(lodash.isUndefined(o))return(o=i[e]=new u(a(t))).first();if(o.length!==t)throw new Error("This seed  ("+e+") points to a collection with the wrong length, you can only use a seed for sets of the same length");if(n)return o.current();return r=o.next(),lodash.isUndefined(r)?(o=i[e]=new u(a(t))).first():r},sequential:function(t,e,n){var r,i=this._cache.sequential,o=i[e];if(lodash.isUndefined(o))return(o=i[e]=new u(lodash.range(t))).first();if(o.length!==t)throw new Error("This seed  ("+e+") points to a collection with the wrong length, you can only use a seed for sets of the same length");if(n)return o.current();return r=o.next(),lodash.isUndefined(r)?o.first():r}}),t}function storeProvider$1(e){function t(){this.store={}}return lodash.extend(t.prototype,{create:function(t){if(this.store[t])throw new Error("The name space "+t+" already exists");this.store[t]=new e,this.store[t].namespace=t},read:function(t){if(!this.store[t])throw new Error("The name space "+t+" does not exist");return this.store[t]},update:function(t,e){this.read(t).add(e)},del:function(t){this.store[t]=void 0}}),t}function SequenceProvider(r){function t(t,e,n){this.namespace=t,this.mixerSequence=new r(e),this.db=n}return lodash.extend(t.prototype,{next:function(t){return this.mixerSequence.next(t),this},prev:function(t){return this.mixerSequence.prev(t),this},current:function(t,e){t||(t={});var n=this.mixerSequence.current(t);return n?this.db.inflate(this.namespace,n,t,e):n},all:function(t,e){for(var n=[],r=this.next().current(t,e);r;)n.push(r),r=this.next().current(t,e);return n}}),t}function DatabaseProvider(t,e,a,u,n,s){function r(){this.store=new t,this.randomizer=new e}return lodash.extend(r.prototype,{createColl:function(t){this.store.create(t)},getColl:function(t){return this.store.read(t)},add:function(t,e){this.store.read(t).add(e)},inflate:function(t,e,n,r){var i,o=this.getColl(t);try{e.$inflated&&!e.reinflate||(e.$inflated=a(e,o,this.randomizer),e.$templated=null)}catch(t){throw s({type:"error",message:"Failed to inherit",error:t,context:e}),this.onError&&this.onError(t),t}try{e.$templated&&!e.$inflated.regenerateTemplate||(n[t+"Meta"]=e.$meta,n[t+"Data"]=u(e.$inflated.data||{},n,r),e.$templated=u(e.$inflated,n,r))}catch(t){throw s({type:"error",message:"Failed to apply template",error:t,context:e.$inflated}),this.onError&&this.onError(t),t}return i=e.$templated,n.global&&i.addGlobal&&lodash.extend(n.global,i.addGlobal),n.current&&i.addCurrent&&lodash.extend(n.current,i.addCurrent),i},sequence:function(t,e){if(!lodash.isArray(e))throw new Error("Sequence must be an array.");return new n(t,e,this)}}),r}function queryProvider$1(s){return function(e,t,n){var r=new s(t);if(lodash.isFunction(e))return e(t);(lodash.isString(e)||lodash.isNumber(e))&&(e={set:e,type:"random"}),e.set&&(r=r.where({set:e.set})),lodash.isString(e.data)&&(r=r.filter(function(t){return t.handle===e.data||t.data&&t.data.handle===e.data})),lodash.isPlainObject(e.data)&&(r=r.where({data:e.data})),lodash.isFunction(e.data)&&(r=r.filter(e.data));var i,o=e.seed||"$"+t.namespace+e.set,a=r.length,u=e.repeat;switch(e.type){case void 0:case"byData":case"random":i=n.random(a,o,u);break;case"exRandom":i=n.exRandom(a,o,u);break;case"sequential":i=n.sequential(a,o,u);break;case"first":i=0;break;case"last":i=a-1;break;default:throw new Error("Unknow query type: "+e.type)}if(lodash.isUndefined(r.at(i)))throw new Error("Query failed, object ("+JSON.stringify(e)+") not found. If you are trying to apply a template, you should know that they are not supported for inheritance.");return r.at(i)}}function inflateProvider$1(c,e){function l(t){return lodash.isFunction(t.customize)&&t.customize.apply(t,[t,e.global]),t}return function t(e,n,r,i,o){if(!(o=i?--o:10))throw new Error("Inheritance loop too deep, you can only inherit up to 10 levels down");if(!lodash.isPlainObject(e))throw new Error("You are trying to inflate a non object ("+JSON.stringify(e)+")");var a,u=lodash.cloneDeep(e),s=u.inherit;if(!u.inherit)return i||l(u),u;if(!(a=c(s,n,r)))throw new Error("Query failed, object ("+JSON.stringify(s)+") not found.");if(a=t(a,n,r,!0,o),s.merge&&!lodash.isArray(s.merge))throw new Error("Inheritance error: inherit.merge must be an array.");return lodash.each(a,function(t,e){var n,r;if(e in u){if(-1!=lodash.indexOf(s.merge,e)){if(n=u[e],r=t,lodash.isArray(n)){if(!lodash.isArray(r))throw new Error('Inheritance error: You tried merging an array with an non array (for "'+e+'")');u[e]=n.concat(r)}if(lodash.isPlainObject(n)){if(!lodash.isPlainObject(r))throw new Error('Inheritance error: You tried merging an object with an non object (for "'+e+'")');u[e]=lodash.extend({},r,n)}}}else u[e]=lodash.isFunction(t)?t:lodash.cloneDeep(t)}),a.data&&(u.data=lodash.extend(a.data,u.data||{})),!i&&l(u),u}}RandomizerProvider.$inject=["randomizeInt","randomizeRange","Collection"],storeProvider$1.$inject=["Collection"],SequenceProvider.$inject=["MixerSequence"],DatabaseProvider.$inject=["DatabaseStore","DatabaseRandomizer","databaseInflate","templateObj","databaseSequence","piConsole"],queryProvider$1.$inject=["Collection"],inflateProvider$1.$inject=["databaseQuery","$rootScope"];var global$1=window.piGlobal,piConsole=piConsoleFactory(console),collection=collectionService(),DatabaseRandomizer=RandomizerProvider(randomInt,randomArr,collection),databaseQuery=queryProvider$1(collection,piConsole),databaseInflate=inflateProvider$1(databaseQuery,{global:global$1},piConsole),DatabaseStore=storeProvider$1(collection),databaseSequence=SequenceProvider(MixerSequence),Database$2=DatabaseProvider(DatabaseStore,DatabaseRandomizer,databaseInflate,templateObj,databaseSequence,piConsole);function randomArr(t){return lodash.shuffle(lodash.range(t))}function randomInt(t){return Math.floor(Math.random()*t)}var lodash$1=createCommonjsModule(function(U,L){
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright JS Foundation and other contributors <https://js.foundation/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
(function(){var ea,na="Expected a function",ra="__lodash_hash_undefined__",ia="__lodash_placeholder__",oa=9007199254740991,aa=NaN,ua=4294967295,sa=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],ca="[object Arguments]",la="[object Array]",fa="[object Boolean]",da="[object Date]",pa="[object Error]",ha="[object Function]",va="[object GeneratorFunction]",ga="[object Map]",ma="[object Number]",$a="[object Object]",ya="[object Promise]",wa="[object RegExp]",ba="[object Set]",_a="[object String]",xa="[object Symbol]",Ea="[object WeakMap]",Sa="[object ArrayBuffer]",Ca="[object DataView]",ka="[object Float32Array]",qa="[object Float64Array]",Aa="[object Int8Array]",ja="[object Int16Array]",Pa="[object Int32Array]",Ma="[object Uint8Array]",Ta="[object Uint8ClampedArray]",Oa="[object Uint16Array]",Da="[object Uint32Array]",Ra=/\b__p \+= '';/g,Ia=/\b(__p \+=) '' \+/g,Na=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ua=/&(?:amp|lt|gt|quot|#39);/g,La=/[&<>"']/g,Fa=RegExp(Ua.source),za=RegExp(La.source),Ba=/<%-([\s\S]+?)%>/g,Va=/<%([\s\S]+?)%>/g,Wa=/<%=([\s\S]+?)%>/g,Ha=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ga=/^\w*$/,Qa=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ya=/[\\^$.*+?()[\]{}|]/g,Xa=RegExp(Ya.source),Ja=/^\s+|\s+$/g,Ka=/^\s+/,Za=/\s+$/,tu=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,eu=/\{\n\/\* \[wrapped with (.+)\] \*/,nu=/,? & /,ru=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,iu=/\\(\\)?/g,ou=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,au=/\w*$/,uu=/^[-+]0x[0-9a-f]+$/i,su=/^0b[01]+$/i,cu=/^\[object .+?Constructor\]$/,lu=/^0o[0-7]+$/i,fu=/^(?:0|[1-9]\d*)$/,du=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,pu=/($^)/,hu=/['\n\r\u2028\u2029\\]/g,t="\\ud800-\\udfff",e="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",n="\\u2700-\\u27bf",r="a-z\\xdf-\\xf6\\xf8-\\xff",i="A-Z\\xc0-\\xd6\\xd8-\\xde",o="\\ufe0e\\ufe0f",a="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",u="["+t+"]",s="["+a+"]",c="["+e+"]",l="\\d+",f="["+n+"]",d="["+r+"]",p="[^"+t+a+l+n+r+i+"]",h="\\ud83c[\\udffb-\\udfff]",v="[^"+t+"]",g="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",$="["+i+"]",y="(?:"+d+"|"+p+")",w="(?:"+$+"|"+p+")",b="(?:['’](?:d|ll|m|re|s|t|ve))?",_="(?:['’](?:D|LL|M|RE|S|T|VE))?",x="(?:"+c+"|"+h+")"+"?",E="["+o+"]?",S=E+x+("(?:\\u200d(?:"+[v,g,m].join("|")+")"+E+x+")*"),C="(?:"+[f,g,m].join("|")+")"+S,k="(?:"+[v+c+"?",c,g,m,u].join("|")+")",vu=RegExp("['’]","g"),gu=RegExp(c,"g"),q=RegExp(h+"(?="+h+")|"+k+S,"g"),mu=RegExp([$+"?"+d+"+"+b+"(?="+[s,$,"$"].join("|")+")",w+"+"+_+"(?="+[s,$+y,"$"].join("|")+")",$+"?"+y+"+"+b,$+"+"+_,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",l,C].join("|"),"g"),A=RegExp("[\\u200d"+t+e+o+"]"),$u=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,yu=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],wu=-1,bu={};bu[ka]=bu[qa]=bu[Aa]=bu[ja]=bu[Pa]=bu[Ma]=bu[Ta]=bu[Oa]=bu[Da]=!0,bu[ca]=bu[la]=bu[Sa]=bu[fa]=bu[Ca]=bu[da]=bu[pa]=bu[ha]=bu[ga]=bu[ma]=bu[$a]=bu[wa]=bu[ba]=bu[_a]=bu[Ea]=!1;var _u={};_u[ca]=_u[la]=_u[Sa]=_u[Ca]=_u[fa]=_u[da]=_u[ka]=_u[qa]=_u[Aa]=_u[ja]=_u[Pa]=_u[ga]=_u[ma]=_u[$a]=_u[wa]=_u[ba]=_u[_a]=_u[xa]=_u[Ma]=_u[Ta]=_u[Oa]=_u[Da]=!0,_u[pa]=_u[ha]=_u[Ea]=!1;var j={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},xu=parseFloat,Eu=parseInt,P="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,M="object"==typeof self&&self&&self.Object===Object&&self,Su=P||M||Function("return this")(),T=L&&!L.nodeType&&L,O=T&&U&&!U.nodeType&&U,Cu=O&&O.exports===T,D=Cu&&P.process,R=function(){try{var t=O&&O.require&&O.require("util").types;return t||D&&D.binding&&D.binding("util")}catch(t){}}(),ku=R&&R.isArrayBuffer,qu=R&&R.isDate,Au=R&&R.isMap,ju=R&&R.isRegExp,Pu=R&&R.isSet,Mu=R&&R.isTypedArray;function Tu(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Ou(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function Du(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Ru(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Iu(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Nu(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function Uu(t,e){return!!(null==t?0:t.length)&&-1<Qu(t,e,0)}function Lu(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Fu(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function zu(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function Bu(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function Vu(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function Wu(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var I=Ku("length");function Hu(t,r,e){var i;return e(t,function(t,e,n){if(r(t,e,n))return i=e,!1}),i}function Gu(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function Qu(t,e,n){return e==e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):Gu(t,Xu,n)}function Yu(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function Xu(t){return t!=t}function Ju(t,e){var n=null==t?0:t.length;return n?ts(t,e)/n:aa}function Ku(e){return function(t){return null==t?ea:t[e]}}function N(e){return function(t){return null==e?ea:e[t]}}function Zu(t,r,i,o,e){return e(t,function(t,e,n){i=o?(o=!1,t):r(i,t,e,n)}),i}function ts(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);o!==ea&&(n=n===ea?o:n+o)}return n}function es(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function ns(e){return function(t){return e(t)}}function rs(e,t){return Fu(t,function(t){return e[t]})}function is(t,e){return t.has(e)}function os(t,e){for(var n=-1,r=t.length;++n<r&&-1<Qu(e,t[n],0););return n}function as(t,e){for(var n=t.length;n--&&-1<Qu(e,t[n],0););return n}var us=N({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),ss=N({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function cs(t){return"\\"+j[t]}function ls(t){return A.test(t)}function fs(t){var n=-1,r=Array(t.size);return t.forEach(function(t,e){r[++n]=[e,t]}),r}function ds(e,n){return function(t){return e(n(t))}}function ps(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==ia||(t[n]=ia,o[i++]=n)}return o}function hs(t,e){return"__proto__"==e?ea:t[e]}function vs(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function gs(t){return ls(t)?function(t){var e=q.lastIndex=0;for(;q.test(t);)++e;return e}(t):I(t)}function ms(t){return ls(t)?t.match(q)||[]:t.split("")}var $s=N({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var ys=function t(e){var n,q=(e=null==e?Su:ys.defaults(Su.Object(),e,ys.pick(Su,yu))).Array,r=e.Date,i=e.Error,g=e.Function,o=e.Math,E=e.Object,m=e.RegExp,l=e.String,A=e.TypeError,a=q.prototype,u=g.prototype,f=E.prototype,s=e["__core-js_shared__"],c=u.toString,S=f.hasOwnProperty,d=0,p=(n=/[^.]+$/.exec(s&&s.keys&&s.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",h=f.toString,v=c.call(E),$=Su._,y=m("^"+c.call(S).replace(Ya,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),w=Cu?e.Buffer:ea,b=e.Symbol,_=e.Uint8Array,x=w?w.allocUnsafe:ea,C=ds(E.getPrototypeOf,E),k=E.create,j=f.propertyIsEnumerable,P=a.splice,M=b?b.isConcatSpreadable:ea,T=b?b.iterator:ea,O=b?b.toStringTag:ea,D=function(){try{var t=Ln(E,"defineProperty");return t({},"",{}),t}catch(t){}}(),R=e.clearTimeout!==Su.clearTimeout&&e.clearTimeout,I=r&&r.now!==Su.Date.now&&r.now,N=e.setTimeout!==Su.setTimeout&&e.setTimeout,U=o.ceil,L=o.floor,F=E.getOwnPropertySymbols,z=w?w.isBuffer:ea,B=e.isFinite,V=a.join,W=ds(E.keys,E),H=o.max,G=o.min,Q=r.now,Y=e.parseInt,X=o.random,J=a.reverse,K=Ln(e,"DataView"),Z=Ln(e,"Map"),tt=Ln(e,"Promise"),et=Ln(e,"Set"),nt=Ln(e,"WeakMap"),rt=Ln(E,"create"),it=nt&&new nt,ot={},at=pr(K),ut=pr(Z),st=pr(tt),ct=pr(et),lt=pr(nt),ft=b?b.prototype:ea,dt=ft?ft.valueOf:ea,pt=ft?ft.toString:ea;function ht(t){if(ji(t)&&!yi(t)&&!(t instanceof $t)){if(t instanceof mt)return t;if(S.call(t,"__wrapped__"))return hr(t)}return new mt(t)}var vt=function(){function n(){}return function(t){if(!Ai(t))return{};if(k)return k(t);n.prototype=t;var e=new n;return n.prototype=ea,e}}();function gt(){}function mt(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=ea}function $t(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ua,this.__views__=[]}function yt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function wt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function bt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function _t(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new bt;++e<n;)this.add(t[e])}function xt(t){var e=this.__data__=new wt(t);this.size=e.size}function Et(t,e){var n=yi(t),r=!n&&$i(t),i=!n&&!r&&xi(t),o=!n&&!r&&!i&&Ni(t),a=n||r||i||o,u=a?es(t.length,l):[],s=u.length;for(var c in t)!e&&!S.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Gn(c,s))||u.push(c);return u}function St(t){var e=t.length;return e?t[_e(0,e-1)]:ea}function Ct(t,e){return sr(rn(t),Dt(e,0,t.length))}function kt(t){return sr(rn(t))}function qt(t,e,n){(n===ea||vi(t[e],n))&&(n!==ea||e in t)||Tt(t,e,n)}function At(t,e,n){var r=t[e];S.call(t,e)&&vi(r,n)&&(n!==ea||e in t)||Tt(t,e,n)}function jt(t,e){for(var n=t.length;n--;)if(vi(t[n][0],e))return n;return-1}function Pt(t,r,i,o){return Lt(t,function(t,e,n){r(o,t,i(t),n)}),o}function Mt(t,e){return t&&on(e,ao(e),t)}function Tt(t,e,n){"__proto__"==e&&D?D(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Ot(t,e){for(var n=-1,r=e.length,i=q(r),o=null==t;++n<r;)i[n]=o?ea:eo(t,e[n]);return i}function Dt(t,e,n){return t==t&&(n!==ea&&(t=t<=n?t:n),e!==ea&&(t=e<=t?t:e)),t}function Rt(n,r,i,t,e,o){var a,u=1&r,s=2&r,c=4&r;if(i&&(a=e?i(n,t,e,o):i(n)),a!==ea)return a;if(!Ai(n))return n;var l,f,d,p,h,v,g,m,$,y=yi(n);if(y){if(m=(g=n).length,$=new g.constructor(m),m&&"string"==typeof g[0]&&S.call(g,"index")&&($.index=g.index,$.input=g.input),a=$,!u)return rn(n,a)}else{var w=Bn(n),b=w==ha||w==va;if(xi(n))return Je(n,u);if(w==$a||w==ca||b&&!e){if(a=s||b?{}:Wn(n),!u)return s?(v=d=n,p=(h=a)&&on(v,uo(v),h),on(d,zn(d),p)):(f=Mt(a,l=n),on(l,Fn(l),f))}else{if(!_u[w])return e?n:{};a=function(t,e,n){var r,i,o,a,u,s=t.constructor;switch(e){case Sa:return Ke(t);case fa:case da:return new s(+t);case Ca:return a=t,u=n?Ke(a.buffer):a.buffer,new a.constructor(u,a.byteOffset,a.byteLength);case ka:case qa:case Aa:case ja:case Pa:case Ma:case Ta:case Oa:case Da:return Ze(t,n);case ga:return new s;case ma:case _a:return new s(t);case wa:return(o=new(i=t).constructor(i.source,au.exec(i))).lastIndex=i.lastIndex,o;case ba:return new s;case xa:return r=t,dt?E(dt.call(r)):{}}}(n,w,u)}}o||(o=new xt);var _=o.get(n);if(_)return _;if(o.set(n,a),Di(n))return n.forEach(function(t){a.add(Rt(t,r,i,t,n,o))}),a;if(Pi(n))return n.forEach(function(t,e){a.set(e,Rt(t,r,i,e,n,o))}),a;var x=y?ea:(c?s?Tn:Mn:s?uo:ao)(n);return Du(x||n,function(t,e){x&&(t=n[e=t]),At(a,e,Rt(t,r,i,e,n,o))}),a}function It(t,e,n){var r=n.length;if(null==t)return!r;for(t=E(t);r--;){var i=n[r],o=e[i],a=t[i];if(a===ea&&!(i in t)||!o(a))return!1}return!0}function Nt(t,e,n){if("function"!=typeof t)throw new A(na);return ir(function(){t.apply(ea,n)},e)}function Ut(t,e,n,r){var i=-1,o=Uu,a=!0,u=t.length,s=[],c=e.length;if(!u)return s;n&&(e=Fu(e,ns(n))),r?(o=Lu,a=!1):200<=e.length&&(o=is,a=!1,e=new _t(e));t:for(;++i<u;){var l=t[i],f=null==n?l:n(l);if(l=r||0!==l?l:0,a&&f==f){for(var d=c;d--;)if(e[d]===f)continue t;s.push(l)}else o(e,f,r)||s.push(l)}return s}ht.templateSettings={escape:Ba,evaluate:Va,interpolate:Wa,variable:"",imports:{_:ht}},(ht.prototype=gt.prototype).constructor=ht,(mt.prototype=vt(gt.prototype)).constructor=mt,($t.prototype=vt(gt.prototype)).constructor=$t,yt.prototype.clear=function(){this.__data__=rt?rt(null):{},this.size=0},yt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},yt.prototype.get=function(t){var e=this.__data__;if(rt){var n=e[t];return n===ra?ea:n}return S.call(e,t)?e[t]:ea},yt.prototype.has=function(t){var e=this.__data__;return rt?e[t]!==ea:S.call(e,t)},yt.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=rt&&e===ea?ra:e,this},wt.prototype.clear=function(){this.__data__=[],this.size=0},wt.prototype.delete=function(t){var e=this.__data__,n=jt(e,t);return!(n<0||(n==e.length-1?e.pop():P.call(e,n,1),--this.size,0))},wt.prototype.get=function(t){var e=this.__data__,n=jt(e,t);return n<0?ea:e[n][1]},wt.prototype.has=function(t){return-1<jt(this.__data__,t)},wt.prototype.set=function(t,e){var n=this.__data__,r=jt(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},bt.prototype.clear=function(){this.size=0,this.__data__={hash:new yt,map:new(Z||wt),string:new yt}},bt.prototype.delete=function(t){var e=Nn(this,t).delete(t);return this.size-=e?1:0,e},bt.prototype.get=function(t){return Nn(this,t).get(t)},bt.prototype.has=function(t){return Nn(this,t).has(t)},bt.prototype.set=function(t,e){var n=Nn(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},_t.prototype.add=_t.prototype.push=function(t){return this.__data__.set(t,ra),this},_t.prototype.has=function(t){return this.__data__.has(t)},xt.prototype.clear=function(){this.__data__=new wt,this.size=0},xt.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},xt.prototype.get=function(t){return this.__data__.get(t)},xt.prototype.has=function(t){return this.__data__.has(t)},xt.prototype.set=function(t,e){var n=this.__data__;if(n instanceof wt){var r=n.__data__;if(!Z||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new bt(r)}return n.set(t,e),this.size=n.size,this};var Lt=sn(Qt),Ft=sn(Yt,!0);function zt(t,r){var i=!0;return Lt(t,function(t,e,n){return i=!!r(t,e,n)}),i}function Bt(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(u===ea?a==a&&!Ii(a):n(a,u)))var u=a,s=o}return s}function Vt(t,r){var i=[];return Lt(t,function(t,e,n){r(t,e,n)&&i.push(t)}),i}function Wt(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=Hn),i||(i=[]);++o<a;){var u=t[o];0<e&&n(u)?1<e?Wt(u,e-1,n,r,i):zu(i,u):r||(i[i.length]=u)}return i}var Ht=cn(),Gt=cn(!0);function Qt(t,e){return t&&Ht(t,e,ao)}function Yt(t,e){return t&&Gt(t,e,ao)}function Xt(e,t){return Nu(t,function(t){return Ci(e[t])})}function Jt(t,e){for(var n=0,r=(e=Ge(e,t)).length;null!=t&&n<r;)t=t[dr(e[n++])];return n&&n==r?t:ea}function Kt(t,e,n){var r=e(t);return yi(t)?r:zu(r,n(t))}function Zt(t){return null==t?t===ea?"[object Undefined]":"[object Null]":O&&O in E(t)?function(t){var e=S.call(t,O),n=t[O];try{t[O]=ea;var r=!0}catch(t){}var i=h.call(t);return r&&(e?t[O]=n:delete t[O]),i}(t):(e=t,h.call(e));var e}function te(t,e){return e<t}function ee(t,e){return null!=t&&S.call(t,e)}function ne(t,e){return null!=t&&e in E(t)}function re(t,e,n){for(var r=n?Lu:Uu,i=t[0].length,o=t.length,a=o,u=q(o),s=1/0,c=[];a--;){var l=t[a];a&&e&&(l=Fu(l,ns(e))),s=G(l.length,s),u[a]=!n&&(e||120<=i&&120<=l.length)?new _t(a&&l):ea}l=t[0];var f=-1,d=u[0];t:for(;++f<i&&c.length<s;){var p=l[f],h=e?e(p):p;if(p=n||0!==p?p:0,!(d?is(d,h):r(c,h,n))){for(a=o;--a;){var v=u[a];if(!(v?is(v,h):r(t[a],h,n)))continue t}d&&d.push(h),c.push(p)}}return c}function ie(t,e,n){var r=null==(t=nr(t,e=Ge(e,t)))?t:t[dr(Sr(e))];return null==r?ea:Tu(r,t,n)}function oe(t){return ji(t)&&Zt(t)==ca}function ae(t,e,n,r,i){return t===e||(null==t||null==e||!ji(t)&&!ji(e)?t!=t&&e!=e:function(t,e,n,r,i,o){var a=yi(t),u=yi(e),s=a?la:Bn(t),c=u?la:Bn(e),l=(s=s==ca?$a:s)==$a,f=(c=c==ca?$a:c)==$a,d=s==c;if(d&&xi(t)){if(!xi(e))return!1;l=!(a=!0)}if(d&&!l)return o||(o=new xt),a||Ni(t)?jn(t,e,n,r,i,o):function(t,e,n,r,i,o,a){switch(n){case Ca:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Sa:return!(t.byteLength!=e.byteLength||!o(new _(t),new _(e)));case fa:case da:case ma:return vi(+t,+e);case pa:return t.name==e.name&&t.message==e.message;case wa:case _a:return t==e+"";case ga:var u=fs;case ba:var s=1&r;if(u||(u=vs),t.size!=e.size&&!s)return!1;var c=a.get(t);if(c)return c==e;r|=2,a.set(t,e);var l=jn(u(t),u(e),r,i,o,a);return a.delete(t),l;case xa:if(dt)return dt.call(t)==dt.call(e)}return!1}(t,e,s,n,r,i,o);if(!(1&n)){var p=l&&S.call(t,"__wrapped__"),h=f&&S.call(e,"__wrapped__");if(p||h){var v=p?t.value():t,g=h?e.value():e;return o||(o=new xt),i(v,g,n,r,o)}}return!!d&&(o||(o=new xt),function(t,e,n,r,i,o){var a=1&n,u=Mn(t),s=u.length,c=Mn(e).length;if(s!=c&&!a)return!1;for(var l=s;l--;){var f=u[l];if(!(a?f in e:S.call(e,f)))return!1}var d=o.get(t);if(d&&o.get(e))return d==e;var p=!0;o.set(t,e),o.set(e,t);for(var h=a;++l<s;){f=u[l];var v=t[f],g=e[f];if(r)var m=a?r(g,v,f,e,t,o):r(v,g,f,t,e,o);if(!(m===ea?v===g||i(v,g,n,r,o):m)){p=!1;break}h||(h="constructor"==f)}if(p&&!h){var $=t.constructor,y=e.constructor;$!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof $&&$ instanceof $&&"function"==typeof y&&y instanceof y)&&(p=!1)}return o.delete(t),o.delete(e),p}(t,e,n,r,i,o))}(t,e,n,r,ae,i))}function ue(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=E(t);i--;){var u=n[i];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++i<o;){var s=(u=n[i])[0],c=t[s],l=u[1];if(a&&u[2]){if(c===ea&&!(s in t))return!1}else{var f=new xt;if(r)var d=r(c,l,s,t,e,f);if(!(d===ea?ae(l,c,3,r,f):d))return!1}}return!0}function se(t){return!(!Ai(t)||(e=t,p&&p in e))&&(Ci(t)?y:cu).test(pr(t));var e}function ce(t){return"function"==typeof t?t:null==t?To:"object"==typeof t?yi(t)?ve(t[0],t[1]):he(t):zo(t)}function le(t){if(!Kn(t))return W(t);var e=[];for(var n in E(t))S.call(t,n)&&"constructor"!=n&&e.push(n);return e}function fe(t){if(!Ai(t))return function(t){var e=[];if(null!=t)for(var n in E(t))e.push(n);return e}(t);var e=Kn(t),n=[];for(var r in t)("constructor"!=r||!e&&S.call(t,r))&&n.push(r);return n}function de(t,e){return t<e}function pe(t,r){var i=-1,o=bi(t)?q(t.length):[];return Lt(t,function(t,e,n){o[++i]=r(t,e,n)}),o}function he(e){var n=Un(e);return 1==n.length&&n[0][2]?tr(n[0][0],n[0][1]):function(t){return t===e||ue(t,e,n)}}function ve(n,r){return Yn(n)&&Zn(r)?tr(dr(n),r):function(t){var e=eo(t,n);return e===ea&&e===r?no(t,n):ae(r,e,3)}}function ge(r,i,o,a,u){r!==i&&Ht(i,function(t,e){if(Ai(t))u||(u=new xt),function(t,e,n,r,i,o,a){var u=hs(t,n),s=hs(e,n),c=a.get(s);if(c)return qt(t,n,c);var l=o?o(u,s,n+"",t,e,a):ea,f=l===ea;if(f){var d=yi(s),p=!d&&xi(s),h=!d&&!p&&Ni(s);l=s,d||p||h?l=yi(u)?u:_i(u)?rn(u):p?Je(s,!(f=!1)):h?Ze(s,!(f=!1)):[]:Ti(s)||$i(s)?$i(l=u)?l=Hi(u):(!Ai(u)||r&&Ci(u))&&(l=Wn(s)):f=!1}f&&(a.set(s,l),i(l,s,r,o,a),a.delete(s)),qt(t,n,l)}(r,i,e,o,ge,a,u);else{var n=a?a(hs(r,e),t,e+"",r,i,u):ea;n===ea&&(n=t),qt(r,e,n)}},uo)}function me(t,e){var n=t.length;if(n)return Gn(e+=e<0?n:0,n)?t[e]:ea}function $e(t,r,n){var i=-1;return r=Fu(r.length?r:[To],ns(In())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(pe(t,function(e,t,n){return{criteria:Fu(r,function(t){return t(e)}),index:++i,value:e}}),function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,u=n.length;++r<a;){var s=tn(i[r],o[r]);if(s){if(u<=r)return s;var c=n[r];return s*("desc"==c?-1:1)}}return t.index-e.index}(t,e,n)})}function ye(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],u=Jt(t,a);n(u,a)&&ke(o,Ge(a,t),u)}return o}function we(t,e,n,r){var i=r?Yu:Qu,o=-1,a=e.length,u=t;for(t===e&&(e=rn(e)),n&&(u=Fu(t,ns(n)));++o<a;)for(var s=0,c=e[o],l=n?n(c):c;-1<(s=i(u,l,s,r));)u!==t&&P.call(u,s,1),P.call(t,s,1);return t}function be(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;Gn(i)?P.call(t,i,1):Ue(t,i)}}return t}function _e(t,e){return t+L(X()*(e-t+1))}function xe(t,e){var n="";if(!t||e<1||oa<e)return n;for(;e%2&&(n+=t),(e=L(e/2))&&(t+=t),e;);return n}function Ee(t,e){return or(er(t,e,To),t+"")}function Se(t){return St(go(t))}function Ce(t,e){var n=go(t);return sr(n,Dt(e,0,n.length))}function ke(t,e,n,r){if(!Ai(t))return t;for(var i=-1,o=(e=Ge(e,t)).length,a=o-1,u=t;null!=u&&++i<o;){var s=dr(e[i]),c=n;if(i!=a){var l=u[s];(c=r?r(l,s,u):ea)===ea&&(c=Ai(l)?l:Gn(e[i+1])?[]:{})}At(u,s,c),u=u[s]}return t}var qe=it?function(t,e){return it.set(t,e),t}:To,Ae=D?function(t,e){return D(t,"toString",{configurable:!0,enumerable:!1,value:jo(e),writable:!0})}:To;function je(t){return sr(go(t))}function Pe(t,e,n){var r=-1,i=t.length;e<0&&(e=i<-e?0:i+e),(n=i<n?i:n)<0&&(n+=i),i=n<e?0:n-e>>>0,e>>>=0;for(var o=q(i);++r<i;)o[r]=t[r+e];return o}function Me(t,r){var i;return Lt(t,function(t,e,n){return!(i=r(t,e,n))}),!!i}function Te(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!Ii(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return Oe(t,e,To,n)}function Oe(t,e,n,r){e=n(e);for(var i=0,o=null==t?0:t.length,a=e!=e,u=null===e,s=Ii(e),c=e===ea;i<o;){var l=L((i+o)/2),f=n(t[l]),d=f!==ea,p=null===f,h=f==f,v=Ii(f);if(a)var g=r||h;else g=c?h&&(r||d):u?h&&d&&(r||!p):s?h&&d&&!p&&(r||!v):!p&&!v&&(r?f<=e:f<e);g?i=l+1:o=l}return G(o,4294967294)}function De(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],u=e?e(a):a;if(!n||!vi(u,s)){var s=u;o[i++]=0===a?0:a}}return o}function Re(t){return"number"==typeof t?t:Ii(t)?aa:+t}function Ie(t){if("string"==typeof t)return t;if(yi(t))return Fu(t,Ie)+"";if(Ii(t))return pt?pt.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Ne(t,e,n){var r=-1,i=Uu,o=t.length,a=!0,u=[],s=u;if(n)a=!1,i=Lu;else if(200<=o){var c=e?null:En(t);if(c)return vs(c);a=!1,i=is,s=new _t}else s=e?[]:u;t:for(;++r<o;){var l=t[r],f=e?e(l):l;if(l=n||0!==l?l:0,a&&f==f){for(var d=s.length;d--;)if(s[d]===f)continue t;e&&s.push(f),u.push(l)}else i(s,f,n)||(s!==u&&s.push(f),u.push(l))}return u}function Ue(t,e){return null==(t=nr(t,e=Ge(e,t)))||delete t[dr(Sr(e))]}function Le(t,e,n,r){return ke(t,e,n(Jt(t,e)),r)}function Fe(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?Pe(t,r?0:o,r?o+1:i):Pe(t,r?o+1:0,r?i:o)}function ze(t,e){var n=t;return n instanceof $t&&(n=n.value()),Bu(e,function(t,e){return e.func.apply(e.thisArg,zu([t],e.args))},n)}function Be(t,e,n){var r=t.length;if(r<2)return r?Ne(t[0]):[];for(var i=-1,o=q(r);++i<r;)for(var a=t[i],u=-1;++u<r;)u!=i&&(o[i]=Ut(o[i]||a,t[u],e,n));return Ne(Wt(o,1),e,n)}function Ve(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;){var u=r<o?e[r]:ea;n(a,t[r],u)}return a}function We(t){return _i(t)?t:[]}function He(t){return"function"==typeof t?t:To}function Ge(t,e){return yi(t)?t:Yn(t,e)?[t]:fr(Gi(t))}var Qe=Ee;function Ye(t,e,n){var r=t.length;return n=n===ea?r:n,!e&&r<=n?t:Pe(t,e,n)}var Xe=R||function(t){return Su.clearTimeout(t)};function Je(t,e){if(e)return t.slice();var n=t.length,r=x?x(n):new t.constructor(n);return t.copy(r),r}function Ke(t){var e=new t.constructor(t.byteLength);return new _(e).set(new _(t)),e}function Ze(t,e){var n=e?Ke(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function tn(t,e){if(t!==e){var n=t!==ea,r=null===t,i=t==t,o=Ii(t),a=e!==ea,u=null===e,s=e==e,c=Ii(e);if(!u&&!c&&!o&&e<t||o&&a&&s&&!u&&!c||r&&a&&s||!n&&s||!i)return 1;if(!r&&!o&&!c&&t<e||c&&n&&i&&!r&&!o||u&&n&&i||!a&&i||!s)return-1}return 0}function en(t,e,n,r){for(var i=-1,o=t.length,a=n.length,u=-1,s=e.length,c=H(o-a,0),l=q(s+c),f=!r;++u<s;)l[u]=e[u];for(;++i<a;)(f||i<o)&&(l[n[i]]=t[i]);for(;c--;)l[u++]=t[i++];return l}function nn(t,e,n,r){for(var i=-1,o=t.length,a=-1,u=n.length,s=-1,c=e.length,l=H(o-u,0),f=q(l+c),d=!r;++i<l;)f[i]=t[i];for(var p=i;++s<c;)f[p+s]=e[s];for(;++a<u;)(d||i<o)&&(f[p+n[a]]=t[i++]);return f}function rn(t,e){var n=-1,r=t.length;for(e||(e=q(r));++n<r;)e[n]=t[n];return e}function on(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var u=e[o],s=r?r(n[u],t[u],u,n,t):ea;s===ea&&(s=t[u]),i?Tt(n,u,s):At(n,u,s)}return n}function an(i,o){return function(t,e){var n=yi(t)?Ou:Pt,r=o?o():{};return n(t,i,In(e,2),r)}}function un(u){return Ee(function(t,e){var n=-1,r=e.length,i=1<r?e[r-1]:ea,o=2<r?e[2]:ea;for(i=3<u.length&&"function"==typeof i?(r--,i):ea,o&&Qn(e[0],e[1],o)&&(i=r<3?ea:i,r=1),t=E(t);++n<r;){var a=e[n];a&&u(t,a,n,i)}return t})}function sn(o,a){return function(t,e){if(null==t)return t;if(!bi(t))return o(t,e);for(var n=t.length,r=a?n:-1,i=E(t);(a?r--:++r<n)&&!1!==e(i[r],r,i););return t}}function cn(s){return function(t,e,n){for(var r=-1,i=E(t),o=n(t),a=o.length;a--;){var u=o[s?a:++r];if(!1===e(i[u],u,i))break}return t}}function ln(i){return function(t){var e=ls(t=Gi(t))?ms(t):ea,n=e?e[0]:t.charAt(0),r=e?Ye(e,1).join(""):t.slice(1);return n[i]()+r}}function fn(e){return function(t){return Bu(ko(yo(t).replace(vu,"")),e,"")}}function dn(r){return function(){var t=arguments;switch(t.length){case 0:return new r;case 1:return new r(t[0]);case 2:return new r(t[0],t[1]);case 3:return new r(t[0],t[1],t[2]);case 4:return new r(t[0],t[1],t[2],t[3]);case 5:return new r(t[0],t[1],t[2],t[3],t[4]);case 6:return new r(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new r(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var e=vt(r.prototype),n=r.apply(e,t);return Ai(n)?n:e}}function pn(a){return function(t,e,n){var r=E(t);if(!bi(t)){var i=In(e,3);t=ao(t),e=function(t){return i(r[t],t,r)}}var o=a(t,e,n);return-1<o?r[i?t[o]:o]:ea}}function hn(s){return Pn(function(i){var o=i.length,t=o,e=mt.prototype.thru;for(s&&i.reverse();t--;){var n=i[t];if("function"!=typeof n)throw new A(na);if(e&&!a&&"wrapper"==Dn(n))var a=new mt([],!0)}for(t=a?t:o;++t<o;){var r=Dn(n=i[t]),u="wrapper"==r?On(n):ea;a=u&&Xn(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?a[Dn(u[0])].apply(a,u[3]):1==n.length&&Xn(n)?a[r]():a.thru(n)}return function(){var t=arguments,e=t[0];if(a&&1==t.length&&yi(e))return a.plant(e).value();for(var n=0,r=o?i[n].apply(this,t):e;++n<o;)r=i[n].call(this,r);return r}})}function vn(c,l,f,d,p,h,v,g,m,$){var y=128&l,w=1&l,b=2&l,_=24&l,x=512&l,E=b?ea:dn(c);return function t(){for(var e=arguments.length,n=q(e),r=e;r--;)n[r]=arguments[r];if(_)var i=Rn(t),o=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(n,i);if(d&&(n=en(n,d,p,_)),h&&(n=nn(n,h,v,_)),e-=o,_&&e<$){var a=ps(n,i);return _n(c,l,vn,t.placeholder,f,n,a,g,m,$-e)}var u=w?f:this,s=b?u[c]:c;return e=n.length,g?n=function(t,e){for(var n=t.length,r=G(e.length,n),i=rn(t);r--;){var o=e[r];t[r]=Gn(o,n)?i[o]:ea}return t}(n,g):x&&1<e&&n.reverse(),y&&m<e&&(n.length=m),this&&this!==Su&&this instanceof t&&(s=E||dn(s)),s.apply(u,n)}}function gn(a,u){return function(t,e){return n=t,r=a,i=u(e),o={},Qt(n,function(t,e,n){r(o,i(t),e,n)}),o;var n,r,i,o}}function mn(r,i){return function(t,e){var n;if(t===ea&&e===ea)return i;if(t!==ea&&(n=t),e!==ea){if(n===ea)return e;"string"==typeof t||"string"==typeof e?(t=Ie(t),e=Ie(e)):(t=Re(t),e=Re(e)),n=r(t,e)}return n}}function $n(r){return Pn(function(t){return t=Fu(t,ns(In())),Ee(function(e){var n=this;return r(t,function(t){return Tu(t,n,e)})})})}function yn(t,e){var n=(e=e===ea?" ":Ie(e)).length;if(n<2)return n?xe(e,t):e;var r=xe(e,U(t/gs(e)));return ls(e)?Ye(ms(r),0,t).join(""):r.slice(0,t)}function wn(r){return function(t,e,n){return n&&"number"!=typeof n&&Qn(t,e,n)&&(e=n=ea),t=zi(t),e===ea?(e=t,t=0):e=zi(e),function(t,e,n,r){for(var i=-1,o=H(U((e-t)/(n||1)),0),a=q(o);o--;)a[r?o:++i]=t,t+=n;return a}(t,e,n=n===ea?t<e?1:-1:zi(n),r)}}function bn(n){return function(t,e){return"string"==typeof t&&"string"==typeof e||(t=Wi(t),e=Wi(e)),n(t,e)}}function _n(t,e,n,r,i,o,a,u,s,c){var l=8&e;e|=l?32:64,4&(e&=~(l?64:32))||(e&=-4);var f=[t,e,i,l?o:ea,l?a:ea,l?ea:o,l?ea:a,u,s,c],d=n.apply(ea,f);return Xn(t)&&rr(d,f),d.placeholder=r,ar(d,t,e)}function xn(t){var r=o[t];return function(t,e){if(t=Wi(t),e=null==e?0:G(Bi(e),292)){var n=(Gi(t)+"e").split("e");return+((n=(Gi(r(n[0]+"e"+(+n[1]+e)))+"e").split("e"))[0]+"e"+(+n[1]-e))}return r(t)}}var En=et&&1/vs(new et([,-0]))[1]==1/0?function(t){return new et(t)}:No;function Sn(a){return function(t){var e,n,r,i,o=Bn(t);return o==ga?fs(t):o==ba?(e=t,n=-1,r=Array(e.size),e.forEach(function(t){r[++n]=[t,t]}),r):Fu(a(i=t),function(t){return[t,i[t]]})}}function Cn(t,e,n,r,i,o,a,u){var s=2&e;if(!s&&"function"!=typeof t)throw new A(na);var c=r?r.length:0;if(c||(e&=-97,r=i=ea),a=a===ea?a:H(Bi(a),0),u=u===ea?u:Bi(u),c-=i?i.length:0,64&e){var l=r,f=i;r=i=ea}var d,p,h,v,g,m,$,y,w,b,_,x,E,S=s?ea:On(t),C=[t,e,n,r,i,l,f,o,a,u];if(S&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,a=128==r&&8==n||128==r&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(o||a){1&r&&(t[2]=e[2],i|=1&n?0:4);var u=e[3];if(u){var s=t[3];t[3]=s?en(s,u,e[4]):u,t[4]=s?ps(t[3],ia):e[4]}(u=e[5])&&(s=t[5],t[5]=s?nn(s,u,e[6]):u,t[6]=s?ps(t[5],ia):e[6]),(u=e[7])&&(t[7]=u),128&r&&(t[8]=null==t[8]?e[8]:G(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}}(C,S),t=C[0],e=C[1],n=C[2],r=C[3],i=C[4],!(u=C[9]=C[9]===ea?s?0:t.length:H(C[9]-c,0))&&24&e&&(e&=-25),e&&1!=e)8==e||16==e?($=e,y=u,w=dn(m=t),k=function t(){for(var e=arguments.length,n=q(e),r=e,i=Rn(t);r--;)n[r]=arguments[r];var o=e<3&&n[0]!==i&&n[e-1]!==i?[]:ps(n,i);return(e-=o.length)<y?_n(m,$,vn,t.placeholder,ea,n,o,ea,ea,y-e):Tu(this&&this!==Su&&this instanceof t?w:m,this,n)}):32!=e&&33!=e||i.length?k=vn.apply(ea,C):(p=n,h=r,v=1&e,g=dn(d=t),k=function t(){for(var e=-1,n=arguments.length,r=-1,i=h.length,o=q(i+n),a=this&&this!==Su&&this instanceof t?g:d;++r<i;)o[r]=h[r];for(;n--;)o[r++]=arguments[++e];return Tu(a,v?p:this,o)});else var k=(_=n,x=1&e,E=dn(b=t),function t(){return(this&&this!==Su&&this instanceof t?E:b).apply(x?_:this,arguments)});return ar((S?qe:rr)(k,C),t,e)}function kn(t,e,n,r){return t===ea||vi(t,f[n])&&!S.call(r,n)?e:t}function qn(t,e,n,r,i,o){return Ai(t)&&Ai(e)&&(o.set(e,t),ge(t,e,ea,qn,o),o.delete(e)),t}function An(t){return Ti(t)?ea:t}function jn(t,e,n,r,i,o){var a=1&n,u=t.length,s=e.length;if(u!=s&&!(a&&u<s))return!1;var c=o.get(t);if(c&&o.get(e))return c==e;var l=-1,f=!0,d=2&n?new _t:ea;for(o.set(t,e),o.set(e,t);++l<u;){var p=t[l],h=e[l];if(r)var v=a?r(h,p,l,e,t,o):r(p,h,l,t,e,o);if(v!==ea){if(v)continue;f=!1;break}if(d){if(!Wu(e,function(t,e){if(!is(d,e)&&(p===t||i(p,t,n,r,o)))return d.push(e)})){f=!1;break}}else if(p!==h&&!i(p,h,n,r,o)){f=!1;break}}return o.delete(t),o.delete(e),f}function Pn(t){return or(er(t,ea,wr),t+"")}function Mn(t){return Kt(t,ao,Fn)}function Tn(t){return Kt(t,uo,zn)}var On=it?function(t){return it.get(t)}:No;function Dn(t){for(var e=t.name+"",n=ot[e],r=S.call(ot,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function Rn(t){return(S.call(ht,"placeholder")?ht:t).placeholder}function In(){var t=ht.iteratee||Oo;return t=t===Oo?ce:t,arguments.length?t(arguments[0],arguments[1]):t}function Nn(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function Un(t){for(var e=ao(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Zn(i)]}return e}function Ln(t,e){var n,r,i=(r=e,null==(n=t)?ea:n[r]);return se(i)?i:ea}var Fn=F?function(e){return null==e?[]:(e=E(e),Nu(F(e),function(t){return j.call(e,t)}))}:Wo,zn=F?function(t){for(var e=[];t;)zu(e,Fn(t)),t=C(t);return e}:Wo,Bn=Zt;function Vn(t,e,n){for(var r=-1,i=(e=Ge(e,t)).length,o=!1;++r<i;){var a=dr(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&qi(i)&&Gn(a,i)&&(yi(t)||$i(t))}function Wn(t){return"function"!=typeof t.constructor||Kn(t)?{}:vt(C(t))}function Hn(t){return yi(t)||$i(t)||!!(M&&t&&t[M])}function Gn(t,e){var n=typeof t;return!!(e=null==e?oa:e)&&("number"==n||"symbol"!=n&&fu.test(t))&&-1<t&&t%1==0&&t<e}function Qn(t,e,n){if(!Ai(n))return!1;var r=typeof e;return!!("number"==r?bi(n)&&Gn(e,n.length):"string"==r&&e in n)&&vi(n[e],t)}function Yn(t,e){if(yi(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Ii(t))||Ga.test(t)||!Ha.test(t)||null!=e&&t in E(e)}function Xn(t){var e=Dn(t),n=ht[e];if("function"!=typeof n||!(e in $t.prototype))return!1;if(t===n)return!0;var r=On(n);return!!r&&t===r[0]}(K&&Bn(new K(new ArrayBuffer(1)))!=Ca||Z&&Bn(new Z)!=ga||tt&&Bn(tt.resolve())!=ya||et&&Bn(new et)!=ba||nt&&Bn(new nt)!=Ea)&&(Bn=function(t){var e=Zt(t),n=e==$a?t.constructor:ea,r=n?pr(n):"";if(r)switch(r){case at:return Ca;case ut:return ga;case st:return ya;case ct:return ba;case lt:return Ea}return e});var Jn=s?Ci:Ho;function Kn(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||f)}function Zn(t){return t==t&&!Ai(t)}function tr(e,n){return function(t){return null!=t&&t[e]===n&&(n!==ea||e in E(t))}}function er(o,a,u){return a=H(a===ea?o.length-1:a,0),function(){for(var t=arguments,e=-1,n=H(t.length-a,0),r=q(n);++e<n;)r[e]=t[a+e];e=-1;for(var i=q(a+1);++e<a;)i[e]=t[e];return i[a]=u(r),Tu(o,this,i)}}function nr(t,e){return e.length<2?t:Jt(t,Pe(e,0,-1))}var rr=ur(qe),ir=N||function(t,e){return Su.setTimeout(t,e)},or=ur(Ae);function ar(t,e,n){var r,i,o,a=e+"";return or(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(1<n?"& ":"")+e[r],e=e.join(2<n?", ":" "),t.replace(tu,"{\n/* [wrapped with "+e+"] */\n")}(a,(o=a.match(eu),r=o?o[1].split(nu):[],i=n,Du(sa,function(t){var e="_."+t[0];i&t[1]&&!Uu(r,e)&&r.push(e)}),r.sort())))}function ur(n){var r=0,i=0;return function(){var t=Q(),e=16-(t-i);if(i=t,0<e){if(800<=++r)return arguments[0]}else r=0;return n.apply(ea,arguments)}}function sr(t,e){var n=-1,r=t.length,i=r-1;for(e=e===ea?r:e;++n<e;){var o=_e(n,i),a=t[o];t[o]=t[n],t[n]=a}return t.length=e,t}var cr,lr,fr=(lr=(cr=ci(function(t){var i=[];return 46===t.charCodeAt(0)&&i.push(""),t.replace(Qa,function(t,e,n,r){i.push(n?r.replace(iu,"$1"):e||t)}),i},function(t){return 500===lr.size&&lr.clear(),t})).cache,cr);function dr(t){if("string"==typeof t||Ii(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function pr(t){if(null!=t){try{return c.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function hr(t){if(t instanceof $t)return t.clone();var e=new mt(t.__wrapped__,t.__chain__);return e.__actions__=rn(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var vr=Ee(function(t,e){return _i(t)?Ut(t,Wt(e,1,_i,!0)):[]}),gr=Ee(function(t,e){var n=Sr(e);return _i(n)&&(n=ea),_i(t)?Ut(t,Wt(e,1,_i,!0),In(n,2)):[]}),mr=Ee(function(t,e){var n=Sr(e);return _i(n)&&(n=ea),_i(t)?Ut(t,Wt(e,1,_i,!0),ea,n):[]});function $r(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Bi(n);return i<0&&(i=H(r+i,0)),Gu(t,In(e,3),i)}function yr(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return n!==ea&&(i=Bi(n),i=n<0?H(r+i,0):G(i,r-1)),Gu(t,In(e,3),i,!0)}function wr(t){return null!=t&&t.length?Wt(t,1):[]}function br(t){return t&&t.length?t[0]:ea}var _r=Ee(function(t){var e=Fu(t,We);return e.length&&e[0]===t[0]?re(e):[]}),xr=Ee(function(t){var e=Sr(t),n=Fu(t,We);return e===Sr(n)?e=ea:n.pop(),n.length&&n[0]===t[0]?re(n,In(e,2)):[]}),Er=Ee(function(t){var e=Sr(t),n=Fu(t,We);return(e="function"==typeof e?e:ea)&&n.pop(),n.length&&n[0]===t[0]?re(n,ea,e):[]});function Sr(t){var e=null==t?0:t.length;return e?t[e-1]:ea}var Cr=Ee(kr);function kr(t,e){return t&&t.length&&e&&e.length?we(t,e):t}var qr=Pn(function(t,e){var n=null==t?0:t.length,r=Ot(t,e);return be(t,Fu(e,function(t){return Gn(t,n)?+t:t}).sort(tn)),r});function Ar(t){return null==t?t:J.call(t)}var jr=Ee(function(t){return Ne(Wt(t,1,_i,!0))}),Pr=Ee(function(t){var e=Sr(t);return _i(e)&&(e=ea),Ne(Wt(t,1,_i,!0),In(e,2))}),Mr=Ee(function(t){var e=Sr(t);return e="function"==typeof e?e:ea,Ne(Wt(t,1,_i,!0),ea,e)});function Tr(e){if(!e||!e.length)return[];var n=0;return e=Nu(e,function(t){if(_i(t))return n=H(t.length,n),!0}),es(n,function(t){return Fu(e,Ku(t))})}function Or(t,e){if(!t||!t.length)return[];var n=Tr(t);return null==e?n:Fu(n,function(t){return Tu(e,ea,t)})}var Dr=Ee(function(t,e){return _i(t)?Ut(t,e):[]}),Rr=Ee(function(t){return Be(Nu(t,_i))}),Ir=Ee(function(t){var e=Sr(t);return _i(e)&&(e=ea),Be(Nu(t,_i),In(e,2))}),Nr=Ee(function(t){var e=Sr(t);return e="function"==typeof e?e:ea,Be(Nu(t,_i),ea,e)}),Ur=Ee(Tr);var Lr=Ee(function(t){var e=t.length,n=1<e?t[e-1]:ea;return Or(t,n="function"==typeof n?(t.pop(),n):ea)});function Fr(t){var e=ht(t);return e.__chain__=!0,e}function zr(t,e){return e(t)}var Br=Pn(function(e){var n=e.length,t=n?e[0]:0,r=this.__wrapped__,i=function(t){return Ot(t,e)};return!(1<n||this.__actions__.length)&&r instanceof $t&&Gn(t)?((r=r.slice(t,+t+(n?1:0))).__actions__.push({func:zr,args:[i],thisArg:ea}),new mt(r,this.__chain__).thru(function(t){return n&&!t.length&&t.push(ea),t})):this.thru(i)});var Vr=an(function(t,e,n){S.call(t,n)?++t[n]:Tt(t,n,1)});var Wr=pn($r),Hr=pn(yr);function Gr(t,e){return(yi(t)?Du:Lt)(t,In(e,3))}function Qr(t,e){return(yi(t)?Ru:Ft)(t,In(e,3))}var Yr=an(function(t,e,n){S.call(t,n)?t[n].push(e):Tt(t,n,[e])});var Xr=Ee(function(t,e,n){var r=-1,i="function"==typeof e,o=bi(t)?q(t.length):[];return Lt(t,function(t){o[++r]=i?Tu(e,t,n):ie(t,e,n)}),o}),Jr=an(function(t,e,n){Tt(t,n,e)});function Kr(t,e){return(yi(t)?Fu:pe)(t,In(e,3))}var Zr=an(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});var ti=Ee(function(t,e){if(null==t)return[];var n=e.length;return 1<n&&Qn(t,e[0],e[1])?e=[]:2<n&&Qn(e[0],e[1],e[2])&&(e=[e[0]]),$e(t,Wt(e,1),[])}),ei=I||function(){return Su.Date.now()};function ni(t,e,n){return e=n?ea:e,e=t&&null==e?t.length:e,Cn(t,128,ea,ea,ea,ea,e)}function ri(t,e){var n;if("function"!=typeof e)throw new A(na);return t=Bi(t),function(){return 0<--t&&(n=e.apply(this,arguments)),t<=1&&(e=ea),n}}var ii=Ee(function(t,e,n){var r=1;if(n.length){var i=ps(n,Rn(ii));r|=32}return Cn(t,r,e,n,i)}),oi=Ee(function(t,e,n){var r=3;if(n.length){var i=ps(n,Rn(oi));r|=32}return Cn(e,r,t,n,i)});function ai(r,i,t){var o,a,u,s,c,l,f=0,d=!1,p=!1,e=!0;if("function"!=typeof r)throw new A(na);function h(t){var e=o,n=a;return o=a=ea,f=t,s=r.apply(n,e)}function v(t){var e=t-l;return l===ea||i<=e||e<0||p&&u<=t-f}function g(){var t,e,n=ei();if(v(n))return m(n);c=ir(g,(e=i-((t=n)-l),p?G(e,u-(t-f)):e))}function m(t){return c=ea,e&&o?h(t):(o=a=ea,s)}function n(){var t,e=ei(),n=v(e);if(o=arguments,a=this,l=e,n){if(c===ea)return f=t=l,c=ir(g,i),d?h(t):s;if(p)return c=ir(g,i),h(l)}return c===ea&&(c=ir(g,i)),s}return i=Wi(i)||0,Ai(t)&&(d=!!t.leading,u=(p="maxWait"in t)?H(Wi(t.maxWait)||0,i):u,e="trailing"in t?!!t.trailing:e),n.cancel=function(){c!==ea&&Xe(c),f=0,o=l=a=c=ea},n.flush=function(){return c===ea?s:m(ei())},n}var ui=Ee(function(t,e){return Nt(t,1,e)}),si=Ee(function(t,e,n){return Nt(t,Wi(e)||0,n)});function ci(i,o){if("function"!=typeof i||null!=o&&"function"!=typeof o)throw new A(na);var a=function(){var t=arguments,e=o?o.apply(this,t):t[0],n=a.cache;if(n.has(e))return n.get(e);var r=i.apply(this,t);return a.cache=n.set(e,r)||n,r};return a.cache=new(ci.Cache||bt),a}function li(e){if("function"!=typeof e)throw new A(na);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}ci.Cache=bt;var fi=Qe(function(r,i){var o=(i=1==i.length&&yi(i[0])?Fu(i[0],ns(In())):Fu(Wt(i,1),ns(In()))).length;return Ee(function(t){for(var e=-1,n=G(t.length,o);++e<n;)t[e]=i[e].call(this,t[e]);return Tu(r,this,t)})}),di=Ee(function(t,e){var n=ps(e,Rn(di));return Cn(t,32,ea,e,n)}),pi=Ee(function(t,e){var n=ps(e,Rn(pi));return Cn(t,64,ea,e,n)}),hi=Pn(function(t,e){return Cn(t,256,ea,ea,ea,e)});function vi(t,e){return t===e||t!=t&&e!=e}var gi=bn(te),mi=bn(function(t,e){return e<=t}),$i=oe(function(){return arguments}())?oe:function(t){return ji(t)&&S.call(t,"callee")&&!j.call(t,"callee")},yi=q.isArray,wi=ku?ns(ku):function(t){return ji(t)&&Zt(t)==Sa};function bi(t){return null!=t&&qi(t.length)&&!Ci(t)}function _i(t){return ji(t)&&bi(t)}var xi=z||Ho,Ei=qu?ns(qu):function(t){return ji(t)&&Zt(t)==da};function Si(t){if(!ji(t))return!1;var e=Zt(t);return e==pa||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!Ti(t)}function Ci(t){if(!Ai(t))return!1;var e=Zt(t);return e==ha||e==va||"[object AsyncFunction]"==e||"[object Proxy]"==e}function ki(t){return"number"==typeof t&&t==Bi(t)}function qi(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=oa}function Ai(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ji(t){return null!=t&&"object"==typeof t}var Pi=Au?ns(Au):function(t){return ji(t)&&Bn(t)==ga};function Mi(t){return"number"==typeof t||ji(t)&&Zt(t)==ma}function Ti(t){if(!ji(t)||Zt(t)!=$a)return!1;var e=C(t);if(null===e)return!0;var n=S.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==v}var Oi=ju?ns(ju):function(t){return ji(t)&&Zt(t)==wa};var Di=Pu?ns(Pu):function(t){return ji(t)&&Bn(t)==ba};function Ri(t){return"string"==typeof t||!yi(t)&&ji(t)&&Zt(t)==_a}function Ii(t){return"symbol"==typeof t||ji(t)&&Zt(t)==xa}var Ni=Mu?ns(Mu):function(t){return ji(t)&&qi(t.length)&&!!bu[Zt(t)]};var Ui=bn(de),Li=bn(function(t,e){return t<=e});function Fi(t){if(!t)return[];if(bi(t))return Ri(t)?ms(t):rn(t);if(T&&t[T])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[T]());var e=Bn(t);return(e==ga?fs:e==ba?vs:go)(t)}function zi(t){return t?(t=Wi(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function Bi(t){var e=zi(t),n=e%1;return e==e?n?e-n:e:0}function Vi(t){return t?Dt(Bi(t),0,ua):0}function Wi(t){if("number"==typeof t)return t;if(Ii(t))return aa;if(Ai(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Ai(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Ja,"");var n=su.test(t);return n||lu.test(t)?Eu(t.slice(2),n?2:8):uu.test(t)?aa:+t}function Hi(t){return on(t,uo(t))}function Gi(t){return null==t?"":Ie(t)}var Qi=un(function(t,e){if(Kn(e)||bi(e))on(e,ao(e),t);else for(var n in e)S.call(e,n)&&At(t,n,e[n])}),Yi=un(function(t,e){on(e,uo(e),t)}),Xi=un(function(t,e,n,r){on(e,uo(e),t,r)}),Ji=un(function(t,e,n,r){on(e,ao(e),t,r)}),Ki=Pn(Ot);var Zi=Ee(function(t,e){t=E(t);var n=-1,r=e.length,i=2<r?e[2]:ea;for(i&&Qn(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],a=uo(o),u=-1,s=a.length;++u<s;){var c=a[u],l=t[c];(l===ea||vi(l,f[c])&&!S.call(t,c))&&(t[c]=o[c])}return t}),to=Ee(function(t){return t.push(ea,qn),Tu(co,ea,t)});function eo(t,e,n){var r=null==t?ea:Jt(t,e);return r===ea?n:r}function no(t,e){return null!=t&&Vn(t,e,ne)}var ro=gn(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=h.call(e)),t[e]=n},jo(To)),io=gn(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=h.call(e)),S.call(t,e)?t[e].push(n):t[e]=[n]},In),oo=Ee(ie);function ao(t){return bi(t)?Et(t):le(t)}function uo(t){return bi(t)?Et(t,!0):fe(t)}var so=un(function(t,e,n){ge(t,e,n)}),co=un(function(t,e,n,r){ge(t,e,n,r)}),lo=Pn(function(e,t){var n={};if(null==e)return n;var r=!1;t=Fu(t,function(t){return t=Ge(t,e),r||(r=1<t.length),t}),on(e,Tn(e),n),r&&(n=Rt(n,7,An));for(var i=t.length;i--;)Ue(n,t[i]);return n});var fo=Pn(function(t,e){return null==t?{}:ye(n=t,e,function(t,e){return no(n,e)});var n});function po(t,n){if(null==t)return{};var e=Fu(Tn(t),function(t){return[t]});return n=In(n),ye(t,e,function(t,e){return n(t,e[0])})}var ho=Sn(ao),vo=Sn(uo);function go(t){return null==t?[]:rs(t,ao(t))}var mo=fn(function(t,e,n){return e=e.toLowerCase(),t+(n?$o(e):e)});function $o(t){return Co(Gi(t).toLowerCase())}function yo(t){return(t=Gi(t))&&t.replace(du,us).replace(gu,"")}var wo=fn(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),bo=fn(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),_o=ln("toLowerCase");var xo=fn(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()});var Eo=fn(function(t,e,n){return t+(n?" ":"")+Co(e)});var So=fn(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Co=ln("toUpperCase");function ko(t,e,n){return t=Gi(t),(e=n?ea:e)===ea?(r=t,$u.test(r)?t.match(mu)||[]:t.match(ru)||[]):t.match(e)||[];var r}var qo=Ee(function(t,e){try{return Tu(t,ea,e)}catch(t){return Si(t)?t:new i(t)}}),Ao=Pn(function(e,t){return Du(t,function(t){t=dr(t),Tt(e,t,ii(e[t],e))}),e});function jo(t){return function(){return t}}var Po=hn(),Mo=hn(!0);function To(t){return t}function Oo(t){return ce("function"==typeof t?t:Rt(t,1))}var Do=Ee(function(e,n){return function(t){return ie(t,e,n)}}),Ro=Ee(function(e,n){return function(t){return ie(e,t,n)}});function Io(r,e,t){var n=ao(e),i=Xt(e,n);null!=t||Ai(e)&&(i.length||!n.length)||(t=e,e=r,r=this,i=Xt(e,ao(e)));var o=!(Ai(t)&&"chain"in t&&!t.chain),a=Ci(r);return Du(i,function(t){var n=e[t];r[t]=n,a&&(r.prototype[t]=function(){var t=this.__chain__;if(o||t){var e=r(this.__wrapped__);return(e.__actions__=rn(this.__actions__)).push({func:n,args:arguments,thisArg:r}),e.__chain__=t,e}return n.apply(r,zu([this.value()],arguments))})}),r}function No(){}var Uo=$n(Fu),Lo=$n(Iu),Fo=$n(Wu);function zo(t){return Yn(t)?Ku(dr(t)):(e=t,function(t){return Jt(t,e)});var e}var Bo=wn(),Vo=wn(!0);function Wo(){return[]}function Ho(){return!1}var Go=mn(function(t,e){return t+e},0),Qo=xn("ceil"),Yo=mn(function(t,e){return t/e},1),Xo=xn("floor");var Jo,Ko=mn(function(t,e){return t*e},1),Zo=xn("round"),ta=mn(function(t,e){return t-e},0);return ht.after=function(t,e){if("function"!=typeof e)throw new A(na);return t=Bi(t),function(){if(--t<1)return e.apply(this,arguments)}},ht.ary=ni,ht.assign=Qi,ht.assignIn=Yi,ht.assignInWith=Xi,ht.assignWith=Ji,ht.at=Ki,ht.before=ri,ht.bind=ii,ht.bindAll=Ao,ht.bindKey=oi,ht.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return yi(t)?t:[t]},ht.chain=Fr,ht.chunk=function(t,e,n){e=(n?Qn(t,e,n):e===ea)?1:H(Bi(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var i=0,o=0,a=q(U(r/e));i<r;)a[o++]=Pe(t,i,i+=e);return a},ht.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},ht.concat=function(){var t=arguments.length;if(!t)return[];for(var e=q(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return zu(yi(n)?rn(n):[n],Wt(e,1))},ht.cond=function(r){var i=null==r?0:r.length,e=In();return r=i?Fu(r,function(t){if("function"!=typeof t[1])throw new A(na);return[e(t[0]),t[1]]}):[],Ee(function(t){for(var e=-1;++e<i;){var n=r[e];if(Tu(n[0],this,t))return Tu(n[1],this,t)}})},ht.conforms=function(t){return e=Rt(t,1),n=ao(e),function(t){return It(t,e,n)};var e,n},ht.constant=jo,ht.countBy=Vr,ht.create=function(t,e){var n=vt(t);return null==e?n:Mt(n,e)},ht.curry=function t(e,n,r){var i=Cn(e,8,ea,ea,ea,ea,ea,n=r?ea:n);return i.placeholder=t.placeholder,i},ht.curryRight=function t(e,n,r){var i=Cn(e,16,ea,ea,ea,ea,ea,n=r?ea:n);return i.placeholder=t.placeholder,i},ht.debounce=ai,ht.defaults=Zi,ht.defaultsDeep=to,ht.defer=ui,ht.delay=si,ht.difference=vr,ht.differenceBy=gr,ht.differenceWith=mr,ht.drop=function(t,e,n){var r=null==t?0:t.length;return r?Pe(t,(e=n||e===ea?1:Bi(e))<0?0:e,r):[]},ht.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?Pe(t,0,(e=r-(e=n||e===ea?1:Bi(e)))<0?0:e):[]},ht.dropRightWhile=function(t,e){return t&&t.length?Fe(t,In(e,3),!0,!0):[]},ht.dropWhile=function(t,e){return t&&t.length?Fe(t,In(e,3),!0):[]},ht.fill=function(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Qn(t,e,n)&&(n=0,r=i),function(t,e,n,r){var i=t.length;for((n=Bi(n))<0&&(n=i<-n?0:i+n),(r=r===ea||i<r?i:Bi(r))<0&&(r+=i),r=r<n?0:Vi(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},ht.filter=function(t,e){return(yi(t)?Nu:Vt)(t,In(e,3))},ht.flatMap=function(t,e){return Wt(Kr(t,e),1)},ht.flatMapDeep=function(t,e){return Wt(Kr(t,e),1/0)},ht.flatMapDepth=function(t,e,n){return n=n===ea?1:Bi(n),Wt(Kr(t,e),n)},ht.flatten=wr,ht.flattenDeep=function(t){return null!=t&&t.length?Wt(t,1/0):[]},ht.flattenDepth=function(t,e){return null!=t&&t.length?Wt(t,e=e===ea?1:Bi(e)):[]},ht.flip=function(t){return Cn(t,512)},ht.flow=Po,ht.flowRight=Mo,ht.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},ht.functions=function(t){return null==t?[]:Xt(t,ao(t))},ht.functionsIn=function(t){return null==t?[]:Xt(t,uo(t))},ht.groupBy=Yr,ht.initial=function(t){return null!=t&&t.length?Pe(t,0,-1):[]},ht.intersection=_r,ht.intersectionBy=xr,ht.intersectionWith=Er,ht.invert=ro,ht.invertBy=io,ht.invokeMap=Xr,ht.iteratee=Oo,ht.keyBy=Jr,ht.keys=ao,ht.keysIn=uo,ht.map=Kr,ht.mapKeys=function(t,r){var i={};return r=In(r,3),Qt(t,function(t,e,n){Tt(i,r(t,e,n),t)}),i},ht.mapValues=function(t,r){var i={};return r=In(r,3),Qt(t,function(t,e,n){Tt(i,e,r(t,e,n))}),i},ht.matches=function(t){return he(Rt(t,1))},ht.matchesProperty=function(t,e){return ve(t,Rt(e,1))},ht.memoize=ci,ht.merge=so,ht.mergeWith=co,ht.method=Do,ht.methodOf=Ro,ht.mixin=Io,ht.negate=li,ht.nthArg=function(e){return e=Bi(e),Ee(function(t){return me(t,e)})},ht.omit=lo,ht.omitBy=function(t,e){return po(t,li(In(e)))},ht.once=function(t){return ri(2,t)},ht.orderBy=function(t,e,n,r){return null==t?[]:(yi(e)||(e=null==e?[]:[e]),yi(n=r?ea:n)||(n=null==n?[]:[n]),$e(t,e,n))},ht.over=Uo,ht.overArgs=fi,ht.overEvery=Lo,ht.overSome=Fo,ht.partial=di,ht.partialRight=pi,ht.partition=Zr,ht.pick=fo,ht.pickBy=po,ht.property=zo,ht.propertyOf=function(e){return function(t){return null==e?ea:Jt(e,t)}},ht.pull=Cr,ht.pullAll=kr,ht.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?we(t,e,In(n,2)):t},ht.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?we(t,e,ea,n):t},ht.pullAt=qr,ht.range=Bo,ht.rangeRight=Vo,ht.rearg=hi,ht.reject=function(t,e){return(yi(t)?Nu:Vt)(t,li(In(e,3)))},ht.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=In(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return be(t,i),n},ht.rest=function(t,e){if("function"!=typeof t)throw new A(na);return Ee(t,e=e===ea?e:Bi(e))},ht.reverse=Ar,ht.sampleSize=function(t,e,n){return e=(n?Qn(t,e,n):e===ea)?1:Bi(e),(yi(t)?Ct:Ce)(t,e)},ht.set=function(t,e,n){return null==t?t:ke(t,e,n)},ht.setWith=function(t,e,n,r){return r="function"==typeof r?r:ea,null==t?t:ke(t,e,n,r)},ht.shuffle=function(t){return(yi(t)?kt:je)(t)},ht.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&Qn(t,e,n)?(e=0,n=r):(e=null==e?0:Bi(e),n=n===ea?r:Bi(n)),Pe(t,e,n)):[]},ht.sortBy=ti,ht.sortedUniq=function(t){return t&&t.length?De(t):[]},ht.sortedUniqBy=function(t,e){return t&&t.length?De(t,In(e,2)):[]},ht.split=function(t,e,n){return n&&"number"!=typeof n&&Qn(t,e,n)&&(e=n=ea),(n=n===ea?ua:n>>>0)?(t=Gi(t))&&("string"==typeof e||null!=e&&!Oi(e))&&!(e=Ie(e))&&ls(t)?Ye(ms(t),0,n):t.split(e,n):[]},ht.spread=function(r,i){if("function"!=typeof r)throw new A(na);return i=null==i?0:H(Bi(i),0),Ee(function(t){var e=t[i],n=Ye(t,0,i);return e&&zu(n,e),Tu(r,this,n)})},ht.tail=function(t){var e=null==t?0:t.length;return e?Pe(t,1,e):[]},ht.take=function(t,e,n){return t&&t.length?Pe(t,0,(e=n||e===ea?1:Bi(e))<0?0:e):[]},ht.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?Pe(t,(e=r-(e=n||e===ea?1:Bi(e)))<0?0:e,r):[]},ht.takeRightWhile=function(t,e){return t&&t.length?Fe(t,In(e,3),!1,!0):[]},ht.takeWhile=function(t,e){return t&&t.length?Fe(t,In(e,3)):[]},ht.tap=function(t,e){return e(t),t},ht.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new A(na);return Ai(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),ai(t,e,{leading:r,maxWait:e,trailing:i})},ht.thru=zr,ht.toArray=Fi,ht.toPairs=ho,ht.toPairsIn=vo,ht.toPath=function(t){return yi(t)?Fu(t,dr):Ii(t)?[t]:rn(fr(Gi(t)))},ht.toPlainObject=Hi,ht.transform=function(t,r,i){var e=yi(t),n=e||xi(t)||Ni(t);if(r=In(r,4),null==i){var o=t&&t.constructor;i=n?e?new o:[]:Ai(t)&&Ci(o)?vt(C(t)):{}}return(n?Du:Qt)(t,function(t,e,n){return r(i,t,e,n)}),i},ht.unary=function(t){return ni(t,1)},ht.union=jr,ht.unionBy=Pr,ht.unionWith=Mr,ht.uniq=function(t){return t&&t.length?Ne(t):[]},ht.uniqBy=function(t,e){return t&&t.length?Ne(t,In(e,2)):[]},ht.uniqWith=function(t,e){return e="function"==typeof e?e:ea,t&&t.length?Ne(t,ea,e):[]},ht.unset=function(t,e){return null==t||Ue(t,e)},ht.unzip=Tr,ht.unzipWith=Or,ht.update=function(t,e,n){return null==t?t:Le(t,e,He(n))},ht.updateWith=function(t,e,n,r){return r="function"==typeof r?r:ea,null==t?t:Le(t,e,He(n),r)},ht.values=go,ht.valuesIn=function(t){return null==t?[]:rs(t,uo(t))},ht.without=Dr,ht.words=ko,ht.wrap=function(t,e){return di(He(e),t)},ht.xor=Rr,ht.xorBy=Ir,ht.xorWith=Nr,ht.zip=Ur,ht.zipObject=function(t,e){return Ve(t||[],e||[],At)},ht.zipObjectDeep=function(t,e){return Ve(t||[],e||[],ke)},ht.zipWith=Lr,ht.entries=ho,ht.entriesIn=vo,ht.extend=Yi,ht.extendWith=Xi,Io(ht,ht),ht.add=Go,ht.attempt=qo,ht.camelCase=mo,ht.capitalize=$o,ht.ceil=Qo,ht.clamp=function(t,e,n){return n===ea&&(n=e,e=ea),n!==ea&&(n=(n=Wi(n))==n?n:0),e!==ea&&(e=(e=Wi(e))==e?e:0),Dt(Wi(t),e,n)},ht.clone=function(t){return Rt(t,4)},ht.cloneDeep=function(t){return Rt(t,5)},ht.cloneDeepWith=function(t,e){return Rt(t,5,e="function"==typeof e?e:ea)},ht.cloneWith=function(t,e){return Rt(t,4,e="function"==typeof e?e:ea)},ht.conformsTo=function(t,e){return null==e||It(t,e,ao(e))},ht.deburr=yo,ht.defaultTo=function(t,e){return null==t||t!=t?e:t},ht.divide=Yo,ht.endsWith=function(t,e,n){t=Gi(t),e=Ie(e);var r=t.length,i=n=n===ea?r:Dt(Bi(n),0,r);return 0<=(n-=e.length)&&t.slice(n,i)==e},ht.eq=vi,ht.escape=function(t){return(t=Gi(t))&&za.test(t)?t.replace(La,ss):t},ht.escapeRegExp=function(t){return(t=Gi(t))&&Xa.test(t)?t.replace(Ya,"\\$&"):t},ht.every=function(t,e,n){var r=yi(t)?Iu:zt;return n&&Qn(t,e,n)&&(e=ea),r(t,In(e,3))},ht.find=Wr,ht.findIndex=$r,ht.findKey=function(t,e){return Hu(t,In(e,3),Qt)},ht.findLast=Hr,ht.findLastIndex=yr,ht.findLastKey=function(t,e){return Hu(t,In(e,3),Yt)},ht.floor=Xo,ht.forEach=Gr,ht.forEachRight=Qr,ht.forIn=function(t,e){return null==t?t:Ht(t,In(e,3),uo)},ht.forInRight=function(t,e){return null==t?t:Gt(t,In(e,3),uo)},ht.forOwn=function(t,e){return t&&Qt(t,In(e,3))},ht.forOwnRight=function(t,e){return t&&Yt(t,In(e,3))},ht.get=eo,ht.gt=gi,ht.gte=mi,ht.has=function(t,e){return null!=t&&Vn(t,e,ee)},ht.hasIn=no,ht.head=br,ht.identity=To,ht.includes=function(t,e,n,r){t=bi(t)?t:go(t),n=n&&!r?Bi(n):0;var i=t.length;return n<0&&(n=H(i+n,0)),Ri(t)?n<=i&&-1<t.indexOf(e,n):!!i&&-1<Qu(t,e,n)},ht.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Bi(n);return i<0&&(i=H(r+i,0)),Qu(t,e,i)},ht.inRange=function(t,e,n){return e=zi(e),n===ea?(n=e,e=0):n=zi(n),t=Wi(t),(r=t)>=G(i=e,o=n)&&r<H(i,o);var r,i,o},ht.invoke=oo,ht.isArguments=$i,ht.isArray=yi,ht.isArrayBuffer=wi,ht.isArrayLike=bi,ht.isArrayLikeObject=_i,ht.isBoolean=function(t){return!0===t||!1===t||ji(t)&&Zt(t)==fa},ht.isBuffer=xi,ht.isDate=Ei,ht.isElement=function(t){return ji(t)&&1===t.nodeType&&!Ti(t)},ht.isEmpty=function(t){if(null==t)return!0;if(bi(t)&&(yi(t)||"string"==typeof t||"function"==typeof t.splice||xi(t)||Ni(t)||$i(t)))return!t.length;var e=Bn(t);if(e==ga||e==ba)return!t.size;if(Kn(t))return!le(t).length;for(var n in t)if(S.call(t,n))return!1;return!0},ht.isEqual=function(t,e){return ae(t,e)},ht.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:ea)?n(t,e):ea;return r===ea?ae(t,e,ea,n):!!r},ht.isError=Si,ht.isFinite=function(t){return"number"==typeof t&&B(t)},ht.isFunction=Ci,ht.isInteger=ki,ht.isLength=qi,ht.isMap=Pi,ht.isMatch=function(t,e){return t===e||ue(t,e,Un(e))},ht.isMatchWith=function(t,e,n){return n="function"==typeof n?n:ea,ue(t,e,Un(e),n)},ht.isNaN=function(t){return Mi(t)&&t!=+t},ht.isNative=function(t){if(Jn(t))throw new i("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return se(t)},ht.isNil=function(t){return null==t},ht.isNull=function(t){return null===t},ht.isNumber=Mi,ht.isObject=Ai,ht.isObjectLike=ji,ht.isPlainObject=Ti,ht.isRegExp=Oi,ht.isSafeInteger=function(t){return ki(t)&&-oa<=t&&t<=oa},ht.isSet=Di,ht.isString=Ri,ht.isSymbol=Ii,ht.isTypedArray=Ni,ht.isUndefined=function(t){return t===ea},ht.isWeakMap=function(t){return ji(t)&&Bn(t)==Ea},ht.isWeakSet=function(t){return ji(t)&&"[object WeakSet]"==Zt(t)},ht.join=function(t,e){return null==t?"":V.call(t,e)},ht.kebabCase=wo,ht.last=Sr,ht.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return n!==ea&&(i=(i=Bi(n))<0?H(r+i,0):G(i,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,i):Gu(t,Xu,i,!0)},ht.lowerCase=bo,ht.lowerFirst=_o,ht.lt=Ui,ht.lte=Li,ht.max=function(t){return t&&t.length?Bt(t,To,te):ea},ht.maxBy=function(t,e){return t&&t.length?Bt(t,In(e,2),te):ea},ht.mean=function(t){return Ju(t,To)},ht.meanBy=function(t,e){return Ju(t,In(e,2))},ht.min=function(t){return t&&t.length?Bt(t,To,de):ea},ht.minBy=function(t,e){return t&&t.length?Bt(t,In(e,2),de):ea},ht.stubArray=Wo,ht.stubFalse=Ho,ht.stubObject=function(){return{}},ht.stubString=function(){return""},ht.stubTrue=function(){return!0},ht.multiply=Ko,ht.nth=function(t,e){return t&&t.length?me(t,Bi(e)):ea},ht.noConflict=function(){return Su._===this&&(Su._=$),this},ht.noop=No,ht.now=ei,ht.pad=function(t,e,n){t=Gi(t);var r=(e=Bi(e))?gs(t):0;if(!e||e<=r)return t;var i=(e-r)/2;return yn(L(i),n)+t+yn(U(i),n)},ht.padEnd=function(t,e,n){t=Gi(t);var r=(e=Bi(e))?gs(t):0;return e&&r<e?t+yn(e-r,n):t},ht.padStart=function(t,e,n){t=Gi(t);var r=(e=Bi(e))?gs(t):0;return e&&r<e?yn(e-r,n)+t:t},ht.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),Y(Gi(t).replace(Ka,""),e||0)},ht.random=function(t,e,n){if(n&&"boolean"!=typeof n&&Qn(t,e,n)&&(e=n=ea),n===ea&&("boolean"==typeof e?(n=e,e=ea):"boolean"==typeof t&&(n=t,t=ea)),t===ea&&e===ea?(t=0,e=1):(t=zi(t),e===ea?(e=t,t=0):e=zi(e)),e<t){var r=t;t=e,e=r}if(n||t%1||e%1){var i=X();return G(t+i*(e-t+xu("1e-"+((i+"").length-1))),e)}return _e(t,e)},ht.reduce=function(t,e,n){var r=yi(t)?Bu:Zu,i=arguments.length<3;return r(t,In(e,4),n,i,Lt)},ht.reduceRight=function(t,e,n){var r=yi(t)?Vu:Zu,i=arguments.length<3;return r(t,In(e,4),n,i,Ft)},ht.repeat=function(t,e,n){return e=(n?Qn(t,e,n):e===ea)?1:Bi(e),xe(Gi(t),e)},ht.replace=function(){var t=arguments,e=Gi(t[0]);return t.length<3?e:e.replace(t[1],t[2])},ht.result=function(t,e,n){var r=-1,i=(e=Ge(e,t)).length;for(i||(i=1,t=ea);++r<i;){var o=null==t?ea:t[dr(e[r])];o===ea&&(r=i,o=n),t=Ci(o)?o.call(t):o}return t},ht.round=Zo,ht.runInContext=t,ht.sample=function(t){return(yi(t)?St:Se)(t)},ht.size=function(t){if(null==t)return 0;if(bi(t))return Ri(t)?gs(t):t.length;var e=Bn(t);return e==ga||e==ba?t.size:le(t).length},ht.snakeCase=xo,ht.some=function(t,e,n){var r=yi(t)?Wu:Me;return n&&Qn(t,e,n)&&(e=ea),r(t,In(e,3))},ht.sortedIndex=function(t,e){return Te(t,e)},ht.sortedIndexBy=function(t,e,n){return Oe(t,e,In(n,2))},ht.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=Te(t,e);if(r<n&&vi(t[r],e))return r}return-1},ht.sortedLastIndex=function(t,e){return Te(t,e,!0)},ht.sortedLastIndexBy=function(t,e,n){return Oe(t,e,In(n,2),!0)},ht.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=Te(t,e,!0)-1;if(vi(t[n],e))return n}return-1},ht.startCase=Eo,ht.startsWith=function(t,e,n){return t=Gi(t),n=null==n?0:Dt(Bi(n),0,t.length),e=Ie(e),t.slice(n,n+e.length)==e},ht.subtract=ta,ht.sum=function(t){return t&&t.length?ts(t,To):0},ht.sumBy=function(t,e){return t&&t.length?ts(t,In(e,2)):0},ht.template=function(a,t,e){var n=ht.templateSettings;e&&Qn(a,t,e)&&(t=ea),a=Gi(a),t=Xi({},t,n,kn);var u,s,r=Xi({},t.imports,n.imports,kn),i=ao(r),o=rs(r,i),c=0,l=t.interpolate||pu,f="__p += '",d=m((t.escape||pu).source+"|"+l.source+"|"+(l===Wa?ou:pu).source+"|"+(t.evaluate||pu).source+"|$","g"),p="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++wu+"]")+"\n";a.replace(d,function(t,e,n,r,i,o){return n||(n=r),f+=a.slice(c,o).replace(hu,cs),e&&(u=!0,f+="' +\n__e("+e+") +\n'"),i&&(s=!0,f+="';\n"+i+";\n__p += '"),n&&(f+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),c=o+t.length,t}),f+="';\n";var h=t.variable;h||(f="with (obj) {\n"+f+"\n}\n"),f=(s?f.replace(Ra,""):f).replace(Ia,"$1").replace(Na,"$1;"),f="function("+(h||"obj")+") {\n"+(h?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(u?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=qo(function(){return g(i,p+"return "+f).apply(ea,o)});if(v.source=f,Si(v))throw v;return v},ht.times=function(t,e){if((t=Bi(t))<1||oa<t)return[];var n=ua,r=G(t,ua);e=In(e),t-=ua;for(var i=es(r,e);++n<t;)e(n);return i},ht.toFinite=zi,ht.toInteger=Bi,ht.toLength=Vi,ht.toLower=function(t){return Gi(t).toLowerCase()},ht.toNumber=Wi,ht.toSafeInteger=function(t){return t?Dt(Bi(t),-oa,oa):0===t?t:0},ht.toString=Gi,ht.toUpper=function(t){return Gi(t).toUpperCase()},ht.trim=function(t,e,n){if((t=Gi(t))&&(n||e===ea))return t.replace(Ja,"");if(!t||!(e=Ie(e)))return t;var r=ms(t),i=ms(e);return Ye(r,os(r,i),as(r,i)+1).join("")},ht.trimEnd=function(t,e,n){if((t=Gi(t))&&(n||e===ea))return t.replace(Za,"");if(!t||!(e=Ie(e)))return t;var r=ms(t);return Ye(r,0,as(r,ms(e))+1).join("")},ht.trimStart=function(t,e,n){if((t=Gi(t))&&(n||e===ea))return t.replace(Ka,"");if(!t||!(e=Ie(e)))return t;var r=ms(t);return Ye(r,os(r,ms(e))).join("")},ht.truncate=function(t,e){var n=30,r="...";if(Ai(e)){var i="separator"in e?e.separator:i;n="length"in e?Bi(e.length):n,r="omission"in e?Ie(e.omission):r}var o=(t=Gi(t)).length;if(ls(t)){var a=ms(t);o=a.length}if(o<=n)return t;var u=n-gs(r);if(u<1)return r;var s=a?Ye(a,0,u).join(""):t.slice(0,u);if(i===ea)return s+r;if(a&&(u+=s.length-u),Oi(i)){if(t.slice(u).search(i)){var c,l=s;for(i.global||(i=m(i.source,Gi(au.exec(i))+"g")),i.lastIndex=0;c=i.exec(l);)var f=c.index;s=s.slice(0,f===ea?u:f)}}else if(t.indexOf(Ie(i),u)!=u){var d=s.lastIndexOf(i);-1<d&&(s=s.slice(0,d))}return s+r},ht.unescape=function(t){return(t=Gi(t))&&Fa.test(t)?t.replace(Ua,$s):t},ht.uniqueId=function(t){var e=++d;return Gi(t)+e},ht.upperCase=So,ht.upperFirst=Co,ht.each=Gr,ht.eachRight=Qr,ht.first=br,Io(ht,(Jo={},Qt(ht,function(t,e){S.call(ht.prototype,e)||(Jo[e]=t)}),Jo),{chain:!1}),ht.VERSION="4.17.10",Du(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){ht[t].placeholder=ht}),Du(["drop","take"],function(n,r){$t.prototype[n]=function(t){t=t===ea?1:H(Bi(t),0);var e=this.__filtered__&&!r?new $t(this):this.clone();return e.__filtered__?e.__takeCount__=G(t,e.__takeCount__):e.__views__.push({size:G(t,ua),type:n+(e.__dir__<0?"Right":"")}),e},$t.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()}}),Du(["filter","map","takeWhile"],function(t,e){var n=e+1,r=1==n||3==n;$t.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:In(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),Du(["head","last"],function(t,e){var n="take"+(e?"Right":"");$t.prototype[t]=function(){return this[n](1).value()[0]}}),Du(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");$t.prototype[t]=function(){return this.__filtered__?new $t(this):this[n](1)}}),$t.prototype.compact=function(){return this.filter(To)},$t.prototype.find=function(t){return this.filter(t).head()},$t.prototype.findLast=function(t){return this.reverse().find(t)},$t.prototype.invokeMap=Ee(function(e,n){return"function"==typeof e?new $t(this):this.map(function(t){return ie(t,e,n)})}),$t.prototype.reject=function(t){return this.filter(li(In(t)))},$t.prototype.slice=function(t,e){t=Bi(t);var n=this;return n.__filtered__&&(0<t||e<0)?new $t(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==ea&&(n=(e=Bi(e))<0?n.dropRight(-e):n.take(e-t)),n)},$t.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},$t.prototype.toArray=function(){return this.take(ua)},Qt($t.prototype,function(f,t){var d=/^(?:filter|find|map|reject)|While$/.test(t),p=/^(?:head|last)$/.test(t),h=ht[p?"take"+("last"==t?"Right":""):t],v=p||/^find/.test(t);h&&(ht.prototype[t]=function(){var t=this.__wrapped__,n=p?[1]:arguments,e=t instanceof $t,r=n[0],i=e||yi(t),o=function(t){var e=h.apply(ht,zu([t],n));return p&&a?e[0]:e};i&&d&&"function"==typeof r&&1!=r.length&&(e=i=!1);var a=this.__chain__,u=!!this.__actions__.length,s=v&&!a,c=e&&!u;if(!v&&i){t=c?t:new $t(this);var l=f.apply(t,n);return l.__actions__.push({func:zr,args:[o],thisArg:ea}),new mt(l,a)}return s&&c?f.apply(this,n):(l=this.thru(o),s?p?l.value()[0]:l.value():l)})}),Du(["pop","push","shift","sort","splice","unshift"],function(t){var n=a[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);ht.prototype[t]=function(){var e=arguments;if(i&&!this.__chain__){var t=this.value();return n.apply(yi(t)?t:[],e)}return this[r](function(t){return n.apply(yi(t)?t:[],e)})}}),Qt($t.prototype,function(t,e){var n=ht[e];if(n){var r=n.name+"";(ot[r]||(ot[r]=[])).push({name:e,func:n})}}),ot[vn(ea,2).name]=[{name:"wrapper",func:ea}],$t.prototype.clone=function(){var t=new $t(this.__wrapped__);return t.__actions__=rn(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=rn(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=rn(this.__views__),t},$t.prototype.reverse=function(){if(this.__filtered__){var t=new $t(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},$t.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=yi(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=G(e,t+a);break;case"takeRight":t=H(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,u=o.end,s=u-a,c=r?u:a-1,l=this.__iteratees__,f=l.length,d=0,p=G(s,this.__takeCount__);if(!n||!r&&i==s&&p==s)return ze(t,this.__actions__);var h=[];t:for(;s--&&d<p;){for(var v=-1,g=t[c+=e];++v<f;){var m=l[v],$=m.iteratee,y=m.type,w=$(g);if(2==y)g=w;else if(!w){if(1==y)continue t;break t}}h[d++]=g}return h},ht.prototype.at=Br,ht.prototype.chain=function(){return Fr(this)},ht.prototype.commit=function(){return new mt(this.value(),this.__chain__)},ht.prototype.next=function(){this.__values__===ea&&(this.__values__=Fi(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?ea:this.__values__[this.__index__++]}},ht.prototype.plant=function(t){for(var e,n=this;n instanceof gt;){var r=hr(n);r.__index__=0,r.__values__=ea,e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e},ht.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof $t){var e=t;return this.__actions__.length&&(e=new $t(this)),(e=e.reverse()).__actions__.push({func:zr,args:[Ar],thisArg:ea}),new mt(e,this.__chain__)}return this.thru(Ar)},ht.prototype.toJSON=ht.prototype.valueOf=ht.prototype.value=function(){return ze(this.__wrapped__,this.__actions__)},ht.prototype.first=ht.prototype.head,T&&(ht.prototype[T]=function(){return this}),ht}();"function"==typeof ea&&"object"==typeof ea.amd&&ea.amd?(Su._=ys,ea(function(){return ys})):O?((O.exports=ys)._=ys,T._=ys):Su._=ys}).call(commonjsGlobal)});window.piGlobal||(window.piGlobal={});var global$2=window.piGlobal;function APIconstructor(t){function e(){var e=this.script={type:t.type,name:"anonymous "+t.type,settings:t.settings||{},current:{},sequence:[]};this.settings=e.settings,lodash$1.forEach(t.sets,function(t){e[t+"Sets"]=[]})}return lodash$1.forEach(t.sets,function(t){lodash$1.set(e.prototype,lodash$1.camelCase("add-"+t+"-set"),add_set(t))}),lodash$1.extend(e.prototype,t.static,{setName:function(t){this.script.name=t},addSettings:function(t,e){if(!lodash$1.isString(t))throw new Error("The first argument to API.addSettings must be a string");return lodash$1.isPlainObject(e)?this.settings[t]=lodash$1.extend(this.settings[t]||{},e):this.settings[t]=e,this},addSequence:function(t){var e=this.script;return lodash$1.isArray(t)||(t=[t]),e.sequence=e.sequence.concat(t),this},addGlobal:function(t){if(!lodash$1.isPlainObject(t))throw new Error("global must be an object");return lodash$1.merge(global$2,t)},getGlobal:function(){return global$2},addCurrent:function(t){if(!lodash$1.isPlainObject(t))throw new Error("current must be an object");return lodash$1.merge(this.script.current,t)},getCurrent:function(){return this.script.current},addScript:function(t){return lodash$1.merge(this.script,t)},getScript:function(){return this.script},save:function(t){var e=this.script,n=e._toSave||(e._toSave=[]);if(!lodash$1.isPlainObject(t))throw new Error("API.save can send only objects.");return e._save?e._save(t):n.push(t)},post:function(e,n){return angular.injector(["ng"]).invoke(["$http",function(t){return t.post(e,n)}])},shuffle:lodash$1.shuffle.bind(lodash$1)}),e}function add_set(i){function o(e,t){return t.map(function(t){return lodash$1.set(t,"set",e)})}function a(t){return lodash$1.isArray(t)?t:[t]}return function(t,e){var n,r=this.script[i+"Sets"]||(this.script[i+"Sets"]=[]);if(lodash$1.isUndefined(t))throw new Error('There is an undefined "'+i+'Set".');lodash$1.isArray(t)&&(n=t),lodash$1.isString(t)&&(n=o(t,a(e))),lodash$1.isPlainObject(t)&&(n=lodash$1.map(t,function(t,e){return o(e,a(t))}),n=lodash$1.flatten(n)),function(t){if(lodash$1.isUndefined(t))throw new Error('Error parsing "'+i+'Set": Unknown set type.');if(!t.every(function(t){return lodash$1.has(t,"set")}))throw new Error('All elements must be defined and belong to a set (error parsing "'+i+'Set")')}(n),r.push.apply(r,n)}}var PROGRESS_BAR=['<div class="row" style="opacity:0.4;">','<div class="hidden-xs col-sm-3 text-right" style="font-weight:bold;">Progress:&nbsp;</div>','<div class="col-xs-12 col-sm-7">','<div class="progress">','<div class="progress-bar" style="width: <%= 100 * tasksMeta.number / tasksMeta.outOf %>%;"></div>',"</div>","</div>","</div>"].join("\n"),manager=APIconstructor({type:"manager",sets:["tasks"],static:{PROGRESS_BAR:PROGRESS_BAR}}),api$1=APIconstructor({type:"minno-time",settings:{logger:{pulse:20}},sets:["trial","stimulus","media"]});api$1.prototype.addTrialSets=api$1.prototype.addTrialSet,api$1.prototype.addStimulusSets=api$1.prototype.addStimulusSet,api$1.prototype.addMediaSets=api$1.prototype.addMediaSet,api$1.prototype.getLogs=function(){return this.script.current.logs};var quest=APIconstructor({type:"minno-quest",sets:["pages","questions"]});function ComputeD(){lodash$1.extend(this,{dataArray:{},AnalyzedVar:"latency",ErrorVar:"error",condVar:"",cond1VarValues:[],cond2VarValues:[],parcelVar:"",parcelValue:[],fastRT:300,maxFastTrialsRate:.1,minRT:400,maxRT:1e4,maxErrorParcelRate:.4,errorLatency:{use:"latency",penalty:600,useForSTD:!0},postSettings:{}})}lodash$1.extend(ComputeD.prototype,{setComputeObject:function(t){lodash$1.extend(this,t)},setDataArray:function(){var t=window.piGlobal;this.dataArray=t.current.logs}});var messages={MessageDef:[],manyErrors:"There were too many errors made to determine a result.",tooFast:"There were too many fast trials to determine a result.",notEnough:"There were not enough trials to determine a result."},requirejs$1,require,define;function Message(){this.messages=lodash$1.extend({},messages)}function ParcelMng$1(t){this.parcelArray=[],this.scoreData={},this.msgMan=t}function Scorer(){this.computeData=new ComputeD,this.msgMan=new Message,this.parcelMng=new ParcelMng$1(this.msgMan)}function post(r,i){return new Promise(function(t,e){var n=new XMLHttpRequest;n.open("POST",r,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),n.onreadystatechange=function(){4===this.readyState&&(200<=this.status&&this.status<400?t(this.responseText):e(new Error("Failed posting to: "+r)))},n.send(JSON.stringify(i))})}
/** vim: et:ts=4:sw=4:sts=4
 * @license RequireJS 2.3.5 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, https://github.com/requirejs/requirejs/blob/master/LICENSE
 */lodash$1.extend(Message.prototype,{setMsgObject:function(t){lodash$1.extend(this.messages,t)},getScoreMsg:function(t){var e=this.messages.MessageDef;if(!e||!e.length)throw new Error('You must define a "MessageDef" array.');var n=parseFloat(t),r=null,i=null,o="error: msg was not set",a=!1;if(lodash$1.each(e,function(t){r=parseFloat(t.cut),i=t.message,n<=r&&!a&&(o=i,a=!0)}),!a){var u=e[e.length-1];o=u.message}return o},getMessage:function(t){return this.messages[t]}}),lodash$1.extend(ParcelMng$1.prototype,{Init:function(r){var i=this,t=this.msgMan,o=window.piGlobal.current.logs;i.parcelArray=[],i.scoreData={},i.msgMan=t;var a=r.AnalyzedVar,u=r.ErrorVar,s=r.parcelVar,e=r.parcelValue,c=r.minRT,l=r.maxRT,f=r.fastRT,d=0,p=0,h=0,v=0,n=parseFloat(r.maxFastTrialsRate);if(void 0===e||0===e.length){v=p=d=h=0;var g={name:"general",trialIData:[]};lodash$1.each(o,function(t){t[a]>=c&&t[a]<=l?(h++,1==t.data[u]&&v++,i.validate(g,t,r)&&d++):t[a]<=f&&p++}),i.checkErrors(h,v,r),i.parcelArray[0]=g}else lodash$1.each(e,function(e,t){v=p=d=h=0;var n={};n.name=e,n.trialIData=[],lodash$1.each(o,function(t){t.data[s]==e&&(t[a]>=c&&t[a]<=l?(h++,1==t.data[u]&&v++,i.validate(n,t,r)&&d++):t[a]<=f&&p++)}),i.checkErrors(h,v,r),i.parcelArray[t]=n});n<p/d&&(i.scoreData.errorMessage=this.msgMan.getMessage("tooFast"))},checkErrors:function(t,e,n){n.maxErrorParcelRate<e/t&&(this.scoreData.errorMessage=this.msgMan.getMessage("manyErrors"))},validate:function(t,e,n){var r=n.errorLatency,i=n.ErrorVar,o=e.data;return"latency"==r.use?(t.trialIData.push(e),!0):"false"==r.use?"1"!=o[i]&&(t.trialIData.push(e),!0):"penalty"==r.use?(t.trialIData.push(e),!0):void 0},addPenalty:function(t,e){var n=e.errorLatency,a=this;if("penalty"==n.use){var u=parseFloat(n.penalty),s=e.ErrorVar,c=e.AnalyzedVar,l=e.condVar,f=e.cond1VarValues,d=e.cond2VarValues,r=t.trialIData,p=t.avgCon1,h=t.avgCon2;lodash$1.each(r,function(t){var e=t.data,n=e[s],r=e[l],i=a.checkArray(r,f),o=a.checkArray(r,d);"1"==n&&(i?t[c]+=p+u:o&&(t[c]+=h+u))})}},avgAll:function(e){var n=this;lodash$1.each(n.parcelArray,function(t){n.avgParcel(t,e)})},avgParcel:function(t,e){var a=this,n=t.trialIData,u=e.condVar,s=e.cond1VarValues,c=e.cond2VarValues,l=e.AnalyzedVar,f=0,d=0,p=0,h=0,v=0,g=0;lodash$1.each(n,function(t){var e=t[l],n=t.data;p+=e,g++;var r=n[u],i=a.checkArray(r,s),o=a.checkArray(r,c);i?(h++,f+=e):o&&(v++,d+=e)}),(h<=2||v<=2)&&(a.scoreData.errorMessage=this.msgMan.getMessage("notEnough")),0!==h&&(f/=h),0!==v&&(d/=v),t.avgCon1=f,t.avgCon2=d,t.diff=t.avgCon1-t.avgCon2,0!==g&&(t.avgBoth=p/g),a.addPenalty(t,e)},checkArray:function(t,e){for(var n=0;n<e.length;n++){if(e[n]==t)return!0}return!1},varianceAll:function(e){var n=this;lodash$1.each(n.parcelArray,function(t){n.varianceParcel(t,e)})},varianceParcel:function(t,u){var e,s=this,c=u.AnalyzedVar,n=t.trialIData,l=u.cond1VarValues,f=u.cond2VarValues,d=u.condVar,r=t.avgBoth,i=0,o=0,p=[],h=[],v=u.errorLatency.useForSTD;lodash$1.each(n,function(t){var e=t.data,n=t[c],r=e[u.ErrorVar],i=e[d],o=s.checkArray(i,l),a=s.checkArray(i,f);o?v?p.push(n):"0"==r&&p.push(n):a&&(v?h.push(n):"0"==r&&p.push(n))}),e=p.concat(h),lodash$1.each(e,function(t){o+=(i=t-r)*i}),t.variance=o/(e.length-1)},scoreAll:function(e){var n=this,r=0;lodash$1.each(n.parcelArray,function(t){n.scoreParcel(t,e),r+=t.score});var t=r/n.parcelArray.length;n.scoreData.score=t.toFixed(2)},scoreParcel:function(t){var e=Math.sqrt(t.variance);0===e?(this.scoreData.errorMessage=this.msgMan.getMessage("notEnough"),t.score=t.diff):t.score=t.diff/e}}),lodash$1.extend(Scorer.prototype,{addSettings:function(t,e){switch(t){case"compute":this.computeData.setComputeObject(e);break;case"message":this.msgMan.setMsgObject(e);break;default:throw new Error('SCORER:addSettings: unknow "type" '+t)}},computeD:function(){var t=this.computeData,e=this.parcelMng;t.setDataArray(),e.Init(t),e.avgAll(t),e.varianceAll(t),e.scoreAll(t);var n=e.scoreData;return void 0===n.errorMessage||null===n.errorMessage?{FBMsg:this.getFBMsg(n.score),DScore:n.score,error:!1}:{FBMsg:n.errorMessage,DScore:"",error:!0}},postToServer:function(t,e,n,r){var i=this.computeData.postSettings||{},o=i.url,a={};return n||(n=i.score),r||(r=i.msg),a[n]=t,a[r]=e,post(o,a)},dynamicPost:function(t){return post((this.computeData.postSettings||{}).url,t)},getFBMsg:function(t){return this.msgMan.getScoreMsg(t)}}),function(global,setTimeout){var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.3.5",commentRegExp=/\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;function commentReplace(t,e){return e||""}function isFunction(t){return"[object Function]"===ostring.call(t)}function isArray(t){return"[object Array]"===ostring.call(t)}function each(t,e){var n;if(t)for(n=0;n<t.length&&(!t[n]||!e(t[n],n,t));n+=1);}function eachReverse(t,e){var n;if(t)for(n=t.length-1;-1<n&&(!t[n]||!e(t[n],n,t));n-=1);}function hasProp(t,e){return hasOwn.call(t,e)}function getOwn(t,e){return hasProp(t,e)&&t[e]}function eachProp(t,e){var n;for(n in t)if(hasProp(t,n)&&e(t[n],n))break}function mixin(n,t,r,i){return t&&eachProp(t,function(t,e){!r&&hasProp(n,e)||(!i||"object"!=typeof t||!t||isArray(t)||isFunction(t)||t instanceof RegExp?n[e]=t:(n[e]||(n[e]={}),mixin(n[e],t,r,i)))}),n}function bind(t,e){return function(){return e.apply(t,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(t){throw t}function getGlobal(t){if(!t)return t;var e=global;return each(t.split("."),function(t){e=e[t]}),e}function makeError(t,e,n,r){var i=new Error(e+"\nhttp://requirejs.org/docs/errors.html#"+t);return i.requireType=t,i.requireModules=r,n&&(i.originalError=n),i}if(void 0===define){if(void 0!==requirejs$1){if(isFunction(requirejs$1))return;cfg=requirejs$1,requirejs$1=void 0}void 0===require||isFunction(require)||(cfg=require,require=void 0),req=requirejs$1=function(t,e,n,r){var i,o,a=defContextName;return isArray(t)||"string"==typeof t||(o=t,isArray(e)?(t=e,e=n,n=r):t=[]),o&&o.context&&(a=o.context),(i=getOwn(contexts,a))||(i=contexts[a]=req.s.newContext(a)),o&&i.configure(o),i.require(t,e,n)},req.config=function(t){return req(t)},req.nextTick=void 0!==setTimeout?function(t){setTimeout(t,4)}:function(t){t()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(t,e,n){var r=t.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return r.type=t.scriptType||"text/javascript",r.charset="utf-8",r.async=!0,r},req.load=function(e,n,r){var t,i=e&&e.config||{};if(isBrowser)return(t=req.createNode(i,n,r)).setAttribute("data-requirecontext",e.contextName),t.setAttribute("data-requiremodule",n),!t.attachEvent||t.attachEvent.toString&&t.attachEvent.toString().indexOf("[native code")<0||isOpera?(t.addEventListener("load",e.onScriptLoad,!1),t.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,t.attachEvent("onreadystatechange",e.onScriptLoad)),t.src=r,i.onNodeCreated&&i.onNodeCreated(t,i,n,r),currentlyAddingScript=t,baseElement?head.insertBefore(t,baseElement):head.appendChild(t),currentlyAddingScript=null,t;if(isWebWorker)try{setTimeout(function(){},0),importScripts(r),e.completeLoad(n)}catch(t){e.onError(makeError("importscripts","importScripts failed for "+n+" at "+r,t,[n]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(t){if(head||(head=t.parentNode),dataMain=t.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||-1!==mainScript.indexOf("!")||(mainScript=(src=mainScript.split("/")).pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(t,n,e){var r,i;"string"!=typeof t&&(e=n,n=t,t=null),isArray(n)||(e=n,n=null),!n&&isFunction(e)&&(n=[],e.length&&(e.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,function(t,e){n.push(e)}),n=(1===e.length?["require"]:["require","exports","module"]).concat(n))),useInteractive&&(r=currentlyAddingScript||getInteractiveScript())&&(t||(t=r.getAttribute("data-requiremodule")),i=contexts[r.getAttribute("data-requirecontext")]),i?(i.defQueue.push([t,n,e]),i.defQueueMap[t]=!0):globalDefQueue.push([t,n,e])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}function newContext(s){var n,t,p,c,l,g={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},f={},d={},r={},h=[],v={},i={},m={},$=1,y=1;function w(t,e,n){var r,i,o,a,u,s,c,l,f,d,p=e&&e.split("/"),h=g.map,v=h&&h["*"];if(t&&(s=(t=t.split("/")).length-1,g.nodeIdCompat&&jsSuffixRegExp.test(t[s])&&(t[s]=t[s].replace(jsSuffixRegExp,"")),"."===t[0].charAt(0)&&p&&(t=p.slice(0,p.length-1).concat(t)),function(t){var e,n;for(e=0;e<t.length;e++)if("."===(n=t[e]))t.splice(e,1),e-=1;else if(".."===n){if(0===e||1===e&&".."===t[2]||".."===t[e-1])continue;0<e&&(t.splice(e-1,2),e-=2)}}(t),t=t.join("/")),n&&h&&(p||v)){t:for(o=(i=t.split("/")).length;0<o;o-=1){if(u=i.slice(0,o).join("/"),p)for(a=p.length;0<a;a-=1)if((r=getOwn(h,p.slice(0,a).join("/")))&&(r=getOwn(r,u))){c=r,l=o;break t}!f&&v&&getOwn(v,u)&&(f=getOwn(v,u),d=o)}!c&&f&&(c=f,l=d),c&&(i.splice(0,l,c),t=i.join("/"))}return getOwn(g.pkgs,t)||t}function b(e){isBrowser&&each(scripts(),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===p.contextName)return t.parentNode.removeChild(t),!0})}function _(t){var e=getOwn(g.paths,t);if(e&&isArray(e)&&1<e.length)return e.shift(),p.require.undef(t),p.makeRequire(null,{skipMap:!0})([t]),!0}function x(t){var e,n=t?t.indexOf("!"):-1;return-1<n&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function E(t,e,n,r){var i,o,a,u,s=null,c=e?e.name:null,l=t,f=!0,d="";return t||(f=!1,t="_@r"+($+=1)),s=(u=x(t))[0],t=u[1],s&&(s=w(s,c,r),o=getOwn(v,s)),t&&(s?d=n?t:o&&o.normalize?o.normalize(t,function(t){return w(t,c,r)}):-1===t.indexOf("!")?w(t,c,r):t:(s=(u=x(d=w(t,c,r)))[0],d=u[1],n=!0,i=p.nameToUrl(d))),{prefix:s,name:d,parentMap:e,unnormalized:!!(a=!s||o||n?"":"_unnormalized"+(y+=1)),url:i,originalName:l,isDefine:f,id:(s?s+"!"+d:d)+a}}function S(t){var e=t.id,n=getOwn(f,e);return n||(n=f[e]=new p.Module(t)),n}function C(t,e,n){var r=t.id,i=getOwn(f,r);!hasProp(v,r)||i&&!i.defineEmitComplete?(i=S(t)).error&&"error"===e?n(i.error):i.on(e,n):"defined"===e&&n(v[r])}function k(n,t){var e=n.requireModules,r=!1;t?t(n):(each(e,function(t){var e=getOwn(f,t);e&&(e.error=n,e.events.error&&(r=!0,e.emit("error",n)))}),r||req.onError(n))}function q(){globalDefQueue.length&&(each(globalDefQueue,function(t){var e=t[0];"string"==typeof e&&(p.defQueueMap[e]=!0),h.push(t)}),globalDefQueue=[])}function A(t){delete f[t],delete d[t]}function j(){var t,r,e=1e3*g.waitSeconds,i=e&&p.startTime+e<(new Date).getTime(),o=[],a=[],u=!1,s=!0;if(!n){if(n=!0,eachProp(d,function(t){var e=t.map,n=e.id;if(t.enabled&&(e.isDefine||a.push(t),!t.error))if(!t.inited&&i)_(n)?u=r=!0:(o.push(n),b(n));else if(!t.inited&&t.fetched&&e.isDefine&&(u=!0,!e.prefix))return s=!1}),i&&o.length)return(t=makeError("timeout","Load timeout for modules: "+o,null,o)).contextName=p.contextName,k(t);s&&each(a,function(t){!function i(o,a,u){var t=o.map.id;o.error?o.emit("error",o.error):(a[t]=!0,each(o.depMaps,function(t,e){var n=t.id,r=getOwn(f,n);!r||o.depMatched[e]||u[n]||(getOwn(a,n)?(o.defineDep(e,v[n]),o.check()):i(r,a,u))}),u[t]=!0)}(t,{},{})}),i&&!r||!u||!isBrowser&&!isWebWorker||l||(l=setTimeout(function(){l=0,j()},50)),n=!1}}function a(t){hasProp(v,t[0])||S(E(t[0],null,!0)).init(t[1],t[2])}function o(t,e,n,r){t.detachEvent&&!isOpera?r&&t.detachEvent(r,e):t.removeEventListener(n,e,!1)}function u(t){var e=t.currentTarget||t.srcElement;return o(e,p.onScriptLoad,"load","onreadystatechange"),o(e,p.onScriptError,"error"),{node:e,id:e&&e.getAttribute("data-requiremodule")}}function P(){var t;for(q();h.length;){if(null===(t=h.shift())[0])return k(makeError("mismatch","Mismatched anonymous define() module: "+t[t.length-1]));a(t)}p.defQueueMap={}}return c={require:function(t){return t.require?t.require:t.require=p.makeRequire(t.map)},exports:function(t){if(t.usingExports=!0,t.map.isDefine)return t.exports?v[t.map.id]=t.exports:t.exports=v[t.map.id]={}},module:function(t){return t.module?t.module:t.module={id:t.map.id,uri:t.map.url,config:function(){return getOwn(g.config,t.map.id)||{}},exports:t.exports||(t.exports={})}}},(t=function(t){this.events=getOwn(r,t.id)||{},this.map=t,this.shim=getOwn(g.shim,t.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0}).prototype={init:function(t,e,n,r){r=r||{},this.inited||(this.factory=e,n?this.on("error",n):this.events.error&&(n=bind(this,function(t){this.emit("error",t)})),this.depMaps=t&&t.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check())},defineDep:function(t,e){this.depMatched[t]||(this.depMatched[t]=!0,this.depCount-=1,this.depExports[t]=e)},fetch:function(){if(!this.fetched){this.fetched=!0,p.startTime=(new Date).getTime();var t=this.map;if(!this.shim)return t.prefix?this.callPlugin():this.load();p.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return t.prefix?this.callPlugin():this.load()}))}},load:function(){var t=this.map.url;i[t]||(i[t]=!0,p.load(this.map.id,t))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id,r=this.depExports,i=this.exports,o=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{i=p.execCb(n,o,r,i)}catch(t){e=t}else i=p.execCb(n,o,r,i);if(this.map.isDefine&&void 0===i&&((t=this.module)?i=t.exports:this.usingExports&&(i=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",k(this.error=e)}else i=o;if(this.exports=i,this.map.isDefine&&!this.ignore&&(v[n]=i,req.onResourceLoad)){var a=[];each(this.depMaps,function(t){a.push(t.normalizedMap||t)}),req.onResourceLoad(p,this.map,a)}A(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(p.defQueueMap,n)||this.fetch()}},callPlugin:function(){var s=this.map,c=s.id,t=E(s.prefix);this.depMaps.push(t),C(t,"defined",bind(this,function(t){var o,e,n,r=getOwn(m,this.map.id),i=this.map.name,a=this.map.parentMap?this.map.parentMap.name:null,u=p.makeRequire(s.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(t.normalize&&(i=t.normalize(i,function(t){return w(t,a,!0)})||""),C(e=E(s.prefix+"!"+i,this.map.parentMap,!0),"defined",bind(this,function(t){this.map.normalizedMap=e,this.init([],function(){return t},null,{enabled:!0,ignore:!0})})),void((n=getOwn(f,e.id))&&(this.depMaps.push(e),this.events.error&&n.on("error",bind(this,function(t){this.emit("error",t)})),n.enable()))):r?(this.map.url=p.nameToUrl(r),void this.load()):((o=bind(this,function(t){this.init([],function(){return t},null,{enabled:!0})})).error=bind(this,function(t){this.inited=!0,(this.error=t).requireModules=[c],eachProp(f,function(t){0===t.map.id.indexOf(c+"_unnormalized")&&A(t.map.id)}),k(t)}),o.fromText=bind(this,function(t,e){var n=s.name,r=E(n),i=useInteractive;e&&(t=e),i&&(useInteractive=!1),S(r),hasProp(g.config,c)&&(g.config[n]=g.config[c]);try{req.exec(t)}catch(t){return k(makeError("fromtexteval","fromText eval for "+c+" failed: "+t,t,[c]))}i&&(useInteractive=!0),this.depMaps.push(r),p.completeLoad(n),u([n],o)}),void t.load(s.name,u,o,g))})),p.enable(t,this),this.pluginMaps[t.id]=t},enable:function(){(d[this.map.id]=this).enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(t,e){var n,r,i;if("string"==typeof t){if(t=E(t,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[e]=t,i=getOwn(c,t.id))return void(this.depExports[e]=i(this));this.depCount+=1,C(t,"defined",bind(this,function(t){this.undefed||(this.defineDep(e,t),this.check())})),this.errback?C(t,"error",bind(this,this.errback)):this.events.error&&C(t,"error",bind(this,function(t){this.emit("error",t)}))}n=t.id,r=f[n],hasProp(c,n)||!r||r.enabled||p.enable(t,this)})),eachProp(this.pluginMaps,bind(this,function(t){var e=getOwn(f,t.id);e&&!e.enabled&&p.enable(t,this)})),this.enabling=!1,this.check()},on:function(t,e){var n=this.events[t];n||(n=this.events[t]=[]),n.push(e)},emit:function(t,e){each(this.events[t],function(t){t(e)}),"error"===t&&delete this.events[t]}},(p={config:g,contextName:s,registry:f,defined:v,urlFetched:i,defQueue:h,defQueueMap:{},Module:t,makeModuleMap:E,nextTick:req.nextTick,onError:k,configure:function(t){if(t.baseUrl&&"/"!==t.baseUrl.charAt(t.baseUrl.length-1)&&(t.baseUrl+="/"),"string"==typeof t.urlArgs){var n=t.urlArgs;t.urlArgs=function(t,e){return(-1===e.indexOf("?")?"?":"&")+n}}var r=g.shim,i={paths:!0,bundles:!0,config:!0,map:!0};eachProp(t,function(t,e){i[e]?(g[e]||(g[e]={}),mixin(g[e],t,!0,!0)):g[e]=t}),t.bundles&&eachProp(t.bundles,function(t,e){each(t,function(t){t!==e&&(m[t]=e)})}),t.shim&&(eachProp(t.shim,function(t,e){isArray(t)&&(t={deps:t}),!t.exports&&!t.init||t.exportsFn||(t.exportsFn=p.makeShimExports(t)),r[e]=t}),g.shim=r),t.packages&&each(t.packages,function(t){var e;e=(t="string"==typeof t?{name:t}:t).name,t.location&&(g.paths[e]=t.location),g.pkgs[e]=t.name+"/"+(t.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(f,function(t,e){t.inited||t.map.unnormalized||(t.map=E(e,null,!0))}),(t.deps||t.callback)&&p.require(t.deps||[],t.callback)},makeShimExports:function(e){return function(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}},makeRequire:function(o,a){function u(t,e,n){var r,i;return a.enableBuildCallback&&e&&isFunction(e)&&(e.__requireJsBuild=!0),"string"==typeof t?isFunction(e)?k(makeError("requireargs","Invalid require call"),n):o&&hasProp(c,t)?c[t](f[o.id]):req.get?req.get(p,t,o,u):(r=E(t,o,!1,!0).id,hasProp(v,r)?v[r]:k(makeError("notloaded",'Module name "'+r+'" has not been loaded yet for context: '+s+(o?"":". Use require([])")))):(P(),p.nextTick(function(){P(),(i=S(E(null,o))).skipMap=a.skipMap,i.init(t,e,n,{enabled:!0}),j()}),u)}return a=a||{},mixin(u,{isBrowser:isBrowser,toUrl:function(t){var e,n=t.lastIndexOf("."),r=t.split("/")[0];return-1!==n&&(!("."===r||".."===r)||1<n)&&(e=t.substring(n,t.length),t=t.substring(0,n)),p.nameToUrl(w(t,o&&o.id,!0),e,!0)},defined:function(t){return hasProp(v,E(t,o,!1,!0).id)},specified:function(t){return t=E(t,o,!1,!0).id,hasProp(v,t)||hasProp(f,t)}}),o||(u.undef=function(n){q();var t=E(n,o,!0),e=getOwn(f,n);e.undefed=!0,b(n),delete v[n],delete i[t.url],delete r[n],eachReverse(h,function(t,e){t[0]===n&&h.splice(e,1)}),delete p.defQueueMap[n],e&&(e.events.defined&&(r[n]=e.events),A(n))}),u},enable:function(t){getOwn(f,t.id)&&S(t).enable()},completeLoad:function(t){var e,n,r,i=getOwn(g.shim,t)||{},o=i.exports;for(q();h.length;){if(null===(n=h.shift())[0]){if(n[0]=t,e)break;e=!0}else n[0]===t&&(e=!0);a(n)}if(p.defQueueMap={},r=getOwn(f,t),!e&&!hasProp(v,t)&&r&&!r.inited){if(!(!g.enforceDefine||o&&getGlobal(o)))return _(t)?void 0:k(makeError("nodefine","No define call for "+t,null,[t]));a([t,i.deps||[],i.exportsFn])}j()},nameToUrl:function(t,e,n){var r,i,o,a,u,s,c=getOwn(g.pkgs,t);if(c&&(t=c),s=getOwn(m,t))return p.nameToUrl(s,e,n);if(req.jsExtRegExp.test(t))a=t+(e||"");else{for(r=g.paths,o=(i=t.split("/")).length;0<o;o-=1)if(u=getOwn(r,i.slice(0,o).join("/"))){isArray(u)&&(u=u[0]),i.splice(0,o,u);break}a=i.join("/"),a=("/"===(a+=e||(/^data\:|^blob\:|\?/.test(a)||n?"":".js")).charAt(0)||a.match(/^[\w\+\.\-]+:/)?"":g.baseUrl)+a}return g.urlArgs&&!/^blob\:/.test(a)?a+g.urlArgs(t,a):a},load:function(t,e){req.load(p,t,e)},execCb:function(t,e,n,r){return e.apply(r,n)},onScriptLoad:function(t){if("load"===t.type||readyRegExp.test((t.currentTarget||t.srcElement).readyState)){interactiveScript=null;var e=u(t);p.completeLoad(e.id)}},onScriptError:function(t){var n=u(t);if(!_(n.id)){var r=[];return eachProp(f,function(t,e){0!==e.indexOf("_@r")&&each(t.depMaps,function(t){if(t.id===n.id)return r.push(e),!0})}),k(makeError("scripterror",'Script error for "'+n.id+(r.length?'", needed by: '+r.join(", "):'"'),t,[n.id]))}}}).require=p.makeRequire(),p}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState||eachReverse(scripts(),function(t){if("interactive"===t.readyState)return interactiveScript=t}),interactiveScript}}(void 0,"undefined"==typeof setTimeout?void 0:setTimeout);var module$5=angular.module("randomize",[]);module$5.value("randomizeRandom",Math.random),module$5.value("randomizeShuffle",lodash.shuffle),module$5.value("randomizeInt",function(t){return Math.floor(Math.random()*t)}),module$5.value("randomizeRange",function(t){return lodash.shuffle(lodash.range(t))});var consoleModule$1=angular.module("piConsole",[]);function mixerSequentialProvider(a){return function t(e,n,r){var i,o=e[0];if(r=r||0,10<=r++)throw new Error("Mixer: the mixer allows a maximum depth of 10");return lodash.isUndefined(o.mixer)?e:(i=a(o,n),e.shift(),i=i.concat(e),lodash.isUndefined(i[0])||lodash.isUndefined(i[0].mixer)?i:t(i,n,r))}}function mixerRecursiveProvider(i){return function e(t,n,r){if(r=r||0,10<=r++)throw new Error("Mixer: the mixer allows a maximum depth of 10");return lodash(t).map(function(t){return lodash.isUndefined(t.mixer)?t:e(i(t,n),n,r)}).flatten().value()}}consoleModule$1.factory("piConsole",piConsoleFactory),mixerSequentialProvider.$inject=["mixer"],mixerRecursiveProvider.$inject=["mixer"];var module$4=angular.module("mixer",[module$5.name,consoleModule$1.name]);function templateFilter$1(n,r){return function(e,t){if(!~e.indexOf("<%"))return e;t=lodash.extend(t||{},r);try{return lodash.template(e)(t)}catch(t){return n.error('ERROR: "'+t.message+'" in the following template: ',e),""}}}module$4.service("mixer",mixProvider),module$4.service("mixerSequential",mixerSequentialProvider),module$4.service("mixerRecursive",mixerRecursiveProvider),module$4.service("MixerSequence",mixerSequenceProvider$1),module$4.value("dotNotation",dotNotation$1),module$4.service("mixerDotNotation",mixerDotNotationProvider$1),module$4.service("mixerCondition",mixerConditionProvider$1),module$4.service("mixerEvaluate",evaluateProvider),module$4.config(["$provide",function(t){t.decorator("mixer",mixerBranchingDecorator$1)}]),module$4.constant("mixerDefaultContext",{}),templateFilter$1.$inject=["$log","templateDefaultContext"];var module$6=angular.module("template",[]);module$6.filter("template",templateFilter$1),module$6.service("templateObj",templateObjProvider$1),module$6.constant("templateDefaultContext",{});var module$3=angular.module("database",[module$4.name,module$6.name,consoleModule$1.name]).service("Collection",collectionService).service("DatabaseRandomizer",RandomizerProvider).service("databaseQuery",queryProvider$1).service("databaseInflate",inflateProvider$1).service("DatabaseStore",storeProvider$1).service("Database",DatabaseProvider).service("databaseSequence",SequenceProvider),module$7=angular.module("piConsole",[]);function piConsoleFactory$1(r){return window.DEBUG?function t(e){if(lodash$1.get(t,"settings.hideConsole",!1))return window.postMessage({type:"kill-console"},"*");r[e.type]&&r[e.type](e.message);window.postMessage((n=e,lodash$1.cloneDeep(n,function(t){return lodash$1.isFunction(t)?"Function: "+t.name:lodash$1.isError(t)?{name:t.name,message:t.message,stack:t.stack}:void 0})),"*");var n}:lodash$1.noop}function SequenceProvider$1(){function t(t,e){if(!e)throw new Error("Sequences need to take a db as the second argument");this.sequence=e.sequence("pages",t),this.db=e}return lodash$1.extend(t.prototype,{next:function(t){return this.sequence.next(t),this},prev:function(t){return this.sequence.prev(t),this},current:function(t){var e,n=this.sequence.current(t,{skip:["questions"]});if(!n)return n;e=n.questions?lodash$1.isArray(n.questions)?n.questions:[n.questions]:[];var r=this.db.sequence("questions",e).all({pagesData:n.data,pagesMeta:n.$meta});return(n=lodash$1.clone(n,!0)).questions=r,n}}),t}module$7.factory("piConsole",piConsoleFactory$1),piConsoleFactory$1.$inject=["$log"];var stream=createCommonjsModule(function(t){!function(){var e=0,i={};function a(){function t(){return 0<arguments.length&&arguments[0]!==i&&r(t,arguments[0]),t._state.value}var n;return(n=t).constructor=a,n._state={id:e++,value:void 0,state:0,derive:void 0,recover:void 0,deps:{},parents:[],endStream:void 0,unregister:void 0},n.map=n["fantasy-land/map"]=l,n["fantasy-land/ap"]=f,n["fantasy-land/of"]=a,n.valueOf=d,n.toJSON=p,n.toString=d,Object.defineProperties(n,{end:{get:function(){if(!n._state.endStream){var e=a();e.map(function(t){return!0===t&&(c(n),e._state.unregister=function(){c(e)}),t}),n._state.endStream=e}return n._state.endStream}}}),0<arguments.length&&arguments[0]!==i&&r(t,arguments[0]),t}function r(t,e){for(var n in o(t,e),t._state.deps)u(t._state.deps[n],!1);null!=t._state.unregister&&t._state.unregister(),function(t){for(var e in t._state.changed=!1,t._state.deps)t._state.deps[e]._state.changed=!1}(t)}function o(t,e){t._state.value=e,t._state.changed=!0,2!==t._state.state&&(t._state.state=1)}function u(t,e){var n=t._state.parents;if(0<n.length&&n.every(v)&&(e||n.some(g))){var r=t._state.derive();if(r===i)return!1;o(t,r)}}function s(t,e){if(!e.every(h))throw new Error("Ensure that each item passed to stream.combine/stream.merge is a stream");return n=a(),r=e,i=function(){return t.apply(this,e.concat([e.filter(g)]))},(o=n._state).derive=i,o.parents=r.filter(m),function t(e,n){for(var r=0;r<n.length;r++)n[r]._state.deps[e._state.id]=e,t(e,n[r]._state.parents)}(n,o.parents),u(n,!0),n;var n,r,i,o}function c(t){for(var e=0;e<t._state.parents.length;e++){delete t._state.parents[e]._state.deps[t._state.id]}for(var n in t._state.deps){var r=t._state.deps[n],i=r._state.parents.indexOf(t);-1<i&&r._state.parents.splice(i,1)}t._state.state=2,t._state.deps={}}function l(e){return s(function(t){return e(t())},[this])}function f(t){return s(function(t,e){return t()(e())},[t,this])}function d(){return this._state.value}function p(){return null!=this._state.value&&"function"==typeof this._state.value.toJSON?this._state.value.toJSON():this._state.value}function h(t){return t._state}function v(t){return 1===t._state.state}function g(t){return t._state.changed}function m(t){return 2!==t._state.state}(a["fantasy-land/of"]=a).merge=function(t){return s(function(){return t.map(function(t){return t()})},t)},a.combine=s,a.scan=function(e,n,t){var r=s(function(t){return n=e(n,t._state.value)},[t]);return 0===r._state.state&&r(n),r},a.scanMerge=function(r,i){var t=r.map(function(t){var e=t[0];return 0===e._state.state&&e(void 0),e});return s(function(){var n=arguments[arguments.length-1];return t.forEach(function(t,e){-1<n.indexOf(t)&&(i=r[e][1](i,t._state.value))}),i},t)},a.HALT=i,t.exports=a}()});function createLogs(t,e,n){var r,i=e.logger||e.logMap||n;return t.map((r=i,function(t){return r.apply(null,t)}))}function dfltQuestLogger(t,e){var n=lodash$1.extend({},e,t);return n.declined&&(n.response=t.responseObj=void 0),n}function TaskProvider(i,o,a,u,s){function t(t){var e=this,n=t.settings||{},r=s.global;if(!lodash$1.isArray(t.sequence))throw new Error("Task: no sequence was defined");this.script=t,this.db=new o,this.sequence=new a(t.sequence,this.db),this.$logSource=stream(),this.$logs=createLogs(this.$logSource,n.logger||{},dfltQuestLogger),this.q=i.defer(),this.promise=this.q.promise.then(function(){lodash$1.each(s.current.questions,function(t){if(t.$logged)return!0;e.log(t,{},r),t.$logged=!0}),e.$logSource.end(!0),e.$logs.end(!0)}).finally(n.onEnd||lodash$1.noop),u(t,this.db)}return lodash$1.extend(t.prototype,{log:function(){this.$logSource.call(null,[].slice.call(arguments))},current:function(){var t=this.sequence.current();return t||this.end(),t},next:function(){return this.sequence.next()},prev:function(){return this.sequence.prev()},end:function(){this.q.resolve()}}),t}function parseProvider(){return function(t,e){e.createColl("pages"),e.createColl("questions"),e.add("pages",t.pagesSets||[]),e.add("questions",t.questionsSets||[]),t.settings||(t.settings={})}}TaskProvider.$inject=["$q","Database","QuestSequence","taskParse","$rootScope"];var module$2=angular.module("task",[module$3.name,module$7.name]),nowFn;function stopperProvider(t){function e(){this.startTime=t()}return e.prototype.now=function(){return t()-this.startTime},e}function timerController(f,e){var d=this,p={};function h(){var t=p.options,e=d.stopper.now(),n=d.targetTime-e;if(e>=d.targetTime)return p.$emit("timer-end"),void(t.removeOnEnd&&d.remove());var r,i,o,a,u,s,c,l="up"===t.direction?e:n;lodash$1.extend(p,(r=l,i=Math.floor(r/1e3),o=Math.floor(i/3600),a=i%3600,u=Math.floor(a/60),s=a%60,c=Math.ceil(s),{current:r,hours:o,minutes:u,seconds:c,milis:r%1e3})),d.timeoutId=f(h,Math.min(100,n)),p.$emit("timer-tick")}d.start=function(t){if(!lodash$1.isPlainObject(t))throw new Error("Timer options must be an object");(p=d.getScope()).options=lodash$1.defaults(t,{direction:"down",template:"normal",show:!0,removeOnEnd:!0,duration:0}),d.stopper=new e,d.targetTime=1e3*p.options.duration,p.options.show&&d.show(),h()},d.stop=function(){var t=p.options||{};p=d.getScope(),f.cancel(d.timeoutId),t.removeOnEnd&&d.remove()}}function timerDirective(u){return{controller:timerController,priority:400,link:function(t,e,n,r){var i,o=t.$new();function a(){i&&i.remove(),i=null}r.show=function(){i=angular.element('<div class="pi-timer well well-sm text-center" style="font-family: monospace;">{{minutes}}:{{zeroPad(seconds)}}</div>'),e.prepend(i),u(i.contents())(o)},r.remove=a,r.getScope=function(){return o},o.zeroPad=function(t){return t<10?"0"+t:t},t.$on("$destroy",a)}}}module$2.service("QuestSequence",SequenceProvider$1),module$2.service("QuestTask",TaskProvider),module$2.service("taskParse",parseProvider),module$2.value("dfltQuestLogger",dfltQuestLogger),stopperProvider.$inject=["timerNow"],timerController.$inject=["$timeout","timerStopper"],timerDirective.$inject=["$compile"],window.performance&&(nowFn=performance.now||performance.mozNow||performance.webkitNow||performance.msNow||performance.oNow);var timerNow=nowFn?function(){return nowFn.apply(performance)}:function(){return+new Date},module$9=angular.module("timer",[]);module$9.service("timerStopper",stopperProvider),module$9.directive("piTimer",timerDirective),module$9.value("timerNow",timerNow);var preloadImages=preload.bind(null,preloadImg);function preload(t,e){var n=0;function r(){n<e.length&&t(e[n++],r)}r(),r(),r(),r()}function preloadImg(t,e){var n=new Image;n.onload=e,n.onerror=e,n.src=t}var module$10=angular.module("pi.utils",[]);module$10.value("piPreloadImages",preloadImages),module$10.service("piInvoke",["$injector",function(r){var i=r.get("$rootScope");return function(t,e){var n=i.global||{};t&&r.invoke(t,null,lodash$1.extend(e,{global:n,current:n.current}))}}]);var buttons=angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(t){this.activeClass=t.activeClass||"active",this.toggleEvent=t.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(e,n,r,t){var i=t[0],o=t[1];o.$render=function(){n.toggleClass(i.activeClass,angular.equals(o.$modelValue,e.$eval(r.btnRadio)))},n.bind(i.toggleEvent,function(){var t=n.hasClass(i.activeClass);t&&!angular.isDefined(r.uncheckable)||e.$apply(function(){o.$setViewValue(t?null:e.$eval(r.btnRadio)),o.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(r,t,e,n){var i=n[0],o=n[1];function a(){return u(e.btnCheckboxTrue,!0)}function u(t,e){var n=r.$eval(t);return angular.isDefined(n)?n:e}o.$render=function(){t.toggleClass(i.activeClass,angular.equals(o.$modelValue,a()))},t.bind(i.toggleEvent,function(){r.$apply(function(){o.$setViewValue(t.hasClass(i.activeClass)?u(e.btnCheckboxFalse,!1):a()),o.$render()})})}}}),template='<div class="modal in minno-modal" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n\t<div class="modal-dialog">\n\t\t<div class="modal-content">\n\t\t\t<div class="modal-header" ng-if="header">\n\t\t\t\t<button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="close()"><span aria-hidden="true">&times;</span></button>\n\t\t\t\t<h4 class="modal-title" id="myModalLabel">{{ header }}</h4>\n\t\t\t</div>\n\t\t\t<div class="modal-body">{{body}}</div>\n\t\t\t<div class="modal-footer">\n\t\t\t\t<button type="button" class="btn btn-default" ng-click="close()">{{button || "Close"}}</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n';function modalConstructor(n,r,i,o,a){var u,s,c,l=angular.element('<div class="modal-backdrop in"/>');function f(){u&&u.remove(),s&&s.$destroy(),c&&c.resolve(),l.remove(),a.off("keydown",f),r.removeClass("modal-open")}this.open=function(t){var e=t.context||{};return f(),c=o.defer(),(s=(t.$scope||n).$new()).close=f,a.on("keydown",f),s.header=lodash$1.template(t.header)(e),s.body=lodash$1.template(t.body)(e),s.button=lodash$1.template(t.button)(e),u=angular.element(template),r.addClass("modal-open"),r.prepend(l),r.prepend(u),i(u.contents())(s),s.$digest(),c.promise},this.close=f}modalConstructor.$inject=["$rootScope","$rootElement","$compile","$q","$document"];var module$11=angular.module("pi.modal",[]);function questController$1(o,t,a,u,s,c,e,l){var f,d,p=this,h={dflt:NaN,data:o.data};this.scope=o,this.stopper=new t,this.registerModel=function(r,t){t=lodash$1.defaults(t||{},h),d=t.data;var e=a(u.ngModel),n=d.hasOwnProperty("dflt")?d.dflt:t.dflt;o.model=r,f=e(o.$parent),lodash$1.isUndefined(f)?(f={},e.assign(o.$parent,f)):s({type:"warn",message:'This question has already been in use: "'+f.name+'"',context:f,tags:["question"]});d.name||s({type:"warn",message:"There is a question without a name! I'd tell you what it is, but it has no name!",tags:["question"],context:d});p.log=r.$modelValue=f,lodash$1.defaults(f,{name:d.name,response:n,serial:l()}),o.response=r.$viewValue=f.response,r.$formatters.push(function(t){return t.response}),r.$parsers.push(function(t){var e=p.stopper.now();return f.response=t,f.latency=e,f.pristineLatency||(f.pristineLatency=e),f}),o.$watch("response",function(t,e){lodash$1.isEqual(t,e)||(r.$setViewValue(t),c(d.onChange,{log:f,question:d}))}),o.$on("$destroy",function(){c(d.onDestroy,{log:f,question:d})}),d.correct&&(r.$parsers.push(i),d.response=i(this.log));function i(t){var e=t.response,n=d.correctValue;return lodash$1.isNumber(n)&&(n+=""),lodash$1.isNumber(e)&&(e+=""),lodash$1.isEqual(n,e)?r.$setValidity("correct",!0):r.$setValidity("correct",!1),t}c(d.onCreate,{log:f,question:d}),o.$evalAsync(function(){c(d.onLoad,{log:f,question:d})})},o.$on("quest:submit",function(t){t.preventDefault(),f.declined=void 0,f.submitLatency=p.stopper.now(),c(d.onSubmit,{log:f,question:d})}),o.$on("quest:decline",function(t){t.preventDefault(),f.declined=!0,f.submitLatency=p.stopper.now(),c(d.onDecline,{log:f,question:d})}),o.$on("quest:timeout",function(t){t.preventDefault(),f.timeout=!0,c(d.onTimeout,{log:f,question:d})})}function guidFactory(){var t=0;return function(){return t++}}module$11.service("piModal",modalConstructor),questController$1.$inject=["$scope","timerStopper","$parse","$attrs","piConsole","piInvoke","$rootScope","questGuid"];var template$1="<div piq-page></div>",jqLite=angular.element;function piQuestCtrl(r,t,e,n,i,o){var a,u=new e(r.script),s=t.global,c=t.current||{};this.task=u,this.timerSetup=function(t){var n=lodash$1.get(r,"script.settings.timer");if(!n)return;t.start(n),t.getScope().$on("timer-end",function(){var t=n.message;function e(){u.end()}t?(lodash$1.isString(t)&&(t={body:t}),lodash$1.defaults(t,{$context:a}),o.open(t).then(e)):e()}),r.$on("$destroy",lodash$1.bind(t.stop,t))},c.questions||(c.questions={}),a={global:s,current:c,questions:c.questions},lodash$1.extend(n,a),lodash$1.extend(i,a),u.next(),r.$on("quest:next",function(t,e){u.next(e),r.$emit("quest:newPage")}),r.$on("quest:prev",function(t,e){u.prev(e),r.$emit("quest:newPage")}),r.$on("quest:log",function(t,e,n){u.log(e,n,r.global)})}function directive(d,p,h,v){return{controller:piQuestCtrl,terminal:!0,replace:!0,template:"<div pi-timer></div>",require:["piQuest","piTimer"],link:function(r,i,t,e){var o,a,n,u=e[0],s=u.task,c=e[1];function l(){n&&(n.remove(),n=null),o&&(o.$destroy(),o=null),a&&(p.leave(a,function(){n=null}),n=a,a=null)}function f(){var t=s.current();if(t){var e=r.$new(),n=jqLite(template$1);(function(t,e){if(!e)return;var n=e.split(" ");lodash$1.each(n,function(t){h.has("."+t+"-animation")||v({type:"error",message:'Unknown animation type: "'+t+'"',tags:["page","animation"]})}),t.addClass(e)})(n,(e.page=t).animate),l(),a=d(n)(e),p.enter(a,i),(o=e).$emit("quest:updated")}else l()}u.timerSetup(c),r.$on("quest:refresh",function(){o.page=s.current()}),r.$on("quest:newPage",f),f()}}}piQuestCtrl.$inject=["$scope","$rootScope","QuestTask","templateDefaultContext","mixerDefaultContext","piModal"],directive.$inject=["$compile","$animate","$injector","piConsole"];var template$2='<div ng-form name="pageForm" pi-timer>\n\t<h3 ng-if="page.header" ng-bind-html="page.header" ng-style="page.headerStyle"></h3>\n\t<div pi-timer="page.timer"></div>\n\t<div ng-if="page.progressBar" class="text-center" ng-bind-html="page.progressBar"></div>\n\n\t<div ng-bind-html="page.text"></div>\n\t<ol ng-class="{\'list-unstyled\':!page.numbered}" start="{{page.numberStart}}">\n\t\t<li ng-repeat="quest in page.questions">\n\t\t\t<div quest-wrapper quest-data="quest" quest-current="current"></div>\n\t\t</li>\n\t</ol>\n\n\t<div pi-quest-validation="pageForm.$error.pageValidation" pi-post-submit="submitAttempt">{{page.pageValidationText || \'Invalid page\'}}</div>\n\n\t<div class="page-buttons">\n\t\t<button\n\t\t\tng-click="prev()"\n\t\t\tclass="btn page-prev"\n\t\t\tng-if="page.prev && page.$meta.number > 1"\n\t\t>{{page.prevText || "Go Back"}}</button>\n\n\t\t<button\n\t\t\tng-click="decline($event)"\n\t\t\tclass="btn page-decline"\n\t\t\tng-if="page.decline"\n\t\t>{{page.declineText || "Decline"}}</button>\n\n\t\t<button\n\t\t\tng-click="submit()"\n\t\t\tclass="btn page-submit"\n\t\t\tng-if="!page.noSubmit"\n\t\t>{{page.submitText || "Submit"}}</button>\n\t</div>\n</div>\n';function piqPageCtrl(i,t,o,a){var u=this;i.global=o.global,i.current=o.current,this.harvest=function(n){var r=i.current.questions;lodash$1.each(i.page.questions,function(t){if(t.name&&(n||t.lognow)){var e=r[t.name];e.$logged||(i.$emit("quest:log",e,u.log),e.$logged=!0)}})},i.submit=function(t){var e=i.pageForm.$valid;if(i.submitAttempt=!0,!e&&!0!==t)return!0;i.$broadcast("quest:submit"),u.proceed(),i.$emit("quest:next")},i.decline=function(t){var e=angular.element(t.target);"double"!==this.page.decline||e.hasClass("active")?(i.$broadcast("quest:decline"),u.proceed(),i.$emit("quest:next")):e.addClass("active")},i.prev=function(){u.proceed(),i.$emit("quest:prev")},this.proceed=function(){u.timer.stop(),u.harvest(i.page.lognow)},this.setup=function(t){var n=i.page;u.timer=t,u.log={name:n.name,startTime:+new Date},n.timer&&(t.start(n.timer),t.getScope().$on("timer-end",function(){var t,e=n.timer.message;u.log.timeout=!0,i.$broadcast("quest:timeout"),e?(t={pagesMeta:n.$meta,pagesData:n.data,global:o.global,current:o.current},lodash$1.isString(e)&&(e={body:e}),lodash$1.defaults(e,{$context:t,$scope:i}),a.open(e).then(r)):r()}));function r(){var t=n.timer.submitOnEnd||lodash$1.isUndefined(n.timer.submitOnEnd);t&&i.submit(!0)}},i.$watch("current.questions",function(){i.$emit("quest:refresh")},!0),i.$on("quest:submit:now",function(){i.submit()})}function directive$1(o){return{replace:!0,controller:piqPageCtrl,template:template$2,require:["piqPage","piTimer"],link:function(t,e,n,r){var i=t.page;o.scrollTo(0,0),r[0].setup(r[1]),lodash$1.isFunction(i.pageValidation)&&t.$watch(function(){t.pageForm.$setValidity("pageValidation",i.pageValidation(i,t.current))})}}}piqPageCtrl.$inject=["$scope","$timeout","$rootScope","piModal"],directive$1.$inject=["$window"];var template$3='<div class="form-group" ng-form="questForm">\n\t<label ng-hide="data.inline" for="{{data.name}}" ng-bind-html="data.stem" ng-style="data.stemCss"></label>\n\t<div ng-bind-html="data.description"></div>\n\t<div quest-data="data" ng-model="current.questions[data.name]" ng-style="{\'max-width\':data.maxWidth}"></div>\n\t<p class="help-block" ng-if="data.help" ng-bind-html="data.helpText"></p>\n</div>\n',PREFIX="quest";function capitaliseFirstLetter(t){return t.charAt(0).toUpperCase()+t.slice(1)}function directive$2(o,a){return{replace:!0,template:template$3,priority:5,scope:{data:"=questData",current:"=questCurrent"},link:function(t,e){var n=t.data.type||"text",r=e.children().eq(2),i=PREFIX+capitaliseFirstLetter(n);if(!a.has(i+"Directive"))throw new Error('Unknown question type: "'+n+'"');i=lodash$1.kebabCase(i),r.attr(i,!0),o(r)(t)}}}directive$2.$inject=["$compile","$injector"];var textTemplate='<div ng-form ng-class="{\'form-inline\':data.inline}">\n\t<label ng-show="data.inline" for="{{data.name}}" ng-bind-html="data.stem" ng-style="data.stemCss"></label>\n\t<input\n\t \ttype="text"\n\t\tng-model="response"\n\t\tng-minlength="{{data.minLength || data.minlength}}"\n\t\tng-maxlength="{{data.maxlength}}"\n\t\tng-pattern="data.pattern | toRegex"\n\t\tng-required="{{data.required}}"\n\t\tclass="form-control"\n\t\tng-attr-style="width:{{data.width | dfltUnits}}"\n\n\t\tng-keydown="data.maxlengthLimit && maxlengthLimit($event)"\n\t\tng-keyup="data.maxlengthLimit && maxlengthLimit($event)"\n\t/>\n\t<div pi-quest-validation="form.$error.minlength">{{data.errorMsg.minLength || data.errorMsg.minlength || "Too short!"}}</div>\n\t<div pi-quest-validation="form.$error.maxlength">{{data.errorMsg.maxlength || "Too long!"}}</div>\n\t<div pi-quest-validation="form.$error.pattern">{{data.errorMsg.pattern || "wrong pattern!"}}</div>\n\t<div pi-quest-validation="form.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n\t<div pi-quest-validation="model.$error.correct">{{data.errorMsg.correct || "You must answer the correct answer!"}}</div>\n</div>',textareaTemplate='<div ng-form ng-class="{\'form-inline\':data.inline}">\n\t<label ng-show="data.inline" for="{{data.name}}" ng-bind-html="data.stem" ng-style="data.stemCss"></label>\n\t<textarea\n\t \ttype="text"\n\t\tng-model="response"\n\t\tng-minlength="{{data.minLength || data.minlength}}"\n\t\tng-maxlength="{{data.maxlength}}"\n\t\tng-pattern="data.pattern | toRegex"\n\t\tng-required="{{data.required}}"\n\t\tclass="form-control"\n\n\t\tng-attr-style="resize:none;width:{{data.columns? \'auto\' : data.width | dfltUnits}};"\n\t\tcols="{{data.columns}}"\n\t\trows="{{data.rows}}"\n\n\t\tng-keydown="data.maxlengthLimit && maxlengthLimit($event)"\n\t\tng-keyup="data.maxlengthLimit && maxlengthLimit($event)"\n\t/>\n\t<div pi-quest-validation="form.$error.minlength">{{data.errorMsg.minLength || data.errorMsg.minlength || "Too short!"}}</div>\n\t<div pi-quest-validation="form.$error.maxlength">{{data.errorMsg.maxlength || "Too long!"}}</div>\n\t<div pi-quest-validation="form.$error.pattern">{{data.errorMsg.pattern || "wrong pattern!"}}</div>\n\t<div pi-quest-validation="form.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n\t<div pi-quest-validation="model.$error.correct">{{data.errorMsg.correct || "You must answer the correct answer!"}}</div>\n</div>';function textDirective(){return{replace:!0,template:function(t,e){return"questText"in e?textTemplate:textareaTemplate},require:["form","ngModel"],controller:"questController",controllerAs:"ctrl",scope:{data:"=questData"},link:function(r,t,e,n){var i=n[0],o=n[1],a=r.ctrl,u=r.data;r.form=i,r.maxlengthLimit=function(t){var e=angular.element(t.target).val(),n=u.maxlength||e.length;r.response=e.slice(0,n)},a.registerModel(o,{dflt:""}),u.autoSubmit&&t.bind("keydown keypress",function(t){13===t.which&&(r.$apply(function(){r.$emit("quest:submit:now")}),t.preventDefault())})}}}var template$4='<div ng-form ng-class="{\'form-inline\':data.inline}">\n\t<label ng-show="data.inline" for="{{data.name}}" ng-bind-html="data.stem" ng-style="data.stemCss"></label>\n\t<input\n\t \ttype="number"\n\t\tng-model="response"\n\t\tng-required="{{data.required}}"\n\t\tclass="form-control"\n\t\tng-attr-style="width:{{data.width | dfltUnits}}"\n\t>\n\t<div pi-quest-validation="form.$error.number">{{data.errorMsg.number || "Must be a number!"}}</div>\n\t<div pi-quest-validation="form.$error.qstMin">{{data.errorMsg.min || "Too small!"}}</div>\n\t<div pi-quest-validation="form.$error.qstMax">{{data.errorMsg.max || "Too big!"}}</div>\n\t<div pi-quest-validation="form.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n\t<div pi-quest-validation="model.$error.correct">{{data.errorMsg.correct || "You must answer the correct answer!"}}</div>\n</div>',directive$3=function(){return{replace:!0,template:template$4,require:["form","ngModel","^?piqPage"],controller:"questController",controllerAs:"ctrl",scope:{data:"=questData"},link:function(n,t,e,r){var i=r[0],o=t.find("input").eq(0).controller("ngModel");n.form=i,n.ctrl.registerModel(r[1],{dflt:""}),n.data.autoSubmit&&t.bind("keydown keypress",function(t){13===t.which&&(n.$apply(function(){n.$emit("quest:submit:now")}),t.preventDefault())});var a=function(t){var e=parseFloat(n.data.min);return!isNaN(e)&&t<e?void o.$setValidity("qstMin",!1):(o.$setValidity("qstMin",!0),t)};o.$parsers.push(a),o.$formatters.push(a);var u=function(t){var e=parseFloat(n.data.max);return!isNaN(e)&&e<t?void o.$setValidity("qstMax",!1):(o.$setValidity("qstMax",!0),t)};o.$parsers.push(u),o.$formatters.push(u)}}};function selectMixerProvider(r,i){return function(t,n){var e=i(t);return e=lodash$1.map(e,function(t,e){return lodash$1.isPlainObject(t)||(t={text:t}),lodash$1.isUndefined(t.value)&&(t.value=n.numericValues?e+1:t.text),t}),n.reverse&&(e=lodash$1(e).reverse().value()),n.randomize&&(e=r(e)),lodash$1.each(e,function(t,e){t.order=e}),e}}selectMixerProvider.$inject=["randomizeShuffle","mixerRecursive"];var template$5='<div ng-form>\n\t<select\n\t\tng-model="response"\n\t\tng-options="answer.value as answer.text group by answer.group for answer in quest.answers"\n\t\tng-required="data.required"\n\t\tng-change="data.autoSubmit && autoSubmit($event)"\n\t\tclass="form-control"\n\t\t>\n\t\t<option value="">{{chooseText || "-- Choose an option --"}}</option>\n\t</select>\n\t<div pi-quest-validation="form.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n\t<div pi-quest-validation="model.$error.correct">{{data.errorMsg.correct || "You must answer the correct answer!"}}</div>\n</div>';function directive$4(a,u){return{replace:!0,template:template$5,require:["ngModel","form"],controller:"questController",controllerAs:"ctrl",scope:{data:"=questData"},link:function(t,e,n,r){var i=r[0],o=t.ctrl;t.form=r[1],o.registerModel(i,{dflt:NaN}),t.quest={answers:a(t.data.answers||[],t.data)},t.chooseText="chooseText"in t.data&&t.data.chooseText,t.autoSubmit=function(){u(function(){t.$emit("quest:submit:now")})}}}}directive$4.$inject=["questSelectMixer","$timeout"];var template$6='<div>\n\t<div ng-class="listClass" ng-style="listCss">\n\t\t\x3c!-- track by in the ng-repeat allows us to keep the repeated object clean so that angular doesn\'t add a $$hashkey property --\x3e\n\t\t\x3c!-- using interpolation within class, so that we can keep the style info separate within the directive --\x3e\n\t\t<a\n\t\t\ttabindex="-1"\n\t\t\tng-repeat="answer in quest.answers track by answer.order"\n\t\t\tng-model="$parent.responseObj"\n\t\t\tbtn-radio="answer"\n\t\t\tng-class="$parent.listItemClass"\n\t\t\tng-style="listItemCss"\n\t\t\tclass="{{ $parent.response == answer.value ? \'active\' : \'\' }}"\n\t\t\tuncheckable\n\t\t\tng-click="data.autoSubmit && autoSubmit($event)"\n\t\t\tng-bind-html="answer.text"\n\t\t\tunselectable="on"\n\t\t></a>\n\t</div>\n\t<div pi-quest-validation="model.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n\t<div pi-quest-validation="model.$error.correct">{{data.errorMsg.correct || "You must answer the correct answer!"}}</div>\n</div>';function directive$5(s,c,l){return{replace:!0,require:["ngModel"],controller:"questController",controllerAs:"ctrl",scope:{data:"=questData"},link:function(n,t,e,r){var i=r[0],o=n.ctrl,a=n.data;switch(t.html(template$6),l(t.contents())(n),o.registerModel(i,{dflt:NaN}),n.quest={answers:s(n.data.answers||[],n.data)},n.$watch("responseObj",function(t,e){t!==e&&(n.response=t&&t.value)}),n.data.required&&(i.$formatters.push(u),i.$parsers.unshift(u),u(n.response)),n.data.buttons?n.data.style="horizontal":"horizontal"==n.data.style&&(n.data.buttons=!0),n.listCss={},n.listItemCss={},a.style){case"horizontal":n.listClass="btn-group btn-group-justified btn-group-lg",n.listItemClass="btn btn-select";break;case"multiButtons":n.listClass="btn-toolbar",n.listItemClass="btn  btn-select",n.listCss.lineHeight=2.8;break;case"list":default:n.listClass="list-group",n.listItemClass="list-group-item"}function u(t){var e=i;return e.$isEmpty(t)?void e.$setValidity("required",!1):(e.$setValidity("required",!0),t)}a.minWidth&&(n.listItemCss.minWidth=a.minWidth),n.autoSubmit=function(t){n.data.autoSubmit&&(angular.element(t.currentTarget).hasClass(c.activeClass)&&n.$emit("quest:submit:now"))}}}}directive$5.$inject=["questSelectMixer","buttonConfig","$compile"];var template$7='<div>\n\t<div ng-class="listClass" ng-style="listCss">\n\t\t\x3c!-- track by in the ng-repeat allows us to keep the repeated object clean so that angular doesn\'t add a $$hashkey property --\x3e\n\t\t<a\n\t\t\thref="javascript:void(0);"\n\t\t\tng-repeat="answer in quest.answers track by answer.order"\n\t\t\tng-model="answer.chosen"\n\t\t\tbtn-checkbox\n\t\t\tng-class="$parent.listItemClass"\n\t\t\tng-style="listItemCss"\n\t\t\tclass="{{ answer.chosen ? \'active\' : \'\' }}"\n\t\t\tuncheckable\n\t\t\tng-bind-html="answer.text"\n\t\t\tunselectable="on"\n\t\t>\n\t\t</a>\n\t</div>\n\t<div pi-quest-validation="model.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n\t<div pi-quest-validation="model.$error.correct">{{data.errorMsg.correct || "You must answer the correct answer!"}}</div>\n</div>';function directive$6(s){return{replace:!0,template:template$7,require:["^?piqPage","ngModel"],controller:"questController",controllerAs:"ctrl",scope:{data:"=questData"},link:function(n,t,e,r){var i=n.ctrl,o=r[1],a=n.data;switch(i.registerModel(o,{dflt:[]}),o.$isEmpty=function(){return lodash$1.isEmpty(o.$viewValue)},n.quest={answers:s(n.data.answers||[],n.data)},lodash$1.each(n.quest.answers,function(t){~lodash$1.indexOf(n.response,t.value)&&(t.chosen=!0)}),n.data.buttons?n.data.style="horizontal":"horizontal"==n.data.style&&(n.data.buttons=!0),n.listCss={},n.listItemCss={},a.style){case"horizontal":n.listClass="btn-group btn-group-justified btn-group-lg",n.listItemClass="btn btn-select";break;case"multiButtons":n.listClass="btn-toolbar",n.listItemClass="btn  btn-select",n.listCss.lineHeight=2.8;break;case"list":default:n.listClass="list-group",n.listItemClass="list-group-item"}function u(t){return o.$setValidity("required",!o.$isEmpty(t)),t}a.minWidth&&(n.listItemCss.minWidth=a.minWidth),a.required&&(o.$parsers.unshift(u),u(o.$viewValue)),n.$watch("quest.answers",function(t,e){t!==e&&(n.response=lodash$1(t).filter(function(t){return t.chosen}).pluck("value").value())},!0)}}}directive$6.$inject=["questSelectMixer"];var atoa=function(t,e){return Array.prototype.slice.call(t,e)},si="function"==typeof setImmediate,tick;tick=si?function(t){setImmediate(t)}:"undefined"!=typeof process&&process.nextTick?process.nextTick:function(t){setTimeout(t,0)};var ticky=tick,debounce=function(t,e,n){t&&ticky(function(){t.apply(n||null,e||[])})},emitter=function(i,t){var o=t||{},a={};return void 0===i&&(i={}),i.on=function(t,e){return a[t]?a[t].push(e):a[t]=[e],i},i.once=function(t,e){return e._once=!0,i.on(t,e),i},i.off=function(t,e){var n=arguments.length;if(1===n)delete a[t];else if(0===n)a={};else{var r=a[t];if(!r)return i;r.splice(r.indexOf(e),1)}return i},i.emit=function(){var t=atoa(arguments);return i.emitterSnapshot(t.shift()).apply(this,t)},i.emitterSnapshot=function(r){var t=(a[r]||[]).slice(0);return function(){var e=atoa(arguments),n=this||i;if("error"===r&&!1!==o.throws&&!t.length)throw 1===e.length?e[0]:e;return t.forEach(function(t){o.async?debounce(t,e,n):t.apply(n,e),t._once&&i.off(r,t)}),i}},i},NativeCustomEvent=commonjsGlobal.CustomEvent;function useNative(){try{var t=new NativeCustomEvent("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}var customEvent=useNative()?NativeCustomEvent:"function"==typeof document.createEvent?function(t,e){var n=document.createEvent("CustomEvent");return e?n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail):n.initCustomEvent(t,!1,!1,void 0),n}:function(t,e){var n=document.createEventObject();return n.type=t,e?(n.bubbles=Boolean(e.bubbles),n.cancelable=Boolean(e.cancelable),n.detail=e.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n},eventmap=[],eventname="",ron=/^on/;for(eventname in commonjsGlobal)ron.test(eventname)&&eventmap.push(eventname.slice(2));var eventmap_1=eventmap,doc$1=commonjsGlobal.document,addEvent=addEventEasy,removeEvent=removeEventEasy,hardCache=[];commonjsGlobal.addEventListener||(addEvent=addEventHard,removeEvent=removeEventHard);var crossvent={add:addEvent,remove:removeEvent,fabricate:fabricateEvent};function addEventEasy(t,e,n,r){return t.addEventListener(e,n,r)}function addEventHard(t,e,n){return t.attachEvent("on"+e,wrap(t,e,n))}function removeEventEasy(t,e,n,r){return t.removeEventListener(e,n,r)}function removeEventHard(t,e,n){var r=unwrap(t,e,n);if(r)return t.detachEvent("on"+e,r)}function fabricateEvent(t,e,n){var r=-1===eventmap_1.indexOf(e)?new customEvent(e,{detail:n}):function(){var t;doc$1.createEvent?(t=doc$1.createEvent("Event")).initEvent(e,!0,!0):doc$1.createEventObject&&(t=doc$1.createEventObject());return t}();t.dispatchEvent?t.dispatchEvent(r):t.fireEvent("on"+e,r)}function wrapperFactory(n,t,r){return function(t){var e=t||commonjsGlobal.event;e.target=e.target||e.srcElement,e.preventDefault=e.preventDefault||function(){e.returnValue=!1},e.stopPropagation=e.stopPropagation||function(){e.cancelBubble=!0},e.which=e.which||e.keyCode,r.call(n,e)}}function wrap(t,e,n){var r=unwrap(t,e,n)||wrapperFactory(t,e,n);return hardCache.push({wrapper:r,element:t,type:e,fn:n}),r}function unwrap(t,e,n){var r=find(t,e,n);if(r){var i=hardCache[r].wrapper;return hardCache.splice(r,1),i}}function find(t,e,n){var r,i;for(r=0;r<hardCache.length;r++)if((i=hardCache[r]).element===t&&i.type===e&&i.fn===n)return r}var cache={},start="(?:^|\\s)",end="(?:\\s|$)";function lookupClass(t){var e=cache[t];return e?e.lastIndex=0:cache[t]=e=new RegExp(start+t+end,"g"),e}function addClass(t,e){var n=t.className;n.length?lookupClass(e).test(n)||(t.className+=" "+e):t.className=e}function rmClass(t,e){t.className=t.className.replace(lookupClass(e)," ").trim()}var classes={add:addClass,rm:rmClass},doc=document,documentElement=doc.documentElement;function dragula(t,e){var p,h,v,g,m,o,a,$,y,w,n;1===arguments.length&&!1===Array.isArray(t)&&(e=t,t=[]);var u,b=null,_=e||{};void 0===_.moves&&(_.moves=always),void 0===_.accepts&&(_.accepts=always),void 0===_.invalid&&(_.invalid=function(){return!1}),void 0===_.containers&&(_.containers=t||[]),void 0===_.isContainer&&(_.isContainer=never),void 0===_.copy&&(_.copy=!1),void 0===_.copySortSource&&(_.copySortSource=!1),void 0===_.revertOnSpill&&(_.revertOnSpill=!1),void 0===_.removeOnSpill&&(_.removeOnSpill=!1),void 0===_.direction&&(_.direction="vertical"),void 0===_.ignoreInputTextSelection&&(_.ignoreInputTextSelection=!0),void 0===_.mirrorContainer&&(_.mirrorContainer=doc.body);var x=emitter({containers:_.containers,start:function(t){var e=E(t);e&&S(e)},end:C,cancel:P,remove:j,destroy:function(){r(!0),q({})},canMove:function(t){return!!E(t)},dragging:!1});return!0===_.removeOnSpill&&x.on("over",function(t){classes.rm(t,"gu-hide")}).on("out",function(t){x.dragging&&classes.add(t,"gu-hide")}),r(),x;function s(t){return-1!==x.containers.indexOf(t)||_.isContainer(t)}function r(t){var e=t?"remove":"add";touchy(documentElement,e,"mousedown",f),touchy(documentElement,e,"mouseup",q)}function c(t){touchy(documentElement,t?"remove":"add","mousemove",d)}function l(t){var e=t?"remove":"add";crossvent[e](documentElement,"selectstart",i),crossvent[e](documentElement,"click",i)}function i(t){u&&t.preventDefault()}function f(t){if(o=t.clientX,a=t.clientY,!(1!==whichMouseButton(t)||t.metaKey||t.ctrlKey)){var e=t.target,n=E(e);n&&(u=n,c(),"mousedown"===t.type&&(isInput(e)?e.focus():t.preventDefault()))}}function d(t){if(u)if(0!==whichMouseButton(t)){if(void 0===t.clientX||t.clientX!==o||void 0===t.clientY||t.clientY!==a){if(_.ignoreInputTextSelection){var e=getCoord("clientX",t),n=getCoord("clientY",t);if(isInput(doc.elementFromPoint(e,n)))return}var r=u;c(!0),l(),C(),S(r);var i=getOffset(v);g=getCoord("pageX",t)-i.left,m=getCoord("pageY",t)-i.top,classes.add(w||v,"gu-transit"),function(){if(p)return;var t=v.getBoundingClientRect();(p=v.cloneNode(!0)).style.width=getRectWidth(t)+"px",p.style.height=getRectHeight(t)+"px",classes.rm(p,"gu-transit"),classes.add(p,"gu-mirror"),_.mirrorContainer.appendChild(p),touchy(documentElement,"add","mousemove",D),classes.add(_.mirrorContainer,"gu-unselectable"),x.emit("cloned",p,v,"mirror")}(),D(t)}}else q({})}function E(t){if(!(x.dragging&&p||s(t))){for(var e=t;getParent(t)&&!1===s(getParent(t));){if(_.invalid(t,e))return;if(!(t=getParent(t)))return}var n=getParent(t);if(n)if(!_.invalid(t,e))if(_.moves(t,n,e,nextEl(t)))return{item:t,source:n}}}function S(t){var e,n;e=t.item,n=t.source,("boolean"==typeof _.copy?_.copy:_.copy(e,n))&&(w=t.item.cloneNode(!0),x.emit("cloned",w,t.item,"copy")),h=t.source,v=t.item,$=y=nextEl(t.item),x.dragging=!0,x.emit("drag",v,h)}function C(){if(x.dragging){var t=w||v;A(t,getParent(t))}}function k(){c(!(u=!1)),l(!0)}function q(t){if(k(),x.dragging){var e=w||v,n=getCoord("clientX",t),r=getCoord("clientY",t),i=O(getElementBehindPoint(p,n,r),n,r);i&&(w&&_.copySortSource||!w||i!==h)?A(e,i):_.removeOnSpill?j():P()}}function A(t,e){var n=getParent(t);w&&_.copySortSource&&e===h&&n.removeChild(v),T(e)?x.emit("cancel",t,h,h):x.emit("drop",t,e,h,y),M()}function j(){if(x.dragging){var t=w||v,e=getParent(t);e&&e.removeChild(t),x.emit(w?"cancel":"remove",t,e,h),M()}}function P(t){if(x.dragging){var e=0<arguments.length?t:_.revertOnSpill,n=w||v,r=getParent(n),i=T(r);!1===i&&e&&(w?r&&r.removeChild(w):h.insertBefore(n,$)),i||e?x.emit("cancel",n,h,h):x.emit("drop",n,r,h,y),M()}}function M(){var t=w||v;k(),p&&(classes.rm(_.mirrorContainer,"gu-unselectable"),touchy(documentElement,"remove","mousemove",D),getParent(p).removeChild(p),p=null),t&&classes.rm(t,"gu-transit"),n&&clearTimeout(n),x.dragging=!1,b&&x.emit("out",t,b,h),x.emit("dragend",t),h=v=w=$=y=n=b=null}function T(t,e){var n;return n=void 0!==e?e:p?y:nextEl(w||v),t===h&&n===$}function O(n,r,i){for(var o=n;o&&!t();)o=getParent(o);return o;function t(){if(!1===s(o))return!1;var t=R(o,n),e=I(o,t,r,i);return!!T(o,e)||_.accepts(v,o,h,e)}}function D(t){if(p){t.preventDefault();var e=getCoord("clientX",t),n=getCoord("clientY",t),r=e-g,i=n-m;p.style.left=r+"px",p.style.top=i+"px";var o=w||v,a=getElementBehindPoint(p,e,n),u=O(a,e,n),s=null!==u&&u!==b;(s||null===u)&&(b&&d("out"),b=u,s&&d("over"));var c=getParent(o);if(u!==h||!w||_.copySortSource){var l,f=R(u,a);if(null!==f)l=I(u,f,e,n);else{if(!0!==_.revertOnSpill||w)return void(w&&c&&c.removeChild(o));l=$,u=h}(null===l&&s||l!==o&&l!==nextEl(o))&&(y=l,u.insertBefore(o,l),x.emit("shadow",o,u,h))}else c&&c.removeChild(o)}function d(t){x.emit(t,o,b,h)}}function R(t,e){for(var n=e;n!==t&&getParent(n)!==t;)n=getParent(n);return n===documentElement?null:n}function I(i,e,o,a){var u="horizontal"===_.direction;return e!==i?function(){var t=e.getBoundingClientRect();if(u)return n(o>t.left+getRectWidth(t)/2);return n(a>t.top+getRectHeight(t)/2)}():function(){var t,e,n,r=i.children.length;for(t=0;t<r;t++){if(e=i.children[t],n=e.getBoundingClientRect(),u&&n.left+n.width/2>o)return e;if(!u&&n.top+n.height/2>a)return e}return null}();function n(t){return t?nextEl(e):e}}}function touchy(t,e,n,r){commonjsGlobal.navigator.pointerEnabled?crossvent[e](t,{mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"}[n],r):commonjsGlobal.navigator.msPointerEnabled?crossvent[e](t,{mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"}[n],r):(crossvent[e](t,{mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"}[n],r),crossvent[e](t,n,r))}function whichMouseButton(t){if(void 0!==t.touches)return t.touches.length;if(void 0!==t.which&&0!==t.which)return t.which;if(void 0!==t.buttons)return t.buttons;var e=t.button;return void 0!==e?1&e?1:2&e?3:4&e?2:0:void 0}function getOffset(t){var e=t.getBoundingClientRect();return{left:e.left+getScroll("scrollLeft","pageXOffset"),top:e.top+getScroll("scrollTop","pageYOffset")}}function getScroll(t,e){return void 0!==commonjsGlobal[e]?commonjsGlobal[e]:documentElement.clientHeight?documentElement[t]:doc.body[t]}function getElementBehindPoint(t,e,n){var r,i=t||{},o=i.className;return i.className+=" gu-hide",r=doc.elementFromPoint(e,n),i.className=o,r}function never(){return!1}function always(){return!0}function getRectWidth(t){return t.width||t.right-t.left}function getRectHeight(t){return t.height||t.bottom-t.top}function getParent(t){return t.parentNode===doc?null:t.parentNode}function isInput(t){return"INPUT"===t.tagName||"TEXTAREA"===t.tagName||"SELECT"===t.tagName||isEditable(t)}function isEditable(t){return!!t&&("false"!==t.contentEditable&&("true"===t.contentEditable||isEditable(getParent(t))))}function nextEl(e){return e.nextElementSibling||function(){var t=e;for(;t=t.nextSibling,t&&1!==t.nodeType;);return t}()}function getEventHost(t){return t.targetTouches&&t.targetTouches.length?t.targetTouches[0]:t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t}function getCoord(t,e){var n=getEventHost(e),r={pageX:"clientX",pageY:"clientY"};return t in r&&!(t in n)&&r[t]in n&&(t=r[t]),n[t]}var dragula_1=dragula,template$8='<div>\n    <div class="list-group" dragula-container>\n        <a href="javascript:void(0)" class="list-group-item" ng-repeat="row in list track by row.id">\n            <div class="row">\n                <div class="col-xs-1">\n                    <select ng-init="setupWatch(this)" ng-model="selected" ng-change="$parent.move(row.order, selected, this)">\n                        <option ng-repeat="r in list" ng-selected="r.order === row.order" label="{{r.order+1}}" value="{{r.order}}">{{r.order+1}}</option>\n                    </select>\n                </div>\n                <div class="col-xs-11"> {{row.text}} </div>\n            </div>\n        </a>\n    </div>\n\t<div pi-quest-validation="model.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n\t<div pi-quest-validation="model.$error.correct">{{data.errorMsg.correct || "You must answer the correct answer!"}}</div>\n</div>\n';function directive$7(){return{replace:!0,require:["ngModel"],controller:"questController",controllerAs:"ctrl",template:template$8,scope:{data:"=questData"},link:function(n,e,t,r){var i=r[0],o=n.ctrl,a=n.data,u=lodash$1.isArray(a.list)&&a.list.length?lodash$1.range(1,a.list.length+1):[];o.registerModel(i,{dflt:lodash$1.get(a,"randomize",!0)?lodash$1.shuffle(u):u}),i.$isEmpty=function(t){return lodash$1.isEqual(t,lodash$1.range(1,l.length+1))};var s,c,l=n.list=o.log.response.map(function(t,e){return{order:e,id:t,text:a.list[t-1]}});n.$watchCollection("list",function(){n.response=lodash$1.pluck(l,"id")}),n.setupWatch=function(t){t.$watch("$parent.response",function(){t.$evalAsync("selected = row.order")})},n.reset=function(){l=n.list=lodash$1.sortBy(l,"id")},n.move=function(t,e){var n,r,i,o;i=e,o=(n=l)[r=t],n.splice(r,1),n.splice(i,0,o),l.forEach(function(t,e){t.order=e})};var f=dragula_1({isContainer:function(t){return t.hasAttribute("dragula-container")&&e[0].contains(t)}});function d(t,e){return Array.prototype.indexOf.call(angular.element(e).children(),t)}function p(t){var e=i;return e.$isEmpty(t)?void e.$setValidity("required",!1):(e.$setValidity("required",!0),t)}f.on("drag",function(t,e){s=d(t,e)}),f.on("drop",function(t,e){c=d(t,e),n.move(s,c),n.$digest()}),n.$on("$destroy",f.destroy),a.required&&(i.$formatters.push(p),i.$parsers.unshift(p),p(n.response))}}}directive$7.$inject=["$compile"];var grid='<div ng-form class="table-responsive" ng-class="{\'pi-page-submitted\':$parent.$parent.submitAttempt}">\n\t<table class="table table-hover">\n\t\t<colgroup>\n\t\t\t<col\n\t\t\t\tng-if="!data.rowStemHide"\n\t\t\t></col>\n\t\t\t<col\n\t\t\t\tng-repeat="column in columns"\n\t\t\t\tng-style="column.css"\n\t\t\t></col>\n\t\t</colgroup>\n\t\t<thead ng-if="!data.columnStemHide">\n\t\t\t<tr>\n\t\t\t\t<th\n\t\t\t\t\tng-style="allCss(data.columnStemCss,column.stemCss, data.rowStemCss)"\n\t\t\t\t\tng-if="!data.rowStemHide"\n\t\t\t\t></th>\n\t\t\t\t<th\n\t\t\t\t\tng-repeat="column in columns"\n\t\t\t\t\tng-bind-html="column.stem"\n\t\t\t\t\tng-style="allCss(data.columnStemCss,column.stemCss)"\n\t\t\t\t></th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr\n\t\t\t\tng-repeat="row in rows"\n\t\t\t\tquest-grid-row="row"\n\t\t\t\tquest-grid-data="data"\n\t\t\t\tng-model="$parent.$parent.current.questions[row.name]"\n\t\t\t\tng-required="{{data.required || row.required}}"\n\t\t\t></tr>\n\t\t</tbody>\n\t</table>\n\t<div pi-quest-validation="form.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n</div>';function gridDirective$1(c){return{replace:!0,template:grid,require:["ngModel","form"],controller:"questController",controllerAs:"ctrl",scope:{data:"=questData",current:"=questCurrent"},link:function(e,t,n,r){var i,o,a=r[0],u=e.ctrl,s=e.data;e.form=r[1],e.columns=(s.columns||[]).map(f),e.rows=(i=s.rows,o=s,lodash$1(i||[]).map(f).each(function(t,e){t.hasOwnProperty("name")||(t.name=o.name+function(t,e){var n=Math.abs(t),r=1+Math.floor(Math.log(n)/Math.LN10);if(e<=r)return t;var i=Math.pow(10,e-r).toString().substr(1);return t<0?"-"+i+n:i+n}(e+1,3))}).thru(o.shuffle?c:lodash$1.identity).value()),e.allCss=l,e.$watchCollection(function(){return lodash$1.pluck(e.rows,"$response")},function(t){e.response=lodash$1.reduce(t,function(t,e){return lodash$1.isFinite(e)?t+e:t},0)}),u.registerModel(a,{dflt:0})}};function l(){var t=lodash$1.toArray(arguments);return t.unshift({}),lodash$1.extend.apply(lodash$1,t)}function f(t){return lodash$1.isPlainObject(t)?t:{stem:t}}}gridDirective$1.$inject=["questShuffle"];var gridRow='<tr>\n\t<th\n\t\tscope="row"\n\t\tng-if="!data.rowStemHide"\n\t\tng-bind-html="row.stem"\n\t\tng-style="data.rowStemCss"\n\t></th>\n\t<td ng-repeat="column in columns">\n\t\t<div ng-switch="column.type">\n\t\t\t<button\n\t\t\t\tclass="btn btn-default"\n\t\t\t\tng-switch-when="checkbox"\n\t\t\t\tbtn-radio="row.reverse && !column.noReverse ? column.reverseValue : column.value"\n\t\t\t\tng-model="$parent.$parent.response"\n\t\t\t\tng-class="data.checkboxType"\n\t\t\t\tuncheckable\n\t\t\t></button>\n\t\t\t<div\n\t\t\t\tclass="text"\n\t\t\t\tng-switch-when="text"\n\t\t\t\tng-bind-html="row[column.textProperty]"\n\t\t\t></div>\n\t\t\t<div\n\t\t\t\tclass="grid-input input-group input-group-small"\n\t\t\t\tng-switch-when="input"\n                ng-init="response=\'\'"\n                title="insert your response"\n\t\t\t>\n                <span class="input-group-addon">\n                    <span class="glyphicon glyphicon-edit" ng-class="{active:$parent.$parent.response===response}"></span>\n                </span>\n                <input type="text" class="form-control" ng-model="response" ng-change="$parent.$parent.response = response">\n            </div>\n            <div ng-switch-when="dropdown" ng-init="response=\'\'"> \n                <select ng-model="response" ng-change="$parent.$parent.response = response" class="form-control">\n                    <option value="" ng-selected="response===undefined">----</option>\n                    <option ng-repeat="r in column.answers" ng-selected="r.value === $parent.$parent.response" value="{{r.value}}">{{r.text}}</option>\n                </select>\n            </div>\n\t\t</div>\n\t\t<div\n\t\t\tclass="cell-labels"\n\t\t\tng-if="data.cellLabels"\n\t\t\tng-bind-html="column.stem"\n\t\t></div>\n\t</td>\n</tr>\n';function gridRowDirective$1(){return{replace:!0,template:gridRow,require:["ngModel"],controller:"questController",controllerAs:"ctrl",scope:{row:"=questGridRow",data:"=questGridData"},link:function(n,t,e,r){var i=r[0],o=n.ctrl,a=n.columns=n.$parent.columns.map(function(t,e){return lodash$1.get(n,"row.overwrite["+e+"]")||t}).map(function(t){return t.hasOwnProperty("type")||(t.type="checkbox"),"dropdown"==t.type&&(lodash$1.isArray(t.answers)||(t.answers=[]),t.answers=t.answers.map(function(t,e){return lodash$1.isObject(t)||(t={text:t}),"value"in t||(t.value=e+1),t})),t});a.filter(function(t){return"text"!=t.type}).forEach(function(t,e){t.hasOwnProperty("value")||(t.value=e+1)}),a.filter(function(t){return!t.noReverse}).filter(function(t){return"text"!=t.type}).forEach(function(t,e,n){t.reverseValue=n[n.length-e-1].value}),n.model=i,n.$watch("response",function(t){n.row.$response=t}),o.registerModel(i,{data:n.row})}}}var multiGrid='<div ng-form class="table-responsive" ng-class="{\'pi-page-submitted\':$parent.$parent.submitAttempt}">\n\t<table class="table table-hover">\n\t\t<colgroup>\n\t\t\t<col\n\t\t\t\tng-if="!data.rowStemHide"\n\t\t\t></col>\n\t\t\t<col\n\t\t\t\tng-repeat="column in columns"\n\t\t\t\tng-style="column.css"\n\t\t\t></col>\n\t\t</colgroup>\n\t\t<thead ng-if="!data.columnStemHide">\n\t\t\t<tr>\n\t\t\t\t<th\n\t\t\t\t\tng-style="allCss(data.columnStemCss,column.stemCss, data.rowStemCss)"\n\t\t\t\t\tng-if="!data.rowStemHide"\n\t\t\t\t></th>\n\t\t\t\t<th\n\t\t\t\t\tng-repeat="column in columns"\n\t\t\t\t\tng-bind-html="column.stem"\n\t\t\t\t\tng-style="allCss(data.columnStemCss,column.stemCss)"\n\t\t\t\t></th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr\n\t\t\t\tng-repeat="row in rows"\n\t\t\t\tquest-multi-grid-row="row"\n\t\t\t\tquest-multi-grid-data="data"\n\t\t\t\tng-model="$parent.$parent.current.questions[row.name]"\n\t\t\t></tr>\n\t\t</tbody>\n\t</table>\n\t<div pi-quest-validation="form.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n\t<div pi-quest-validation="form.$error.pattern">{{data.errorMsg.pattern || "wrong pattern!"}}</div>\n</div>\n';function gridDirective$2(u){return{replace:!0,template:multiGrid,require:["ngModel","form"],controllerAs:"ctrl",scope:{data:"=questData",current:"=questCurrent"},link:function(t,e,n,r){var i,o,a=t.data;t.form=r[1],t.columns=(a.columns||[]).map(c),t.rows=(i=a.rows,o=a,lodash$1(i||[]).map(c).each(function(t,e){t.hasOwnProperty("name")||(t.name=o.name+function(t,e){var n=Math.abs(t),r=1+Math.floor(Math.log(n)/Math.LN10);if(e<=r)return t;var i=Math.pow(10,e-r).toString().substr(1);return t<0?"-"+i+n:i+n}(e+1,3))}).thru(o.shuffle?u:lodash$1.identity).value()),t.allCss=s}};function s(){var t=lodash$1.toArray(arguments);return t.unshift({}),lodash$1.extend.apply(lodash$1,t)}function c(t){return lodash$1.isPlainObject(t)?t:{stem:t}}}gridDirective$2.$inject=["questShuffle"];var multiGridRow='<tr>\n\t<th\n\t\tscope="row"\n\t\tng-if="!data.rowStemHide"\n\t\tng-bind-html="row.stem"\n\t\tng-style="data.rowStemCss"\n\t></th>\n\t<td ng-repeat="column in columns">\n\t\t<div ng-switch="column.type">\n\t\t\t<button\n\t\t\t\tclass="btn btn-default"\n\t\t\t\tng-switch-when="checkbox"\n\t\t\t\tbtn-checkbox\n                btn-checkbox-true="column.value || true"\n\t\t\t\tng-model="$parent.$parent.response[$index]"\n\t\t\t\tng-class="data.checkboxType"\n\t\t\t\tuncheckable\n\t\t\t></button>\n\t\t\t<div\n\t\t\t\tclass="text"\n\t\t\t\tng-switch-when="text"\n\t\t\t\tng-bind-html="row[column.textProperty]"\n\t\t\t></div>\n\t\t\t<div\n\t\t\t\tclass="grid-input input-group input-group-small"\n\t\t\t\tng-switch-when="input"\n                title="insert your response"\n\t\t\t>\n                <span class="input-group-addon glyphicon glyphicon-edit"></span>\n                <input type="text" class="form-control" ng-model="$parent.$parent.response[$index]" >\n            </div>\n            <div ng-switch-when="dropdown"> \n                <select ng-model="$parent.$parent.response[$index]" class="form-control" ng-options="r.value as r.text for r in column.answers">\n                    <option value="">{{column.chooseText || "-- Choose an option --"}}</option>\n                </select>\n            </div>\n\t\t</div>\n\t\t<div\n\t\t\tclass="cell-labels"\n\t\t\tng-if="data.cellLabels"\n\t\t\tng-bind-html="column.stem"\n\t\t></div>\n\t</td>\n</tr>\n';function gridRowDirective$2(){return{replace:!0,template:multiGridRow,require:["ngModel"],controller:"questController",controllerAs:"ctrl",scope:{row:"=questMultiGridRow",data:"=questMultiGridData"},link:function(i,t,e,n){var o=n[0],r=i.ctrl;function a(r){var t=i.columns.every(function(t,e){var n=r[e];if(!i.data.required&&!i.row.required&&!t.required)return!0;switch(t.type){case"text":return!0;case"input":return""!==n;case"dropdown":return!isNaN(n)&&null!==n;default:return n}});return o.$setValidity("required",t),r}i.model=o,i.columns=i.$parent.columns.map(function(t,e){return lodash$1.get(i,"row.overwrite["+e+"]",t)}).map(function(t){return t.hasOwnProperty("type")||(t.type="checkbox"),"dropdown"==t.type&&(lodash$1.isArray(t.answers)||(t.answers=[]),t.answers=t.answers.map(function(t,e){return lodash$1.isObject(t)||(t={text:t}),"value"in t||(t.value=e+1),t})),t}),r.registerModel(o,{data:i.row,dflt:(i.columns||[]).map(mapDefault)}),o.$parsers.unshift(a),o.$parsers.unshift(function(r){var t=i.columns.every(function(t,e){var n=r[e];if("input"!==t.type||!t.pattern)return!0;return!(!lodash$1.isNumber(n)&&!lodash$1.isString(n))&&new RegExp(t.pattern).test(n)});return o.$setValidity("pattern",t),r}),a(o.$viewValue),i.$watchCollection("response",function(t){o.$setViewValue(t.slice())})}}}function mapDefault(t){return"string"!=typeof t&&("text"===t.type?null:"input"===t.type?"":"dropdown"===t.type&&NaN)}var slider='<div ng-form dir="ltr">\n\t<div\n\t\tpi-slider\n\t\tng-model="sliderResponse"\n\t\tpi-slider-options="data"\n\t\tng-required="{{data.required}}"\n\t></div>\n\t<h4 ng-if="data.displayValue" class="text-center"><span class="label label-info">{{ sliderResponse | number }}</span></h4>\n\t<div pi-quest-validation="form.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n</div>\n';function sliderDirective$1(){return{replace:!0,template:slider,require:["form","ngModel"],controller:"questController",controllerAs:"ctrl",scope:{data:"=questData"},link:function(n,t,e,r){var i=r[0],o=r[1],a=n.ctrl,u=n.data;n.form=i,a.registerModel(o,{dflt:void 0}),n.sliderResponse=n.response;var s=n.$on("slider:change",function(t,e){n.$apply(function(){n.response=e}),u.autoSubmit&&n.$apply(function(){n.$emit("quest:submit:now")})});n.$on("quest:timeout",s)}}}var slider$1=slider$2();function slider$2(){function t(d){return{scope:{options:"=piSliderOptions"},replace:!0,require:"ngModel",template:['<div class="slider" ng-class="{\'slider-ticks\':options.showTicks}" pi-pointerdown="onSliderMouseDown($event)">','<div class="slider-label-left" ng-style="options.leftLabelCss">{{options.leftLabel}}</div>','<div class="slider-label-right" ng-style="options.rightLabelCss">{{options.rightLabel}}</div>','<div class="slider-container">','<div class="slider-bar">','<div class="slider-bar-highlight" ng-style="highlightStyle"></div>',"</div>",'<div class="slider-handle" pi-pointerdown="onHandleMousedown($event)" ng-style="handleStyle"></div>',"</div>",'<ul class="slider-pips" ng-if="!options.hidePips">','<li ng-repeat="i in getNumber(steps) track by $index" ng-style="{width: pipWidth + \'%\'}" ng-class="{last:$last}"></li>',"</ul>",'<ul class="slider-labels">','<li ng-repeat="label in labels track by $index" ng-style="{width: labelsWidth + \'%\'}" ng-class="{first:$first, last:$last}">{{label}}</li>',"</ul>","</div>"].join("\n"),link:function(o,a,t,u){var s,i=o.options||{};function c(t){u.$setViewValue(t),u.$render()}function l(t){return!o.steps||u.$isEmpty(t)?t:Math.round(t*o.steps)/o.steps}function f(t){var n,r;function i(t){p(t),t.preventDefault();var e=n+(t.pageX-r)/(a.prop("clientWidth")-s);e=Math.min(e,1),e=Math.max(e,0),o.$apply(function(){c(e)})}p(t),t.preventDefault(),t.stopPropagation(),r=t.pageX,n=u.$viewValue,d.on("mousemove touchmove",i),d.on("mouseup touchend",function t(e){e.preventDefault();d.off("mousemove touchmove",i);d.off("mouseup touchend",t);o.$emit("slider:change",u.$modelValue)})}s=a[0].querySelector(".slider-handle").clientWidth,o.ngModel=u,o.min=i.min||0,o.max=i.max||o.min+100,o.range=o.max-o.min,o.steps=i.steps?i.steps-1:0,o.pipWidth=i.steps&&100/o.steps,o.labels=i.labels,o.labelsWidth=i.labels&&100/i.labels.length,u.$isEmpty=e,u.$render=function(){var t=l(u.$viewValue),e=!isNaN(t),n=e?"block":"none",r=e&&i.highlight?"block":"none";switch(i.highlightDirection){case"rtl":o.highlightStyle={left:100*t+"%",display:r};break;case"center":o.highlightStyle=.5<t?{left:"50%",width:100*(t-.5)+"%",display:r}:{right:"50%",width:100*(.5-t)+"%",display:r};break;default:o.highlightStyle={right:100-100*t+"%",display:r}}o.handleStyle={left:100*t+"%",display:n}},u.$formatters.push(function(t){if(u.$isEmpty(t))return NaN;return((t=Math.min(Math.max(t,o.min),o.max))-o.min)/o.range}),u.$parsers.push(function(t){return+(o.min+l(t)*o.range).toFixed(4)}),o.onHandleMousedown=f,o.onSliderMouseDown=function(t){p(t),t.preventDefault();var e=a.prop("clientWidth"),n=a[0].getBoundingClientRect().left,r=(t.pageX-n-s/2)/(e-s);r=Math.min(r,1),c(r=Math.max(r,0)),f(t)},o.getNumber=function(t){return new Array(t)}}}}return t.$inject=["$document","$sce"],t;function p(t){var e,n,r;null==t.pageX&&null!=t.clientX&&(n=(e=t.target.ownerDocument||document).documentElement,r=e.body,t.pageX=t.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0),t.pageY=t.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0)),null==t.pageX&&t.touches&&(t.pageX=t.touches[0].pageX,t.pageY=t.touches[0].pageY)}function e(t){return isNaN(parseFloat(t))||!isFinite(t)}}var EVENTNAME="touchstart mousedown",DIRECTIVENAME="piPointerdown";function piPointerdownDirective(n){return{compile:function(t,e){var r=n(e[DIRECTIVENAME],!0);return function(e,t){function n(t){e.$apply(function(){r(e,{$event:t})})}t.on(EVENTNAME,n),e.$on("$destroy",function(){t.off(EVENTNAME,n)})}}}}function toRegexFilter(n){return function(t){var e;if(lodash$1.isUndefined(t))return/(?:)/;{if(lodash$1.isRegExp(t)||lodash$1.isString(t))return new RegExp(t);throw e=new Error("Question pattern is not a valid regular expression"),n({tags:"text",type:"error",message:"pattern",error:e,context:t}),e}}}piPointerdownDirective.$inject=["$parse"],toRegexFilter.$inject=["piConsole"];var dfltUnitsFilter=function(){return dfltUnits};function dfltUnits(t,e){return t||0===t||"0"===t?isNumeric(t)?t+(lodash$1.isUndefined(e)?"px":String(e)):t:""}function isNumeric(t){return!lodash$1.isArray(t)&&0<=t-parseFloat(t)+1}var module$8=angular.module("questDirectives",[module$9.name,module$10.name,buttons.name,module$6.name,module$7.name,module$11.name]);module$8.controller("questController",questController$1),module$8.factory("questGuid",guidFactory),module$8.directive("piQuest",directive),module$8.directive("piqPage",directive$1),module$8.directive("questWrapper",directive$2),module$8.directive("questInfo",function(){return{}}),module$8.directive("questText",textDirective),module$8.directive("questTextarea",textDirective),module$8.directive("questTextNumber",directive$3),module$8.service("questSelectMixer",selectMixerProvider),module$8.directive("questDropdown",directive$4),module$8.directive("questSelectOne",directive$5),module$8.directive("questSelectMulti",directive$6),module$8.directive("questRank",directive$7),module$8.value("questShuffle",lodash$1.shuffle),module$8.directive("questGrid",gridDirective$1),module$8.directive("questGridRow",gridRowDirective$1),module$8.directive("questMultiGrid",gridDirective$2),module$8.directive("questMultiGridRow",gridRowDirective$2),module$8.directive("questSlider",sliderDirective$1),module$8.directive("piSlider",slider$1),module$8.directive("piPointerdown",piPointerdownDirective),module$8.config(["$sceProvider",function(t){t.enabled(!1)}]),module$8.directive("piQuestValidation",function(){return{replace:!0,transclude:!0,scope:{unvalid:"=piQuestValidation",postSubmit:"=piPostSubmit"},template:['<div class="alert alert-danger" role="alert" ng-show="unvalid && ($parent.$parent.$parent.submitAttempt || postSubmit)">','<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>',"<span ng-transclude></span>","</div>"].join("")}}),module$8.filter("toRegex",toRegexFilter),module$8.filter("dfltUnits",dfltUnitsFilter),module$8.directive("piqPage",function(){return{link:function(t,n){t.page.autoFocus&&setTimeout(function(){var t=n[0].querySelector("[quest-wrapper]"),e=t&&t.querySelector("input, textArea, select, button");e&&e.focus()})}}});var module$1=angular.module("piQuest",[module$8.name,module$2.name]);function directive$8(u,s,c,l){return{link:function(r,t){var e,i=r.script,n=r.newScope=r.$new(),o={global:s.global,current:s.current,task:i,tasksData:lodash$1.get(i,"data",{})};null==i.$template&&l({tags:"message",type:"error",message:"missing template for message",context:i});try{e=lodash$1.template(i.$template)(o)}catch(t){e=i.$template,l({tags:"message",type:"error",message:"failed to render template",error:t})}function a(t){var e=lodash$1.isArray(i.keys)?i.keys:[i.keys],n=lodash$1.map(e,function(t){return lodash$1.isString(t)?t.toUpperCase().charCodeAt(0):t});~lodash$1.indexOf(n,t.which)&&r.done()}lodash$1.extend(r,o),r.done=function(){n.$destroy(),t.empty(),r.$emit("message:done")},c.on("keydown",a),r.$on("$destroy",function(){c.off("keydown",a)}),t.html(e),u(t.contents())(n)}}}function directive$9(){return{link:function(t,e){e.on("click",function(){t.done()})}}}directive$8.$inject=["$compile","$rootScope","$document","piConsole"],directive$9.$inject=[];var module$12=angular.module("pi.message",[module$7.name]);function provider(){var n={};this.$get=taskActivateProvider,this.set=function(t,e){n[t]=e},this.get=function(t){return n[t]}}function taskActivateProvider(c,l,f){var d=this;return function(t,e,n,r){var i,o=c.defer(),a=l.global,u=t.$script,s=function(t,e){var n;if(lodash$1.isFunction(t)||lodash$1.isArray(t))return t;if(t&&lodash$1.isFunction(t.play))return(n=lodash$1.bind(t.play,t)).$inject=f.annotate(t.play),n;if(t&&lodash$1.isArray(t.play))return(n=lodash$1.bind(lodash$1.last(t.play),t)).$inject=f.annotate(t.play),n;if(e.type)return d.get(e.type);throw new Error('Activator function not found for the "'+e.type+'" task')}(u,t);return i=f.invoke(s,null,{done:lodash$1.bind(o.resolve,o),task:t,script:u,$element:e,$scope:n,global:a,logger:r}),lodash$1.isFunction(i)&&o.promise.finally(i),o}}function directive$10(g,m,$,y,w,b){return{scope:{task:"=piTask"},link:function(t,e){var n,r,i,o,a,u=t.task,s=u.$script||{},c=u.$name,l=t.$parent.settings||{},f=t.$parent.manager.logger,d=window.piGlobal;function p(t){var e=t.which||t.keyCode,n=(t.key||"").toUpperCase();82!=e&&"R"!=n||!t.ctrlKey||(v(t,"current"),t.preventDefault()),27==e&&$.one("keydown",h)}function h(t){var e=t.which||t.keyCode;37==e&&v(t,"prev"),39==e&&v(t,"next")}function v(t,e){t.preventDefault(),a={type:e,bustCache:!0},i.resolve()}u&&(l.skip&&!0===window.DEBUG&&($.on("keydown",p),t.$on("$destroy",function(){$.off("keydown",p),$.off("keydown",h)})),w.current=d.current=s.current||{},c&&(d[c]&&b({type:"warn",tags:["task"],message:'This taskName has already been in use: "'+c+'"'}),lodash$1.extend(w.current,d[c]||{}),y.piGlobal[c]=s.current),o=(i=g(u,e,t.$new(),f)).promise,n=m(u.canvas),o.finally(n),u.title&&(r=$[0].title,$[0].title=u.title,o.finally(function(){$[0].title=r})),o.finally(function(){t.$emit("task:done",a)}))}}}function createLog(t,e,n){var r=n.$name,i=n.type,o=cloneSet(lodash$1.get(e,"settings.logger",{}),lodash$1.camelCase("is-"+i),!0),a=t.createLog(r,o),u=t.createLog(r,cloneSet(o,"isSave",!0));return a.end(u.end),e._save=u,e._toSave&&(e._toSave.map(u),e._toSave.length=0),a}function cloneSet(t,e,n){return lodash$1.assign(lodash$1.set({},e,n),t)}function activateQuest$1(t,e,n,r,i,o,a){var u,s=createLog(a,i,o);i.name=o.$name,n.script=i,e.append("<div pi-quest></div>"),r(u=e.contents())(n),u.controller("piQuest").task.promise.finally(t);var c=u.controller("piQuest").task.$logs;return c.map(s),c.end.map(s.end),function(){u.scope().$destroy(),u.remove()}}function activateMessage$1(t,e,n,r,i){var o;return r.script=n,e.append("<div pi-message></div>"),i(o=e.contents())(r),r.$on("message:done",function(){t()}),function(){r.$destroy(),o.remove()}}function xhr(r){return new Promise(function(t,e){var n=new XMLHttpRequest;n.open(r.method||"POST",r.url,!0),n.setRequestHeader("Content-Type",r.contentType||"application/json; charset=UTF-8"),n.onreadystatechange=function(){4===n.readyState&&(200<=n.status&&n.status<400?t(n.responseText):e(new Error('Failed sending to: "'+r.url+'". '+n.statusText+" ("+n.status+")")))},n.send(r.body)})}module$12.directive("piMessage",directive$8),module$12.directive("piMessageDone",directive$9),taskActivateProvider.$inject=["$q","$rootScope","$injector"],directive$10.$inject=["taskActivate","managerCanvas","$document","$window","$rootScope","piConsole"],activateQuest$1.$inject=["done","$element","$scope","$compile","script","task","logger"],activateMessage$1.$inject=["done","$element","task","$scope","$compile"];var csvLogger={onRow:function(t,e,n,r){(r.csv||(r.csv=[])).push(lodash$1.assign({taskName:t},e))},onEnd:function(t,e,n){if("manager"==t)return n.logs},serialize:function(t,e){return toCsv(createMatrix(e))},send:function(e,n,r,i){return xhr({url:lodash$1.isString(r.postCsv)?r.postCsv:r.url,body:n}).catch(function(t){r.onError.apply(null,[t,e,n,r,i])})}};function createMatrix(t){var e,r=GetIndex(),n=t.map(function(t){var n=[];return lodash$1.forEach(t,function(t,e){n[r(e)]="object"==typeof t?JSON.stringify(t):t}),n}),i=r();return n.forEach((e=i.length,function(t){t.length=e})),[i].concat(n)}function GetIndex(){var e={taskName:0},n=1;return function(t){return arguments.length?t in e?e[t]:e[t]=n++:lodash$1.keys(e)}}var quotableRgx=/(\n|,|")/;function toCsv(t){return t.map(buildRow).join("\n")}function buildRow(t){return t.map(normalize).join(",")}function normalize(t){return quotableRgx.test(t)?'"'+t.replace(/"/g,'""')+'"':t}function postCsv(t,e,n){var r=n.ctx.logs;if(!r||!r.length)return t();var i=csvLogger.serialize("manager",r);csvLogger.send("manager",i,e).then(function(){r.length=0}).finally(t)}function activatePost$1(n,r,t,e,i,o){var a=e.defer(),u=i.global,s=r.path?lodash$1.get(u,r.path):r.data;return t.post(r.url,s,{timeout:a.promise}).then(n,function(t){var e=new Error('Post error("'+r.url+'"): '+t.statusText);throw n(),o({type:"error",error:e,message:"Post error",context:r}),e}),a.resolve}function activateRedirect$1(t,e,n){if(!lodash$1.result(e,"condition",!0))return t();n.deactivate(),location.href=e.url}function activatePIP$1(e,t,n,r,i,o){var a,u,s,c=createLog(o,r,n);return r.name=n.$name,.4<n.version?(t.append("<div pi-player></div>"),a=t.contents(),requirejs$1([n.baseUrl+"/dist/time.js"],function(t){(s=t(a[0],r)).onEnd(e),s.$messages.map(i),s.$logs.map(c),s.$logs.end.map(c.end)},function(t){throw i({type:"error",message:"Failed to load minno-time, please make sure that task.baseUrl is set correctly",error:t}),t}),function(){c.end(!0),a.remove(),s&&s.end()}):(u=requirejs$1.config({context:lodash$1.uniqueId(),baseUrl:n.baseUrl+"/dist/js",paths:{text:["//cdnjs.cloudflare.com/ajax/libs/require-text/2.0.3/text.min","../../bower_components/require-text/text"],jquery:["//cdnjs.cloudflare.com/ajax/libs/jquery/1.10.2/jquery.min","../../bower_components/jquery/dist/jquery.min"],underscore:["//cdnjs.cloudflare.com/ajax/libs/lodash.js/3.10.1/lodash.min","../../bower_components/lodash-compat/lodash.min"],backbone:["//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min","../../bower_components/backbone/backbone"]},deps:["jquery","backbone","underscore"]}),n.name&&(r.name=n.name),t.append("<div pi-player></div>"),(a=t.contents()).addClass("pi-spinner"),u(["activatePIP"],function(t){a.removeClass("pi-spinner"),t(r,e)}),function(){a.remove(),u(["app/task/main_view"],function(t){t.deferred.resolve(),t.destroy()})})}function log(){console.log.apply(console,arguments)}postCsv.$inject=["done","task","logger"],activatePost$1.$inject=["done","task","$http","$q","$rootScope","piConsole"],activateRedirect$1.$inject=["done","task","managerBeforeUnload"],activatePIP$1.$inject=["done","$element","task","script","piConsole","logger"],Date.now||(Date.now=function(){return(new Date).getTime()}),function(t){var e,n=["now","webkitNow","msNow","mozNow"];if(t.performance)for(var r=0;r<n.length;++r){var i=n[r];if(t.performance[i]){e=function(){return t.performance[i]()};break}}e||(e=Date.now),t.perfNow=e}(window),console.group||(console.group=log),console.groupCollapsed||(console.groupCollapsed=log),console.groupEnd||(console.groupEnd=log),console.table||(console.table=log),function(){for(var t=["webkit","moz"],e=0;e<t.length&&!window.requestAnimationFrame;++e){var n=t[e];window.requestAnimationFrame=window[n+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var r=0;window.requestAnimationFrame=function(t){var e=Date.now(),n=Math.max(r+16,e);return setTimeout(function(){t(r=n)},n-e)},window.cancelAnimationFrame=clearTimeout}}();var PromisePolyfill=function(t){if(!(this instanceof PromisePolyfill))throw new Error("Promise must be called with `new`");if("function"!=typeof t)throw new TypeError("executor must be a function");var o=this,a=[],u=[],i=e(a,!0),s=e(u,!1),c=o._instance={resolvers:a,rejectors:u},l="function"==typeof setImmediate?setImmediate:setTimeout;function e(r,i){return function e(n){var t;try{if(!i||null==n||"object"!=typeof n&&"function"!=typeof n||"function"!=typeof(t=n.then))l(function(){i||0!==r.length||console.error("Possible unhandled promise rejection:",n);for(var t=0;t<r.length;t++)r[t](n);a.length=0,u.length=0,c.state=i,c.retry=function(){e(n)}});else{if(n===o)throw new TypeError("Promise can't be resolved w/ itself");f(t.bind(n))}}catch(t){s(t)}}}function f(t){var n=0;function e(e){return function(t){0<n++||e(t)}}var r=e(s);try{t(e(i),r)}catch(t){r(t)}}f(t)};function styleInject(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}PromisePolyfill.prototype.then=function(t,e){var i,o,a=this._instance;function n(e,t,n,r){t.push(function(t){if("function"!=typeof e)n(t);else try{i(e(t))}catch(t){o&&o(t)}}),"function"==typeof a.retry&&r===a.state&&a.retry()}var r=new PromisePolyfill(function(t,e){i=t,o=e});return n(t,a.resolvers,i,!0),n(e,a.rejectors,o,!1),r},PromisePolyfill.prototype.catch=function(t){return this.then(null,t)},PromisePolyfill.resolve=function(e){return e instanceof PromisePolyfill?e:new PromisePolyfill(function(t){t(e)})},PromisePolyfill.reject=function(n){return new PromisePolyfill(function(t,e){e(n)})},PromisePolyfill.all=function(u){return new PromisePolyfill(function(n,r){var i=u.length,o=0,a=[];if(0===u.length)n([]);else for(var t=0;t<u.length;t++)!function(e){function t(t){o++,a[e]=t,o===i&&n(a)}null==u[e]||"object"!=typeof u[e]&&"function"!=typeof u[e]||"function"!=typeof u[e].then?t(u[e]):u[e].then(t,r)}(t)})},PromisePolyfill.race=function(r){return new PromisePolyfill(function(t,e){for(var n=0;n<r.length;n++)r[n].then(t,e)})},void 0===window.Promise&&(window.Promise=PromisePolyfill);var css=".minno-canvas{height:400px;width:500px;position:relative;border:5px solid #fff;margin:auto;margin-top:10px;-webkit-text-size-adjust:none;-webkit-touch-callout:none;-webkit-tap-highlight-color:transparent;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.minno-stimulus{position:absolute;text-align:center;overflow:hidden;visibility:hidden;width:fit-content}.minno-stimulus-visible{visibility:visible}.minno-stimulus-center-x{left:50%;transform:translateX(-50%)}.minno-stimulus-center-y{top:50%;transform:translateY(-50%)}.minno-stimulus-center-y.minno-stimulus-center-x{transform:translate(-50%,-50%)}.minno-progress{background-color:#20201f;border-radius:20px;padding:4px;position:relative;top:50%;width:80%;margin-left:10%;margin-top:-12px}.minno-progress-bar{background-color:#807b7a;width:0;height:16px;border-radius:10px}";styleInject(css);var lodash$2=createCommonjsModule(function($,y){
/**
 * @license
 * lodash 3.10.1 (Custom Build) <https://lodash.com/>
 * Build: `lodash modern -d -o ./index.js`
 * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <https://lodash.com/license>
 */
(function(){var hi,t,e,vi="3.10.1",gi=1,mi=2,$i=4,yi=8,wi=16,bi=32,_i=64,xi=128,Ei=256,Si=30,Ci="...",ki=150,qi=16,Ai=200,ji=1,Pi=2,Mi="Expected a function",Ti="__lodash_placeholder__",Oi="[object Arguments]",Di="[object Array]",Ri="[object Boolean]",Ii="[object Date]",Ni="[object Error]",Ui="[object Function]",n="[object Map]",Li="[object Number]",Fi="[object Object]",zi="[object RegExp]",r="[object Set]",Bi="[object String]",i="[object WeakMap]",Vi="[object ArrayBuffer]",Wi="[object Float32Array]",Hi="[object Float64Array]",Gi="[object Int8Array]",Qi="[object Int16Array]",Yi="[object Int32Array]",Xi="[object Uint8Array]",Ji="[object Uint8ClampedArray]",Ki="[object Uint16Array]",Zi="[object Uint32Array]",to=/\b__p \+= '';/g,eo=/\b(__p \+=) '' \+/g,no=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ro=/&(?:amp|lt|gt|quot|#39|#96);/g,io=/[&<>"'`]/g,oo=RegExp(ro.source),ao=RegExp(io.source),uo=/<%-([\s\S]+?)%>/g,so=/<%([\s\S]+?)%>/g,co=/<%=([\s\S]+?)%>/g,lo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,fo=/^\w*$/,po=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,ho=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,vo=RegExp(ho.source),go=/[\u0300-\u036f\ufe20-\ufe23]/g,mo=/\\(\\)?/g,$o=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,yo=/\w*$/,wo=/^0[xX]/,bo=/^\[object .+?Constructor\]$/,_o=/^\d+$/,xo=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Eo=/($^)/,So=/['\n\r\u2028\u2029\\]/g,Co=(t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",e="[a-z\\xdf-\\xf6\\xf8-\\xff]+",RegExp(t+"+(?="+t+e+")|"+t+"?"+e+"|"+t+"+|[0-9]+","g")),ko=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],qo=-1,Ao={};Ao[Wi]=Ao[Hi]=Ao[Gi]=Ao[Qi]=Ao[Yi]=Ao[Xi]=Ao[Ji]=Ao[Ki]=Ao[Zi]=!0,Ao[Oi]=Ao[Di]=Ao[Vi]=Ao[Ri]=Ao[Ii]=Ao[Ni]=Ao[Ui]=Ao[n]=Ao[Li]=Ao[Fi]=Ao[zi]=Ao[r]=Ao[Bi]=Ao[i]=!1;var jo={};jo[Oi]=jo[Di]=jo[Vi]=jo[Ri]=jo[Ii]=jo[Wi]=jo[Hi]=jo[Gi]=jo[Qi]=jo[Yi]=jo[Li]=jo[Fi]=jo[zi]=jo[Bi]=jo[Xi]=jo[Ji]=jo[Ki]=jo[Zi]=!0,jo[Ni]=jo[Ui]=jo[n]=jo[r]=jo[i]=!1;var o={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},u={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},s={function:!0,object:!0},c={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},l={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},f=s.object&&y&&!y.nodeType&&y,d=s.object&&$&&!$.nodeType&&$,p=f&&d&&"object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object&&commonjsGlobal,h=s[typeof self]&&self&&self.Object&&self,v=s[typeof window]&&window&&window.Object&&window,g=d&&d.exports===f&&f,Po=p||v!==(this&&this.window)&&v||h||this;function Mo(t,e){if(t!==e){var n=null===t,r=t===hi,i=t==t,o=null===e,a=e===hi,u=e==e;if(e<t&&!o||!i||n&&!a&&u||r&&u)return 1;if(t<e&&!n||!u||o&&!r&&i||a&&i)return-1}return 0}function To(t,e,n){for(var r=t.length,i=n?r:-1;n?i--:++i<r;)if(e(t[i],i,t))return i;return-1}function Oo(t,e,n){if(e!=e)return Vo(t,n);for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function Do(t){return"function"==typeof t||!1}function Ro(t){return null==t?"":t+""}function Io(t,e){for(var n=-1,r=t.length;++n<r&&-1<e.indexOf(t.charAt(n)););return n}function No(t,e){for(var n=t.length;n--&&-1<e.indexOf(t.charAt(n)););return n}function Uo(t,e){return Mo(t.criteria,e.criteria)||t.index-e.index}function Lo(t){return o[t]}function Fo(t){return a[t]}function zo(t,e,n){return e?t=c[t]:n&&(t=l[t]),"\\"+t}function Bo(t){return"\\"+l[t]}function Vo(t,e,n){for(var r=t.length,i=e+(n?0:-1);n?i--:++i<r;){var o=t[i];if(o!=o)return i}return-1}function Wo(t){return!!t&&"object"==typeof t}function m(t){return t<=160&&9<=t&&t<=13||32==t||160==t||5760==t||6158==t||8192<=t&&(t<=8202||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function Ho(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n<r;)t[n]===e&&(t[n]=Ti,o[++i]=n);return o}function Go(t){for(var e=-1,n=t.length;++e<n&&m(t.charCodeAt(e)););return e}function Qo(t){for(var e=t.length;e--&&m(t.charCodeAt(e)););return e}function Yo(t){return u[t]}var Xo=function t(e){var A=(e=e?Xo.defaults(Po.Object(),e,Xo.pick(Po,ko)):Po).Array,n=e.Date,r=e.Error,g=e.Function,i=e.Math,o=e.Number,m=e.Object,$=e.RegExp,a=e.String,y=e.TypeError,u=A.prototype,s=m.prototype,c=a.prototype,l=g.prototype.toString,w=s.hasOwnProperty,f=0,b=s.toString,d=Po._,p=$("^"+l.call(w).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),h=e.ArrayBuffer,_=e.clearTimeout,v=e.parseFloat,x=i.pow,E=s.propertyIsEnumerable,S=De(e,"Set"),C=e.setTimeout,k=u.splice,q=e.Uint8Array,j=De(e,"WeakMap"),P=i.ceil,M=De(m,"create"),T=i.floor,O=De(A,"isArray"),D=e.isFinite,R=De(m,"keys"),I=i.max,N=i.min,U=De(n,"now"),L=e.parseInt,F=i.random,z=o.NEGATIVE_INFINITY,B=o.POSITIVE_INFINITY,V=4294967295,W=V-1,H=V>>>1,G=9007199254740991,Q=j&&new j,Y={};function X(t){if(Wo(t)&&!lr(t)&&!(t instanceof Z)){if(t instanceof K)return t;if(w.call(t,"__chain__")&&w.call(t,"__wrapped__"))return Ze(t)}return new K(t)}function J(){}function K(t,e,n){this.__wrapped__=t,this.__actions__=n||[],this.__chain__=!!e}X.support={};function Z(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=B,this.__views__=[]}function tt(){this.__data__={}}function et(t){var e=t?t.length:0;for(this.data={hash:M(null),set:new S};e--;)this.push(t[e])}function nt(t,e){var n=t.data;return("string"==typeof e||hr(e)?n.set.has(e):n.hash[e])?0:-1}function rt(t,e){var n=-1,r=t.length;for(e||(e=A(r));++n<r;)e[n]=t[n];return e}function it(t,e){for(var n=-1,r=t.length;++n<r&&!1!==e(t[n],n,t););return t}function ot(t,e){for(var n=-1,r=t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function at(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[++i]=a)}return o}function ut(t,e){for(var n=-1,r=t.length,i=A(r);++n<r;)i[n]=e(t[n],n,t);return i}function st(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function ct(t,e,n,r){var i=-1,o=t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function lt(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function ft(t,e,n,r){return t!==hi&&w.call(r,n)?t:e}function dt(t,e,n){for(var r=-1,i=Dr(e),o=i.length;++r<o;){var a=i[r],u=t[a],s=n(u,e[a],a,t,e);(s==s?s===u:u!=u)&&(u!==hi||a in t)||(t[a]=s)}return t}function pt(t,e){return null==e?t:vt(e,Dr(e),t)}function ht(t,e){for(var n=-1,r=null==t,i=!r&&Ie(t),o=i?t.length:0,a=e.length,u=A(a);++n<a;){var s=e[n];u[n]=i?Ne(s,o)?t[s]:hi:r?hi:t[s]}return u}function vt(t,e,n){n||(n={});for(var r=-1,i=e.length;++r<i;){var o=e[r];n[o]=t[o]}return n}function gt(t,e,n){var r=typeof t;return"function"==r?e===hi?t:Zt(t,e,n):null==t?ei:"object"==r?It(t):e===hi?ui(t):Nt(t,e)}function mt(n,r,i,t,e,o,a){var u;if(i&&(u=e?i(n,t,e):i(n)),u!==hi)return u;if(!hr(n))return n;var s,c,l,f,d=lr(n);if(d){if(l=(c=n).length,f=new c.constructor(l),l&&"string"==typeof c[0]&&w.call(c,"index")&&(f.index=c.index,f.input=c.input),u=f,!r)return rt(n,u)}else{var p=b.call(n),h=p==Ui;if(p!=Fi&&p!=Oi&&(!h||e))return jo[p]?function(t,e,n){var r=t.constructor;switch(e){case Vi:return te(t);case Ri:case Ii:return new r(+t);case Wi:case Hi:case Gi:case Qi:case Yi:case Xi:case Ji:case Ki:case Zi:var i=t.buffer;return new r(n?te(i):i,t.byteOffset,t.length);case Li:case Bi:return new r(t);case zi:var o=new r(t.source,yo.exec(t));o.lastIndex=t.lastIndex}return o}(n,p,r):e?n:{};if("function"==typeof(s=(h?{}:n).constructor)&&s instanceof s||(s=m),u=new s,!r)return pt(u,n)}o||(o=[]),a||(a=[]);for(var v=o.length;v--;)if(o[v]==n)return a[v];return o.push(n),a.push(u),(d?it:jt)(n,function(t,e){u[e]=mt(t,r,i,e,n,o,a)}),u}X.templateSettings={escape:uo,evaluate:so,interpolate:co,variable:"",imports:{_:X}};var $t=function(){function n(){}return function(t){if(hr(t)){n.prototype=t;var e=new n;n.prototype=hi}return e||{}}}();function yt(t,e,n){if("function"!=typeof t)throw new y(Mi);return C(function(){t.apply(hi,n)},e)}function wt(t,e){var n=t?t.length:0,r=[];if(!n)return r;var i=-1,o=Me(),a=o==Oo,u=a&&e.length>=Ai?ue(e):null,s=e.length;u&&(o=nt,a=!1,e=u);t:for(;++i<n;){var c=t[i];if(a&&c==c){for(var l=s;l--;)if(e[l]===c)continue t;r.push(c)}else o(e,c,0)<0&&r.push(c)}return r}var bt=oe(jt),_t=oe(Pt,!0);function xt(t,r){var i=!0;return bt(t,function(t,e,n){return i=!!r(t,e,n)}),i}function Et(t,r){var i=[];return bt(t,function(t,e,n){r(t,e,n)&&i.push(t)}),i}function St(t,r,e,i){var o;return e(t,function(t,e,n){if(r(t,e,n))return o=i?e:t,!1}),o}function Ct(t,e,n,r){r||(r=[]);for(var i=-1,o=t.length;++i<o;){var a=t[i];Wo(a)&&Ie(a)&&(n||lr(a)||cr(a))?e?Ct(a,e,n,r):st(r,a):n||(r[r.length]=a)}return r}var kt=ae(),qt=ae(!0);function At(t,e){return kt(t,e,Rr)}function jt(t,e){return kt(t,e,Dr)}function Pt(t,e){return qt(t,e,Dr)}function Mt(t,e){for(var n=-1,r=e.length,i=-1,o=[];++n<r;){var a=e[n];pr(t[a])&&(o[++i]=a)}return o}function Tt(t,e,n){if(null!=t){n!==hi&&n in Je(t)&&(e=[n]);for(var r=0,i=e.length;null!=t&&r<i;)t=t[e[r++]];return r&&r==i?t:hi}}function Ot(t,e,n,r,i,o){return t===e||(null==t||null==e||!hr(t)&&!Wo(e)?t!=t&&e!=e:function(t,e,n,r,i,o,a){var u=lr(t),s=lr(e),c=Di,l=Di;u||((c=b.call(t))==Oi?c=Fi:c!=Fi&&(u=wr(t))),s||((l=b.call(e))==Oi?l=Fi:l!=Fi&&(s=wr(e)));var f=c==Fi,d=l==Fi,p=c==l;if(p&&!u&&!f)return function(t,e,n){switch(n){case Ri:case Ii:return+t==+e;case Ni:return t.name==e.name&&t.message==e.message;case Li:return t!=+t?e!=+e:t==+e;case zi:case Bi:return t==e+""}return!1}(t,e,c);if(!i){var h=f&&w.call(t,"__wrapped__"),v=d&&w.call(e,"__wrapped__");if(h||v)return n(h?t.value():t,v?e.value():e,r,i,o,a)}if(!p)return!1;o||(o=[]),a||(a=[]);for(var g=o.length;g--;)if(o[g]==t)return a[g]==e;o.push(t),a.push(e);var m=(u?function(t,e,n,r,i,o,a){var u=-1,s=t.length,c=e.length;if(s!=c&&!(i&&s<c))return!1;for(;++u<s;){var l=t[u],f=e[u],d=r?r(i?f:l,i?l:f,u):hi;if(d!==hi){if(d)continue;return!1}if(i){if(!lt(e,function(t){return l===t||n(l,t,r,i,o,a)}))return!1}else if(l!==f&&!n(l,f,r,i,o,a))return!1}return!0}:function(t,e,n,r,i,o,a){var u=Dr(t),s=u.length,c=Dr(e).length;if(s!=c&&!i)return!1;for(var l=s;l--;){var f=u[l];if(!(i?f in e:w.call(e,f)))return!1}for(var d=i;++l<s;){f=u[l];var p=t[f],h=e[f],v=r?r(i?h:p,i?p:h,f):hi;if(!(v===hi?n(p,h,r,i,o,a):v))return!1;d||(d="constructor"==f)}if(!d){var g=t.constructor,m=e.constructor;if(g!=m&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof m&&m instanceof m))return!1}return!0})(t,e,n,r,i,o,a);return o.pop(),a.pop(),m}(t,e,Ot,n,r,i,o))}function Dt(t,e,n){var r=e.length,i=r,o=!n;if(null==t)return!i;for(t=Je(t);r--;){var a=e[r];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++r<i;){var u=(a=e[r])[0],s=t[u],c=a[1];if(o&&a[2]){if(s===hi&&!(u in t))return!1}else{var l=n?n(s,c,u):hi;if(!(l===hi?Ot(c,s,n,!0):l))return!1}}return!0}function Rt(t,r){var i=-1,o=Ie(t)?A(t.length):[];return bt(t,function(t,e,n){o[++i]=r(t,e,n)}),o}function It(t){var e=Oe(t);if(1==e.length&&e[0][2]){var n=e[0][0],r=e[0][1];return function(t){return null!=t&&t[n]===r&&(r!==hi||n in Je(t))}}return function(t){return Dt(t,e)}}function Nt(n,r){var i=lr(n),o=Le(n)&&Be(r),a=n+"";return n=Ke(n),function(t){if(null==t)return!1;var e=a;if(t=Je(t),(i||!o)&&!(e in t)){if(null==(t=1==n.length?t:Tt(t,Bt(n,0,-1))))return!1;e=cn(n),t=Je(t)}return t[e]===r?r!==hi||e in t:Ot(r,t[e],hi,!0)}}function Ut(e){return function(t){return null==t?hi:t[e]}}function Lt(t,e){for(var n=t?e.length:0;n--;){var r=e[n];if(r!=i&&Ne(r)){var i=r;k.call(t,r,1)}}return t}function Ft(t,e){return t+T(F()*(e-t+1))}var zt=Q?function(t,e){return Q.set(t,e),t}:ei;function Bt(t,e,n){var r=-1,i=t.length;(e=null==e?0:+e||0)<0&&(e=i<-e?0:i+e),(n=n===hi||i<n?i:+n||0)<0&&(n+=i),i=n<e?0:n-e>>>0,e>>>=0;for(var o=A(i);++r<i;)o[r]=t[r+e];return o}function Vt(t,r){var i;return bt(t,function(t,e,n){return!(i=r(t,e,n))}),!!i}function Wt(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function Ht(t,n,r){var e=Ae(),i=-1;return n=ut(n,function(t){return e(t)}),Wt(Rt(t,function(e){return{criteria:ut(n,function(t){return t(e)}),index:++i,value:e}}),function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,u=n.length;++r<a;){var s=Mo(i[r],o[r]);if(s){if(u<=r)return s;var c=n[r];return s*("asc"===c||!0===c?1:-1)}}return t.index-e.index}(t,e,r)})}function Gt(t,e){var n=-1,r=Me(),i=t.length,o=r==Oo,a=o&&Ai<=i,u=a?ue():null,s=[];u?(r=nt,o=!1):(a=!1,u=e?[]:s);t:for(;++n<i;){var c=t[n],l=e?e(c,n,t):c;if(o&&c==c){for(var f=u.length;f--;)if(u[f]===l)continue t;e&&u.push(l),s.push(c)}else r(u,l,0)<0&&((e||a)&&u.push(l),s.push(c))}return s}function Qt(t,e){for(var n=-1,r=e.length,i=A(r);++n<r;)i[n]=t[e[n]];return i}function Yt(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?Bt(t,r?0:o,r?o+1:i):Bt(t,r?o+1:0,r?i:o)}function Xt(t,e){var n=t;n instanceof Z&&(n=n.value());for(var r=-1,i=e.length;++r<i;){var o=e[r];n=o.func.apply(o.thisArg,st([n],o.args))}return n}function Jt(t,e,n){var r=0,i=t?t.length:r;if("number"==typeof e&&e==e&&i<=H){for(;r<i;){var o=r+i>>>1,a=t[o];(n?a<=e:a<e)&&null!==a?r=o+1:i=o}return i}return Kt(t,e,ei,n)}function Kt(t,e,n,r){e=n(e);for(var i=0,o=t?t.length:0,a=e!=e,u=null===e,s=e===hi;i<o;){var c=T((i+o)/2),l=n(t[c]),f=l!==hi,d=l==l;if(a)var p=d||r;else p=u?d&&f&&(r||null!=l):s?d&&(r||f):null!=l&&(r?l<=e:l<e);p?i=c+1:o=c}return N(o,W)}function Zt(o,a,t){if("function"!=typeof o)return ei;if(a===hi)return o;switch(t){case 1:return function(t){return o.call(a,t)};case 3:return function(t,e,n){return o.call(a,t,e,n)};case 4:return function(t,e,n,r){return o.call(a,t,e,n,r)};case 5:return function(t,e,n,r,i){return o.call(a,t,e,n,r,i)}}return function(){return o.apply(a,arguments)}}function te(t){var e=new h(t.byteLength);return new q(e).set(new q(t)),e}function ee(t,e,n){for(var r=n.length,i=-1,o=I(t.length-r,0),a=-1,u=e.length,s=A(u+o);++a<u;)s[a]=e[a];for(;++i<r;)s[n[i]]=t[i];for(;o--;)s[a++]=t[i++];return s}function ne(t,e,n){for(var r=-1,i=n.length,o=-1,a=I(t.length-i,0),u=-1,s=e.length,c=A(a+s);++o<a;)c[o]=t[o];for(var l=o;++u<s;)c[l+u]=e[u];for(;++r<i;)c[l+n[r]]=t[o++];return c}function re(u,s){return function(t,r,e){var i=s?s():{};if(r=Ae(r,e,3),lr(t))for(var n=-1,o=t.length;++n<o;){var a=t[n];u(i,a,r(a,n,t),t)}else bt(t,function(t,e,n){u(i,t,r(t,e,n),n)});return i}}function ie(s){return ur(function(t,e){var n=-1,r=null==t?0:e.length,i=2<r?e[r-2]:hi,o=2<r?e[2]:hi,a=1<r?e[r-1]:hi;for("function"==typeof i?(i=Zt(i,a,5),r-=2):r-=(i="function"==typeof a?a:hi)?1:0,o&&Ue(e[0],e[1],o)&&(i=r<3?hi:i,r=1);++n<r;){var u=e[n];u&&s(t,u,i)}return t})}function oe(o,a){return function(t,e){var n=t?Te(t):0;if(!ze(n))return o(t,e);for(var r=a?n:-1,i=Je(t);(a?r--:++r<n)&&!1!==e(i[r],r,i););return t}}function ae(s){return function(t,e,n){for(var r=Je(t),i=n(t),o=i.length,a=s?o:-1;s?a--:++a<o;){var u=i[a];if(!1===e(r[u],u,r))break}return t}}function ue(t){return M&&S?new et(t):null}function se(o){return function(t){for(var e=-1,n=Kr(Vr(t)),r=n.length,i="";++e<r;)i=o(i,n[e],e);return i}}function ce(r){return function(){var t=arguments;switch(t.length){case 0:return new r;case 1:return new r(t[0]);case 2:return new r(t[0],t[1]);case 3:return new r(t[0],t[1],t[2]);case 4:return new r(t[0],t[1],t[2],t[3]);case 5:return new r(t[0],t[1],t[2],t[3],t[4]);case 6:return new r(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new r(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var e=$t(r.prototype),n=r.apply(e,t);return hr(n)?n:e}}function le(o){return function t(e,n,r){r&&Ue(e,n,r)&&(n=hi);var i=qe(e,o,hi,hi,hi,hi,hi,n);return i.placeholder=t.placeholder,i}}function fe(n,r){return ur(function(t){var e=t[0];return null==e?e:(t.push(r),n.apply(hi,t))})}function de(c,l){return function(t,e,n){if(n&&Ue(t,e,n)&&(e=hi),1==(e=Ae(e,n,3)).length){var r=function(t,e,n,r){for(var i=-1,o=t.length,a=r,u=a;++i<o;){var s=t[i],c=+e(s);n(c,a)&&(a=c,u=s)}return u}(t=lr(t)?t:Xe(t),e,c,l);if(!t.length||r!==l)return r}return i=e,o=c,s=u=a=l,bt(t,function(t,e,n){var r=+i(t,e,n);(o(r,u)||r===a&&r===s)&&(u=r,s=t)}),s;var i,o,a,u,s}}function pe(i,o){return function(t,e,n){if(e=Ae(e,n,3),lr(t)){var r=To(t,e,o);return-1<r?t[r]:hi}return St(t,e,i)}}function he(r){return function(t,e,n){return t&&t.length?To(t,e=Ae(e,n,3),r):-1}}function ve(r){return function(t,e,n){return St(t,e=Ae(e,n,3),r,!0)}}function ge(s){return function(){for(var i,o=arguments.length,t=s?o:-1,e=0,a=A(o);s?t--:++t<o;){var n=a[e++]=arguments[t];if("function"!=typeof n)throw new y(Mi);!i&&K.prototype.thru&&"wrapper"==Pe(n)&&(i=new K([],!0))}for(t=i?-1:o;++t<o;){var r=Pe(n=a[t]),u="wrapper"==r?je(n):hi;i=u&&Fe(u[0])&&u[1]==(xi|yi|bi|Ei)&&!u[4].length&&1==u[9]?i[Pe(u[0])].apply(i,u[3]):1==n.length&&Fe(n)?i[r]():i.thru(n)}return function(){var t=arguments,e=t[0];if(i&&1==t.length&&lr(e)&&e.length>=Ai)return i.plant(e).value();for(var n=0,r=o?a[n].apply(this,t):e;++n<o;)r=a[n].call(this,r);return r}}}function me(r,i){return function(t,e,n){return"function"==typeof e&&n===hi&&lr(t)?r(t,e):i(t,Zt(e,n,3))}}function $e(r){return function(t,e,n){return"function"==typeof e&&n===hi||(e=Zt(e,n,3)),r(t,e,Rr)}}function ye(r){return function(t,e,n){return"function"==typeof e&&n===hi||(e=Zt(e,n,3)),r(t,e)}}function we(a){return function(t,i,e){var o={};return i=Ae(i,e,3),jt(t,function(t,e,n){var r=i(t,e,n);t=a?t:r,o[e=a?r:e]=t}),o}}function be(r){return function(t,e,n){return t=Ro(t),(r?t:"")+Se(t,e,n)+(r?"":t)}}function _e(r){var i=ur(function(t,e){var n=Ho(e,i.placeholder);return qe(t,r,hi,e,n)});return i}function xe(c,l){return function(t,e,n,r){var i,o,a,u,s=arguments.length<3;return"function"==typeof e&&r===hi&&lr(t)?c(t,e,n,s):(i=t,o=Ae(e,r,4),a=n,u=s,l(i,function(t,e,n){a=u?(u=!1,t):o(a,t,e,n)}),a)}}function Ee(d,p,h,v,g,m,$,y,w,b){var _=p&xi,x=p&gi,E=p&mi,S=p&yi,C=p&$i,k=p&wi,q=E?hi:ce(d);return function t(){for(var e=arguments.length,n=e,r=A(e);n--;)r[n]=arguments[n];if(v&&(r=ee(r,v,g)),m&&(r=ne(r,m,$)),S||k){var i=t.placeholder,o=Ho(r,i);if((e-=o.length)<b){var a=y?rt(y):hi,u=I(b-e,0);p|=S?bi:_i,p&=~(S?_i:bi),C||(p&=~(gi|mi));var s=[d,p,h,S?r:hi,S?o:hi,S?hi:r,S?hi:o,a,w,u],c=Ee.apply(hi,s);return Fe(d)&&Qe(c,s),c.placeholder=i,c}}var l=x?h:this,f=E?l[d]:d;return y&&(r=function(t,e){for(var n=t.length,r=N(e.length,n),i=rt(t);r--;){var o=e[r];t[r]=Ne(o,n)?i[o]:hi}return t}(r,y)),_&&w<r.length&&(r.length=w),this&&this!==Po&&this instanceof t&&(f=q||ce(d)),f.apply(l,r)}}function Se(t,e,n){var r=t.length;if((e=+e)<=r||!D(e))return"";var i=e-r;return Qr(n=null==n?" ":n+"",P(i/n.length)).slice(0,i)}function Ce(t){var n=i[t];return function(t,e){return(e=e===hi?0:+e||0)?(e=x(10,e),n(t*e)/e):n(t)}}function ke(o){return function(t,e,n,r){var i=Ae(n);return null==n&&i===gt?Jt(t,e,o):Kt(t,e,i(n,r,1),o)}}function qe(t,e,n,r,i,o,a,u){var s=e&mi;if(!s&&"function"!=typeof t)throw new y(Mi);var c=r?r.length:0;if(c||(e&=~(bi|_i),r=i=hi),c-=i?i.length:0,e&_i){var l=r,f=i;r=i=hi}var d,p,h,v=s?hi:je(t),g=[t,e,n,r,i,l,f,o,a,u];if(v&&(function(t,e){var n=t[1],r=e[1],i=n|r,o=i<xi,a=r==xi&&n==yi||r==xi&&n==Ei&&t[7].length<=e[8]||r==(xi|Ei)&&n==yi;if(o||a){r&gi&&(t[2]=e[2],i|=n&gi?0:$i);var u=e[3];if(u){var s=t[3];t[3]=s?ee(s,u,e[4]):rt(u),t[4]=s?Ho(t[3],Ti):rt(e[4])}(u=e[5])&&(s=t[5],t[5]=s?ne(s,u,e[6]):rt(u),t[6]=s?Ho(t[5],Ti):rt(e[6])),(u=e[7])&&(t[7]=rt(u)),r&xi&&(t[8]=null==t[8]?e[8]:N(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}}(g,v),e=g[1],u=g[9]),g[9]=null==u?s?0:t.length:I(u-c,0)||0,e==gi)var m=(d=g[0],p=g[2],h=ce(d),function t(){return(this&&this!==Po&&this instanceof t?h:d).apply(p,arguments)});else m=e!=bi&&e!=(gi|bi)||g[4].length?Ee.apply(hi,g):function(a,t,u,s){var c=t&gi,l=ce(a);return function t(){for(var e=-1,n=arguments.length,r=-1,i=s.length,o=A(i+n);++r<i;)o[r]=s[r];for(;n--;)o[r++]=arguments[++e];return(this&&this!==Po&&this instanceof t?l:a).apply(c?u:this,o)}}.apply(hi,g);return(v?zt:Qe)(m,g)}function Ae(t,e,n){var r=X.callback||ti;return r=r===ti?gt:r,n?r(t,e,n):r}var je=Q?function(t){return Q.get(t)}:ai;function Pe(t){for(var e=t.name,n=Y[e],r=n?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function Me(t,e,n){var r=X.indexOf||un;return r=r===un?Oo:r,t?r(t,e,n):r}var Te=Ut("length");function Oe(t){for(var e=Lr(t),n=e.length;n--;)e[n][2]=Be(e[n][1]);return e}function De(t,e){var n=null==t?hi:t[e];return vr(n)?n:hi}function Re(t,e,n){null==t||Le(e,t)||(t=1==(e=Ke(e)).length?t:Tt(t,Bt(e,0,-1)),e=cn(e));var r=null==t?t:t[e];return null==r?hi:r.apply(t,n)}function Ie(t){return null!=t&&ze(Te(t))}function Ne(t,e){return t="number"==typeof t||_o.test(t)?+t:-1,e=null==e?G:e,-1<t&&t%1==0&&t<e}function Ue(t,e,n){if(!hr(n))return!1;var r=typeof e;if("number"==r?Ie(n)&&Ne(e,n.length):"string"==r&&e in n){var i=n[e];return t==t?t===i:i!=i}return!1}function Le(t,e){var n=typeof t;return!!("string"==n&&fo.test(t)||"number"==n)||!lr(t)&&(!lo.test(t)||null!=e&&t in Je(e))}function Fe(t){var e=Pe(t);if(!(e in Z.prototype))return!1;var n=X[e];if(t===n)return!0;var r=je(n);return!!r&&t===r[0]}function ze(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=G}function Be(t){return t==t&&!hr(t)}function Ve(t,e){t=Je(t);for(var n=-1,r=e.length,i={};++n<r;){var o=e[n];o in t&&(i[o]=t[o])}return i}function We(t,r){var i={};return At(t,function(t,e,n){r(t,e,n)&&(i[e]=t)}),i}var He,Ge,Qe=(Ge=He=0,function(t,e){var n=Vn(),r=qi-(n-Ge);if(Ge=n,0<r){if(++He>=ki)return t}else He=0;return zt(t,e)});function Ye(t){for(var e=Rr(t),n=e.length,r=n&&t.length,i=!!r&&ze(r)&&(lr(t)||cr(t)),o=-1,a=[];++o<n;){var u=e[o];(i&&Ne(u,r)||w.call(t,u))&&a.push(u)}return a}function Xe(t){return null==t?[]:Ie(t)?hr(t)?t:m(t):zr(t)}function Je(t){return hr(t)?t:m(t)}function Ke(t){if(lr(t))return t;var i=[];return Ro(t).replace(po,function(t,e,n,r){i.push(n?r.replace(mo,"$1"):e||t)}),i}function Ze(t){return t instanceof Z?t.clone():new K(t.__wrapped__,t.__chain__,rt(t.__actions__))}var tn=ur(function(t,e){return Wo(t)&&Ie(t)?wt(t,Ct(e,!1,!0)):[]});function en(t,e,n){return t&&t.length?((n?Ue(t,e,n):null==e)&&(e=1),Bt(t,e<0?0:e)):[]}function nn(t,e,n){var r=t?t.length:0;return r?((n?Ue(t,e,n):null==e)&&(e=1),Bt(t,0,(e=r-(+e||0))<0?0:e)):[]}var rn=he(),on=he(!0);function an(t){return t?t[0]:hi}function un(t,e,n){var r=t?t.length:0;if(!r)return-1;if("number"==typeof n)n=n<0?I(r+n,0):n;else if(n){var i=Jt(t,e);return i<r&&(e==e?e===t[i]:t[i]!=t[i])?i:-1}return Oo(t,e,n||0)}var sn=ur(function(t){for(var e=t.length,n=e,r=A(l),i=Me(),o=i==Oo,a=[];n--;){var u=t[n]=Ie(u=t[n])?u:[];r[n]=o&&120<=u.length?ue(n&&u):null}var s=t[0],c=-1,l=s?s.length:0,f=r[0];t:for(;++c<l;)if(u=s[c],(f?nt(f,u):i(a,u,0))<0){for(n=e;--n;){var d=r[n];if((d?nt(d,u):i(t[n],u,0))<0)continue t}f&&f.push(u),a.push(u)}return a});function cn(t){var e=t?t.length:0;return e?t[e-1]:hi}var ln=ur(function(t,e){var n=ht(t,e=Ct(e));return Lt(t,e.sort(Mo)),n});function fn(t){return en(t,1)}var dn=ke(),pn=ke(!0);var hn=ur(function(t){return Gt(Ct(t,!1,!0))});function vn(t,e,n,r){if(!t||!t.length)return[];null!=e&&"boolean"!=typeof e&&(n=Ue(t,e,r=n)?hi:e,e=!1);var i=Ae();return null==n&&i===gt||(n=i(n,r,3)),e&&Me()==Oo?function(t,e){for(var n,r=-1,i=t.length,o=-1,a=[];++r<i;){var u=t[r],s=e?e(u,r,t):u;r&&n===s||(n=s,a[++o]=u)}return a}(t,n):Gt(t,n)}function gn(t){if(!t||!t.length)return[];var e=-1,n=0;t=at(t,function(t){if(Ie(t))return n=I(t.length,n),!0});for(var r=A(n);++e<n;)r[e]=ut(t,Ut(e));return r}function mn(t,e,n){if(!t||!t.length)return[];var r=gn(t);return null==e?r:(e=Zt(e,n,4),ut(r,function(t){return ct(t,e,hi,!0)}))}var $n=ur(function(t,e){return Ie(t)?wt(t,e):[]});var yn=ur(gn);function wn(t,e){var n=-1,r=t?t.length:0,i={};for(!r||e||lr(t[0])||(e=[]);++n<r;){var o=t[n];e?i[o]=e[n]:o&&(i[o[0]]=o[1])}return i}var bn=ur(function(t){var e=t.length,n=2<e?t[e-2]:hi,r=1<e?t[e-1]:hi;return 2<e&&"function"==typeof n?e-=2:(n=1<e&&"function"==typeof r?(--e,r):hi,r=hi),t.length=e,mn(t,n,r)});function _n(t){var e=X(t);return e.__chain__=!0,e}function xn(t,e,n){return e.call(n,t)}var En=ur(function(e){return e=Ct(e),this.thru(function(t){return function(t,e){for(var n=-1,r=t.length,i=-1,o=e.length,a=A(r+o);++n<r;)a[n]=t[n];for(;++i<o;)a[n++]=e[i];return a}(lr(t)?t:[Je(t)],e)})});var Sn=ur(function(t,e){return ht(t,Ct(e))}),Cn=re(function(t,e,n){w.call(t,n)?++t[n]:t[n]=1});function kn(t,e,n){var r=lr(t)?ot:xt;return n&&Ue(t,e,n)&&(e=hi),"function"==typeof e&&n===hi||(e=Ae(e,n,3)),r(t,e)}function qn(t,e,n){return(lr(t)?at:Et)(t,e=Ae(e,n,3))}var An=pe(bt),jn=pe(_t,!0);var Pn=me(it,bt),Mn=me(function(t,e){for(var n=t.length;n--&&!1!==e(t[n],n,t););return t},_t),Tn=re(function(t,e,n){w.call(t,n)?t[n].push(e):t[n]=[e]});function On(t,e,n,r){var i=t?Te(t):0;return ze(i)||(i=(t=zr(t)).length),n="number"!=typeof n||r&&Ue(e,n,r)?0:n<0?I(i+n,0):n||0,"string"==typeof t||!lr(t)&&yr(t)?n<=i&&-1<t.indexOf(e,n):!!i&&-1<Me(t,e,n)}var Dn=re(function(t,e,n){t[n]=e}),Rn=ur(function(t,n,r){var i=-1,o="function"==typeof n,a=Le(n),u=Ie(t)?A(t.length):[];return bt(t,function(t){var e=o?n:a&&null!=t?t[n]:hi;u[++i]=e?e.apply(t,r):Re(t,n,r)}),u});function In(t,e,n){return(lr(t)?ut:Rt)(t,e=Ae(e,n,3))}var Nn=re(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});var Un=xe(ct,bt),Ln=xe(function(t,e,n,r){var i=t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n},_t);function Fn(t,e,n){if(n?Ue(t,e,n):null==e)return 0<(r=(t=Xe(t)).length)?t[Ft(0,r-1)]:hi;var r,i=-1,o=_r(t),a=(r=o.length)-1;for(e=N(e<0?0:+e||0,r);++i<e;){var u=Ft(i,a),s=o[u];o[u]=o[i],o[i]=s}return o.length=e,o}function zn(t,e,n){var r=lr(t)?lt:Vt;return n&&Ue(t,e,n)&&(e=hi),"function"==typeof e&&n===hi||(e=Ae(e,n,3)),r(t,e)}var Bn=ur(function(t,e){if(null==t)return[];var n=e[2];return n&&Ue(e[0],e[1],n)&&(e.length=1),Ht(t,Ct(e),[])});var Vn=U||function(){return(new n).getTime()};function Wn(t,e){var n;if("function"!=typeof e){if("function"!=typeof t)throw new y(Mi);var r=t;t=e,e=r}return function(){return 0<--t&&(n=e.apply(this,arguments)),t<=1&&(e=hi),n}}var Hn=ur(function(t,e,n){var r=gi;if(n.length){var i=Ho(n,Hn.placeholder);r|=bi}return qe(t,r,e,n,i)}),Gn=ur(function(t,e){for(var n=-1,r=(e=e.length?Ct(e):Or(t)).length;++n<r;){var i=e[n];t[i]=qe(t[i],gi,t)}return t}),Qn=ur(function(t,e,n){var r=gi|mi;if(n.length){var i=Ho(n,Qn.placeholder);r|=bi}return qe(e,r,t,n,i)}),Yn=le(yi),Xn=le(wi);function Jn(r,i,t){var o,a,u,s,c,l,f,d=0,p=!1,h=!0;if("function"!=typeof r)throw new y(Mi);if(i=i<0?0:+i||0,!0===t){var v=!0;h=!1}else hr(t)&&(v=!!t.leading,p="maxWait"in t&&I(+t.maxWait||0,i),h="trailing"in t?!!t.trailing:h);function e(t,e){e&&_(e),a=l=f=hi,t&&(d=Vn(),u=r.apply(c,o),l||a||(o=c=hi))}function g(){var t=i-(Vn()-s);t<=0||i<t?e(f,a):l=C(g,t)}function m(){e(h,l)}function n(){if(o=arguments,s=Vn(),c=this,f=h&&(l||!v),!1===p)var t=v&&!l;else{a||v||(d=s);var e=p-(s-d),n=e<=0||p<e;n?(a&&(a=_(a)),d=s,u=r.apply(c,o)):a||(a=C(m,e))}return n&&l?l=_(l):l||i===p||(l=C(g,i)),t&&(n=!0,u=r.apply(c,o)),!n||l||a||(o=c=hi),u}return n.cancel=function(){l&&_(l),a&&_(a),d=0,a=l=f=hi},n}var Kn=ur(function(t,e){return yt(t,1,e)}),Zn=ur(function(t,e,n){return yt(t,e,n)}),tr=ge(),er=ge(!0);function nr(i,o){if("function"!=typeof i||o&&"function"!=typeof o)throw new y(Mi);var a=function(){var t=arguments,e=o?o.apply(this,t):t[0],n=a.cache;if(n.has(e))return n.get(e);var r=i.apply(this,t);return a.cache=n.set(e,r),r};return a.cache=new nr.Cache,a}var rr=ur(function(n,r){if(r=Ct(r),"function"!=typeof n||!ot(r,Do))throw new y(Mi);var i=r.length;return ur(function(t){for(var e=N(t.length,i);e--;)t[e]=r[e](t[e]);return n.apply(this,t)})});var ir=_e(bi),or=_e(_i),ar=ur(function(t,e){return qe(t,Ei,hi,hi,hi,Ct(e))});function ur(o,a){if("function"!=typeof o)throw new y(Mi);return a=I(a===hi?o.length-1:+a||0,0),function(){for(var t=arguments,e=-1,n=I(t.length-a,0),r=A(n);++e<n;)r[e]=t[a+e];switch(a){case 0:return o.call(this,r);case 1:return o.call(this,t[0],r);case 2:return o.call(this,t[0],t[1],r)}var i=A(a+1);for(e=-1;++e<a;)i[e]=t[e];return i[a]=r,o.apply(this,i)}}function sr(t,e){return e<t}function cr(t){return Wo(t)&&Ie(t)&&w.call(t,"callee")&&!E.call(t,"callee")}var lr=O||function(t){return Wo(t)&&ze(t.length)&&b.call(t)==Di};function fr(t,e,n,r){var i=(n="function"==typeof n?Zt(n,r,3):hi)?n(t,e):hi;return i===hi?Ot(t,e,n):!!i}function dr(t){return Wo(t)&&"string"==typeof t.message&&b.call(t)==Ni}function pr(t){return hr(t)&&b.call(t)==Ui}function hr(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function vr(t){return null!=t&&(pr(t)?p.test(l.call(t)):Wo(t)&&bo.test(t))}function gr(t){return"number"==typeof t||Wo(t)&&b.call(t)==Li}function mr(t){var e,n;return!(!Wo(t)||b.call(t)!=Fi||cr(t)||!(w.call(t,"constructor")||"function"!=typeof(e=t.constructor)||e instanceof e))&&(At(t,function(t,e){n=e}),n===hi||w.call(t,n))}function $r(t){return hr(t)&&b.call(t)==zi}function yr(t){return"string"==typeof t||Wo(t)&&b.call(t)==Bi}function wr(t){return Wo(t)&&ze(t.length)&&!!Ao[b.call(t)]}function br(t,e){return t<e}function _r(t){var e=t?Te(t):0;return ze(e)?e?rt(t):[]:zr(t)}function xr(t){return vt(t,Rr(t))}var Er=ie(function o(a,u,s,c,l){if(!hr(a))return a;var f=Ie(u)&&(lr(u)||wr(u)),d=f?hi:Dr(u);return it(d||u,function(t,e){if(d&&(t=u[e=t]),Wo(t))c||(c=[]),l||(l=[]),function(t,e,n,r,i,o,a){for(var u=o.length,s=e[n];u--;)if(o[u]==s)return t[n]=a[u];var c=t[n],l=i?i(c,s,n,t,e):hi,f=l===hi;f&&(Ie(l=s)&&(lr(s)||wr(s))?l=lr(c)?c:Ie(c)?rt(c):[]:mr(s)||cr(s)?l=cr(c)?xr(c):mr(c)?c:{}:f=!1),o.push(s),a.push(l),f?t[n]=r(l,s,i,o,a):(l==l?l!==c:c==c)&&(t[n]=l)}(a,u,e,o,s,c,l);else{var n=a[e],r=s?s(n,t,e,a,u):hi,i=r===hi;i&&(r=t),r===hi&&(!f||e in a)||!i&&(r==r?r===n:n!=n)||(a[e]=r)}}),a}),Sr=ie(function(t,e,n){return n?dt(t,e,n):pt(t,e)});var Cr=fe(Sr,function(t,e){return t===hi?e:t}),kr=fe(Er,function t(e,n){return e===hi?n:Er(e,n,t)}),qr=ve(jt),Ar=ve(Pt),jr=$e(kt),Pr=$e(qt),Mr=ye(jt),Tr=ye(Pt);function Or(t){return Mt(t,Rr(t))}var Dr=R?function(t){var e=null==t?hi:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&Ie(t)?Ye(t):hr(t)?R(t):[]}:Ye;function Rr(t){if(null==t)return[];hr(t)||(t=m(t));var e=t.length;e=e&&ze(e)&&(lr(t)||cr(t))&&e||0;for(var n=t.constructor,r=-1,i="function"==typeof n&&n.prototype===t,o=A(e),a=0<e;++r<e;)o[r]=r+"";for(var u in t)a&&Ne(u,e)||"constructor"==u&&(i||!w.call(t,u))||o.push(u);return o}var Ir=we(!0),Nr=we(),Ur=ur(function(t,e){if(null==t)return{};if("function"!=typeof e[0])return e=ut(Ct(e),a),Ve(t,wt(Rr(t),e));var r=Zt(e[0],e[1],3);return We(t,function(t,e,n){return!r(t,e,n)})});function Lr(t){t=Je(t);for(var e=-1,n=Dr(t),r=n.length,i=A(r);++e<r;){var o=n[e];i[e]=[o,t[o]]}return i}var Fr=ur(function(t,e){return null==t?{}:"function"==typeof e[0]?We(t,Zt(e[0],e[1],3)):Ve(t,Ct(e))});function zr(t){return Qt(t,Dr(t))}var Br=se(function(t,e,n){return e=e.toLowerCase(),t+(n?e.charAt(0).toUpperCase()+e.slice(1):e)});function Vr(t){return(t=Ro(t))&&t.replace(xo,Lo).replace(go,"")}var Wr=se(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()});var Hr=be(),Gr=be(!0);function Qr(t,e){var n="";if(t=Ro(t),(e=+e)<1||!t||!D(e))return n;for(;e%2&&(n+=t),t+=t,e=T(e/2););return n}var Yr=se(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Xr=se(function(t,e,n){return t+(n?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))});function Jr(t,e,n){var r=t;return(t=Ro(t))?(n?Ue(r,e,n):null==e)?t.slice(Go(t),Qo(t)+1):(e+="",t.slice(Io(t,e),No(t,e)+1)):t}function Kr(t,e,n){return n&&Ue(t,e,n)&&(e=hi),(t=Ro(t)).match(e||Co)||[]}var Zr=ur(function(t,e){try{return t.apply(hi,e)}catch(t){return dr(t)?t:new r(t)}});function ti(t,e,n){return n&&Ue(t,e,n)&&(e=hi),Wo(t)?ni(t):gt(t,e)}function ei(t){return t}function ni(t){return It(mt(t,!0))}var ri=ur(function(e,n){return function(t){return Re(t,e,n)}}),ii=ur(function(e,n){return function(t){return Re(e,t,n)}});function oi(r,t,e){if(null==e){var n=hr(t),i=n?Dr(t):hi,o=i&&i.length?Mt(t,i):hi;(o?o.length:n)||(o=!1,e=t,t=r,r=this)}o||(o=Mt(t,Dr(t)));var a=!0,u=-1,s=pr(r),c=o.length;!1===e?a=!1:hr(e)&&"chain"in e&&(a=e.chain);for(;++u<c;){var l=o[u],f=t[l];r[l]=f,s&&(r.prototype[l]=function(n){return function(){var t=this.__chain__;if(a||t){var e=r(this.__wrapped__);return(e.__actions__=rt(this.__actions__)).push({func:n,args:arguments,thisArg:r}),e.__chain__=t,e}return n.apply(r,st([this.value()],arguments))}}(f))}return r}function ai(){}function ui(t){return Le(t)?Ut(t):(n=(e=t)+"",e=Ke(e),function(t){return Tt(t,e,n)});var e,n}var si,ci=Ce("ceil"),li=Ce("floor"),fi=de(sr,z),di=de(br,B),pi=Ce("round");return X.prototype=J.prototype,(K.prototype=$t(J.prototype)).constructor=K,(Z.prototype=$t(J.prototype)).constructor=Z,tt.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},tt.prototype.get=function(t){return"__proto__"==t?hi:this.__data__[t]},tt.prototype.has=function(t){return"__proto__"!=t&&w.call(this.__data__,t)},tt.prototype.set=function(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this},et.prototype.push=function(t){var e=this.data;"string"==typeof t||hr(t)?e.set.add(t):e.hash[t]=!0},nr.Cache=tt,X.after=function(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new y(Mi);var n=t;t=e,e=n}return t=D(t=+t)?t:0,function(){if(--t<1)return e.apply(this,arguments)}},X.ary=function(t,e,n){return n&&Ue(t,e,n)&&(e=hi),e=t&&null==e?t.length:I(+e||0,0),qe(t,xi,hi,hi,hi,hi,e)},X.assign=Sr,X.at=Sn,X.before=Wn,X.bind=Hn,X.bindAll=Gn,X.bindKey=Qn,X.callback=ti,X.chain=_n,X.chunk=function(t,e,n){e=(n?Ue(t,e,n):null==e)?1:I(T(e)||1,1);for(var r=0,i=t?t.length:0,o=-1,a=A(P(i/e));r<i;)a[++o]=Bt(t,r,r+=e);return a},X.compact=function(t){for(var e=-1,n=t?t.length:0,r=-1,i=[];++e<n;){var o=t[e];o&&(i[++r]=o)}return i},X.constant=function(t){return function(){return t}},X.countBy=Cn,X.create=function(t,e,n){var r=$t(t);return n&&Ue(t,e,n)&&(e=hi),e?pt(r,e):r},X.curry=Yn,X.curryRight=Xn,X.debounce=Jn,X.defaults=Cr,X.defaultsDeep=kr,X.defer=Kn,X.delay=Zn,X.difference=tn,X.drop=en,X.dropRight=nn,X.dropRightWhile=function(t,e,n){return t&&t.length?Yt(t,Ae(e,n,3),!0,!0):[]},X.dropWhile=function(t,e,n){return t&&t.length?Yt(t,Ae(e,n,3),!0):[]},X.fill=function(t,e,n,r){var i=t?t.length:0;return i?(n&&"number"!=typeof n&&Ue(t,e,n)&&(n=0,r=i),function(t,e,n,r){var i=t.length;for((n=null==n?0:+n||0)<0&&(n=i<-n?0:i+n),(r=r===hi||i<r?i:+r||0)<0&&(r+=i),i=r<n?0:r>>>0,n>>>=0;n<i;)t[n++]=e;return t}(t,e,n,r)):[]},X.filter=qn,X.flatten=function(t,e,n){var r=t?t.length:0;return n&&Ue(t,e,n)&&(e=!1),r?Ct(t,e):[]},X.flattenDeep=function(t){return t&&t.length?Ct(t,!0):[]},X.flow=tr,X.flowRight=er,X.forEach=Pn,X.forEachRight=Mn,X.forIn=jr,X.forInRight=Pr,X.forOwn=Mr,X.forOwnRight=Tr,X.functions=Or,X.groupBy=Tn,X.indexBy=Dn,X.initial=function(t){return nn(t,1)},X.intersection=sn,X.invert=function(t,e,n){n&&Ue(t,e,n)&&(e=hi);for(var r=-1,i=Dr(t),o=i.length,a={};++r<o;){var u=i[r],s=t[u];e?w.call(a,s)?a[s].push(u):a[s]=[u]:a[s]=u}return a},X.invoke=Rn,X.keys=Dr,X.keysIn=Rr,X.map=In,X.mapKeys=Ir,X.mapValues=Nr,X.matches=ni,X.matchesProperty=function(t,e){return Nt(t,mt(e,!0))},X.memoize=nr,X.merge=Er,X.method=ri,X.methodOf=ii,X.mixin=oi,X.modArgs=rr,X.negate=function(t){if("function"!=typeof t)throw new y(Mi);return function(){return!t.apply(this,arguments)}},X.omit=Ur,X.once=function(t){return Wn(2,t)},X.pairs=Lr,X.partial=ir,X.partialRight=or,X.partition=Nn,X.pick=Fr,X.pluck=function(t,e){return In(t,ui(e))},X.property=ui,X.propertyOf=function(e){return function(t){return Tt(e,Ke(t),t+"")}},X.pull=function(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var n=0,r=Me(),i=t.length;++n<i;)for(var o=0,a=t[n];-1<(o=r(e,a,o));)k.call(e,o,1);return e},X.pullAt=ln,X.range=function(t,e,n){n&&Ue(t,e,n)&&(e=n=hi),t=+t||0,null==e?(e=t,t=0):e=+e||0;for(var r=-1,i=I(P((e-t)/((n=null==n?1:+n||0)||1)),0),o=A(i);++r<i;)o[r]=t,t+=n;return o},X.rearg=ar,X.reject=function(t,r,e){var n=lr(t)?at:Et;return r=Ae(r,e,3),n(t,function(t,e,n){return!r(t,e,n)})},X.remove=function(t,e,n){var r=[];if(!t||!t.length)return r;var i=-1,o=[],a=t.length;for(e=Ae(e,n,3);++i<a;){var u=t[i];e(u,i,t)&&(r.push(u),o.push(i))}return Lt(t,o),r},X.rest=fn,X.restParam=ur,X.set=function(t,e,n){if(null==t)return t;for(var r=e+"",i=-1,o=(e=null!=t[r]||Le(e,t)?[r]:Ke(e)).length,a=o-1,u=t;null!=u&&++i<o;){var s=e[i];hr(u)&&(i==a?u[s]=n:null==u[s]&&(u[s]=Ne(e[i+1])?[]:{})),u=u[s]}return t},X.shuffle=function(t){return Fn(t,B)},X.slice=function(t,e,n){var r=t?t.length:0;return r?(n&&"number"!=typeof n&&Ue(t,e,n)&&(e=0,n=r),Bt(t,e,n)):[]},X.sortBy=function(t,r,e){if(null==t)return[];e&&Ue(t,r,e)&&(r=hi);var i=-1;return r=Ae(r,e,3),Wt(Rt(t,function(t,e,n){return{criteria:r(t,e,n),index:++i,value:t}}),Uo)},X.sortByAll=Bn,X.sortByOrder=function(t,e,n,r){return null==t?[]:(r&&Ue(e,n,r)&&(n=hi),lr(e)||(e=null==e?[]:[e]),lr(n)||(n=null==n?[]:[n]),Ht(t,e,n))},X.spread=function(e){if("function"!=typeof e)throw new y(Mi);return function(t){return e.apply(this,t)}},X.take=function(t,e,n){return t&&t.length?((n?Ue(t,e,n):null==e)&&(e=1),Bt(t,0,e<0?0:e)):[]},X.takeRight=function(t,e,n){var r=t?t.length:0;return r?((n?Ue(t,e,n):null==e)&&(e=1),Bt(t,(e=r-(+e||0))<0?0:e)):[]},X.takeRightWhile=function(t,e,n){return t&&t.length?Yt(t,Ae(e,n,3),!1,!0):[]},X.takeWhile=function(t,e,n){return t&&t.length?Yt(t,Ae(e,n,3)):[]},X.tap=function(t,e,n){return e.call(n,t),t},X.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new y(Mi);return!1===n?r=!1:hr(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Jn(t,e,{leading:r,maxWait:+e,trailing:i})},X.thru=xn,X.times=function(t,e,n){if((t=T(t))<1||!D(t))return[];var r=-1,i=A(N(t,V));for(e=Zt(e,n,1);++r<t;)r<V?i[r]=e(r):e(r);return i},X.toArray=_r,X.toPlainObject=xr,X.transform=function(t,r,i,e){var n=lr(t)||wr(t);if(r=Ae(r,e,4),null==i)if(n||hr(t)){var o=t.constructor;i=n?lr(t)?new o:[]:$t(pr(o)?o.prototype:hi)}else i={};return(n?it:jt)(t,function(t,e,n){return r(i,t,e,n)}),i},X.union=hn,X.uniq=vn,X.unzip=gn,X.unzipWith=mn,X.values=zr,X.valuesIn=function(t){return Qt(t,Rr(t))},X.where=function(t,e){return qn(t,It(e))},X.without=$n,X.wrap=function(t,e){return qe(e=null==e?ei:e,bi,hi,[t],[])},X.xor=function(){for(var t=-1,e=arguments.length;++t<e;){var n=arguments[t];if(Ie(n))var r=r?st(wt(r,n),wt(n,r)):n}return r?Gt(r):[]},X.zip=yn,X.zipObject=wn,X.zipWith=bn,X.backflow=er,X.collect=In,X.compose=er,X.each=Pn,X.eachRight=Mn,X.extend=Sr,X.iteratee=ti,X.methods=Or,X.object=wn,X.select=qn,X.tail=fn,X.unique=vn,oi(X,X),X.add=function(t,e){return(+t||0)+(+e||0)},X.attempt=Zr,X.camelCase=Br,X.capitalize=function(t){return(t=Ro(t))&&t.charAt(0).toUpperCase()+t.slice(1)},X.ceil=ci,X.clone=function(t,e,n,r){return e&&"boolean"!=typeof e&&Ue(t,e,n)?e=!1:"function"==typeof e&&(r=n,n=e,e=!1),"function"==typeof n?mt(t,e,Zt(n,r,1)):mt(t,e)},X.cloneDeep=function(t,e,n){return"function"==typeof e?mt(t,!0,Zt(e,n,1)):mt(t,!0)},X.deburr=Vr,X.endsWith=function(t,e,n){e+="";var r=(t=Ro(t)).length;return n=n===hi?r:N(n<0?0:+n||0,r),0<=(n-=e.length)&&t.indexOf(e,n)==n},X.escape=function(t){return(t=Ro(t))&&ao.test(t)?t.replace(io,Fo):t},X.escapeRegExp=function(t){return(t=Ro(t))&&vo.test(t)?t.replace(ho,zo):t||"(?:)"},X.every=kn,X.find=An,X.findIndex=rn,X.findKey=qr,X.findLast=jn,X.findLastIndex=on,X.findLastKey=Ar,X.findWhere=function(t,e){return An(t,It(e))},X.first=an,X.floor=li,X.get=function(t,e,n){var r=null==t?hi:Tt(t,Ke(e),e+"");return r===hi?n:r},X.gt=sr,X.gte=function(t,e){return e<=t},X.has=function(t,e){if(null==t)return!1;var n=w.call(t,e);if(!n&&!Le(e)){if(null==(t=1==(e=Ke(e)).length?t:Tt(t,Bt(e,0,-1))))return!1;e=cn(e),n=w.call(t,e)}return n||ze(t.length)&&Ne(e,t.length)&&(lr(t)||cr(t))},X.identity=ei,X.includes=On,X.indexOf=un,X.inRange=function(t,e,n){return e=+e||0,n===hi?(n=e,e=0):n=+n||0,t>=N(e,n)&&t<I(e,n)},X.isArguments=cr,X.isArray=lr,X.isBoolean=function(t){return!0===t||!1===t||Wo(t)&&b.call(t)==Ri},X.isDate=function(t){return Wo(t)&&b.call(t)==Ii},X.isElement=function(t){return!!t&&1===t.nodeType&&Wo(t)&&!mr(t)},X.isEmpty=function(t){return null==t||(Ie(t)&&(lr(t)||yr(t)||cr(t)||Wo(t)&&pr(t.splice))?!t.length:!Dr(t).length)},X.isEqual=fr,X.isError=dr,X.isFinite=function(t){return"number"==typeof t&&D(t)},X.isFunction=pr,X.isMatch=function(t,e,n,r){return n="function"==typeof n?Zt(n,r,3):hi,Dt(t,Oe(e),n)},X.isNaN=function(t){return gr(t)&&t!=+t},X.isNative=vr,X.isNull=function(t){return null===t},X.isNumber=gr,X.isObject=hr,X.isPlainObject=mr,X.isRegExp=$r,X.isString=yr,X.isTypedArray=wr,X.isUndefined=function(t){return t===hi},X.kebabCase=Wr,X.last=cn,X.lastIndexOf=function(t,e,n){var r=t?t.length:0;if(!r)return-1;var i=r;if("number"==typeof n)i=(n<0?I(r+n,0):N(n||0,r-1))+1;else if(n){var o=t[i=Jt(t,e,!0)-1];return(e==e?e===o:o!=o)?i:-1}if(e!=e)return Vo(t,i,!0);for(;i--;)if(t[i]===e)return i;return-1},X.lt=br,X.lte=function(t,e){return t<=e},X.max=fi,X.min=di,X.noConflict=function(){return Po._=d,this},X.noop=ai,X.now=Vn,X.pad=function(t,e,n){e=+e;var r=(t=Ro(t)).length;if(e<=r||!D(e))return t;var i=(e-r)/2,o=T(i);return(n=Se("",P(i),n)).slice(0,o)+t+n},X.padLeft=Hr,X.padRight=Gr,X.parseInt=function(t,e,n){return(n?Ue(t,e,n):null==e)?e=0:e&&(e=+e),t=Jr(t),L(t,e||(wo.test(t)?16:10))},X.random=function(t,e,n){n&&Ue(t,e,n)&&(e=n=hi);var r=null==t,i=null==e;if(null==n&&(i&&"boolean"==typeof t?(n=t,t=1):"boolean"==typeof e&&(n=e,i=!0)),r&&i&&(i=!(e=1)),t=+t||0,i?(e=t,t=0):e=+e||0,n||t%1||e%1){var o=F();return N(t+o*(e-t+v("1e-"+((o+"").length-1))),e)}return Ft(t,e)},X.reduce=Un,X.reduceRight=Ln,X.repeat=Qr,X.result=function(t,e,n){var r=null==t?hi:t[e];return r===hi&&(null==t||Le(e,t)||(r=null==(t=1==(e=Ke(e)).length?t:Tt(t,Bt(e,0,-1)))?hi:t[cn(e)]),r=r===hi?n:r),pr(r)?r.call(t):r},X.round=pi,X.runInContext=t,X.size=function(t){var e=t?Te(t):0;return ze(e)?e:Dr(t).length},X.snakeCase=Yr,X.some=zn,X.sortedIndex=dn,X.sortedLastIndex=pn,X.startCase=Xr,X.startsWith=function(t,e,n){return t=Ro(t),n=null==n?0:N(n<0?0:+n||0,t.length),t.lastIndexOf(e,n)==n},X.sum=function(t,e,n){return n&&Ue(t,e,n)&&(e=hi),1==(e=Ae(e,n,3)).length?function(t,e){for(var n=t.length,r=0;n--;)r+=+e(t[n])||0;return r}(lr(t)?t:Xe(t),e):(r=e,i=0,bt(t,function(t,e,n){i+=+r(t,e,n)||0}),i);var r,i},X.template=function(a,t,e){var n=X.templateSettings;e&&Ue(a,t,e)&&(t=e=hi),a=Ro(a);var u,s,r=dt(pt({},(t=dt(pt({},e||t),n,ft)).imports),n.imports,ft),i=Dr(r),o=Qt(r,i),c=0,l=t.interpolate||Eo,f="__p += '",d=$((t.escape||Eo).source+"|"+l.source+"|"+(l===co?$o:Eo).source+"|"+(t.evaluate||Eo).source+"|$","g"),p="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++qo+"]")+"\n";a.replace(d,function(t,e,n,r,i,o){return n||(n=r),f+=a.slice(c,o).replace(So,Bo),e&&(u=!0,f+="' +\n__e("+e+") +\n'"),i&&(s=!0,f+="';\n"+i+";\n__p += '"),n&&(f+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),c=o+t.length,t}),f+="';\n";var h=t.variable;h||(f="with (obj) {\n"+f+"\n}\n"),f=(s?f.replace(to,""):f).replace(eo,"$1").replace(no,"$1;"),f="function("+(h||"obj")+") {\n"+(h?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(u?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=Zr(function(){return g(i,p+"return "+f).apply(hi,o)});if(v.source=f,dr(v))throw v;return v},X.trim=Jr,X.trimLeft=function(t,e,n){var r=t;return(t=Ro(t))?(n?Ue(r,e,n):null==e)?t.slice(Go(t)):t.slice(Io(t,e+"")):t},X.trimRight=function(t,e,n){var r=t;return(t=Ro(t))?(n?Ue(r,e,n):null==e)?t.slice(0,Qo(t)+1):t.slice(0,No(t,e+"")+1):t},X.trunc=function(t,e,n){n&&Ue(t,e,n)&&(e=hi);var r=Si,i=Ci;if(null!=e)if(hr(e)){var o="separator"in e?e.separator:o;r="length"in e?+e.length||0:r,i="omission"in e?Ro(e.omission):i}else r=+e||0;if(r>=(t=Ro(t)).length)return t;var a=r-i.length;if(a<1)return i;var u=t.slice(0,a);if(null==o)return u+i;if($r(o)){if(t.slice(a).search(o)){var s,c,l=t.slice(0,a);for(o.global||(o=$(o.source,(yo.exec(o)||"")+"g")),o.lastIndex=0;s=o.exec(l);)c=s.index;u=u.slice(0,null==c?a:c)}}else if(t.indexOf(o,a)!=a){var f=u.lastIndexOf(o);-1<f&&(u=u.slice(0,f))}return u+i},X.unescape=function(t){return(t=Ro(t))&&oo.test(t)?t.replace(ro,Yo):t},X.uniqueId=function(t){var e=++f;return Ro(t)+e},X.words=Kr,X.all=kn,X.any=zn,X.contains=On,X.eq=fr,X.detect=An,X.foldl=Un,X.foldr=Ln,X.head=an,X.include=On,X.inject=Un,oi(X,(si={},jt(X,function(t,e){X.prototype[e]||(si[e]=t)}),si),!1),X.sample=Fn,X.prototype.sample=function(e){return this.__chain__||null!=e?this.thru(function(t){return Fn(t,e)}):Fn(this.value())},X.VERSION=vi,it(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){X[t].placeholder=X}),it(["drop","take"],function(r,i){Z.prototype[r]=function(t){var e=this.__filtered__;if(e&&!i)return new Z(this);t=null==t?1:I(T(t)||0,0);var n=this.clone();return e?n.__takeCount__=N(n.__takeCount__,t):n.__views__.push({size:t,type:r+(n.__dir__<0?"Right":"")}),n},Z.prototype[r+"Right"]=function(t){return this.reverse()[r](t).reverse()}}),it(["filter","map","takeWhile"],function(t,e){var r=e+1,i=r!=Pi;Z.prototype[t]=function(t,e){var n=this.clone();return n.__iteratees__.push({iteratee:Ae(t,e,1),type:r}),n.__filtered__=n.__filtered__||i,n}}),it(["first","last"],function(t,e){var n="take"+(e?"Right":"");Z.prototype[t]=function(){return this[n](1).value()[0]}}),it(["initial","rest"],function(t,e){var n="drop"+(e?"":"Right");Z.prototype[t]=function(){return this.__filtered__?new Z(this):this[n](1)}}),it(["pluck","where"],function(t,e){var n=e?"filter":"map",r=e?It:ui;Z.prototype[t]=function(t){return this[n](r(t))}}),Z.prototype.compact=function(){return this.filter(ei)},Z.prototype.reject=function(e,t){return e=Ae(e,t,1),this.filter(function(t){return!e(t)})},Z.prototype.slice=function(t,e){t=null==t?0:+t||0;var n=this;return n.__filtered__&&(0<t||e<0)?new Z(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==hi&&(n=(e=+e||0)<0?n.dropRight(-e):n.take(e-t)),n)},Z.prototype.takeRightWhile=function(t,e){return this.reverse().takeWhile(t,e).reverse()},Z.prototype.toArray=function(){return this.take(B)},jt(Z.prototype,function(f,t){var d=/^(?:filter|map|reject)|While$/.test(t),p=/^(?:first|last)$/.test(t),h=X[p?"take"+("last"==t?"Right":""):t];h&&(X.prototype[t]=function(){var e=p?[1]:arguments,n=this.__chain__,t=this.__wrapped__,r=!!this.__actions__.length,i=t instanceof Z,o=e[0],a=i||lr(t);a&&d&&"function"==typeof o&&1!=o.length&&(i=a=!1);var u=function(t){return p&&n?h(t,1)[0]:h.apply(hi,st([t],e))},s={func:xn,args:[u],thisArg:hi},c=i&&!r;if(p&&!n)return c?((t=t.clone()).__actions__.push(s),f.call(t)):h.call(hi,this.value())[0];if(!p&&a){t=c?t:new Z(this);var l=f.apply(t,e);return l.__actions__.push(s),new K(l,n)}return this.thru(u)})}),it(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(t){var n=(/^(?:replace|split)$/.test(t)?c:u)[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:join|pop|replace|shift)$/.test(t);X.prototype[t]=function(){var e=arguments;return i&&!this.__chain__?n.apply(this.value(),e):this[r](function(t){return n.apply(t,e)})}}),jt(Z.prototype,function(t,e){var n=X[e];if(n){var r=n.name;(Y[r]||(Y[r]=[])).push({name:e,func:n})}}),Y[Ee(hi,mi).name]=[{name:"wrapper",func:hi}],Z.prototype.clone=function(){var t=new Z(this.__wrapped__);return t.__actions__=rt(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=rt(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=rt(this.__views__),t},Z.prototype.reverse=function(){if(this.__filtered__){var t=new Z(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Z.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=lr(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=N(e,t+a);break;case"takeRight":t=I(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,u=o.end,s=u-a,c=r?u:a-1,l=this.__iteratees__,f=l.length,d=0,p=N(s,this.__takeCount__);if(!n||i<Ai||i==s&&p==s)return Xt(r&&n?t.reverse():t,this.__actions__);var h=[];t:for(;s--&&d<p;){for(var v=-1,g=t[c+=e];++v<f;){var m=l[v],$=m.iteratee,y=m.type,w=$(g);if(y==Pi)g=w;else if(!w){if(y==ji)continue t;break t}}h[d++]=g}return h},X.prototype.chain=function(){return _n(this)},X.prototype.commit=function(){return new K(this.value(),this.__chain__)},X.prototype.concat=En,X.prototype.plant=function(t){for(var e,n=this;n instanceof J;){var r=Ze(n);e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e},X.prototype.reverse=function(){var t=this.__wrapped__,e=function(t){return n&&n.__dir__<0?t:t.reverse()};if(t instanceof Z){var n=t;return this.__actions__.length&&(n=new Z(this)),(n=n.reverse()).__actions__.push({func:xn,args:[e],thisArg:hi}),new K(n,this.__chain__)}return this.thru(e)},X.prototype.toString=function(){return this.value()+""},X.prototype.run=X.prototype.toJSON=X.prototype.valueOf=X.prototype.value=function(){return Xt(this.__wrapped__,this.__actions__)},X.prototype.collect=X.prototype.map,X.prototype.head=X.prototype.first,X.prototype.select=X.prototype.filter,X.prototype.tail=X.prototype.rest,X}();"function"==typeof hi&&"object"==typeof hi.amd&&hi.amd?(Po._=Xo,hi(function(){return Xo})):f&&d?g?(d.exports=Xo)._=Xo:f._=Xo:Po._=Xo}).call(commonjsGlobal)}),glob=window.piGlobal||(window.piGlobal={});function global$3(){return glob}function go$1(t,e,n){var r=this.mixerSequence;switch(t){case"nextWhere":case"previousWhere":where("next",e,n,r);break;case"current":break;case"first":for(;r.prev(n),r.current(n););break;case"last":for(;r.next(n),r.current(n););r.prev();break;case"end":for(;r.next(n),r.current(n););break;case"next":r.next(n);break;default:throw new Error('Unknow destination "'+t+'" for goto.')}return this}function where(t,e,n,r){for(var i;r[t](),(i=r.current(n))&&!lodash$2.callback(e)(i.data););}function createDB$1(t){var e=new Database$2;if(e.createColl("trial"),e.createColl("stimulus"),e.createColl("media"),e.add("trial",t.trialSets||[]),e.add("stimulus",t.stimulusSets||[]),e.add("media",t.mediaSets||[]),!lodash$2.isArray(t.sequence))throw new Error("You must set a sequence array.");var n=e.sequence("trial",t.sequence);return n.go=go$1,e.currentSequence=n,e}var fastdom=createCommonjsModule(function(s){!function(t){var i=function(){},e=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.msRequestAnimationFrame||function(t){return setTimeout(t,16)};function n(){this.reads=[],this.writes=[],this.raf=e.bind(t)}function o(t){t.scheduled||(t.scheduled=!0,t.raf(function(t){var e,n=t.writes,r=t.reads;try{i("flushing reads",r.length),a(r),i("flushing writes",n.length),a(n)}catch(t){e=t}t.scheduled=!1,(r.length||n.length)&&o(t);if(e){if(i("task errored",e.message),!t.catch)throw e;t.catch(e)}}.bind(null,t)))}function a(t){for(var e;e=t.shift();)e()}function r(t,e){var n=t.indexOf(e);return!!~n&&!!t.splice(n,1)}n.prototype={constructor:n,measure:function(t,e){var n=e?t.bind(e):t;return this.reads.push(n),o(this),n},mutate:function(t,e){var n=e?t.bind(e):t;return this.writes.push(n),o(this),n},clear:function(t){return r(this.reads,t)||r(this.writes,t)},extend:function(t){if("object"!=typeof t)throw new Error("expected object");var e=Object.create(this);return function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}(e,t),e.fastdom=this,e.initialize&&e.initialize(),e},catch:null};var u=t.fastdom=t.fastdom||new n;s.exports=u}("undefined"!=typeof window?window:commonjsGlobal)});function getSize$1(t){var e=window.getComputedStyle(t);return{height:parse$1(t.offsetHeight)-parse$1(e.borderTopWidth)-parse$1(e.borderBottomWidth),width:parse$1(t.offsetWidth)-parse$1(e.borderLeftWidth)-parse$1(e.borderRightWidth)}}function parse$1(t){return parseFloat(t,10)||0}function adjust_canvas(n,r){return lodash$2.throttle(function(t){"orientationchange"==t.type?setTimeout(e,500):e()},16);function e(){fastdom.measure(function(){var t=getTargetSize(r,n),e=window.getComputedStyle(n);t.height-=parse(e.borderTopWidth)+parse(e.borderBottomWidth)+parse(e.marginTop),t.width-=parse(e.borderLeftWidth)+parse(e.borderRightWidth),fastdom.mutate(function(){n.style.width=t.width+"px",n.style.height=t.height+"px",n.style.fontSize=t.height*(r.textSize||3)/100+"px",window.scrollTo(0,1)})})}}function getProportions(t){if(!lodash$2.isPlainObject(t))return t||.8;if([t.height,t.width].every(lodash$2.isFinite))return t.height/t.width;throw new Error("The canvas proportions object`s height and a width properties must be numeric")}function getTargetSize(t,e){var n=getProportions(t.proportions);if(t.width)return{width:t.width,height:t.width*n};var r=window.document.documentElement,i=r.clientHeight,o=Math.min(t.maxWidth||1/0,r.clientWidth,getSize$1(e.parentNode).width);return n*o<i?{height:o*n,width:o}:{height:i,width:i/n}}function parse(t){return parseFloat(t,10)||0}function canvasContructor(r,t){var e;if(!lodash$2.isPlainObject(r))throw new Error("canvas(map): You must set a rule map for canvas to work properly");if(lodash$2.isUndefined(t))return lodash$2.noop;if(!lodash$2.isPlainObject(t))throw new Error("canvas(settings): canvas settings must be an object");return e=lodash$2.map(t,function(t,e){var n=r[e];if(n)return on(n.element,n.property,t);throw new Error("canvas("+e+"): unknow key in canvas object.")}),function(){lodash$2.forEach(e,function(t){t.call()})}}function on(t,e,n){var r=t.style[e];return t.style[e]=n,function(){t.style[e]=r}}var css_1=css$2;function css$2(t,e){var n,r=t.style;if(e)for(var i in e)r[(n=i,n.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()}))]=e[i]}function setupCanvas(t,e){e||(e={});var n=stream();if(!lodash$2.isElement(t))throw new Error("Minno-time: canvas is not a DOM element");t.classList.add("minno-canvas");var r=canvasContructor({background:{element:document.body,property:"backgroundColor"},canvasBackground:{element:t,property:"backgroundColor"},borderColor:{element:t,property:"borderColor"},borderWidth:{element:t,property:"borderWidth"}},lodash$2.pick(e,["background","canvasBackground","borderColor","borderWidth"]));return e.css&&css_1(t,e.css),n.map(adjust_canvas(t,e)),n({}),window.addEventListener("orientationchange",n),window.addEventListener("resize",n),n.end.map(function(){t.classList.remove("minno-canvas")}).map(function(){window.removeEventListener("orientationchange",n),window.removeEventListener("resize",n)}).map(r),n}function setup$1(t,e){var n=setupCanvas(t,lodash$2.get(e,"settings.canvas",{})),r=createDB$1(e);return setupVars(e),{db:r,$resize:n,canvas:t,script:e,settings:e.settings||{}}}function setupVars(t){var e=global$3(global$3()),n=t.name||"anonymous minno-time",r=t.current?t.current:{};r.logs||(r.logs=[]),e[n]=e.current=r}var srcStack=[],defStack=[],stackDone=0,getText=lodash$2.memoize(getXhr),loader={load:load,all:function(){return Promise.all(defStack)},progress:function(){return defStack.length?stackDone/defStack.length:1}};function load(e,t){if(-1!==srcStack.indexOf(e))return!1;var n="template"==t?getText(e):getImage(e);return n.then(function(){stackDone++}).then(function(){loader.onload&&loader.onload(e)}).catch(function(t){loader.onerror&&loader.onerror(t,e)}),defStack.push(n),srcStack.push(e),n}function getImage(r){return new Promise(function(t,e){var n=document.createElement("img");n.onload=function(){t(n)},n.onerror=function(){e(new Error("Image not found: "+r))},n.src=r})}function getXhr(r){return new Promise(function(t,e){var n=new XMLHttpRequest;n.open("GET",r,!0),n.onreadystatechange=function(){4===this.readyState&&(200<=this.status&&this.status<400?t(this.responseText):e(new Error("Template not found:"+r)))},n.send()})}function buildUrl(t,e,n){return"image"==n&&/^data:image/.test(e)?e:(lodash$2.isObject(t)&&(t=t[n]),t?"/"!=t[t.length-1]&&(t+="/"):t="",t+e)}function preloadScript(t,e){return getScriptMedia(t).forEach(function(t){lodash$2.isUndefined(t.image)||loader.load(buildUrl(e,t.image,"image"),"image");lodash$2.isUndefined(t.template)||loader.load(buildUrl(e,t.template,"template"),"template")}),loader}function getScriptMedia(t){var e=t.mediaSets,n=lodash$2.map(t.stimulusSets,getStimMedia),r=lodash$2.map(t.trialSets,getTrialMedia),i=lodash$2.filter(t.sequence,notMixer).map(getTrialMedia);return lodash$2.flattenDeep([e,n,r,i]).filter(notUndefined)}function getTrialMedia(t){return[lodash$2.map(t.input,function(t){return t.element}),lodash$2.map(t.stimuli,getStimMedia),lodash$2.map(t.layout,getStimMedia)]}function getStimMedia(t){return t.media}function notMixer(t){return!t.mixer}function notUndefined(t){return!lodash$2.isUndefined(t)}function preloadPhase$1(t,e,n){var r=preloadScript(e,e.settings.base_url);if(1==r.progress())return Promise.resolve().then(o);t.innerHTML='<div class="minno-progress"><div class="minno-progress-bar"></div></div>';var i=t.getElementsByClassName("minno-progress-bar")[0].style;return i.width=r.progress()+"%",r.onload=function(){fastdom.mutate(function(){i.width=100*r.progress()+"%"})},r.onerror=function(t,e){n({type:"error",message:"Failed to preload",error:t,context:e})},r.all().then(o).catch(function(t){throw new Error("loading resource failed, do something about it! (you can start by checking the error log, you are probably reffering to the wrong url - "+t+")")});function o(){for(;t.firstChild;)t.removeChild(t.firstChild)}}function mouseEvents$1(t,n,e){var r=stream(),i=n.element;return i&&(css_1(i,n.css),fastdom.mutate(function(){e.appendChild(i)})),e.addEventListener(t,function(t){var e=t.target;return i&&e===i?r(t):i||e.getAttribute("data-handle")!==n.stimHandle?void 0:r(t)}),r.end.map(function(){i&&e.removeChild(i);e.removeEventListener(t,r)}),r}var keyDownArr=[];function keypressed$1(t){var e=stream(),n=(Array.isArray(t.key)?t.key:[t.key]).map(function(t){return"string"==typeof t?t.toUpperCase().charCodeAt(0):t});return document.addEventListener("keydown",r),e.end.map(function(){document.removeEventListener("keydown",r)}),e;function r(t){keyDownArr[t.which]||-1===n.indexOf(t.which)||(t.preventDefault(),keyDownArr[t.which]=!0,e(t))}}function keyup$1(t){var e=stream(),n=(Array.isArray(t.key)?t.key:[t.key]).map(function(t){return"string"==typeof t?t.toUpperCase().charCodeAt(0):t});return document.addEventListener("keyup",function(t){if(-1===n.indexOf(t.which))return;return t.preventDefault(),e(t)}),e.end.map(function(){document.removeEventListener("keyup",e)}),e}function simpleRandomize(t,e){if(lodash$2.isArray(t))return t[Math.floor(Math.random()*t.length)];if(lodash$2.isFunction(t))return t.call(e);if(lodash$2.isPlainObject(t)){if(!lodash$2.isNumber(t.min)||!lodash$2.isNumber(t.max)||t.min>t.max)throw new Error("randomization objects need both a max and a minimum property, also max has to be larger than min");return t.min+(t.max-t.min)*Math.random()}return t}function timeout$1(t){var e=stream(),n=simpleRandomize(t.duration)||0;return e.end.map(function(){clearTimeout(void 0)}),n?setTimeout(e.bind(null,{}),n):e({}),e}function inputBinder(t,e){var n=t.on;switch(n){case"keypressed":return keypressed$1(t);case"keyup":return keyup$1(t);case"click":case"mousedown":return mouseEvents$1("mousedown",t,e);case"mouseup":return mouseEvents$1("mouseup",t,e);case"mouseenter":return mouseEvents$1("mouseenter",t,e);case"mouseleave":return mouseEvents$1("mouseleave",t,e);case"timeout":return timeout$1(t);case"enter":return keypressed$1(lodash$2.assign({key:13},t));case"space":return keypressed$1(lodash$2.assign({key:32},t));case"esc":return keypressed$1(lodash$2.assign({key:27},t));case"leftTouch":return t.element=r(t.css,{position:"absolute",left:0,width:"30%",height:"100%",background:"#00FF00",opacity:.3}),mouseEvents$1("mousedown",t,e);case"rightTouch":return t.element=r(t.css,{position:"absolute",right:0,width:"30%",height:"100%",background:"#00FF00",opacity:.3}),mouseEvents$1("mousedown",t,e);case"topTouch":return t.element=r(t.css,{position:"absolute",top:0,width:"100%",height:"30%",background:"#00FF00",opacity:.3}),mouseEvents$1("mousedown",t,e);case"bottomTouch":return t.element=r(t.css,{position:"absolute",bottom:0,width:"100%",height:"30%",background:"#00FF00",opacity:.3}),mouseEvents$1("mousedown",t,e);default:throw new Error('You have an input element with an unrecognized "on" property: '+n)}function r(t,e){var n=document.createElement("div");return css_1(n,e),css_1(n,t),n}}function createListener$1(t,e){var n=getListener(t,e);if(!isStream(n))throw new Error("Input functions must return valid streams: "+logObj(t));return"handle"in t&&(n.handle=t.handle),n}function getListener(t,e){var n;if(lodash$2.isFunction(t))return t(t,e,stream);if(lodash$2.isPlainObject(t)){if(lodash$2.isString(t.on))return inputBinder(t,e,stream);lodash$2.isFunction(t.on)&&(n=t.on(t,e,stream)),lodash$2.isFunction(t.off)&&n.end.map(t.off)}throw new Error("Input must only contain objects and functions, do you have an undefined value?")}function logObj(t){return lodash$2.isFunction(t)?t.toString():JSON.stringify(t)}function isStream(t){return t._state}document.addEventListener("keyup",function(t){keyDownArr[t.which]=!1});var now=window.performance.now?window.performance.now.bind(window.performance):Date.now.bind(Date);function interfaceFn(n,r){var i=[],o=0;return{add:function(t){if(!t)throw new Error("Missing input element. Could not add input listener");var e=createListener$1(t,r);e.map(function(t){return{handle:e.handle,event:t,timestamp:+new Date,latency:now()-o}}).map(n),i.push(e)},remove:function(t){for(var e=i.length-1;0<=e;e--){var n=i[e];n.handle===t&&(n.end(!0),i.splice(e,1))}},removeAll:function(){i.forEach(function(t){t.end(!0)}),i.length=0},resetTimer:function(){o=now()}}}function getMedia$1(n){var r,t=n.html||n.inlineTemplate||n.template;return lodash$2.isFunction(n)?customMedia(n):(lodash$2.isString(n)&&(n={word:n}),n.word?((r=document.createElement("div")).textContent=n.word,Promise.resolve(r)):t?((r=document.createElement("div")).innerHTML=t,Promise.resolve(r)):n.image?new Promise(function(t,e){(r=document.createElement("img")).onload=function(){t(r)},r.onerror=function(){e(new Error("Image not found: "+r.src))},r.src=n.image}):n.jquery?Promise.reject(new Error("Jquery is no longer supported in minno-time")):Promise.reject(new Error("Unrecognized media type")))}function customMedia(t){var e,n=t();return(e=n)&&lodash$2.isFunction(e.then)?n.then(function(t){return lodash$2.isElement(t)?t:Promise.reject("Custom media must resolve with an element")}):Promise.reject(new Error("Custom media must return a promise"))}function setSize$1(t,e){var n=t.style,r=e.size||{};return r.font_size&&(n.fontSize=r.font_size),isSet("height",r)&&!isWordMedia(e.media)&&(n.height=r.height+"%"),isSet("width",r)&&(n.width=r.width+"%"),t}function isSet(t,e){return t in e}function isWordMedia(t){return lodash$2.isString(t)||lodash$2.isString(t.word)}var YCLASS="minno-stimulus-center-y",XCLASS="minno-stimulus-center-x";function setPlace$1(n,t){var r=t.location||{};("center"==r.top||"center"==r.bottom||void 0===r.top&&void 0===r.bottom)&&n.classList.add(YCLASS),("center"==r.left||"center"==r.right||void 0===r.left&&void 0===r.right)&&n.classList.add(XCLASS),["top","bottom","left","right"].forEach(function(t){e=r[t],isNaN(+e)||(n.style[t]=r[t]+"%");var e})}function fixIE(r,t){var i=r.style,o=r.classList.contains(XCLASS),a=r.classList.contains(YCLASS);if(!o&&!a)return t(r);fastdom.measure(function(){var t=window.getComputedStyle(r),e=parseFloat(t.width),n=parseFloat(t.height);fastdom.mutate(function(){i.transform="none",o&&(i.marginLeft="-"+e/2+"px"),a&&(i.marginTop="-"+n/2+"px")})})}function Stimulus$1(t,e,n){var r={el:null,source:t,trial:e,canvas:n,init:init,show:show,hide:hide,name:name,mediaName:mediaName,destroy:destroy$1};return r.data=t.data||{},r.handle=r.data.handle=r.data.handle||t.handle||t.set,r}function init(){var e=this.source,n=this.trial.$messages;if(!this.source.media)throw new Error("Media object not defined for "+this.name());return getMedia$1(this.source.media).then(setupElement.bind(this,this.canvas),function(t){throw n({type:"error",message:"trial.stimulus error",error:t,context:e}),t})}function setupElement(e,n){var r=this;return this.el=n,new Promise(function(t){fastdom.mutate(function(){n.classList.add("minno-stimulus"),n.setAttribute("data-handle",r.handle),setSize$1(n,r.source),setPlace$1(n,r.source),css_1(n,r.source.css||{}),r.source.isLayout&&n.classList.add("minno-stimulus-visible"),e.appendChild(n),document.documentMode?fixIE(n,t):t(n)})})}function show(){var t=this.el;if(!t)throw new Error("A stimulus can not be shown before init is called");fastdom.mutate(function(){t.classList.add("minno-stimulus-visible")})}function hide(){var t=this.el;if(!t)throw new Error("A stimulus can not be hidden before init is called");fastdom.mutate(function(){t.classList.remove("minno-stimulus-visible")})}function destroy$1(){var t=this.el,e=this.canvas;fastdom.mutate(function(){e.removeChild(t)})}function name(){var t=this.source;return t.alias?t.alias:this.data.alias?this.data.alias:t.inherit&&t.inherit.set?t.inherit.set:this.handle?this.handle:void 0}function mediaName(t){var e=this.source.media,n=t&&t.fullpath;if(e.alias)return e.alias;for(var r in e){if(contains$1(["image","template"],r))return n?e[r]:e[r].replace(/^.*[\\/]/,"");if(contains$1(["word","html","inlineTemplate"],r)&&e[r])return e[r]}}function contains$1(t,e){return-1!=t.indexOf(e)}function stimCollection(e,n){validateStimuli("stimuli",e._source),validateStimuli("layout",e._source);var t=e._source,r=lodash$2.map(t.stimuli,a),i=lodash$2.map(t.layout,function(t){return t.isLayout=!0,t}).map(a),o=Promise.all(r.concat(i).map(function(t){return t.init()}));return{canvas:n,stimuli:r,layout:i,ready:o,getStimlist:getStimlist,getMedialist:getMedialist,destroy:destroy};function a(t){return Stimulus$1(t,e,n)}}function getStimlist(){return this.stimuli.filter(function(t){return!t.source.nolog}).map(function(t,e){return t.name()||"stim"+e})}function getMedialist(n){return this.stimuli.filter(function(t){return!t.source.nolog}).map(function(t,e){return t.mediaName(n)||"media"+e})}function destroy(){this.stimuli.concat(this.layout).forEach(function(t){t.destroy()})}function validateStimuli(t,e){var n=e[t];if(n){if(!Array.isArray(n))throw new Error(t+" must be an array");if(!n.every(function(t){return"media"in t}))throw new Error("Each "+t+" stimulus must have a media property")}}var global$4=global$3(),conditionHash={begin:begin,inputEquals:inputEquals,inputEqualsTrial:inputEqualsTrial,inputEqualsStim:inputEqualsStim,trialEquals:trialEquals,inputEqualsGlobal:inputEqualsGlobal,globalEquals:globalEquals,globalEqualsTrial:globalEqualsTrial,globalEqualsStim:globalEqualsStim,currentEquals:currentEquals,currentEqualsTrial:currentEqualsTrial,currentEqualsStim:currentEqualsStim,inputEqualsCurrent:inputEqualsCurrent,fn:fn,custom:custom};function getConditonFn(t){if(lodash$2.isFunction(t))return t;if(lodash$2.isFunction(conditionHash[t.type]))return conditionHash[t.type];throw new Error("Unknown condition type: "+JSON.stringify(t))}function begin(t){return"begin"===t.type}function inputEquals(t,e){return-1!==(Array.isArray(e.value)?e.value:[e.value]).indexOf(t.handle)}function inputEqualsTrial(t,e,n){return t.handle===n.data[e.property]}function inputEqualsStim(t,e,n){var r={};return e.handle&&(r.handle=e.handle),r[e.property]=t.handle,hasData(r,n)}function trialEquals(t,e,n){if(lodash$2.isUndefined(e.property)||lodash$2.isUndefined(e.value))throw new Error('trialEquals requires both "property" and "value" to be defined');return e.value===n.data[e.property]}function inputEqualsGlobal(t,e){if(lodash$2.isUndefined(e.property))throw new Error('inputEqualsGlobal requires "property" to be defined');return t.handle===global$4[e.property]}function globalEquals(t,e){if(void 0===e.property||void 0===e.value)throw new Error('globalEquals requires both "property" and "value" to be defined');return e.value===global$4[e.property]}function globalEqualsTrial(t,e,n){if(void 0===e.globalProp||void 0===e.trialProp)throw new Error('globalEqualsTrial requires both "globalProp" and "trialProp" to be defined');return global$4[e.globalProp]!==n.data[e.trialProp]}function globalEqualsStim(t,e,n){if(void 0===e.globalProp||void 0===e.stimProp)throw new Error('globalEqualsStim requires both "globalProp" and "stimProp" to be defined');var r={};return e.handle&&(r.handle=e.handle),r[e.stimProp]=global$4[e.globalProp],hasData(r,n)}function inputEqualsCurrent(t,e){var n=global$4.current;if(void 0===e.property)throw new Error('inputEqualsCurrent requires "property" to be defined');return t.handle===n[e.property]}function currentEquals(t,e){var n=global$4.current;if(void 0===e.property||void 0===e.value)throw new Error('currentEquals requires both "property" and "value" to be defined');return e.value!==n[e.property]}function currentEqualsTrial(t,e,n){var r=global$4.current;if(void 0===e.currentProp||void 0===e.trialProp)throw new Error('currentEqualsTrial requires both "currentProp" and "trialProp" to be defined');return r[e.currentProp]===n.data[e.trialProp]}function currentEqualsStim(t,e,n){var r=global$4.current;if(void 0===e.currentProp||void 0===e.stimProp)throw new Error('currentEqualsStim requires both "currentProp" and "stimProp" to be defined');var i={};return e.handle&&(i.handle=e.handle),i[e.stimProp]=r[e.currentProp],hasData(i,n)}function fn(t,e,n){return e.value.apply(n,[e,t,n])}function custom(t,e,n){return e.fn.apply(null,[e,t,n])}function hasData(r,t){return t.stimulusCollection.stimuli.some(function(t){var e=t.data;for(var n in r)if(r[n]!==e[n])return!1;return!0})}function conditionsEvaluate(t,n,r){return t=Array.isArray(t)?t:[t],("begin"!=n.type||!t.every(function(t){return"begin"!=t.type}))&&t.every(function(t){var e=getConditonFn(t)(n,t,r);return t.negate?!e:e})}var actions={showStim:function(t,e,n){var r=t.handle||t;n.stimulusCollection.stimuli.forEach(function(t){"All"!=r&&t.handle!=r||t.show()})},hideStim:function(t,e,n){var r=t.handle||t;n.stimulusCollection.stimuli.forEach(function(t){"All"!=r&&t.handle!=r||t.hide()})},setStimAttr:function(t,e,n){var r=t.handle,i=t.setter;n.stimulusCollection.stimuli.forEach(function(t){"All"!=r&&t.handle!=r||(lodash$2.isFunction(i)?i.apply(t):lodash$2.extend(t.data,i))})},setTrialAttr:function(t,e,n){var r=t.setter;if(void 0===r)throw new Error("The setTrialAttr action requires a setter property");lodash$2.isFunction(r)?r.apply(n,[n.data,e]):lodash$2.extend(n.data,r)},setInput:function(t,e,n){if(void 0===t.input)throw new Error("The setInput action requires an input property");n.input.add(t.input)},trigger:function(t,e,n){if(void 0===t.handle)throw new Error("The trigger action requires a handle property");n.input.add({handle:t.handle,on:"timeout",duration:+t.duration||0})},removeInput:function(t,e,n){var r=n.input,i=t.handle;if(void 0===i)throw new Error("The removeInput action requires a handle property");"All"==i||lodash$2.include(i,"All")?r.removeAll():r.remove(i)},goto:function(t,e,n){n._next=[t.destination,t.properties]},endTrial:function(){},resetTimer:function(t,e,n){function r(){e.latency=0,n.input.resetTimer()}t.immidiate?r():fastdom.mutate(r)},log:function(t,e,n){n.$logs(arguments)},setGlobalAttr:function(t){switch(typeof t.setter){case"function":t.setter.apply(null,[global$3(),t]);break;case"object":lodash$2.extend(global$3(),t.setter);break;default:throw new Error('setGlobalAttr requires a "setter" property')}},custom:function(t,e,n){if("function"!=typeof t.fn)throw new Error("The custom action requires a fn propery");t.fn(t,e,n)},canvas:function(t,e,n){var r=n.cavnas,i=canvasContructor({background:{element:document.body,property:"backgroundColor"},canvasBackground:{element:r,property:"backgroundColor"},borderColor:{element:r,property:"borderColor"},borderWidth:{element:r,property:"borderWidth"}},lodash$2.pick(t,["background","canvasBackground","borderColor","borderWidth"]));n.$end.map(i)},startMouseTracking:function(e,t,u){if(u.data.listener)return u.$message({type:"warn",message:"Mouse tracking has already been activated."});var s=performance.now(),c=u.canvas,l=e.logAs||"mousetracker",n=getComputedStyle(c),f=parseInt(n.getPropertyValue("border-top-width")),d=parseInt(n.getPropertyValue("border-left-width")),p=u.stimulusCollection.stimuli.filter(function(t){return lodash$2.contains(e.logStimulusLocation,t.handle)}),r=lodash$2.throttle(function(t){var e=c.getBoundingClientRect(),r=e.x+d,i=e.y+f,n={mouseX:t.clientX-r,mouseY:t.clientY-i},o=p.reduce(function(t,e){var n=e.el.getBoundingClientRect();return lodash$2.set(t,e.handle+"X",n.x-r),lodash$2.set(t,e.handle+"Y",n.y-i),t},n),a=lodash$2.mapValues(lodash$2.set(o,"time",performance.now()-s),Math.round);u.data[l].push(a)},e.logRate||15);u.data[l]||(u.data[l]=[]),u.data.$listener=r,document.addEventListener("mousemove",r),u.$events.end.map(function(){document.removeEventListener("mousemove",r)})},stopMouseTracking:function(t,e,n){lodash$2.isFunction(n.data.$listener)&&document.removeEventListener("mousemove",n.data.$listener)}};function applyActions(t,n,r){var i=!1;return t=lodash$2.isArray(t)?t:[t],lodash$2.forEach(t,function(t){var e=lodash$2.isFunction(t)?t:actions[t.type];if(!e)throw new Error("unknown action: "+t.type);"endTrial"===t.type&&(i=!0),e(t,n,r)}),i}var MAX_RECURSION_DEPTH=50;function interactions$1(u){var s=0,c=u._source.interactions;try{validateInteractions(c)}catch(t){throw u.$messages({type:"error",message:"trial.interactions error",error:t,context:u._source}),t}return function(t){var e,n,r,i,o="Event: "+(t.handle||t.type),a=[];if(MAX_RECURSION_DEPTH<s)throw new Error("It seem you have created an infinite loop. Minno has been halted");s++;try{for(e=0;e<c.length&&(n=c[e],r=conditionsEvaluate(n.conditions,t,u),a.push([r,n.conditions]),r&&(i=applyActions(n.actions,t,u)),!i);e++);}catch(t){throw u.$messages({type:"error",message:"trial.interactions error",error:t}),t}s--,u.$messages({type:"debug",message:o,rows:a}),i&&u.end();return t}}function validateInteractions(t){if(!Array.isArray(t))throw new Error("Interactions must be an array");if(!t.length)throw new Error("There are no interactions defined");if(!t.every(lodash$2.isPlainObject))throw new Error("Interactions must be plain objects");if(!t.every(e("conditions")))throw new Error("Conditions must be either an array or a function");if(!t.every(e("actions")))throw new Error("Actions must be either an array or a function");function e(e){return function(t){return Array.isArray(t[e])||lodash$2.isFunction(t[e])}}}var gid=0;function Trial$1(t,e,n){if(!t.interactions)throw new Error("Interactions not defined");this.canvas=e,this.settings=n,this._source=t,this.$logs=stream(),this.$messages=stream(),this.$events=stream(),this.$end=this.$events.end,this.data=t.data||{},this._id=lodash$2.uniqueId("trial_"),this.counter=gid++,this.input=interfaceFn(this.$events,e),this.stimulusCollection=stimCollection(this,e),this._next=["next",{}]}function addTrialDetails(e){return function(t){return lodash$2.assign(t,{trialId:e._id,counter:e.counter})}}function nextTrial$1(i,o,t){var e,n=t[0],r=t[1],a=i.currentSequence,u=global$3(),s={global:u,current:u.current};return a.go(n,r,s),(e=a.current(s,{skip:["layout","stimuli"]}))?(e.stimuli=lodash$2.map(e.stimuli||[],l,s),e.layout=lodash$2.map(e.layout||[],l,s),s.trialData=null,{value:e}):{done:!0};function c(t,e,n){var r=t[e];if(lodash$2.isUndefined(r))return!1;lodash$2.isString(r)&&(r={word:r}),(r=i.inflate("media",r,n)).image&&(r.image=buildUrl(o.base_url,r.image,"image")),r.template&&(r.inlineTemplate=requirejs("text!"+buildUrl(o.base_url,r.template,"template")),r.inlineTemplate=lodash$2.template(r.inlineTemplate)(n)),t[e]=r,n.mediaData=null,n.mediaMeta=null}function l(t){return c(t=i.inflate("stimulus",t,this,{skip:["media","touchMedia"]}),"media",this),c(t,"touchMedia",this),this.stimulusData=null,this.stimulusMeta=null,t}}function createLogs$3(t,e,n){var r,i=e.logger||e.logMap||n;return t.map((r=i,function(t){return r.apply(null,t)}))}function transformLogs(t,e,n){var r=window.piGlobal,i=n.data,o=e,a=r.current.logs,u=lodash$2.get(n,"settings.logger.fullpath",!1),s=n.stimulusCollection.getStimlist(),c=n.stimulusCollection.getMedialist({fullpath:u});return{log_serial:a.length,trial_id:n.counter,name:n.name(),responseHandle:o.handle,latency:Math.floor(o.latency),stimuli:s,media:c,data:i}}function playerPhase(t){var r,i=t.canvas,n=t.db,o=t.settings,a=stream(),e=a.map(function(t){var e=r,n=r=new Trial$1(t,i,o);return n.$logs.map(u),n.$messages.map(s),t.DEBUG&&window.DEBUG&&setupDebug(n),n.$end.map(function(){f(n._next)}),n.start(),e&&fastdom.mutate(function(){e.stimulusCollection.destroy()}),n}),u=stream(),s=stream(),c=createLogs$3(u,composeLoggerSettings(t.script,global$3()),transformLogs),l=lodash$2.get(o,"hooks.endTask",o.onEnd||lodash$2.noop);return a.end.map(e.end).map(u.end).map(function(){var t=e();t&&t.stimulusCollection.destroy()}).map(l),lodash$2.extend({$trial:e,end:a.end.bind(null,!0),$logs:c,$messages:s,start:f.bind(null,["next",{}]),onEnd:function(t){a.end.map(t)}},t);function f(t){var e=nextTrial$1(n,o,t);e.done?a.end(!0):a(e.value)}}function setupDebug(t){var e="Trial :"+t.counter;console.group(e),t.$messages.map(function(t){if("debug"!==t.type)return t;t.rows?(console.groupCollapsed(t.message),t.rows.forEach(function(t){console.log.apply(console,t)}),console.groupEnd(t.message)):console.log(t.message);return t}),t.$events.end.map(function(){console.groupEnd(e)})}function composeLoggerSettings(t,e){var n=lodash$2.assign({},lodash$2.get(t,"settings.logger")),r=lodash$2.assign({taskName:t.name},e.$meta,n.metaData);return n.metaData=r,n}function activate$2(t,e){var n=playerPhase(setup$1(t,e));return n.$trial.end.map(n.$resize.end),preloadPhase$1(t,e,n.$messages).then(n.start),n}function activateTime$1(t,e,n,r,i,o){var a,u,s=createLog(o,r,n);return r.name=n.$name,e.append("<div pi-player></div>"),a=e.contents(),(u=activate$2(a[0],r)).onEnd(t),u.$messages.map(i),u.$logs.map(s),u.$logs.end.map(s.end),function(){s.end(!0),a.remove(),u.end()}}function allowLeaving(t,e){e.deactivate(),t()}lodash$2.extend(Trial$1.prototype,{start:function(){var t=this;return t.stimulusCollection.ready.then(function(){t.$events.map(addTrialDetails(t)).map(interactions$1(t)),lodash$2.forEach(t._source.input,t.input.add),t.input.resetTimer(),t.$events({type:"begin",latency:0})})},end:function(){this.input.removeAll(),this.$end(!0)},name:function(){return this.alias?this.alias:this.data.alias?this.data.alias:lodash$2.isString(this._source.inherit)?this._source.inherit:lodash$2.isPlainObject(this._source.inherit)?this._source.inherit.set:void 0}}),activateTime$1.$inject=["done","$element","task","script","piConsole","logger"],allowLeaving.$inject=["done","managerBeforeUnload"];var module$14=angular.module("pi.task",[]);function canvasContructor$1(r,t){var e;if(!lodash$1.isPlainObject(r))throw new Error("canvas(map): You must set a rule map for canvas to work properly");if(lodash$1.isUndefined(t))return lodash$1.noop;if(!lodash$1.isPlainObject(t))throw new Error("canvas(settings): canvas settings must be an object");return e=lodash$1.map(t,function(t,e){var n=r[e];if(n)return on$1(n.element,n.property,t);throw new Error("canvas("+e+"): unknow key in canvas object.")}),function(){lodash$1.forEach(e,function(t){t.call()})}}function on$1(t,e,n){var r=t.css(e);return t.css(e,n),lodash$1.bind(t.css,t,e,r)}function managerCanvasService(t,e){var n={background:{element:angular.element(e[0].body),property:"backgroundColor"},canvasBackground:{element:t,property:"backgroundColor"},fontSize:{element:t,property:"fontSize"},fontColor:{element:t,property:"color"}};return lodash$1.bind(canvasContructor$1,null,n)}module$14.provider("taskActivate",provider),module$14.directive("piTask",directive$10),module$14.config(["taskActivateProvider",function(t){t.set("postCsv",postCsv),t.set("quest",activateQuest$1),t.set("message",activateMessage$1),t.set("post",activatePost$1),t.set("redirect",activateRedirect$1),t.set("pip",activatePIP$1),t.set("time",activateTime$1),t.set("allowLeaving",allowLeaving)}]),managerCanvasService.$inject=["$rootElement","$document"];var module$15=angular.module("pi.canvas",[]);function swapControler(t){this.$scope=t}function swapDirective(t,l,f){return{transclude:!0,controller:swapControler,controllerAs:"ctrl",compile:function(){return{pre:this.pre,post:function(){}}},pre:function(i,t,e,n,o){i.enter=function(t,e){var n=e||{};if(n.pre&&n.pre(),!t)return c(n);var r=lodash$1.extend(i.$new(),t);o(r,function(t){!function(t,e){if(!e)return;var n=e.split(" ");lodash$1.each(n,function(t){if(!f.has("."+t+"-animation"))throw new Error('Unknown animation type: "'+t+'"')}),t.addClass(e)}(t,n.animate),c(n),u=t,a=r,l.enter(u,s,null,function(){n.post&&n.post()})})},i.empty=c,i.refresh=function(t){lodash$1.extend(a,t)};var a,u,r,s=t;function c(t){var e=t||{};r&&(r.remove(),r=null),a&&(a.$destroy(),a=null),u&&(l.leave(u,function(){r=null,e.postLeave&&e.postLeave()}),r=u,u=null)}}}}module$15.service("managerCanvas",managerCanvasService),swapControler.$inject=["$scope"],lodash$1.extend(swapControler.prototype,{next:function(t,e){this.$scope.enter(t,e)},prev:function(t,e){this.$scope.enter(t,e)},refresh:function(t){this.$scope.refresh(t)},empty:function(t){this.$scope.empty(t)}}),swapDirective.$inject=["$compile","$animate","$injector"];var template$9='<div>\n\t<img ng-if="spinner" class="pi-logo" src="img/loader.gif" />\n\t<div ng-if="!spinner" ng-transclude></div>\n</div>\n';function directive$11(){return{transclude:!0,replace:!0,template:template$9,require:[],scope:{spinner:"=piSpinner"}}}directive$11.$inject=[];var module$16=angular.module("piHelperDirective",[]);function Logger$1(a){var u={};return{createLog:function(e,t){var n=stream(),r=stream(),i=lodash$1.defaults({},t,a);if(!lodash$1.isString(e)&&!lodash$1.isNumber(e))throw new Error("Log name must be a string");return function(e){if(!["onRow","onEnd","serialize","send"].every(function(t){return lodash$1.isFunction(e[t])}))throw new Error('The Logger requires all four of the following functions: "onRow","onEnd","serialize","send"')}(i),n.map(o(function(t){return i.onRow(e,t,i,u)})).map(r),n.end.map(o(function(){return i.onEnd(e,i,u)})).map(r),r.map(function(t){return lodash$1.isUndefined(t)?stream.HALT:t}).map(o(function(t){return i.serialize(e,t,i,u)})).map(o(function(t){return i.send(e,t,i,u)})),n;function o(t){return function(){try{return t.apply(this,arguments)}catch(t){if(i.onError)return i.onError.apply(this,[t].concat(arguments));throw t}}}},ctx:u}}module$16.directive("piSwap",swapDirective),module$16.directive("piSpinner",directive$11);var dfltLogger={onRow:onRow,onEnd:onEnd,serialize:serialize,send:send};function onRow(t,e,n,r){var i=r[t]||(r[t]=[]);if(e.isSave)return[lodash$1.set(e,"$isManual",!0)];if(n.isManager)return[e];if(i.push(e),n.pulse&&i.length>=n.pulse){var o=[].concat(i);return i.length=0,o}}function onEnd(t,e,n){var r=n[t]||(n[t]=[]);if(r.length)return r}function serialize(e,t,n){var r=lodash$1.assign({data:t.map(function(t){return lodash$1.set(t,"taskName",e)})},window.piGlobal.$meta,n.meta);return JSON.stringify(r)}function send(e,n,r,i){r.url&&xhr({url:r.url,method:"PUT",body:n}).catch(function(t){r.onError.apply(null,[t,e,n,r,i])})}var serial=1e3,taskNumber=0,lastTrialId,oldLogger={onRow:onRow$1,onEnd:onEnd$1,serialize:serialize$1,send:send$1};function onRow$1(t,e,n,r){var i,o=r[t]||(r[t]=[]);if(n.isSave)return i=e,lodash$1.pairs(i).map(function(t){return{name:t[0],response:t[1],serial:serial++}});if(n.isManager)return e;if((n.isPIP||n.isTime)&&(e.trial_id===lastTrialId&&n.onError.apply(null,[new Error("minno-time: PI server does not accept multiple logs per trial"),t,e,n,r]),lastTrialId=e.trial_id),o.push(e),n.pulse&&o.length>=n.pulse){var a=[].concat(o);return o.length=0,a}}function onEnd$1(t,e,n){var r=n[t]||(n[t]=[]);if(taskNumber++,serial=1e3,r.length)return r}function serialize$1(t,e,n){var r,i,o=lodash$1.assign({taskName:t,taskNumber:taskNumber},window.piGlobal.$meta,n.meta);return n.isManager&&!n.isSave?JSON.stringify(lodash$1.assign(o,e)):n.isPIP||n.isTime?(r="json="+encodeURIComponent(JSON.stringify(e)))+((i=function(t){var e,n=[];for(e in t)n.push(encodeURIComponent(e)+"="+encodeURIComponent(t[e]));return n.join("&").replace(/%20/g,"+")}(o))?"&"+i:""):(r=e.map(function(t){return lodash$1.assign({},t,o)}),JSON.stringify(r))}function send$1(e,n,r,i){var t=!r.isSave&&(r.isPIP||r.isTime)&&"application/x-www-form-urlencoded; charset=UTF-8";xhr({url:r.isSave||r.isQuest?"/implicit/PiQuest":r.isPIP||r.isTime?"/implicit/PiPlayerApplet":"/implicit/PiManager",mehtod:"POST",body:n,contentType:t}).catch(function(t){r.onError.apply(null,[t,e,n,r,i])})}var debugLogger={onRow:onRow$2,onEnd:onEnd$2,serialize:serialize$2,send:send$2};function onRow$2(t,e,n,r){var i=r[t]||(r[t]=[]);if(i.push(e),n.pulse&&i.length>=n.pulse){var o=[].concat(i);return i.length=0,o}}function onEnd$2(t,e,n){var r=n[t]||(n[t]=[]);if(r.length)return r}function serialize$2(t,e){return e}function send$2(e,t,n){n.url||console.warn("Logger("+e+"): You have not set a logger url"),t.map(function(t){console.info("Logger("+e+"):",t)})}function managerLogger(t,e){return Logger$1(lodash$1.assign({onError:function(){e({type:"error",message:"Logger failed",error:lodash$1.first(arguments),rows:[["Task Name:",arguments[1]],["Data processed:",5==arguments.length?arguments[2]:"N/A"],["Settings:",arguments[arguments.length-2]]]})}},getSettingsObject(t),t))}function getSettingsObject(t){var e=t.type;return t.postCsv?csvLogger:"csv"==e?csvLogger:"old"==e?oldLogger:"debug"==e?debugLogger:dfltLogger}function managerService(t,e,i,o,d,a){function u(t,e){var n=this,r=e.settings||{};if(!(this instanceof u))return new u(t,e);this.$scope=t,this.script=e,this.logger=managerLogger(r.logger||{},a),this.log=createLog(this.logger,this.script,{type:"manager",$name:e.name||"manager"}),t.$on("$destroy",function(){n.log.end(!0)}),this.sequence=new i(e),function(t,e){var n,r,i=d.get("managerCanvas"),o=d.get("$document"),a=d.get("piPreloadImages"),u=d.get("managerBeforeUnload"),s=d.get("managerInjectStyle"),c=d.get("$rootElement"),l=e.skin||"default",f=d.get("piConsole");u.activate(),t.$on("$destroy",u.deactivate),n=i(e.canvas),t.$on("$destroy",n),r=s(e.injectStyle),t.$on("$destroy",r),a(e.preloadImages||[]),e.title&&(o[0].title=e.title);c.addClass(l+"-skin"),c.attr("dir",e.rtl?"rtl":""),f.settings=e.DEBUG||{}}(t,r),t.$on("manager:next",function(t,e){switch(e||(e={type:"next"}),e.type){case"current":n.load(e);break;case"prev":n.prev(e);break;case"next":default:n.next(e)}}),t.$on("manager:prev",function(){n.prev()})}return lodash$1.extend(u.prototype,{next:function(t){this.sequence.next(),this.load(t)},prev:function(t){this.sequence.prev(),this.load(t)},current:function(){return this.sequence.current()},load:function(t){var e=this.current(),n=this.$scope,r={baseUrl:this.baseUrl,bustCache:t&&t.bustCache};if(e)return o(e,r).then(function(){a({tags:["manager"],type:"debug",message:"Manager:currentTask",context:e}),n.$emit("manager:loaded")});n.$emit("manager:loaded")},setBaseUrl:function(t){this.baseUrl=t}}),u}function sequenceProvider(r,i,o,a){function u(t){var e,n;if(!(this instanceof u))return new u(t);(e=this.db=new r).createColl("tasks"),e.add("tasks",t.tasksSets||[]),n={global:i.global},lodash$1.extend(o,n),lodash$1.extend(a,n),this.sequence=e.sequence("tasks",t.sequence)}return lodash$1.extend(u.prototype,{next:function(){return this.sequence.next(),this},prev:function(){return this.sequence.prev(),this},current:function(){return this.sequence.current()}}),u}function managerLoadService(n,r){return function(t){var e=lodash$1.isString(t)?r(t):t;return n.when(e)}}function getScriptProvider(){var u=lodash$1.memoize(function(r){return new Promise(function(t,e){var n=new XMLHttpRequest;n.open("GET",r,!0),n.onreadystatechange=function(){4===this.readyState&&(200<=this.status&&this.status<400?t(this.responseText):e(new Error("Failed posting to: "+r)))},n.send()})});return function(t,e){e||(e={});var n,r=(i=t,o=e,a="",o.baseUrl&&!/^\/|:/.test(i)&&(a+=o.baseUrl+"/"),a+=i,o.bustCache&&(a+="?bust="+ +new Date),a);var i,o,a;return e.isText?u(r):(n=r,new Promise(function(t,e){require([n],t,e)}))}}function taskLoadService(i,e,r){return function(e,t){var n,r;return n=e.scriptUrl?o(e.scriptUrl,t):e.script,r=e.templateUrl?o(e.templateUrl,lodash$1.extend({isText:!0},t)):e.template,i.all({script:i.when(n),template:i.when(r)}).then(function(t){return e.$name=e.name||lodash$1.get(t.script,"name","unnamedTask"),e.$script=t.script,e.$template=t.template,e})};function o(n,t){return e(n,t).then(function(t){if(!lodash$1.isUndefined(t))return t;var e=new Error("Could not load task "+n);throw r({tags:"task",type:"error",context:n,message:"Make sure that you returned the script and that your script does not have any errors",error:e}),e})}}managerService.$inject=["$rootScope","$q","managerSequence","managerTaskLoad","$injector","piConsole"],sequenceProvider.$inject=["Database","$rootScope","mixerDefaultContext","templateDefaultContext"],managerLoadService.$inject=["$q","managerGetScript"],taskLoadService.$inject=["$q","managerGetScript","piConsole"];var addEvent$1=window.attachEvent||window.addEventListener,removeEvent$1=window.detachEvent||window.removeEventListener,chkevent=window.attachEvent?"onbeforeunload":"beforeunload",proto={activate:function(){addEvent$1(chkevent,leaveEvent)},deactivate:function(){removeEvent$1(chkevent,leaveEvent)}};function leaveEvent(t){var e="Are you sure you want to leave this page? You may have some unsaved data here.";return(t||window.event).returnValue=e}function beforeunloadFactory(){return lodash$1.create(proto)}function injectStyle(t){var e=document.head||document.querySelector("head"),n=document.createElement("style");return n.type="text/css",n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),e.appendChild(n),function(){e.removeChild(n)}}function managerControler(r,i,o,a){this.init=function(t){var e,n=this;try{e=r.$eval(t)}catch(t){}finally{e||(e=t)}o(e).then(function(t){r.script=t,r.settings=t&&t.settings||{},r.manager=n.manager=new i(r,t),n.manager.setBaseUrl(function(t){if(!lodash$1.isString(t))return;return t.substring(0,t.lastIndexOf("/"))}(e)),r.$emit("manager:next")},function(t){a({type:"error",message:"Failed to load "+e,tags:["manager"],error:t})})}}function directive$12(c,l,f){return{priority:1e3,replace:!0,template:["<div pi-swap ng-cloak ng-class=\"{'pi-spinner':loading}\">",'<div ng-bind-html="task.preText"></div>','<div pi-task="task"></div>','<div ng-bind-html="task.postText"></div>',"</div>"].join("\n"),controller:managerControler,require:["piManager","piSwap"],link:function(n,t,e,r){var i,o,a=r[1],u=r[0];function s(t,n){var e=c.when();lodash$1(t).map(function(e){return function(){var t=lodash$1.isFunction(e)?l.invoke(e,null,n||{}):e;return c.when(t)}}).reduce(function(t,e){return t.then(e,function(t){f({type:"error",message:"There was an error in the task sequence.",tags:["manager"],error:t})})},e)}u.init(e.piManager),n.$on("manager:loaded",function(){n.loading=!1,o=i,(i=u.manager.current())?(e={prevTask:o,currentTask:i,managerSettings:n.settings},s([function(){var t={taskName:i.name||"namelessTask",taskNumber:lodash$1.get(i,"$meta.number"),taskURL:i.scriptUrl||i.templateUrl};u.manager.log(t,n.settings)},n.settings.onPreTask,lodash$1.get(o,"post"),i.pre,lodash$1.bind(a.next,a,{task:i,settings:n.settings}),i.load,function(){n.loading=!1}],e)):(t={prevTask:o,currentTask:i},s([o&&o.post,lodash$1.bind(a.empty,a),n.settings.onEnd,function(){n.loading=!1,n.$emit("manager:done"),n.$destroy()}],t));var t;var e}),n.$on("task:done",function(t,e){t.stopPropagation(),n.loading=!0,n.$emit("manager:next",e)}),n.loading=!0}}}function directive$13(){return{priority:1e3,template:'<div pi-manager="script"></div>',compile:function(){return{pre:function(t,e,n){var r,i=n.piManagerTask;try{r=t.$eval(i)}catch(t){}var o=r||{scriptUrl:i};t.script={sequence:[{script:["done","managerBeforeUnload",function(t,e){e.deactivate(),t()}]},o]}}}}}}function piLinkDirective(n){return{link:function(t,e){e.on("click",function(){n.deactivate()})}}}managerControler.$inject=["$scope","managerService","managerLoad","piConsole"],directive$12.$inject=["$q","$injector","piConsole"],piLinkDirective.$inject=["managerBeforeUnload"];var module$13=angular.module("taskManager",[module$14.name,module$15.name,module$10.name,module$16.name,module$7.name]),tUc,uUc,vUc;module$13.service("managerService",managerService),module$13.service("managerSequence",sequenceProvider),module$13.service("managerLoad",managerLoadService),module$13.service("managerGetScript",getScriptProvider),module$13.service("managerTaskLoad",taskLoadService),module$13.factory("managerBeforeUnload",beforeunloadFactory),module$13.constant("managerInjectStyle",injectStyle),module$13.directive("piManager",directive$12),module$13.directive("piManagerTask",directive$13),module$13.directive("piLink",piLinkDirective),
/**
 * @license AngularJS v1.2.27
 * (c) 2010-2014 Google, Inc. http://angularjs.org
 * License: MIT
 */
tUc=window,uUc=window.angular,uUc.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){var i="$$ngAnimateChildren";return function(t,e,n){var r=n.ngAnimateChildren;uUc.isString(r)&&0===r.length?e.data(i,!0):t.$watch(r,function(t){e.data(i,!!t)})}}).factory("$$animateReflow",["$$rAF","$document",function(e,t){var n=t[0].body;return function(t){return e(function(){n.offsetWidth,t()})}}]).config(["$provide","$animateProvider",function(t,n){var F=uUc.noop,z=uUc.forEach,b=n.$$selectors,B=1,j="$$ngAnimateState",P="ng-animate",M={running:!0};function V(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.nodeType==B)return n}}function c(t){return t&&uUc.element(t)}function l(t){return uUc.element(V(t))}function T(t,e){return V(t)==V(e)}t.decorator("$animate",["$delegate","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document",function(i,$,y,S,C,o,t){var k=0;S.data(j,M),o.$$postDigest(function(){o.$$postDigest(function(){M.running=!1})});var e=n.classNameFilter(),w=e?function(t){return e.test(t)}:function(){return!0};function a(t){var e=t.data(j)||{};e.running=!0,t.data(j,e)}function q(u,e,s){var t=u[0];if(t){var c,l,n="setClass"==e,r=n||"addClass"==e||"removeClass"==e;uUc.isArray(s)&&(c=s[0],l=s[1],s=c+" "+l);var i=u.attr("class")+" "+s;if(w(i)){var o=F,a=[],f=[],d=F,p=[],h=[],v=(" "+i).replace(/\s+/g,".");return z(function(t){if(t){var e=[],n={},r=t.substr(1).split(".");(y.transitions||y.animations)&&e.push($.get(b[""]));for(var i=0;i<r.length;i++){var o=r[i],a=b[o];a&&!n[o]&&(e.push($.get(a)),n[o]=!0)}return e}}(v),function(t){!g(t,e)&&n&&(g(t,"addClass"),g(t,"removeClass"))}),{node:t,event:e,className:s,isClassBased:r,isSetClassOperation:n,before:function(t){o=t,m(f,a,function(){o=F,t()})},after:function(t){d=t,m(h,p,function(){d=F,t()})},cancel:function(){z(a,function(t){(t||F)(!0)}),o(!0),z(p,function(t){(t||F)(!0)}),d(!0)}}}}function g(t,e){var n=t[e],r=t["before"+e.charAt(0).toUpperCase()+e.substr(1)];if(n||r)return"leave"==e&&(r=n,n=null),h.push({event:e,fn:n}),f.push({event:e,fn:r}),!0}function m(t,r,i){var o=[];z(t,function(t){t.fn&&o.push(t)});var a=0;z(o,function(t,e){var n=function(){!function(t){if(r){if((r[t]||F)(),++a<o.length)return;r=null}i()}(e)};switch(t.event){case"setClass":r.push(t.fn(u,c,l,n));break;case"addClass":r.push(t.fn(u,c||s,n));break;case"removeClass":r.push(t.fn(u,l||s,n));break;default:r.push(t.fn(u,n))}}),r&&0===r.length&&i()}}return{enter:function(t,e,n,r){t=uUc.element(t),e=c(e),n=c(n),a(t),i.enter(t,e,n),o.$$postDigest(function(){u("enter","ng-enter",t=l(t),e,n,F,r)})},leave:function(t,e){s(t=uUc.element(t)),a(t),o.$$postDigest(function(){u("leave","ng-leave",l(t),null,null,function(){i.leave(t)},e)})},move:function(t,e,n,r){t=uUc.element(t),e=c(e),n=c(n),s(t),a(t),i.move(t,e,n),o.$$postDigest(function(){u("move","ng-move",t=l(t),e,n,F,r)})},addClass:function(t,e,n){t=l(t=uUc.element(t)),u("addClass",e,t,null,null,function(){i.addClass(t,e)},n)},removeClass:function(t,e,n){t=l(t=uUc.element(t)),u("removeClass",e,t,null,null,function(){i.removeClass(t,e)},n)},setClass:function(t,e,n,r){t=l(t=uUc.element(t)),u("setClass",[e,n],t,null,null,function(){i.setClass(t,e,n)},r)},enabled:function(t,e){switch(arguments.length){case 2:if(t)A(e);else{var n=e.data(j)||{};n.disabled=!0,e.data(j,n)}break;case 1:M.disabled=!t;break;default:t=!M.disabled}return!!t}};function u(n,r,i,t,e,o,a){var u=q(i,n,r);if(!u)return x(),w(),b(),void E();r=u.className;var s=uUc.element._data(u.node);s=s&&s.events,t||(t=e?e.parent():i.parent());var c,l=i.data(j)||{},f=l.active||{},d=l.totalActive||0,p=l.last;if(u.isClassBased&&(c=l.running||l.disabled||p&&!p.isClassBased),c||function(t,e){if(M.disabled)return!0;if(T(t,S))return M.running;var n,r,i;do{if(0===e.length)break;var o=T(e,S),a=o?M:e.data(j)||{};if(a.disabled)return!0;if(o&&(i=!0),!1!==n){var u=e.data("$$ngAnimateChildren");uUc.isDefined(u)&&(n=u)}r=r||a.running||a.last&&!a.last.isClassBased}while(e=e.parent());return!i||!n&&r}(i,t))return x(),w(),b(),void E();var h=!1;if(0<d){var v=[];if(u.isClassBased){if("setClass"==p.event)v.push(p),A(i,r);else if(f[r]){var g=f[r];g.event==n?h=!0:(v.push(g),A(i,r))}}else if("leave"==n&&f["ng-leave"])h=!0;else{for(var m in f)v.push(f[m]),A(i,m);f={},d=0}0<v.length&&z(v,function(t){t.cancel()})}if(!u.isClassBased||u.isSetClassOperation||h||(h="addClass"==n==i.hasClass(r)),h)return x(),w(),b(),void _();"leave"==n&&i.one("$destroy",function(t){var e=uUc.element(this),n=e.data(j);if(n){var r=n.active["ng-leave"];r&&(r.cancel(),A(e,"ng-leave"))}}),i.addClass(P);var $=k++;function y(t){var e="$animate:"+t;s&&s[e]&&0<s[e].length&&C(function(){i.triggerHandler(e,{event:n,className:r})})}function w(){y("before")}function b(){y("after")}function _(){y("close"),a&&C(function(){a()})}function x(){x.hasBeenRun||(x.hasBeenRun=!0,o())}function E(){if(!E.hasBeenRun){E.hasBeenRun=!0;var t=i.data(j);t&&(u&&u.isClassBased?A(i,r):(C(function(){var t=i.data(j)||{};$==t.index&&A(i,r)}),i.data(j,t))),_()}}d++,f[r]=u,i.data(j,{last:u,active:f,index:$,totalActive:d}),w(),u.before(function(t){var e=i.data(j);t=t||!e||!e.active[r]||u.isClassBased&&e.active[r].event!=n,x(),!0===t?E():(b(),u.after(E))})}function s(t){var e=V(t);if(e){var n=uUc.isFunction(e.getElementsByClassName)?e.getElementsByClassName(P):e.querySelectorAll("."+P);z(n,function(t){var e=(t=uUc.element(t)).data(j);e&&e.active&&z(e.active,function(t){t.cancel()})})}}function A(t,e){if(T(t,S))M.disabled||(M.running=!1,M.structural=!1);else if(e){var n=t.data(j)||{},r=!0===e;!r&&n.active&&n.active[e]&&(n.totalActive--,delete n.active[e]),!r&&n.totalActive||(t.removeClass(P),t.removeData(j))}}}]),n.register("",["$window","$sniffer","$timeout","$$animateReflow",function(f,t,i,n){var _,x,E,S,C="";tUc.ontransitionend===vUc&&tUc.onwebkittransitionend!==vUc?(C="-webkit-",_="WebkitTransition",x="webkitTransitionEnd transitionend"):(_="transition",x="transitionend"),tUc.onanimationend===vUc&&tUc.onwebkitanimationend!==vUc?(C="-webkit-",E="WebkitAnimation",S="webkitAnimationEnd animationend"):(E="animation",S="animationend");var r,d="Duration",k="Property",p="Delay",h="IterationCount",q="$$ngAnimateKey",A="$$ngAnimateCSS3Data",j="ng-animate-block-transitions",P=3,M=1.5,T=1e3,O={},D=0,o=[];function a(){r||(r=n(function(){o=[],r=null,O={}}))}function u(t,e){r&&r(),o.push(e),r=n(function(){z(o,function(t){t()}),o=[],r=null,O={}})}var s=null,c=0,l=[];function R(t,e){var n=V(t);t=uUc.element(n),l.push(t);var r=Date.now()+e;r<=c||(i.cancel(s),c=r,s=i(function(){z(l,function(t){var e=t.data(A);e&&(e.closeAnimationFn||F)()}),l=[]},e,!1))}function I(t,e){var n=e?O[e]:null;if(!n){var r,i,o,a,u=0,s=0,c=0,l=0;z(t,function(t){if(t.nodeType==B){var e=f.getComputedStyle(t)||{};o=e[_+d],u=Math.max(v(o),u),a=e[_+k],r=e[_+p],s=Math.max(v(r),s),i=e[E+p],l=Math.max(v(i),l);var n=v(e[E+d]);0<n&&(n*=parseInt(e[E+h],10)||1),c=Math.max(n,c)}}),n={total:0,transitionPropertyStyle:a,transitionDurationStyle:o,transitionDelayStyle:r,transitionDelay:s,transitionDuration:u,animationDelayStyle:i,animationDelay:l,animationDuration:c},e&&(O[e]=n)}return n}function v(t){var e=0,n=uUc.isString(t)?t.split(/\s*,\s*/):[];return z(n,function(t){e=Math.max(parseFloat(t)||0,e)}),e}function g(t,e,n,r){var i,o,a,u=(o=(i=e).parent(),(a=o.data(q))||(o.data(q,++D),a=D),a+"-"+V(i).getAttribute("class")),s=u+" "+n,c=O[s]?++O[s].total:0,l={};if(0<c){var f=n+"-stagger",d=u+" "+f,p=!O[d];p&&e.addClass(f),l=I(e,d),p&&e.removeClass(f)}r=r||function(t){return t()},e.addClass(n);var h=e.data(A)||{},v=r(function(){return I(e,s)}),g=v.transitionDuration,m=v.animationDuration;if(0===g&&0===m)return e.removeClass(n),!1;e.data(A,{running:h.running||0,itemIndex:c,stagger:l,timings:v,closeAnimationFn:F});var $,y,w,b=0<h.running||"setClass"==t;return 0<g&&($=e,y=b,"ng-enter"!=(w=n)&&"ng-move"!=w&&"ng-leave"!=w&&y?$.addClass(j):V($).style[_+k]="none"),0<m&&0<l.animationDelay&&0===l.animationDuration&&(V(e).style[E]="none 0s"),!0}function m(t,e){var n=_+k,r=V(t);r.style[n]&&0<r.style[n].length&&(r.style[n]=""),t.removeClass(j)}function $(t){var e=E,n=V(t);n.style[e]&&0<n.style[e].length&&(n.style[e]="")}function N(t,n,r){var i="";return z(t.split(","),function(t,e){i+=(0<e?",":"")+(r*n+parseInt(t,10))+"s"}),i}function y(t,e,n,r){if(g(t,e,n,r))return function(t){t&&U(e,n)}}function w(t,e,n,r){if(e.data(A))return function(t,r,i,o){var e=V(r),n=r.data(A);if(-1!=e.getAttribute("class").indexOf(i)&&n){var a="";z(i.split(" "),function(t,e){a+=(0<e?" ":"")+t+"-active"});var u=n.stagger,s=n.timings,c=n.itemIndex,l=Math.max(s.transitionDuration,s.animationDuration),f=Math.max(s.transitionDelay,s.animationDelay),d=f*T,p=Date.now(),h=S+" "+x,v="",g=[];if(0<s.transitionDuration){var m=s.transitionPropertyStyle;-1==m.indexOf("all")&&(v+=C+"transition-property: "+m+";",v+=C+"transition-duration: "+s.transitionDurationStyle+";",g.push(C+"transition-property"),g.push(C+"transition-duration"))}if(0<c){if(0<u.transitionDelay&&0===u.transitionDuration){var $=s.transitionDelayStyle;v+=C+"transition-delay: "+N($,u.transitionDelay,c)+"; ",g.push(C+"transition-delay")}0<u.animationDelay&&0===u.animationDuration&&(v+=C+"animation-delay: "+N(s.animationDelayStyle,u.animationDelay,c)+"; ",g.push(C+"animation-delay"))}if(0<g.length){var y=e.getAttribute("style")||"";e.setAttribute("style",y+"; "+v)}r.on(h,_),r.addClass(a),n.closeAnimationFn=function(){b(),o()};var w=(c*(Math.max(u.animationDelay,u.transitionDelay)||0)+(f+l)*M)*T;return n.running++,R(r,w),b}function b(t){r.off(h,_),r.removeClass(a),U(r,i);var e=V(r);for(var n in g)e.style.removeProperty(g[n])}function _(t){t.stopPropagation();var e=t.originalEvent||t,n=e.$manualTimeStamp||e.timeStamp||Date.now(),r=parseFloat(e.elapsedTime.toFixed(P));Math.max(n-p,0)>=d&&l<=r&&o()}o()}(0,e,n,r);U(e,n),r()}function b(t,e,n,r){var i=y(t,e,n);if(!i)return a(),void r();var o=i;return u(0,function(){m(e),$(e),o=w(0,e,n,r)}),function(t){(o||F)(t)}}function U(t,e){t.removeClass(e);var n=t.data(A);n&&(n.running&&n.running--,n.running&&0!==n.running||t.removeData(A))}return{enter:function(t,e){return b("enter",t,"ng-enter",e)},leave:function(t,e){return b("leave",t,"ng-leave",e)},move:function(t,e){return b("move",t,"ng-move",e)},beforeSetClass:function(r,i,o,t){var e=L(o,"-remove")+" "+L(i,"-add"),n=y("setClass",r,e,function(t){var e=r.attr("class");r.removeClass(o),r.addClass(i);var n=t();return r.attr("class",e),n});if(n)return u(0,function(){m(r),$(r),t()}),n;a(),t()},beforeAddClass:function(n,r,t){var e=y("addClass",n,L(r,"-add"),function(t){n.addClass(r);var e=t();return n.removeClass(r),e});if(e)return u(0,function(){m(n),$(n),t()}),e;a(),t()},setClass:function(t,e,n,r){return w(0,t,(n=L(n,"-remove"))+" "+(e=L(e,"-add")),r)},addClass:function(t,e,n){return w(0,t,L(e,"-add"),n)},beforeRemoveClass:function(r,i,t){var e=y("removeClass",r,L(i,"-remove"),function(t){var e=r.attr("class");r.removeClass(i);var n=t();return r.attr("class",e),n});if(e)return u(0,function(){m(r),$(r),t()}),e;t()},removeClass:function(t,e,n){return w(0,t,L(e,"-remove"),n)}};function L(t,n){var r="";return t=uUc.isArray(t)?t:t.split(/\s+/),z(t,function(t,e){t&&0<t.length&&(r+=(0<e?" ":"")+t+n)}),r}}])}]);for(var vendors=["webkit","moz"],i=0;i<vendors.length&&!window.requestAnimationFrame;++i){var vp=vendors[i];window.requestAnimationFrame=window[vp+"RequestAnimationFrame"],window.cancelAnimationFrame=window[vp+"CancelAnimationFrame"]||window[vp+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var lastTime=0;window.requestAnimationFrame=function(t){var e=+new Date,n=Math.max(lastTime+16,e);return setTimeout(function(){t(lastTime=n)},n-e)},window.cancelAnimationFrame=clearTimeout}function animation(t,u){var s=t.requestAnimationFrame,c=t.cancelAnimationFrame;return{enter:function(e,r){var i,o=e[0],a=u();return e.css({top:"-60px"}),i=s(function t(){var e=u()-a;var n=e/300;if(300<e)return o.style.top=0,c(i),void r();o.style.top=60*(n-1)+"px";i=s(t)}),function(t){t&&(c(i),e.css({top:"0px"}))}},leave:function(t,r){var i,o=t[0],a=u();return i=s(function t(){var e=u()-a;var n=1-e/300;if(300<e)return c(i),void r();o.style.top=60*(n-1)+"px";i=s(t)}),function(t){t&&c(i)}}}}var dropInAnimation=["$window","timerNow",animation];function animation$1(t,u){var s=t.requestAnimationFrame,c=t.cancelAnimationFrame;return{enter:function(t,r){var i,o=t[0],a=u();return o.style.opacity=0,i=s(function t(){var e=u()-a;var n=e/300;if(300<e)return o.style.opacity=1,c(i),void r();o.style.opacity=n;i=s(t)}),function(t){t&&(c(i),o.style.opacity=1)}},leave:function(t,r){var i,o=t[0],a=u();return i=s(function t(){var e=u()-a;var n=1-e/300;if(300<e)return o.style.opacity=0,c(i),void r();o.style.opacity=n;i=s(t)}),function(t){t&&(c(i),o.style.opacity=0)}}}}var fadeAnimation=["$window","timerNow",animation$1];function animation$2(t,u){var s=t.requestAnimationFrame,c=t.cancelAnimationFrame;return{enter:function(t,r){var i,o=t[0],a=u();return o.style.left="-100%",i=s(function t(){var e=u()-a;var n=1-e/300;if(300<e)return o.style.left="0%",c(i),void r();o.style.left=100*-n+"%";i=s(t)}),function(t){t&&(c(i),o.style.left="0%")}},leave:function(t,r){var i,o=t[0],a=u();return i=s(function t(){var e=u()-a;var n=e/300;if(300<e)return o.style.left="100%",c(i),void r();o.style.left=100*n+"%";i=s(t)}),function(t){t&&(c(i),o.style.left="100%")}}}}var slideAnimation=["$window","timerNow",animation$2],module$17=angular.module("pi.animate",["ngAnimate"]);module$17.animation(".drop-in",dropInAnimation),module$17.animation(".fade",fadeAnimation),module$17.animation(".slide",slideAnimation),window.require=require,window.requirejs=requirejs$1,window.define=define;var submodules=[module$1.name,module$12.name,module$13.name,module$17.name,module$7.name],app$1=angular.module("piApp",submodules);function activate$1(t){angular.bootstrap(t,[app$1.name])}return app$1.run(["$rootScope","$rootElement","$parse","$window",function(t,e,n,r){var i=n(e.attr("pi-global"))(r);window.piGlobal||(window.piGlobal={}),t.global=window.piGlobal,i&&lodash$1.extend(t.global,i)}]),app$1.config(["$provide",function(t){"function"!=typeof Object.getPrototypeOf&&(Object.getPrototypeOf="object"==typeof"test".__proto__?function(t){return t.__proto__}:function(t){return t.constructor.prototype});t.decorator("$rootScope",["$delegate",function(n){var r=Object.getPrototypeOf(n);return r.$new=function(t){var e;return t?((e=new r.constructor).$root=this.$root,e.$$asyncQueue=this.$$asyncQueue,e.$$postDigestQueue=this.$$postDigestQueue):(this.$$childScopeClass||(this.$$childScopeClass=function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$id=++n.$id,this.$$childScopeClass=null},this.$$childScopeClass.prototype=this),e=new this.$$childScopeClass),(e.this=e).$parent=this,e.$$prevSibling=this.$$childTail,this.$$childHead?(this.$$childTail.$$nextSibling=e,this.$$childTail=e):this.$$childHead=this.$$childTail=e,e},n.$new=r.$new,n}])}]),define("managerAPI",lodash$1.constant(manager)),define("timeAPI",lodash$1.constant(api$1)),define("pipAPI",lodash$1.constant(api$1)),define("questAPI",lodash$1.constant(quest)),define("minno-sequencer",lodash$1.constant(Database$2)),define("lodash",lodash$1.constant(lodash$1)),define("underscore",lodash$1.constant(lodash$1)),define("angular",lodash$1.constant(angular)),define("pipScorer",lodash$1.constant(Scorer)),define("dscore",lodash$1.constant(Scorer)),angular.element(document).ready(function(){var t=document.getElementById("minno-app");t&&activate$1(t)}),activate$1}();
//# sourceMappingURL=minno.js.map
