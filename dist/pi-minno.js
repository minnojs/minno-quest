/**
 * @preserve minno-quest v0.2.27
 * @license Apache-2.0 (2018)
 */
var minnoQuest=function(){"use strict";
/**
 * @license AngularJS v1.2.27
 * (c) 2010-2014 Google, Inc. http://angularjs.org
 * License: MIT
 */
/**
 * @license AngularJS v1.2.27
 * (c) 2010-2014 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(v,Z,tt){function _(s){return function(){var t,e,n,r=arguments[0],i="["+(s?s+":":"")+r+"] ",o=arguments[1],a=arguments;for(t=(t=i+o.replace(/\{\d+\}/g,function(t){var e,n=+t.slice(1,-1);return n+2<a.length?"function"==typeof(e=a[n+2])?e.toString().replace(/ ?\{[\s\S]*$/,""):void 0===e?"undefined":"string"!=typeof e?W(e):e:t}))+"\nhttp://errors.angularjs.org/1.2.27/"+(s?s+"/":"")+r,e=2;e<arguments.length;e++)t=t+(2==e?"?":"&")+"p"+(e-2)+"="+encodeURIComponent("function"==typeof(n=arguments[e])?n.toString().replace(/ \{[\s\S]*$/,""):void 0===n?"undefined":"string"!=typeof n?JSON.stringify(n):n);return new Error(t)}}var x="validity",E=function(t){return ot(t)?t.toLowerCase():t},S=Object.prototype.hasOwnProperty,l=function(t){return ot(t)?t.toUpperCase():t};"i"!=="I".toLowerCase()&&(E=function(t){return ot(t)?t.replace(/[A-Z]/g,function(t){return String.fromCharCode(32|t.charCodeAt(0))}):t},l=function(t){return ot(t)?t.replace(/[a-z]/g,function(t){return String.fromCharCode(-33&t.charCodeAt(0))}):t});var et,nt,p,h,M,c=[].slice,t=[].push,s=Object.prototype.toString,f=_("ng"),d=v.angular||(v.angular={}),n=["0","0","0"];function P(t){if(null==t||T(t))return!1;var e=t.length;return!(1!==t.nodeType||!e)||(ot(t)||at(t)||0===e||"number"==typeof e&&0<e&&e-1 in t)}function rt(t,e,n){var r;if(t)if(st(t))for(r in t)"prototype"==r||"length"==r||"name"==r||t.hasOwnProperty&&!t.hasOwnProperty(r)||e.call(n,t[r],r);else if(at(t)||P(t))for(r=0;r<t.length;r++)e.call(n,t[r],r);else if(t.forEach&&t.forEach!==rt)t.forEach(e,n);else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r);return t}function F(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e.sort()}function m(n){return function(t,e){n(e,t)}}function i(){for(var t,e=n.length;e;){if(57==(t=n[--e].charCodeAt(0)))return n[e]="A",n.join("");if(90!=t)return n[e]=String.fromCharCode(t+1),n.join("");n[e]="0"}return n.unshift("0"),n.join("")}function g(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function O(n){var t=n.$$hashKey;return rt(arguments,function(t){t!==n&&rt(t,function(t,e){n[e]=t})}),g(n,t),n}function k(t){return parseInt(t,10)}function $(t,e){return O(new(O(function(){},{prototype:t})),e)}function C(){}function y(t){return t}function w(t){return function(){return t}}function q(t){return void 0===t}function U(t){return void 0!==t}function it(t){return null!=t&&"object"==typeof t}function ot(t){return"string"==typeof t}function b(t){return"number"==typeof t}function A(t){return"[object Date]"===s.call(t)}et=k((/msie (\d+)/.exec(E(navigator.userAgent))||[])[1]),isNaN(et)&&(et=k((/trident\/.*; rv:(\d+)/.exec(E(navigator.userAgent))||[])[1])),C.$inject=[],y.$inject=[];var at=st(Array.isArray)?Array.isArray:function(t){return"[object Array]"===s.call(t)};function st(t){return"function"==typeof t}function j(t){return"[object RegExp]"===s.call(t)}function T(t){return t&&t.document&&t.location&&t.alert&&t.setInterval}function D(t){return t&&t.$evalAsync&&t.$watch}function R(t){return t&&st(t.then)}var ut=String.prototype.trim?function(t){return ot(t)?t.trim():t}:function(t){return ot(t)?t.replace(/^\s\s*/,"").replace(/\s\s*$/,""):t};function e(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}function N(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(e===t[n])return n;return-1}function I(t,e){var n=N(t,e);return 0<=n&&t.splice(n,1),e}function L(t,n,e,r){if(T(t)||D(t))throw f("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(n){if(t===n)throw f("cpi","Can't copy! Source and destination are identical.");if(e=e||[],r=r||[],it(t)){var i=N(e,t);if(-1!==i)return r[i];e.push(t),r.push(n)}var o;if(at(t))for(var a=n.length=0;a<t.length;a++)o=L(t[a],null,e,r),it(t[a])&&(e.push(t[a]),r.push(o)),n.push(o);else{var s=n.$$hashKey;for(var u in at(n)?n.length=0:rt(n,function(t,e){delete n[e]}),t)o=L(t[u],null,e,r),it(t[u])&&(e.push(t[u]),r.push(o)),n[u]=o;g(n,s)}}else(n=t)&&(at(t)?n=L(t,[],e,r):A(t)?n=new Date(t.getTime()):j(t)?(n=new RegExp(t.source,t.toString().match(/[^\/]*$/)[0])).lastIndex=t.lastIndex:it(t)&&(n=L(t,{},e,r)));return n}function lt(t,e){if(at(t)){e=e||[];for(var n=0;n<t.length;n++)e[n]=t[n]}else if(it(t))for(var r in e=e||{},t)!S.call(t,r)||"$"===r.charAt(0)&&"$"===r.charAt(1)||(e[r]=t[r]);return e||t}function ct(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;var n,r,i,o=typeof t;if(o==typeof e&&"object"==o){if(!at(t)){if(A(t))return!!A(e)&&(isNaN(t.getTime())&&isNaN(e.getTime())||t.getTime()===e.getTime());if(j(t)&&j(e))return t.toString()==e.toString();if(D(t)||D(e)||T(t)||T(e)||at(e))return!1;for(r in i={},t)if("$"!==r.charAt(0)&&!st(t[r])){if(!ct(t[r],e[r]))return!1;i[r]=!0}for(r in e)if(!i.hasOwnProperty(r)&&"$"!==r.charAt(0)&&e[r]!==tt&&!st(e[r]))return!1;return!0}if(!at(e))return!1;if((n=t.length)==e.length){for(r=0;r<n;r++)if(!ct(t[r],e[r]))return!1;return!0}}return!1}M=et<9?function(t){return(t=t.nodeName?t:t[0]).scopeName&&"HTML"!=t.scopeName?l(t.scopeName+":"+t.nodeName):t.nodeName}:function(t){return t.nodeName?t.nodeName:t[0].nodeName};var V=function(){if(U(V.isActive_))return V.isActive_;var e=!(!Z.querySelector("[ng-csp]")&&!Z.querySelector("[data-ng-csp]"));if(!e)try{new Function("")}catch(t){e=!0}return V.isActive_=e};function B(t,e,n){return t.concat(c.call(e,n))}function ft(t,e){return c.call(t,e||0)}function z(t,e){var n=2<arguments.length?ft(arguments,2):[];return!st(e)||e instanceof RegExp?e:n.length?function(){return arguments.length?e.apply(t,n.concat(c.call(arguments,0))):e.apply(t,n)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}function r(t,e){var n=e;return"string"==typeof t&&"$"===t.charAt(0)?n=tt:T(e)?n="$WINDOW":e&&Z===e?n="$DOCUMENT":D(e)&&(n="$SCOPE"),n}function W(t,e){return void 0===t?tt:JSON.stringify(t,r,e?"  ":null)}function a(t){return ot(t)?JSON.parse(t):t}function H(t){if("function"==typeof t)t=!0;else if(t&&0!==t.length){var e=E(""+t);t=!("f"==e||"0"==e||"false"==e||"no"==e||"n"==e||"[]"==e)}else t=!1;return t}function dt(t){t=nt(t).clone();try{t.empty()}catch(t){}var e=nt("<div>").append(t).html();try{return 3===t[0].nodeType?E(e):e.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(t,e){return"<"+E(e)})}catch(t){return E(e)}}function o(t){try{return decodeURIComponent(t)}catch(t){}}function u(t){var n,r,i={};return rt((t||"").split("&"),function(t){if(t&&(n=t.replace(/\+/g,"%20").split("="),U(r=o(n[0])))){var e=!U(n[1])||o(n[1]);S.call(i,r)?at(i[r])?i[r].push(e):i[r]=[i[r],e]:i[r]=e}}),i}function G(t){var n=[];return rt(t,function(t,e){at(t)?rt(t,function(t){n.push(Y(e,!0)+(!0===t?"":"="+Y(t,!0)))}):n.push(Y(e,!0)+(!0===t?"":"="+Y(t,!0)))}),n.length?n.join("&"):""}function Q(t){return Y(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Y(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,e?"%20":"+")}function X(n,r){var e=function(){if((n=nt(n)).injector()){var t=n[0]===Z?"document":dt(n);throw f("btstrpd","App Already Bootstrapped with this Element '{0}'",t.replace(/</,"&lt;").replace(/>/,"&gt;"))}(r=r||[]).unshift(["$provide",function(t){t.value("$rootElement",n)}]),r.unshift("ng");var e=se(r);return e.invoke(["$rootScope","$rootElement","$compile","$injector","$animate",function(t,e,n,r,i){t.$apply(function(){e.data("$injector",r),n(e)(t)})}]),e},t=/^NG_DEFER_BOOTSTRAP!/;if(v&&!t.test(v.name))return e();v.name=v.name.replace(t,""),d.resumeBootstrap=function(t){rt(t,function(t){r.push(t)}),e()}}var J=/[A-Z]/g;function ht(t,n){return n=n||"_",t.replace(J,function(t,e){return(e?n:"")+t.toLowerCase()})}function pt(t,e,n){if(!t)throw f("areq","Argument '{0}' is {1}",e||"?",n||"required");return t}function K(t,e,n){return n&&at(t)&&(t=t[t.length-1]),pt(st(t),e,"not a function, got "+(t&&"object"==typeof t?t.constructor.name||"Object":typeof t)),t}function vt(t,e){if("hasOwnProperty"===t)throw f("badname","hasOwnProperty is not a valid {0} name",e)}function mt(t,e,n){if(!e)return t;for(var r,i=e.split("."),o=t,a=i.length,s=0;s<a;s++)r=i[s],t&&(t=(o=t)[r]);return!n&&st(t)?z(o,t):t}function gt(t){var e=t[0],n=t[t.length-1];if(e===n)return nt(e);var r=e,i=[r];do{if(!(r=r.nextSibling))break;i.push(r)}while(r!==n);return nt(i)}var $t={full:"1.2.27",major:1,minor:2,dot:27,codeName:"prime-factorization"};Dt.expando="ng339";var yt=Dt.cache={},wt=1,bt=v.document.addEventListener?function(t,e,n){t.addEventListener(e,n,!1)}:function(t,e,n){t.attachEvent("on"+e,n)},xt=v.document.removeEventListener?function(t,e,n){t.removeEventListener(e,n,!1)}:function(t,e,n){t.detachEvent("on"+e,n)};Dt._data=function(t){return this.cache[t[this.expando]]||{}};var _t=/([\:\-\_]+(.))/g,St=/^moz([A-Z])/,Et=_("jqLite");function kt(t){return t.replace(_t,function(t,e,n,r){return r?n.toUpperCase():n}).replace(St,"Moz$1")}function Ct(t,c,f,d){var h=p.fn[t];function e(t){var e,n,r,i,o,a,s,u=f&&t?[this.filter(t)]:[this],l=c;if(!d||null!=t)for(;u.length;)for(n=0,r=(e=u.shift()).length;n<r;n++)for(i=nt(e[n]),l?i.triggerHandler("$destroy"):l=!l,o=0,a=(s=i.children()).length;o<a;o++)u.push(p(s[o]));return h.apply(this,arguments)}h=h.$original||h,e.$original=h,p.fn[t]=e}var qt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,At=/<|&#?\w+;/,Pt=/<([\w:]+)/,jt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Tt={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Mt(t){return!At.test(t)}function Ot(t,e){var n;return e=e||Z,(n=qt.exec(t))?[e.createElement(n[1])]:function(t,e){var n,r,i,o,a,s,u=e.createDocumentFragment(),l=[];if(Mt(t))l.push(e.createTextNode(t));else{for(n=u.appendChild(e.createElement("div")),r=(Pt.exec(t)||["",""])[1].toLowerCase(),i=Tt[r]||Tt._default,n.innerHTML="<div>&#160;</div>"+i[1]+t.replace(jt,"<$1></$2>")+i[2],n.removeChild(n.firstChild),o=i[0];o--;)n=n.lastChild;for(a=0,s=n.childNodes.length;a<s;++a)l.push(n.childNodes[a]);(n=u.firstChild).textContent=""}return u.textContent="",u.innerHTML="",l}(t,e)}function Dt(t){if(t instanceof Dt)return t;if(ot(t)&&(t=ut(t)),!(this instanceof Dt)){if(ot(t)&&"<"!=t.charAt(0))throw Et("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new Dt(t)}ot(t)?(Wt(this,Ot(t)),nt(Z.createDocumentFragment()).append(this)):Wt(this,t)}function Rt(t){return t.cloneNode(!0)}function Nt(t){Ft(t);for(var e=0,n=t.childNodes||[];e<n.length;e++)Nt(n[e])}function It(n,t,e,r){if(U(r))throw Et("offargs","jqLite#off() does not support the `selector` argument");var i=Ut(n,"events");Ut(n,"handle")&&(q(t)?rt(i,function(t,e){xt(n,e,t),delete i[e]}):rt(t.split(" "),function(t){q(e)?(xt(n,t,i[t]),delete i[t]):I(i[t]||[],e)}))}function Ft(t,e){var n=t.ng339,r=yt[n];if(r){if(e)return void delete yt[n].data[e];r.handle&&(r.events.$destroy&&r.handle({},"$destroy"),It(t)),delete yt[n],t.ng339=tt}}function Ut(t,e,n){var r=t.ng339,i=yt[r||-1];if(!U(n))return i&&i[e];i||(t.ng339=r=++wt,i=yt[r]={}),i[e]=n}function Lt(t,e,n){var r=Ut(t,"data"),i=U(n),o=!i&&U(e),a=o&&!it(e);if(r||a||Ut(t,"data",r={}),i)r[e]=n;else{if(!o)return r;if(a)return r&&r[e];O(r,e)}}function Vt(t,e){return!!t.getAttribute&&-1<(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")}function Bt(e,t){t&&e.setAttribute&&rt(t.split(" "),function(t){e.setAttribute("class",ut((" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+ut(t)+" "," ")))})}function zt(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");rt(e.split(" "),function(t){t=ut(t),-1===n.indexOf(" "+t+" ")&&(n+=t+" ")}),t.setAttribute("class",ut(n))}}function Wt(t,e){if(e){e=e.nodeName||!U(e.length)||T(e)?[e]:e;for(var n=0;n<e.length;n++)t.push(e[n])}}function Ht(t,e){return Gt(t,"$"+(e||"ngController")+"Controller")}function Gt(t,e,n){9==t.nodeType&&(t=t.documentElement);for(var r=at(e)?e:[e];t;){for(var i=0,o=r.length;i<o;i++)if((n=nt.data(t,r[i]))!==tt)return n;t=t.parentNode||11===t.nodeType&&t.host}}function Qt(t){for(var e=0,n=t.childNodes;e<n.length;e++)Nt(n[e]);for(;t.firstChild;)t.removeChild(t.firstChild)}Tt.optgroup=Tt.option,Tt.tbody=Tt.tfoot=Tt.colgroup=Tt.caption=Tt.thead,Tt.th=Tt.td;var Yt=Dt.prototype={ready:function(t){var e=!1;function n(){e||(e=!0,t())}"complete"===Z.readyState?setTimeout(n):(this.on("DOMContentLoaded",n),Dt(v).on("load",n))},toString:function(){var e=[];return rt(this,function(t){e.push(""+t)}),"["+e.join(", ")+"]"},eq:function(t){return nt(0<=t?this[t]:this[this.length+t])},length:0,push:t,sort:[].sort,splice:[].splice},Xt={};rt("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(t){Xt[E(t)]=t});var Jt={};function Kt(t,e){var n=Xt[e.toLowerCase()];return n&&Jt[t.nodeName]&&n}function Zt(t,e){var n,r=typeof t;return"function"==r||"object"==r&&null!==t?"function"==typeof(n=t.$$hashKey)?n=t.$$hashKey():n===tt&&(n=t.$$hashKey=(e||i)()):n=t,r+":"+n}function te(t,e){if(e){var n=0;this.nextUid=function(){return++n}}rt(t,this.put,this)}rt("input,select,option,textarea,button,form,details".split(","),function(t){Jt[l(t)]=!0}),rt({data:Lt,removeData:Ft},function(t,e){Dt[e]=t}),rt({data:Lt,inheritedData:Gt,scope:function(t){return nt.data(t,"$scope")||Gt(t.parentNode||t,["$isolateScope","$scope"])},isolateScope:function(t){return nt.data(t,"$isolateScope")||nt.data(t,"$isolateScopeNoTemplate")},controller:Ht,injector:function(t){return Gt(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:Vt,css:function(t,e,n){var r;if(e=kt(e),!U(n))return et<=8&&""===(r=t.currentStyle&&t.currentStyle[e])&&(r="auto"),r=r||t.style[e],et<=8&&(r=""===r?tt:r),r;t.style[e]=n},attr:function(t,e,n){var r=E(e);if(Xt[r]){if(!U(n))return t[e]||(t.attributes.getNamedItem(e)||C).specified?r:tt;n?(t[e]=!0,t.setAttribute(e,r)):(t[e]=!1,t.removeAttribute(r))}else if(U(n))t.setAttribute(e,n);else if(t.getAttribute){var i=t.getAttribute(e,2);return null===i?tt:i}},prop:function(t,e,n){if(!U(n))return t[e];t[e]=n},text:function(){var r=[];return et<9?(r[1]="innerText",r[3]="nodeValue"):r[1]=r[3]="textContent",t.$dv="",t;function t(t,e){var n=r[t.nodeType];if(q(e))return n?t[n]:"";t[n]=e}}(),val:function(t,e){if(q(e)){if("SELECT"===M(t)&&t.multiple){var n=[];return rt(t.options,function(t){t.selected&&n.push(t.value||t.text)}),0===n.length?null:n}return t.value}t.value=e},html:function(t,e){if(q(e))return t.innerHTML;for(var n=0,r=t.childNodes;n<r.length;n++)Nt(r[n]);t.innerHTML=e},empty:Qt},function(l,t){Dt.prototype[t]=function(t,e){var n,r,i=this.length;if(l!==Qt&&(2==l.length&&l!==Vt&&l!==Ht?t:e)===tt){if(it(t)){for(n=0;n<i;n++)if(l===Lt)l(this[n],t);else for(r in t)l(this[n],r,t[r]);return this}for(var o=l.$dv,a=o===tt?Math.min(i,1):i,s=0;s<a;s++){var u=l(this[s],t,e);o=o?o+u:u}return o}for(n=0;n<i;n++)l(this[n],t,e);return this}}),rt({removeData:Ft,dealoc:Nt,on:function e(i,t,o,n){if(U(n))throw Et("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");var r,a,s,u=Ut(i,"events"),l=Ut(i,"handle");u||Ut(i,"events",u={}),l||Ut(i,"handle",(a=u,(s=function(e,t){if(e.preventDefault||(e.preventDefault=function(){e.returnValue=!1}),e.stopPropagation||(e.stopPropagation=function(){e.cancelBubble=!0}),e.target||(e.target=e.srcElement||Z),q(e.defaultPrevented)){var n=e.preventDefault;e.preventDefault=function(){e.defaultPrevented=!0,n.call(e)},e.defaultPrevented=!1}e.isDefaultPrevented=function(){return e.defaultPrevented||!1===e.returnValue},rt(lt(a[t||e.type]||[]),function(t){t.call(r,e)}),et<=8?(e.preventDefault=null,e.stopPropagation=null,e.isDefaultPrevented=null):(delete e.preventDefault,delete e.stopPropagation,delete e.isDefaultPrevented)}).elem=r=i,l=s)),rt(t.split(" "),function(n){var t=u[n];if(!t){if("mouseenter"==n||"mouseleave"==n){var r=Z.body.contains||Z.body.compareDocumentPosition?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1};u[n]=[];e(i,{mouseleave:"mouseout",mouseenter:"mouseover"}[n],function(t){var e=t.relatedTarget;e&&(e===this||r(this,e))||l(t,n)})}else bt(i,n,l),u[n]=[];t=u[n]}t.push(o)})},off:It,one:function(e,n,r){(e=nt(e)).on(n,function t(){e.off(n,r),e.off(n,t)}),e.on(n,r)},replaceWith:function(e,t){var n,r=e.parentNode;Nt(e),rt(new Dt(t),function(t){n?r.insertBefore(t,n.nextSibling):r.replaceChild(t,e),n=t})},children:function(t){var e=[];return rt(t.childNodes,function(t){1===t.nodeType&&e.push(t)}),e},contents:function(t){return t.contentDocument||t.childNodes||[]},append:function(e,t){rt(new Dt(t),function(t){1!==e.nodeType&&11!==e.nodeType||e.appendChild(t)})},prepend:function(e,t){if(1===e.nodeType){var n=e.firstChild;rt(new Dt(t),function(t){e.insertBefore(t,n)})}},wrap:function(t,e){e=nt(e)[0];var n=t.parentNode;n&&n.replaceChild(e,t),e.appendChild(t)},remove:function(t){Nt(t);var e=t.parentNode;e&&e.removeChild(t)},after:function(t,e){var n=t,r=t.parentNode;rt(new Dt(e),function(t){r.insertBefore(t,n.nextSibling),n=t})},addClass:zt,removeClass:Bt,toggleClass:function(n,t,r){t&&rt(t.split(" "),function(t){var e=r;q(e)&&(e=!Vt(n,t)),(e?zt:Bt)(n,t)})},parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},next:function(t){if(t.nextElementSibling)return t.nextElementSibling;for(var e=t.nextSibling;null!=e&&1!==e.nodeType;)e=e.nextSibling;return e},find:function(t,e){return t.getElementsByTagName?t.getElementsByTagName(e):[]},clone:Rt,triggerHandler:function(e,t,n){var r,i,o,a=t.type||t,s=(Ut(e,"events")||{})[a];s&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopPropagation:C,type:a,target:e},t.type&&(r=O(r,t)),i=lt(s),o=n?[r].concat(n):[r],rt(i,function(t){t.apply(e,o)}))}},function(o,t){Dt.prototype[t]=function(t,e,n){for(var r,i=0;i<this.length;i++)q(r)?U(r=o(this[i],t,e,n))&&(r=nt(r)):Wt(r,o(this[i],t,e,n));return U(r)?r:this},Dt.prototype.bind=Dt.prototype.on,Dt.prototype.unbind=Dt.prototype.off}),te.prototype={put:function(t,e){this[Zt(t,this.nextUid)]=e},get:function(t){return this[Zt(t,this.nextUid)]},remove:function(t){var e=this[t=Zt(t,this.nextUid)];return delete this[t],e}};var ee=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,ne=/,/,re=/^\s*(_?)(\S+?)\1\s*$/,ie=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,oe=_("$injector");function ae(t){var r,e;return"function"==typeof t?(r=t.$inject)||(r=[],t.length&&rt(t.toString().replace(ie,"").match(ee)[1].split(ne),function(t){t.replace(re,function(t,e,n){r.push(n)})}),t.$inject=r):at(t)?(K(t[e=t.length-1],"fn"),r=t.slice(0,e)):K(t,"fn",!0),r}function se(t){var r={},i="Provider",a=[],l=new te([],!0),s={$provide:{provider:e(u),factory:e(f),service:e(function(t,e){return f(t,["$injector",function(t){return t.instantiate(e)}])}),value:e(function(t,e){return f(t,w(e))}),constant:e(function(t,e){vt(t,"constant"),s[t]=e,n[t]=e}),decorator:function(t,e){var n=c.get(t+i),r=n.$get;n.$get=function(){var t=o.invoke(r,n);return o.invoke(e,null,{$delegate:t})}}}},c=s.$injector=d(s,function(){throw oe("unpr","Unknown provider: {0}",a.join(" <- "))}),n={},o=n.$injector=d(n,function(t){var e=c.get(t+i);return o.invoke(e.$get,e)});return rt(function r(t){var i,o,a,s,u=[];rt(t,function(e){if(!l.get(e)){l.put(e,!0);try{if(ot(e))for(i=h(e),u=u.concat(r(i.requires)).concat(i._runBlocks),o=i._invokeQueue,a=0,s=o.length;a<s;a++){var t=o[a],n=c.get(t[0]);n[t[1]].apply(n,t[2])}else st(e)?u.push(c.invoke(e)):at(e)?u.push(c.invoke(e)):K(e,"module")}catch(t){throw at(e)&&(e=e[e.length-1]),t.message&&t.stack&&-1==t.stack.indexOf(t.message)&&(t=t.message+"\n"+t.stack),oe("modulerr","Failed to instantiate module {0} due to:\n{1}",e,t.stack||t.message||t)}}});return u}(t),function(t){o.invoke(t||C)}),o;function e(n){return function(t,e){if(!it(t))return n(t,e);rt(t,m(n))}}function u(t,e){if(vt(t,"service"),(st(e)||at(e))&&(e=c.instantiate(e)),!e.$get)throw oe("pget","Provider '{0}' must define $get factory method.",t);return s[t+i]=e}function f(t,e){return u(t,{$get:e})}function d(n,t){function u(e){if(n.hasOwnProperty(e)){if(n[e]===r)throw oe("cdep","Circular dependency found: {0}",e+" <- "+a.join(" <- "));return n[e]}try{return a.unshift(e),n[e]=r,n[e]=t(e)}catch(t){throw n[e]===r&&delete n[e],t}finally{a.shift()}}function o(t,e,n){var r,i,o,a=[],s=ae(t);for(i=0,r=s.length;i<r;i++){if("string"!=typeof(o=s[i]))throw oe("itkn","Incorrect injection token! Expected service name as string, got {0}",o);a.push(n&&n.hasOwnProperty(o)?n[o]:u(o))}return at(t)&&(t=t[r]),t.apply(e,a)}return{invoke:o,instantiate:function(t,e){var n,r,i=function(){};return i.prototype=(at(t)?t[t.length-1]:t).prototype,it(r=o(t,n=new i,e))||st(r)?r:n},get:u,annotate:ae,has:function(t){return s.hasOwnProperty(t+i)||n.hasOwnProperty(t)}}}}function ue(){var n=!0;this.disableAutoScrolling=function(){n=!1},this.$get=["$window","$location","$rootScope",function(i,o,t){var a=i.document;function e(){var t,e,n,r=o.hash();r?(t=a.getElementById(r))?t.scrollIntoView():(e=a.getElementsByName(r),n=null,rt(e,function(t){n||"a"!==E(t.nodeName)||(n=t)}),(t=n)?t.scrollIntoView():"top"===r&&i.scrollTo(0,0)):i.scrollTo(0,0)}return n&&t.$watch(function(){return o.hash()},function(){t.$evalAsync(e)}),e}]}var le=_("$animate"),ce=["$provide",function(r){this.$$selectors={},this.register=function(t,e){var n=t+"-animation";if(t&&"."!=t.charAt(0))throw le("notcsel","Expecting class selector starting with '.' got '{0}'.",t);this.$$selectors[t.substr(1)]=n,r.factory(n,e)},this.classNameFilter=function(t){return 1===arguments.length&&(this.$$classNameFilter=t instanceof RegExp?t:null),this.$$classNameFilter},this.$get=["$timeout","$$asyncCallback",function(t,e){function i(t){t&&e(t)}return{enter:function(t,e,n,r){n?n.after(t):(e&&e[0]||(e=n.parent()),e.append(t)),i(r)},leave:function(t,e){t.remove(),i(e)},move:function(t,e,n,r){this.enter(t,e,n,r)},addClass:function(t,e,n){e=ot(e)?e:at(e)?e.join(" "):"",rt(t,function(t){zt(t,e)}),i(n)},removeClass:function(t,e,n){e=ot(e)?e:at(e)?e.join(" "):"",rt(t,function(t){Bt(t,e)}),i(n)},setClass:function(t,e,n,r){rt(t,function(t){zt(t,e),Bt(t,n)}),i(r)},enabled:C}}]}];function fe(){this.$get=["$$rAF","$timeout",function(e,n){return e.supported?function(t){return e(t)}:function(t){return n(t,0,!1)}}]}function de(r,t,s,i){var o=this,u=t[0],a=r.location,l=r.history,c=r.setTimeout,e=r.clearTimeout,f={};o.isMock=!1;var d=0,n=[];function h(t){try{t.apply(null,ft(arguments,1))}finally{if(0===--d)for(;n.length;)try{n.pop()()}catch(t){s.error(t)}}}o.$$completeOutstandingRequest=h,o.$$incOutstandingRequestCount=function(){d++},o.notifyWhenNoOutstandingRequests=function(t){rt(v,function(t){t()}),0===d?t():n.push(t)};var p,v=[];o.addPollFn=function(t){var e,n;return q(p)&&(e=100,n=c,function t(){rt(v,function(t){t()}),p=n(t,e)}()),v.push(t),t};var m=a.href,g=t.find("base"),$=null;o.url=function(t,e){if(a!==r.location&&(a=r.location),l!==r.history&&(l=r.history),t){if(m==t)return;var n=m&&Ve(m)===Ve(t);return m=t,!n&&i.history?e?l.replaceState(null,"",t):(l.pushState(null,"",t),g.attr("href",g.attr("href"))):(n||($=t),e?a.replace(t):a.href=t),o}return $||a.href.replace(/%27/g,"'")};var y=[],w=!1;function b(){m!=o.url()&&(m=o.url(),rt(y,function(t){t(o.url())}))}o.onUrlChange=function(t){return w||(i.history&&nt(r).on("popstate",b),i.hashchange?nt(r).on("hashchange",b):o.addPollFn(b),w=!0),y.push(t),t},o.$$checkUrlChange=b,o.baseHref=function(){var t=g.attr("href");return t?t.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var x={},_="",S=o.baseHref();o.cookies=function(t,e){var n,r,i,o,a;if(!t){if(u.cookie!==_)for(r=(_=u.cookie).split("; "),x={},o=0;o<r.length;o++)0<(a=(i=r[o]).indexOf("="))&&(t=unescape(i.substring(0,a)),x[t]===tt&&(x[t]=unescape(i.substring(a+1))));return x}e===tt?u.cookie=escape(t)+"=;path="+S+";expires=Thu, 01 Jan 1970 00:00:00 GMT":ot(e)&&4096<(n=(u.cookie=escape(t)+"="+escape(e)+";path="+S).length+1)&&s.warn("Cookie '"+t+"' possibly not set or overflowed because it was too large ("+n+" > 4096 bytes)!")},o.defer=function(t,e){var n;return d++,n=c(function(){delete f[n],h(t)},e||0),f[n]=!0,n},o.defer.cancel=function(t){return!!f[t]&&(delete f[t],e(t),h(C),!0)}}function he(){this.$get=["$window","$log","$sniffer","$document",function(t,e,n,r){return new de(t,r,e,n)}]}function pe(){this.$get=function(){var f={};function t(t,e){if(t in f)throw _("$cacheFactory")("iid","CacheId '{0}' is already taken!",t);var n=0,r=O({},e,{id:t}),i={},o=e&&e.capacity||Number.MAX_VALUE,a={},s=null,u=null;return f[t]={put:function(t,e){o<Number.MAX_VALUE&&l(a[t]||(a[t]={key:t}));if(!q(e))return t in i||n++,i[t]=e,o<n&&this.remove(u.key),e},get:function(t){if(o<Number.MAX_VALUE){var e=a[t];if(!e)return;l(e)}return i[t]},remove:function(t){if(o<Number.MAX_VALUE){var e=a[t];if(!e)return;e==s&&(s=e.p),e==u&&(u=e.n),c(e.n,e.p),delete a[t]}delete i[t],n--},removeAll:function(){i={},n=0,a={},s=u=null},destroy:function(){a=r=i=null,delete f[t]},info:function(){return O({},r,{size:n})}};function l(t){t!=s&&(u?u==t&&(u=t.n):u=t,c(t.n,t.p),c(t,s),(s=t).n=null)}function c(t,e){t!=e&&(t&&(t.p=e),e&&(e.n=t))}}return t.info=function(){var n={};return rt(f,function(t,e){n[e]=t.info()}),n},t.get=function(t){return f[t]},t}}function ve(){this.$get=["$cacheFactory",function(t){return t("templates")}]}var me=_("$compile");function ge(n,e){var h={},p="Directive",j=/^\s*directive\:\s*([\d\w_\-]+)\s+(.*)$/,T=/(([\d\w_\-]+)(?:\:([^;]+))?;?)/,l=/^(on[a-z]+|formaction)$/;this.directive=function t(a,e){return vt(a,"directive"),ot(a)?(pt(e,"directiveFactory"),h.hasOwnProperty(a)||(h[a]=[],n.factory(a+p,["$injector","$exceptionHandler",function(r,i){var o=[];return rt(h[a],function(t,e){try{var n=r.invoke(t);st(n)?n={compile:w(n)}:!n.compile&&n.link&&(n.compile=w(n.link)),n.priority=n.priority||0,n.index=e,n.name=n.name||a,n.require=n.require||n.controller&&n.name,n.restrict=n.restrict||"A",o.push(n)}catch(t){i(t)}}),o}])),h[a].push(e)):rt(a,m(t)),this},this.aHrefSanitizationWhitelist=function(t){return U(t)?(e.aHrefSanitizationWhitelist(t),this):e.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(t){return U(t)?(e.imgSrcSanitizationWhitelist(t),this):e.imgSrcSanitizationWhitelist()},this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(d,R,N,t,e,I,F,o,n,s,i,u){var U=function(t,e){this.$$element=t,this.$attr=e||{}};U.prototype={$normalize:ye,$addClass:function(t){t&&0<t.length&&i.addClass(this.$$element,t)},$removeClass:function(t){t&&0<t.length&&i.removeClass(this.$$element,t)},$updateClass:function(t,e){var n=we(t,e),r=we(e,t);0===n.length?i.removeClass(this.$$element,r):0===r.length?i.addClass(this.$$element,n):i.setClass(this.$$element,n,r)},$set:function(t,e,n,r){var i,o=Kt(this.$$element[0],t);o&&(this.$$element.prop(t,e),r=o),this[t]=e,r?this.$attr[t]=r:(r=this.$attr[t])||(this.$attr[t]=r=ht(t,"-")),("A"===(i=M(this.$$element))&&"href"===t||"IMG"===i&&"src"===t)&&(this[t]=e=u(e,"src"===t)),!1!==n&&(null===e||e===tt?this.$$element.removeAttr(r):this.$$element.attr(r,e));var a=this.$$observers;a&&rt(a[t],function(t){try{t(e)}catch(t){N(t)}})},$observe:function(t,e){var n=this,r=n.$$observers||(n.$$observers={}),i=r[t]||(r[t]=[]);return i.push(e),o.$evalAsync(function(){i.$$inter||e(n[t])}),e}};var r=R.startSymbol(),a=R.endSymbol(),L="{{"==r||"}}"==a?y:function(t){return t.replace(/\{\{/g,r).replace(/}}/g,a)},S=/^ngAttr[A-Z]/;return V;function V(u,t,e,n,r){u instanceof nt||(u=nt(u)),rt(u,function(t,e){3==t.nodeType&&t.nodeValue.match(/\S+/)&&(u[e]=t=nt(t).wrap("<span></span>").parent()[0])});var l=C(u,t,u,e,n,r);return B(u,"ng-scope"),function(t,e,n,r){pt(t,"scope");var i=e?Yt.clone.call(u):u;rt(n,function(t,e){i.data("$"+e+"Controller",t)});for(var o=0,a=i.length;o<a;o++){var s=i[o].nodeType;1!==s&&9!==s||i.eq(o).data("$scope",t)}return e&&e(i,t),l&&l(t,i,i,r),i}}function B(t,e){try{t.addClass(e)}catch(t){}}function C(t,p,e,n,r,i){for(var o,a,s,u,l,c,v=[],f=0;f<t.length;f++)o=new U,(s=(a=z(t[f],[],o,0===f?n:tt,r)).length?A(a,t[f],o,p,e,null,[],[],i):null)&&s.scope&&B(o.$$element,"ng-scope"),l=s&&s.terminal||!(u=t[f].childNodes)||!u.length?null:C(u,s?(s.transcludeOnThisElement||!s.templateOnThisElement)&&s.transclude:p),v.push(s,l),c=c||s||l,i=null;return c?function(t,e,n,r){var i,o,a,s,u,l,c,f,d=e.length,h=new Array(d);for(u=0;u<d;u++)h[u]=e[u];for(c=u=0,l=v.length;u<l;c++)a=h[c],i=v[u++],o=v[u++],i?(i.scope?(s=t.$new(),nt.data(a,"$scope",s)):s=t,f=i.transcludeOnThisElement?q(t,i.transclude,r):!i.templateOnThisElement&&r?r:!r&&p?q(t,p):null,i(o,s,a,n,f)):o&&o(t,a.childNodes,tt,r)}:null}function q(o,a,s){return function(t,e,n){var r=!1;t||(r=(t=o.$new()).$$transcluded=!0);var i=a(t,e,n,s);return r&&i.on("$destroy",function(){t.$destroy()}),i}}function z(t,e,n,r,i){var o,a,s,u,l,c=t.nodeType,f=n.$attr;switch(c){case 1:E(e,ye(M(t).toLowerCase()),"E",r,i);for(var d,h,p,v,m,g,$=t.attributes,y=0,w=$&&$.length;y<w;y++){var b=!1,x=!1;if(d=$[y],!et||8<=et||d.specified){h=d.name,m=ut(d.value),v=ye(h),(g=S.test(v))&&(h=ht(v.substr(6),"-"));var _=v.replace(/(Start|End)$/,"");v===_+"Start"&&(x=(b=h).substr(0,h.length-5)+"end",h=h.substr(0,h.length-6)),f[p=ye(h.toLowerCase())]=h,!g&&n.hasOwnProperty(p)||(n[p]=m,Kt(t,p)&&(n[p]=!0)),P(t,e,m,p),E(e,p,"A",r,i,b,x)}}if(ot(a=t.className)&&""!==a)for(;o=T.exec(a);)E(e,p=ye(o[2]),"C",r,i)&&(n[p]=ut(o[3])),a=a.substr(o.index+o[0].length);break;case 3:s=e,u=t.nodeValue,(l=R(u,!0))&&s.push({priority:0,compile:function(t){var e=t.parent(),i=e.length;return i&&B(t.parent(),"ng-binding"),function(t,e){var n=e.parent(),r=n.data("$binding")||[];r.push(l),n.data("$binding",r),i||B(n,"ng-binding"),t.$watch(l,function(t){e[0].nodeValue=t})}}});break;case 8:try{(o=j.exec(t.nodeValue))&&E(e,p=ye(o[1]),"M",r,i)&&(n[p]=ut(o[2]))}catch(t){}}return e.sort(k),e}function W(t,e,n){var r=[],i=0;if(e&&t.hasAttribute&&t.hasAttribute(e))do{if(!t)throw me("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",e,n);1==t.nodeType&&(t.hasAttribute(e)&&i++,t.hasAttribute(n)&&i--),r.push(t),t=t.nextSibling}while(0<i);else r.push(t);return nt(r)}function H(o,a,s){return function(t,e,n,r,i){return e=W(e[0],a,s),o(t,e,n,r,i)}}function A(t,m,g,e,n,r,$,y,i){i=i||{};for(var o,a,s,u,l,c,f=-Number.MAX_VALUE,w=i.controllerDirectives,b=i.newIsolateScopeDirective,x=i.templateDirective,d=i.nonTlbTranscludeDirective,h=!1,p=!1,_=i.hasElementTranscludeDirective,v=g.$$element=nt(m),S=r,E=e,k=0,C=t.length;k<C;k++){var q=(a=t[k]).$$start,A=a.$$end;if(q&&(v=W(m,q,A)),u=tt,f>a.priority)break;if((c=a.scope)&&(o=o||a,a.templateUrl||(X("new/isolated scope",b,a,v),it(c)&&(b=a))),s=a.name,!a.templateUrl&&a.controller&&(c=a.controller,X("'"+s+"' controller",(w=w||{})[s],a,v),w[s]=a),(c=a.transclude)&&(h=!0,a.$$tlb||(X("transclusion",d,a,v),d=a),"element"==c?(_=!0,f=a.priority,u=v,v=g.$$element=nt(Z.createComment(" "+s+": "+g[s]+" ")),m=v[0],J(n,ft(u),m),E=V(u,e,f,S&&S.name,{nonTlbTranscludeDirective:d})):(u=nt(Rt(m)).contents(),v.empty(),E=V(u,e))),a.template)if(p=!0,X("template",x,a,v),c=st((x=a).template)?a.template(v,g):a.template,c=L(c),a.replace){if(S=a,u=Mt(c)?[]:nt(ut(c)),m=u[0],1!=u.length||1!==m.nodeType)throw me("tplrt","Template for directive '{0}' must have exactly one root element. {1}",s,"");J(n,v,m);var P={$attr:{}},j=z(m,[],P),T=t.splice(k+1,t.length-(k+1));b&&G(j),t=t.concat(j).concat(T),Q(g,P),C=t.length}else v.html(c);if(a.templateUrl)p=!0,X("template",x,a,v),(x=a).replace&&(S=a),D=Y(t.splice(k,t.length-k),v,g,n,h&&E,$,y,{controllerDirectives:w,newIsolateScopeDirective:b,templateDirective:x,nonTlbTranscludeDirective:d}),C=t.length;else if(a.compile)try{st(l=a.compile(v,g,E))?M(null,l,q,A):l&&M(l.pre,l.post,q,A)}catch(t){N(t,dt(v))}a.terminal&&(D.terminal=!0,f=Math.max(f,a.priority))}return D.scope=o&&!0===o.scope,D.transcludeOnThisElement=h,D.templateOnThisElement=p,D.transclude=E,i.hasElementTranscludeDirective=_,D;function M(t,e,n,r){t&&(n&&(t=H(t,n,r)),t.require=a.require,t.directiveName=s,(b===a||a.$$isolateScope)&&(t=K(t,{isolateScope:!0})),$.push(t)),e&&(n&&(e=H(e,n,r)),e.require=a.require,e.directiveName=s,(b===a||a.$$isolateScope)&&(e=K(e,{isolateScope:!0})),y.push(e))}function O(e,t,n,r){var i,o="data",a=!1;if(ot(t)){for(;"^"==(i=t.charAt(0))||"?"==i;)t=t.substr(1),"^"==i&&(o="inheritedData"),a=a||"?"==i;if(i=null,r&&"data"===o&&(i=r[t]),!(i=i||n[o]("$"+t+"Controller"))&&!a)throw me("ctreq","Controller '{0}', required by directive '{1}', can't be found!",t,e);return i}return at(t)&&(i=[],rt(t,function(t){i.push(O(e,t,n,r))})),i}function D(t,c,e,n,r){var f,i,o,a,s,u,d,l,h={};if(f=m===e?g:lt(g,new U(nt(e),g.$attr)),i=f.$$element,b){var p=/^\s*([@=&])(\??)\s*(\w*)\s*$/;d=c.$new(!0),!x||x!==b&&x!==b.$$originalDirective?i.data("$isolateScopeNoTemplate",d):i.data("$isolateScope",d),B(i,"ng-isolate-scope"),rt(b.scope,function(t,e){var n,r,i,o,a=t.match(p)||[],s=a[3]||e,u="?"==a[2],l=a[1];switch(d.$$isolateBindings[e]=l+s,l){case"@":f.$observe(s,function(t){d[e]=t}),f.$$observers[s].$$scope=c,f[s]&&(d[e]=R(f[s])(c));break;case"=":if(u&&!f[s])return;r=I(f[s]),o=r.literal?ct:function(t,e){return t===e||t!=t&&e!=e},i=r.assign||function(){throw n=d[e]=r(c),me("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",f[s],b.name)},n=d[e]=r(c),d.$watch(function(){var t=r(c);return o(t,d[e])||(o(t,n)?i(c,t=d[e]):d[e]=t),n=t},null,r.literal);break;case"&":r=I(f[s]),d[e]=function(t){return r(c,t)};break;default:throw me("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",b.name,e,t)}})}for(l=r&&function(t,e){var n;arguments.length<2&&(e=t,t=tt);_&&(n=h);return r(t,e,n)},w&&rt(w,function(t){var e,n={$scope:t===b||t.$$isolateScope?d:c,$element:i,$attrs:f,$transclude:l};"@"==(u=t.controller)&&(u=f[t.name]),e=F(u,n),h[t.name]=e,_||i.data("$"+t.name+"Controller",e),t.controllerAs&&(n.$scope[t.controllerAs]=e)}),o=0,a=$.length;o<a;o++)try{(s=$[o])(s.isolateScope?d:c,i,f,s.require&&O(s.directiveName,s.require,i,h),l)}catch(t){N(t,dt(i))}var v=c;for(b&&(b.template||null===b.templateUrl)&&(v=d),t&&t(v,e.childNodes,tt,r),o=y.length-1;0<=o;o--)try{(s=y[o])(s.isolateScope?d:c,i,f,s.require&&O(s.directiveName,s.require,i,h),l)}catch(t){N(t,dt(i))}}}function G(t){for(var e=0,n=t.length;e<n;e++)t[e]=$(t[e],{$$isolateScope:!0})}function E(t,e,n,r,i,o,a){if(e===i)return null;var s=null;if(h.hasOwnProperty(e))for(var u,l=d.get(e+p),c=0,f=l.length;c<f;c++)try{u=l[c],(r===tt||r>u.priority)&&-1!=u.restrict.indexOf(n)&&(o&&(u=$(u,{$$start:o,$$end:a})),t.push(u),s=u)}catch(t){N(t)}return s}function Q(n,r){var i=r.$attr,o=n.$attr,a=n.$$element;rt(n,function(t,e){"$"!=e.charAt(0)&&(r[e]&&r[e]!==t&&(t+=("style"===e?";":" ")+r[e]),n.$set(e,t,!0,i[e]))}),rt(r,function(t,e){"class"==e?(B(a,t),n.class=(n.class?n.class+" ":"")+t):"style"==e?(a.attr("style",a.attr("style")+";"+t),n.style=(n.style?n.style+";":"")+t):"$"==e.charAt(0)||n.hasOwnProperty(e)||(n[e]=t,o[e]=i[e])})}function Y(d,h,p,v,m,g,$,y){var w,b,x=[],_=h[0],S=d.shift(),E=O({},S,{templateUrl:null,transclude:null,replace:null,$$originalDirective:S}),k=st(S.templateUrl)?S.templateUrl(h,p):S.templateUrl;return h.empty(),t.get(s.getTrustedResourceUrl(k),{cache:e}).success(function(t){var n,e,r,i;if(t=L(t),S.replace){if(r=Mt(t)?[]:nt(ut(t)),n=r[0],1!=r.length||1!==n.nodeType)throw me("tplrt","Template for directive '{0}' must have exactly one root element. {1}",S.name,k);e={$attr:{}},J(v,h,n);var o=z(n,[],e);it(S.scope)&&G(o),d=o.concat(d),Q(p,e)}else n=_,h.html(t);for(d.unshift(E),w=A(d,n,p,m,h,S,g,$,y),rt(v,function(t,e){t==n&&(v[e]=h[0])}),b=C(h[0].childNodes,m);x.length;){var a=x.shift(),s=x.shift(),u=x.shift(),l=x.shift(),c=h[0];if(s!==_){var f=s.className;y.hasElementTranscludeDirective&&S.replace||(c=Rt(n)),J(u,nt(s),c),B(nt(c),f)}i=w.transcludeOnThisElement?q(a,w.transclude,l):l,w(b,a,c,v,i)}x=null}).error(function(t,e,n,r){throw me("tpload","Failed to load template: {0}",r.url)}),function(t,e,n,r,i){var o=i;x?(x.push(e),x.push(n),x.push(r),x.push(o)):(w.transcludeOnThisElement&&(o=q(e,w.transclude,i)),w(b,e,n,r,o))}}function k(t,e){var n=e.priority-t.priority;return 0!==n?n:t.name!==e.name?t.name<e.name?-1:1:t.index-e.index}function X(t,e,n,r){if(e)throw me("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",e.name,n.name,t,dt(r))}function P(i,t,e,o){var a=R(e,!0);if(a){if("multiple"===o&&"SELECT"===M(i))throw me("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",dt(i));t.push({priority:100,compile:function(){return{pre:function(t,e,n){var r=n.$$observers||(n.$$observers={});if(l.test(o))throw me("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");(a=R(n[o],!0,function(t,e){if("srcdoc"==e)return s.HTML;var n=M(t);return"xlinkHref"==e||"FORM"==n&&"action"==e||"IMG"!=n&&("src"==e||"ngSrc"==e)?s.RESOURCE_URL:void 0}(i,o)))&&(n[o]=a(t),(r[o]||(r[o]=[])).$$inter=!0,(n.$$observers&&n.$$observers[o].$$scope||t).$watch(a,function(t,e){"class"===o&&t!=e?n.$updateClass(t,e):n.$set(o,t)}))}}}})}}function J(t,e,n){var r,i,o=e[0],a=e.length,s=o.parentNode;if(t)for(r=0,i=t.length;r<i;r++)if(t[r]==o){t[r++]=n;for(var u=r,l=u+a-1,c=t.length;u<c;u++,l++)l<c?t[u]=t[l]:delete t[u];t.length-=a-1;break}s&&s.replaceChild(n,o);var f=Z.createDocumentFragment();f.appendChild(o),n[nt.expando]=o[nt.expando];for(var d=1,h=e.length;d<h;d++){var p=e[d];nt(p).remove(),f.appendChild(p),delete e[d]}e[0]=n,e.length=1}function K(t,e){return O(function(){return t.apply(null,arguments)},t,e)}}]}ge.$inject=["$provide","$$sanitizeUriProvider"];var $e=/^(x[\:\-_]|data[\:\-_])/i;function ye(t){return kt(t.replace($e,""))}function we(t,e){var n="",r=t.split(/\s+/),i=e.split(/\s+/);t:for(var o=0;o<r.length;o++){for(var a=r[o],s=0;s<i.length;s++)if(a==i[s])continue t;n+=(0<n.length?" ":"")+a}return n}function be(){var u={},l=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(t,e){vt(t,"controller"),it(t)?O(u,t):u[t]=e},this.$get=["$injector","$window",function(a,s){return function(t,e){var n,r,i,o;if(ot(t)&&(i=(r=t.match(l))[1],o=r[3],K(t=u.hasOwnProperty(i)?u[i]:mt(e.$scope,i,!0)||mt(s,i,!0),i,!0)),n=a.instantiate(t,e),o){if(!e||"object"!=typeof e.$scope)throw _("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",i||t.name,o);e.$scope[o]=n}return n}}]}function xe(){this.$get=["$window",function(t){return nt(t.document)}]}function _e(){this.$get=["$log",function(n){return function(t,e){n.error.apply(n,arguments)}}]}function Se(t){var e,n,r,i={};return t&&rt(t.split("\n"),function(t){r=t.indexOf(":"),e=E(ut(t.substr(0,r))),n=ut(t.substr(r+1)),e&&(i[e]=i[e]?i[e]+", "+n:n)}),i}function Ee(e){var n=it(e)?e:tt;return function(t){return n||(n=Se(e)),t?n[E(t)]||null:n}}function ke(e,n,t){return st(t)?t(e,n):(rt(t,function(t){e=t(e,n)}),e)}function Ce(t){return 200<=t&&t<300}function qe(){var e=/^\s*(\[|\{[^\{])/,n=/[\}\]]\s*$/,r=/^\)\]\}',?\n/,t={"Content-Type":"application/json;charset=utf-8"},g=this.defaults={transformResponse:[function(t){return ot(t)&&(t=t.replace(r,""),e.test(t)&&n.test(t)&&(t=a(t))),t}],transformRequest:[function(t){return it(t)&&(n=t,"[object File]"!==s.call(n))&&(e=t,"[object Blob]"!==s.call(e))?W(t):t;var e,n}],headers:{common:{Accept:"application/json, text/plain, */*"},post:lt(t),put:lt(t),patch:lt(t)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},i=this.interceptors=[],o=this.responseInterceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(f,d,t,h,p,r){var v=t("$http"),u=[];function m(t){var n={method:"get",transformRequest:g.transformRequest,transformResponse:g.transformResponse},r=function(t){var e,n,r,i=g.headers,o=O({},t.headers);i=O({},i.common,i[E(t.method)]);t:for(e in i){for(r in n=E(e),o)if(E(r)===n)continue t;o[e]=i[e]}return a=o,rt(a,function(t,e){st(t)&&(null!=(s=t())?a[e]=s:delete a[e])}),o;var a,s}(t);O(n,t),n.headers=r,n.method=l(n.method);var e=[function(t){r=t.headers;var e=ke(t.data,Ee(r),t.transformRequest);return q(e)&&rt(r,function(t,e){"content-type"===E(e)&&delete r[e]}),q(t.withCredentials)&&!q(g.withCredentials)&&(t.withCredentials=g.withCredentials),function(i,t,e){var o,n,a=p.defer(),r=a.promise,s=function(t,e){if(!e)return t;var n=[];return function(t,e,n){for(var r=F(t),i=0;i<r.length;i++)e.call(n,t[r[i]],r[i])}(e,function(t,e){null===t||q(t)||(at(t)||(t=[t]),rt(t,function(t){it(t)&&(t=A(t)?t.toISOString():W(t)),n.push(Y(e)+"="+Y(t))}))}),0<n.length&&(t+=(-1==t.indexOf("?")?"?":"&")+n.join("&")),t}(i.url,i.params);if(m.pendingRequests.push(i),r.then(c,c),!i.cache&&!g.cache||!1===i.cache||"GET"!==i.method&&"JSONP"!==i.method||(o=it(i.cache)?i.cache:it(g.cache)?g.cache:v),o)if(U(n=o.get(s))){if(R(n))return n.then(c,c),n;at(n)?l(n[1],n[0],lt(n[2]),n[3]):l(n,200,{},"OK")}else o.put(s,r);if(q(n)){var u=jn(i.url)?d.cookies()[i.xsrfCookieName||g.xsrfCookieName]:tt;u&&(e[i.xsrfHeaderName||g.xsrfHeaderName]=u),f(i.method,s,t,function(t,e,n,r){o&&(Ce(t)?o.put(s,[t,e,Se(n),r]):o.remove(s)),l(e,t,n,r),h.$$phase||h.$apply()},e,i.timeout,i.withCredentials,i.responseType)}return r;function l(t,e,n,r){(Ce(e=Math.max(e,0))?a.resolve:a.reject)({data:t,status:e,headers:Ee(n),config:i,statusText:r})}function c(){var t=N(m.pendingRequests,i);-1!==t&&m.pendingRequests.splice(t,1)}}(t,e,r).then(s,s)},tt],i=p.when(n);for(rt(u,function(t){(t.request||t.requestError)&&e.unshift(t.request,t.requestError),(t.response||t.responseError)&&e.push(t.response,t.responseError)});e.length;){var o=e.shift(),a=e.shift();i=i.then(o,a)}return i.success=function(e){return i.then(function(t){e(t.data,t.status,t.headers,n)}),i},i.error=function(e){return i.then(null,function(t){e(t.data,t.status,t.headers,n)}),i},i;function s(t){var e=O({},t,{data:ke(t.data,t.headers,n.transformResponse)});return Ce(t.status)?e:p.reject(e)}}return rt(i,function(t){u.unshift(ot(t)?r.get(t):r.invoke(t))}),rt(o,function(t,e){var n=ot(t)?r.get(t):r.invoke(t);u.splice(e,0,{response:function(t){return n(p.when(t))},responseError:function(t){return n(p.reject(t))}})}),m.pendingRequests=[],function(t){rt(arguments,function(n){m[n]=function(t,e){return m(O(e||{},{method:n,url:t}))}})}("get","delete","head","jsonp"),function(t){rt(arguments,function(r){m[r]=function(t,e,n){return m(O(n||{},{method:r,url:t,data:e}))}})}("post","put","patch"),m.defaults=g,m}]}function Ae(t){if(et<=8&&(!t.match(/^(get|post|head|put|delete|options)$/i)||!v.XMLHttpRequest))return new v.ActiveXObject("Microsoft.XMLHTTP");if(v.XMLHttpRequest)return new v.XMLHttpRequest;throw _("$httpBackend")("noxhr","This browser does not support XMLHttpRequest.")}function Pe(){this.$get=["$browser","$window","$document",function(t,e,n){return b=Ae,x=(w=t).defer,_=e.angular.callbacks,S=n[0],function(t,o,e,r,n,i,a,s){var u,l,c,f,d,h;if(w.$$incOutstandingRequestCount(),o=o||w.url(),"jsonp"==E(t)){var p="_"+(_.counter++).toString(36);_[p]=function(t){_[p].data=t,_[p].called=!0};var v=(l=o.replace("JSON_CALLBACK","angular.callbacks."+p),c=p,f=function(t,e){y(r,t,_[p].data,"",e),_[p]=C},d=S.createElement("script"),h=null,d.type="text/javascript",d.src=l,d.async=!0,bt(d,"load",h=function(t){xt(d,"load",h),xt(d,"error",h),S.body.removeChild(d),d=null;var e=-1,n="unknown";t&&("load"!==t.type||_[c].called||(t={type:"error"}),n=t.type,e="error"===t.type?404:200),f&&f(e,n)}),bt(d,"error",h),et<=8&&(d.onreadystatechange=function(){ot(d.readyState)&&/loaded|complete/.test(d.readyState)&&(d.onreadystatechange=null,h({type:"load"}))}),S.body.appendChild(d),h)}else{var m=b(t);if(m.open(t,o,!0),rt(n,function(t,e){U(t)&&m.setRequestHeader(e,t)}),m.onreadystatechange=function(){if(m&&4==m.readyState){var t=null,e=null,n="";-1!==u&&(t=m.getAllResponseHeaders(),e="response"in m?m.response:m.responseText),-1===u&&et<10||(n=m.statusText),y(r,u||m.status,e,t,n)}},a&&(m.withCredentials=!0),s)try{m.responseType=s}catch(t){if("json"!==s)throw t}m.send(e||null)}if(0<i)var g=x($,i);else R(i)&&i.then($);function $(){u=-1,v&&v(),m&&m.abort()}function y(t,e,n,r,i){g&&x.cancel(g),v=m=null,0===e&&(e=n?200:"file"==Pn(o).protocol?404:0),t(e=1223===e?204:e,n,r,i=i||""),w.$$completeOutstandingRequest(C)}};var w,b,x,_,S}]}var je=_("$interpolate");function Te(){var g="{{",$="}}";this.startSymbol=function(t){return t?(g=t,this):g},this.endSymbol=function(t){return t?($=t,this):$},this.$get=["$parse","$exceptionHandler","$sce",function(d,h,p){var v=g.length,m=$.length;function t(o,t,a){for(var e,n,r,i,s=0,u=[],l=o.length,c=!1,f=[];s<l;)-1!=(e=o.indexOf(g,s))&&-1!=(n=o.indexOf($,e+v))?(s!=e&&u.push(o.substring(s,e)),u.push(r=d(i=o.substring(e+v,n))),r.exp=i,s=n+m,c=!0):(s!=l&&u.push(o.substring(s)),s=l);if((l=u.length)||(u.push(""),l=1),a&&1<u.length)throw je("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",o);if(!t||c)return f.length=l,(r=function(t){try{for(var e,n=0,r=l;n<r;n++){if("function"==typeof(e=u[n]))if(e=e(t),null==(e=a?p.getTrusted(a,e):p.valueOf(e)))e="";else switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=W(e)}f[n]=e}return f.join("")}catch(t){var i=je("interr","Can't interpolate: {0}\n{1}",o,t.toString());h(i)}}).exp=o,r.parts=u,r}return t.startSymbol=function(){return g},t.endSymbol=function(){return $},t}]}function Me(){this.$get=["$rootScope","$window","$q",function(c,f,d){var h={};function t(t,e,n,r){var i=f.setInterval,o=f.clearInterval,a=d.defer(),s=a.promise,u=0,l=U(r)&&!r;return n=U(n)?n:0,s.then(null,null,t),s.$$intervalId=i(function(){a.notify(u++),0<n&&n<=u&&(a.resolve(u),o(s.$$intervalId),delete h[s.$$intervalId]),l||c.$apply()},e),h[s.$$intervalId]=a,s}return t.cancel=function(t){return!!(t&&t.$$intervalId in h)&&(h[t.$$intervalId].reject("canceled"),f.clearInterval(t.$$intervalId),delete h[t.$$intervalId],!0)},t}]}function Oe(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"¤",posSuf:"",negPre:"(¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a",short:"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(t){return 1===t?"one":"other"}}}}var De=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,Re={http:80,https:443,ftp:21},Ne=_("$location");function Ie(t){for(var e=t.split("/"),n=e.length;n--;)e[n]=Q(e[n]);return e.join("/")}function Fe(t,e,n){var r=Pn(t,n);e.$$protocol=r.protocol,e.$$host=r.hostname,e.$$port=k(r.port)||Re[r.protocol]||null}function Ue(t,e,n){var r="/"!==t.charAt(0);r&&(t="/"+t);var i=Pn(t,n);e.$$path=decodeURIComponent(r&&"/"===i.pathname.charAt(0)?i.pathname.substring(1):i.pathname),e.$$search=u(i.search),e.$$hash=decodeURIComponent(i.hash),e.$$path&&"/"!=e.$$path.charAt(0)&&(e.$$path="/"+e.$$path)}function Le(t,e){if(0===e.indexOf(t))return e.substr(t.length)}function Ve(t){var e=t.indexOf("#");return-1==e?t:t.substr(0,e)}function Be(t){return t.substr(0,Ve(t).lastIndexOf("/")+1)}function ze(o,a){this.$$html5=!0,a=a||"";var s=Be(o);Fe(o,this,o),this.$$parse=function(t){var e=Le(s,t);if(!ot(e))throw Ne("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,s);Ue(e,this,o),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var t=G(this.$$search),e=this.$$hash?"#"+Q(this.$$hash):"";this.$$url=Ie(this.$$path)+(t?"?"+t:"")+e,this.$$absUrl=s+this.$$url.substr(1)},this.$$parseLinkUrl=function(t,e){var n,r,i;return(n=Le(o,t))!==tt?i=(n=Le(a,r=n))!==tt?s+(Le("/",n)||n):o+r:(n=Le(s,t))!==tt?i=s+n:s==t+"/"&&(i=s),i&&this.$$parse(i),!!i}}function We(r,i){var o=Be(r);Fe(r,this,r),this.$$parse=function(t){var e=Le(r,t)||Le(o,t),n="#"==e.charAt(0)?Le(i,e):this.$$html5?e:"";if(!ot(n))throw Ne("ihshprfx",'Invalid url "{0}", missing hash prefix "{1}".',t,i);Ue(n,this,r),this.$$path=function(t,e,n){var r,i=/^\/[A-Z]:(\/.*)/;0===e.indexOf(n)&&(e=e.replace(n,""));if(i.exec(e))return t;return(r=i.exec(t))?r[1]:t}(this.$$path,n,r),this.$$compose()},this.$$compose=function(){var t=G(this.$$search),e=this.$$hash?"#"+Q(this.$$hash):"";this.$$url=Ie(this.$$path)+(t?"?"+t:"")+e,this.$$absUrl=r+(this.$$url?i+this.$$url:"")},this.$$parseLinkUrl=function(t,e){return Ve(r)==Ve(t)&&(this.$$parse(t),!0)}}function He(i,o){this.$$html5=!0,We.apply(this,arguments);var a=Be(i);this.$$parseLinkUrl=function(t,e){var n,r;return i==Ve(t)?n=t:(r=Le(a,t))?n=i+o+r:a===t+"/"&&(n=a),n&&this.$$parse(n),!!n},this.$$compose=function(){var t=G(this.$$search),e=this.$$hash?"#"+Q(this.$$hash):"";this.$$url=Ie(this.$$path)+(t?"?"+t:"")+e,this.$$absUrl=i+o+this.$$url}}function Ge(t){return function(){return this[t]}}function Qe(e,n){return function(t){return q(t)?this[e]:(this[e]=n(t),this.$$compose(),this)}}function Ye(){var h="",p=!1;this.hashPrefix=function(t){return U(t)?(h=t,this):h},this.html5Mode=function(t){return U(t)?(p=t,this):p},this.$get=["$rootScope","$browser","$sniffer","$rootElement",function(i,o,t,a){var s,e,n,r,u=o.baseHref(),l=o.url();p?(n=(r=l).substring(0,r.indexOf("/",r.indexOf("//")+2))+(u||"/"),e=t.history?ze:He):(n=Ve(l),e=We),(s=new e(n,"#"+h)).$$parseLinkUrl(l,l);var c=/^\s*(javascript|mailto):/i;a.on("click",function(t){if(!t.ctrlKey&&!t.metaKey&&2!=t.which){for(var e=nt(t.target);"a"!==E(e[0].nodeName);)if(e[0]===a[0]||!(e=e.parent())[0])return;var n=e.prop("href"),r=e.attr("href")||e.attr("xlink:href");it(n)&&"[object SVGAnimatedString]"===n.toString()&&(n=Pn(n.animVal).href),c.test(n)||!n||e.attr("target")||t.isDefaultPrevented()||s.$$parseLinkUrl(n,r)&&(t.preventDefault(),s.absUrl()!=o.url()&&(i.$apply(),v.angular["ff-684208-preventDefault"]=!0))}}),s.absUrl()!=l&&o.url(s.absUrl(),!0),o.onUrlChange(function(e){s.absUrl()!=e&&(i.$evalAsync(function(){var t=s.absUrl();s.$$parse(e),i.$broadcast("$locationChangeStart",e,t).defaultPrevented?(s.$$parse(t),o.url(t)):d(t)}),i.$$phase||i.$digest())});var f=0;return i.$watch(function(){var t=o.url(),e=s.$$replace;return f&&t==s.absUrl()||(f++,i.$evalAsync(function(){i.$broadcast("$locationChangeStart",s.absUrl(),t).defaultPrevented?s.$$parse(t):(o.url(s.absUrl(),e),d(t))})),s.$$replace=!1,f}),s;function d(t){i.$broadcast("$locationChangeSuccess",s.absUrl(),t)}}]}function Xe(){var n=!0,r=this;this.debugEnabled=function(t){return U(t)?(n=t,this):n},this.$get=["$window",function(i){return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:(t=e("debug"),function(){n&&t.apply(r,arguments)})};var t;function e(t){var e=i.console||{},r=e[t]||e.log||C,n=!1;try{n=!!r.apply}catch(t){}return n?function(){var n=[];return rt(arguments,function(t){var e;n.push(((e=t)instanceof Error&&(e.stack?e=e.message&&-1===e.stack.indexOf(e.message)?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e))}),r.apply(e,n)}:function(t,e){r(t,null==e?"":e)}}}]}He.prototype=We.prototype=ze.prototype={$$html5:!1,$$replace:!1,absUrl:Ge("$$absUrl"),url:function(t){if(q(t))return this.$$url;var e=De.exec(t);return e[1]&&this.path(decodeURIComponent(e[1])),(e[2]||e[1])&&this.search(e[3]||""),this.hash(e[5]||""),this},protocol:Ge("$$protocol"),host:Ge("$$host"),port:Ge("$$port"),path:Qe("$$path",function(t){return"/"==(t=null!==t?t.toString():"").charAt(0)?t:"/"+t}),search:function(n,t){switch(arguments.length){case 0:return this.$$search;case 1:if(ot(n)||b(n))n=n.toString(),this.$$search=u(n);else{if(!it(n))throw Ne("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");rt(n,function(t,e){null==t&&delete n[e]}),this.$$search=n}break;default:q(t)||null===t?delete this.$$search[n]:this.$$search[n]=t}return this.$$compose(),this},hash:Qe("$$hash",function(t){return null!==t?t.toString():""}),replace:function(){return this.$$replace=!0,this}};var Je,Ke=_("$parse"),Ze={};function tn(t,e){if("__defineGetter__"===t||"__defineSetter__"===t||"__lookupGetter__"===t||"__lookupSetter__"===t||"__proto__"===t)throw Ke("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",e);return t}function en(t,e){if(t){if(t.constructor===t)throw Ke("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",e);if(t.document&&t.location&&t.alert&&t.setInterval)throw Ke("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",e);if(t.children&&(t.nodeName||t.prop&&t.attr&&t.find))throw Ke("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",e);if(t===Object)throw Ke("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",e)}return t}var nn=Function.prototype.call,rn=Function.prototype.apply,on=Function.prototype.bind;var an={null:function(){return null},true:function(){return!0},false:function(){return!1},undefined:C,"+":function(t,e,n,r){return n=n(t,e),r=r(t,e),U(n)?U(r)?n+r:n:U(r)?r:tt},"-":function(t,e,n,r){return n=n(t,e),r=r(t,e),(U(n)?n:0)-(U(r)?r:0)},"*":function(t,e,n,r){return n(t,e)*r(t,e)},"/":function(t,e,n,r){return n(t,e)/r(t,e)},"%":function(t,e,n,r){return n(t,e)%r(t,e)},"^":function(t,e,n,r){return n(t,e)^r(t,e)},"=":C,"===":function(t,e,n,r){return n(t,e)===r(t,e)},"!==":function(t,e,n,r){return n(t,e)!==r(t,e)},"==":function(t,e,n,r){return n(t,e)==r(t,e)},"!=":function(t,e,n,r){return n(t,e)!=r(t,e)},"<":function(t,e,n,r){return n(t,e)<r(t,e)},">":function(t,e,n,r){return n(t,e)>r(t,e)},"<=":function(t,e,n,r){return n(t,e)<=r(t,e)},">=":function(t,e,n,r){return n(t,e)>=r(t,e)},"&&":function(t,e,n,r){return n(t,e)&&r(t,e)},"||":function(t,e,n,r){return n(t,e)||r(t,e)},"&":function(t,e,n,r){return n(t,e)&r(t,e)},"|":function(t,e,n,r){return r(t,e)(t,e,n(t,e))},"!":function(t,e,n){return!n(t,e)}},sn={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},un=function(t){this.options=t};un.prototype={constructor:un,lex:function(t){for(this.text=t,this.index=0,this.ch=tt,this.lastCh=":",this.tokens=[];this.index<this.text.length;){if(this.ch=this.text.charAt(this.index),this.is("\"'"))this.readString(this.ch);else if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(this.ch))this.readIdent();else if(this.is("(){}[].,;:?"))this.tokens.push({index:this.index,text:this.ch}),this.index++;else{if(this.isWhitespace(this.ch)){this.index++;continue}var e=this.ch+this.peek(),n=e+this.peek(2),r=an[this.ch],i=an[e],o=an[n];o?(this.tokens.push({index:this.index,text:n,fn:o}),this.index+=3):i?(this.tokens.push({index:this.index,text:e,fn:i}),this.index+=2):r?(this.tokens.push({index:this.index,text:this.ch,fn:r}),this.index+=1):this.throwError("Unexpected next character ",this.index,this.index+1)}this.lastCh=this.ch}return this.tokens},is:function(t){return-1!==t.indexOf(this.ch)},was:function(t){return-1!==t.indexOf(this.lastCh)},peek:function(t){var e=t||1;return this.index+e<this.text.length&&this.text.charAt(this.index+e)},isNumber:function(t){return"0"<=t&&t<="9"},isWhitespace:function(t){return" "===t||"\r"===t||"\t"===t||"\n"===t||"\v"===t||" "===t},isIdent:function(t){return"a"<=t&&t<="z"||"A"<=t&&t<="Z"||"_"===t||"$"===t},isExpOperator:function(t){return"-"===t||"+"===t||this.isNumber(t)},throwError:function(t,e,n){n=n||this.index;var r=U(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,n)+"]":" "+n;throw Ke("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",t,r,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var n=E(this.text.charAt(this.index));if("."==n||this.isNumber(n))t+=n;else{var r=this.peek();if("e"==n&&this.isExpOperator(r))t+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"==t.charAt(t.length-1))t+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!=t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}t*=1,this.tokens.push({index:e,text:t,literal:!0,constant:!0,fn:function(){return t}})},readIdent:function(){for(var t,e,n,r,i=this,o="",a=this.index;this.index<this.text.length&&("."===(r=this.text.charAt(this.index))||this.isIdent(r)||this.isNumber(r));)"."===r&&(t=this.index),o+=r,this.index++;if(t)for(e=this.index;e<this.text.length;){if("("===(r=this.text.charAt(e))){n=o.substr(t-a+1),o=o.substr(0,t-a),this.index=e;break}if(!this.isWhitespace(r))break;e++}var s={index:a,text:o};if(an.hasOwnProperty(o))s.fn=an[o],s.literal=!0,s.constant=!0;else{var u=vn(o,this.options,this.text);s.fn=O(function(t,e){return u(t,e)},{assign:function(t,e){return cn(t,o,e,i.text,i.options)}})}this.tokens.push(s),n&&(this.tokens.push({index:t,text:"."}),this.tokens.push({index:t+1,text:n}))},readString:function(t){var e=this.index;this.index++;for(var n="",r=t,i=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(r+=o,i){if("u"===o){var a=this.text.substring(this.index+1,this.index+5);a.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+a+"]"),this.index+=4,n+=String.fromCharCode(parseInt(a,16))}else{n+=sn[o]||o}i=!1}else if("\\"===o)i=!0;else{if(o===t)return this.index++,void this.tokens.push({index:e,text:r,string:n,literal:!0,constant:!0,fn:function(){return n}});n+=o}this.index++}this.throwError("Unterminated quote",e)}};var ln=function(t,e,n){this.lexer=t,this.$filter=e,this.options=n};function cn(t,e,n,r,i){en(t,r),i=i||{};for(var o,a=e.split("."),s=0;1<a.length;s++){var u=en(t[o=tn(a.shift(),r)],r);u||(u={},t[o]=u),(t=u).then&&i.unwrapPromises&&(Je(r),"$$v"in t||function(e){e.then(function(t){e.$$v=t})}(t),t.$$v===tt&&(t.$$v={}),t=t.$$v)}return en(t[o=tn(a.shift(),r)],r),t[o]=n}ln.ZERO=O(function(){return 0},{constant:!0}),ln.prototype={constructor:ln,parse:function(t){this.text=t,this.tokens=this.lexer.lex(t);var e=this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e.literal=!!e.literal,e.constant=!!e.constant,e},primary:function(){var t,e,n;if(this.expect("("))t=this.filterChain(),this.consume(")");else if(this.expect("["))t=this.arrayDeclaration();else if(this.expect("{"))t=this.object();else{var r=this.expect();(t=r.fn)||this.throwError("not a primary expression",r),t.literal=!!r.literal,t.constant=!!r.constant}for(;e=this.expect("(","[",".");)"("===e.text?(t=this.functionCall(t,n),n=null):"["===e.text?(n=t,t=this.objectIndex(t)):"."===e.text?(n=t,t=this.fieldAccess(t)):this.throwError("IMPOSSIBLE");return t},throwError:function(t,e){throw Ke("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",e.text,t,e.index+1,this.text,this.text.substring(e.index))},peekToken:function(){if(0===this.tokens.length)throw Ke("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(t,e,n,r){if(0<this.tokens.length){var i=this.tokens[0],o=i.text;if(o===t||o===e||o===n||o===r||!t&&!e&&!n&&!r)return i}return!1},expect:function(t,e,n,r){var i=this.peek(t,e,n,r);return!!i&&(this.tokens.shift(),i)},consume:function(t){this.expect(t)||this.throwError("is unexpected, expecting ["+t+"]",this.peek())},unaryFn:function(n,r){return O(function(t,e){return n(t,e,r)},{constant:r.constant})},ternaryFn:function(n,r,i){return O(function(t,e){return n(t,e)?r(t,e):i(t,e)},{constant:n.constant&&r.constant&&i.constant})},binaryFn:function(n,r,i){return O(function(t,e){return r(t,e,n,i)},{constant:n.constant&&i.constant})},statements:function(){for(var o=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&o.push(this.filterChain()),!this.expect(";"))return 1===o.length?o[0]:function(t,e){for(var n,r=0;r<o.length;r++){var i=o[r];i&&(n=i(t,e))}return n}},filterChain:function(){for(var t,e=this.expression();;){if(!(t=this.expect("|")))return e;e=this.binaryFn(e,t.fn,this.filter())}},filter:function(){for(var t=this.expect(),o=this.$filter(t.text),a=[];;){if(!(t=this.expect(":"))){var e=function(t,e,n){for(var r=[n],i=0;i<a.length;i++)r.push(a[i](t,e));return o.apply(t,r)};return function(){return e}}a.push(this.expression())}},expression:function(){return this.assignment()},assignment:function(){var n,t,r=this.ternary();return(t=this.expect("="))?(r.assign||this.throwError("implies assignment but ["+this.text.substring(0,t.index)+"] can not be assigned to",t),n=this.ternary(),function(t,e){return r.assign(t,n(t,e),e)}):r},ternary:function(){var t,e,n=this.logicalOR();return(e=this.expect("?"))?(t=this.assignment(),(e=this.expect(":"))?this.ternaryFn(n,t,this.assignment()):void this.throwError("expected :",e)):n},logicalOR:function(){for(var t,e=this.logicalAND();;){if(!(t=this.expect("||")))return e;e=this.binaryFn(e,t.fn,this.logicalAND())}},logicalAND:function(){var t,e=this.equality();return(t=this.expect("&&"))&&(e=this.binaryFn(e,t.fn,this.logicalAND())),e},equality:function(){var t,e=this.relational();return(t=this.expect("==","!=","===","!=="))&&(e=this.binaryFn(e,t.fn,this.equality())),e},relational:function(){var t,e=this.additive();return(t=this.expect("<",">","<=",">="))&&(e=this.binaryFn(e,t.fn,this.relational())),e},additive:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e=this.binaryFn(e,t.fn,this.multiplicative());return e},multiplicative:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e=this.binaryFn(e,t.fn,this.unary());return e},unary:function(){var t;return this.expect("+")?this.primary():(t=this.expect("-"))?this.binaryFn(ln.ZERO,t.fn,this.unary()):(t=this.expect("!"))?this.unaryFn(t.fn,this.unary()):this.primary()},fieldAccess:function(i){var o=this,a=this.expect().text,r=vn(a,this.options,this.text);return O(function(t,e,n){return r(n||i(t,e))},{assign:function(t,e,n){var r=i(t,n);return r||i.assign(t,r={}),cn(r,a,e,o.text,o.options)}})},objectIndex:function(a){var s=this,u=this.expression();return this.consume("]"),O(function(t,e){var n,r,i=a(t,e),o=u(t,e);return tn(o,s.text),i?((n=en(i[o],s.text))&&n.then&&s.options.unwrapPromises&&("$$v"in(r=n)||(r.$$v=tt,r.then(function(t){r.$$v=t})),n=n.$$v),n):tt},{assign:function(t,e,n){var r=tn(u(t,n),s.text),i=en(a(t,n),s.text);return i||a.assign(t,i={}),i[r]=e}})},functionCall:function(a,s){var u=[];if(")"!==this.peekToken().text)for(;u.push(this.expression()),this.expect(","););this.consume(")");var l=this;return function(t,e){for(var n=[],r=s?s(t,e):t,i=0;i<u.length;i++)n.push(en(u[i](t,e),l.text));var o=a(t,e,r)||C;return en(r,l.text),function(t,e){if(t){if(t.constructor===t)throw Ke("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",e);if(t===nn||t===rn||on&&t===on)throw Ke("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",e)}}(o,l.text),en(o.apply?o.apply(r,n):o(n[0],n[1],n[2],n[3],n[4]),l.text)}},arrayDeclaration:function(){var i=[],t=!0;if("]"!==this.peekToken().text)do{if(this.peek("]"))break;var e=this.expression();i.push(e),e.constant||(t=!1)}while(this.expect(","));return this.consume("]"),O(function(t,e){for(var n=[],r=0;r<i.length;r++)n.push(i[r](t,e));return n},{literal:!0,constant:t})},object:function(){var o=[],t=!0;if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var e=this.expect(),n=e.string||e.text;this.consume(":");var r=this.expression();o.push({key:n,value:r}),r.constant||(t=!1)}while(this.expect(","));return this.consume("}"),O(function(t,e){for(var n={},r=0;r<o.length;r++){var i=o[r];n[i.key]=i.value(t,e)}return n},{literal:!0,constant:t})}};var fn={},dn={};function hn(t){return"constructor"==t}function pn(i,o,a,s,u,l,t){tn(i,l),tn(o,l),tn(a,l),tn(s,l),tn(u,l);var e=function(t){return en(t,l)},n=t.expensiveChecks,c=n||hn(i)?e:y,f=n||hn(o)?e:y,d=n||hn(a)?e:y,h=n||hn(s)?e:y,p=n||hn(u)?e:y;return t.unwrapPromises?function(t,e){var n,r=e&&e.hasOwnProperty(i)?e:t;return null==r?r:((r=c(r[i]))&&r.then&&(Je(l),"$$v"in r||((n=r).$$v=tt,n.then(function(t){n.$$v=c(t)})),r=c(r.$$v)),o?null==r?tt:((r=f(r[o]))&&r.then&&(Je(l),"$$v"in r||((n=r).$$v=tt,n.then(function(t){n.$$v=f(t)})),r=f(r.$$v)),a?null==r?tt:((r=d(r[a]))&&r.then&&(Je(l),"$$v"in r||((n=r).$$v=tt,n.then(function(t){n.$$v=d(t)})),r=d(r.$$v)),s?null==r?tt:((r=h(r[s]))&&r.then&&(Je(l),"$$v"in r||((n=r).$$v=tt,n.then(function(t){n.$$v=h(t)})),r=h(r.$$v)),u?null==r?tt:((r=p(r[u]))&&r.then&&(Je(l),"$$v"in r||((n=r).$$v=tt,n.then(function(t){n.$$v=p(t)})),r=p(r.$$v)),r):r):r):r):r)}:function(t,e){var n=e&&e.hasOwnProperty(i)?e:t;return null==n?n:(n=c(n[i]),o?null==n?tt:(n=f(n[o]),a?null==n?tt:(n=d(n[a]),s?null==n?tt:(n=h(n[s]),u?null==n?tt:n=p(n[u]):n):n):n):n)}}function vn(t,i,o){var a=i.expensiveChecks,e=a?dn:fn;if(e.hasOwnProperty(t))return e[t];var n,r,s,u=t.split("."),l=u.length;if(i.csp)n=l<6?pn(u[0],u[1],u[2],u[3],u[4],o,i):function(t,e){for(var n,r=0;n=pn(u[r++],u[r++],u[r++],u[r++],u[r++],o,i)(t,e),e=tt,t=n,r<l;);return n};else{var c="var p;\n";a&&(c+="s = eso(s, fe);\nl = eso(l, fe);\n");var f=a;rt(u,function(t,e){tn(t,o);var n=(e?"s":'((l&&l.hasOwnProperty("'+t+'"))?l:s)')+'["'+t+'"]',r=a||hn(t);r&&(n="eso("+n+", fe)",f=!0),c+="if(s == null) return undefined;\ns="+n+";\n",i.unwrapPromises&&(c+='if (s && s.then) {\n pw("'+o.replace(/(["\r\n])/g,"\\$1")+'");\n if (!("$$v" in s)) {\n p=s;\n p.$$v = undefined;\n p.then(function(v) {p.$$v='+(r?"eso(v)":"v")+";});\n}\n s="+(r?"eso(s.$$v)":"s.$$v")+"\n}\n")}),c+="return s;";var d=new Function("s","l","pw","eso","fe",c);d.toString=w(c),(f||i.unwrapPromises)&&(r=d,s=o,d=function(t,e){return r(t,e,Je,en,s)}),n=d}return"hasOwnProperty"!==t&&(e[t]=n),n}function mn(){var u={},l={},c={csp:!1,unwrapPromises:!1,logPromiseWarnings:!0,expensiveChecks:!1};this.unwrapPromises=function(t){return U(t)?(c.unwrapPromises=!!t,this):c.unwrapPromises},this.logPromiseWarnings=function(t){return U(t)?(c.logPromiseWarnings=t,this):c.logPromiseWarnings},this.$get=["$filter","$sniffer","$log",function(a,t,e){c.csp=t.csp;var s={csp:c.csp,unwrapPromises:c.unwrapPromises,logPromiseWarnings:c.logPromiseWarnings,expensiveChecks:!0};return Je=function(t){c.logPromiseWarnings&&!Ze.hasOwnProperty(t)&&(Ze[t]=!0,e.warn("[$parse] Promise found in the expression `"+t+"`. Automatic unwrapping of promises in Angular expressions is deprecated."))},function(t,e){var n;switch(typeof t){case"string":var r=e?l:u;if(r.hasOwnProperty(t))return r[t];var i=e?s:c,o=new un(i);return n=new ln(o,a,i).parse(t),"hasOwnProperty"!==t&&(r[t]=n),n;case"function":return t;default:return C}}}]}function gn(){this.$get=["$rootScope","$exceptionHandler",function(e,t){return function(l,c){var f=function(){var s,e,u=[];return e={resolve:function(t){if(u){var r=u;u=tt,s=d(t),r.length&&l(function(){for(var t,e=0,n=r.length;e<n;e++)t=r[e],s.then(t[0],t[1],t[2])})}},reject:function(t){e.resolve(n(t))},notify:function(n){if(u){var r=u;u.length&&l(function(){for(var t=0,e=r.length;t<e;t++)r[t][2](n)})}},promise:{then:function(e,n,r){var i=f(),t=function(t){try{i.resolve((st(e)?e:p)(t))}catch(t){i.reject(t),c(t)}},o=function(t){try{i.resolve((st(n)?n:v)(t))}catch(t){i.reject(t),c(t)}},a=function(t){try{i.notify((st(r)?r:p)(t))}catch(t){c(t)}};return u?u.push([t,o,a]):s.then(t,o,a),i.promise},catch:function(t){return this.then(null,t)},finally:function(r){function i(t,e){var n=f();return e?n.resolve(t):n.reject(t),n.promise}function e(t,e){var n=null;try{n=(r||p)()}catch(t){return i(t,!1)}return R(n)?n.then(function(){return i(t,e)},function(t){return i(t,!1)}):i(t,e)}return this.then(function(t){return e(t,!0)},function(t){return e(t,!1)})}}}},d=function(n){return R(n)?n:{then:function(t){var e=f();return l(function(){e.resolve(t(n))}),e.promise}}},h=function(t){var e=f();return e.reject(t),e.promise},n=function(r){return{then:function(t,e){var n=f();return l(function(){try{n.resolve((st(e)?e:v)(r))}catch(t){n.reject(t),c(t)}}),n.promise}}};function p(t){return t}function v(t){return h(t)}return{defer:f,reject:h,when:function(t,e,n,r){var i,o=f(),a=function(t){try{return(st(e)?e:p)(t)}catch(t){return c(t),h(t)}},s=function(t){try{return(st(n)?n:v)(t)}catch(t){return c(t),h(t)}},u=function(t){try{return(st(r)?r:p)(t)}catch(t){c(t)}};return l(function(){d(t).then(function(t){i||(i=!0,o.resolve(d(t).then(a,s,u)))},function(t){i||(i=!0,o.resolve(s(t)))},function(t){i||o.notify(u(t))})}),o.promise},all:function(t){var n=f(),r=0,i=at(t)?[]:{};rt(t,function(t,e){r++,d(t).then(function(t){i.hasOwnProperty(e)||(i[e]=t,--r||n.resolve(i))},function(t){i.hasOwnProperty(e)||n.reject(t)})}),0===r&&n.resolve(i);return n.promise}}}(function(t){e.$evalAsync(t)},t)}]}function $n(){this.$get=["$window","$timeout",function(t,n){var r=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame,i=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.mozCancelAnimationFrame||t.webkitCancelRequestAnimationFrame,e=!!r,o=e?function(t){var e=r(t);return function(){i(e)}}:function(t){var e=n(t,16.66,!1);return function(){n.cancel(e)}};return o.supported=e,o}]}function yn(){var w=10,b=_("$rootScope"),x=null;this.digestTtl=function(t){return arguments.length&&(w=t),w},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(t,v,p,m){function n(){this.$id=i(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.this=this.$root=this,this.$$destroyed=!1,this.$$asyncQueue=[],this.$$postDigestQueue=[],this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings={}}n.prototype={constructor:n,$new:function(t){var e;return t?((e=new n).$root=this.$root,e.$$asyncQueue=this.$$asyncQueue,e.$$postDigestQueue=this.$$postDigestQueue):(this.$$childScopeClass||(this.$$childScopeClass=function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$id=i(),this.$$childScopeClass=null},this.$$childScopeClass.prototype=this),e=new this.$$childScopeClass),(e.this=e).$parent=this,e.$$prevSibling=this.$$childTail,this.$$childHead?(this.$$childTail.$$nextSibling=e,this.$$childTail=e):this.$$childHead=this.$$childTail=e,e},$watch:function(t,e,n){var r=u(t,"watch"),i=this.$$watchers,o={fn:e,last:y,get:r,exp:t,eq:!!n};if(x=null,!st(e)){var a=u(e||C,"listener");o.fn=function(t,e,n){a(n)}}if("string"==typeof t&&r.constant){var s=o.fn;o.fn=function(t,e,n){s.call(this,t,e,n),I(i,o)}}return i||(i=this.$$watchers=[]),i.unshift(o),function(){I(i,o),x=null}},$watchCollection:function(t,n){var r,i,o,a=this,s=1<n.length,u=0,l=p(t),c=[],f={},d=!0,h=0;return this.$watch(function(){var t,e;if(it(r=l(a)))if(P(r)){i!==c&&(h=(i=c).length=0,u++),t=r.length,h!==t&&(u++,i.length=h=t);for(var n=0;n<t;n++)i[n]!=i[n]&&r[n]!=r[n]||i[n]===r[n]||(u++,i[n]=r[n])}else{for(e in i!==f&&(i=f={},h=0,u++),t=0,r)r.hasOwnProperty(e)&&(t++,i.hasOwnProperty(e)?i[e]!=i[e]&&r[e]!=r[e]||i[e]===r[e]||(u++,i[e]=r[e]):(h++,i[e]=r[e],u++));if(t<h)for(e in u++,i)i.hasOwnProperty(e)&&!r.hasOwnProperty(e)&&(h--,delete i[e])}else i!==r&&(i=r,u++);return u},function(){if(d?(d=!1,n(r,r,a)):n(r,o,a),s)if(it(r))if(P(r)){o=new Array(r.length);for(var t=0;t<r.length;t++)o[t]=r[t]}else for(var e in o={},r)S.call(r,e)&&(o[e]=r[e]);else o=r})},$digest:function(){var t,e,n,r,i,o,a,s,u,l,c,f=this.$$asyncQueue,d=this.$$postDigestQueue,h=w,p=[];g("$digest"),m.$$checkUrlChange(),x=null;do{for(o=!1,s=this;f.length;){try{(c=f.shift()).scope.$eval(c.expression)}catch(t){$(),v(t)}x=null}t:do{if(r=s.$$watchers)for(i=r.length;i--;)try{if(t=r[i])if((e=t.get(s))===(n=t.last)||(t.eq?ct(e,n):"number"==typeof e&&"number"==typeof n&&isNaN(e)&&isNaN(n))){if(t===x){o=!1;break t}}else o=!0,(x=t).last=t.eq?L(e,null):e,t.fn(e,n===y?e:n,s),h<5&&(p[u=4-h]||(p[u]=[]),l=st(t.exp)?"fn: "+(t.exp.name||t.exp.toString()):t.exp,l+="; newVal: "+W(e)+"; oldVal: "+W(n),p[u].push(l))}catch(t){$(),v(t)}if(!(a=s.$$childHead||s!==this&&s.$$nextSibling))for(;s!==this&&!(a=s.$$nextSibling);)s=s.$parent}while(s=a);if((o||f.length)&&!h--)throw $(),b("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",w,W(p))}while(o||f.length);for($();d.length;)try{d.shift()()}catch(t){v(t)}},$destroy:function(){if(!this.$$destroyed){var t=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this!==e&&(rt(this.$$listenerCount,z(null,o,this)),t.$$childHead==this&&(t.$$childHead=this.$$nextSibling),t.$$childTail==this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=null,this.$$listeners={},this.$$watchers=this.$$asyncQueue=this.$$postDigestQueue=[],this.$destroy=this.$digest=this.$apply=C,this.$on=this.$watch=function(){return C})}},$eval:function(t,e){return p(t)(this,e)},$evalAsync:function(t){e.$$phase||e.$$asyncQueue.length||m.defer(function(){e.$$asyncQueue.length&&e.$digest()}),this.$$asyncQueue.push({scope:this,expression:t})},$$postDigest:function(t){this.$$postDigestQueue.push(t)},$apply:function(t){try{return g("$apply"),this.$eval(t)}catch(t){v(t)}finally{$();try{e.$digest()}catch(t){throw v(t),t}}},$on:function(e,n){var r=this.$$listeners[e];r||(this.$$listeners[e]=r=[]),r.push(n);for(var t=this;t.$$listenerCount[e]||(t.$$listenerCount[e]=0),t.$$listenerCount[e]++,t=t.$parent;);var i=this;return function(){var t=N(r,n);-1!==t&&(r[t]=null,o(i,1,e))}},$emit:function(t,e){var n,r,i,o=[],a=this,s=!1,u={name:t,targetScope:a,stopPropagation:function(){s=!0},preventDefault:function(){u.defaultPrevented=!0},defaultPrevented:!1},l=B([u],arguments,1);do{for(n=a.$$listeners[t]||o,u.currentScope=a,r=0,i=n.length;r<i;r++)if(n[r])try{n[r].apply(null,l)}catch(t){v(t)}else n.splice(r,1),r--,i--;if(s)return u;a=a.$parent}while(a);return u},$broadcast:function(t,e){for(var n,r,i,o=this,a=o,s=o,u={name:t,targetScope:o,preventDefault:function(){u.defaultPrevented=!0},defaultPrevented:!1},l=B([u],arguments,1);a=s;){for(r=0,i=(n=(u.currentScope=a).$$listeners[t]||[]).length;r<i;r++)if(n[r])try{n[r].apply(null,l)}catch(t){v(t)}else n.splice(r,1),r--,i--;if(!(s=a.$$listenerCount[t]&&a.$$childHead||a!==o&&a.$$nextSibling))for(;a!==o&&!(s=a.$$nextSibling);)a=a.$parent}return u}};var e=new n;return e;function g(t){if(e.$$phase)throw b("inprog","{0} already in progress",e.$$phase);e.$$phase=t}function $(){e.$$phase=null}function u(t,e){var n=p(t);return K(n,e),n}function o(t,e,n){for(;t.$$listenerCount[n]-=e,0===t.$$listenerCount[n]&&delete t.$$listenerCount[n],t=t.$parent;);}function y(){}}]}function wn(){var i=/^\s*(https?|ftp|mailto|tel|file):/,o=/^\s*((https?|ftp|file):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return U(t)?(i=t,this):i},this.imgSrcSanitizationWhitelist=function(t){return U(t)?(o=t,this):o},this.$get=function(){return function(t,e){var n,r=e?o:i;return et&&!(8<=et)||""===(n=Pn(t).href)||n.match(r)?t:"unsafe:"+n}}}var bn=_("$sce"),xn={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"};function _n(t){var e=[];return U(t)&&rt(t,function(t){e.push(function(t){if("self"===t)return t;if(ot(t)){if(-1<t.indexOf("***"))throw bn("iwcard","Illegal sequence *** in string matcher.  String: {0}",t);return t=(e=t,e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+t+"$")}if(j(t))return new RegExp("^"+t.source+"$");throw bn("imatcher",'Matchers may only be "self", string patterns or RegExp objects');var e}(t))}),e}function Sn(){this.SCE_CONTEXTS=xn;var a=["self"],s=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(a=_n(t)),a},this.resourceUrlBlacklist=function(t){return arguments.length&&(s=_n(t)),s},this.$get=["$injector",function(t){var r=function(t){throw bn("unsafe","Attempting to use an unsafe value in a safe context.")};function o(t,e){return"self"===t?jn(e):!!t.exec(e.href)}function e(t){var e=function(t){this.$$unwrapTrustedValue=function(){return t}};return t&&(e.prototype=new t),e.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},e.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},e}t.has("$sanitize")&&(r=t.get("$sanitize"));var n=e(),i={};return i[xn.HTML]=e(n),i[xn.CSS]=e(n),i[xn.URL]=e(n),i[xn.JS]=e(n),i[xn.RESOURCE_URL]=e(i[xn.URL]),{trustAs:function(t,e){var n=i.hasOwnProperty(t)?i[t]:null;if(!n)throw bn("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",t,e);if(null===e||e===tt||""===e)return e;if("string"!=typeof e)throw bn("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",t);return new n(e)},getTrusted:function(t,e){if(null===e||e===tt||""===e)return e;var n=i.hasOwnProperty(t)?i[t]:null;if(n&&e instanceof n)return e.$$unwrapTrustedValue();if(t===xn.RESOURCE_URL){if(function(t){var e,n,r=Pn(t.toString()),i=!1;for(e=0,n=a.length;e<n;e++)if(o(a[e],r)){i=!0;break}if(i)for(e=0,n=s.length;e<n;e++)if(o(s[e],r)){i=!1;break}return i}(e))return e;throw bn("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",e.toString())}if(t===xn.HTML)return r(e);throw bn("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(t){return t instanceof n?t.$$unwrapTrustedValue():t}}}]}function En(){var s=!0;this.enabled=function(t){return arguments.length&&(s=!!t),s},this.$get=["$parse","$sniffer","$sceDelegate",function(e,t,n){if(s&&t.msie&&t.msieDocumentMode<8)throw bn("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 9 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var i=lt(xn);i.isEnabled=function(){return s},i.trustAs=n.trustAs,i.getTrusted=n.getTrusted,i.valueOf=n.valueOf,s||(i.trustAs=i.getTrusted=function(t,e){return e},i.valueOf=y),i.parseAs=function(n,t){var r=e(t);return r.literal&&r.constant?r:function(t,e){return i.getTrusted(n,r(t,e))}};var r=i.parseAs,o=i.getTrusted,a=i.trustAs;return rt(xn,function(e,t){var n=E(t);i[kt("parse_as_"+n)]=function(t){return r(e,t)},i[kt("get_trusted_"+n)]=function(t){return o(e,t)},i[kt("trust_as_"+n)]=function(t){return a(e,t)}}),i}]}function kn(){this.$get=["$window","$document",function(t,e){var n,r,i={},o=k((/android (\d+)/.exec(E((t.navigator||{}).userAgent))||[])[1]),a=/Boxee/i.test((t.navigator||{}).userAgent),s=e[0]||{},u=s.documentMode,l=/^(Moz|webkit|O|ms)(?=[A-Z])/,c=s.body&&s.body.style,f=!1,d=!1;if(c){for(var h in c)if(r=l.exec(h)){n=(n=r[0]).substr(0,1).toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in c&&"webkit"),f=!!("transition"in c||n+"Transition"in c),d=!!("animation"in c||n+"Animation"in c),!o||f&&d||(f=ot(s.body.style.webkitTransition),d=ot(s.body.style.webkitAnimation))}return{history:!(!t.history||!t.history.pushState||o<4||a),hashchange:"onhashchange"in t&&(!u||7<u),hasEvent:function(t){if("input"==t&&9==et)return!1;if(q(i[t])){var e=s.createElement("div");i[t]="on"+t in e}return i[t]},csp:V(),vendorPrefix:n,transitions:f,animations:d,android:o,msie:et,msieDocumentMode:u}}]}function Cn(){this.$get=["$rootScope","$browser","$q","$exceptionHandler",function(s,u,l,c){var f={};function t(t,e,n){var r,i=l.defer(),o=i.promise,a=U(n)&&!n;return r=u.defer(function(){try{i.resolve(t())}catch(t){i.reject(t),c(t)}finally{delete f[o.$$timeoutId]}a||s.$apply()},e),o.$$timeoutId=r,f[r]=i,o}return t.cancel=function(t){return!!(t&&t.$$timeoutId in f)&&(f[t.$$timeoutId].reject("canceled"),delete f[t.$$timeoutId],u.defer.cancel(t.$$timeoutId))},t}]}var qn=Z.createElement("a"),An=Pn(v.location.href,!0);function Pn(t,e){var n=t;return et&&(qn.setAttribute("href",n),n=qn.href),qn.setAttribute("href",n),{href:qn.href,protocol:qn.protocol?qn.protocol.replace(/:$/,""):"",host:qn.host,search:qn.search?qn.search.replace(/^\?/,""):"",hash:qn.hash?qn.hash.replace(/^#/,""):"",hostname:qn.hostname,port:qn.port,pathname:"/"===qn.pathname.charAt(0)?qn.pathname:"/"+qn.pathname}}function jn(t){var e=ot(t)?Pn(t):t;return e.protocol===An.protocol&&e.host===An.host}function Tn(){this.$get=w(v)}function Mn(r){var i="Filter";function o(t,e){if(it(t)){var n={};return rt(t,function(t,e){n[e]=o(e,t)}),n}return r.factory(t+i,e)}this.register=o,this.$get=["$injector",function(e){return function(t){return e.get(t+i)}}],o("currency",Dn),o("date",Wn),o("filter",On),o("json",Hn),o("limitTo",Yn),o("lowercase",Gn),o("number",Rn),o("orderBy",Xn),o("uppercase",Qn)}function On(){return function(t,n,i){if(!at(t))return t;var e=typeof i,r=[];r.check=function(t){for(var e=0;e<r.length;e++)if(!r[e](t))return!1;return!0},"function"!==e&&(i="boolean"===e&&i?function(t,e){return d.equals(t,e)}:function(t,e){if(t&&e&&"object"==typeof t&&"object"==typeof e){for(var n in t)if("$"!==n.charAt(0)&&S.call(t,n)&&i(t[n],e[n]))return!0;return!1}return e=(""+e).toLowerCase(),-1<(""+t).toLowerCase().indexOf(e)});var o=function(t,e){if("string"==typeof e&&"!"===e.charAt(0))return!o(t,e.substr(1));switch(typeof t){case"boolean":case"number":case"string":return i(t,e);case"object":switch(typeof e){case"object":return i(t,e);default:for(var n in t)if("$"!==n.charAt(0)&&o(t[n],e))return!0}return!1;case"array":for(var r=0;r<t.length;r++)if(o(t[r],e))return!0;return!1;default:return!1}};switch(typeof n){case"boolean":case"number":case"string":n={$:n};case"object":for(var a in n)!function(e){void 0!==n[e]&&r.push(function(t){return o("$"==e?t:t&&t[e],n[e])})}(a);break;case"function":r.push(n);break;default:return t}for(var s=[],u=0;u<t.length;u++){var l=t[u];r.check(l)&&s.push(l)}return s}}function Dn(t){var n=t.NUMBER_FORMATS;return function(t,e){return q(e)&&(e=n.CURRENCY_SYM),In(t,n.PATTERNS[1],n.GROUP_SEP,n.DECIMAL_SEP,2).replace(/\u00A4/g,e)}}function Rn(t){var n=t.NUMBER_FORMATS;return function(t,e){return In(t,n.PATTERNS[0],n.GROUP_SEP,n.DECIMAL_SEP,e)}}Mn.$inject=["$provide"],Dn.$inject=["$locale"],Rn.$inject=["$locale"];var Nn=".";function In(t,e,n,r,i){if(null==t||!isFinite(t)||it(t))return"";var o=t<0,a=(t=Math.abs(t))+"",s="",u=[],l=!1;if(-1!==a.indexOf("e")){var c=a.match(/([\d\.]+)e(-?)(\d+)/);c&&"-"==c[2]&&c[3]>i+1?(a="0",t=0):(s=a,l=!0)}if(l)0<i&&-1<t&&t<1&&(s=t.toFixed(i));else{var f=(a.split(Nn)[1]||"").length;q(i)&&(i=Math.min(Math.max(e.minFrac,f),e.maxFrac)),0===(t=+(Math.round(+(t.toString()+"e"+i)).toString()+"e"+-i))&&(o=!1);var d=(""+t).split(Nn),h=d[0];d=d[1]||"";var p,v=0,m=e.lgSize,g=e.gSize;if(h.length>=m+g)for(v=h.length-m,p=0;p<v;p++)(v-p)%g==0&&0!==p&&(s+=n),s+=h.charAt(p);for(p=v;p<h.length;p++)(h.length-p)%m==0&&0!==p&&(s+=n),s+=h.charAt(p);for(;d.length<i;)d+="0";i&&"0"!==i&&(s+=r+d.substr(0,i))}return u.push(o?e.negPre:e.posPre),u.push(s),u.push(o?e.negSuf:e.posSuf),u.join("")}function Fn(t,e,n){var r="";for(t<0&&(r="-",t=-t),t=""+t;t.length<e;)t="0"+t;return n&&(t=t.substr(t.length-e)),r+t}function Un(n,r,i,o){return i=i||0,function(t){var e=t["get"+n]();return(0<i||-i<e)&&(e+=i),0===e&&-12==i&&(e=12),Fn(e,r,o)}}function Ln(r,i){return function(t,e){var n=t["get"+r]();return e[l(i?"SHORT"+r:r)][n]}}var Vn={yyyy:Un("FullYear",4),yy:Un("FullYear",2,0,!0),y:Un("FullYear",1),MMMM:Ln("Month"),MMM:Ln("Month",!0),MM:Un("Month",2,1),M:Un("Month",1,1),dd:Un("Date",2),d:Un("Date",1),HH:Un("Hours",2),H:Un("Hours",1),hh:Un("Hours",2,-12),h:Un("Hours",1,-12),mm:Un("Minutes",2),m:Un("Minutes",1),ss:Un("Seconds",2),s:Un("Seconds",1),sss:Un("Milliseconds",3),EEEE:Ln("Day"),EEE:Ln("Day",!0),a:function(t,e){return t.getHours()<12?e.AMPMS[0]:e.AMPMS[1]},Z:function(t){var e=-1*t.getTimezoneOffset(),n=0<=e?"+":"";return n+=Fn(Math[0<e?"floor":"ceil"](e/60),2)+Fn(Math.abs(e%60),2)}},Bn=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,zn=/^\-?\d+$/;function Wn(a){var f=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(e,t){var n,r,i="",o=[];if(t=t||"mediumDate",t=a.DATETIME_FORMATS[t]||t,ot(e)&&(e=zn.test(e)?k(e):function(t){var e;if(e=t.match(f)){var n=new Date(0),r=0,i=0,o=e[8]?n.setUTCFullYear:n.setFullYear,a=e[8]?n.setUTCHours:n.setHours;e[9]&&(r=k(e[9]+e[10]),i=k(e[9]+e[11])),o.call(n,k(e[1]),k(e[2])-1,k(e[3]));var s=k(e[4]||0)-r,u=k(e[5]||0)-i,l=k(e[6]||0),c=Math.round(1e3*parseFloat("0."+(e[7]||0)));return a.call(n,s,u,l,c),n}return t}(e)),b(e)&&(e=new Date(e)),!A(e))return e;for(;t;)(r=Bn.exec(t))?t=(o=B(o,r,1)).pop():(o.push(t),t=null);return rt(o,function(t){n=Vn[t],i+=n?n(e,a.DATETIME_FORMATS):t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),i}}function Hn(){return function(t){return W(t,!0)}}Wn.$inject=["$locale"];var Gn=w(E),Qn=w(l);function Yn(){return function(t,e){if(!at(t)&&!ot(t))return t;if(e=Math.abs(Number(e))===1/0?Number(e):k(e),ot(t))return e?0<=e?t.slice(0,e):t.slice(e,t.length):"";var n,r,i=[];for(e>t.length?e=t.length:e<-t.length&&(e=-t.length),0<e?(n=0,r=e):(n=t.length+e,r=t.length);n<r;n++)i.push(t[n]);return i}}function Xn(l){return function(t,i,e){return P(t)?(0===(i=at(i)?i:[i]).length&&(i=["+"]),r=function(t){var e=!1,n=t||y;if(ot(t)){if("+"!=t.charAt(0)&&"-"!=t.charAt(0)||(e="-"==t.charAt(0),t=t.substring(1)),""===t)return s(function(t,e){return u(t,e)},e);if((n=l(t)).constant){var r=n();return s(function(t,e){return u(t[r],e[r])},e)}}return s(function(t,e){return u(n(t),n(e))},e)},a=[],rt(i,function(t,e,n){a.push(r.call(o,t,e,n))}),i=a,c.call(t).sort(s(function(t,e){for(var n=0;n<i.length;n++){var r=i[n](t,e);if(0!==r)return r}return 0},e))):t;var r,o,a;function s(n,t){return H(t)?function(t,e){return n(e,t)}:n}function u(t,e){var n=typeof t,r=typeof e;return n==r?(A(t)&&A(e)&&(t=t.valueOf(),e=e.valueOf()),"string"==n&&(t=t.toLowerCase(),e=e.toLowerCase()),t===e?0:t<e?-1:1):n<r?-1:1}}}function Jn(t){return st(t)&&(t={link:t}),t.restrict=t.restrict||"AC",w(t)}Xn.$inject=["$parse"];var Kn=w({restrict:"E",compile:function(t,e){if(et<=8&&(e.href||e.name||e.$set("href",""),t.append(Z.createComment("IE fix"))),!e.href&&!e.xlinkHref&&!e.name)return function(t,e){var n="[object SVGAnimatedString]"===s.call(e.prop("href"))?"xlink:href":"href";e.on("click",function(t){e.attr(n)||t.preventDefault()})}}}),Zn={};rt(Xt,function(t,r){if("multiple"!=t){var i=ye("ng-"+r);Zn[i]=function(){return{priority:100,link:function(t,e,n){t.$watch(n[i],function(t){n.$set(r,!!t)})}}}}}),rt(["src","srcset","href"],function(o){var a=ye("ng-"+o);Zn[a]=function(){return{priority:99,link:function(t,e,n){var r=o,i=o;"href"===o&&"[object SVGAnimatedString]"===s.call(e.prop("href"))&&(i="xlinkHref",n.$attr[i]="xlink:href",r=null),n.$observe(a,function(t){t?(n.$set(i,t),et&&r&&e.prop(r,n[i])):"href"===o&&n.$set(i,null)})}}}});var tr={$addControl:C,$removeControl:C,$setValidity:C,$setDirty:C,$setPristine:C};function er(n,t,e,r){var i=this,o=n.parent().controller("form")||tr,a=0,s=i.$error={},u=[];function l(t,e){e=e?"-"+ht(e,"-"):"",r.setClass(n,(t?pr:vr)+e,(t?vr:pr)+e)}i.$name=t.name||t.ngForm,i.$dirty=!1,i.$pristine=!0,i.$valid=!0,i.$invalid=!1,o.$addControl(i),n.addClass(mr),l(!0),i.$addControl=function(t){vt(t.$name,"input"),u.push(t),t.$name&&(i[t.$name]=t)},i.$removeControl=function(n){n.$name&&i[n.$name]===n&&delete i[n.$name],rt(s,function(t,e){i.$setValidity(e,!0,n)}),I(u,n)},i.$setValidity=function(t,e,n){var r=s[t];if(e)r&&(I(r,n),r.length||(--a||(l(e),i.$valid=!0,i.$invalid=!1),l(!(s[t]=!1),t),o.$setValidity(t,!0,i)));else{if(a||l(e),r){if(-1!=N(r,n))return}else s[t]=r=[],a++,l(!1,t),o.$setValidity(t,!1,i);r.push(n),i.$valid=!1,i.$invalid=!0}},i.$setDirty=function(){r.removeClass(n,mr),r.addClass(n,gr),i.$dirty=!0,i.$pristine=!1,o.$setDirty()},i.$setPristine=function(){r.removeClass(n,gr),r.addClass(n,mr),i.$dirty=!1,i.$pristine=!0,rt(u,function(t){t.$setPristine()})}}er.$inject=["$element","$attrs","$scope","$animate"];var nr=function(t){return["$timeout",function(s){return{name:"form",restrict:t?"EAC":"E",controller:er,compile:function(){return{pre:function(t,e,n,r){if(!n.action){var i=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1};bt(e[0],"submit",i),e.on("$destroy",function(){s(function(){xt(e[0],"submit",i)},0,!1)})}var o=e.parent().controller("form"),a=n.name||n.ngForm;a&&cn(t,a,r,a),o&&e.on("$destroy",function(){o.$removeControl(r),a&&cn(t,a,tt,a),O(r,tr)})}}}}}]},rr=nr(),ir=nr(!0),or=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,ar=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,sr=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,ur={text:fr,number:function(t,e,n,r,i,o){if(fr(t,e,n,r,i,o),r.$parsers.push(function(t){var e=r.$isEmpty(t);return e||sr.test(t)?(r.$setValidity("number",!0),""===t?null:e?t:parseFloat(t)):(r.$setValidity("number",!1),tt)}),s=r,u="number",l=dr,c=null,f=r.$$validityState,it(f)&&(s.$$hasNativeValidators=!0,s.$parsers.push(function(t){if(s.$error[u]||cr(f,c)||!cr(f,l))return t;s.$setValidity(u,!1)})),r.$formatters.push(function(t){return r.$isEmpty(t)?"":""+t}),n.min){var a=function(t){var e=parseFloat(n.min);return lr(r,"min",r.$isEmpty(t)||e<=t,t)};r.$parsers.push(a),r.$formatters.push(a)}var s,u,l,c,f;if(n.max){var d=function(t){var e=parseFloat(n.max);return lr(r,"max",r.$isEmpty(t)||t<=e,t)};r.$parsers.push(d),r.$formatters.push(d)}r.$formatters.push(function(t){return lr(r,"number",r.$isEmpty(t)||b(t),t)})},url:function(t,e,n,r,i,o){fr(t,e,n,r,i,o);var a=function(t){return lr(r,"url",r.$isEmpty(t)||or.test(t),t)};r.$formatters.push(a),r.$parsers.push(a)},email:function(t,e,n,r,i,o){fr(t,e,n,r,i,o);var a=function(t){return lr(r,"email",r.$isEmpty(t)||ar.test(t),t)};r.$formatters.push(a),r.$parsers.push(a)},radio:function(t,e,n,r){q(n.name)&&e.attr("name",i());e.on("click",function(){e[0].checked&&t.$apply(function(){r.$setViewValue(n.value)})}),r.$render=function(){var t=n.value;e[0].checked=t==r.$viewValue},n.$observe("value",r.$render)},checkbox:function(t,e,n,r){var i=n.ngTrueValue,o=n.ngFalseValue;ot(i)||(i=!0);ot(o)||(o=!1);e.on("click",function(){t.$apply(function(){r.$setViewValue(e[0].checked)})}),r.$render=function(){e[0].checked=r.$viewValue},r.$isEmpty=function(t){return t!==i},r.$formatters.push(function(t){return t===i}),r.$parsers.push(function(t){return t?i:o})},hidden:C,button:C,submit:C,reset:C,file:C};function lr(t,e,n,r){return t.$setValidity(e,n),n?r:tt}function cr(t,e){var n;if(e)for(n=0;n<e.length;++n)if(t[e[n]])return!0;return!1}function fr(r,i,o,a,t,e){var s=i.prop(x),u=i[0].placeholder,l={},c=E(i[0].type);if(a.$$validityState=s,!t.android){var f=!1;i.on("compositionstart",function(t){f=!0}),i.on("compositionend",function(){f=!1,n()})}var n=function(t){if(!f){var e=i.val();if(et&&"input"===(t||l).type&&i[0].placeholder!==u)u=i[0].placeholder;else{"password"!==c&&H(o.ngTrim||"T")&&(e=ut(e));var n=s&&a.$$hasNativeValidators;(a.$viewValue!==e||""===e&&n)&&(r.$root.$$phase?a.$setViewValue(e):r.$apply(function(){a.$setViewValue(e)}))}}};if(t.hasEvent("input"))i.on("input",n);else{var d,h=function(){d||(d=e.defer(function(){n(),d=null}))};i.on("keydown",function(t){var e=t.keyCode;91===e||15<e&&e<19||37<=e&&e<=40||h()}),t.hasEvent("paste")&&i.on("paste cut",h)}i.on("change",n),a.$render=function(){i.val(a.$isEmpty(a.$viewValue)?"":a.$viewValue)};var p,v,m=o.ngPattern;if(m){var g=function(t,e){return lr(a,"pattern",a.$isEmpty(e)||t.test(e),e)};(v=m.match(/^\/(.*)\/([gim]*)$/))?(m=new RegExp(v[1],v[2]),p=function(t){return g(m,t)}):p=function(t){var e=r.$eval(m);if(!e||!e.test)throw _("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",m,e,dt(i));return g(e,t)},a.$formatters.push(p),a.$parsers.push(p)}if(o.ngMinlength){var $=k(o.ngMinlength),y=function(t){return lr(a,"minlength",a.$isEmpty(t)||t.length>=$,t)};a.$parsers.push(y),a.$formatters.push(y)}if(o.ngMaxlength){var w=k(o.ngMaxlength),b=function(t){return lr(a,"maxlength",a.$isEmpty(t)||t.length<=w,t)};a.$parsers.push(b),a.$formatters.push(b)}}var dr=["badInput"];var hr=["$browser","$sniffer",function(i,o){return{restrict:"E",require:"?ngModel",link:function(t,e,n,r){r&&(ur[E(n.type)]||ur.text)(t,e,n,r,o,i)}}}],pr="ng-valid",vr="ng-invalid",mr="ng-pristine",gr="ng-dirty",$r=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate",function(r,n,t,i,e,o){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$name=t.name;var a=e(t.ngModel),s=a.assign;if(!s)throw _("ngModel")("nonassign","Expression '{0}' is non-assignable. Element: {1}",t.ngModel,dt(i));this.$render=C,this.$isEmpty=function(t){return q(t)||""===t||null===t||t!=t};var u=i.inheritedData("$formController")||tr,l=0,c=this.$error={};function f(t,e){e=e?"-"+ht(e,"-"):"",o.removeClass(i,(t?vr:pr)+e),o.addClass(i,(t?pr:vr)+e)}i.addClass(mr),f(!0),this.$setValidity=function(t,e){c[t]!==!e&&(e?(c[t]&&l--,l||(f(!0),this.$valid=!0,this.$invalid=!1)):(f(!1),this.$invalid=!0,this.$valid=!1,l++),c[t]=!e,f(e,t),u.$setValidity(t,e,this))},this.$setPristine=function(){this.$dirty=!1,this.$pristine=!0,o.removeClass(i,gr),o.addClass(i,mr)},this.$setViewValue=function(e){this.$viewValue=e,this.$pristine&&(this.$dirty=!0,this.$pristine=!1,o.removeClass(i,mr),o.addClass(i,gr),u.$setDirty()),rt(this.$parsers,function(t){e=t(e)}),this.$modelValue!==e&&(this.$modelValue=e,s(r,e),rt(this.$viewChangeListeners,function(t){try{t()}catch(t){n(t)}}))};var d=this;r.$watch(function(){var t=a(r);if(d.$modelValue!==t){var e=d.$formatters,n=e.length;for(d.$modelValue=t;n--;)t=e[n](t);d.$viewValue!==t&&(d.$viewValue=t,d.$render())}return t})}],yr=function(){return{require:["ngModel","^?form"],controller:$r,link:function(t,e,n,r){var i=r[0],o=r[1]||tr;o.$addControl(i),t.$on("$destroy",function(){o.$removeControl(i)})}}},wr=w({require:"ngModel",link:function(t,e,n,r){r.$viewChangeListeners.push(function(){t.$eval(n.ngChange)})}}),br=function(){return{require:"?ngModel",link:function(t,e,n,r){if(r){n.required=!0;var i=function(t){return n.required&&r.$isEmpty(t)?void r.$setValidity("required",!1):(r.$setValidity("required",!0),t)};r.$formatters.push(i),r.$parsers.unshift(i),n.$observe("required",function(){i(r.$viewValue)})}}}},xr=function(){return{require:"ngModel",link:function(t,e,n,r){var i=/\/(.*)\//.exec(n.ngList),o=i&&new RegExp(i[1])||n.ngList||",";r.$parsers.push(function(t){if(!q(t)){var e=[];return t&&rt(t.split(o),function(t){t&&e.push(ut(t))}),e}}),r.$formatters.push(function(t){return at(t)?t.join(", "):tt}),r.$isEmpty=function(t){return!t||!t.length}}}},_r=/^(true|false|\d+)$/,Sr=function(){return{priority:100,compile:function(t,e){return _r.test(e.ngValue)?function(t,e,n){n.$set("value",t.$eval(n.ngValue))}:function(t,e,n){t.$watch(n.ngValue,function(t){n.$set("value",t)})}}}},Er=Jn({compile:function(t){return t.addClass("ng-binding"),function(t,e,n){e.data("$binding",n.ngBind),t.$watch(n.ngBind,function(t){e.text(t==tt?"":t)})}}}),kr=["$interpolate",function(i){return function(t,e,n){var r=i(e.attr(n.$attr.ngBindTemplate));e.addClass("ng-binding").data("$binding",r),n.$observe("ngBindTemplate",function(t){e.text(t)})}}],Cr=["$sce","$parse",function(i,o){return{compile:function(t){return t.addClass("ng-binding"),function(e,n,t){n.data("$binding",t.ngBindHtml);var r=o(t.ngBindHtml);e.$watch(function(){return(r(e)||"").toString()},function(t){n.html(i.getTrustedHtml(r(e))||"")})}}}}];function qr(a,v){return a="ngClass"+a,["$animate",function(d){return{restrict:"AC",link:function(s,u,o){var l;function c(t){var e=f(t,1);o.$addClass(e)}function f(t,e){var n=u.data("$classCounts")||{},r=[];return rt(t,function(t){(0<e||n[t])&&(n[t]=(n[t]||0)+e,n[t]===+(0<e)&&r.push(t))}),u.data("$classCounts",n),r.join(" ")}function e(t){if(!0===v||s.$index%2===v){var e=p(t||[]);if(l){if(!ct(t,l)){var n=p(l);o=h(i=e,r=n),a=f(a=h(r,i),-1),0===(o=f(o,1)).length?d.removeClass(u,a):0===a.length?d.addClass(u,o):d.setClass(u,o,a)}}else c(e)}var r,i,o,a;l=lt(t)}s.$watch(o[a],e,!0),o.$observe("class",function(t){e(s.$eval(o[a]))}),"ngClass"!==a&&s.$watch("$index",function(t,e){var n,r=1&t;if(r!==(1&e)){var i=p(s.$eval(o[a]));r===v?c(i):(n=f(i,-1),o.$removeClass(n))}})}};function h(t,e){var n=[];t:for(var r=0;r<t.length;r++){for(var i=t[r],o=0;o<e.length;o++)if(i==e[o])continue t;n.push(i)}return n}function p(t){if(at(t))return t;if(ot(t))return t.split(" ");if(it(t)){var n=[];return rt(t,function(t,e){t&&(n=n.concat(e.split(" ")))}),n}return t}}]}var Ar=qr("",!0),Pr=qr("Odd",0),jr=qr("Even",1),Tr=Jn({compile:function(t,e){e.$set("ngCloak",tt),t.removeClass("ng-cloak")}}),Mr=[function(){return{scope:!0,controller:"@",priority:500}}],Or={},Dr={blur:!0,focus:!0};rt("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(o){var a=ye("ng-"+o);Or[a]=["$parse","$rootScope",function(n,i){return{compile:function(t,e){var r=n(e[a],!0);return function(n,t){t.on(o,function(t){var e=function(){r(n,{$event:t})};Dr[o]&&i.$$phase?n.$evalAsync(e):n.$apply(e)})}}}}]});var Rr=["$animate",function(u){return{transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(e,n,r,t,i){var o,a,s;e.$watch(r.ngIf,function(t){H(t)?a||(a=e.$new(),i(a,function(t){t[t.length++]=Z.createComment(" end ngIf: "+r.ngIf+" "),o={clone:t},u.enter(t,n.parent(),n)})):(s&&(s.remove(),s=null),a&&(a.$destroy(),a=null),o&&(s=gt(o.clone),u.leave(s,function(){s=null}),o=null))})}}}],Nr=["$http","$templateCache","$anchorScroll","$animate","$sce",function(v,m,g,$,r){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:d.noop,compile:function(t,e){var n=e.ngInclude||e.src,h=e.onload||"",p=e.autoscroll;return function(o,a,t,s,u){var l,e,c,f=0,d=function(){e&&(e.remove(),e=null),l&&(l.$destroy(),l=null),c&&($.leave(c,function(){e=null}),e=c,c=null)};o.$watch(r.parseAsResourceUrl(n),function(t){var r=function(){!U(p)||p&&!o.$eval(p)||g()},i=++f;t?(v.get(t,{cache:m}).success(function(t){if(i===f){var e=o.$new();s.template=t;var n=u(e,function(t){d(),$.enter(t,null,a,r)});c=n,(l=e).$emit("$includeContentLoaded"),o.$eval(h)}}).error(function(){i===f&&d()}),o.$emit("$includeContentRequested")):(d(),s.template=null)})}}}}],Ir=["$compile",function(i){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(t,e,n,r){e.html(r.template),i(e.contents())(t)}}}],Fr=Jn({priority:450,compile:function(){return{pre:function(t,e,n){t.$eval(n.ngInit)}}}}),Ur=Jn({terminal:!0,priority:1e3}),Lr=["$locale","$interpolate",function(f,d){var h=/{}/g;return{restrict:"EA",link:function(e,n,r){var i=r.count,t=r.$attr.when&&n.attr(r.$attr.when),o=r.offset||0,a=e.$eval(t)||{},s={},u=d.startSymbol(),l=d.endSymbol(),c=/^when(Minus)?(.+)$/;rt(r,function(t,e){c.test(e)&&(a[E(e.replace("when","").replace("Minus","-"))]=n.attr(r.$attr[e]))}),rt(a,function(t,e){s[e]=d(t.replace(h,u+i+"-"+o+l))}),e.$watch(function(){var t=parseFloat(e.$eval(i));return isNaN(t)?"":(t in a||(t=f.pluralCat(t-o)),s[t](e,n,!0))},function(t){n.text(t)})}}}],Vr=["$parse","$animate",function(u,k){var C="$$NG_REMOVED",q=_("ngRepeat");return{transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,link:function(m,g,t,e,$){var n,r,y,w,b,i,o,x,_,S=t.ngRepeat,a=S.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),s={$id:Zt};if(!a)throw q("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",S);if(i=a[1],o=a[2],(n=a[3])?(r=u(n),y=function(t,e,n){return _&&(s[_]=t),s[x]=e,s.$index=n,r(m,s)}):(w=function(t,e){return Zt(e)},b=function(t){return t}),!(a=i.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/)))throw q("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",i);x=a[3]||a[1],_=a[2];var E={};m.$watchCollection(o,function(t){var e,n,r,i,o,a,s,u,l,c,f,d,h=g[0],p={},v=[];if(P(t))c=t,l=y||w;else{for(a in l=y||b,c=[],t)t.hasOwnProperty(a)&&"$"!=a.charAt(0)&&c.push(a);c.sort()}for(i=c.length,n=v.length=c.length,e=0;e<n;e++)if(vt(u=l(a=t===c?e:c[e],s=t[a],e),"`track by` id"),E.hasOwnProperty(u))f=E[u],delete E[u],p[u]=f,v[e]=f;else{if(p.hasOwnProperty(u))throw rt(v,function(t){t&&t.scope&&(E[t.id]=t)}),q("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",S,u,W(s));v[e]={id:u},p[u]=!1}for(a in E)E.hasOwnProperty(a)&&(d=gt((f=E[a]).clone),k.leave(d),rt(d,function(t){t[C]=!0}),f.scope.$destroy());for(e=0,n=c.length;e<n;e++){if(s=t[a=t===c?e:c[e]],f=v[e],v[e-1]&&(h=A(v[e-1])),f.scope){for(o=f.scope,r=h;(r=r.nextSibling)&&r[C];);f.clone[0]!=r&&k.move(gt(f.clone),null,nt(h)),h=A(f)}else o=m.$new();o[x]=s,_&&(o[_]=a),o.$index=e,o.$first=0===e,o.$last=e===i-1,o.$middle=!(o.$first||o.$last),o.$odd=!(o.$even=0==(1&e)),f.scope||$(o,function(t){t[t.length++]=Z.createComment(" end ngRepeat: "+S+" "),k.enter(t,null,nt(h)),h=t,f.scope=o,f.clone=t,p[f.id]=f})}E=p})}};function A(t){return t.clone[t.clone.length-1]}}],Br=["$animate",function(r){return function(t,e,n){t.$watch(n.ngShow,function(t){r[H(t)?"removeClass":"addClass"](e,"ng-hide")})}}],zr=["$animate",function(r){return function(t,e,n){t.$watch(n.ngHide,function(t){r[H(t)?"addClass":"removeClass"](e,"ng-hide")})}}],Wr=Jn(function(t,n,e){t.$watch(e.ngStyle,function(t,e){e&&t!==e&&rt(e,function(t,e){n.css(e,"")}),t&&n.css(t)},!0)}),Hr=["$animate",function(f){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(i,t,o,a){var e=o.ngSwitch||o.on,s=[],u=[],l=[],c=[];i.$watch(e,function(t){var e,n;for(e=0,n=l.length;e<n;++e)l[e].remove();for(l.length=0,e=0,n=c.length;e<n;++e){var r=u[e];c[e].$destroy(),l[e]=r,f.leave(r,function(){l.splice(e,1)})}u.length=0,c.length=0,(s=a.cases["!"+t]||a.cases["?"])&&(i.$eval(o.change),rt(s,function(n){var t=i.$new();c.push(t),n.transclude(t,function(t){var e=n.element;u.push(t),f.enter(t,e.parent(),e)})}))})}}}],Gr=Jn({transclude:"element",priority:800,require:"^ngSwitch",link:function(t,e,n,r,i){r.cases["!"+n.ngSwitchWhen]=r.cases["!"+n.ngSwitchWhen]||[],r.cases["!"+n.ngSwitchWhen].push({transclude:i,element:e})}}),Qr=Jn({transclude:"element",priority:800,require:"^ngSwitch",link:function(t,e,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:e})}}),Yr=Jn({link:function(t,e,n,r,i){if(!i)throw _("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",dt(e));i(function(t){e.empty(),e.append(t)})}}),Xr=["$templateCache",function(i){return{restrict:"E",terminal:!0,compile:function(t,e){if("text/ng-template"==e.type){var n=e.id,r=t[0].text;i.put(n,r)}}}}],Jr=_("ngOptions"),Kr=w({terminal:!0}),Zr=["$compile","$parse",function(y,w){var b=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,s={$setViewValue:C};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(n,t,e){var r,i=this,o={},a=s;i.databound=e.ngModel,i.init=function(t,e,n){a=t,r=n},i.addOption=function(t){vt(t,'"option value"'),o[t]=!0,a.$viewValue==t&&(n.val(t),r.parent()&&r.remove())},i.removeOption=function(t){this.hasOption(t)&&(delete o[t],a.$viewValue==t&&this.renderUnknownOption(t))},i.renderUnknownOption=function(t){var e="? "+Zt(t)+" ?";r.val(e),n.prepend(r),n.val(e),r.prop("selected",!0)},i.hasOption=function(t){return o.hasOwnProperty(t)},t.$on("$destroy",function(){i.renderUnknownOption=C})}],link:function(t,e,n,r){if(r[1]){for(var i,o,a,s,u,l,c,f,d,O=r[0],h=r[1],D=n.multiple,p=n.ngOptions,R=!1,N=nt(Z.createElement("option")),I=nt(Z.createElement("optgroup")),v=N.clone(),m=0,g=e.children(),$=g.length;m<$;m++)if(""===g[m].value){i=R=g.eq(m);break}O.init(h,R,v),D&&(h.$isEmpty=function(t){return!t||0===t.length}),p?function(_,S,E){var t;if(!(t=p.match(b)))throw Jr("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",p,dt(S));var k=w(t[2]||t[1]),C=t[4]||t[6],q=t[5],A=w(t[3]||""),P=w(t[2]?t[1]:C),j=w(t[7]),T=t[8]?w(t[8]):null,M=[[{element:S,label:""}]];R&&(y(R)(_),R.removeClass("ng-scope"),R.remove());S.empty(),S.on("change",function(){_.$apply(function(){var t,e,n,r,i,o,a,s,u,l=j(_)||[],c={};if(D){for(n=[],o=0,s=M.length;o<s;o++)for(i=1,a=(t=M[o]).length;i<a;i++)if((r=t[i].element)[0].selected){if(e=r.val(),q&&(c[q]=e),T)for(u=0;u<l.length&&(c[C]=l[u],T(_,c)!=e);u++);else c[C]=l[e];n.push(P(_,c))}}else if("?"==(e=S.val()))n=tt;else if(""===e)n=null;else if(T){for(u=0;u<l.length;u++)if(c[C]=l[u],T(_,c)==e){n=P(_,c);break}}else c[C]=l[e],q&&(c[q]=e),n=P(_,c);E.$setViewValue(n),f()})}),E.$render=f,_.$watchCollection(j,f),_.$watchCollection(function(){var t={},e=j(_);if(e){for(var n=new Array(e.length),r=0,i=e.length;r<i;r++)t[C]=e[r],n[r]=k(_,t);return n}},f),D&&_.$watchCollection(function(){return E.$modelValue},f);function f(){var t,e,n,r,i,o,a,s,u,l,c,f,d,h,p,v={"":[]},m=[""],g=E.$modelValue,$=j(_)||[],y=q?F($):$,w={},b=function(){var t=!1;if(D){var e=E.$modelValue;if(T&&at(e)){t=new te([]);for(var n={},r=0;r<e.length;r++)n[C]=e[r],t.put(T(_,n),e[r])}else t=new te(e)}return t}();for(c=0;u=y.length,c<u;c++){if(a=c,q){if("$"===(a=y[c]).charAt(0))continue;w[q]=a}if(w[C]=$[a],t=A(_,w)||"",(e=v[t])||(e=v[t]=[],m.push(t)),D)f=U(b.remove(T?T(_,w):P(_,w)));else{if(T){var x={};x[C]=g,f=T(_,x)===T(_,w)}else f=g===P(_,w);b=b||f}p=U(p=k(_,w))?p:"",e.push({id:T?T(_,w):q?y[c]:c,label:p,selected:f})}for(D||(R||null===g?v[""].unshift({id:"",label:"",selected:!b}):b||v[""].unshift({id:"?",label:"",selected:!0})),l=0,s=m.length;l<s;l++){for(t=m[l],e=v[t],M.length<=l?(r={element:I.clone().attr("label",t),label:e.label},i=[r],M.push(i),S.append(r.element)):(i=M[l],(r=i[0]).label!=t&&r.element.attr("label",r.label=t)),d=null,c=0,u=e.length;c<u;c++)n=e[c],(o=i[c+1])?(d=o.element,o.label!==n.label&&(d.text(o.label=n.label),d.prop("label",o.label)),o.id!==n.id&&d.val(o.id=n.id),d[0].selected!==n.selected&&(d.prop("selected",o.selected=n.selected),et&&d.prop("selected",o.selected))):(""===n.id&&R?h=R:(h=N.clone()).val(n.id).prop("selected",n.selected).attr("selected",n.selected).prop("label",n.label).text(n.label),i.push(o={element:h,label:n.label,id:n.id,selected:n.selected}),O.addOption(n.label,h),d?d.after(h):r.element.append(h),d=h);for(c++;i.length>c;)n=i.pop(),O.removeOption(n.label),n.element.remove()}for(;M.length>l;)M.pop()[0].element.remove()}}(t,e,h):D?(l=t,c=e,(f=h).$render=function(){var e=new te(f.$viewValue);rt(c.find("option"),function(t){t.selected=U(e.get(t.value))})},l.$watch(function(){ct(d,f.$viewValue)||(d=lt(f.$viewValue),f.$render())}),c.on("change",function(){l.$apply(function(){var e=[];rt(c.find("option"),function(t){t.selected&&e.push(t.value)}),f.$setViewValue(e)})})):(o=t,a=e,u=O,(s=h).$render=function(){var t=s.$viewValue;u.hasOption(t)?(v.parent()&&v.remove(),a.val(t),""===t&&i.prop("selected",!0)):q(t)&&i?a.val(""):u.renderUnknownOption(t)},a.on("change",function(){o.$apply(function(){v.parent()&&v.remove(),s.$setViewValue(a.val())})}))}}}}],ti=["$interpolate",function(n){var s={addOption:C,removeOption:C};return{restrict:"E",priority:100,compile:function(t,e){if(q(e.value)){var a=n(t.text(),!0);a||e.$set("value",t.text())}return function(t,e,n){var r="$selectController",i=e.parent(),o=i.data(r)||i.parent().data(r);o&&o.databound?e.prop("selected",!1):o=s,a?t.$watch(a,function(t,e){n.$set("value",t),t!==e&&o.removeOption(e),o.addOption(t)}):o.addOption(n.value),e.on("$destroy",function(){o.removeOption(n.value)})}}}}],ei=w({restrict:"E",terminal:!0});v.angular.bootstrap?console.log("WARNING: Tried to load angular more than once."):((p=v.jQuery)&&p.fn.on?(O((nt=p).fn,{scope:Yt.scope,isolateScope:Yt.isolateScope,controller:Yt.controller,injector:Yt.injector,inheritedData:Yt.inheritedData}),Ct("remove",!0,!0,!1),Ct("empty",!1,!1,!1),Ct("html",!1,!1,!0)):nt=Dt,d.element=nt,function(t){O(t,{bootstrap:X,copy:L,extend:O,equals:ct,element:nt,forEach:rt,injector:se,noop:C,bind:z,toJson:W,fromJson:a,identity:y,isUndefined:q,isDefined:U,isString:ot,isFunction:st,isObject:it,isNumber:b,isElement:e,isArray:at,version:$t,isDate:A,lowercase:E,uppercase:l,callbacks:{counter:0},$$minErr:_,$$csp:V}),h=function(t){var u=_("$injector"),n=_("ng");function e(t,e,n){return t[e]||(t[e]=n())}var r=e(t,"angular",Object);return r.$$minErr=r.$$minErr||_,e(r,"module",function(){var t={};return function(o,a,s){return function(t,e){if("hasOwnProperty"===t)throw n("badname","hasOwnProperty is not a valid {0} name",e)}(o,"module"),a&&t.hasOwnProperty(o)&&(t[o]=null),e(t,o,function(){if(!a)throw u("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",o);var r=[],e=[],t=n("$injector","invoke"),i={_invokeQueue:r,_runBlocks:e,requires:a,name:o,provider:n("$provide","provider"),factory:n("$provide","factory"),service:n("$provide","service"),value:n("$provide","value"),constant:n("$provide","constant","unshift"),animation:n("$animateProvider","register"),filter:n("$filterProvider","register"),controller:n("$controllerProvider","register"),directive:n("$compileProvider","directive"),config:t,run:function(t){return e.push(t),this}};return s&&t(s),i;function n(t,e,n){return function(){return r[n||"push"]([t,e,arguments]),i}}})}})}(v);try{h("ngLocale")}catch(t){h("ngLocale",[]).provider("$locale",Oe)}h("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:wn}),t.provider("$compile",ge).directive({a:Kn,input:hr,textarea:hr,form:rr,script:Xr,select:Zr,style:ei,option:ti,ngBind:Er,ngBindHtml:Cr,ngBindTemplate:kr,ngClass:Ar,ngClassEven:jr,ngClassOdd:Pr,ngCloak:Tr,ngController:Mr,ngForm:ir,ngHide:zr,ngIf:Rr,ngInclude:Nr,ngInit:Fr,ngNonBindable:Ur,ngPluralize:Lr,ngRepeat:Vr,ngShow:Br,ngStyle:Wr,ngSwitch:Hr,ngSwitchWhen:Gr,ngSwitchDefault:Qr,ngOptions:Kr,ngTransclude:Yr,ngModel:yr,ngList:xr,ngChange:wr,required:br,ngRequired:br,ngValue:Sr}).directive({ngInclude:Ir}).directive(Zn).directive(Or),t.provider({$anchorScroll:ue,$animate:ce,$browser:he,$cacheFactory:pe,$controller:be,$document:xe,$exceptionHandler:_e,$filter:Mn,$interpolate:Te,$interval:Me,$http:qe,$httpBackend:Pe,$location:Ye,$log:Xe,$parse:mn,$rootScope:yn,$q:gn,$sce:En,$sceDelegate:Sn,$sniffer:kn,$templateCache:ve,$timeout:Cn,$window:Tn,$$rAF:$n,$$asyncCallback:fe})}])}(d),nt(Z).ready(function(){!function(e,t){var r,i,n=[e],o=["ng:app","ng-app","x-ng-app","data-ng-app"],a=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;function s(t){t&&n.push(t)}rt(o,function(t){o[t]=!0,s(Z.getElementById(t)),t=t.replace(":","\\:"),e.querySelectorAll&&(rt(e.querySelectorAll("."+t),s),rt(e.querySelectorAll("."+t+"\\:"),s),rt(e.querySelectorAll("["+t+"]"),s))}),rt(n,function(e){if(!r){var t=" "+e.className+" ",n=a.exec(t);n?(r=e,i=(n[2]||"").replace(/\s+/g,",")):rt(e.attributes,function(t){!r&&o[t.name]&&(r=e,i=t.value)})}}),r&&t(r,i?[i]:[])}(Z,X)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\\:form{display:block;}.ng-animate-block-transitions{transition:0s all!important;-webkit-transition:0s all!important;}.ng-hide-add-active,.ng-hide-remove{display:block!important;}</style>');var commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(t,e){return t(e={exports:{}},e.exports),e.exports}var lodash=createCommonjsModule(function($,y){
/**
 * @license
 * lodash 3.10.1 (Custom Build) <https://lodash.com/>
 * Build: `lodash modern -d -o ./index.js`
 * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <https://lodash.com/license>
 */
(function(){var pi,t,e,vi="3.10.1",mi=1,gi=2,$i=4,yi=8,wi=16,bi=32,xi=64,_i=128,Si=256,Ei=30,ki="...",Ci=150,qi=16,Ai=200,Pi=1,ji=2,Ti="Expected a function",Mi="__lodash_placeholder__",Oi="[object Arguments]",Di="[object Array]",Ri="[object Boolean]",Ni="[object Date]",Ii="[object Error]",Fi="[object Function]",n="[object Map]",Ui="[object Number]",Li="[object Object]",Vi="[object RegExp]",r="[object Set]",Bi="[object String]",i="[object WeakMap]",zi="[object ArrayBuffer]",Wi="[object Float32Array]",Hi="[object Float64Array]",Gi="[object Int8Array]",Qi="[object Int16Array]",Yi="[object Int32Array]",Xi="[object Uint8Array]",Ji="[object Uint8ClampedArray]",Ki="[object Uint16Array]",Zi="[object Uint32Array]",to=/\b__p \+= '';/g,eo=/\b(__p \+=) '' \+/g,no=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ro=/&(?:amp|lt|gt|quot|#39|#96);/g,io=/[&<>"'`]/g,oo=RegExp(ro.source),ao=RegExp(io.source),so=/<%-([\s\S]+?)%>/g,uo=/<%([\s\S]+?)%>/g,lo=/<%=([\s\S]+?)%>/g,co=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,fo=/^\w*$/,ho=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,po=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,vo=RegExp(po.source),mo=/[\u0300-\u036f\ufe20-\ufe23]/g,go=/\\(\\)?/g,$o=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,yo=/\w*$/,wo=/^0[xX]/,bo=/^\[object .+?Constructor\]$/,xo=/^\d+$/,_o=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,So=/($^)/,Eo=/['\n\r\u2028\u2029\\]/g,ko=(t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",e="[a-z\\xdf-\\xf6\\xf8-\\xff]+",RegExp(t+"+(?="+t+e+")|"+t+"?"+e+"|"+t+"+|[0-9]+","g")),Co=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],qo=-1,Ao={};Ao[Wi]=Ao[Hi]=Ao[Gi]=Ao[Qi]=Ao[Yi]=Ao[Xi]=Ao[Ji]=Ao[Ki]=Ao[Zi]=!0,Ao[Oi]=Ao[Di]=Ao[zi]=Ao[Ri]=Ao[Ni]=Ao[Ii]=Ao[Fi]=Ao[n]=Ao[Ui]=Ao[Li]=Ao[Vi]=Ao[r]=Ao[Bi]=Ao[i]=!1;var Po={};Po[Oi]=Po[Di]=Po[zi]=Po[Ri]=Po[Ni]=Po[Wi]=Po[Hi]=Po[Gi]=Po[Qi]=Po[Yi]=Po[Ui]=Po[Li]=Po[Vi]=Po[Bi]=Po[Xi]=Po[Ji]=Po[Ki]=Po[Zi]=!0,Po[Ii]=Po[Fi]=Po[n]=Po[r]=Po[i]=!1;var o={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},s={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},u={function:!0,object:!0},l={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},c={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},f=u.object&&y&&!y.nodeType&&y,d=u.object&&$&&!$.nodeType&&$,h=f&&d&&"object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object&&commonjsGlobal,p=u[typeof self]&&self&&self.Object&&self,v=u[typeof window]&&window&&window.Object&&window,m=d&&d.exports===f&&f,jo=h||v!==(this&&this.window)&&v||p||this;function To(t,e){if(t!==e){var n=null===t,r=t===pi,i=t==t,o=null===e,a=e===pi,s=e==e;if(e<t&&!o||!i||n&&!a&&s||r&&s)return 1;if(t<e&&!n||!s||o&&!r&&i||a&&i)return-1}return 0}function Mo(t,e,n){for(var r=t.length,i=n?r:-1;n?i--:++i<r;)if(e(t[i],i,t))return i;return-1}function Oo(t,e,n){if(e!=e)return zo(t,n);for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function Do(t){return"function"==typeof t||!1}function Ro(t){return null==t?"":t+""}function No(t,e){for(var n=-1,r=t.length;++n<r&&-1<e.indexOf(t.charAt(n)););return n}function Io(t,e){for(var n=t.length;n--&&-1<e.indexOf(t.charAt(n)););return n}function Fo(t,e){return To(t.criteria,e.criteria)||t.index-e.index}function Uo(t){return o[t]}function Lo(t){return a[t]}function Vo(t,e,n){return e?t=l[t]:n&&(t=c[t]),"\\"+t}function Bo(t){return"\\"+c[t]}function zo(t,e,n){for(var r=t.length,i=e+(n?0:-1);n?i--:++i<r;){var o=t[i];if(o!=o)return i}return-1}function Wo(t){return!!t&&"object"==typeof t}function g(t){return t<=160&&9<=t&&t<=13||32==t||160==t||5760==t||6158==t||8192<=t&&(t<=8202||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function Ho(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n<r;)t[n]===e&&(t[n]=Mi,o[++i]=n);return o}function Go(t){for(var e=-1,n=t.length;++e<n&&g(t.charCodeAt(e)););return e}function Qo(t){for(var e=t.length;e--&&g(t.charCodeAt(e)););return e}function Yo(t){return s[t]}var Xo=function t(e){var A=(e=e?Xo.defaults(jo.Object(),e,Xo.pick(jo,Co)):jo).Array,n=e.Date,r=e.Error,m=e.Function,i=e.Math,o=e.Number,g=e.Object,$=e.RegExp,a=e.String,y=e.TypeError,s=A.prototype,u=g.prototype,l=a.prototype,c=m.prototype.toString,w=u.hasOwnProperty,f=0,b=u.toString,d=jo._,h=$("^"+c.call(w).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),p=e.ArrayBuffer,x=e.clearTimeout,v=e.parseFloat,_=i.pow,S=u.propertyIsEnumerable,E=De(e,"Set"),k=e.setTimeout,C=s.splice,q=e.Uint8Array,P=De(e,"WeakMap"),j=i.ceil,T=De(g,"create"),M=i.floor,O=De(A,"isArray"),D=e.isFinite,R=De(g,"keys"),N=i.max,I=i.min,F=De(n,"now"),U=e.parseInt,L=i.random,V=o.NEGATIVE_INFINITY,B=o.POSITIVE_INFINITY,z=4294967295,W=z-1,H=z>>>1,G=9007199254740991,Q=P&&new P,Y={};function X(t){if(Wo(t)&&!cr(t)&&!(t instanceof Z)){if(t instanceof K)return t;if(w.call(t,"__chain__")&&w.call(t,"__wrapped__"))return Ze(t)}return new K(t)}function J(){}function K(t,e,n){this.__wrapped__=t,this.__actions__=n||[],this.__chain__=!!e}X.support={};function Z(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=B,this.__views__=[]}function tt(){this.__data__={}}function et(t){var e=t?t.length:0;for(this.data={hash:T(null),set:new E};e--;)this.push(t[e])}function nt(t,e){var n=t.data;return("string"==typeof e||pr(e)?n.set.has(e):n.hash[e])?0:-1}function rt(t,e){var n=-1,r=t.length;for(e||(e=A(r));++n<r;)e[n]=t[n];return e}function it(t,e){for(var n=-1,r=t.length;++n<r&&!1!==e(t[n],n,t););return t}function ot(t,e){for(var n=-1,r=t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function at(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[++i]=a)}return o}function st(t,e){for(var n=-1,r=t.length,i=A(r);++n<r;)i[n]=e(t[n],n,t);return i}function ut(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function lt(t,e,n,r){var i=-1,o=t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function ct(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function ft(t,e,n,r){return t!==pi&&w.call(r,n)?t:e}function dt(t,e,n){for(var r=-1,i=Dr(e),o=i.length;++r<o;){var a=i[r],s=t[a],u=n(s,e[a],a,t,e);(u==u?u===s:s!=s)&&(s!==pi||a in t)||(t[a]=u)}return t}function ht(t,e){return null==e?t:vt(e,Dr(e),t)}function pt(t,e){for(var n=-1,r=null==t,i=!r&&Ne(t),o=i?t.length:0,a=e.length,s=A(a);++n<a;){var u=e[n];s[n]=i?Ie(u,o)?t[u]:pi:r?pi:t[u]}return s}function vt(t,e,n){n||(n={});for(var r=-1,i=e.length;++r<i;){var o=e[r];n[o]=t[o]}return n}function mt(t,e,n){var r=typeof t;return"function"==r?e===pi?t:Zt(t,e,n):null==t?ei:"object"==r?Nt(t):e===pi?si(t):It(t,e)}function gt(n,r,i,t,e,o,a){var s;if(i&&(s=e?i(n,t,e):i(n)),s!==pi)return s;if(!pr(n))return n;var u,l,c,f,d=cr(n);if(d){if(c=(l=n).length,f=new l.constructor(c),c&&"string"==typeof l[0]&&w.call(l,"index")&&(f.index=l.index,f.input=l.input),s=f,!r)return rt(n,s)}else{var h=b.call(n),p=h==Fi;if(h!=Li&&h!=Oi&&(!p||e))return Po[h]?function(t,e,n){var r=t.constructor;switch(e){case zi:return te(t);case Ri:case Ni:return new r(+t);case Wi:case Hi:case Gi:case Qi:case Yi:case Xi:case Ji:case Ki:case Zi:var i=t.buffer;return new r(n?te(i):i,t.byteOffset,t.length);case Ui:case Bi:return new r(t);case Vi:var o=new r(t.source,yo.exec(t));o.lastIndex=t.lastIndex}return o}(n,h,r):e?n:{};if("function"==typeof(u=(p?{}:n).constructor)&&u instanceof u||(u=g),s=new u,!r)return ht(s,n)}o||(o=[]),a||(a=[]);for(var v=o.length;v--;)if(o[v]==n)return a[v];return o.push(n),a.push(s),(d?it:Pt)(n,function(t,e){s[e]=gt(t,r,i,e,n,o,a)}),s}X.templateSettings={escape:so,evaluate:uo,interpolate:lo,variable:"",imports:{_:X}};var $t=function(){function n(){}return function(t){if(pr(t)){n.prototype=t;var e=new n;n.prototype=pi}return e||{}}}();function yt(t,e,n){if("function"!=typeof t)throw new y(Ti);return k(function(){t.apply(pi,n)},e)}function wt(t,e){var n=t?t.length:0,r=[];if(!n)return r;var i=-1,o=Te(),a=o==Oo,s=a&&e.length>=Ai?se(e):null,u=e.length;s&&(o=nt,a=!1,e=s);t:for(;++i<n;){var l=t[i];if(a&&l==l){for(var c=u;c--;)if(e[c]===l)continue t;r.push(l)}else o(e,l,0)<0&&r.push(l)}return r}var bt=oe(Pt),xt=oe(jt,!0);function _t(t,r){var i=!0;return bt(t,function(t,e,n){return i=!!r(t,e,n)}),i}function St(t,r){var i=[];return bt(t,function(t,e,n){r(t,e,n)&&i.push(t)}),i}function Et(t,r,e,i){var o;return e(t,function(t,e,n){if(r(t,e,n))return o=i?e:t,!1}),o}function kt(t,e,n,r){r||(r=[]);for(var i=-1,o=t.length;++i<o;){var a=t[i];Wo(a)&&Ne(a)&&(n||cr(a)||lr(a))?e?kt(a,e,n,r):ut(r,a):n||(r[r.length]=a)}return r}var Ct=ae(),qt=ae(!0);function At(t,e){return Ct(t,e,Rr)}function Pt(t,e){return Ct(t,e,Dr)}function jt(t,e){return qt(t,e,Dr)}function Tt(t,e){for(var n=-1,r=e.length,i=-1,o=[];++n<r;){var a=e[n];hr(t[a])&&(o[++i]=a)}return o}function Mt(t,e,n){if(null!=t){n!==pi&&n in Je(t)&&(e=[n]);for(var r=0,i=e.length;null!=t&&r<i;)t=t[e[r++]];return r&&r==i?t:pi}}function Ot(t,e,n,r,i,o){return t===e||(null==t||null==e||!pr(t)&&!Wo(e)?t!=t&&e!=e:function(t,e,n,r,i,o,a){var s=cr(t),u=cr(e),l=Di,c=Di;s||((l=b.call(t))==Oi?l=Li:l!=Li&&(s=wr(t))),u||((c=b.call(e))==Oi?c=Li:c!=Li&&(u=wr(e)));var f=l==Li,d=c==Li,h=l==c;if(h&&!s&&!f)return function(t,e,n){switch(n){case Ri:case Ni:return+t==+e;case Ii:return t.name==e.name&&t.message==e.message;case Ui:return t!=+t?e!=+e:t==+e;case Vi:case Bi:return t==e+""}return!1}(t,e,l);if(!i){var p=f&&w.call(t,"__wrapped__"),v=d&&w.call(e,"__wrapped__");if(p||v)return n(p?t.value():t,v?e.value():e,r,i,o,a)}if(!h)return!1;o||(o=[]),a||(a=[]);for(var m=o.length;m--;)if(o[m]==t)return a[m]==e;o.push(t),a.push(e);var g=(s?function(t,e,n,r,i,o,a){var s=-1,u=t.length,l=e.length;if(u!=l&&!(i&&u<l))return!1;for(;++s<u;){var c=t[s],f=e[s],d=r?r(i?f:c,i?c:f,s):pi;if(d!==pi){if(d)continue;return!1}if(i){if(!ct(e,function(t){return c===t||n(c,t,r,i,o,a)}))return!1}else if(c!==f&&!n(c,f,r,i,o,a))return!1}return!0}:function(t,e,n,r,i,o,a){var s=Dr(t),u=s.length,l=Dr(e).length;if(u!=l&&!i)return!1;for(var c=u;c--;){var f=s[c];if(!(i?f in e:w.call(e,f)))return!1}for(var d=i;++c<u;){f=s[c];var h=t[f],p=e[f],v=r?r(i?p:h,i?h:p,f):pi;if(!(v===pi?n(h,p,r,i,o,a):v))return!1;d||(d="constructor"==f)}if(!d){var m=t.constructor,g=e.constructor;if(m!=g&&"constructor"in t&&"constructor"in e&&!("function"==typeof m&&m instanceof m&&"function"==typeof g&&g instanceof g))return!1}return!0})(t,e,n,r,i,o,a);return o.pop(),a.pop(),g}(t,e,Ot,n,r,i,o))}function Dt(t,e,n){var r=e.length,i=r,o=!n;if(null==t)return!i;for(t=Je(t);r--;){var a=e[r];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++r<i;){var s=(a=e[r])[0],u=t[s],l=a[1];if(o&&a[2]){if(u===pi&&!(s in t))return!1}else{var c=n?n(u,l,s):pi;if(!(c===pi?Ot(l,u,n,!0):c))return!1}}return!0}function Rt(t,r){var i=-1,o=Ne(t)?A(t.length):[];return bt(t,function(t,e,n){o[++i]=r(t,e,n)}),o}function Nt(t){var e=Oe(t);if(1==e.length&&e[0][2]){var n=e[0][0],r=e[0][1];return function(t){return null!=t&&t[n]===r&&(r!==pi||n in Je(t))}}return function(t){return Dt(t,e)}}function It(n,r){var i=cr(n),o=Ue(n)&&Be(r),a=n+"";return n=Ke(n),function(t){if(null==t)return!1;var e=a;if(t=Je(t),(i||!o)&&!(e in t)){if(null==(t=1==n.length?t:Mt(t,Bt(n,0,-1))))return!1;e=ln(n),t=Je(t)}return t[e]===r?r!==pi||e in t:Ot(r,t[e],pi,!0)}}function Ft(e){return function(t){return null==t?pi:t[e]}}function Ut(t,e){for(var n=t?e.length:0;n--;){var r=e[n];if(r!=i&&Ie(r)){var i=r;C.call(t,r,1)}}return t}function Lt(t,e){return t+M(L()*(e-t+1))}var Vt=Q?function(t,e){return Q.set(t,e),t}:ei;function Bt(t,e,n){var r=-1,i=t.length;(e=null==e?0:+e||0)<0&&(e=i<-e?0:i+e),(n=n===pi||i<n?i:+n||0)<0&&(n+=i),i=n<e?0:n-e>>>0,e>>>=0;for(var o=A(i);++r<i;)o[r]=t[r+e];return o}function zt(t,r){var i;return bt(t,function(t,e,n){return!(i=r(t,e,n))}),!!i}function Wt(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function Ht(t,n,r){var e=Ae(),i=-1;return n=st(n,function(t){return e(t)}),Wt(Rt(t,function(e){return{criteria:st(n,function(t){return t(e)}),index:++i,value:e}}),function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var u=To(i[r],o[r]);if(u){if(s<=r)return u;var l=n[r];return u*("asc"===l||!0===l?1:-1)}}return t.index-e.index}(t,e,r)})}function Gt(t,e){var n=-1,r=Te(),i=t.length,o=r==Oo,a=o&&Ai<=i,s=a?se():null,u=[];s?(r=nt,o=!1):(a=!1,s=e?[]:u);t:for(;++n<i;){var l=t[n],c=e?e(l,n,t):l;if(o&&l==l){for(var f=s.length;f--;)if(s[f]===c)continue t;e&&s.push(c),u.push(l)}else r(s,c,0)<0&&((e||a)&&s.push(c),u.push(l))}return u}function Qt(t,e){for(var n=-1,r=e.length,i=A(r);++n<r;)i[n]=t[e[n]];return i}function Yt(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?Bt(t,r?0:o,r?o+1:i):Bt(t,r?o+1:0,r?i:o)}function Xt(t,e){var n=t;n instanceof Z&&(n=n.value());for(var r=-1,i=e.length;++r<i;){var o=e[r];n=o.func.apply(o.thisArg,ut([n],o.args))}return n}function Jt(t,e,n){var r=0,i=t?t.length:r;if("number"==typeof e&&e==e&&i<=H){for(;r<i;){var o=r+i>>>1,a=t[o];(n?a<=e:a<e)&&null!==a?r=o+1:i=o}return i}return Kt(t,e,ei,n)}function Kt(t,e,n,r){e=n(e);for(var i=0,o=t?t.length:0,a=e!=e,s=null===e,u=e===pi;i<o;){var l=M((i+o)/2),c=n(t[l]),f=c!==pi,d=c==c;if(a)var h=d||r;else h=s?d&&f&&(r||null!=c):u?d&&(r||f):null!=c&&(r?c<=e:c<e);h?i=l+1:o=l}return I(o,W)}function Zt(o,a,t){if("function"!=typeof o)return ei;if(a===pi)return o;switch(t){case 1:return function(t){return o.call(a,t)};case 3:return function(t,e,n){return o.call(a,t,e,n)};case 4:return function(t,e,n,r){return o.call(a,t,e,n,r)};case 5:return function(t,e,n,r,i){return o.call(a,t,e,n,r,i)}}return function(){return o.apply(a,arguments)}}function te(t){var e=new p(t.byteLength);return new q(e).set(new q(t)),e}function ee(t,e,n){for(var r=n.length,i=-1,o=N(t.length-r,0),a=-1,s=e.length,u=A(s+o);++a<s;)u[a]=e[a];for(;++i<r;)u[n[i]]=t[i];for(;o--;)u[a++]=t[i++];return u}function ne(t,e,n){for(var r=-1,i=n.length,o=-1,a=N(t.length-i,0),s=-1,u=e.length,l=A(a+u);++o<a;)l[o]=t[o];for(var c=o;++s<u;)l[c+s]=e[s];for(;++r<i;)l[c+n[r]]=t[o++];return l}function re(s,u){return function(t,r,e){var i=u?u():{};if(r=Ae(r,e,3),cr(t))for(var n=-1,o=t.length;++n<o;){var a=t[n];s(i,a,r(a,n,t),t)}else bt(t,function(t,e,n){s(i,t,r(t,e,n),n)});return i}}function ie(u){return sr(function(t,e){var n=-1,r=null==t?0:e.length,i=2<r?e[r-2]:pi,o=2<r?e[2]:pi,a=1<r?e[r-1]:pi;for("function"==typeof i?(i=Zt(i,a,5),r-=2):r-=(i="function"==typeof a?a:pi)?1:0,o&&Fe(e[0],e[1],o)&&(i=r<3?pi:i,r=1);++n<r;){var s=e[n];s&&u(t,s,i)}return t})}function oe(o,a){return function(t,e){var n=t?Me(t):0;if(!Ve(n))return o(t,e);for(var r=a?n:-1,i=Je(t);(a?r--:++r<n)&&!1!==e(i[r],r,i););return t}}function ae(u){return function(t,e,n){for(var r=Je(t),i=n(t),o=i.length,a=u?o:-1;u?a--:++a<o;){var s=i[a];if(!1===e(r[s],s,r))break}return t}}function se(t){return T&&E?new et(t):null}function ue(o){return function(t){for(var e=-1,n=Kr(zr(t)),r=n.length,i="";++e<r;)i=o(i,n[e],e);return i}}function le(r){return function(){var t=arguments;switch(t.length){case 0:return new r;case 1:return new r(t[0]);case 2:return new r(t[0],t[1]);case 3:return new r(t[0],t[1],t[2]);case 4:return new r(t[0],t[1],t[2],t[3]);case 5:return new r(t[0],t[1],t[2],t[3],t[4]);case 6:return new r(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new r(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var e=$t(r.prototype),n=r.apply(e,t);return pr(n)?n:e}}function ce(o){return function t(e,n,r){r&&Fe(e,n,r)&&(n=pi);var i=qe(e,o,pi,pi,pi,pi,pi,n);return i.placeholder=t.placeholder,i}}function fe(n,r){return sr(function(t){var e=t[0];return null==e?e:(t.push(r),n.apply(pi,t))})}function de(l,c){return function(t,e,n){if(n&&Fe(t,e,n)&&(e=pi),1==(e=Ae(e,n,3)).length){var r=function(t,e,n,r){for(var i=-1,o=t.length,a=r,s=a;++i<o;){var u=t[i],l=+e(u);n(l,a)&&(a=l,s=u)}return s}(t=cr(t)?t:Xe(t),e,l,c);if(!t.length||r!==c)return r}return i=e,o=l,u=s=a=c,bt(t,function(t,e,n){var r=+i(t,e,n);(o(r,s)||r===a&&r===u)&&(s=r,u=t)}),u;var i,o,a,s,u}}function he(i,o){return function(t,e,n){if(e=Ae(e,n,3),cr(t)){var r=Mo(t,e,o);return-1<r?t[r]:pi}return Et(t,e,i)}}function pe(r){return function(t,e,n){return t&&t.length?Mo(t,e=Ae(e,n,3),r):-1}}function ve(r){return function(t,e,n){return Et(t,e=Ae(e,n,3),r,!0)}}function me(u){return function(){for(var i,o=arguments.length,t=u?o:-1,e=0,a=A(o);u?t--:++t<o;){var n=a[e++]=arguments[t];if("function"!=typeof n)throw new y(Ti);!i&&K.prototype.thru&&"wrapper"==je(n)&&(i=new K([],!0))}for(t=i?-1:o;++t<o;){var r=je(n=a[t]),s="wrapper"==r?Pe(n):pi;i=s&&Le(s[0])&&s[1]==(_i|yi|bi|Si)&&!s[4].length&&1==s[9]?i[je(s[0])].apply(i,s[3]):1==n.length&&Le(n)?i[r]():i.thru(n)}return function(){var t=arguments,e=t[0];if(i&&1==t.length&&cr(e)&&e.length>=Ai)return i.plant(e).value();for(var n=0,r=o?a[n].apply(this,t):e;++n<o;)r=a[n].call(this,r);return r}}}function ge(r,i){return function(t,e,n){return"function"==typeof e&&n===pi&&cr(t)?r(t,e):i(t,Zt(e,n,3))}}function $e(r){return function(t,e,n){return"function"==typeof e&&n===pi||(e=Zt(e,n,3)),r(t,e,Rr)}}function ye(r){return function(t,e,n){return"function"==typeof e&&n===pi||(e=Zt(e,n,3)),r(t,e)}}function we(a){return function(t,i,e){var o={};return i=Ae(i,e,3),Pt(t,function(t,e,n){var r=i(t,e,n);t=a?t:r,o[e=a?r:e]=t}),o}}function be(r){return function(t,e,n){return t=Ro(t),(r?t:"")+Ee(t,e,n)+(r?"":t)}}function xe(r){var i=sr(function(t,e){var n=Ho(e,i.placeholder);return qe(t,r,pi,e,n)});return i}function _e(l,c){return function(t,e,n,r){var i,o,a,s,u=arguments.length<3;return"function"==typeof e&&r===pi&&cr(t)?l(t,e,n,u):(i=t,o=Ae(e,r,4),a=n,s=u,c(i,function(t,e,n){a=s?(s=!1,t):o(a,t,e,n)}),a)}}function Se(d,h,p,v,m,g,$,y,w,b){var x=h&_i,_=h&mi,S=h&gi,E=h&yi,k=h&$i,C=h&wi,q=S?pi:le(d);return function t(){for(var e=arguments.length,n=e,r=A(e);n--;)r[n]=arguments[n];if(v&&(r=ee(r,v,m)),g&&(r=ne(r,g,$)),E||C){var i=t.placeholder,o=Ho(r,i);if((e-=o.length)<b){var a=y?rt(y):pi,s=N(b-e,0);h|=E?bi:xi,h&=~(E?xi:bi),k||(h&=~(mi|gi));var u=[d,h,p,E?r:pi,E?o:pi,E?pi:r,E?pi:o,a,w,s],l=Se.apply(pi,u);return Le(d)&&Qe(l,u),l.placeholder=i,l}}var c=_?p:this,f=S?c[d]:d;return y&&(r=function(t,e){for(var n=t.length,r=I(e.length,n),i=rt(t);r--;){var o=e[r];t[r]=Ie(o,n)?i[o]:pi}return t}(r,y)),x&&w<r.length&&(r.length=w),this&&this!==jo&&this instanceof t&&(f=q||le(d)),f.apply(c,r)}}function Ee(t,e,n){var r=t.length;if((e=+e)<=r||!D(e))return"";var i=e-r;return Qr(n=null==n?" ":n+"",j(i/n.length)).slice(0,i)}function ke(t){var n=i[t];return function(t,e){return(e=e===pi?0:+e||0)?(e=_(10,e),n(t*e)/e):n(t)}}function Ce(o){return function(t,e,n,r){var i=Ae(n);return null==n&&i===mt?Jt(t,e,o):Kt(t,e,i(n,r,1),o)}}function qe(t,e,n,r,i,o,a,s){var u=e&gi;if(!u&&"function"!=typeof t)throw new y(Ti);var l=r?r.length:0;if(l||(e&=~(bi|xi),r=i=pi),l-=i?i.length:0,e&xi){var c=r,f=i;r=i=pi}var d,h,p,v=u?pi:Pe(t),m=[t,e,n,r,i,c,f,o,a,s];if(v&&(function(t,e){var n=t[1],r=e[1],i=n|r,o=i<_i,a=r==_i&&n==yi||r==_i&&n==Si&&t[7].length<=e[8]||r==(_i|Si)&&n==yi;if(o||a){r&mi&&(t[2]=e[2],i|=n&mi?0:$i);var s=e[3];if(s){var u=t[3];t[3]=u?ee(u,s,e[4]):rt(s),t[4]=u?Ho(t[3],Mi):rt(e[4])}(s=e[5])&&(u=t[5],t[5]=u?ne(u,s,e[6]):rt(s),t[6]=u?Ho(t[5],Mi):rt(e[6])),(s=e[7])&&(t[7]=rt(s)),r&_i&&(t[8]=null==t[8]?e[8]:I(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}}(m,v),e=m[1],s=m[9]),m[9]=null==s?u?0:t.length:N(s-l,0)||0,e==mi)var g=(d=m[0],h=m[2],p=le(d),function t(){return(this&&this!==jo&&this instanceof t?p:d).apply(h,arguments)});else g=e!=bi&&e!=(mi|bi)||m[4].length?Se.apply(pi,m):function(a,t,s,u){var l=t&mi,c=le(a);return function t(){for(var e=-1,n=arguments.length,r=-1,i=u.length,o=A(i+n);++r<i;)o[r]=u[r];for(;n--;)o[r++]=arguments[++e];return(this&&this!==jo&&this instanceof t?c:a).apply(l?s:this,o)}}.apply(pi,m);return(v?Vt:Qe)(g,m)}function Ae(t,e,n){var r=X.callback||ti;return r=r===ti?mt:r,n?r(t,e,n):r}var Pe=Q?function(t){return Q.get(t)}:ai;function je(t){for(var e=t.name,n=Y[e],r=n?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function Te(t,e,n){var r=X.indexOf||sn;return r=r===sn?Oo:r,t?r(t,e,n):r}var Me=Ft("length");function Oe(t){for(var e=Ur(t),n=e.length;n--;)e[n][2]=Be(e[n][1]);return e}function De(t,e){var n=null==t?pi:t[e];return vr(n)?n:pi}function Re(t,e,n){null==t||Ue(e,t)||(t=1==(e=Ke(e)).length?t:Mt(t,Bt(e,0,-1)),e=ln(e));var r=null==t?t:t[e];return null==r?pi:r.apply(t,n)}function Ne(t){return null!=t&&Ve(Me(t))}function Ie(t,e){return t="number"==typeof t||xo.test(t)?+t:-1,e=null==e?G:e,-1<t&&t%1==0&&t<e}function Fe(t,e,n){if(!pr(n))return!1;var r=typeof e;if("number"==r?Ne(n)&&Ie(e,n.length):"string"==r&&e in n){var i=n[e];return t==t?t===i:i!=i}return!1}function Ue(t,e){var n=typeof t;return!!("string"==n&&fo.test(t)||"number"==n)||!cr(t)&&(!co.test(t)||null!=e&&t in Je(e))}function Le(t){var e=je(t);if(!(e in Z.prototype))return!1;var n=X[e];if(t===n)return!0;var r=Pe(n);return!!r&&t===r[0]}function Ve(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=G}function Be(t){return t==t&&!pr(t)}function ze(t,e){t=Je(t);for(var n=-1,r=e.length,i={};++n<r;){var o=e[n];o in t&&(i[o]=t[o])}return i}function We(t,r){var i={};return At(t,function(t,e,n){r(t,e,n)&&(i[e]=t)}),i}var He,Ge,Qe=(Ge=He=0,function(t,e){var n=zn(),r=qi-(n-Ge);if(Ge=n,0<r){if(++He>=Ci)return t}else He=0;return Vt(t,e)});function Ye(t){for(var e=Rr(t),n=e.length,r=n&&t.length,i=!!r&&Ve(r)&&(cr(t)||lr(t)),o=-1,a=[];++o<n;){var s=e[o];(i&&Ie(s,r)||w.call(t,s))&&a.push(s)}return a}function Xe(t){return null==t?[]:Ne(t)?pr(t)?t:g(t):Vr(t)}function Je(t){return pr(t)?t:g(t)}function Ke(t){if(cr(t))return t;var i=[];return Ro(t).replace(ho,function(t,e,n,r){i.push(n?r.replace(go,"$1"):e||t)}),i}function Ze(t){return t instanceof Z?t.clone():new K(t.__wrapped__,t.__chain__,rt(t.__actions__))}var tn=sr(function(t,e){return Wo(t)&&Ne(t)?wt(t,kt(e,!1,!0)):[]});function en(t,e,n){return t&&t.length?((n?Fe(t,e,n):null==e)&&(e=1),Bt(t,e<0?0:e)):[]}function nn(t,e,n){var r=t?t.length:0;return r?((n?Fe(t,e,n):null==e)&&(e=1),Bt(t,0,(e=r-(+e||0))<0?0:e)):[]}var rn=pe(),on=pe(!0);function an(t){return t?t[0]:pi}function sn(t,e,n){var r=t?t.length:0;if(!r)return-1;if("number"==typeof n)n=n<0?N(r+n,0):n;else if(n){var i=Jt(t,e);return i<r&&(e==e?e===t[i]:t[i]!=t[i])?i:-1}return Oo(t,e,n||0)}var un=sr(function(t){for(var e=t.length,n=e,r=A(c),i=Te(),o=i==Oo,a=[];n--;){var s=t[n]=Ne(s=t[n])?s:[];r[n]=o&&120<=s.length?se(n&&s):null}var u=t[0],l=-1,c=u?u.length:0,f=r[0];t:for(;++l<c;)if(s=u[l],(f?nt(f,s):i(a,s,0))<0){for(n=e;--n;){var d=r[n];if((d?nt(d,s):i(t[n],s,0))<0)continue t}f&&f.push(s),a.push(s)}return a});function ln(t){var e=t?t.length:0;return e?t[e-1]:pi}var cn=sr(function(t,e){var n=pt(t,e=kt(e));return Ut(t,e.sort(To)),n});function fn(t){return en(t,1)}var dn=Ce(),hn=Ce(!0);var pn=sr(function(t){return Gt(kt(t,!1,!0))});function vn(t,e,n,r){if(!t||!t.length)return[];null!=e&&"boolean"!=typeof e&&(n=Fe(t,e,r=n)?pi:e,e=!1);var i=Ae();return null==n&&i===mt||(n=i(n,r,3)),e&&Te()==Oo?function(t,e){for(var n,r=-1,i=t.length,o=-1,a=[];++r<i;){var s=t[r],u=e?e(s,r,t):s;r&&n===u||(n=u,a[++o]=s)}return a}(t,n):Gt(t,n)}function mn(t){if(!t||!t.length)return[];var e=-1,n=0;t=at(t,function(t){if(Ne(t))return n=N(t.length,n),!0});for(var r=A(n);++e<n;)r[e]=st(t,Ft(e));return r}function gn(t,e,n){if(!t||!t.length)return[];var r=mn(t);return null==e?r:(e=Zt(e,n,4),st(r,function(t){return lt(t,e,pi,!0)}))}var $n=sr(function(t,e){return Ne(t)?wt(t,e):[]});var yn=sr(mn);function wn(t,e){var n=-1,r=t?t.length:0,i={};for(!r||e||cr(t[0])||(e=[]);++n<r;){var o=t[n];e?i[o]=e[n]:o&&(i[o[0]]=o[1])}return i}var bn=sr(function(t){var e=t.length,n=2<e?t[e-2]:pi,r=1<e?t[e-1]:pi;return 2<e&&"function"==typeof n?e-=2:(n=1<e&&"function"==typeof r?(--e,r):pi,r=pi),t.length=e,gn(t,n,r)});function xn(t){var e=X(t);return e.__chain__=!0,e}function _n(t,e,n){return e.call(n,t)}var Sn=sr(function(e){return e=kt(e),this.thru(function(t){return function(t,e){for(var n=-1,r=t.length,i=-1,o=e.length,a=A(r+o);++n<r;)a[n]=t[n];for(;++i<o;)a[n++]=e[i];return a}(cr(t)?t:[Je(t)],e)})});var En=sr(function(t,e){return pt(t,kt(e))}),kn=re(function(t,e,n){w.call(t,n)?++t[n]:t[n]=1});function Cn(t,e,n){var r=cr(t)?ot:_t;return n&&Fe(t,e,n)&&(e=pi),"function"==typeof e&&n===pi||(e=Ae(e,n,3)),r(t,e)}function qn(t,e,n){return(cr(t)?at:St)(t,e=Ae(e,n,3))}var An=he(bt),Pn=he(xt,!0);var jn=ge(it,bt),Tn=ge(function(t,e){for(var n=t.length;n--&&!1!==e(t[n],n,t););return t},xt),Mn=re(function(t,e,n){w.call(t,n)?t[n].push(e):t[n]=[e]});function On(t,e,n,r){var i=t?Me(t):0;return Ve(i)||(i=(t=Vr(t)).length),n="number"!=typeof n||r&&Fe(e,n,r)?0:n<0?N(i+n,0):n||0,"string"==typeof t||!cr(t)&&yr(t)?n<=i&&-1<t.indexOf(e,n):!!i&&-1<Te(t,e,n)}var Dn=re(function(t,e,n){t[n]=e}),Rn=sr(function(t,n,r){var i=-1,o="function"==typeof n,a=Ue(n),s=Ne(t)?A(t.length):[];return bt(t,function(t){var e=o?n:a&&null!=t?t[n]:pi;s[++i]=e?e.apply(t,r):Re(t,n,r)}),s});function Nn(t,e,n){return(cr(t)?st:Rt)(t,e=Ae(e,n,3))}var In=re(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});var Fn=_e(lt,bt),Un=_e(function(t,e,n,r){var i=t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n},xt);function Ln(t,e,n){if(n?Fe(t,e,n):null==e)return 0<(r=(t=Xe(t)).length)?t[Lt(0,r-1)]:pi;var r,i=-1,o=xr(t),a=(r=o.length)-1;for(e=I(e<0?0:+e||0,r);++i<e;){var s=Lt(i,a),u=o[s];o[s]=o[i],o[i]=u}return o.length=e,o}function Vn(t,e,n){var r=cr(t)?ct:zt;return n&&Fe(t,e,n)&&(e=pi),"function"==typeof e&&n===pi||(e=Ae(e,n,3)),r(t,e)}var Bn=sr(function(t,e){if(null==t)return[];var n=e[2];return n&&Fe(e[0],e[1],n)&&(e.length=1),Ht(t,kt(e),[])});var zn=F||function(){return(new n).getTime()};function Wn(t,e){var n;if("function"!=typeof e){if("function"!=typeof t)throw new y(Ti);var r=t;t=e,e=r}return function(){return 0<--t&&(n=e.apply(this,arguments)),t<=1&&(e=pi),n}}var Hn=sr(function(t,e,n){var r=mi;if(n.length){var i=Ho(n,Hn.placeholder);r|=bi}return qe(t,r,e,n,i)}),Gn=sr(function(t,e){for(var n=-1,r=(e=e.length?kt(e):Or(t)).length;++n<r;){var i=e[n];t[i]=qe(t[i],mi,t)}return t}),Qn=sr(function(t,e,n){var r=mi|gi;if(n.length){var i=Ho(n,Qn.placeholder);r|=bi}return qe(e,r,t,n,i)}),Yn=ce(yi),Xn=ce(wi);function Jn(r,i,t){var o,a,s,u,l,c,f,d=0,h=!1,p=!0;if("function"!=typeof r)throw new y(Ti);if(i=i<0?0:+i||0,!0===t){var v=!0;p=!1}else pr(t)&&(v=!!t.leading,h="maxWait"in t&&N(+t.maxWait||0,i),p="trailing"in t?!!t.trailing:p);function e(t,e){e&&x(e),a=c=f=pi,t&&(d=zn(),s=r.apply(l,o),c||a||(o=l=pi))}function m(){var t=i-(zn()-u);t<=0||i<t?e(f,a):c=k(m,t)}function g(){e(p,c)}function n(){if(o=arguments,u=zn(),l=this,f=p&&(c||!v),!1===h)var t=v&&!c;else{a||v||(d=u);var e=h-(u-d),n=e<=0||h<e;n?(a&&(a=x(a)),d=u,s=r.apply(l,o)):a||(a=k(g,e))}return n&&c?c=x(c):c||i===h||(c=k(m,i)),t&&(n=!0,s=r.apply(l,o)),!n||c||a||(o=l=pi),s}return n.cancel=function(){c&&x(c),a&&x(a),d=0,a=c=f=pi},n}var Kn=sr(function(t,e){return yt(t,1,e)}),Zn=sr(function(t,e,n){return yt(t,e,n)}),tr=me(),er=me(!0);function nr(i,o){if("function"!=typeof i||o&&"function"!=typeof o)throw new y(Ti);var a=function(){var t=arguments,e=o?o.apply(this,t):t[0],n=a.cache;if(n.has(e))return n.get(e);var r=i.apply(this,t);return a.cache=n.set(e,r),r};return a.cache=new nr.Cache,a}var rr=sr(function(n,r){if(r=kt(r),"function"!=typeof n||!ot(r,Do))throw new y(Ti);var i=r.length;return sr(function(t){for(var e=I(t.length,i);e--;)t[e]=r[e](t[e]);return n.apply(this,t)})});var ir=xe(bi),or=xe(xi),ar=sr(function(t,e){return qe(t,Si,pi,pi,pi,kt(e))});function sr(o,a){if("function"!=typeof o)throw new y(Ti);return a=N(a===pi?o.length-1:+a||0,0),function(){for(var t=arguments,e=-1,n=N(t.length-a,0),r=A(n);++e<n;)r[e]=t[a+e];switch(a){case 0:return o.call(this,r);case 1:return o.call(this,t[0],r);case 2:return o.call(this,t[0],t[1],r)}var i=A(a+1);for(e=-1;++e<a;)i[e]=t[e];return i[a]=r,o.apply(this,i)}}function ur(t,e){return e<t}function lr(t){return Wo(t)&&Ne(t)&&w.call(t,"callee")&&!S.call(t,"callee")}var cr=O||function(t){return Wo(t)&&Ve(t.length)&&b.call(t)==Di};function fr(t,e,n,r){var i=(n="function"==typeof n?Zt(n,r,3):pi)?n(t,e):pi;return i===pi?Ot(t,e,n):!!i}function dr(t){return Wo(t)&&"string"==typeof t.message&&b.call(t)==Ii}function hr(t){return pr(t)&&b.call(t)==Fi}function pr(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function vr(t){return null!=t&&(hr(t)?h.test(c.call(t)):Wo(t)&&bo.test(t))}function mr(t){return"number"==typeof t||Wo(t)&&b.call(t)==Ui}function gr(t){var e,n;return!(!Wo(t)||b.call(t)!=Li||lr(t)||!(w.call(t,"constructor")||"function"!=typeof(e=t.constructor)||e instanceof e))&&(At(t,function(t,e){n=e}),n===pi||w.call(t,n))}function $r(t){return pr(t)&&b.call(t)==Vi}function yr(t){return"string"==typeof t||Wo(t)&&b.call(t)==Bi}function wr(t){return Wo(t)&&Ve(t.length)&&!!Ao[b.call(t)]}function br(t,e){return t<e}function xr(t){var e=t?Me(t):0;return Ve(e)?e?rt(t):[]:Vr(t)}function _r(t){return vt(t,Rr(t))}var Sr=ie(function o(a,s,u,l,c){if(!pr(a))return a;var f=Ne(s)&&(cr(s)||wr(s)),d=f?pi:Dr(s);return it(d||s,function(t,e){if(d&&(t=s[e=t]),Wo(t))l||(l=[]),c||(c=[]),function(t,e,n,r,i,o,a){for(var s=o.length,u=e[n];s--;)if(o[s]==u)return t[n]=a[s];var l=t[n],c=i?i(l,u,n,t,e):pi,f=c===pi;f&&(Ne(c=u)&&(cr(u)||wr(u))?c=cr(l)?l:Ne(l)?rt(l):[]:gr(u)||lr(u)?c=lr(l)?_r(l):gr(l)?l:{}:f=!1),o.push(u),a.push(c),f?t[n]=r(c,u,i,o,a):(c==c?c!==l:l==l)&&(t[n]=c)}(a,s,e,o,u,l,c);else{var n=a[e],r=u?u(n,t,e,a,s):pi,i=r===pi;i&&(r=t),r===pi&&(!f||e in a)||!i&&(r==r?r===n:n!=n)||(a[e]=r)}}),a}),Er=ie(function(t,e,n){return n?dt(t,e,n):ht(t,e)});var kr=fe(Er,function(t,e){return t===pi?e:t}),Cr=fe(Sr,function t(e,n){return e===pi?n:Sr(e,n,t)}),qr=ve(Pt),Ar=ve(jt),Pr=$e(Ct),jr=$e(qt),Tr=ye(Pt),Mr=ye(jt);function Or(t){return Tt(t,Rr(t))}var Dr=R?function(t){var e=null==t?pi:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&Ne(t)?Ye(t):pr(t)?R(t):[]}:Ye;function Rr(t){if(null==t)return[];pr(t)||(t=g(t));var e=t.length;e=e&&Ve(e)&&(cr(t)||lr(t))&&e||0;for(var n=t.constructor,r=-1,i="function"==typeof n&&n.prototype===t,o=A(e),a=0<e;++r<e;)o[r]=r+"";for(var s in t)a&&Ie(s,e)||"constructor"==s&&(i||!w.call(t,s))||o.push(s);return o}var Nr=we(!0),Ir=we(),Fr=sr(function(t,e){if(null==t)return{};if("function"!=typeof e[0])return e=st(kt(e),a),ze(t,wt(Rr(t),e));var r=Zt(e[0],e[1],3);return We(t,function(t,e,n){return!r(t,e,n)})});function Ur(t){t=Je(t);for(var e=-1,n=Dr(t),r=n.length,i=A(r);++e<r;){var o=n[e];i[e]=[o,t[o]]}return i}var Lr=sr(function(t,e){return null==t?{}:"function"==typeof e[0]?We(t,Zt(e[0],e[1],3)):ze(t,kt(e))});function Vr(t){return Qt(t,Dr(t))}var Br=ue(function(t,e,n){return e=e.toLowerCase(),t+(n?e.charAt(0).toUpperCase()+e.slice(1):e)});function zr(t){return(t=Ro(t))&&t.replace(_o,Uo).replace(mo,"")}var Wr=ue(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()});var Hr=be(),Gr=be(!0);function Qr(t,e){var n="";if(t=Ro(t),(e=+e)<1||!t||!D(e))return n;for(;e%2&&(n+=t),t+=t,e=M(e/2););return n}var Yr=ue(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Xr=ue(function(t,e,n){return t+(n?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))});function Jr(t,e,n){var r=t;return(t=Ro(t))?(n?Fe(r,e,n):null==e)?t.slice(Go(t),Qo(t)+1):(e+="",t.slice(No(t,e),Io(t,e)+1)):t}function Kr(t,e,n){return n&&Fe(t,e,n)&&(e=pi),(t=Ro(t)).match(e||ko)||[]}var Zr=sr(function(t,e){try{return t.apply(pi,e)}catch(t){return dr(t)?t:new r(t)}});function ti(t,e,n){return n&&Fe(t,e,n)&&(e=pi),Wo(t)?ni(t):mt(t,e)}function ei(t){return t}function ni(t){return Nt(gt(t,!0))}var ri=sr(function(e,n){return function(t){return Re(t,e,n)}}),ii=sr(function(e,n){return function(t){return Re(e,t,n)}});function oi(r,t,e){if(null==e){var n=pr(t),i=n?Dr(t):pi,o=i&&i.length?Tt(t,i):pi;(o?o.length:n)||(o=!1,e=t,t=r,r=this)}o||(o=Tt(t,Dr(t)));var a=!0,s=-1,u=hr(r),l=o.length;!1===e?a=!1:pr(e)&&"chain"in e&&(a=e.chain);for(;++s<l;){var c=o[s],f=t[c];r[c]=f,u&&(r.prototype[c]=function(n){return function(){var t=this.__chain__;if(a||t){var e=r(this.__wrapped__);return(e.__actions__=rt(this.__actions__)).push({func:n,args:arguments,thisArg:r}),e.__chain__=t,e}return n.apply(r,ut([this.value()],arguments))}}(f))}return r}function ai(){}function si(t){return Ue(t)?Ft(t):(n=(e=t)+"",e=Ke(e),function(t){return Mt(t,e,n)});var e,n}var ui,li=ke("ceil"),ci=ke("floor"),fi=de(ur,V),di=de(br,B),hi=ke("round");return X.prototype=J.prototype,(K.prototype=$t(J.prototype)).constructor=K,(Z.prototype=$t(J.prototype)).constructor=Z,tt.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},tt.prototype.get=function(t){return"__proto__"==t?pi:this.__data__[t]},tt.prototype.has=function(t){return"__proto__"!=t&&w.call(this.__data__,t)},tt.prototype.set=function(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this},et.prototype.push=function(t){var e=this.data;"string"==typeof t||pr(t)?e.set.add(t):e.hash[t]=!0},nr.Cache=tt,X.after=function(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new y(Ti);var n=t;t=e,e=n}return t=D(t=+t)?t:0,function(){if(--t<1)return e.apply(this,arguments)}},X.ary=function(t,e,n){return n&&Fe(t,e,n)&&(e=pi),e=t&&null==e?t.length:N(+e||0,0),qe(t,_i,pi,pi,pi,pi,e)},X.assign=Er,X.at=En,X.before=Wn,X.bind=Hn,X.bindAll=Gn,X.bindKey=Qn,X.callback=ti,X.chain=xn,X.chunk=function(t,e,n){e=(n?Fe(t,e,n):null==e)?1:N(M(e)||1,1);for(var r=0,i=t?t.length:0,o=-1,a=A(j(i/e));r<i;)a[++o]=Bt(t,r,r+=e);return a},X.compact=function(t){for(var e=-1,n=t?t.length:0,r=-1,i=[];++e<n;){var o=t[e];o&&(i[++r]=o)}return i},X.constant=function(t){return function(){return t}},X.countBy=kn,X.create=function(t,e,n){var r=$t(t);return n&&Fe(t,e,n)&&(e=pi),e?ht(r,e):r},X.curry=Yn,X.curryRight=Xn,X.debounce=Jn,X.defaults=kr,X.defaultsDeep=Cr,X.defer=Kn,X.delay=Zn,X.difference=tn,X.drop=en,X.dropRight=nn,X.dropRightWhile=function(t,e,n){return t&&t.length?Yt(t,Ae(e,n,3),!0,!0):[]},X.dropWhile=function(t,e,n){return t&&t.length?Yt(t,Ae(e,n,3),!0):[]},X.fill=function(t,e,n,r){var i=t?t.length:0;return i?(n&&"number"!=typeof n&&Fe(t,e,n)&&(n=0,r=i),function(t,e,n,r){var i=t.length;for((n=null==n?0:+n||0)<0&&(n=i<-n?0:i+n),(r=r===pi||i<r?i:+r||0)<0&&(r+=i),i=r<n?0:r>>>0,n>>>=0;n<i;)t[n++]=e;return t}(t,e,n,r)):[]},X.filter=qn,X.flatten=function(t,e,n){var r=t?t.length:0;return n&&Fe(t,e,n)&&(e=!1),r?kt(t,e):[]},X.flattenDeep=function(t){return t&&t.length?kt(t,!0):[]},X.flow=tr,X.flowRight=er,X.forEach=jn,X.forEachRight=Tn,X.forIn=Pr,X.forInRight=jr,X.forOwn=Tr,X.forOwnRight=Mr,X.functions=Or,X.groupBy=Mn,X.indexBy=Dn,X.initial=function(t){return nn(t,1)},X.intersection=un,X.invert=function(t,e,n){n&&Fe(t,e,n)&&(e=pi);for(var r=-1,i=Dr(t),o=i.length,a={};++r<o;){var s=i[r],u=t[s];e?w.call(a,u)?a[u].push(s):a[u]=[s]:a[u]=s}return a},X.invoke=Rn,X.keys=Dr,X.keysIn=Rr,X.map=Nn,X.mapKeys=Nr,X.mapValues=Ir,X.matches=ni,X.matchesProperty=function(t,e){return It(t,gt(e,!0))},X.memoize=nr,X.merge=Sr,X.method=ri,X.methodOf=ii,X.mixin=oi,X.modArgs=rr,X.negate=function(t){if("function"!=typeof t)throw new y(Ti);return function(){return!t.apply(this,arguments)}},X.omit=Fr,X.once=function(t){return Wn(2,t)},X.pairs=Ur,X.partial=ir,X.partialRight=or,X.partition=In,X.pick=Lr,X.pluck=function(t,e){return Nn(t,si(e))},X.property=si,X.propertyOf=function(e){return function(t){return Mt(e,Ke(t),t+"")}},X.pull=function(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var n=0,r=Te(),i=t.length;++n<i;)for(var o=0,a=t[n];-1<(o=r(e,a,o));)C.call(e,o,1);return e},X.pullAt=cn,X.range=function(t,e,n){n&&Fe(t,e,n)&&(e=n=pi),t=+t||0,null==e?(e=t,t=0):e=+e||0;for(var r=-1,i=N(j((e-t)/((n=null==n?1:+n||0)||1)),0),o=A(i);++r<i;)o[r]=t,t+=n;return o},X.rearg=ar,X.reject=function(t,r,e){var n=cr(t)?at:St;return r=Ae(r,e,3),n(t,function(t,e,n){return!r(t,e,n)})},X.remove=function(t,e,n){var r=[];if(!t||!t.length)return r;var i=-1,o=[],a=t.length;for(e=Ae(e,n,3);++i<a;){var s=t[i];e(s,i,t)&&(r.push(s),o.push(i))}return Ut(t,o),r},X.rest=fn,X.restParam=sr,X.set=function(t,e,n){if(null==t)return t;for(var r=e+"",i=-1,o=(e=null!=t[r]||Ue(e,t)?[r]:Ke(e)).length,a=o-1,s=t;null!=s&&++i<o;){var u=e[i];pr(s)&&(i==a?s[u]=n:null==s[u]&&(s[u]=Ie(e[i+1])?[]:{})),s=s[u]}return t},X.shuffle=function(t){return Ln(t,B)},X.slice=function(t,e,n){var r=t?t.length:0;return r?(n&&"number"!=typeof n&&Fe(t,e,n)&&(e=0,n=r),Bt(t,e,n)):[]},X.sortBy=function(t,r,e){if(null==t)return[];e&&Fe(t,r,e)&&(r=pi);var i=-1;return r=Ae(r,e,3),Wt(Rt(t,function(t,e,n){return{criteria:r(t,e,n),index:++i,value:t}}),Fo)},X.sortByAll=Bn,X.sortByOrder=function(t,e,n,r){return null==t?[]:(r&&Fe(e,n,r)&&(n=pi),cr(e)||(e=null==e?[]:[e]),cr(n)||(n=null==n?[]:[n]),Ht(t,e,n))},X.spread=function(e){if("function"!=typeof e)throw new y(Ti);return function(t){return e.apply(this,t)}},X.take=function(t,e,n){return t&&t.length?((n?Fe(t,e,n):null==e)&&(e=1),Bt(t,0,e<0?0:e)):[]},X.takeRight=function(t,e,n){var r=t?t.length:0;return r?((n?Fe(t,e,n):null==e)&&(e=1),Bt(t,(e=r-(+e||0))<0?0:e)):[]},X.takeRightWhile=function(t,e,n){return t&&t.length?Yt(t,Ae(e,n,3),!1,!0):[]},X.takeWhile=function(t,e,n){return t&&t.length?Yt(t,Ae(e,n,3)):[]},X.tap=function(t,e,n){return e.call(n,t),t},X.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new y(Ti);return!1===n?r=!1:pr(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Jn(t,e,{leading:r,maxWait:+e,trailing:i})},X.thru=_n,X.times=function(t,e,n){if((t=M(t))<1||!D(t))return[];var r=-1,i=A(I(t,z));for(e=Zt(e,n,1);++r<t;)r<z?i[r]=e(r):e(r);return i},X.toArray=xr,X.toPlainObject=_r,X.transform=function(t,r,i,e){var n=cr(t)||wr(t);if(r=Ae(r,e,4),null==i)if(n||pr(t)){var o=t.constructor;i=n?cr(t)?new o:[]:$t(hr(o)?o.prototype:pi)}else i={};return(n?it:Pt)(t,function(t,e,n){return r(i,t,e,n)}),i},X.union=pn,X.uniq=vn,X.unzip=mn,X.unzipWith=gn,X.values=Vr,X.valuesIn=function(t){return Qt(t,Rr(t))},X.where=function(t,e){return qn(t,Nt(e))},X.without=$n,X.wrap=function(t,e){return qe(e=null==e?ei:e,bi,pi,[t],[])},X.xor=function(){for(var t=-1,e=arguments.length;++t<e;){var n=arguments[t];if(Ne(n))var r=r?ut(wt(r,n),wt(n,r)):n}return r?Gt(r):[]},X.zip=yn,X.zipObject=wn,X.zipWith=bn,X.backflow=er,X.collect=Nn,X.compose=er,X.each=jn,X.eachRight=Tn,X.extend=Er,X.iteratee=ti,X.methods=Or,X.object=wn,X.select=qn,X.tail=fn,X.unique=vn,oi(X,X),X.add=function(t,e){return(+t||0)+(+e||0)},X.attempt=Zr,X.camelCase=Br,X.capitalize=function(t){return(t=Ro(t))&&t.charAt(0).toUpperCase()+t.slice(1)},X.ceil=li,X.clone=function(t,e,n,r){return e&&"boolean"!=typeof e&&Fe(t,e,n)?e=!1:"function"==typeof e&&(r=n,n=e,e=!1),"function"==typeof n?gt(t,e,Zt(n,r,1)):gt(t,e)},X.cloneDeep=function(t,e,n){return"function"==typeof e?gt(t,!0,Zt(e,n,1)):gt(t,!0)},X.deburr=zr,X.endsWith=function(t,e,n){e+="";var r=(t=Ro(t)).length;return n=n===pi?r:I(n<0?0:+n||0,r),0<=(n-=e.length)&&t.indexOf(e,n)==n},X.escape=function(t){return(t=Ro(t))&&ao.test(t)?t.replace(io,Lo):t},X.escapeRegExp=function(t){return(t=Ro(t))&&vo.test(t)?t.replace(po,Vo):t||"(?:)"},X.every=Cn,X.find=An,X.findIndex=rn,X.findKey=qr,X.findLast=Pn,X.findLastIndex=on,X.findLastKey=Ar,X.findWhere=function(t,e){return An(t,Nt(e))},X.first=an,X.floor=ci,X.get=function(t,e,n){var r=null==t?pi:Mt(t,Ke(e),e+"");return r===pi?n:r},X.gt=ur,X.gte=function(t,e){return e<=t},X.has=function(t,e){if(null==t)return!1;var n=w.call(t,e);if(!n&&!Ue(e)){if(null==(t=1==(e=Ke(e)).length?t:Mt(t,Bt(e,0,-1))))return!1;e=ln(e),n=w.call(t,e)}return n||Ve(t.length)&&Ie(e,t.length)&&(cr(t)||lr(t))},X.identity=ei,X.includes=On,X.indexOf=sn,X.inRange=function(t,e,n){return e=+e||0,n===pi?(n=e,e=0):n=+n||0,t>=I(e,n)&&t<N(e,n)},X.isArguments=lr,X.isArray=cr,X.isBoolean=function(t){return!0===t||!1===t||Wo(t)&&b.call(t)==Ri},X.isDate=function(t){return Wo(t)&&b.call(t)==Ni},X.isElement=function(t){return!!t&&1===t.nodeType&&Wo(t)&&!gr(t)},X.isEmpty=function(t){return null==t||(Ne(t)&&(cr(t)||yr(t)||lr(t)||Wo(t)&&hr(t.splice))?!t.length:!Dr(t).length)},X.isEqual=fr,X.isError=dr,X.isFinite=function(t){return"number"==typeof t&&D(t)},X.isFunction=hr,X.isMatch=function(t,e,n,r){return n="function"==typeof n?Zt(n,r,3):pi,Dt(t,Oe(e),n)},X.isNaN=function(t){return mr(t)&&t!=+t},X.isNative=vr,X.isNull=function(t){return null===t},X.isNumber=mr,X.isObject=pr,X.isPlainObject=gr,X.isRegExp=$r,X.isString=yr,X.isTypedArray=wr,X.isUndefined=function(t){return t===pi},X.kebabCase=Wr,X.last=ln,X.lastIndexOf=function(t,e,n){var r=t?t.length:0;if(!r)return-1;var i=r;if("number"==typeof n)i=(n<0?N(r+n,0):I(n||0,r-1))+1;else if(n){var o=t[i=Jt(t,e,!0)-1];return(e==e?e===o:o!=o)?i:-1}if(e!=e)return zo(t,i,!0);for(;i--;)if(t[i]===e)return i;return-1},X.lt=br,X.lte=function(t,e){return t<=e},X.max=fi,X.min=di,X.noConflict=function(){return jo._=d,this},X.noop=ai,X.now=zn,X.pad=function(t,e,n){e=+e;var r=(t=Ro(t)).length;if(e<=r||!D(e))return t;var i=(e-r)/2,o=M(i);return(n=Ee("",j(i),n)).slice(0,o)+t+n},X.padLeft=Hr,X.padRight=Gr,X.parseInt=function(t,e,n){return(n?Fe(t,e,n):null==e)?e=0:e&&(e=+e),t=Jr(t),U(t,e||(wo.test(t)?16:10))},X.random=function(t,e,n){n&&Fe(t,e,n)&&(e=n=pi);var r=null==t,i=null==e;if(null==n&&(i&&"boolean"==typeof t?(n=t,t=1):"boolean"==typeof e&&(n=e,i=!0)),r&&i&&(i=!(e=1)),t=+t||0,i?(e=t,t=0):e=+e||0,n||t%1||e%1){var o=L();return I(t+o*(e-t+v("1e-"+((o+"").length-1))),e)}return Lt(t,e)},X.reduce=Fn,X.reduceRight=Un,X.repeat=Qr,X.result=function(t,e,n){var r=null==t?pi:t[e];return r===pi&&(null==t||Ue(e,t)||(r=null==(t=1==(e=Ke(e)).length?t:Mt(t,Bt(e,0,-1)))?pi:t[ln(e)]),r=r===pi?n:r),hr(r)?r.call(t):r},X.round=hi,X.runInContext=t,X.size=function(t){var e=t?Me(t):0;return Ve(e)?e:Dr(t).length},X.snakeCase=Yr,X.some=Vn,X.sortedIndex=dn,X.sortedLastIndex=hn,X.startCase=Xr,X.startsWith=function(t,e,n){return t=Ro(t),n=null==n?0:I(n<0?0:+n||0,t.length),t.lastIndexOf(e,n)==n},X.sum=function(t,e,n){return n&&Fe(t,e,n)&&(e=pi),1==(e=Ae(e,n,3)).length?function(t,e){for(var n=t.length,r=0;n--;)r+=+e(t[n])||0;return r}(cr(t)?t:Xe(t),e):(r=e,i=0,bt(t,function(t,e,n){i+=+r(t,e,n)||0}),i);var r,i},X.template=function(a,t,e){var n=X.templateSettings;e&&Fe(a,t,e)&&(t=e=pi),a=Ro(a);var s,u,r=dt(ht({},(t=dt(ht({},e||t),n,ft)).imports),n.imports,ft),i=Dr(r),o=Qt(r,i),l=0,c=t.interpolate||So,f="__p += '",d=$((t.escape||So).source+"|"+c.source+"|"+(c===lo?$o:So).source+"|"+(t.evaluate||So).source+"|$","g"),h="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++qo+"]")+"\n";a.replace(d,function(t,e,n,r,i,o){return n||(n=r),f+=a.slice(l,o).replace(Eo,Bo),e&&(s=!0,f+="' +\n__e("+e+") +\n'"),i&&(u=!0,f+="';\n"+i+";\n__p += '"),n&&(f+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),l=o+t.length,t}),f+="';\n";var p=t.variable;p||(f="with (obj) {\n"+f+"\n}\n"),f=(u?f.replace(to,""):f).replace(eo,"$1").replace(no,"$1;"),f="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=Zr(function(){return m(i,h+"return "+f).apply(pi,o)});if(v.source=f,dr(v))throw v;return v},X.trim=Jr,X.trimLeft=function(t,e,n){var r=t;return(t=Ro(t))?(n?Fe(r,e,n):null==e)?t.slice(Go(t)):t.slice(No(t,e+"")):t},X.trimRight=function(t,e,n){var r=t;return(t=Ro(t))?(n?Fe(r,e,n):null==e)?t.slice(0,Qo(t)+1):t.slice(0,Io(t,e+"")+1):t},X.trunc=function(t,e,n){n&&Fe(t,e,n)&&(e=pi);var r=Ei,i=ki;if(null!=e)if(pr(e)){var o="separator"in e?e.separator:o;r="length"in e?+e.length||0:r,i="omission"in e?Ro(e.omission):i}else r=+e||0;if(r>=(t=Ro(t)).length)return t;var a=r-i.length;if(a<1)return i;var s=t.slice(0,a);if(null==o)return s+i;if($r(o)){if(t.slice(a).search(o)){var u,l,c=t.slice(0,a);for(o.global||(o=$(o.source,(yo.exec(o)||"")+"g")),o.lastIndex=0;u=o.exec(c);)l=u.index;s=s.slice(0,null==l?a:l)}}else if(t.indexOf(o,a)!=a){var f=s.lastIndexOf(o);-1<f&&(s=s.slice(0,f))}return s+i},X.unescape=function(t){return(t=Ro(t))&&oo.test(t)?t.replace(ro,Yo):t},X.uniqueId=function(t){var e=++f;return Ro(t)+e},X.words=Kr,X.all=Cn,X.any=Vn,X.contains=On,X.eq=fr,X.detect=An,X.foldl=Fn,X.foldr=Un,X.head=an,X.include=On,X.inject=Fn,oi(X,(ui={},Pt(X,function(t,e){X.prototype[e]||(ui[e]=t)}),ui),!1),X.sample=Ln,X.prototype.sample=function(e){return this.__chain__||null!=e?this.thru(function(t){return Ln(t,e)}):Ln(this.value())},X.VERSION=vi,it(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){X[t].placeholder=X}),it(["drop","take"],function(r,i){Z.prototype[r]=function(t){var e=this.__filtered__;if(e&&!i)return new Z(this);t=null==t?1:N(M(t)||0,0);var n=this.clone();return e?n.__takeCount__=I(n.__takeCount__,t):n.__views__.push({size:t,type:r+(n.__dir__<0?"Right":"")}),n},Z.prototype[r+"Right"]=function(t){return this.reverse()[r](t).reverse()}}),it(["filter","map","takeWhile"],function(t,e){var r=e+1,i=r!=ji;Z.prototype[t]=function(t,e){var n=this.clone();return n.__iteratees__.push({iteratee:Ae(t,e,1),type:r}),n.__filtered__=n.__filtered__||i,n}}),it(["first","last"],function(t,e){var n="take"+(e?"Right":"");Z.prototype[t]=function(){return this[n](1).value()[0]}}),it(["initial","rest"],function(t,e){var n="drop"+(e?"":"Right");Z.prototype[t]=function(){return this.__filtered__?new Z(this):this[n](1)}}),it(["pluck","where"],function(t,e){var n=e?"filter":"map",r=e?Nt:si;Z.prototype[t]=function(t){return this[n](r(t))}}),Z.prototype.compact=function(){return this.filter(ei)},Z.prototype.reject=function(e,t){return e=Ae(e,t,1),this.filter(function(t){return!e(t)})},Z.prototype.slice=function(t,e){t=null==t?0:+t||0;var n=this;return n.__filtered__&&(0<t||e<0)?new Z(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==pi&&(n=(e=+e||0)<0?n.dropRight(-e):n.take(e-t)),n)},Z.prototype.takeRightWhile=function(t,e){return this.reverse().takeWhile(t,e).reverse()},Z.prototype.toArray=function(){return this.take(B)},Pt(Z.prototype,function(f,t){var d=/^(?:filter|map|reject)|While$/.test(t),h=/^(?:first|last)$/.test(t),p=X[h?"take"+("last"==t?"Right":""):t];p&&(X.prototype[t]=function(){var e=h?[1]:arguments,n=this.__chain__,t=this.__wrapped__,r=!!this.__actions__.length,i=t instanceof Z,o=e[0],a=i||cr(t);a&&d&&"function"==typeof o&&1!=o.length&&(i=a=!1);var s=function(t){return h&&n?p(t,1)[0]:p.apply(pi,ut([t],e))},u={func:_n,args:[s],thisArg:pi},l=i&&!r;if(h&&!n)return l?((t=t.clone()).__actions__.push(u),f.call(t)):p.call(pi,this.value())[0];if(!h&&a){t=l?t:new Z(this);var c=f.apply(t,e);return c.__actions__.push(u),new K(c,n)}return this.thru(s)})}),it(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(t){var n=(/^(?:replace|split)$/.test(t)?l:s)[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:join|pop|replace|shift)$/.test(t);X.prototype[t]=function(){var e=arguments;return i&&!this.__chain__?n.apply(this.value(),e):this[r](function(t){return n.apply(t,e)})}}),Pt(Z.prototype,function(t,e){var n=X[e];if(n){var r=n.name;(Y[r]||(Y[r]=[])).push({name:e,func:n})}}),Y[Se(pi,gi).name]=[{name:"wrapper",func:pi}],Z.prototype.clone=function(){var t=new Z(this.__wrapped__);return t.__actions__=rt(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=rt(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=rt(this.__views__),t},Z.prototype.reverse=function(){if(this.__filtered__){var t=new Z(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Z.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=cr(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=I(e,t+a);break;case"takeRight":t=N(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,l=r?s:a-1,c=this.__iteratees__,f=c.length,d=0,h=I(u,this.__takeCount__);if(!n||i<Ai||i==u&&h==u)return Xt(r&&n?t.reverse():t,this.__actions__);var p=[];t:for(;u--&&d<h;){for(var v=-1,m=t[l+=e];++v<f;){var g=c[v],$=g.iteratee,y=g.type,w=$(m);if(y==ji)m=w;else if(!w){if(y==Pi)continue t;break t}}p[d++]=m}return p},X.prototype.chain=function(){return xn(this)},X.prototype.commit=function(){return new K(this.value(),this.__chain__)},X.prototype.concat=Sn,X.prototype.plant=function(t){for(var e,n=this;n instanceof J;){var r=Ze(n);e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e},X.prototype.reverse=function(){var t=this.__wrapped__,e=function(t){return n&&n.__dir__<0?t:t.reverse()};if(t instanceof Z){var n=t;return this.__actions__.length&&(n=new Z(this)),(n=n.reverse()).__actions__.push({func:_n,args:[e],thisArg:pi}),new K(n,this.__chain__)}return this.thru(e)},X.prototype.toString=function(){return this.value()+""},X.prototype.run=X.prototype.toJSON=X.prototype.valueOf=X.prototype.value=function(){return Xt(this.__wrapped__,this.__actions__)},X.prototype.collect=X.prototype.map,X.prototype.head=X.prototype.first,X.prototype.select=X.prototype.filter,X.prototype.tail=X.prototype.rest,X}();"function"==typeof pi&&"object"==typeof pi.amd&&pi.amd?(jo._=Xo,pi(function(){return Xo})):f&&d?m?(d.exports=Xo)._=Xo:f._=Xo:jo._=Xo}).call(commonjsGlobal)});function mixProvider(r,a){function i(t){var e=t.mixer;if(!(lodash.isPlainObject(t)&&"mixer"in t))return[t];if(lodash.isUndefined(i.mixers[e]))throw new Error("Mixer: unknow mixer type = "+e);if(!t.remix&&t.$parsed)return t.$parsed;if(t.$parsed=i.mixers[e].apply(null,arguments),!lodash.isArray(t.$parsed))throw new Error("Mixer: mixers must return an array (mixer: "+e+")");return t.$parsed}function s(t,r){return lodash.reduce(t,function(t,e){if(lodash.isPlainObject(e)&&"mixer"in e&&"wrapper"!=e.mixer&&!e.wrapper){var n=s(i(e,r),r);return t.concat(n)}return t.concat([e])},[])}return i.mixers={wrapper:function(t){return t.data},repeat:function(t){var e,n=t.data||[],r=[];for(e=0;e<t.times;e++)r=r.concat(lodash.clone(n,!0));return r},random:function(t,e){var n=t.data?s(t.data,e):[];return r(n)},choose:function(t,e){var n=t.data?s(t.data,e):[];return lodash.take(r(n),t.n?t.n:1)},custom:function(t,e){return lodash.isFunction(t.fn)?t.fn(t,e):[]},weightedRandom:t,weightedChoose:t},i;function t(r,t){var i=r.data?s(r.data,t):[],e=r.n||1,o=lodash.sum(r.weights);if(!lodash.isArray(r.weights))throw new Error("Mixer: weightedRandom requires an array of weights");return lodash.range(0,e).map(function(){var t,e=a()*o,n=0;for(t=0;t<i.length;t++)if(n=+(n+=r.weights[t]).toFixed(3),e<=n)return r.data[t];throw new Error("Mixer: something went wrong with weightedRandom")}).map(lodash.clone)}}function mixerDotNotationProvider$1(n){return function(t,e){return lodash.isString(t)?/[^/]\./.test(t)?n(t,e):t.replace("/.","."):t}}function mixerConditionProvider$1(s,u){var l={gt:t(lodash.gt),greaterThan:t(lodash.gt),gte:t(lodash.gte),greaterThanOrEqual:t(lodash.gte),equals:lodash.eq,in:lodash.rearg(lodash.contains,1,0),contains:lodash.rearg(lodash.contains,1,0),exactly:function(t,e){return t===e},isTruthy:c};return function(t,e){var n,r,i=(r=(n=t).operator,lodash.isFunction(n)?n:lodash.has(n,"operator")?lodash.isFunction(r)?r:l[r]:lodash.has(n,"to")?lodash.eq:c),o=s(t.compare,e),a=s(t.to,e);return t.DEBUG&&u({type:"info",message:"Condition info",rows:[["Left: ",o],["Operator: ",t.operator||"equals"],["Right: ",a]],context:t}),t.negate?!i.apply(e,[o,a,e]):i.apply(e,[o,a,e])};function c(t){return!!t}function t(n){return function(t,e){return!![t,e].every(lodash.isNumber)&&n(t,e)}}}function evaluateProvider(i){return function e(t,n){function r(t){return e(t,n)}return lodash.isArray(t)&&(t={and:t}),t.and?lodash.every(t.and,r):t.nand?!lodash.every(t.nand,r):t.or?lodash.some(t.or,r):t.nor?!lodash.some(t.nor,r):i(t,n)}}function mixerBranchingDecorator$1(t,r,i,o){return t.mixers.branch=function(t,e){if(e=lodash.extend(e||{},i),lodash.isUndefined(t.conditions))throw o({type:"error",message:"Missing conditions in branch mixer.",context:t}),new Error("Missing conditions in branch mixer.");return r(t.conditions,e)?t.data||[]:t.elseData||[]},t.mixers.multiBranch=function(t,e){var n;if(e=lodash.extend(e||{},i),n=lodash.find(t.branches,function(t){if(lodash.isUndefined(t.conditions))throw o({type:"error",message:"Missing conditions in multi branch mixer.",context:t}),new Error("Missing conditions in multi branch mixer.");return r(t.conditions,e)}))return n.data||[];return t.elseData||[]},t}function mixerSequenceProvider$1(o){function t(t){this.sequence=t,this.stack=[],this.add(t),this.pointer=0}return lodash.extend(t.prototype,{add:function(t,e){this.stack.push({pointer:e?t.length:-1,sequence:t})},proceed:function(t,e){var n=this.stack[this.stack.length-1],r="next"===t;if(!n)throw new Error("mixerSequence: subSequence not found");n.pointer+=r?1:-1;var i=n.sequence[n.pointer];return lodash.isUndefined(i)&&1<this.stack.length?(this.stack.pop(),this.proceed.call(this,t,e)):i&&i.mixer?(this.add(o(i,e),!r),this.proceed.call(this,t,e)):this},next:function(t){return this.pointer++,this.proceed.call(this,"next",t)},prev:function(t){return this.pointer--,this.proceed.call(this,"prev",t)},current:function(){var t=this.stack[this.stack.length-1];if(!t)throw new Error("mixerSequence: subSequence not found");var e=t.sequence[t.pointer];if(e)return e.$meta=this.meta(),e},meta:function(){return{number:this.pointer,outOf:lodash.reduce(this.stack,function(t,e){return t+e.sequence.length-1},0)+1}}}),t}function dotNotation$1(t,e){if(!lodash.isUndefined(t))return lodash.isString(t)&&(t=t.split(".")),t.reduce(function(t,e){if(lodash.isPlainObject(t)||lodash.isArray(t))return t[e]},e)}function piConsoleFactory(r){return window.DEBUG?function t(e){if(lodash.get(t,"settings.hideConsole",!1))return window.postMessage({type:"kill-console"},"*");r[e.type]&&r[e.type](e.message);window.postMessage((n=e,lodash.cloneDeep(n,function(t){return lodash.isFunction(t)?t.toString():lodash.isError(t)?{name:t.name,message:t.message,stack:t.stack}:void 0})),"*");var n}:lodash.noop}mixProvider.$inject=["randomizeShuffle","randomizeRandom"],mixerDotNotationProvider$1.$inject=["dotNotation"],mixerConditionProvider$1.$inject=["mixerDotNotation","piConsole"],evaluateProvider.$inject=["mixerCondition"],mixerBranchingDecorator$1.$inject=["$delegate","mixerEvaluate","mixerDefaultContext","piConsole"],mixerSequenceProvider$1.$inject=["mixer"],piConsoleFactory.$inject=["$log"];var piConsole$1=piConsoleFactory(console),mixer=mixProvider(lodash.shuffle,Math.random),mixerDotNotation=mixerDotNotationProvider$1(dotNotation$1),mixerCondition=mixerConditionProvider$1(mixerDotNotation,piConsole$1),mixerEvaluate=evaluateProvider(mixerCondition),mixerDefaultContext={};mixerBranchingDecorator$1(mixer,mixerEvaluate,mixerDefaultContext);var MixerSequence=mixerSequenceProvider$1(mixer);function templateObjProvider$1(n){return function(r,t,e){var i=lodash.get(e,"skip",[]),o=lodash.assign({},t,n);return lodash.cloneDeep(r,function(t,e,n){return r===n&&lodash.includes(i,e)?t:lodash.isString(t)&&lodash.includes(t,"<%")?lodash.template(t)(o):void 0})}}templateObjProvider$1.$inject=["templateDefaultContext"];var templateObj=templateObjProvider$1({});function collectionService(){function n(t){if(t instanceof n)return t;if(!(lodash.isUndefined(t)||lodash.isArray(t)||t instanceof n))throw new Error("Collections can only be constructed from arrays");this.collection=t||[],this.length=this.collection.length,this.pointer=-1}lodash.extend(n.prototype,{first:function(){return this.pointer=0,this.collection[this.pointer]},last:function(){return this.pointer=this.collection.length-1,this.collection[this.pointer]},end:function(){this.pointer=this.collection.length},current:function(){return this.collection[this.pointer]},next:function(){return this.collection[++this.pointer]},previous:function(){return this.collection[--this.pointer]},add:function(t){return arguments.length&&(t=lodash.isArray(t)?t:[t],this.collection=this.collection.concat(t),this.length=this.collection.length),this},at:function(t){return this.collection[t]}});var r=Array.prototype.slice;return lodash.each(["where","filter"],function(e){n.prototype[e]=function(){var t=r.call(arguments);return t.unshift(this.collection),new n(lodash[e].apply(lodash,t))}}),n}function RandomizerProvider(i,a,s){function t(){this._cache={random:{},exRandom:{},sequential:{}}}return lodash.extend(t.prototype,{random:function(t,e,n){var r=this._cache.random;if(n&&!lodash.isUndefined(r[e]))return r[e];return r[e]=i(t),r[e]},exRandom:function(t,e,n){var r,i=this._cache.exRandom,o=i[e];if(lodash.isUndefined(o))return(o=i[e]=new s(a(t))).first();if(o.length!==t)throw new Error("This seed  ("+e+") points to a collection with the wrong length, you can only use a seed for sets of the same length");if(n)return o.current();return r=o.next(),lodash.isUndefined(r)?(o=i[e]=new s(a(t))).first():r},sequential:function(t,e,n){var r,i=this._cache.sequential,o=i[e];if(lodash.isUndefined(o))return(o=i[e]=new s(lodash.range(t))).first();if(o.length!==t)throw new Error("This seed  ("+e+") points to a collection with the wrong length, you can only use a seed for sets of the same length");if(n)return o.current();return r=o.next(),lodash.isUndefined(r)?o.first():r}}),t}function storeProvider$1(e){function t(){this.store={}}return lodash.extend(t.prototype,{create:function(t){if(this.store[t])throw new Error("The name space "+t+" already exists");this.store[t]=new e,this.store[t].namespace=t},read:function(t){if(!this.store[t])throw new Error("The name space "+t+" does not exist");return this.store[t]},update:function(t,e){this.read(t).add(e)},del:function(t){this.store[t]=void 0}}),t}function SequenceProvider(r){function t(t,e,n){this.namespace=t,this.mixerSequence=new r(e),this.db=n}return lodash.extend(t.prototype,{next:function(t){return this.mixerSequence.next(t),this},prev:function(t){return this.mixerSequence.prev(t),this},current:function(t,e){t||(t={});var n=this.mixerSequence.current(t);return n?this.db.inflate(this.namespace,n,t,e):n},all:function(t,e){for(var n=[],r=this.next().current(t,e);r;)n.push(r),r=this.next().current(t,e);return n}}),t}function DatabaseProvider(t,e,a,s,n,u){function r(){this.store=new t,this.randomizer=new e}return lodash.extend(r.prototype,{createColl:function(t){this.store.create(t)},getColl:function(t){return this.store.read(t)},add:function(t,e){this.store.read(t).add(e)},inflate:function(t,e,n,r){var i,o=this.getColl(t);try{e.$inflated&&!e.reinflate||(e.$inflated=a(e,o,this.randomizer),e.$templated=null)}catch(t){throw u({type:"error",message:"Failed to inherit",error:t,context:e}),this.onError&&this.onError(t),t}try{e.$templated&&!e.$inflated.regenerateTemplate||(n[t+"Meta"]=e.$meta,n[t+"Data"]=s(e.$inflated.data||{},n,r),e.$templated=s(e.$inflated,n,r))}catch(t){throw u({type:"error",message:"Failed to apply template",error:t,context:e.$inflated}),this.onError&&this.onError(t),t}return i=e.$templated,n.global&&i.addGlobal&&lodash.extend(n.global,i.addGlobal),n.current&&i.addCurrent&&lodash.extend(n.current,i.addCurrent),i},sequence:function(t,e){if(!lodash.isArray(e))throw new Error("Sequence must be an array.");return new n(t,e,this)}}),r}function queryProvider$1(u){return function(e,t,n){var r=new u(t);if(lodash.isFunction(e))return e(t);(lodash.isString(e)||lodash.isNumber(e))&&(e={set:e,type:"random"}),e.set&&(r=r.where({set:e.set})),lodash.isString(e.data)&&(r=r.filter(function(t){return t.handle===e.data||t.data&&t.data.handle===e.data})),lodash.isPlainObject(e.data)&&(r=r.where({data:e.data})),lodash.isFunction(e.data)&&(r=r.filter(e.data));var i,o=e.seed||"$"+t.namespace+e.set,a=r.length,s=e.repeat;switch(e.type){case void 0:case"byData":case"random":i=n.random(a,o,s);break;case"exRandom":i=n.exRandom(a,o,s);break;case"sequential":i=n.sequential(a,o,s);break;case"first":i=0;break;case"last":i=a-1;break;default:throw new Error("Unknow query type: "+e.type)}if(lodash.isUndefined(r.at(i)))throw new Error("Query failed, object ("+JSON.stringify(e)+") not found. If you are trying to apply a template, you should know that they are not supported for inheritance.");return r.at(i)}}function inflateProvider$1(l,e){function c(t){return lodash.isFunction(t.customize)&&t.customize.apply(t,[t,e.global]),t}return function t(e,n,r,i,o){if(!(o=i?--o:10))throw new Error("Inheritance loop too deep, you can only inherit up to 10 levels down");if(!lodash.isPlainObject(e))throw new Error("You are trying to inflate a non object ("+JSON.stringify(e)+")");var a,s=lodash.cloneDeep(e),u=s.inherit;if(!s.inherit)return i||c(s),s;if(!(a=l(u,n,r)))throw new Error("Query failed, object ("+JSON.stringify(u)+") not found.");if(a=t(a,n,r,!0,o),u.merge&&!lodash.isArray(u.merge))throw new Error("Inheritance error: inherit.merge must be an array.");return lodash.each(a,function(t,e){var n,r;if(e in s){if(-1!=lodash.indexOf(u.merge,e)){if(n=s[e],r=t,lodash.isArray(n)){if(!lodash.isArray(r))throw new Error('Inheritance error: You tried merging an array with an non array (for "'+e+'")');s[e]=n.concat(r)}if(lodash.isPlainObject(n)){if(!lodash.isPlainObject(r))throw new Error('Inheritance error: You tried merging an object with an non object (for "'+e+'")');s[e]=lodash.extend({},r,n)}}}else s[e]=lodash.isFunction(t)?t:lodash.cloneDeep(t)}),a.data&&(s.data=lodash.extend(a.data,s.data||{})),!i&&c(s),s}}RandomizerProvider.$inject=["randomizeInt","randomizeRange","Collection"],storeProvider$1.$inject=["Collection"],SequenceProvider.$inject=["MixerSequence"],DatabaseProvider.$inject=["DatabaseStore","DatabaseRandomizer","databaseInflate","templateObj","databaseSequence","piConsole"],queryProvider$1.$inject=["Collection"],inflateProvider$1.$inject=["databaseQuery","$rootScope"];var global$1=window.piGlobal,piConsole=piConsoleFactory(console),collection=collectionService(),DatabaseRandomizer=RandomizerProvider(randomInt,randomArr,collection),databaseQuery=queryProvider$1(collection,piConsole),databaseInflate=inflateProvider$1(databaseQuery,{global:global$1},piConsole),DatabaseStore=storeProvider$1(collection),databaseSequence=SequenceProvider(MixerSequence),Database=DatabaseProvider(DatabaseStore,DatabaseRandomizer,databaseInflate,templateObj,databaseSequence,piConsole);function randomArr(t){return lodash.shuffle(lodash.range(t))}function randomInt(t){return Math.floor(Math.random()*t)}window.piGlobal||(window.piGlobal={});var global$2=window.piGlobal;function APIconstructor(t){function e(){var e=this.script={type:t.type,name:"anonymous "+t.type,settings:t.settings||{},current:{},sequence:[]};this.settings=e.settings,lodash.forEach(t.sets,function(t){e[t+"Sets"]=[]})}return lodash.forEach(t.sets,function(t){lodash.set(e.prototype,lodash.camelCase("add-"+t+"-set"),add_set(t))}),lodash.extend(e.prototype,t.static,{setName:function(t){this.script.name=t},addSettings:function(t,e){if(!lodash.isString(t))throw new Error("The first argument to API.addSettings must be a string");return lodash.isPlainObject(e)?this.settings[t]=lodash.extend(this.settings[t]||{},e):this.settings[t]=e,this},addSequence:function(t){var e=this.script;return lodash.isArray(t)||(t=[t]),e.sequence=e.sequence.concat(t),this},addGlobal:function(t){if(!lodash.isPlainObject(t))throw new Error("global must be an object");return lodash.merge(global$2,t)},getGlobal:function(){return global$2},addCurrent:function(t){if(!lodash.isPlainObject(t))throw new Error("current must be an object");return lodash.merge(this.script.current,t)},getCurrent:function(){return this.script.current},addScript:function(t){return lodash.merge(this.script,t)},getScript:function(){return this.script},save:function(t){var e=this.script,n=e._toSave||(e._toSave=[]);if(!lodash.isPlainObject(t))throw new Error("API.save can send only objects.");return e._save?e._save(t):n.push(t)},post:function(e,n){return angular.injector(["ng"]).invoke(["$http",function(t){return t.post(e,n)}])},shuffle:lodash.shuffle.bind(lodash)}),e}function add_set(i){function o(e,t){return t.map(function(t){return lodash.set(t,"set",e)})}function a(t){return lodash.isArray(t)?t:[t]}return function(t,e){var n,r=this.script[i+"Sets"]||(this.script[i+"Sets"]=[]);if(lodash.isUndefined(t))throw new Error('There is an undefined "'+i+'Set".');lodash.isArray(t)&&(n=t),lodash.isString(t)&&(n=o(t,a(e))),lodash.isPlainObject(t)&&(n=lodash.map(t,function(t,e){return o(e,a(t))}),n=lodash.flatten(n)),function(t){if(lodash.isUndefined(t))throw new Error('Error parsing "'+i+'Set": Unknown set type.');if(!t.every(function(t){return lodash.has(t,"set")}))throw new Error('All elements must be defined and belong to a set (error parsing "'+i+'Set")')}(n),r.push.apply(r,n)}}var PROGRESS_BAR=['<div class="row" style="opacity:0.4;">','<div class="hidden-xs col-sm-3 text-right" style="font-weight:bold;">Progress:&nbsp;</div>','<div class="col-xs-12 col-sm-7">','<div class="progress">','<div class="progress-bar" style="width: <%= 100 * tasksMeta.number / tasksMeta.outOf %>%;"></div>',"</div>","</div>","</div>"].join("\n"),Constructor=APIconstructor({type:"manager",sets:["tasks"],static:{PROGRESS_BAR:PROGRESS_BAR}}),messageTemplate='<div class="panel panel-info" style="margin-top:1em">\n\t<% if (task.header){ %>\n\t\t<div class="panel-heading">\n\t\t\t<h1 class="panel-title" style="font-size:2em"><%= task.header %></h1>\n\t\t</div>\n\t<% } %>\n\n\t<div class="panel-body">\n\t\t<%= content %>\n\n\t\t<% if (!task.buttonHide){ %>\n\t\t\t<div class="text-center proceed" style="margin: 30px auto 10px;">\n\t\t\t\t<button pi-message-done type="button" class="btn btn-primary">\n\t\t\t\t\t<% if (task.buttonText){ %>\n\t\t\t\t\t\t<%= task.buttonText %>\n\t\t\t\t\t<% } else { %>\n\t\t\t\t\t\tClick Here or press the space button to Proceed\n\t\t\t\t\t<% } %>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t<% } %>\n\t</div>\n\n\t<% if (task.footer){ %>\n\t\t<div class="panel-footer">\n\t\t\t<%= task.footer %>\n\t\t</div>\n\t<% } %>\n</div>\n<div style="text-align:center; padding: 1em">&middot; Project Implicit &middot;</div>',messageTemplateDebrief='<style type="text/css">\n\t.navbar-inverse .navbar-nav > li > a {color:#dbdbdb;font-weight: bold;}\n</style>\n<nav class="navbar navbar-inverse navbar-fixed-top">\n\t<div class="container">\n\t\t<div class="navbar-header">\n\t\t\t<button type="button" class="navbar-toggle collapsed" ng-click="showNavbar = !showNavbar" aria-expanded="false" aria-controls="navbar">\n\t\t\t\t<span class="sr-only">Toggle navigation</span>\n\t\t\t\t<span class="icon-bar"></span>\n\t\t\t\t<span class="icon-bar"></span>\n\t\t\t\t<span class="icon-bar"></span>\n\t\t\t</button>\n\t\t\t<a class="navbar-brand" href="http://www.projectimplicit.net/index.html" >\n\t\t\t\t<img width="20" height="20" title="" alt="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAD9klEQVR42m3T/U+TVxQH8HMvLftb5g+dZDFpzJY0mdR1CAxqEWxpq9JiW0oHzOnGQiOLGqFF12kVKuXVUkqrK1KQFx1bcFGnYS/dsizLksVfTNhUthmTGe/ZuU+BSUuTb3J77+3nOec+t8C8mfvw3txzaLsp4OhXAtq/FuC/K+CT+wJOfSegKysg8JOA7h8FnP5ewIllAZ33BHTcFvDhkoAjiwJaFgQ0X1/l7kwvgHf6OfPNImtdQPhgEaH9FoL/NkLnNwgnv0Xo+gEJzEWO5VznPdpzJ7f36CKytgVUDE/mH4CmabEB0iJ8dEs+HeE4gSeWEU6/BMrxSZo7TmDHndzezSACeDIEXkdonSfwywfQsWSEzrs7lJxa3gHdWcrPa8nm5tbXP16qoK5+lcVIg3mmCHQT6J1GOkcB79+sgbxPLBYrSU4k5pITEzdGotGd+et09ruhZV6w5hlkbgm6rgnWRKUqVU5r8/cHurqyZ4NBcSYYQBr/ptPpVJs2+GY0INttmkbmmiSwcVIosneGUgj6vE2rzR4PruWZ3+/fDLpmNMybq441fk6g46pgh0mWB7oFeMCyv8VmMf9rs1he2Mzm9oKWJUgdSoM5rhB4KCWUweE0gitdAILJX/yau0df4ggYtpkSxYVgWiNbZc6ryA4lCbRPCGVAE+BK5YF+Dq037NC28BDa5le4b7YRnL3qAlBiDSlk9gSB1rhg9nEEiTa8BJpMReCdbaZ/wAr45pS7Si/uEW/OHAN/9v9KrUmNgh1IILOOEWi+LFg9DaRuXwP9VJk77aMb8Cd46OLT+SqXlsbgmnrC3ZPHNiqVoH0NM48SWDssYP8IgiVG4KgWTIkiOJiyg+PKinxh4EwL1phGGXDSW5RzjtQj3pB0gu4LFVhjGqiPKRirHUZgpgHB9g0i1A3LSS3Ux18F2/hDqljAweQqHcXv8oyVNKQe0MMeK0dki6+ALfE61BFIBbHaISSLQOMlwff2I6sZQHXNgBZqh0qo2r/BOvaY2+OtYB8flEAu8QS3JT209gdV9UxVF3sDjEMaWRA3RZEbLxFY2St4VR8STGBEC9v8xWAZe5OyEwyhV+jpYbBcRhluHh1R1qkTlWVEJ9dVVZFSZowKXh1BXnmRwLLzgpeHkdEXdXlki3sYDfN9QyhTVDM4pTYNbM+lb7tqb7+eV/f9wt/tRV5xAXnZOQINoRf8nc+Q0Rd1eagQrI6EZSsyzNgvWFUEmeyIEFbZpxTD95xHaXBDiEB9zxO++yyytz9FtWELcM+FsFLBeiou5qrJg6TB9T1PgZcGz/Fdgb9YaQ+qdwULwbJQWPnheqiTDYSK4PozuZQGn6re6j7yHw6qbqUIb1GZAAAAAElFTkSuQmCC" />\n\t\t\t</a>\n\t\t</div>\n\t\t<div id="navbar" class="collapse navbar-collapse" ng-class="{in:showNavbar}">\n\t\t\t<ul class="nav navbar-nav">\n\t\t\t\t<li ><a href="/implicit/research/">Try a study</a></li>\n\t\t\t\t<li><a href="/implicit/takeatest.html" >Take a test</a></li>\n\t\t\t\t<li><a href="/implicit/education.html">Background</a></li>\n\t\t\t\t<li><a href="/implicit/help.html">Tech Support</a></li>\n\t\t\t\t<li><a href="/implicit/aboutus.html">The Scientists</a></li>\n\t\t\t\t<li><a href="https://4agc.com/donation_pages/9dda692c-6aa1-47e7-852d-58d396ebd3af">Donate</a></li>\n\t\t\t</ul>\n\t\t</div>\x3c!--/.nav-collapse --\x3e\n\t</div>\n</nav>\n\n<div class="container" style="margin-top:50px;">\n\t<div class="row">\n\t\t<div class="col-md-12">\n\t\t\t<h2>You have completed the study.</h2>\n\t\t</div>\n\t</div>\n\n\t<div class="row">\n\t\t<div class="col-md-12">\n\t\t\t<%= content %>\n\t\t</div>\n\t</div>\n\n\t<div class="row">\n\t\t<div class="col-md-12 text-center" style="margin: 30px auto 10px;">\n            <% if (!task.noDonate){ %>\n                <a href="https://4agc.com/donation_pages/9dda692c-6aa1-47e7-852d-58d396ebd3af" target="_blank" class="btn btn-primary">Donate to Project Implicit</a>\n            <% } %>\n\n\t\t\t<% if (task.demo) { %>\n\t\t\t\t<a href="<%= task.isTouch ? \'/implicit/selectatouchtest.html\' : \'/implicit/selectatest.html\'%>" class="btn btn-default">Take another test</a>\n\t\t\t<% } else { %>\n\t\t\t\t<a href="/implicit/Assign" class="btn btn-default">Start next study</a>\n\t\t\t<% } %>\n\t\t</div>\n\t</div>\n\n</div>\n\n<footer role="contentinfo">\n\n\t<style type="text/css">\n\t\tfooter {text-align:center;border-top: 1px solid #e5e5e5;margin-top:50px;color: #767676;padding: 30px 0;}\n\t\tfooter li {display: inline;padding: 0 2px}\n\t</style>\n\n\t<ul class="text-muted">\n\t\t<li><button onClick="window.print()" class="btn btn-default">\n\t\t\t<span aria-hidden="true" class="glyphicon glyphicon-print"></span>\n\t\t\tPrint Page\n\t\t</button></li>\n\t\t<li>·</li>\n\t\t<li><a href="/implicit/backgroundinformation.html">Background Information</a></li>\n\t\t<li>·</li>\n\t\t<li><a href="/implicit/privacy.html">Privacy Information</a></li>\n\t\t<li>·</li>\n\t\t<li><a href="/implicit">Project Implicit Home</a></li>\n\t</ul>\n</footer>\n',messageTemplatePanel='<div class="panel panel-info" style="margin-top:1em">\n\t<% if (header){ %>\n\t\t<div class="panel-heading">\n\t\t\t<h2 class="panel-title text-center" style="font-size:1.3em"><%= header %></h2>\n\t\t</div>\n\t<% } %>\n\n\t<div class="panel-body">\n\t\t<%= content %>\n\t</div>\n\n\t<% if (footer){ %>\n\t\t<div class="panel-footer">\n\t\t\t<%= footer %>\n\t\t</div>\n\t<% } %>\n</div>';function API(){Constructor.call(this),lodash.set(this,"settings.onPreTask",onPreTask),lodash.set(this,"settings.logger.url",piGlobal.$dataUrl),window.IS_PI&&lodash.set(this,"settings.logger.managerUrl","/implicit/PiManager/"),window.IS_PI&&lodash.set(this,"settings.logger.type","old")}function onPreTask(o,t,e,n,r,a){var i=window.piGlobal,s={},u=lodash.assign({},i.$meta,{taskName:o.name||"namelessTask",taskNumber:o.$meta.number,taskURL:o.scriptUrl||o.templateUrl});o.last&&(window.IS_PI&&(u.sessionStatus="C"),e.deactivate()),"quest"!=o.type&&"pip"!=o.type||(o.$script.serial=o.$meta.number,lodash.set(o,"$script.settings.logger.meta",lodash.assign({},u,lodash.get(o,"$script.settings.logger.meta",{}))),lodash.set(o,"$script.settings.logger.error",function(t){var e=t.statusText+" ("+t.status+").",n=new Error("Failed to update. "+e),r=o.reportNoConnection;if(r){var i=document.createElement("div");i.className="crash-message",i.innerHTML=r,document.body.insertBefore(i,document.body.firstChild)}throw a({type:"error",error:n,message:"PI failed to update server"}),n}));var l=/^(localhost|127.0.0.1)/.test(location.host);if("pip"==o.type&&(o.baseUrl=o.baseUrl?o.baseUrl:l?"/pip":window.IS_PI?"/implicit/common/all/js/pip/"+(o.version||.3):"/openserver/minnojs/minno-time/0.3"),"time"==o.type&&(o.baseUrl=o.baseUrl?o.baseUrl:l?"/pip":window.IS_PI?"/implicit/common/all/js/pip/0.5/":"/openserver/minnojs/minno-time/0.5"),lodash.extend(n,{showFeedback:lodash.bind(showFeedback,null,i),showPanel:showPanel}),"message"==o.type&&o.piTemplate&&(lodash.assign(s,n,{global:i,current:i.current,task:o,tasksData:lodash.get(o,"data",{})}),s.content=o.$template=lodash.template(o.$template)(s),"debrief"==o.piTemplate?(o.$template=lodash.template(messageTemplateDebrief)(s),o.$template=lodash.template(o.$template)(s)):o.$template=lodash.template(messageTemplate)(s)),o.last&&i.$mTurk){var c=i.$mTurk,f=c.isProduction?"http://www.mturk.com/mturk/externalSubmit":"https://workersandbox.mturk.com/mturk/externalSubmit",d=o.post||lodash.noop;if(!lodash.every(["assignmentId","hitId","workerId"],function(t){return lodash.has(c,t)})){var h=new Error("$mTurk is missing a crucial property (assignmentId,hitId,workerId)");throw a({type:"error",error:h,message:"mTurk Error"}),h}o.post=function(){d.apply(this,arguments),postRedirect(f,lodash.omit(c,"isProduction"))}}if(window._err&&window._err.meta){var p=window._err.meta;p.subtaskName=o.name,p.subtaskURL=o.scriptUrl||o.templateUrl}}function postRedirect(t,e,n){n=n||"post";var r=document.createElement("form");for(var i in r.setAttribute("method",n),r.setAttribute("action",t),e)if(e.hasOwnProperty(i)){var o=document.createElement("input");o.setAttribute("type","hidden"),o.setAttribute("name",i),o.setAttribute("value",e[i]),r.appendChild(o)}document.body.appendChild(r),r.submit()}function showPanel(t,e,n){return lodash.template(messageTemplatePanel)({content:t,header:e,footer:n})}function showFeedback(t,i){if(lodash.isPlainObject(i)||(i={}),lodash.defaults(i,{pre:"<p>",post:"</p>",wrap:!0,header:"",noFeedback:"<p>No feedback was found</p>",property:"feedback",exclude:[]}),!lodash.isArray(i.exclude))throw Error("showFeedback: Exclude must be an array");var e=lodash(t).filter(function(t,e){var n=lodash.isPlainObject(t)&&!lodash.isUndefined(t[i.property]),r=-1===lodash.indexOf(i.exclude,e)&&"current"!==e;return n&&r}).mapValues(function(t){return i.pre+t[i.property]+i.post}).reduce(function(t,e){return t+e},"")||i.noFeedback;return i.wrap?showPanel(e,i.header,i.footer):e}lodash.extend(API.prototype,Constructor.prototype),onPreTask.$inject=["currentTask","$http","managerBeforeUnload","templateDefaultContext","managerSettings","piConsole"];var api$1=APIconstructor({type:"time",settings:{logger:{pulse:20}},sets:["trial","stimulus","media"]});api$1.prototype.addTrialSets=api$1.prototype.addTrialSet,api$1.prototype.addStimulusSets=api$1.prototype.addStimulusSet,api$1.prototype.addMediaSets=api$1.prototype.addMediaSet,api$1.prototype.getLogs=function(){return this.script.current.logs};var quest=APIconstructor({type:"quest",sets:["pages","questions"]});function ComputeD(){lodash.extend(this,{dataArray:{},AnalyzedVar:"latency",ErrorVar:"error",condVar:"",cond1VarValues:[],cond2VarValues:[],parcelVar:"",parcelValue:[],fastRT:300,maxFastTrialsRate:.1,minRT:400,maxRT:1e4,maxErrorParcelRate:.4,errorLatency:{use:"latency",penalty:600,useForSTD:!0},postSettings:{}})}lodash.extend(ComputeD.prototype,{setComputeObject:function(t){lodash.extend(this,t)},setDataArray:function(){var t=window.piGlobal;this.dataArray=t.current.logs}});var messages={MessageDef:[],manyErrors:"There were too many errors made to determine a result.",tooFast:"There were too many fast trials to determine a result.",notEnough:"There were not enough trials to determine a result."},requirejs$1,require,define;function Message(){this.messages=lodash.extend({},messages)}function ParcelMng$1(t){this.parcelArray=[],this.scoreData={},this.msgMan=t}function Scorer(){this.computeData=new ComputeD,this.msgMan=new Message,this.parcelMng=new ParcelMng$1(this.msgMan)}function post(r,i){return new Promise(function(t,e){var n=new XMLHttpRequest;n.open("POST",r,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),n.onreadystatechange=function(){4===this.readyState&&(200<=this.status&&this.status<400?t(this.responseText):e(new Error("Failed posting to: "+r)))},n.send(JSON.stringify(i))})}
/** vim: et:ts=4:sw=4:sts=4
 * @license RequireJS 2.3.5 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, https://github.com/requirejs/requirejs/blob/master/LICENSE
 */lodash.extend(Message.prototype,{setMsgObject:function(t){lodash.extend(this.messages,t)},getScoreMsg:function(t){var e=this.messages.MessageDef;if(!e||!e.length)throw new Error('You must define a "MessageDef" array.');var n=parseFloat(t),r=null,i=null,o="error: msg was not set",a=!1;if(lodash.each(e,function(t){r=parseFloat(t.cut),i=t.message,n<=r&&!a&&(o=i,a=!0)}),!a){var s=e[e.length-1];o=s.message}return o},getMessage:function(t){return this.messages[t]}}),lodash.extend(ParcelMng$1.prototype,{Init:function(r){var i=this,t=this.msgMan,o=window.piGlobal.current.logs;i.parcelArray=[],i.scoreData={},i.msgMan=t;var a=r.AnalyzedVar,s=r.ErrorVar,u=r.parcelVar,e=r.parcelValue,l=r.minRT,c=r.maxRT,f=r.fastRT,d=0,h=0,p=0,v=0,n=parseFloat(r.maxFastTrialsRate);if(void 0===e||0===e.length){v=h=d=p=0;var m={name:"general",trialIData:[]};lodash.each(o,function(t){t[a]>=l&&t[a]<=c?(p++,1==t.data[s]&&v++,i.validate(m,t,r)&&d++):t[a]<=f&&h++}),i.checkErrors(p,v,r),i.parcelArray[0]=m}else lodash.each(e,function(e,t){v=h=d=p=0;var n={};n.name=e,n.trialIData=[],lodash.each(o,function(t){t.data[u]==e&&(t[a]>=l&&t[a]<=c?(p++,1==t.data[s]&&v++,i.validate(n,t,r)&&d++):t[a]<=f&&h++)}),i.checkErrors(p,v,r),i.parcelArray[t]=n});n<h/d&&(i.scoreData.errorMessage=this.msgMan.getMessage("tooFast"))},checkErrors:function(t,e,n){n.maxErrorParcelRate<e/t&&(this.scoreData.errorMessage=this.msgMan.getMessage("manyErrors"))},validate:function(t,e,n){var r=n.errorLatency,i=n.ErrorVar,o=e.data;return"latency"==r.use?(t.trialIData.push(e),!0):"false"==r.use?"1"!=o[i]&&(t.trialIData.push(e),!0):"penalty"==r.use?(t.trialIData.push(e),!0):void 0},addPenalty:function(t,e){var n=e.errorLatency,a=this;if("penalty"==n.use){var s=parseFloat(n.penalty),u=e.ErrorVar,l=e.AnalyzedVar,c=e.condVar,f=e.cond1VarValues,d=e.cond2VarValues,r=t.trialIData,h=t.avgCon1,p=t.avgCon2;lodash.each(r,function(t){var e=t.data,n=e[u],r=e[c],i=a.checkArray(r,f),o=a.checkArray(r,d);"1"==n&&(i?t[l]+=h+s:o&&(t[l]+=p+s))})}},avgAll:function(e){var n=this;lodash.each(n.parcelArray,function(t){n.avgParcel(t,e)})},avgParcel:function(t,e){var a=this,n=t.trialIData,s=e.condVar,u=e.cond1VarValues,l=e.cond2VarValues,c=e.AnalyzedVar,f=0,d=0,h=0,p=0,v=0,m=0;lodash.each(n,function(t){var e=t[c],n=t.data;h+=e,m++;var r=n[s],i=a.checkArray(r,u),o=a.checkArray(r,l);i?(p++,f+=e):o&&(v++,d+=e)}),(p<=2||v<=2)&&(a.scoreData.errorMessage=this.msgMan.getMessage("notEnough")),0!==p&&(f/=p),0!==v&&(d/=v),t.avgCon1=f,t.avgCon2=d,t.diff=t.avgCon1-t.avgCon2,0!==m&&(t.avgBoth=h/m),a.addPenalty(t,e)},checkArray:function(t,e){for(var n=0;n<e.length;n++){if(e[n]==t)return!0}return!1},varianceAll:function(e){var n=this;lodash.each(n.parcelArray,function(t){n.varianceParcel(t,e)})},varianceParcel:function(t,s){var e,u=this,l=s.AnalyzedVar,n=t.trialIData,c=s.cond1VarValues,f=s.cond2VarValues,d=s.condVar,r=t.avgBoth,i=0,o=0,h=[],p=[],v=s.errorLatency.useForSTD;lodash.each(n,function(t){var e=t.data,n=t[l],r=e[s.ErrorVar],i=e[d],o=u.checkArray(i,c),a=u.checkArray(i,f);o?v?h.push(n):"0"==r&&h.push(n):a&&(v?p.push(n):"0"==r&&h.push(n))}),e=h.concat(p),lodash.each(e,function(t){o+=(i=t-r)*i}),t.variance=o/(e.length-1)},scoreAll:function(e){var n=this,r=0;lodash.each(n.parcelArray,function(t){n.scoreParcel(t,e),r+=t.score});var t=r/n.parcelArray.length;n.scoreData.score=t.toFixed(2)},scoreParcel:function(t){var e=Math.sqrt(t.variance);0===e?(this.scoreData.errorMessage=this.msgMan.getMessage("notEnough"),t.score=t.diff):t.score=t.diff/e}}),lodash.extend(Scorer.prototype,{addSettings:function(t,e){switch(t){case"compute":this.computeData.setComputeObject(e);break;case"message":this.msgMan.setMsgObject(e);break;default:throw new Error('SCORER:addSettings: unknow "type" '+t)}},computeD:function(){var t=this.computeData,e=this.parcelMng;t.setDataArray(),e.Init(t),e.avgAll(t),e.varianceAll(t),e.scoreAll(t);var n=e.scoreData;return void 0===n.errorMessage||null===n.errorMessage?{FBMsg:this.getFBMsg(n.score),DScore:n.score,error:!1}:{FBMsg:n.errorMessage,DScore:"",error:!0}},postToServer:function(t,e,n,r){var i=this.computeData.postSettings||{},o=i.url,a={};return n||(n=i.score),r||(r=i.msg),a[n]=t,a[r]=e,post(o,a)},dynamicPost:function(t){return post((this.computeData.postSettings||{}).url,t)},getFBMsg:function(t){return this.msgMan.getScoreMsg(t)}}),function(global,setTimeout){var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.3.5",commentRegExp=/\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;function commentReplace(t,e){return e||""}function isFunction(t){return"[object Function]"===ostring.call(t)}function isArray(t){return"[object Array]"===ostring.call(t)}function each(t,e){var n;if(t)for(n=0;n<t.length&&(!t[n]||!e(t[n],n,t));n+=1);}function eachReverse(t,e){var n;if(t)for(n=t.length-1;-1<n&&(!t[n]||!e(t[n],n,t));n-=1);}function hasProp(t,e){return hasOwn.call(t,e)}function getOwn(t,e){return hasProp(t,e)&&t[e]}function eachProp(t,e){var n;for(n in t)if(hasProp(t,n)&&e(t[n],n))break}function mixin(n,t,r,i){return t&&eachProp(t,function(t,e){!r&&hasProp(n,e)||(!i||"object"!=typeof t||!t||isArray(t)||isFunction(t)||t instanceof RegExp?n[e]=t:(n[e]||(n[e]={}),mixin(n[e],t,r,i)))}),n}function bind(t,e){return function(){return e.apply(t,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(t){throw t}function getGlobal(t){if(!t)return t;var e=global;return each(t.split("."),function(t){e=e[t]}),e}function makeError(t,e,n,r){var i=new Error(e+"\nhttp://requirejs.org/docs/errors.html#"+t);return i.requireType=t,i.requireModules=r,n&&(i.originalError=n),i}if(void 0===define){if(void 0!==requirejs$1){if(isFunction(requirejs$1))return;cfg=requirejs$1,requirejs$1=void 0}void 0===require||isFunction(require)||(cfg=require,require=void 0),req=requirejs$1=function(t,e,n,r){var i,o,a=defContextName;return isArray(t)||"string"==typeof t||(o=t,isArray(e)?(t=e,e=n,n=r):t=[]),o&&o.context&&(a=o.context),(i=getOwn(contexts,a))||(i=contexts[a]=req.s.newContext(a)),o&&i.configure(o),i.require(t,e,n)},req.config=function(t){return req(t)},req.nextTick=void 0!==setTimeout?function(t){setTimeout(t,4)}:function(t){t()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(t,e,n){var r=t.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return r.type=t.scriptType||"text/javascript",r.charset="utf-8",r.async=!0,r},req.load=function(e,n,r){var t,i=e&&e.config||{};if(isBrowser)return(t=req.createNode(i,n,r)).setAttribute("data-requirecontext",e.contextName),t.setAttribute("data-requiremodule",n),!t.attachEvent||t.attachEvent.toString&&t.attachEvent.toString().indexOf("[native code")<0||isOpera?(t.addEventListener("load",e.onScriptLoad,!1),t.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,t.attachEvent("onreadystatechange",e.onScriptLoad)),t.src=r,i.onNodeCreated&&i.onNodeCreated(t,i,n,r),currentlyAddingScript=t,baseElement?head.insertBefore(t,baseElement):head.appendChild(t),currentlyAddingScript=null,t;if(isWebWorker)try{setTimeout(function(){},0),importScripts(r),e.completeLoad(n)}catch(t){e.onError(makeError("importscripts","importScripts failed for "+n+" at "+r,t,[n]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(t){if(head||(head=t.parentNode),dataMain=t.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||-1!==mainScript.indexOf("!")||(mainScript=(src=mainScript.split("/")).pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(t,n,e){var r,i;"string"!=typeof t&&(e=n,n=t,t=null),isArray(n)||(e=n,n=null),!n&&isFunction(e)&&(n=[],e.length&&(e.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,function(t,e){n.push(e)}),n=(1===e.length?["require"]:["require","exports","module"]).concat(n))),useInteractive&&(r=currentlyAddingScript||getInteractiveScript())&&(t||(t=r.getAttribute("data-requiremodule")),i=contexts[r.getAttribute("data-requirecontext")]),i?(i.defQueue.push([t,n,e]),i.defQueueMap[t]=!0):globalDefQueue.push([t,n,e])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}function newContext(u){var n,t,h,l,c,m={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},f={},d={},r={},p=[],v={},i={},g={},$=1,y=1;function w(t,e,n){var r,i,o,a,s,u,l,c,f,d,h=e&&e.split("/"),p=m.map,v=p&&p["*"];if(t&&(u=(t=t.split("/")).length-1,m.nodeIdCompat&&jsSuffixRegExp.test(t[u])&&(t[u]=t[u].replace(jsSuffixRegExp,"")),"."===t[0].charAt(0)&&h&&(t=h.slice(0,h.length-1).concat(t)),function(t){var e,n;for(e=0;e<t.length;e++)if("."===(n=t[e]))t.splice(e,1),e-=1;else if(".."===n){if(0===e||1===e&&".."===t[2]||".."===t[e-1])continue;0<e&&(t.splice(e-1,2),e-=2)}}(t),t=t.join("/")),n&&p&&(h||v)){t:for(o=(i=t.split("/")).length;0<o;o-=1){if(s=i.slice(0,o).join("/"),h)for(a=h.length;0<a;a-=1)if((r=getOwn(p,h.slice(0,a).join("/")))&&(r=getOwn(r,s))){l=r,c=o;break t}!f&&v&&getOwn(v,s)&&(f=getOwn(v,s),d=o)}!l&&f&&(l=f,c=d),l&&(i.splice(0,c,l),t=i.join("/"))}return getOwn(m.pkgs,t)||t}function b(e){isBrowser&&each(scripts(),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===h.contextName)return t.parentNode.removeChild(t),!0})}function x(t){var e=getOwn(m.paths,t);if(e&&isArray(e)&&1<e.length)return e.shift(),h.require.undef(t),h.makeRequire(null,{skipMap:!0})([t]),!0}function _(t){var e,n=t?t.indexOf("!"):-1;return-1<n&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function S(t,e,n,r){var i,o,a,s,u=null,l=e?e.name:null,c=t,f=!0,d="";return t||(f=!1,t="_@r"+($+=1)),u=(s=_(t))[0],t=s[1],u&&(u=w(u,l,r),o=getOwn(v,u)),t&&(u?d=n?t:o&&o.normalize?o.normalize(t,function(t){return w(t,l,r)}):-1===t.indexOf("!")?w(t,l,r):t:(u=(s=_(d=w(t,l,r)))[0],d=s[1],n=!0,i=h.nameToUrl(d))),{prefix:u,name:d,parentMap:e,unnormalized:!!(a=!u||o||n?"":"_unnormalized"+(y+=1)),url:i,originalName:c,isDefine:f,id:(u?u+"!"+d:d)+a}}function E(t){var e=t.id,n=getOwn(f,e);return n||(n=f[e]=new h.Module(t)),n}function k(t,e,n){var r=t.id,i=getOwn(f,r);!hasProp(v,r)||i&&!i.defineEmitComplete?(i=E(t)).error&&"error"===e?n(i.error):i.on(e,n):"defined"===e&&n(v[r])}function C(n,t){var e=n.requireModules,r=!1;t?t(n):(each(e,function(t){var e=getOwn(f,t);e&&(e.error=n,e.events.error&&(r=!0,e.emit("error",n)))}),r||req.onError(n))}function q(){globalDefQueue.length&&(each(globalDefQueue,function(t){var e=t[0];"string"==typeof e&&(h.defQueueMap[e]=!0),p.push(t)}),globalDefQueue=[])}function A(t){delete f[t],delete d[t]}function P(){var t,r,e=1e3*m.waitSeconds,i=e&&h.startTime+e<(new Date).getTime(),o=[],a=[],s=!1,u=!0;if(!n){if(n=!0,eachProp(d,function(t){var e=t.map,n=e.id;if(t.enabled&&(e.isDefine||a.push(t),!t.error))if(!t.inited&&i)x(n)?s=r=!0:(o.push(n),b(n));else if(!t.inited&&t.fetched&&e.isDefine&&(s=!0,!e.prefix))return u=!1}),i&&o.length)return(t=makeError("timeout","Load timeout for modules: "+o,null,o)).contextName=h.contextName,C(t);u&&each(a,function(t){!function i(o,a,s){var t=o.map.id;o.error?o.emit("error",o.error):(a[t]=!0,each(o.depMaps,function(t,e){var n=t.id,r=getOwn(f,n);!r||o.depMatched[e]||s[n]||(getOwn(a,n)?(o.defineDep(e,v[n]),o.check()):i(r,a,s))}),s[t]=!0)}(t,{},{})}),i&&!r||!s||!isBrowser&&!isWebWorker||c||(c=setTimeout(function(){c=0,P()},50)),n=!1}}function a(t){hasProp(v,t[0])||E(S(t[0],null,!0)).init(t[1],t[2])}function o(t,e,n,r){t.detachEvent&&!isOpera?r&&t.detachEvent(r,e):t.removeEventListener(n,e,!1)}function s(t){var e=t.currentTarget||t.srcElement;return o(e,h.onScriptLoad,"load","onreadystatechange"),o(e,h.onScriptError,"error"),{node:e,id:e&&e.getAttribute("data-requiremodule")}}function j(){var t;for(q();p.length;){if(null===(t=p.shift())[0])return C(makeError("mismatch","Mismatched anonymous define() module: "+t[t.length-1]));a(t)}h.defQueueMap={}}return l={require:function(t){return t.require?t.require:t.require=h.makeRequire(t.map)},exports:function(t){if(t.usingExports=!0,t.map.isDefine)return t.exports?v[t.map.id]=t.exports:t.exports=v[t.map.id]={}},module:function(t){return t.module?t.module:t.module={id:t.map.id,uri:t.map.url,config:function(){return getOwn(m.config,t.map.id)||{}},exports:t.exports||(t.exports={})}}},(t=function(t){this.events=getOwn(r,t.id)||{},this.map=t,this.shim=getOwn(m.shim,t.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0}).prototype={init:function(t,e,n,r){r=r||{},this.inited||(this.factory=e,n?this.on("error",n):this.events.error&&(n=bind(this,function(t){this.emit("error",t)})),this.depMaps=t&&t.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check())},defineDep:function(t,e){this.depMatched[t]||(this.depMatched[t]=!0,this.depCount-=1,this.depExports[t]=e)},fetch:function(){if(!this.fetched){this.fetched=!0,h.startTime=(new Date).getTime();var t=this.map;if(!this.shim)return t.prefix?this.callPlugin():this.load();h.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return t.prefix?this.callPlugin():this.load()}))}},load:function(){var t=this.map.url;i[t]||(i[t]=!0,h.load(this.map.id,t))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id,r=this.depExports,i=this.exports,o=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{i=h.execCb(n,o,r,i)}catch(t){e=t}else i=h.execCb(n,o,r,i);if(this.map.isDefine&&void 0===i&&((t=this.module)?i=t.exports:this.usingExports&&(i=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",C(this.error=e)}else i=o;if(this.exports=i,this.map.isDefine&&!this.ignore&&(v[n]=i,req.onResourceLoad)){var a=[];each(this.depMaps,function(t){a.push(t.normalizedMap||t)}),req.onResourceLoad(h,this.map,a)}A(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(h.defQueueMap,n)||this.fetch()}},callPlugin:function(){var u=this.map,l=u.id,t=S(u.prefix);this.depMaps.push(t),k(t,"defined",bind(this,function(t){var o,e,n,r=getOwn(g,this.map.id),i=this.map.name,a=this.map.parentMap?this.map.parentMap.name:null,s=h.makeRequire(u.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(t.normalize&&(i=t.normalize(i,function(t){return w(t,a,!0)})||""),k(e=S(u.prefix+"!"+i,this.map.parentMap,!0),"defined",bind(this,function(t){this.map.normalizedMap=e,this.init([],function(){return t},null,{enabled:!0,ignore:!0})})),void((n=getOwn(f,e.id))&&(this.depMaps.push(e),this.events.error&&n.on("error",bind(this,function(t){this.emit("error",t)})),n.enable()))):r?(this.map.url=h.nameToUrl(r),void this.load()):((o=bind(this,function(t){this.init([],function(){return t},null,{enabled:!0})})).error=bind(this,function(t){this.inited=!0,(this.error=t).requireModules=[l],eachProp(f,function(t){0===t.map.id.indexOf(l+"_unnormalized")&&A(t.map.id)}),C(t)}),o.fromText=bind(this,function(t,e){var n=u.name,r=S(n),i=useInteractive;e&&(t=e),i&&(useInteractive=!1),E(r),hasProp(m.config,l)&&(m.config[n]=m.config[l]);try{req.exec(t)}catch(t){return C(makeError("fromtexteval","fromText eval for "+l+" failed: "+t,t,[l]))}i&&(useInteractive=!0),this.depMaps.push(r),h.completeLoad(n),s([n],o)}),void t.load(u.name,s,o,m))})),h.enable(t,this),this.pluginMaps[t.id]=t},enable:function(){(d[this.map.id]=this).enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(t,e){var n,r,i;if("string"==typeof t){if(t=S(t,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[e]=t,i=getOwn(l,t.id))return void(this.depExports[e]=i(this));this.depCount+=1,k(t,"defined",bind(this,function(t){this.undefed||(this.defineDep(e,t),this.check())})),this.errback?k(t,"error",bind(this,this.errback)):this.events.error&&k(t,"error",bind(this,function(t){this.emit("error",t)}))}n=t.id,r=f[n],hasProp(l,n)||!r||r.enabled||h.enable(t,this)})),eachProp(this.pluginMaps,bind(this,function(t){var e=getOwn(f,t.id);e&&!e.enabled&&h.enable(t,this)})),this.enabling=!1,this.check()},on:function(t,e){var n=this.events[t];n||(n=this.events[t]=[]),n.push(e)},emit:function(t,e){each(this.events[t],function(t){t(e)}),"error"===t&&delete this.events[t]}},(h={config:m,contextName:u,registry:f,defined:v,urlFetched:i,defQueue:p,defQueueMap:{},Module:t,makeModuleMap:S,nextTick:req.nextTick,onError:C,configure:function(t){if(t.baseUrl&&"/"!==t.baseUrl.charAt(t.baseUrl.length-1)&&(t.baseUrl+="/"),"string"==typeof t.urlArgs){var n=t.urlArgs;t.urlArgs=function(t,e){return(-1===e.indexOf("?")?"?":"&")+n}}var r=m.shim,i={paths:!0,bundles:!0,config:!0,map:!0};eachProp(t,function(t,e){i[e]?(m[e]||(m[e]={}),mixin(m[e],t,!0,!0)):m[e]=t}),t.bundles&&eachProp(t.bundles,function(t,e){each(t,function(t){t!==e&&(g[t]=e)})}),t.shim&&(eachProp(t.shim,function(t,e){isArray(t)&&(t={deps:t}),!t.exports&&!t.init||t.exportsFn||(t.exportsFn=h.makeShimExports(t)),r[e]=t}),m.shim=r),t.packages&&each(t.packages,function(t){var e;e=(t="string"==typeof t?{name:t}:t).name,t.location&&(m.paths[e]=t.location),m.pkgs[e]=t.name+"/"+(t.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(f,function(t,e){t.inited||t.map.unnormalized||(t.map=S(e,null,!0))}),(t.deps||t.callback)&&h.require(t.deps||[],t.callback)},makeShimExports:function(e){return function(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}},makeRequire:function(o,a){function s(t,e,n){var r,i;return a.enableBuildCallback&&e&&isFunction(e)&&(e.__requireJsBuild=!0),"string"==typeof t?isFunction(e)?C(makeError("requireargs","Invalid require call"),n):o&&hasProp(l,t)?l[t](f[o.id]):req.get?req.get(h,t,o,s):(r=S(t,o,!1,!0).id,hasProp(v,r)?v[r]:C(makeError("notloaded",'Module name "'+r+'" has not been loaded yet for context: '+u+(o?"":". Use require([])")))):(j(),h.nextTick(function(){j(),(i=E(S(null,o))).skipMap=a.skipMap,i.init(t,e,n,{enabled:!0}),P()}),s)}return a=a||{},mixin(s,{isBrowser:isBrowser,toUrl:function(t){var e,n=t.lastIndexOf("."),r=t.split("/")[0];return-1!==n&&(!("."===r||".."===r)||1<n)&&(e=t.substring(n,t.length),t=t.substring(0,n)),h.nameToUrl(w(t,o&&o.id,!0),e,!0)},defined:function(t){return hasProp(v,S(t,o,!1,!0).id)},specified:function(t){return t=S(t,o,!1,!0).id,hasProp(v,t)||hasProp(f,t)}}),o||(s.undef=function(n){q();var t=S(n,o,!0),e=getOwn(f,n);e.undefed=!0,b(n),delete v[n],delete i[t.url],delete r[n],eachReverse(p,function(t,e){t[0]===n&&p.splice(e,1)}),delete h.defQueueMap[n],e&&(e.events.defined&&(r[n]=e.events),A(n))}),s},enable:function(t){getOwn(f,t.id)&&E(t).enable()},completeLoad:function(t){var e,n,r,i=getOwn(m.shim,t)||{},o=i.exports;for(q();p.length;){if(null===(n=p.shift())[0]){if(n[0]=t,e)break;e=!0}else n[0]===t&&(e=!0);a(n)}if(h.defQueueMap={},r=getOwn(f,t),!e&&!hasProp(v,t)&&r&&!r.inited){if(!(!m.enforceDefine||o&&getGlobal(o)))return x(t)?void 0:C(makeError("nodefine","No define call for "+t,null,[t]));a([t,i.deps||[],i.exportsFn])}P()},nameToUrl:function(t,e,n){var r,i,o,a,s,u,l=getOwn(m.pkgs,t);if(l&&(t=l),u=getOwn(g,t))return h.nameToUrl(u,e,n);if(req.jsExtRegExp.test(t))a=t+(e||"");else{for(r=m.paths,o=(i=t.split("/")).length;0<o;o-=1)if(s=getOwn(r,i.slice(0,o).join("/"))){isArray(s)&&(s=s[0]),i.splice(0,o,s);break}a=i.join("/"),a=("/"===(a+=e||(/^data\:|^blob\:|\?/.test(a)||n?"":".js")).charAt(0)||a.match(/^[\w\+\.\-]+:/)?"":m.baseUrl)+a}return m.urlArgs&&!/^blob\:/.test(a)?a+m.urlArgs(t,a):a},load:function(t,e){req.load(h,t,e)},execCb:function(t,e,n,r){return e.apply(r,n)},onScriptLoad:function(t){if("load"===t.type||readyRegExp.test((t.currentTarget||t.srcElement).readyState)){interactiveScript=null;var e=s(t);h.completeLoad(e.id)}},onScriptError:function(t){var n=s(t);if(!x(n.id)){var r=[];return eachProp(f,function(t,e){0!==e.indexOf("_@r")&&each(t.depMaps,function(t){if(t.id===n.id)return r.push(e),!0})}),C(makeError("scripterror",'Script error for "'+n.id+(r.length?'", needed by: '+r.join(", "):'"'),t,[n.id]))}}}).require=h.makeRequire(),h}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState||eachReverse(scripts(),function(t){if("interactive"===t.readyState)return interactiveScript=t}),interactiveScript}}(void 0,"undefined"==typeof setTimeout?void 0:setTimeout);var module$5=angular.module("randomize",[]);module$5.value("randomizeRandom",Math.random),module$5.value("randomizeShuffle",lodash.shuffle),module$5.value("randomizeInt",function(t){return Math.floor(Math.random()*t)}),module$5.value("randomizeRange",function(t){return lodash.shuffle(lodash.range(t))});var consoleModule$1=angular.module("piConsole",[]);function mixerSequentialProvider(a){return function t(e,n,r){var i,o=e[0];if(r=r||0,10<=r++)throw new Error("Mixer: the mixer allows a maximum depth of 10");return lodash.isUndefined(o.mixer)?e:(i=a(o,n),e.shift(),i=i.concat(e),lodash.isUndefined(i[0])||lodash.isUndefined(i[0].mixer)?i:t(i,n,r))}}function mixerRecursiveProvider(i){return function e(t,n,r){if(r=r||0,10<=r++)throw new Error("Mixer: the mixer allows a maximum depth of 10");return lodash(t).map(function(t){return lodash.isUndefined(t.mixer)?t:e(i(t,n),n,r)}).flatten().value()}}consoleModule$1.factory("piConsole",piConsoleFactory),mixerSequentialProvider.$inject=["mixer"],mixerRecursiveProvider.$inject=["mixer"];var module$4=angular.module("mixer",[module$5.name,consoleModule$1.name]);function templateFilter$1(n,r){return function(e,t){if(!~e.indexOf("<%"))return e;t=lodash.extend(t||{},r);try{return lodash.template(e)(t)}catch(t){return n.error('ERROR: "'+t.message+'" in the following template: ',e),""}}}module$4.service("mixer",mixProvider),module$4.service("mixerSequential",mixerSequentialProvider),module$4.service("mixerRecursive",mixerRecursiveProvider),module$4.service("MixerSequence",mixerSequenceProvider$1),module$4.value("dotNotation",dotNotation$1),module$4.service("mixerDotNotation",mixerDotNotationProvider$1),module$4.service("mixerCondition",mixerConditionProvider$1),module$4.service("mixerEvaluate",evaluateProvider),module$4.config(["$provide",function(t){t.decorator("mixer",mixerBranchingDecorator$1)}]),module$4.constant("mixerDefaultContext",{}),templateFilter$1.$inject=["$log","templateDefaultContext"];var module$6=angular.module("template",[]);module$6.filter("template",templateFilter$1),module$6.service("templateObj",templateObjProvider$1),module$6.constant("templateDefaultContext",{});var module$3=angular.module("database",[module$4.name,module$6.name,consoleModule$1.name]).service("Collection",collectionService).service("DatabaseRandomizer",RandomizerProvider).service("databaseQuery",queryProvider$1).service("databaseInflate",inflateProvider$1).service("DatabaseStore",storeProvider$1).service("Database",DatabaseProvider).service("databaseSequence",SequenceProvider),module$7=angular.module("piConsole",[]);function piConsoleFactory$1(r){return window.DEBUG?function t(e){if(lodash.get(t,"settings.hideConsole",!1))return window.postMessage({type:"kill-console"},"*");r[e.type]&&r[e.type](e.message);window.postMessage((n=e,lodash.cloneDeep(n,function(t){return lodash.isFunction(t)?"Function: "+t.name:lodash.isError(t)?{name:t.name,message:t.message,stack:t.stack}:void 0})),"*");var n}:lodash.noop}function SequenceProvider$1(){function t(t,e){if(!e)throw new Error("Sequences need to take a db as the second argument");this.sequence=e.sequence("pages",t),this.db=e}return lodash.extend(t.prototype,{next:function(t){return this.sequence.next(t),this},prev:function(t){return this.sequence.prev(t),this},current:function(t){var e,n=this.sequence.current(t,{skip:["questions"]});if(!n)return n;e=n.questions?lodash.isArray(n.questions)?n.questions:[n.questions]:[];var r=this.db.sequence("questions",e).all({pagesData:n.data,pagesMeta:n.$meta});return(n=lodash.clone(n,!0)).questions=r,n}}),t}module$7.factory("piConsole",piConsoleFactory$1),piConsoleFactory$1.$inject=["$log"];var stream=createCommonjsModule(function(t){!function(){var e=0,i={};function a(){function t(){return 0<arguments.length&&arguments[0]!==i&&r(t,arguments[0]),t._state.value}var n;return(n=t).constructor=a,n._state={id:e++,value:void 0,state:0,derive:void 0,recover:void 0,deps:{},parents:[],endStream:void 0,unregister:void 0},n.map=n["fantasy-land/map"]=c,n["fantasy-land/ap"]=f,n["fantasy-land/of"]=a,n.valueOf=d,n.toJSON=h,n.toString=d,Object.defineProperties(n,{end:{get:function(){if(!n._state.endStream){var e=a();e.map(function(t){return!0===t&&(l(n),e._state.unregister=function(){l(e)}),t}),n._state.endStream=e}return n._state.endStream}}}),0<arguments.length&&arguments[0]!==i&&r(t,arguments[0]),t}function r(t,e){for(var n in o(t,e),t._state.deps)s(t._state.deps[n],!1);null!=t._state.unregister&&t._state.unregister(),function(t){for(var e in t._state.changed=!1,t._state.deps)t._state.deps[e]._state.changed=!1}(t)}function o(t,e){t._state.value=e,t._state.changed=!0,2!==t._state.state&&(t._state.state=1)}function s(t,e){var n=t._state.parents;if(0<n.length&&n.every(v)&&(e||n.some(m))){var r=t._state.derive();if(r===i)return!1;o(t,r)}}function u(t,e){if(!e.every(p))throw new Error("Ensure that each item passed to stream.combine/stream.merge is a stream");return n=a(),r=e,i=function(){return t.apply(this,e.concat([e.filter(m)]))},(o=n._state).derive=i,o.parents=r.filter(g),function t(e,n){for(var r=0;r<n.length;r++)n[r]._state.deps[e._state.id]=e,t(e,n[r]._state.parents)}(n,o.parents),s(n,!0),n;var n,r,i,o}function l(t){for(var e=0;e<t._state.parents.length;e++){delete t._state.parents[e]._state.deps[t._state.id]}for(var n in t._state.deps){var r=t._state.deps[n],i=r._state.parents.indexOf(t);-1<i&&r._state.parents.splice(i,1)}t._state.state=2,t._state.deps={}}function c(e){return u(function(t){return e(t())},[this])}function f(t){return u(function(t,e){return t()(e())},[t,this])}function d(){return this._state.value}function h(){return null!=this._state.value&&"function"==typeof this._state.value.toJSON?this._state.value.toJSON():this._state.value}function p(t){return t._state}function v(t){return 1===t._state.state}function m(t){return t._state.changed}function g(t){return 2!==t._state.state}(a["fantasy-land/of"]=a).merge=function(t){return u(function(){return t.map(function(t){return t()})},t)},a.combine=u,a.scan=function(e,n,t){var r=u(function(t){return n=e(n,t._state.value)},[t]);return 0===r._state.state&&r(n),r},a.scanMerge=function(r,i){var t=r.map(function(t){var e=t[0];return 0===e._state.state&&e(void 0),e});return u(function(){var n=arguments[arguments.length-1];return t.forEach(function(t,e){-1<n.indexOf(t)&&(i=r[e][1](i,t._state.value))}),i},t)},a.HALT=i,t.exports=a}()});function createLogs(t,e,n){var r,i=e.logger||e.logMap||n;return t.map((r=i,function(t){return r.apply(null,t)}))}function dfltQuestLogger(t,e){var n=lodash.extend({},e,t);return n.declined&&(n.response=t.responseObj=void 0),n}function TaskProvider(i,o,a,s,u){function t(t){var e=this,n=t.settings||{},r=u.global;if(!lodash.isArray(t.sequence))throw new Error("Task: no sequence was defined");this.script=t,this.db=new o,this.sequence=new a(t.sequence,this.db),this.$logSource=stream(),this.$logs=createLogs(this.$logSource,n.logger||{},dfltQuestLogger),this.q=i.defer(),this.promise=this.q.promise.then(function(){lodash.each(u.current.questions,function(t){if(t.$logged)return!0;e.log(t,{},r),t.$logged=!0}),e.$logSource.end(!0),e.$logs.end(!0)}).finally(n.onEnd||lodash.noop),s(t,this.db)}return lodash.extend(t.prototype,{log:function(){this.$logSource.call(null,[].slice.call(arguments))},current:function(){var t=this.sequence.current();return t||this.end(),t},next:function(){return this.sequence.next()},prev:function(){return this.sequence.prev()},end:function(){this.q.resolve()}}),t}function parseProvider(){return function(t,e){e.createColl("pages"),e.createColl("questions"),e.add("pages",t.pagesSets||[]),e.add("questions",t.questionsSets||[]),t.settings||(t.settings={})}}TaskProvider.$inject=["$q","Database","QuestSequence","taskParse","$rootScope"];var module$2=angular.module("task",[module$3.name,module$7.name]),nowFn;function stopperProvider(t){function e(){this.startTime=t()}return e.prototype.now=function(){return t()-this.startTime},e}function timerController(f,e){var d=this,h={};function p(){var t=h.options,e=d.stopper.now(),n=d.targetTime-e;if(e>=d.targetTime)return h.$emit("timer-end"),void(t.removeOnEnd&&d.remove());var r,i,o,a,s,u,l,c="up"===t.direction?e:n;lodash.extend(h,(r=c,i=Math.floor(r/1e3),o=Math.floor(i/3600),a=i%3600,s=Math.floor(a/60),u=a%60,l=Math.ceil(u),{current:r,hours:o,minutes:s,seconds:l,milis:r%1e3})),d.timeoutId=f(p,Math.min(100,n)),h.$emit("timer-tick")}d.start=function(t){if(!lodash.isPlainObject(t))throw new Error("Timer options must be an object");(h=d.getScope()).options=lodash.defaults(t,{direction:"down",template:"normal",show:!0,removeOnEnd:!0,duration:0}),d.stopper=new e,d.targetTime=1e3*h.options.duration,h.options.show&&d.show(),p()},d.stop=function(){var t=h.options||{};h=d.getScope(),f.cancel(d.timeoutId),t.removeOnEnd&&d.remove()}}function timerDirective(s){return{controller:timerController,priority:400,link:function(t,e,n,r){var i,o=t.$new();function a(){i&&i.remove(),i=null}r.show=function(){i=angular.element('<div class="pi-timer well well-sm text-center" style="font-family: monospace;">{{minutes}}:{{zeroPad(seconds)}}</div>'),e.prepend(i),s(i.contents())(o)},r.remove=a,r.getScope=function(){return o},o.zeroPad=function(t){return t<10?"0"+t:t},t.$on("$destroy",a)}}}module$2.service("QuestSequence",SequenceProvider$1),module$2.service("QuestTask",TaskProvider),module$2.service("taskParse",parseProvider),module$2.value("dfltQuestLogger",dfltQuestLogger),stopperProvider.$inject=["timerNow"],timerController.$inject=["$timeout","timerStopper"],timerDirective.$inject=["$compile"],window.performance&&(nowFn=performance.now||performance.mozNow||performance.webkitNow||performance.msNow||performance.oNow);var timerNow=nowFn?function(){return nowFn.apply(performance)}:function(){return+new Date},module$9=angular.module("timer",[]);module$9.service("timerStopper",stopperProvider),module$9.directive("piTimer",timerDirective),module$9.value("timerNow",timerNow);var preloadImages=preload.bind(null,preloadImg);function preload(t,e){var n=0;function r(){n<e.length&&t(e[n++],r)}r(),r(),r(),r()}function preloadImg(t,e){var n=new Image;n.onload=e,n.onerror=e,n.src=t}var module$10=angular.module("pi.utils",[]);module$10.value("piPreloadImages",preloadImages),module$10.service("piInvoke",["$injector",function(r){var i=r.get("$rootScope");return function(t,e){var n=i.global||{};t&&r.invoke(t,null,lodash.extend(e,{global:n,current:n.current}))}}]);var buttons=angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(t){this.activeClass=t.activeClass||"active",this.toggleEvent=t.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(e,n,r,t){var i=t[0],o=t[1];o.$render=function(){n.toggleClass(i.activeClass,angular.equals(o.$modelValue,e.$eval(r.btnRadio)))},n.bind(i.toggleEvent,function(){var t=n.hasClass(i.activeClass);t&&!angular.isDefined(r.uncheckable)||e.$apply(function(){o.$setViewValue(t?null:e.$eval(r.btnRadio)),o.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(r,t,e,n){var i=n[0],o=n[1];function a(){return s(e.btnCheckboxTrue,!0)}function s(t,e){var n=r.$eval(t);return angular.isDefined(n)?n:e}o.$render=function(){t.toggleClass(i.activeClass,angular.equals(o.$modelValue,a()))},t.bind(i.toggleEvent,function(){r.$apply(function(){o.$setViewValue(t.hasClass(i.activeClass)?s(e.btnCheckboxFalse,!1):a()),o.$render()})})}}}),template='<div class="modal in minno-modal" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n\t<div class="modal-dialog">\n\t\t<div class="modal-content">\n\t\t\t<div class="modal-header" ng-if="header">\n\t\t\t\t<button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="close()"><span aria-hidden="true">&times;</span></button>\n\t\t\t\t<h4 class="modal-title" id="myModalLabel">{{ header }}</h4>\n\t\t\t</div>\n\t\t\t<div class="modal-body">{{body}}</div>\n\t\t\t<div class="modal-footer">\n\t\t\t\t<button type="button" class="btn btn-default" ng-click="close()">{{button || "Close"}}</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n';function modalConstructor(n,r,i,o,a){var s,u,l,c=angular.element('<div class="modal-backdrop in"/>');function f(){s&&s.remove(),u&&u.$destroy(),l&&l.resolve(),c.remove(),a.off("keydown",f),r.removeClass("modal-open")}this.open=function(t){var e=t.context||{};return f(),l=o.defer(),(u=(t.$scope||n).$new()).close=f,a.on("keydown",f),u.header=lodash.template(t.header)(e),u.body=lodash.template(t.body)(e),u.button=lodash.template(t.button)(e),s=angular.element(template),r.addClass("modal-open"),r.prepend(c),r.prepend(s),i(s.contents())(u),u.$digest(),l.promise},this.close=f}modalConstructor.$inject=["$rootScope","$rootElement","$compile","$q","$document"];var module$11=angular.module("pi.modal",[]);function questController$1(o,t,a,s,u,l,e,c){var f,d,h=this,p={dflt:NaN,data:o.data};this.scope=o,this.stopper=new t,this.registerModel=function(r,t){t=lodash.defaults(t||{},p),d=t.data;var e=a(s.ngModel),n=d.hasOwnProperty("dflt")?d.dflt:t.dflt;o.model=r,f=e(o.$parent),lodash.isUndefined(f)?(f={},e.assign(o.$parent,f)):u({type:"warn",message:'This question has already been in use: "'+f.name+'"',context:f,tags:["question"]});d.name||u({type:"warn",message:"There is a question without a name! I'd tell you what it is, but it has no name!",tags:["question"],context:d});h.log=r.$modelValue=f,lodash.defaults(f,{name:d.name,response:n,serial:c()}),o.response=r.$viewValue=f.response,r.$formatters.push(function(t){return t.response}),r.$parsers.push(function(t){var e=h.stopper.now();return f.response=t,f.latency=e,f.pristineLatency||(f.pristineLatency=e),f}),o.$watch("response",function(t,e){lodash.isEqual(t,e)||(r.$setViewValue(t),l(d.onChange,{log:f,question:d}))}),o.$on("$destroy",function(){l(d.onDestroy,{log:f,question:d})}),d.correct&&(r.$parsers.push(i),d.response=i(this.log));function i(t){var e=t.response,n=d.correctValue;return lodash.isNumber(n)&&(n+=""),lodash.isNumber(e)&&(e+=""),lodash.isEqual(n,e)?r.$setValidity("correct",!0):r.$setValidity("correct",!1),t}l(d.onCreate,{log:f,question:d}),o.$evalAsync(function(){l(d.onLoad,{log:f,question:d})})},o.$on("quest:submit",function(t){t.preventDefault(),f.declined=void 0,f.submitLatency=h.stopper.now(),l(d.onSubmit,{log:f,question:d})}),o.$on("quest:decline",function(t){t.preventDefault(),f.declined=!0,f.submitLatency=h.stopper.now(),l(d.onDecline,{log:f,question:d})}),o.$on("quest:timeout",function(t){t.preventDefault(),f.timeout=!0,l(d.onTimeout,{log:f,question:d})})}function guidFactory(){var t=0;return function(){return t++}}module$11.service("piModal",modalConstructor),questController$1.$inject=["$scope","timerStopper","$parse","$attrs","piConsole","piInvoke","$rootScope","questGuid"];var template$1="<div piq-page></div>",jqLite=angular.element;function piQuestCtrl(r,t,e,n,i,o){var a,s=new e(r.script),u=t.global,l=t.current||{};this.task=s,this.timerSetup=function(t){var n=lodash.get(r,"script.settings.timer");if(!n)return;t.start(n),t.getScope().$on("timer-end",function(){var t=n.message;function e(){s.end()}t?(lodash.isString(t)&&(t={body:t}),lodash.defaults(t,{$context:a}),o.open(t).then(e)):e()}),r.$on("$destroy",lodash.bind(t.stop,t))},l.questions||(l.questions={}),a={global:u,current:l,questions:l.questions},lodash.extend(n,a),lodash.extend(i,a),s.next(),r.$on("quest:next",function(t,e){s.next(e),r.$emit("quest:newPage")}),r.$on("quest:prev",function(t,e){s.prev(e),r.$emit("quest:newPage")}),r.$on("quest:log",function(t,e,n){s.log(e,n,r.global)})}function directive(d,h,p,v){return{controller:piQuestCtrl,terminal:!0,replace:!0,template:"<div pi-timer></div>",require:["piQuest","piTimer"],link:function(r,i,t,e){var o,a,n,s=e[0],u=s.task,l=e[1];function c(){n&&(n.remove(),n=null),o&&(o.$destroy(),o=null),a&&(h.leave(a,function(){n=null}),n=a,a=null)}function f(){var t=u.current();if(t){var e=r.$new(),n=jqLite(template$1);(function(t,e){if(!e)return;var n=e.split(" ");lodash.each(n,function(t){p.has("."+t+"-animation")||v({type:"error",message:'Unknown animation type: "'+t+'"',tags:["page","animation"]})}),t.addClass(e)})(n,(e.page=t).animate),c(),a=d(n)(e),h.enter(a,i),(o=e).$emit("quest:updated")}else c()}s.timerSetup(l),r.$on("quest:refresh",function(){o.page=u.current()}),r.$on("quest:newPage",f),f()}}}piQuestCtrl.$inject=["$scope","$rootScope","QuestTask","templateDefaultContext","mixerDefaultContext","piModal"],directive.$inject=["$compile","$animate","$injector","piConsole"];var template$2='<div ng-form name="pageForm" pi-timer>\n\t<h3 ng-if="page.header" ng-bind-html="page.header" ng-style="page.headerStyle"></h3>\n\t<div pi-timer="page.timer"></div>\n\t<div ng-if="page.progressBar" class="text-center" ng-bind-html="page.progressBar"></div>\n\n\t<div ng-bind-html="page.text"></div>\n\t<ol ng-class="{\'list-unstyled\':!page.numbered}" start="{{page.numberStart}}">\n\t\t<li ng-repeat="quest in page.questions">\n\t\t\t<div quest-wrapper quest-data="quest" quest-current="current"></div>\n\t\t</li>\n\t</ol>\n\n\t<div pi-quest-validation="pageForm.$error.pageValidation" pi-post-submit="submitAttempt">{{page.pageValidationText || \'Invalid page\'}}</div>\n\n\t<div class="page-buttons">\n\t\t<button\n\t\t\tng-click="prev()"\n\t\t\tclass="btn page-prev"\n\t\t\tng-if="page.prev && page.$meta.number > 1"\n\t\t>{{page.prevText || "Go Back"}}</button>\n\n\t\t<button\n\t\t\tng-click="decline($event)"\n\t\t\tclass="btn page-decline"\n\t\t\tng-if="page.decline"\n\t\t>{{page.declineText || "Decline"}}</button>\n\n\t\t<button\n\t\t\tng-click="submit()"\n\t\t\tclass="btn page-submit"\n\t\t\tng-if="!page.noSubmit"\n\t\t>{{page.submitText || "Submit"}}</button>\n\t</div>\n</div>\n';function piqPageCtrl(i,t,o,a){var s=this;i.global=o.global,i.current=o.current,this.harvest=function(n){var r=i.current.questions;lodash.each(i.page.questions,function(t){if(t.name&&(n||t.lognow)){var e=r[t.name];e.$logged||(i.$emit("quest:log",e,s.log),e.$logged=!0)}})},i.submit=function(t){var e=i.pageForm.$valid;if(i.submitAttempt=!0,!e&&!0!==t)return!0;i.$broadcast("quest:submit"),s.proceed(),i.$emit("quest:next")},i.decline=function(t){var e=angular.element(t.target);"double"!==this.page.decline||e.hasClass("active")?(i.$broadcast("quest:decline"),s.proceed(),i.$emit("quest:next")):e.addClass("active")},i.prev=function(){s.proceed(),i.$emit("quest:prev")},this.proceed=function(){s.timer.stop(),s.harvest(i.page.lognow)},this.setup=function(t){var n=i.page;s.timer=t,s.log={name:n.name,startTime:+new Date},n.timer&&(t.start(n.timer),t.getScope().$on("timer-end",function(){var t,e=n.timer.message;s.log.timeout=!0,i.$broadcast("quest:timeout"),e?(t={pagesMeta:n.$meta,pagesData:n.data,global:o.global,current:o.current},lodash.isString(e)&&(e={body:e}),lodash.defaults(e,{$context:t,$scope:i}),a.open(e).then(r)):r()}));function r(){var t=n.timer.submitOnEnd||lodash.isUndefined(n.timer.submitOnEnd);t&&i.submit(!0)}},i.$watch("current.questions",function(){i.$emit("quest:refresh")},!0),i.$on("quest:submit:now",function(){i.submit()})}function directive$1(o){return{replace:!0,controller:piqPageCtrl,template:template$2,require:["piqPage","piTimer"],link:function(t,e,n,r){var i=t.page;o.scrollTo(0,0),r[0].setup(r[1]),lodash.isFunction(i.pageValidation)&&t.$watch(function(){t.pageForm.$setValidity("pageValidation",i.pageValidation(i,t.current))})}}}piqPageCtrl.$inject=["$scope","$timeout","$rootScope","piModal"],directive$1.$inject=["$window"];var template$3='<div class="form-group" ng-form="questForm">\n\t<label ng-hide="data.inline" for="{{data.name}}" ng-bind-html="data.stem" ng-style="data.stemCss"></label>\n\t<div ng-bind-html="data.description"></div>\n\t<div quest-data="data" ng-model="current.questions[data.name]" ng-style="{\'max-width\':data.maxWidth}"></div>\n\t<p class="help-block" ng-if="data.help" ng-bind-html="data.helpText"></p>\n</div>\n',PREFIX="quest";function capitaliseFirstLetter(t){return t.charAt(0).toUpperCase()+t.slice(1)}function directive$2(o,a){return{replace:!0,template:template$3,priority:5,scope:{data:"=questData",current:"=questCurrent"},link:function(t,e){var n=t.data.type||"text",r=e.children().eq(2),i=PREFIX+capitaliseFirstLetter(n);if(!a.has(i+"Directive"))throw new Error('Unknown question type: "'+n+'"');i=lodash.kebabCase(i),r.attr(i,!0),o(r)(t)}}}directive$2.$inject=["$compile","$injector"];var textTemplate='<div ng-form ng-class="{\'form-inline\':data.inline}">\n\t<label ng-show="data.inline" for="{{data.name}}" ng-bind-html="data.stem" ng-style="data.stemCss"></label>\n\t<input\n\t \ttype="text"\n\t\tng-model="response"\n\t\tng-minlength="{{data.minLength || data.minlength}}"\n\t\tng-maxlength="{{data.maxlength}}"\n\t\tng-pattern="data.pattern | toRegex"\n\t\tng-required="{{data.required}}"\n\t\tclass="form-control"\n\t\tng-attr-style="width:{{data.width | dfltUnits}}"\n\n\t\tng-keydown="data.maxlengthLimit && maxlengthLimit($event)"\n\t\tng-keyup="data.maxlengthLimit && maxlengthLimit($event)"\n\t/>\n\t<div pi-quest-validation="form.$error.minlength">{{data.errorMsg.minLength || data.errorMsg.minlength || "Too short!"}}</div>\n\t<div pi-quest-validation="form.$error.maxlength">{{data.errorMsg.maxlength || "Too long!"}}</div>\n\t<div pi-quest-validation="form.$error.pattern">{{data.errorMsg.pattern || "wrong pattern!"}}</div>\n\t<div pi-quest-validation="form.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n\t<div pi-quest-validation="model.$error.correct">{{data.errorMsg.correct || "You must answer the correct answer!"}}</div>\n</div>',textareaTemplate='<div ng-form ng-class="{\'form-inline\':data.inline}">\n\t<label ng-show="data.inline" for="{{data.name}}" ng-bind-html="data.stem" ng-style="data.stemCss"></label>\n\t<textarea\n\t \ttype="text"\n\t\tng-model="response"\n\t\tng-minlength="{{data.minLength || data.minlength}}"\n\t\tng-maxlength="{{data.maxlength}}"\n\t\tng-pattern="data.pattern | toRegex"\n\t\tng-required="{{data.required}}"\n\t\tclass="form-control"\n\n\t\tng-attr-style="resize:none;width:{{data.columns? \'auto\' : data.width | dfltUnits}};"\n\t\tcols="{{data.columns}}"\n\t\trows="{{data.rows}}"\n\n\t\tng-keydown="data.maxlengthLimit && maxlengthLimit($event)"\n\t\tng-keyup="data.maxlengthLimit && maxlengthLimit($event)"\n\t/>\n\t<div pi-quest-validation="form.$error.minlength">{{data.errorMsg.minLength || data.errorMsg.minlength || "Too short!"}}</div>\n\t<div pi-quest-validation="form.$error.maxlength">{{data.errorMsg.maxlength || "Too long!"}}</div>\n\t<div pi-quest-validation="form.$error.pattern">{{data.errorMsg.pattern || "wrong pattern!"}}</div>\n\t<div pi-quest-validation="form.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n\t<div pi-quest-validation="model.$error.correct">{{data.errorMsg.correct || "You must answer the correct answer!"}}</div>\n</div>';function textDirective(){return{replace:!0,template:function(t,e){return"questText"in e?textTemplate:textareaTemplate},require:["form","ngModel"],controller:"questController",controllerAs:"ctrl",scope:{data:"=questData"},link:function(r,t,e,n){var i=n[0],o=n[1],a=r.ctrl,s=r.data;r.form=i,r.maxlengthLimit=function(t){var e=angular.element(t.target).val(),n=s.maxlength||e.length;r.response=e.slice(0,n)},a.registerModel(o,{dflt:""}),s.autoSubmit&&t.bind("keydown keypress",function(t){13===t.which&&(r.$apply(function(){r.$emit("quest:submit:now")}),t.preventDefault())})}}}var template$4='<div ng-form ng-class="{\'form-inline\':data.inline}">\n\t<label ng-show="data.inline" for="{{data.name}}" ng-bind-html="data.stem" ng-style="data.stemCss"></label>\n\t<input\n\t \ttype="number"\n\t\tng-model="response"\n\t\tng-required="{{data.required}}"\n\t\tclass="form-control"\n\t\tng-attr-style="width:{{data.width | dfltUnits}}"\n\t>\n\t<div pi-quest-validation="form.$error.number">{{data.errorMsg.number || "Must be a number!"}}</div>\n\t<div pi-quest-validation="form.$error.qstMin">{{data.errorMsg.min || "Too small!"}}</div>\n\t<div pi-quest-validation="form.$error.qstMax">{{data.errorMsg.max || "Too big!"}}</div>\n\t<div pi-quest-validation="form.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n\t<div pi-quest-validation="model.$error.correct">{{data.errorMsg.correct || "You must answer the correct answer!"}}</div>\n</div>',directive$3=function(){return{replace:!0,template:template$4,require:["form","ngModel","^?piqPage"],controller:"questController",controllerAs:"ctrl",scope:{data:"=questData"},link:function(n,t,e,r){var i=r[0],o=t.find("input").eq(0).controller("ngModel");n.form=i,n.ctrl.registerModel(r[1],{dflt:""}),n.data.autoSubmit&&t.bind("keydown keypress",function(t){13===t.which&&(n.$apply(function(){n.$emit("quest:submit:now")}),t.preventDefault())});var a=function(t){var e=parseFloat(n.data.min);return!isNaN(e)&&t<e?void o.$setValidity("qstMin",!1):(o.$setValidity("qstMin",!0),t)};o.$parsers.push(a),o.$formatters.push(a);var s=function(t){var e=parseFloat(n.data.max);return!isNaN(e)&&e<t?void o.$setValidity("qstMax",!1):(o.$setValidity("qstMax",!0),t)};o.$parsers.push(s),o.$formatters.push(s)}}};function selectMixerProvider(r,i){return function(t,n){var e=i(t);return e=lodash.map(e,function(t,e){return lodash.isPlainObject(t)||(t={text:t}),lodash.isUndefined(t.value)&&(t.value=n.numericValues?e+1:t.text),t}),n.reverse&&(e=lodash(e).reverse().value()),n.randomize&&(e=r(e)),lodash.each(e,function(t,e){t.order=e}),e}}selectMixerProvider.$inject=["randomizeShuffle","mixerRecursive"];var template$5='<div ng-form>\n\t<select\n\t\tng-model="response"\n\t\tng-options="answer.value as answer.text group by answer.group for answer in quest.answers"\n\t\tng-required="data.required"\n\t\tng-change="data.autoSubmit && autoSubmit($event)"\n\t\tclass="form-control"\n\t\t>\n\t\t<option value="">{{chooseText || "-- Choose an option --"}}</option>\n\t</select>\n\t<div pi-quest-validation="form.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n\t<div pi-quest-validation="model.$error.correct">{{data.errorMsg.correct || "You must answer the correct answer!"}}</div>\n</div>';function directive$4(a,s){return{replace:!0,template:template$5,require:["ngModel","form"],controller:"questController",controllerAs:"ctrl",scope:{data:"=questData"},link:function(t,e,n,r){var i=r[0],o=t.ctrl;t.form=r[1],o.registerModel(i,{dflt:NaN}),t.quest={answers:a(t.data.answers||[],t.data)},t.chooseText="chooseText"in t.data&&t.data.chooseText,t.autoSubmit=function(){s(function(){t.$emit("quest:submit:now")})}}}}directive$4.$inject=["questSelectMixer","$timeout"];var template$6='<div>\n\t<div ng-class="listClass" ng-style="listCss">\n\t\t\x3c!-- track by in the ng-repeat allows us to keep the repeated object clean so that angular doesn\'t add a $$hashkey property --\x3e\n\t\t\x3c!-- using interpolation within class, so that we can keep the style info separate within the directive --\x3e\n\t\t<a\n\t\t\ttabindex="-1"\n\t\t\tng-repeat="answer in quest.answers track by answer.order"\n\t\t\tng-model="$parent.responseObj"\n\t\t\tbtn-radio="answer"\n\t\t\tng-class="$parent.listItemClass"\n\t\t\tng-style="listItemCss"\n\t\t\tclass="{{ $parent.response == answer.value ? \'active\' : \'\' }}"\n\t\t\tuncheckable\n\t\t\tng-click="data.autoSubmit && autoSubmit($event)"\n\t\t\tng-bind-html="answer.text"\n\t\t\tunselectable="on"\n\t\t></a>\n\t</div>\n\t<div pi-quest-validation="model.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n\t<div pi-quest-validation="model.$error.correct">{{data.errorMsg.correct || "You must answer the correct answer!"}}</div>\n</div>';function directive$5(u,l,c){return{replace:!0,require:["ngModel"],controller:"questController",controllerAs:"ctrl",scope:{data:"=questData"},link:function(n,t,e,r){var i=r[0],o=n.ctrl,a=n.data;switch(t.html(template$6),c(t.contents())(n),o.registerModel(i,{dflt:NaN}),n.quest={answers:u(n.data.answers||[],n.data)},n.$watch("responseObj",function(t,e){t!==e&&(n.response=t&&t.value)}),n.data.required&&(i.$formatters.push(s),i.$parsers.unshift(s),s(n.response)),n.data.buttons?n.data.style="horizontal":"horizontal"==n.data.style&&(n.data.buttons=!0),n.listCss={},n.listItemCss={},a.style){case"horizontal":n.listClass="btn-group btn-group-justified btn-group-lg",n.listItemClass="btn btn-select";break;case"multiButtons":n.listClass="btn-toolbar",n.listItemClass="btn  btn-select",n.listCss.lineHeight=2.8;break;case"list":default:n.listClass="list-group",n.listItemClass="list-group-item"}function s(t){var e=i;return e.$isEmpty(t)?void e.$setValidity("required",!1):(e.$setValidity("required",!0),t)}a.minWidth&&(n.listItemCss.minWidth=a.minWidth),n.autoSubmit=function(t){n.data.autoSubmit&&(angular.element(t.currentTarget).hasClass(l.activeClass)&&n.$emit("quest:submit:now"))}}}}directive$5.$inject=["questSelectMixer","buttonConfig","$compile"];var template$7='<div>\n\t<div ng-class="listClass" ng-style="listCss">\n\t\t\x3c!-- track by in the ng-repeat allows us to keep the repeated object clean so that angular doesn\'t add a $$hashkey property --\x3e\n\t\t<a\n\t\t\thref="javascript:void(0);"\n\t\t\tng-repeat="answer in quest.answers track by answer.order"\n\t\t\tng-model="answer.chosen"\n\t\t\tbtn-checkbox\n\t\t\tng-class="$parent.listItemClass"\n\t\t\tng-style="listItemCss"\n\t\t\tclass="{{ answer.chosen ? \'active\' : \'\' }}"\n\t\t\tuncheckable\n\t\t\tng-bind-html="answer.text"\n\t\t\tunselectable="on"\n\t\t>\n\t\t</a>\n\t</div>\n\t<div pi-quest-validation="model.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n\t<div pi-quest-validation="model.$error.correct">{{data.errorMsg.correct || "You must answer the correct answer!"}}</div>\n</div>';function directive$6(u){return{replace:!0,template:template$7,require:["^?piqPage","ngModel"],controller:"questController",controllerAs:"ctrl",scope:{data:"=questData"},link:function(n,t,e,r){var i=n.ctrl,o=r[1],a=n.data;switch(i.registerModel(o,{dflt:[]}),o.$isEmpty=function(){return lodash.isEmpty(o.$viewValue)},n.quest={answers:u(n.data.answers||[],n.data)},lodash.each(n.quest.answers,function(t){~lodash.indexOf(n.response,t.value)&&(t.chosen=!0)}),n.data.buttons?n.data.style="horizontal":"horizontal"==n.data.style&&(n.data.buttons=!0),n.listCss={},n.listItemCss={},a.style){case"horizontal":n.listClass="btn-group btn-group-justified btn-group-lg",n.listItemClass="btn btn-select";break;case"multiButtons":n.listClass="btn-toolbar",n.listItemClass="btn  btn-select",n.listCss.lineHeight=2.8;break;case"list":default:n.listClass="list-group",n.listItemClass="list-group-item"}function s(t){return o.$setValidity("required",!o.$isEmpty(t)),t}a.minWidth&&(n.listItemCss.minWidth=a.minWidth),a.required&&(o.$parsers.unshift(s),s(o.$viewValue)),n.$watch("quest.answers",function(t,e){t!==e&&(n.response=lodash(t).filter(function(t){return t.chosen}).pluck("value").value())},!0)}}}directive$6.$inject=["questSelectMixer"];var atoa=function(t,e){return Array.prototype.slice.call(t,e)},si="function"==typeof setImmediate,tick;tick=si?function(t){setImmediate(t)}:"undefined"!=typeof process&&process.nextTick?process.nextTick:function(t){setTimeout(t,0)};var ticky=tick,debounce=function(t,e,n){t&&ticky(function(){t.apply(n||null,e||[])})},emitter=function(i,t){var o=t||{},a={};return void 0===i&&(i={}),i.on=function(t,e){return a[t]?a[t].push(e):a[t]=[e],i},i.once=function(t,e){return e._once=!0,i.on(t,e),i},i.off=function(t,e){var n=arguments.length;if(1===n)delete a[t];else if(0===n)a={};else{var r=a[t];if(!r)return i;r.splice(r.indexOf(e),1)}return i},i.emit=function(){var t=atoa(arguments);return i.emitterSnapshot(t.shift()).apply(this,t)},i.emitterSnapshot=function(r){var t=(a[r]||[]).slice(0);return function(){var e=atoa(arguments),n=this||i;if("error"===r&&!1!==o.throws&&!t.length)throw 1===e.length?e[0]:e;return t.forEach(function(t){o.async?debounce(t,e,n):t.apply(n,e),t._once&&i.off(r,t)}),i}},i},NativeCustomEvent=commonjsGlobal.CustomEvent;function useNative(){try{var t=new NativeCustomEvent("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}var customEvent=useNative()?NativeCustomEvent:"function"==typeof document.createEvent?function(t,e){var n=document.createEvent("CustomEvent");return e?n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail):n.initCustomEvent(t,!1,!1,void 0),n}:function(t,e){var n=document.createEventObject();return n.type=t,e?(n.bubbles=Boolean(e.bubbles),n.cancelable=Boolean(e.cancelable),n.detail=e.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n},eventmap=[],eventname="",ron=/^on/;for(eventname in commonjsGlobal)ron.test(eventname)&&eventmap.push(eventname.slice(2));var eventmap_1=eventmap,doc$1=commonjsGlobal.document,addEvent=addEventEasy,removeEvent=removeEventEasy,hardCache=[];commonjsGlobal.addEventListener||(addEvent=addEventHard,removeEvent=removeEventHard);var crossvent={add:addEvent,remove:removeEvent,fabricate:fabricateEvent};function addEventEasy(t,e,n,r){return t.addEventListener(e,n,r)}function addEventHard(t,e,n){return t.attachEvent("on"+e,wrap(t,e,n))}function removeEventEasy(t,e,n,r){return t.removeEventListener(e,n,r)}function removeEventHard(t,e,n){var r=unwrap(t,e,n);if(r)return t.detachEvent("on"+e,r)}function fabricateEvent(t,e,n){var r=-1===eventmap_1.indexOf(e)?new customEvent(e,{detail:n}):function(){var t;doc$1.createEvent?(t=doc$1.createEvent("Event")).initEvent(e,!0,!0):doc$1.createEventObject&&(t=doc$1.createEventObject());return t}();t.dispatchEvent?t.dispatchEvent(r):t.fireEvent("on"+e,r)}function wrapperFactory(n,t,r){return function(t){var e=t||commonjsGlobal.event;e.target=e.target||e.srcElement,e.preventDefault=e.preventDefault||function(){e.returnValue=!1},e.stopPropagation=e.stopPropagation||function(){e.cancelBubble=!0},e.which=e.which||e.keyCode,r.call(n,e)}}function wrap(t,e,n){var r=unwrap(t,e,n)||wrapperFactory(t,e,n);return hardCache.push({wrapper:r,element:t,type:e,fn:n}),r}function unwrap(t,e,n){var r=find(t,e,n);if(r){var i=hardCache[r].wrapper;return hardCache.splice(r,1),i}}function find(t,e,n){var r,i;for(r=0;r<hardCache.length;r++)if((i=hardCache[r]).element===t&&i.type===e&&i.fn===n)return r}var cache={},start="(?:^|\\s)",end="(?:\\s|$)";function lookupClass(t){var e=cache[t];return e?e.lastIndex=0:cache[t]=e=new RegExp(start+t+end,"g"),e}function addClass(t,e){var n=t.className;n.length?lookupClass(e).test(n)||(t.className+=" "+e):t.className=e}function rmClass(t,e){t.className=t.className.replace(lookupClass(e)," ").trim()}var classes={add:addClass,rm:rmClass},doc=document,documentElement=doc.documentElement;function dragula(t,e){var h,p,v,m,g,o,a,$,y,w,n;1===arguments.length&&!1===Array.isArray(t)&&(e=t,t=[]);var s,b=null,x=e||{};void 0===x.moves&&(x.moves=always),void 0===x.accepts&&(x.accepts=always),void 0===x.invalid&&(x.invalid=function(){return!1}),void 0===x.containers&&(x.containers=t||[]),void 0===x.isContainer&&(x.isContainer=never),void 0===x.copy&&(x.copy=!1),void 0===x.copySortSource&&(x.copySortSource=!1),void 0===x.revertOnSpill&&(x.revertOnSpill=!1),void 0===x.removeOnSpill&&(x.removeOnSpill=!1),void 0===x.direction&&(x.direction="vertical"),void 0===x.ignoreInputTextSelection&&(x.ignoreInputTextSelection=!0),void 0===x.mirrorContainer&&(x.mirrorContainer=doc.body);var _=emitter({containers:x.containers,start:function(t){var e=S(t);e&&E(e)},end:k,cancel:j,remove:P,destroy:function(){r(!0),q({})},canMove:function(t){return!!S(t)},dragging:!1});return!0===x.removeOnSpill&&_.on("over",function(t){classes.rm(t,"gu-hide")}).on("out",function(t){_.dragging&&classes.add(t,"gu-hide")}),r(),_;function u(t){return-1!==_.containers.indexOf(t)||x.isContainer(t)}function r(t){var e=t?"remove":"add";touchy(documentElement,e,"mousedown",f),touchy(documentElement,e,"mouseup",q)}function l(t){touchy(documentElement,t?"remove":"add","mousemove",d)}function c(t){var e=t?"remove":"add";crossvent[e](documentElement,"selectstart",i),crossvent[e](documentElement,"click",i)}function i(t){s&&t.preventDefault()}function f(t){if(o=t.clientX,a=t.clientY,!(1!==whichMouseButton(t)||t.metaKey||t.ctrlKey)){var e=t.target,n=S(e);n&&(s=n,l(),"mousedown"===t.type&&(isInput(e)?e.focus():t.preventDefault()))}}function d(t){if(s)if(0!==whichMouseButton(t)){if(void 0===t.clientX||t.clientX!==o||void 0===t.clientY||t.clientY!==a){if(x.ignoreInputTextSelection){var e=getCoord("clientX",t),n=getCoord("clientY",t);if(isInput(doc.elementFromPoint(e,n)))return}var r=s;l(!0),c(),k(),E(r);var i=getOffset(v);m=getCoord("pageX",t)-i.left,g=getCoord("pageY",t)-i.top,classes.add(w||v,"gu-transit"),function(){if(h)return;var t=v.getBoundingClientRect();(h=v.cloneNode(!0)).style.width=getRectWidth(t)+"px",h.style.height=getRectHeight(t)+"px",classes.rm(h,"gu-transit"),classes.add(h,"gu-mirror"),x.mirrorContainer.appendChild(h),touchy(documentElement,"add","mousemove",D),classes.add(x.mirrorContainer,"gu-unselectable"),_.emit("cloned",h,v,"mirror")}(),D(t)}}else q({})}function S(t){if(!(_.dragging&&h||u(t))){for(var e=t;getParent(t)&&!1===u(getParent(t));){if(x.invalid(t,e))return;if(!(t=getParent(t)))return}var n=getParent(t);if(n)if(!x.invalid(t,e))if(x.moves(t,n,e,nextEl(t)))return{item:t,source:n}}}function E(t){var e,n;e=t.item,n=t.source,("boolean"==typeof x.copy?x.copy:x.copy(e,n))&&(w=t.item.cloneNode(!0),_.emit("cloned",w,t.item,"copy")),p=t.source,v=t.item,$=y=nextEl(t.item),_.dragging=!0,_.emit("drag",v,p)}function k(){if(_.dragging){var t=w||v;A(t,getParent(t))}}function C(){l(!(s=!1)),c(!0)}function q(t){if(C(),_.dragging){var e=w||v,n=getCoord("clientX",t),r=getCoord("clientY",t),i=O(getElementBehindPoint(h,n,r),n,r);i&&(w&&x.copySortSource||!w||i!==p)?A(e,i):x.removeOnSpill?P():j()}}function A(t,e){var n=getParent(t);w&&x.copySortSource&&e===p&&n.removeChild(v),M(e)?_.emit("cancel",t,p,p):_.emit("drop",t,e,p,y),T()}function P(){if(_.dragging){var t=w||v,e=getParent(t);e&&e.removeChild(t),_.emit(w?"cancel":"remove",t,e,p),T()}}function j(t){if(_.dragging){var e=0<arguments.length?t:x.revertOnSpill,n=w||v,r=getParent(n),i=M(r);!1===i&&e&&(w?r&&r.removeChild(w):p.insertBefore(n,$)),i||e?_.emit("cancel",n,p,p):_.emit("drop",n,r,p,y),T()}}function T(){var t=w||v;C(),h&&(classes.rm(x.mirrorContainer,"gu-unselectable"),touchy(documentElement,"remove","mousemove",D),getParent(h).removeChild(h),h=null),t&&classes.rm(t,"gu-transit"),n&&clearTimeout(n),_.dragging=!1,b&&_.emit("out",t,b,p),_.emit("dragend",t),p=v=w=$=y=n=b=null}function M(t,e){var n;return n=void 0!==e?e:h?y:nextEl(w||v),t===p&&n===$}function O(n,r,i){for(var o=n;o&&!t();)o=getParent(o);return o;function t(){if(!1===u(o))return!1;var t=R(o,n),e=N(o,t,r,i);return!!M(o,e)||x.accepts(v,o,p,e)}}function D(t){if(h){t.preventDefault();var e=getCoord("clientX",t),n=getCoord("clientY",t),r=e-m,i=n-g;h.style.left=r+"px",h.style.top=i+"px";var o=w||v,a=getElementBehindPoint(h,e,n),s=O(a,e,n),u=null!==s&&s!==b;(u||null===s)&&(b&&d("out"),b=s,u&&d("over"));var l=getParent(o);if(s!==p||!w||x.copySortSource){var c,f=R(s,a);if(null!==f)c=N(s,f,e,n);else{if(!0!==x.revertOnSpill||w)return void(w&&l&&l.removeChild(o));c=$,s=p}(null===c&&u||c!==o&&c!==nextEl(o))&&(y=c,s.insertBefore(o,c),_.emit("shadow",o,s,p))}else l&&l.removeChild(o)}function d(t){_.emit(t,o,b,p)}}function R(t,e){for(var n=e;n!==t&&getParent(n)!==t;)n=getParent(n);return n===documentElement?null:n}function N(i,e,o,a){var s="horizontal"===x.direction;return e!==i?function(){var t=e.getBoundingClientRect();if(s)return n(o>t.left+getRectWidth(t)/2);return n(a>t.top+getRectHeight(t)/2)}():function(){var t,e,n,r=i.children.length;for(t=0;t<r;t++){if(e=i.children[t],n=e.getBoundingClientRect(),s&&n.left+n.width/2>o)return e;if(!s&&n.top+n.height/2>a)return e}return null}();function n(t){return t?nextEl(e):e}}}function touchy(t,e,n,r){commonjsGlobal.navigator.pointerEnabled?crossvent[e](t,{mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"}[n],r):commonjsGlobal.navigator.msPointerEnabled?crossvent[e](t,{mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"}[n],r):(crossvent[e](t,{mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"}[n],r),crossvent[e](t,n,r))}function whichMouseButton(t){if(void 0!==t.touches)return t.touches.length;if(void 0!==t.which&&0!==t.which)return t.which;if(void 0!==t.buttons)return t.buttons;var e=t.button;return void 0!==e?1&e?1:2&e?3:4&e?2:0:void 0}function getOffset(t){var e=t.getBoundingClientRect();return{left:e.left+getScroll("scrollLeft","pageXOffset"),top:e.top+getScroll("scrollTop","pageYOffset")}}function getScroll(t,e){return void 0!==commonjsGlobal[e]?commonjsGlobal[e]:documentElement.clientHeight?documentElement[t]:doc.body[t]}function getElementBehindPoint(t,e,n){var r,i=t||{},o=i.className;return i.className+=" gu-hide",r=doc.elementFromPoint(e,n),i.className=o,r}function never(){return!1}function always(){return!0}function getRectWidth(t){return t.width||t.right-t.left}function getRectHeight(t){return t.height||t.bottom-t.top}function getParent(t){return t.parentNode===doc?null:t.parentNode}function isInput(t){return"INPUT"===t.tagName||"TEXTAREA"===t.tagName||"SELECT"===t.tagName||isEditable(t)}function isEditable(t){return!!t&&("false"!==t.contentEditable&&("true"===t.contentEditable||isEditable(getParent(t))))}function nextEl(e){return e.nextElementSibling||function(){var t=e;for(;t=t.nextSibling,t&&1!==t.nodeType;);return t}()}function getEventHost(t){return t.targetTouches&&t.targetTouches.length?t.targetTouches[0]:t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t}function getCoord(t,e){var n=getEventHost(e),r={pageX:"clientX",pageY:"clientY"};return t in r&&!(t in n)&&r[t]in n&&(t=r[t]),n[t]}var dragula_1=dragula,template$8='<div>\n    <div class="list-group" dragula-container>\n        <a href="javascript:void(0)" class="list-group-item" ng-repeat="row in list track by row.id">\n            <div class="row">\n                <div class="col-xs-1">\n                    <select ng-init="setupWatch(this)" ng-model="selected" ng-change="$parent.move(row.order, selected, this)">\n                        <option ng-repeat="r in list" ng-selected="r.order === row.order" label="{{r.order+1}}" value="{{r.order}}">{{r.order+1}}</option>\n                    </select>\n                </div>\n                <div class="col-xs-11"> {{row.text}} </div>\n            </div>\n        </a>\n    </div>\n\t<div pi-quest-validation="model.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n\t<div pi-quest-validation="model.$error.correct">{{data.errorMsg.correct || "You must answer the correct answer!"}}</div>\n</div>\n';function directive$7(){return{replace:!0,require:["ngModel"],controller:"questController",controllerAs:"ctrl",template:template$8,scope:{data:"=questData"},link:function(n,e,t,r){var i=r[0],o=n.ctrl,a=n.data,s=lodash.isArray(a.list)&&a.list.length?lodash.range(1,a.list.length+1):[];o.registerModel(i,{dflt:lodash.get(a,"randomize",!0)?lodash.shuffle(s):s}),i.$isEmpty=function(t){return lodash.isEqual(t,lodash.range(1,c.length+1))};var u,l,c=n.list=o.log.response.map(function(t,e){return{order:e,id:t,text:a.list[t-1]}});n.$watchCollection("list",function(){n.response=lodash.pluck(c,"id")}),n.setupWatch=function(t){t.$watch("$parent.response",function(){t.$evalAsync("selected = row.order")})},n.reset=function(){c=n.list=lodash.sortBy(c,"id")},n.move=function(t,e){var n,r,i,o;i=e,o=(n=c)[r=t],n.splice(r,1),n.splice(i,0,o),c.forEach(function(t,e){t.order=e})};var f=dragula_1({isContainer:function(t){return t.hasAttribute("dragula-container")&&e[0].contains(t)}});function d(t,e){return Array.prototype.indexOf.call(angular.element(e).children(),t)}function h(t){var e=i;return e.$isEmpty(t)?void e.$setValidity("required",!1):(e.$setValidity("required",!0),t)}f.on("drag",function(t,e){u=d(t,e)}),f.on("drop",function(t,e){l=d(t,e),n.move(u,l),n.$digest()}),n.$on("$destroy",f.destroy),a.required&&(i.$formatters.push(h),i.$parsers.unshift(h),h(n.response))}}}directive$7.$inject=["$compile"];var grid='<div ng-form class="table-responsive" ng-class="{\'pi-page-submitted\':$parent.$parent.submitAttempt}">\n\t<table class="table table-hover">\n\t\t<colgroup>\n\t\t\t<col\n\t\t\t\tng-if="!data.rowStemHide"\n\t\t\t></col>\n\t\t\t<col\n\t\t\t\tng-repeat="column in columns"\n\t\t\t\tng-style="column.css"\n\t\t\t></col>\n\t\t</colgroup>\n\t\t<thead ng-if="!data.columnStemHide">\n\t\t\t<tr>\n\t\t\t\t<th\n\t\t\t\t\tng-style="allCss(data.columnStemCss,column.stemCss, data.rowStemCss)"\n\t\t\t\t\tng-if="!data.rowStemHide"\n\t\t\t\t></th>\n\t\t\t\t<th\n\t\t\t\t\tng-repeat="column in columns"\n\t\t\t\t\tng-bind-html="column.stem"\n\t\t\t\t\tng-style="allCss(data.columnStemCss,column.stemCss)"\n\t\t\t\t></th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr\n\t\t\t\tng-repeat="row in rows"\n\t\t\t\tquest-grid-row="row"\n\t\t\t\tquest-grid-data="data"\n\t\t\t\tng-model="$parent.$parent.current.questions[row.name]"\n\t\t\t\tng-required="{{data.required || row.required}}"\n\t\t\t></tr>\n\t\t</tbody>\n\t</table>\n\t<div pi-quest-validation="form.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n</div>';function gridDirective$1(l){return{replace:!0,template:grid,require:["ngModel","form"],controller:"questController",controllerAs:"ctrl",scope:{data:"=questData",current:"=questCurrent"},link:function(e,t,n,r){var i,o,a=r[0],s=e.ctrl,u=e.data;e.form=r[1],e.columns=(u.columns||[]).map(f),e.rows=(i=u.rows,o=u,lodash(i||[]).map(f).each(function(t,e){t.hasOwnProperty("name")||(t.name=o.name+function(t,e){var n=Math.abs(t),r=1+Math.floor(Math.log(n)/Math.LN10);if(e<=r)return t;var i=Math.pow(10,e-r).toString().substr(1);return t<0?"-"+i+n:i+n}(e+1,3))}).thru(o.shuffle?l:lodash.identity).value()),e.allCss=c,e.$watchCollection(function(){return lodash.pluck(e.rows,"$response")},function(t){e.response=lodash.reduce(t,function(t,e){return lodash.isFinite(e)?t+e:t},0)}),s.registerModel(a,{dflt:0})}};function c(){var t=lodash.toArray(arguments);return t.unshift({}),lodash.extend.apply(lodash,t)}function f(t){return lodash.isPlainObject(t)?t:{stem:t}}}gridDirective$1.$inject=["questShuffle"];var gridRow='<tr>\n\t<th\n\t\tscope="row"\n\t\tng-if="!data.rowStemHide"\n\t\tng-bind-html="row.stem"\n\t\tng-style="data.rowStemCss"\n\t></th>\n\t<td ng-repeat="column in columns">\n\t\t<div ng-switch="column.type">\n\t\t\t<button\n\t\t\t\tclass="btn btn-default"\n\t\t\t\tng-switch-when="checkbox"\n\t\t\t\tbtn-radio="row.reverse && !column.noReverse ? column.reverseValue : column.value"\n\t\t\t\tng-model="$parent.$parent.response"\n\t\t\t\tng-class="data.checkboxType"\n\t\t\t\tuncheckable\n\t\t\t></button>\n\t\t\t<div\n\t\t\t\tclass="text"\n\t\t\t\tng-switch-when="text"\n\t\t\t\tng-bind-html="row[column.textProperty]"\n\t\t\t></div>\n\t\t\t<div\n\t\t\t\tclass="grid-input input-group input-group-small"\n\t\t\t\tng-switch-when="input"\n                ng-init="response=\'\'"\n                title="insert your response"\n\t\t\t>\n                <span class="input-group-addon">\n                    <span class="glyphicon glyphicon-edit" ng-class="{active:$parent.$parent.response===response}"></span>\n                </span>\n                <input type="text" class="form-control" ng-model="response" ng-change="$parent.$parent.response = response">\n            </div>\n            <div ng-switch-when="dropdown" ng-init="response=\'\'"> \n                <select ng-model="response" ng-change="$parent.$parent.response = response" class="form-control">\n                    <option value="" ng-selected="response===undefined">----</option>\n                    <option ng-repeat="r in column.answers" ng-selected="r.value === $parent.$parent.response" value="{{r.value}}">{{r.text}}</option>\n                </select>\n            </div>\n\t\t</div>\n\t\t<div\n\t\t\tclass="cell-labels"\n\t\t\tng-if="data.cellLabels"\n\t\t\tng-bind-html="column.stem"\n\t\t></div>\n\t</td>\n</tr>\n';function gridRowDirective$1(){return{replace:!0,template:gridRow,require:["ngModel"],controller:"questController",controllerAs:"ctrl",scope:{row:"=questGridRow",data:"=questGridData"},link:function(n,t,e,r){var i=r[0],o=n.ctrl,a=n.columns=n.$parent.columns.map(function(t,e){return lodash.get(n,"row.overwrite["+e+"]")||t}).map(function(t){return t.hasOwnProperty("type")||(t.type="checkbox"),"dropdown"==t.type&&(lodash.isArray(t.answers)||(t.answers=[]),t.answers=t.answers.map(function(t,e){return lodash.isObject(t)||(t={text:t}),"value"in t||(t.value=e+1),t})),t});a.filter(function(t){return"text"!=t.type}).forEach(function(t,e){t.hasOwnProperty("value")||(t.value=e+1)}),a.filter(function(t){return!t.noReverse}).filter(function(t){return"text"!=t.type}).forEach(function(t,e,n){t.reverseValue=n[n.length-e-1].value}),n.model=i,n.$watch("response",function(t){n.row.$response=t}),o.registerModel(i,{data:n.row})}}}var multiGrid='<div ng-form class="table-responsive" ng-class="{\'pi-page-submitted\':$parent.$parent.submitAttempt}">\n\t<table class="table table-hover">\n\t\t<colgroup>\n\t\t\t<col\n\t\t\t\tng-if="!data.rowStemHide"\n\t\t\t></col>\n\t\t\t<col\n\t\t\t\tng-repeat="column in columns"\n\t\t\t\tng-style="column.css"\n\t\t\t></col>\n\t\t</colgroup>\n\t\t<thead ng-if="!data.columnStemHide">\n\t\t\t<tr>\n\t\t\t\t<th\n\t\t\t\t\tng-style="allCss(data.columnStemCss,column.stemCss, data.rowStemCss)"\n\t\t\t\t\tng-if="!data.rowStemHide"\n\t\t\t\t></th>\n\t\t\t\t<th\n\t\t\t\t\tng-repeat="column in columns"\n\t\t\t\t\tng-bind-html="column.stem"\n\t\t\t\t\tng-style="allCss(data.columnStemCss,column.stemCss)"\n\t\t\t\t></th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr\n\t\t\t\tng-repeat="row in rows"\n\t\t\t\tquest-multi-grid-row="row"\n\t\t\t\tquest-multi-grid-data="data"\n\t\t\t\tng-model="$parent.$parent.current.questions[row.name]"\n\t\t\t></tr>\n\t\t</tbody>\n\t</table>\n\t<div pi-quest-validation="form.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n\t<div pi-quest-validation="form.$error.pattern">{{data.errorMsg.pattern || "wrong pattern!"}}</div>\n</div>\n';function gridDirective$2(s){return{replace:!0,template:multiGrid,require:["ngModel","form"],controllerAs:"ctrl",scope:{data:"=questData",current:"=questCurrent"},link:function(t,e,n,r){var i,o,a=t.data;t.form=r[1],t.columns=(a.columns||[]).map(l),t.rows=(i=a.rows,o=a,lodash(i||[]).map(l).each(function(t,e){t.hasOwnProperty("name")||(t.name=o.name+function(t,e){var n=Math.abs(t),r=1+Math.floor(Math.log(n)/Math.LN10);if(e<=r)return t;var i=Math.pow(10,e-r).toString().substr(1);return t<0?"-"+i+n:i+n}(e+1,3))}).thru(o.shuffle?s:lodash.identity).value()),t.allCss=u}};function u(){var t=lodash.toArray(arguments);return t.unshift({}),lodash.extend.apply(lodash,t)}function l(t){return lodash.isPlainObject(t)?t:{stem:t}}}gridDirective$2.$inject=["questShuffle"];var multiGridRow='<tr>\n\t<th\n\t\tscope="row"\n\t\tng-if="!data.rowStemHide"\n\t\tng-bind-html="row.stem"\n\t\tng-style="data.rowStemCss"\n\t></th>\n\t<td ng-repeat="column in columns">\n\t\t<div ng-switch="column.type">\n\t\t\t<button\n\t\t\t\tclass="btn btn-default"\n\t\t\t\tng-switch-when="checkbox"\n\t\t\t\tbtn-checkbox\n                btn-checkbox-true="column.value || true"\n\t\t\t\tng-model="$parent.$parent.response[$index]"\n\t\t\t\tng-class="data.checkboxType"\n\t\t\t\tuncheckable\n\t\t\t></button>\n\t\t\t<div\n\t\t\t\tclass="text"\n\t\t\t\tng-switch-when="text"\n\t\t\t\tng-bind-html="row[column.textProperty]"\n\t\t\t></div>\n\t\t\t<div\n\t\t\t\tclass="grid-input input-group input-group-small"\n\t\t\t\tng-switch-when="input"\n                title="insert your response"\n\t\t\t>\n                <span class="input-group-addon glyphicon glyphicon-edit"></span>\n                <input type="text" class="form-control" ng-model="$parent.$parent.response[$index]" >\n            </div>\n            <div ng-switch-when="dropdown"> \n                <select ng-model="$parent.$parent.response[$index]" class="form-control" ng-options="r.value as r.text for r in column.answers">\n                    <option value="">{{column.chooseText || "-- Choose an option --"}}</option>\n                </select>\n            </div>\n\t\t</div>\n\t\t<div\n\t\t\tclass="cell-labels"\n\t\t\tng-if="data.cellLabels"\n\t\t\tng-bind-html="column.stem"\n\t\t></div>\n\t</td>\n</tr>\n';function gridRowDirective$2(){return{replace:!0,template:multiGridRow,require:["ngModel"],controller:"questController",controllerAs:"ctrl",scope:{row:"=questMultiGridRow",data:"=questMultiGridData"},link:function(i,t,e,n){var o=n[0],r=i.ctrl;function a(r){var t=i.columns.every(function(t,e){var n=r[e];if(!i.data.required&&!i.row.required&&!t.required)return!0;switch(t.type){case"text":return!0;case"input":return""!==n;case"dropdown":return!isNaN(n)&&null!==n;default:return n}});return o.$setValidity("required",t),r}i.model=o,i.columns=i.$parent.columns.map(function(t,e){return lodash.get(i,"row.overwrite["+e+"]",t)}).map(function(t){return t.hasOwnProperty("type")||(t.type="checkbox"),"dropdown"==t.type&&(lodash.isArray(t.answers)||(t.answers=[]),t.answers=t.answers.map(function(t,e){return lodash.isObject(t)||(t={text:t}),"value"in t||(t.value=e+1),t})),t}),r.registerModel(o,{data:i.row,dflt:(i.columns||[]).map(mapDefault)}),o.$parsers.unshift(a),o.$parsers.unshift(function(r){var t=i.columns.every(function(t,e){var n=r[e];if("input"!==t.type||!t.pattern)return!0;return!(!lodash.isNumber(n)&&!lodash.isString(n))&&new RegExp(t.pattern).test(n)});return o.$setValidity("pattern",t),r}),a(o.$viewValue),i.$watchCollection("response",function(t){o.$setViewValue(t.slice())})}}}function mapDefault(t){return"string"!=typeof t&&("text"===t.type?null:"input"===t.type?"":"dropdown"===t.type&&NaN)}var slider='<div ng-form dir="ltr">\n\t<div\n\t\tpi-slider\n\t\tng-model="sliderResponse"\n\t\tpi-slider-options="data"\n\t\tng-required="{{data.required}}"\n\t></div>\n\t<h4 ng-if="data.displayValue" class="text-center"><span class="label label-info">{{ sliderResponse | number }}</span></h4>\n\t<div pi-quest-validation="form.$error.required">{{data.errorMsg.required || "Please respond to this question"}}</div>\n</div>\n';function sliderDirective$1(){return{replace:!0,template:slider,require:["form","ngModel"],controller:"questController",controllerAs:"ctrl",scope:{data:"=questData"},link:function(n,t,e,r){var i=r[0],o=r[1],a=n.ctrl,s=n.data;n.form=i,a.registerModel(o,{dflt:void 0}),n.sliderResponse=n.response;var u=n.$on("slider:change",function(t,e){n.$apply(function(){n.response=e}),s.autoSubmit&&n.$apply(function(){n.$emit("quest:submit:now")})});n.$on("quest:timeout",u)}}}var slider$1=slider$2();function slider$2(){function t(d){return{scope:{options:"=piSliderOptions"},replace:!0,require:"ngModel",template:['<div class="slider" ng-class="{\'slider-ticks\':options.showTicks}" pi-pointerdown="onSliderMouseDown($event)">','<div class="slider-label-left" ng-style="options.leftLabelCss">{{options.leftLabel}}</div>','<div class="slider-label-right" ng-style="options.rightLabelCss">{{options.rightLabel}}</div>','<div class="slider-container">','<div class="slider-bar">','<div class="slider-bar-highlight" ng-style="highlightStyle"></div>',"</div>",'<div class="slider-handle" pi-pointerdown="onHandleMousedown($event)" ng-style="handleStyle"></div>',"</div>",'<ul class="slider-pips" ng-if="!options.hidePips">','<li ng-repeat="i in getNumber(steps) track by $index" ng-style="{width: pipWidth + \'%\'}" ng-class="{last:$last}"></li>',"</ul>",'<ul class="slider-labels">','<li ng-repeat="label in labels track by $index" ng-style="{width: labelsWidth + \'%\'}" ng-class="{first:$first, last:$last}">{{label}}</li>',"</ul>","</div>"].join("\n"),link:function(o,a,t,s){var u,i=o.options||{};function l(t){s.$setViewValue(t),s.$render()}function c(t){return!o.steps||s.$isEmpty(t)?t:Math.round(t*o.steps)/o.steps}function f(t){var n,r;function i(t){h(t),t.preventDefault();var e=n+(t.pageX-r)/(a.prop("clientWidth")-u);e=Math.min(e,1),e=Math.max(e,0),o.$apply(function(){l(e)})}h(t),t.preventDefault(),t.stopPropagation(),r=t.pageX,n=s.$viewValue,d.on("mousemove touchmove",i),d.on("mouseup touchend",function t(e){e.preventDefault();d.off("mousemove touchmove",i);d.off("mouseup touchend",t);o.$emit("slider:change",s.$modelValue)})}u=a[0].querySelector(".slider-handle").clientWidth,o.ngModel=s,o.min=i.min||0,o.max=i.max||o.min+100,o.range=o.max-o.min,o.steps=i.steps?i.steps-1:0,o.pipWidth=i.steps&&100/o.steps,o.labels=i.labels,o.labelsWidth=i.labels&&100/i.labels.length,s.$isEmpty=e,s.$render=function(){var t=c(s.$viewValue),e=!isNaN(t),n=e?"block":"none",r=e&&i.highlight?"block":"none";switch(i.highlightDirection){case"rtl":o.highlightStyle={left:100*t+"%",display:r};break;case"center":o.highlightStyle=.5<t?{left:"50%",width:100*(t-.5)+"%",display:r}:{right:"50%",width:100*(.5-t)+"%",display:r};break;default:o.highlightStyle={right:100-100*t+"%",display:r}}o.handleStyle={left:100*t+"%",display:n}},s.$formatters.push(function(t){if(s.$isEmpty(t))return NaN;return((t=Math.min(Math.max(t,o.min),o.max))-o.min)/o.range}),s.$parsers.push(function(t){return+(o.min+c(t)*o.range).toFixed(4)}),o.onHandleMousedown=f,o.onSliderMouseDown=function(t){h(t),t.preventDefault();var e=a.prop("clientWidth"),n=a[0].getBoundingClientRect().left,r=(t.pageX-n-u/2)/(e-u);r=Math.min(r,1),l(r=Math.max(r,0)),f(t)},o.getNumber=function(t){return new Array(t)}}}}return t.$inject=["$document","$sce"],t;function h(t){var e,n,r;null==t.pageX&&null!=t.clientX&&(n=(e=t.target.ownerDocument||document).documentElement,r=e.body,t.pageX=t.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0),t.pageY=t.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0)),null==t.pageX&&t.touches&&(t.pageX=t.touches[0].pageX,t.pageY=t.touches[0].pageY)}function e(t){return isNaN(parseFloat(t))||!isFinite(t)}}var EVENTNAME="touchstart mousedown",DIRECTIVENAME="piPointerdown";function piPointerdownDirective(n){return{compile:function(t,e){var r=n(e[DIRECTIVENAME],!0);return function(e,t){function n(t){e.$apply(function(){r(e,{$event:t})})}t.on(EVENTNAME,n),e.$on("$destroy",function(){t.off(EVENTNAME,n)})}}}}function toRegexFilter(n){return function(t){var e;if(lodash.isUndefined(t))return/(?:)/;{if(lodash.isRegExp(t)||lodash.isString(t))return new RegExp(t);throw e=new Error("Question pattern is not a valid regular expression"),n({tags:"text",type:"error",message:"pattern",error:e,context:t}),e}}}piPointerdownDirective.$inject=["$parse"],toRegexFilter.$inject=["piConsole"];var dfltUnitsFilter=function(){return dfltUnits};function dfltUnits(t,e){return t||0===t||"0"===t?isNumeric(t)?t+(lodash.isUndefined(e)?"px":String(e)):t:""}function isNumeric(t){return!lodash.isArray(t)&&0<=t-parseFloat(t)+1}var module$8=angular.module("questDirectives",[module$9.name,module$10.name,buttons.name,module$6.name,module$7.name,module$11.name]);module$8.controller("questController",questController$1),module$8.factory("questGuid",guidFactory),module$8.directive("piQuest",directive),module$8.directive("piqPage",directive$1),module$8.directive("questWrapper",directive$2),module$8.directive("questInfo",function(){return{}}),module$8.directive("questText",textDirective),module$8.directive("questTextarea",textDirective),module$8.directive("questTextNumber",directive$3),module$8.service("questSelectMixer",selectMixerProvider),module$8.directive("questDropdown",directive$4),module$8.directive("questSelectOne",directive$5),module$8.directive("questSelectMulti",directive$6),module$8.directive("questRank",directive$7),module$8.value("questShuffle",lodash.shuffle),module$8.directive("questGrid",gridDirective$1),module$8.directive("questGridRow",gridRowDirective$1),module$8.directive("questMultiGrid",gridDirective$2),module$8.directive("questMultiGridRow",gridRowDirective$2),module$8.directive("questSlider",sliderDirective$1),module$8.directive("piSlider",slider$1),module$8.directive("piPointerdown",piPointerdownDirective),module$8.config(["$sceProvider",function(t){t.enabled(!1)}]),module$8.directive("piQuestValidation",function(){return{replace:!0,transclude:!0,scope:{unvalid:"=piQuestValidation",postSubmit:"=piPostSubmit"},template:['<div class="alert alert-danger" role="alert" ng-show="unvalid && ($parent.$parent.$parent.submitAttempt || postSubmit)">','<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>',"<span ng-transclude></span>","</div>"].join("")}}),module$8.filter("toRegex",toRegexFilter),module$8.filter("dfltUnits",dfltUnitsFilter),module$8.directive("piqPage",function(){return{link:function(t,n){t.page.autoFocus&&setTimeout(function(){var t=n[0].querySelector("[quest-wrapper]"),e=t&&t.querySelector("input, textArea, select, button");e&&e.focus()})}}});var module$1=angular.module("piQuest",[module$8.name,module$2.name]);function directive$8(s,u,l,c){return{link:function(r,t){var e,i=r.script,n=r.newScope=r.$new(),o={global:u.global,current:u.current,task:i,tasksData:lodash.get(i,"data",{})};null==i.$template&&c({tags:"message",type:"error",message:"missing template for message",context:i});try{e=lodash.template(i.$template)(o)}catch(t){e=i.$template,c({tags:"message",type:"error",message:"failed to render template",error:t})}function a(t){var e=lodash.isArray(i.keys)?i.keys:[i.keys],n=lodash.map(e,function(t){return lodash.isString(t)?t.toUpperCase().charCodeAt(0):t});~lodash.indexOf(n,t.which)&&r.done()}lodash.extend(r,o),r.done=function(){n.$destroy(),t.empty(),r.$emit("message:done")},l.on("keydown",a),r.$on("$destroy",function(){l.off("keydown",a)}),t.html(e),s(t.contents())(n)}}}function directive$9(){return{link:function(t,e){e.on("click",function(){t.done()})}}}directive$8.$inject=["$compile","$rootScope","$document","piConsole"],directive$9.$inject=[];var module$12=angular.module("pi.message",[module$7.name]);function provider(){var n={};this.$get=taskActivateProvider,this.set=function(t,e){n[t]=e},this.get=function(t){var e=n[t];if(!e)throw new Error('Unknown task type: "'+t+'"');return e}}function taskActivateProvider(d,h,p){var v=this;return function(t,e,n,r){var i,o=d.defer(),a=h.global,s=t.$script,u=(l=s,c=t,lodash.isFunction(l)||lodash.isArray(l)?l:l&&lodash.isFunction(l.play)?((f=lodash.bind(l.play,l)).$inject=p.annotate(l.play),f):l&&lodash.isArray(l.play)?((f=lodash.bind(lodash.last(l.play),l)).$inject=p.annotate(l.play),f):c.type?v.get(c.type):void 0);var l,c,f;return i=p.invoke(u,null,{done:lodash.bind(o.resolve,o),task:t,script:s,$element:e,$scope:n,global:a,logger:r}),lodash.isFunction(i)&&o.promise.finally(i),o}}function directive$10(m,g,$,y,w,b){return{scope:{task:"=piTask"},link:function(t,e){var n,r,i,o,a,s=t.task,u=s.$script||{},l=s.$name,c=t.$parent.settings||{},f=t.$parent.manager.logger,d=window.piGlobal;function h(t){var e=t.which||t.keyCode,n=(t.key||"").toUpperCase();82!=e&&"R"!=n||!t.ctrlKey||(v(t,"current"),t.preventDefault()),27==e&&$.one("keydown",p)}function p(t){var e=t.which||t.keyCode;37==e&&v(t,"prev"),39==e&&v(t,"next")}function v(t,e){t.preventDefault(),a={type:e,bustCache:!0},i.resolve()}s&&(c.skip&&!0===window.DEBUG&&($.on("keydown",h),t.$on("$destroy",function(){$.off("keydown",h),$.off("keydown",p)})),w.current=d.current=u.current||{},l&&(d[l]&&b({type:"warn",tags:["task"],message:'This taskName has already been in use: "'+l+'"'}),lodash.extend(w.current,d[l]||{}),y.piGlobal[l]=u.current),o=(i=m(s,e,t.$new(),f)).promise,n=g(s.canvas),o.finally(n),s.title&&(r=$[0].title,$[0].title=s.title,o.finally(function(){$[0].title=r})),o.finally(function(){t.$emit("task:done",a)}))}}}function createLog(t,e,n){var r=n.$name,i=n.type,o=cloneSet(lodash.get(e,"settings.logger",{}),lodash.camelCase("is-"+i),!0),a=t.createLog(r,o),s=t.createLog(r,cloneSet(o,"isSave",!0));return a.end(s.end),e._save=s,e._toSave&&(e._toSave.map(s),e._toSave.length=0),a}function cloneSet(t,e,n){return lodash.assign(lodash.set({},e,n),t)}function activateQuest$1(t,e,n,r,i,o,a){var s,u=createLog(a,i,o);i.name=o.$name,n.script=i,e.append("<div pi-quest></div>"),r(s=e.contents())(n),s.controller("piQuest").task.promise.finally(t);var l=s.controller("piQuest").task.$logs;return l.map(u),l.end.map(u.end),function(){s.scope().$destroy(),s.remove()}}function activateMessage$1(t,e,n,r,i){var o;return r.script=n,e.append("<div pi-message></div>"),i(o=e.contents())(r),r.$on("message:done",function(){t()}),function(){r.$destroy(),o.remove()}}function xhr(r){return new Promise(function(t,e){var n=new XMLHttpRequest;n.open(r.method||"POST",r.url,!0),n.setRequestHeader("Content-Type",r.contentType||"application/json; charset=UTF-8"),n.onreadystatechange=function(){4===n.readyState&&(200<=n.status&&n.status<400?t(n.responseText):e(new Error('Failed sending to: "'+r.url+'". '+n.statusText+" ("+n.status+")")))},n.send(r.body)})}module$12.directive("piMessage",directive$8),module$12.directive("piMessageDone",directive$9),taskActivateProvider.$inject=["$q","$rootScope","$injector"],directive$10.$inject=["taskActivate","managerCanvas","$document","$window","$rootScope","piConsole"],activateQuest$1.$inject=["done","$element","$scope","$compile","script","task","logger"],activateMessage$1.$inject=["done","$element","task","$scope","$compile"];var csvLogger={onRow:function(t,e,n,r){(r.csv||(r.csv=[])).push(lodash.assign({taskName:t},e))},onEnd:function(t,e,n){if("manager"==t)return n.logs},serialize:function(t,e){return toCsv(createMatrix(e))},send:function(e,n,r,i){return xhr({url:lodash.isString(r.postCsv)?r.postCsv:r.url,body:n}).catch(function(t){r.onError.apply(null,[t,e,n,r,i])})}};function createMatrix(t){var e,r=GetIndex(),n=t.map(function(t){var n=[];return lodash.forEach(t,function(t,e){n[r(e)]="object"==typeof t?JSON.stringify(t):t}),n}),i=r();return n.forEach((e=i.length,function(t){t.length=e})),[i].concat(n)}function GetIndex(){var e={taskName:0},n=1;return function(t){return arguments.length?t in e?e[t]:e[t]=n++:lodash.keys(e)}}var quotableRgx=/(\n|,|")/;function toCsv(t){return t.map(buildRow).join("\n")}function buildRow(t){return t.map(normalize).join(",")}function normalize(t){return quotableRgx.test(t)?'"'+t.replace(/"/g,'""')+'"':t}function postCsv(t,e,n){var r=n.ctx.logs;if(!r||!r.length)return t();var i=csvLogger.serialize("manager",r);csvLogger.send("manager",i,e).then(function(){r.length=0}).finally(t)}function activatePost$1(t,e,n,r){var i,o,a,s=r.global,u=e.path?function(t){lodash.isString(t)&&(t=[t]);return t.reduce(function(t,e){var n=lodash.get(s,e);return lodash.set(t,e,n)},{})}(e.path):(i=e.data,a=i.data,lodash.isPlainObject(a)?a:lodash.isFunction(a)?a(o,i):lodash.set({},i.path||"key",a)),l=lodash.assign({isSave:!0},e.settings),c=n.createLog(e.$name,l);c(u),c.end(!0),t()}function activateRedirect$1(t,e,n){if(!lodash.result(e,"condition",!0))return t();n.deactivate(),location.href=e.url}function activatePIP$1(e,t,n,r,i,o){var a,s,u,l=createLog(o,r,n);return r.name=n.$name,.4<n.version?(t.append("<div pi-player></div>"),a=t.contents(),requirejs$1([n.baseUrl+"/dist/time.js"],function(t){(u=t(a[0],r)).onEnd(e),u.$messages.map(i),u.$logs.map(l),u.$logs.end.map(l.end)},function(t){throw i({type:"error",message:"Failed to load minno-time, please make sure that task.baseUrl is set correctly",error:t}),t}),function(){l.end(!0),a.remove(),u&&u.end()}):(s=requirejs$1.config({context:lodash.uniqueId(),baseUrl:n.baseUrl+"/dist/js",paths:{text:["//cdnjs.cloudflare.com/ajax/libs/require-text/2.0.3/text.min","../../bower_components/require-text/text"],jquery:["//cdnjs.cloudflare.com/ajax/libs/jquery/1.10.2/jquery.min","../../bower_components/jquery/dist/jquery.min"],underscore:["//cdnjs.cloudflare.com/ajax/libs/lodash.js/3.10.1/lodash.min","../../bower_components/lodash-compat/lodash.min"],backbone:["//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min","../../bower_components/backbone/backbone"]},deps:["jquery","backbone","underscore"]}),n.name&&(r.name=n.name),t.append("<div pi-player></div>"),(a=t.contents()).addClass("pi-spinner"),s(["activatePIP"],function(t){a.removeClass("pi-spinner"),t(r,e)}),function(){a.remove(),s(["app/task/main_view"],function(t){t.deferred.resolve(),t.destroy()})})}function log(){console.log.apply(console,arguments)}postCsv.$inject=["done","task","logger"],activatePost$1.$inject=["done","task","logger","$rootScope","piConsole"],activateRedirect$1.$inject=["done","task","managerBeforeUnload"],activatePIP$1.$inject=["done","$element","task","script","piConsole","logger"],Date.now||(Date.now=function(){return(new Date).getTime()}),function(t){var e,n=["now","webkitNow","msNow","mozNow"];if(t.performance)for(var r=0;r<n.length;++r){var i=n[r];if(t.performance[i]){e=function(){return t.performance[i]()};break}}e||(e=Date.now),t.perfNow=e}(window),console.group||(console.group=log),console.groupCollapsed||(console.groupCollapsed=log),console.groupEnd||(console.groupEnd=log),console.table||(console.table=log),function(){for(var t=["webkit","moz"],e=0;e<t.length&&!window.requestAnimationFrame;++e){var n=t[e];window.requestAnimationFrame=window[n+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var r=0;window.requestAnimationFrame=function(t){var e=Date.now(),n=Math.max(r+16,e);return setTimeout(function(){t(r=n)},n-e)},window.cancelAnimationFrame=clearTimeout}}();var PromisePolyfill=function(t){if(!(this instanceof PromisePolyfill))throw new Error("Promise must be called with `new`");if("function"!=typeof t)throw new TypeError("executor must be a function");var o=this,a=[],s=[],i=e(a,!0),u=e(s,!1),l=o._instance={resolvers:a,rejectors:s},c="function"==typeof setImmediate?setImmediate:setTimeout;function e(r,i){return function e(n){var t;try{if(!i||null==n||"object"!=typeof n&&"function"!=typeof n||"function"!=typeof(t=n.then))c(function(){i||0!==r.length||console.error("Possible unhandled promise rejection:",n);for(var t=0;t<r.length;t++)r[t](n);a.length=0,s.length=0,l.state=i,l.retry=function(){e(n)}});else{if(n===o)throw new TypeError("Promise can't be resolved w/ itself");f(t.bind(n))}}catch(t){u(t)}}}function f(t){var n=0;function e(e){return function(t){0<n++||e(t)}}var r=e(u);try{t(e(i),r)}catch(t){r(t)}}f(t)};function styleInject(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}PromisePolyfill.prototype.then=function(t,e){var i,o,a=this._instance;function n(e,t,n,r){t.push(function(t){if("function"!=typeof e)n(t);else try{i(e(t))}catch(t){o&&o(t)}}),"function"==typeof a.retry&&r===a.state&&a.retry()}var r=new PromisePolyfill(function(t,e){i=t,o=e});return n(t,a.resolvers,i,!0),n(e,a.rejectors,o,!1),r},PromisePolyfill.prototype.catch=function(t){return this.then(null,t)},PromisePolyfill.resolve=function(e){return e instanceof PromisePolyfill?e:new PromisePolyfill(function(t){t(e)})},PromisePolyfill.reject=function(n){return new PromisePolyfill(function(t,e){e(n)})},PromisePolyfill.all=function(s){return new PromisePolyfill(function(n,r){var i=s.length,o=0,a=[];if(0===s.length)n([]);else for(var t=0;t<s.length;t++)!function(e){function t(t){o++,a[e]=t,o===i&&n(a)}null==s[e]||"object"!=typeof s[e]&&"function"!=typeof s[e]||"function"!=typeof s[e].then?t(s[e]):s[e].then(t,r)}(t)})},PromisePolyfill.race=function(r){return new PromisePolyfill(function(t,e){for(var n=0;n<r.length;n++)r[n].then(t,e)})},void 0===window.Promise&&(window.Promise=PromisePolyfill);var css=".minno-canvas{height:400px;width:500px;position:relative;border:5px solid #fff;margin:auto;margin-top:10px;-webkit-text-size-adjust:none;-webkit-touch-callout:none;-webkit-tap-highlight-color:transparent;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.minno-stimulus{position:absolute;text-align:center;overflow:hidden;visibility:hidden;width:fit-content}.minno-stimulus-visible{visibility:visible}.minno-stimulus-center-x{left:50%;transform:translateX(-50%)}.minno-stimulus-center-y{top:50%;transform:translateY(-50%)}.minno-stimulus-center-y.minno-stimulus-center-x{transform:translate(-50%,-50%)}.minno-progress{background-color:#20201f;border-radius:20px;padding:4px;position:relative;top:50%;width:80%;margin-left:10%;margin-top:-12px}.minno-progress-bar{background-color:#807b7a;width:0;height:16px;border-radius:10px}";styleInject(css);var lodash$1=createCommonjsModule(function($,y){
/**
 * @license
 * lodash 3.10.1 (Custom Build) <https://lodash.com/>
 * Build: `lodash modern -d -o ./index.js`
 * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <https://lodash.com/license>
 */
(function(){var pi,t,e,vi="3.10.1",mi=1,gi=2,$i=4,yi=8,wi=16,bi=32,xi=64,_i=128,Si=256,Ei=30,ki="...",Ci=150,qi=16,Ai=200,Pi=1,ji=2,Ti="Expected a function",Mi="__lodash_placeholder__",Oi="[object Arguments]",Di="[object Array]",Ri="[object Boolean]",Ni="[object Date]",Ii="[object Error]",Fi="[object Function]",n="[object Map]",Ui="[object Number]",Li="[object Object]",Vi="[object RegExp]",r="[object Set]",Bi="[object String]",i="[object WeakMap]",zi="[object ArrayBuffer]",Wi="[object Float32Array]",Hi="[object Float64Array]",Gi="[object Int8Array]",Qi="[object Int16Array]",Yi="[object Int32Array]",Xi="[object Uint8Array]",Ji="[object Uint8ClampedArray]",Ki="[object Uint16Array]",Zi="[object Uint32Array]",to=/\b__p \+= '';/g,eo=/\b(__p \+=) '' \+/g,no=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ro=/&(?:amp|lt|gt|quot|#39|#96);/g,io=/[&<>"'`]/g,oo=RegExp(ro.source),ao=RegExp(io.source),so=/<%-([\s\S]+?)%>/g,uo=/<%([\s\S]+?)%>/g,lo=/<%=([\s\S]+?)%>/g,co=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,fo=/^\w*$/,ho=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,po=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,vo=RegExp(po.source),mo=/[\u0300-\u036f\ufe20-\ufe23]/g,go=/\\(\\)?/g,$o=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,yo=/\w*$/,wo=/^0[xX]/,bo=/^\[object .+?Constructor\]$/,xo=/^\d+$/,_o=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,So=/($^)/,Eo=/['\n\r\u2028\u2029\\]/g,ko=(t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",e="[a-z\\xdf-\\xf6\\xf8-\\xff]+",RegExp(t+"+(?="+t+e+")|"+t+"?"+e+"|"+t+"+|[0-9]+","g")),Co=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],qo=-1,Ao={};Ao[Wi]=Ao[Hi]=Ao[Gi]=Ao[Qi]=Ao[Yi]=Ao[Xi]=Ao[Ji]=Ao[Ki]=Ao[Zi]=!0,Ao[Oi]=Ao[Di]=Ao[zi]=Ao[Ri]=Ao[Ni]=Ao[Ii]=Ao[Fi]=Ao[n]=Ao[Ui]=Ao[Li]=Ao[Vi]=Ao[r]=Ao[Bi]=Ao[i]=!1;var Po={};Po[Oi]=Po[Di]=Po[zi]=Po[Ri]=Po[Ni]=Po[Wi]=Po[Hi]=Po[Gi]=Po[Qi]=Po[Yi]=Po[Ui]=Po[Li]=Po[Vi]=Po[Bi]=Po[Xi]=Po[Ji]=Po[Ki]=Po[Zi]=!0,Po[Ii]=Po[Fi]=Po[n]=Po[r]=Po[i]=!1;var o={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},s={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},u={function:!0,object:!0},l={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},c={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},f=u.object&&y&&!y.nodeType&&y,d=u.object&&$&&!$.nodeType&&$,h=f&&d&&"object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object&&commonjsGlobal,p=u[typeof self]&&self&&self.Object&&self,v=u[typeof window]&&window&&window.Object&&window,m=d&&d.exports===f&&f,jo=h||v!==(this&&this.window)&&v||p||this;function To(t,e){if(t!==e){var n=null===t,r=t===pi,i=t==t,o=null===e,a=e===pi,s=e==e;if(e<t&&!o||!i||n&&!a&&s||r&&s)return 1;if(t<e&&!n||!s||o&&!r&&i||a&&i)return-1}return 0}function Mo(t,e,n){for(var r=t.length,i=n?r:-1;n?i--:++i<r;)if(e(t[i],i,t))return i;return-1}function Oo(t,e,n){if(e!=e)return zo(t,n);for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function Do(t){return"function"==typeof t||!1}function Ro(t){return null==t?"":t+""}function No(t,e){for(var n=-1,r=t.length;++n<r&&-1<e.indexOf(t.charAt(n)););return n}function Io(t,e){for(var n=t.length;n--&&-1<e.indexOf(t.charAt(n)););return n}function Fo(t,e){return To(t.criteria,e.criteria)||t.index-e.index}function Uo(t){return o[t]}function Lo(t){return a[t]}function Vo(t,e,n){return e?t=l[t]:n&&(t=c[t]),"\\"+t}function Bo(t){return"\\"+c[t]}function zo(t,e,n){for(var r=t.length,i=e+(n?0:-1);n?i--:++i<r;){var o=t[i];if(o!=o)return i}return-1}function Wo(t){return!!t&&"object"==typeof t}function g(t){return t<=160&&9<=t&&t<=13||32==t||160==t||5760==t||6158==t||8192<=t&&(t<=8202||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function Ho(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n<r;)t[n]===e&&(t[n]=Mi,o[++i]=n);return o}function Go(t){for(var e=-1,n=t.length;++e<n&&g(t.charCodeAt(e)););return e}function Qo(t){for(var e=t.length;e--&&g(t.charCodeAt(e)););return e}function Yo(t){return s[t]}var Xo=function t(e){var A=(e=e?Xo.defaults(jo.Object(),e,Xo.pick(jo,Co)):jo).Array,n=e.Date,r=e.Error,m=e.Function,i=e.Math,o=e.Number,g=e.Object,$=e.RegExp,a=e.String,y=e.TypeError,s=A.prototype,u=g.prototype,l=a.prototype,c=m.prototype.toString,w=u.hasOwnProperty,f=0,b=u.toString,d=jo._,h=$("^"+c.call(w).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),p=e.ArrayBuffer,x=e.clearTimeout,v=e.parseFloat,_=i.pow,S=u.propertyIsEnumerable,E=De(e,"Set"),k=e.setTimeout,C=s.splice,q=e.Uint8Array,P=De(e,"WeakMap"),j=i.ceil,T=De(g,"create"),M=i.floor,O=De(A,"isArray"),D=e.isFinite,R=De(g,"keys"),N=i.max,I=i.min,F=De(n,"now"),U=e.parseInt,L=i.random,V=o.NEGATIVE_INFINITY,B=o.POSITIVE_INFINITY,z=4294967295,W=z-1,H=z>>>1,G=9007199254740991,Q=P&&new P,Y={};function X(t){if(Wo(t)&&!cr(t)&&!(t instanceof Z)){if(t instanceof K)return t;if(w.call(t,"__chain__")&&w.call(t,"__wrapped__"))return Ze(t)}return new K(t)}function J(){}function K(t,e,n){this.__wrapped__=t,this.__actions__=n||[],this.__chain__=!!e}X.support={};function Z(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=B,this.__views__=[]}function tt(){this.__data__={}}function et(t){var e=t?t.length:0;for(this.data={hash:T(null),set:new E};e--;)this.push(t[e])}function nt(t,e){var n=t.data;return("string"==typeof e||pr(e)?n.set.has(e):n.hash[e])?0:-1}function rt(t,e){var n=-1,r=t.length;for(e||(e=A(r));++n<r;)e[n]=t[n];return e}function it(t,e){for(var n=-1,r=t.length;++n<r&&!1!==e(t[n],n,t););return t}function ot(t,e){for(var n=-1,r=t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function at(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[++i]=a)}return o}function st(t,e){for(var n=-1,r=t.length,i=A(r);++n<r;)i[n]=e(t[n],n,t);return i}function ut(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function lt(t,e,n,r){var i=-1,o=t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function ct(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function ft(t,e,n,r){return t!==pi&&w.call(r,n)?t:e}function dt(t,e,n){for(var r=-1,i=Dr(e),o=i.length;++r<o;){var a=i[r],s=t[a],u=n(s,e[a],a,t,e);(u==u?u===s:s!=s)&&(s!==pi||a in t)||(t[a]=u)}return t}function ht(t,e){return null==e?t:vt(e,Dr(e),t)}function pt(t,e){for(var n=-1,r=null==t,i=!r&&Ne(t),o=i?t.length:0,a=e.length,s=A(a);++n<a;){var u=e[n];s[n]=i?Ie(u,o)?t[u]:pi:r?pi:t[u]}return s}function vt(t,e,n){n||(n={});for(var r=-1,i=e.length;++r<i;){var o=e[r];n[o]=t[o]}return n}function mt(t,e,n){var r=typeof t;return"function"==r?e===pi?t:Zt(t,e,n):null==t?ei:"object"==r?Nt(t):e===pi?si(t):It(t,e)}function gt(n,r,i,t,e,o,a){var s;if(i&&(s=e?i(n,t,e):i(n)),s!==pi)return s;if(!pr(n))return n;var u,l,c,f,d=cr(n);if(d){if(c=(l=n).length,f=new l.constructor(c),c&&"string"==typeof l[0]&&w.call(l,"index")&&(f.index=l.index,f.input=l.input),s=f,!r)return rt(n,s)}else{var h=b.call(n),p=h==Fi;if(h!=Li&&h!=Oi&&(!p||e))return Po[h]?function(t,e,n){var r=t.constructor;switch(e){case zi:return te(t);case Ri:case Ni:return new r(+t);case Wi:case Hi:case Gi:case Qi:case Yi:case Xi:case Ji:case Ki:case Zi:var i=t.buffer;return new r(n?te(i):i,t.byteOffset,t.length);case Ui:case Bi:return new r(t);case Vi:var o=new r(t.source,yo.exec(t));o.lastIndex=t.lastIndex}return o}(n,h,r):e?n:{};if("function"==typeof(u=(p?{}:n).constructor)&&u instanceof u||(u=g),s=new u,!r)return ht(s,n)}o||(o=[]),a||(a=[]);for(var v=o.length;v--;)if(o[v]==n)return a[v];return o.push(n),a.push(s),(d?it:Pt)(n,function(t,e){s[e]=gt(t,r,i,e,n,o,a)}),s}X.templateSettings={escape:so,evaluate:uo,interpolate:lo,variable:"",imports:{_:X}};var $t=function(){function n(){}return function(t){if(pr(t)){n.prototype=t;var e=new n;n.prototype=pi}return e||{}}}();function yt(t,e,n){if("function"!=typeof t)throw new y(Ti);return k(function(){t.apply(pi,n)},e)}function wt(t,e){var n=t?t.length:0,r=[];if(!n)return r;var i=-1,o=Te(),a=o==Oo,s=a&&e.length>=Ai?se(e):null,u=e.length;s&&(o=nt,a=!1,e=s);t:for(;++i<n;){var l=t[i];if(a&&l==l){for(var c=u;c--;)if(e[c]===l)continue t;r.push(l)}else o(e,l,0)<0&&r.push(l)}return r}var bt=oe(Pt),xt=oe(jt,!0);function _t(t,r){var i=!0;return bt(t,function(t,e,n){return i=!!r(t,e,n)}),i}function St(t,r){var i=[];return bt(t,function(t,e,n){r(t,e,n)&&i.push(t)}),i}function Et(t,r,e,i){var o;return e(t,function(t,e,n){if(r(t,e,n))return o=i?e:t,!1}),o}function kt(t,e,n,r){r||(r=[]);for(var i=-1,o=t.length;++i<o;){var a=t[i];Wo(a)&&Ne(a)&&(n||cr(a)||lr(a))?e?kt(a,e,n,r):ut(r,a):n||(r[r.length]=a)}return r}var Ct=ae(),qt=ae(!0);function At(t,e){return Ct(t,e,Rr)}function Pt(t,e){return Ct(t,e,Dr)}function jt(t,e){return qt(t,e,Dr)}function Tt(t,e){for(var n=-1,r=e.length,i=-1,o=[];++n<r;){var a=e[n];hr(t[a])&&(o[++i]=a)}return o}function Mt(t,e,n){if(null!=t){n!==pi&&n in Je(t)&&(e=[n]);for(var r=0,i=e.length;null!=t&&r<i;)t=t[e[r++]];return r&&r==i?t:pi}}function Ot(t,e,n,r,i,o){return t===e||(null==t||null==e||!pr(t)&&!Wo(e)?t!=t&&e!=e:function(t,e,n,r,i,o,a){var s=cr(t),u=cr(e),l=Di,c=Di;s||((l=b.call(t))==Oi?l=Li:l!=Li&&(s=wr(t))),u||((c=b.call(e))==Oi?c=Li:c!=Li&&(u=wr(e)));var f=l==Li,d=c==Li,h=l==c;if(h&&!s&&!f)return function(t,e,n){switch(n){case Ri:case Ni:return+t==+e;case Ii:return t.name==e.name&&t.message==e.message;case Ui:return t!=+t?e!=+e:t==+e;case Vi:case Bi:return t==e+""}return!1}(t,e,l);if(!i){var p=f&&w.call(t,"__wrapped__"),v=d&&w.call(e,"__wrapped__");if(p||v)return n(p?t.value():t,v?e.value():e,r,i,o,a)}if(!h)return!1;o||(o=[]),a||(a=[]);for(var m=o.length;m--;)if(o[m]==t)return a[m]==e;o.push(t),a.push(e);var g=(s?function(t,e,n,r,i,o,a){var s=-1,u=t.length,l=e.length;if(u!=l&&!(i&&u<l))return!1;for(;++s<u;){var c=t[s],f=e[s],d=r?r(i?f:c,i?c:f,s):pi;if(d!==pi){if(d)continue;return!1}if(i){if(!ct(e,function(t){return c===t||n(c,t,r,i,o,a)}))return!1}else if(c!==f&&!n(c,f,r,i,o,a))return!1}return!0}:function(t,e,n,r,i,o,a){var s=Dr(t),u=s.length,l=Dr(e).length;if(u!=l&&!i)return!1;for(var c=u;c--;){var f=s[c];if(!(i?f in e:w.call(e,f)))return!1}for(var d=i;++c<u;){f=s[c];var h=t[f],p=e[f],v=r?r(i?p:h,i?h:p,f):pi;if(!(v===pi?n(h,p,r,i,o,a):v))return!1;d||(d="constructor"==f)}if(!d){var m=t.constructor,g=e.constructor;if(m!=g&&"constructor"in t&&"constructor"in e&&!("function"==typeof m&&m instanceof m&&"function"==typeof g&&g instanceof g))return!1}return!0})(t,e,n,r,i,o,a);return o.pop(),a.pop(),g}(t,e,Ot,n,r,i,o))}function Dt(t,e,n){var r=e.length,i=r,o=!n;if(null==t)return!i;for(t=Je(t);r--;){var a=e[r];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++r<i;){var s=(a=e[r])[0],u=t[s],l=a[1];if(o&&a[2]){if(u===pi&&!(s in t))return!1}else{var c=n?n(u,l,s):pi;if(!(c===pi?Ot(l,u,n,!0):c))return!1}}return!0}function Rt(t,r){var i=-1,o=Ne(t)?A(t.length):[];return bt(t,function(t,e,n){o[++i]=r(t,e,n)}),o}function Nt(t){var e=Oe(t);if(1==e.length&&e[0][2]){var n=e[0][0],r=e[0][1];return function(t){return null!=t&&t[n]===r&&(r!==pi||n in Je(t))}}return function(t){return Dt(t,e)}}function It(n,r){var i=cr(n),o=Ue(n)&&Be(r),a=n+"";return n=Ke(n),function(t){if(null==t)return!1;var e=a;if(t=Je(t),(i||!o)&&!(e in t)){if(null==(t=1==n.length?t:Mt(t,Bt(n,0,-1))))return!1;e=ln(n),t=Je(t)}return t[e]===r?r!==pi||e in t:Ot(r,t[e],pi,!0)}}function Ft(e){return function(t){return null==t?pi:t[e]}}function Ut(t,e){for(var n=t?e.length:0;n--;){var r=e[n];if(r!=i&&Ie(r)){var i=r;C.call(t,r,1)}}return t}function Lt(t,e){return t+M(L()*(e-t+1))}var Vt=Q?function(t,e){return Q.set(t,e),t}:ei;function Bt(t,e,n){var r=-1,i=t.length;(e=null==e?0:+e||0)<0&&(e=i<-e?0:i+e),(n=n===pi||i<n?i:+n||0)<0&&(n+=i),i=n<e?0:n-e>>>0,e>>>=0;for(var o=A(i);++r<i;)o[r]=t[r+e];return o}function zt(t,r){var i;return bt(t,function(t,e,n){return!(i=r(t,e,n))}),!!i}function Wt(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function Ht(t,n,r){var e=Ae(),i=-1;return n=st(n,function(t){return e(t)}),Wt(Rt(t,function(e){return{criteria:st(n,function(t){return t(e)}),index:++i,value:e}}),function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var u=To(i[r],o[r]);if(u){if(s<=r)return u;var l=n[r];return u*("asc"===l||!0===l?1:-1)}}return t.index-e.index}(t,e,r)})}function Gt(t,e){var n=-1,r=Te(),i=t.length,o=r==Oo,a=o&&Ai<=i,s=a?se():null,u=[];s?(r=nt,o=!1):(a=!1,s=e?[]:u);t:for(;++n<i;){var l=t[n],c=e?e(l,n,t):l;if(o&&l==l){for(var f=s.length;f--;)if(s[f]===c)continue t;e&&s.push(c),u.push(l)}else r(s,c,0)<0&&((e||a)&&s.push(c),u.push(l))}return u}function Qt(t,e){for(var n=-1,r=e.length,i=A(r);++n<r;)i[n]=t[e[n]];return i}function Yt(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?Bt(t,r?0:o,r?o+1:i):Bt(t,r?o+1:0,r?i:o)}function Xt(t,e){var n=t;n instanceof Z&&(n=n.value());for(var r=-1,i=e.length;++r<i;){var o=e[r];n=o.func.apply(o.thisArg,ut([n],o.args))}return n}function Jt(t,e,n){var r=0,i=t?t.length:r;if("number"==typeof e&&e==e&&i<=H){for(;r<i;){var o=r+i>>>1,a=t[o];(n?a<=e:a<e)&&null!==a?r=o+1:i=o}return i}return Kt(t,e,ei,n)}function Kt(t,e,n,r){e=n(e);for(var i=0,o=t?t.length:0,a=e!=e,s=null===e,u=e===pi;i<o;){var l=M((i+o)/2),c=n(t[l]),f=c!==pi,d=c==c;if(a)var h=d||r;else h=s?d&&f&&(r||null!=c):u?d&&(r||f):null!=c&&(r?c<=e:c<e);h?i=l+1:o=l}return I(o,W)}function Zt(o,a,t){if("function"!=typeof o)return ei;if(a===pi)return o;switch(t){case 1:return function(t){return o.call(a,t)};case 3:return function(t,e,n){return o.call(a,t,e,n)};case 4:return function(t,e,n,r){return o.call(a,t,e,n,r)};case 5:return function(t,e,n,r,i){return o.call(a,t,e,n,r,i)}}return function(){return o.apply(a,arguments)}}function te(t){var e=new p(t.byteLength);return new q(e).set(new q(t)),e}function ee(t,e,n){for(var r=n.length,i=-1,o=N(t.length-r,0),a=-1,s=e.length,u=A(s+o);++a<s;)u[a]=e[a];for(;++i<r;)u[n[i]]=t[i];for(;o--;)u[a++]=t[i++];return u}function ne(t,e,n){for(var r=-1,i=n.length,o=-1,a=N(t.length-i,0),s=-1,u=e.length,l=A(a+u);++o<a;)l[o]=t[o];for(var c=o;++s<u;)l[c+s]=e[s];for(;++r<i;)l[c+n[r]]=t[o++];return l}function re(s,u){return function(t,r,e){var i=u?u():{};if(r=Ae(r,e,3),cr(t))for(var n=-1,o=t.length;++n<o;){var a=t[n];s(i,a,r(a,n,t),t)}else bt(t,function(t,e,n){s(i,t,r(t,e,n),n)});return i}}function ie(u){return sr(function(t,e){var n=-1,r=null==t?0:e.length,i=2<r?e[r-2]:pi,o=2<r?e[2]:pi,a=1<r?e[r-1]:pi;for("function"==typeof i?(i=Zt(i,a,5),r-=2):r-=(i="function"==typeof a?a:pi)?1:0,o&&Fe(e[0],e[1],o)&&(i=r<3?pi:i,r=1);++n<r;){var s=e[n];s&&u(t,s,i)}return t})}function oe(o,a){return function(t,e){var n=t?Me(t):0;if(!Ve(n))return o(t,e);for(var r=a?n:-1,i=Je(t);(a?r--:++r<n)&&!1!==e(i[r],r,i););return t}}function ae(u){return function(t,e,n){for(var r=Je(t),i=n(t),o=i.length,a=u?o:-1;u?a--:++a<o;){var s=i[a];if(!1===e(r[s],s,r))break}return t}}function se(t){return T&&E?new et(t):null}function ue(o){return function(t){for(var e=-1,n=Kr(zr(t)),r=n.length,i="";++e<r;)i=o(i,n[e],e);return i}}function le(r){return function(){var t=arguments;switch(t.length){case 0:return new r;case 1:return new r(t[0]);case 2:return new r(t[0],t[1]);case 3:return new r(t[0],t[1],t[2]);case 4:return new r(t[0],t[1],t[2],t[3]);case 5:return new r(t[0],t[1],t[2],t[3],t[4]);case 6:return new r(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new r(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var e=$t(r.prototype),n=r.apply(e,t);return pr(n)?n:e}}function ce(o){return function t(e,n,r){r&&Fe(e,n,r)&&(n=pi);var i=qe(e,o,pi,pi,pi,pi,pi,n);return i.placeholder=t.placeholder,i}}function fe(n,r){return sr(function(t){var e=t[0];return null==e?e:(t.push(r),n.apply(pi,t))})}function de(l,c){return function(t,e,n){if(n&&Fe(t,e,n)&&(e=pi),1==(e=Ae(e,n,3)).length){var r=function(t,e,n,r){for(var i=-1,o=t.length,a=r,s=a;++i<o;){var u=t[i],l=+e(u);n(l,a)&&(a=l,s=u)}return s}(t=cr(t)?t:Xe(t),e,l,c);if(!t.length||r!==c)return r}return i=e,o=l,u=s=a=c,bt(t,function(t,e,n){var r=+i(t,e,n);(o(r,s)||r===a&&r===u)&&(s=r,u=t)}),u;var i,o,a,s,u}}function he(i,o){return function(t,e,n){if(e=Ae(e,n,3),cr(t)){var r=Mo(t,e,o);return-1<r?t[r]:pi}return Et(t,e,i)}}function pe(r){return function(t,e,n){return t&&t.length?Mo(t,e=Ae(e,n,3),r):-1}}function ve(r){return function(t,e,n){return Et(t,e=Ae(e,n,3),r,!0)}}function me(u){return function(){for(var i,o=arguments.length,t=u?o:-1,e=0,a=A(o);u?t--:++t<o;){var n=a[e++]=arguments[t];if("function"!=typeof n)throw new y(Ti);!i&&K.prototype.thru&&"wrapper"==je(n)&&(i=new K([],!0))}for(t=i?-1:o;++t<o;){var r=je(n=a[t]),s="wrapper"==r?Pe(n):pi;i=s&&Le(s[0])&&s[1]==(_i|yi|bi|Si)&&!s[4].length&&1==s[9]?i[je(s[0])].apply(i,s[3]):1==n.length&&Le(n)?i[r]():i.thru(n)}return function(){var t=arguments,e=t[0];if(i&&1==t.length&&cr(e)&&e.length>=Ai)return i.plant(e).value();for(var n=0,r=o?a[n].apply(this,t):e;++n<o;)r=a[n].call(this,r);return r}}}function ge(r,i){return function(t,e,n){return"function"==typeof e&&n===pi&&cr(t)?r(t,e):i(t,Zt(e,n,3))}}function $e(r){return function(t,e,n){return"function"==typeof e&&n===pi||(e=Zt(e,n,3)),r(t,e,Rr)}}function ye(r){return function(t,e,n){return"function"==typeof e&&n===pi||(e=Zt(e,n,3)),r(t,e)}}function we(a){return function(t,i,e){var o={};return i=Ae(i,e,3),Pt(t,function(t,e,n){var r=i(t,e,n);t=a?t:r,o[e=a?r:e]=t}),o}}function be(r){return function(t,e,n){return t=Ro(t),(r?t:"")+Ee(t,e,n)+(r?"":t)}}function xe(r){var i=sr(function(t,e){var n=Ho(e,i.placeholder);return qe(t,r,pi,e,n)});return i}function _e(l,c){return function(t,e,n,r){var i,o,a,s,u=arguments.length<3;return"function"==typeof e&&r===pi&&cr(t)?l(t,e,n,u):(i=t,o=Ae(e,r,4),a=n,s=u,c(i,function(t,e,n){a=s?(s=!1,t):o(a,t,e,n)}),a)}}function Se(d,h,p,v,m,g,$,y,w,b){var x=h&_i,_=h&mi,S=h&gi,E=h&yi,k=h&$i,C=h&wi,q=S?pi:le(d);return function t(){for(var e=arguments.length,n=e,r=A(e);n--;)r[n]=arguments[n];if(v&&(r=ee(r,v,m)),g&&(r=ne(r,g,$)),E||C){var i=t.placeholder,o=Ho(r,i);if((e-=o.length)<b){var a=y?rt(y):pi,s=N(b-e,0);h|=E?bi:xi,h&=~(E?xi:bi),k||(h&=~(mi|gi));var u=[d,h,p,E?r:pi,E?o:pi,E?pi:r,E?pi:o,a,w,s],l=Se.apply(pi,u);return Le(d)&&Qe(l,u),l.placeholder=i,l}}var c=_?p:this,f=S?c[d]:d;return y&&(r=function(t,e){for(var n=t.length,r=I(e.length,n),i=rt(t);r--;){var o=e[r];t[r]=Ie(o,n)?i[o]:pi}return t}(r,y)),x&&w<r.length&&(r.length=w),this&&this!==jo&&this instanceof t&&(f=q||le(d)),f.apply(c,r)}}function Ee(t,e,n){var r=t.length;if((e=+e)<=r||!D(e))return"";var i=e-r;return Qr(n=null==n?" ":n+"",j(i/n.length)).slice(0,i)}function ke(t){var n=i[t];return function(t,e){return(e=e===pi?0:+e||0)?(e=_(10,e),n(t*e)/e):n(t)}}function Ce(o){return function(t,e,n,r){var i=Ae(n);return null==n&&i===mt?Jt(t,e,o):Kt(t,e,i(n,r,1),o)}}function qe(t,e,n,r,i,o,a,s){var u=e&gi;if(!u&&"function"!=typeof t)throw new y(Ti);var l=r?r.length:0;if(l||(e&=~(bi|xi),r=i=pi),l-=i?i.length:0,e&xi){var c=r,f=i;r=i=pi}var d,h,p,v=u?pi:Pe(t),m=[t,e,n,r,i,c,f,o,a,s];if(v&&(function(t,e){var n=t[1],r=e[1],i=n|r,o=i<_i,a=r==_i&&n==yi||r==_i&&n==Si&&t[7].length<=e[8]||r==(_i|Si)&&n==yi;if(o||a){r&mi&&(t[2]=e[2],i|=n&mi?0:$i);var s=e[3];if(s){var u=t[3];t[3]=u?ee(u,s,e[4]):rt(s),t[4]=u?Ho(t[3],Mi):rt(e[4])}(s=e[5])&&(u=t[5],t[5]=u?ne(u,s,e[6]):rt(s),t[6]=u?Ho(t[5],Mi):rt(e[6])),(s=e[7])&&(t[7]=rt(s)),r&_i&&(t[8]=null==t[8]?e[8]:I(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}}(m,v),e=m[1],s=m[9]),m[9]=null==s?u?0:t.length:N(s-l,0)||0,e==mi)var g=(d=m[0],h=m[2],p=le(d),function t(){return(this&&this!==jo&&this instanceof t?p:d).apply(h,arguments)});else g=e!=bi&&e!=(mi|bi)||m[4].length?Se.apply(pi,m):function(a,t,s,u){var l=t&mi,c=le(a);return function t(){for(var e=-1,n=arguments.length,r=-1,i=u.length,o=A(i+n);++r<i;)o[r]=u[r];for(;n--;)o[r++]=arguments[++e];return(this&&this!==jo&&this instanceof t?c:a).apply(l?s:this,o)}}.apply(pi,m);return(v?Vt:Qe)(g,m)}function Ae(t,e,n){var r=X.callback||ti;return r=r===ti?mt:r,n?r(t,e,n):r}var Pe=Q?function(t){return Q.get(t)}:ai;function je(t){for(var e=t.name,n=Y[e],r=n?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function Te(t,e,n){var r=X.indexOf||sn;return r=r===sn?Oo:r,t?r(t,e,n):r}var Me=Ft("length");function Oe(t){for(var e=Ur(t),n=e.length;n--;)e[n][2]=Be(e[n][1]);return e}function De(t,e){var n=null==t?pi:t[e];return vr(n)?n:pi}function Re(t,e,n){null==t||Ue(e,t)||(t=1==(e=Ke(e)).length?t:Mt(t,Bt(e,0,-1)),e=ln(e));var r=null==t?t:t[e];return null==r?pi:r.apply(t,n)}function Ne(t){return null!=t&&Ve(Me(t))}function Ie(t,e){return t="number"==typeof t||xo.test(t)?+t:-1,e=null==e?G:e,-1<t&&t%1==0&&t<e}function Fe(t,e,n){if(!pr(n))return!1;var r=typeof e;if("number"==r?Ne(n)&&Ie(e,n.length):"string"==r&&e in n){var i=n[e];return t==t?t===i:i!=i}return!1}function Ue(t,e){var n=typeof t;return!!("string"==n&&fo.test(t)||"number"==n)||!cr(t)&&(!co.test(t)||null!=e&&t in Je(e))}function Le(t){var e=je(t);if(!(e in Z.prototype))return!1;var n=X[e];if(t===n)return!0;var r=Pe(n);return!!r&&t===r[0]}function Ve(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=G}function Be(t){return t==t&&!pr(t)}function ze(t,e){t=Je(t);for(var n=-1,r=e.length,i={};++n<r;){var o=e[n];o in t&&(i[o]=t[o])}return i}function We(t,r){var i={};return At(t,function(t,e,n){r(t,e,n)&&(i[e]=t)}),i}var He,Ge,Qe=(Ge=He=0,function(t,e){var n=zn(),r=qi-(n-Ge);if(Ge=n,0<r){if(++He>=Ci)return t}else He=0;return Vt(t,e)});function Ye(t){for(var e=Rr(t),n=e.length,r=n&&t.length,i=!!r&&Ve(r)&&(cr(t)||lr(t)),o=-1,a=[];++o<n;){var s=e[o];(i&&Ie(s,r)||w.call(t,s))&&a.push(s)}return a}function Xe(t){return null==t?[]:Ne(t)?pr(t)?t:g(t):Vr(t)}function Je(t){return pr(t)?t:g(t)}function Ke(t){if(cr(t))return t;var i=[];return Ro(t).replace(ho,function(t,e,n,r){i.push(n?r.replace(go,"$1"):e||t)}),i}function Ze(t){return t instanceof Z?t.clone():new K(t.__wrapped__,t.__chain__,rt(t.__actions__))}var tn=sr(function(t,e){return Wo(t)&&Ne(t)?wt(t,kt(e,!1,!0)):[]});function en(t,e,n){return t&&t.length?((n?Fe(t,e,n):null==e)&&(e=1),Bt(t,e<0?0:e)):[]}function nn(t,e,n){var r=t?t.length:0;return r?((n?Fe(t,e,n):null==e)&&(e=1),Bt(t,0,(e=r-(+e||0))<0?0:e)):[]}var rn=pe(),on=pe(!0);function an(t){return t?t[0]:pi}function sn(t,e,n){var r=t?t.length:0;if(!r)return-1;if("number"==typeof n)n=n<0?N(r+n,0):n;else if(n){var i=Jt(t,e);return i<r&&(e==e?e===t[i]:t[i]!=t[i])?i:-1}return Oo(t,e,n||0)}var un=sr(function(t){for(var e=t.length,n=e,r=A(c),i=Te(),o=i==Oo,a=[];n--;){var s=t[n]=Ne(s=t[n])?s:[];r[n]=o&&120<=s.length?se(n&&s):null}var u=t[0],l=-1,c=u?u.length:0,f=r[0];t:for(;++l<c;)if(s=u[l],(f?nt(f,s):i(a,s,0))<0){for(n=e;--n;){var d=r[n];if((d?nt(d,s):i(t[n],s,0))<0)continue t}f&&f.push(s),a.push(s)}return a});function ln(t){var e=t?t.length:0;return e?t[e-1]:pi}var cn=sr(function(t,e){var n=pt(t,e=kt(e));return Ut(t,e.sort(To)),n});function fn(t){return en(t,1)}var dn=Ce(),hn=Ce(!0);var pn=sr(function(t){return Gt(kt(t,!1,!0))});function vn(t,e,n,r){if(!t||!t.length)return[];null!=e&&"boolean"!=typeof e&&(n=Fe(t,e,r=n)?pi:e,e=!1);var i=Ae();return null==n&&i===mt||(n=i(n,r,3)),e&&Te()==Oo?function(t,e){for(var n,r=-1,i=t.length,o=-1,a=[];++r<i;){var s=t[r],u=e?e(s,r,t):s;r&&n===u||(n=u,a[++o]=s)}return a}(t,n):Gt(t,n)}function mn(t){if(!t||!t.length)return[];var e=-1,n=0;t=at(t,function(t){if(Ne(t))return n=N(t.length,n),!0});for(var r=A(n);++e<n;)r[e]=st(t,Ft(e));return r}function gn(t,e,n){if(!t||!t.length)return[];var r=mn(t);return null==e?r:(e=Zt(e,n,4),st(r,function(t){return lt(t,e,pi,!0)}))}var $n=sr(function(t,e){return Ne(t)?wt(t,e):[]});var yn=sr(mn);function wn(t,e){var n=-1,r=t?t.length:0,i={};for(!r||e||cr(t[0])||(e=[]);++n<r;){var o=t[n];e?i[o]=e[n]:o&&(i[o[0]]=o[1])}return i}var bn=sr(function(t){var e=t.length,n=2<e?t[e-2]:pi,r=1<e?t[e-1]:pi;return 2<e&&"function"==typeof n?e-=2:(n=1<e&&"function"==typeof r?(--e,r):pi,r=pi),t.length=e,gn(t,n,r)});function xn(t){var e=X(t);return e.__chain__=!0,e}function _n(t,e,n){return e.call(n,t)}var Sn=sr(function(e){return e=kt(e),this.thru(function(t){return function(t,e){for(var n=-1,r=t.length,i=-1,o=e.length,a=A(r+o);++n<r;)a[n]=t[n];for(;++i<o;)a[n++]=e[i];return a}(cr(t)?t:[Je(t)],e)})});var En=sr(function(t,e){return pt(t,kt(e))}),kn=re(function(t,e,n){w.call(t,n)?++t[n]:t[n]=1});function Cn(t,e,n){var r=cr(t)?ot:_t;return n&&Fe(t,e,n)&&(e=pi),"function"==typeof e&&n===pi||(e=Ae(e,n,3)),r(t,e)}function qn(t,e,n){return(cr(t)?at:St)(t,e=Ae(e,n,3))}var An=he(bt),Pn=he(xt,!0);var jn=ge(it,bt),Tn=ge(function(t,e){for(var n=t.length;n--&&!1!==e(t[n],n,t););return t},xt),Mn=re(function(t,e,n){w.call(t,n)?t[n].push(e):t[n]=[e]});function On(t,e,n,r){var i=t?Me(t):0;return Ve(i)||(i=(t=Vr(t)).length),n="number"!=typeof n||r&&Fe(e,n,r)?0:n<0?N(i+n,0):n||0,"string"==typeof t||!cr(t)&&yr(t)?n<=i&&-1<t.indexOf(e,n):!!i&&-1<Te(t,e,n)}var Dn=re(function(t,e,n){t[n]=e}),Rn=sr(function(t,n,r){var i=-1,o="function"==typeof n,a=Ue(n),s=Ne(t)?A(t.length):[];return bt(t,function(t){var e=o?n:a&&null!=t?t[n]:pi;s[++i]=e?e.apply(t,r):Re(t,n,r)}),s});function Nn(t,e,n){return(cr(t)?st:Rt)(t,e=Ae(e,n,3))}var In=re(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});var Fn=_e(lt,bt),Un=_e(function(t,e,n,r){var i=t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n},xt);function Ln(t,e,n){if(n?Fe(t,e,n):null==e)return 0<(r=(t=Xe(t)).length)?t[Lt(0,r-1)]:pi;var r,i=-1,o=xr(t),a=(r=o.length)-1;for(e=I(e<0?0:+e||0,r);++i<e;){var s=Lt(i,a),u=o[s];o[s]=o[i],o[i]=u}return o.length=e,o}function Vn(t,e,n){var r=cr(t)?ct:zt;return n&&Fe(t,e,n)&&(e=pi),"function"==typeof e&&n===pi||(e=Ae(e,n,3)),r(t,e)}var Bn=sr(function(t,e){if(null==t)return[];var n=e[2];return n&&Fe(e[0],e[1],n)&&(e.length=1),Ht(t,kt(e),[])});var zn=F||function(){return(new n).getTime()};function Wn(t,e){var n;if("function"!=typeof e){if("function"!=typeof t)throw new y(Ti);var r=t;t=e,e=r}return function(){return 0<--t&&(n=e.apply(this,arguments)),t<=1&&(e=pi),n}}var Hn=sr(function(t,e,n){var r=mi;if(n.length){var i=Ho(n,Hn.placeholder);r|=bi}return qe(t,r,e,n,i)}),Gn=sr(function(t,e){for(var n=-1,r=(e=e.length?kt(e):Or(t)).length;++n<r;){var i=e[n];t[i]=qe(t[i],mi,t)}return t}),Qn=sr(function(t,e,n){var r=mi|gi;if(n.length){var i=Ho(n,Qn.placeholder);r|=bi}return qe(e,r,t,n,i)}),Yn=ce(yi),Xn=ce(wi);function Jn(r,i,t){var o,a,s,u,l,c,f,d=0,h=!1,p=!0;if("function"!=typeof r)throw new y(Ti);if(i=i<0?0:+i||0,!0===t){var v=!0;p=!1}else pr(t)&&(v=!!t.leading,h="maxWait"in t&&N(+t.maxWait||0,i),p="trailing"in t?!!t.trailing:p);function e(t,e){e&&x(e),a=c=f=pi,t&&(d=zn(),s=r.apply(l,o),c||a||(o=l=pi))}function m(){var t=i-(zn()-u);t<=0||i<t?e(f,a):c=k(m,t)}function g(){e(p,c)}function n(){if(o=arguments,u=zn(),l=this,f=p&&(c||!v),!1===h)var t=v&&!c;else{a||v||(d=u);var e=h-(u-d),n=e<=0||h<e;n?(a&&(a=x(a)),d=u,s=r.apply(l,o)):a||(a=k(g,e))}return n&&c?c=x(c):c||i===h||(c=k(m,i)),t&&(n=!0,s=r.apply(l,o)),!n||c||a||(o=l=pi),s}return n.cancel=function(){c&&x(c),a&&x(a),d=0,a=c=f=pi},n}var Kn=sr(function(t,e){return yt(t,1,e)}),Zn=sr(function(t,e,n){return yt(t,e,n)}),tr=me(),er=me(!0);function nr(i,o){if("function"!=typeof i||o&&"function"!=typeof o)throw new y(Ti);var a=function(){var t=arguments,e=o?o.apply(this,t):t[0],n=a.cache;if(n.has(e))return n.get(e);var r=i.apply(this,t);return a.cache=n.set(e,r),r};return a.cache=new nr.Cache,a}var rr=sr(function(n,r){if(r=kt(r),"function"!=typeof n||!ot(r,Do))throw new y(Ti);var i=r.length;return sr(function(t){for(var e=I(t.length,i);e--;)t[e]=r[e](t[e]);return n.apply(this,t)})});var ir=xe(bi),or=xe(xi),ar=sr(function(t,e){return qe(t,Si,pi,pi,pi,kt(e))});function sr(o,a){if("function"!=typeof o)throw new y(Ti);return a=N(a===pi?o.length-1:+a||0,0),function(){for(var t=arguments,e=-1,n=N(t.length-a,0),r=A(n);++e<n;)r[e]=t[a+e];switch(a){case 0:return o.call(this,r);case 1:return o.call(this,t[0],r);case 2:return o.call(this,t[0],t[1],r)}var i=A(a+1);for(e=-1;++e<a;)i[e]=t[e];return i[a]=r,o.apply(this,i)}}function ur(t,e){return e<t}function lr(t){return Wo(t)&&Ne(t)&&w.call(t,"callee")&&!S.call(t,"callee")}var cr=O||function(t){return Wo(t)&&Ve(t.length)&&b.call(t)==Di};function fr(t,e,n,r){var i=(n="function"==typeof n?Zt(n,r,3):pi)?n(t,e):pi;return i===pi?Ot(t,e,n):!!i}function dr(t){return Wo(t)&&"string"==typeof t.message&&b.call(t)==Ii}function hr(t){return pr(t)&&b.call(t)==Fi}function pr(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function vr(t){return null!=t&&(hr(t)?h.test(c.call(t)):Wo(t)&&bo.test(t))}function mr(t){return"number"==typeof t||Wo(t)&&b.call(t)==Ui}function gr(t){var e,n;return!(!Wo(t)||b.call(t)!=Li||lr(t)||!(w.call(t,"constructor")||"function"!=typeof(e=t.constructor)||e instanceof e))&&(At(t,function(t,e){n=e}),n===pi||w.call(t,n))}function $r(t){return pr(t)&&b.call(t)==Vi}function yr(t){return"string"==typeof t||Wo(t)&&b.call(t)==Bi}function wr(t){return Wo(t)&&Ve(t.length)&&!!Ao[b.call(t)]}function br(t,e){return t<e}function xr(t){var e=t?Me(t):0;return Ve(e)?e?rt(t):[]:Vr(t)}function _r(t){return vt(t,Rr(t))}var Sr=ie(function o(a,s,u,l,c){if(!pr(a))return a;var f=Ne(s)&&(cr(s)||wr(s)),d=f?pi:Dr(s);return it(d||s,function(t,e){if(d&&(t=s[e=t]),Wo(t))l||(l=[]),c||(c=[]),function(t,e,n,r,i,o,a){for(var s=o.length,u=e[n];s--;)if(o[s]==u)return t[n]=a[s];var l=t[n],c=i?i(l,u,n,t,e):pi,f=c===pi;f&&(Ne(c=u)&&(cr(u)||wr(u))?c=cr(l)?l:Ne(l)?rt(l):[]:gr(u)||lr(u)?c=lr(l)?_r(l):gr(l)?l:{}:f=!1),o.push(u),a.push(c),f?t[n]=r(c,u,i,o,a):(c==c?c!==l:l==l)&&(t[n]=c)}(a,s,e,o,u,l,c);else{var n=a[e],r=u?u(n,t,e,a,s):pi,i=r===pi;i&&(r=t),r===pi&&(!f||e in a)||!i&&(r==r?r===n:n!=n)||(a[e]=r)}}),a}),Er=ie(function(t,e,n){return n?dt(t,e,n):ht(t,e)});var kr=fe(Er,function(t,e){return t===pi?e:t}),Cr=fe(Sr,function t(e,n){return e===pi?n:Sr(e,n,t)}),qr=ve(Pt),Ar=ve(jt),Pr=$e(Ct),jr=$e(qt),Tr=ye(Pt),Mr=ye(jt);function Or(t){return Tt(t,Rr(t))}var Dr=R?function(t){var e=null==t?pi:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&Ne(t)?Ye(t):pr(t)?R(t):[]}:Ye;function Rr(t){if(null==t)return[];pr(t)||(t=g(t));var e=t.length;e=e&&Ve(e)&&(cr(t)||lr(t))&&e||0;for(var n=t.constructor,r=-1,i="function"==typeof n&&n.prototype===t,o=A(e),a=0<e;++r<e;)o[r]=r+"";for(var s in t)a&&Ie(s,e)||"constructor"==s&&(i||!w.call(t,s))||o.push(s);return o}var Nr=we(!0),Ir=we(),Fr=sr(function(t,e){if(null==t)return{};if("function"!=typeof e[0])return e=st(kt(e),a),ze(t,wt(Rr(t),e));var r=Zt(e[0],e[1],3);return We(t,function(t,e,n){return!r(t,e,n)})});function Ur(t){t=Je(t);for(var e=-1,n=Dr(t),r=n.length,i=A(r);++e<r;){var o=n[e];i[e]=[o,t[o]]}return i}var Lr=sr(function(t,e){return null==t?{}:"function"==typeof e[0]?We(t,Zt(e[0],e[1],3)):ze(t,kt(e))});function Vr(t){return Qt(t,Dr(t))}var Br=ue(function(t,e,n){return e=e.toLowerCase(),t+(n?e.charAt(0).toUpperCase()+e.slice(1):e)});function zr(t){return(t=Ro(t))&&t.replace(_o,Uo).replace(mo,"")}var Wr=ue(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()});var Hr=be(),Gr=be(!0);function Qr(t,e){var n="";if(t=Ro(t),(e=+e)<1||!t||!D(e))return n;for(;e%2&&(n+=t),t+=t,e=M(e/2););return n}var Yr=ue(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Xr=ue(function(t,e,n){return t+(n?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))});function Jr(t,e,n){var r=t;return(t=Ro(t))?(n?Fe(r,e,n):null==e)?t.slice(Go(t),Qo(t)+1):(e+="",t.slice(No(t,e),Io(t,e)+1)):t}function Kr(t,e,n){return n&&Fe(t,e,n)&&(e=pi),(t=Ro(t)).match(e||ko)||[]}var Zr=sr(function(t,e){try{return t.apply(pi,e)}catch(t){return dr(t)?t:new r(t)}});function ti(t,e,n){return n&&Fe(t,e,n)&&(e=pi),Wo(t)?ni(t):mt(t,e)}function ei(t){return t}function ni(t){return Nt(gt(t,!0))}var ri=sr(function(e,n){return function(t){return Re(t,e,n)}}),ii=sr(function(e,n){return function(t){return Re(e,t,n)}});function oi(r,t,e){if(null==e){var n=pr(t),i=n?Dr(t):pi,o=i&&i.length?Tt(t,i):pi;(o?o.length:n)||(o=!1,e=t,t=r,r=this)}o||(o=Tt(t,Dr(t)));var a=!0,s=-1,u=hr(r),l=o.length;!1===e?a=!1:pr(e)&&"chain"in e&&(a=e.chain);for(;++s<l;){var c=o[s],f=t[c];r[c]=f,u&&(r.prototype[c]=function(n){return function(){var t=this.__chain__;if(a||t){var e=r(this.__wrapped__);return(e.__actions__=rt(this.__actions__)).push({func:n,args:arguments,thisArg:r}),e.__chain__=t,e}return n.apply(r,ut([this.value()],arguments))}}(f))}return r}function ai(){}function si(t){return Ue(t)?Ft(t):(n=(e=t)+"",e=Ke(e),function(t){return Mt(t,e,n)});var e,n}var ui,li=ke("ceil"),ci=ke("floor"),fi=de(ur,V),di=de(br,B),hi=ke("round");return X.prototype=J.prototype,(K.prototype=$t(J.prototype)).constructor=K,(Z.prototype=$t(J.prototype)).constructor=Z,tt.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},tt.prototype.get=function(t){return"__proto__"==t?pi:this.__data__[t]},tt.prototype.has=function(t){return"__proto__"!=t&&w.call(this.__data__,t)},tt.prototype.set=function(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this},et.prototype.push=function(t){var e=this.data;"string"==typeof t||pr(t)?e.set.add(t):e.hash[t]=!0},nr.Cache=tt,X.after=function(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new y(Ti);var n=t;t=e,e=n}return t=D(t=+t)?t:0,function(){if(--t<1)return e.apply(this,arguments)}},X.ary=function(t,e,n){return n&&Fe(t,e,n)&&(e=pi),e=t&&null==e?t.length:N(+e||0,0),qe(t,_i,pi,pi,pi,pi,e)},X.assign=Er,X.at=En,X.before=Wn,X.bind=Hn,X.bindAll=Gn,X.bindKey=Qn,X.callback=ti,X.chain=xn,X.chunk=function(t,e,n){e=(n?Fe(t,e,n):null==e)?1:N(M(e)||1,1);for(var r=0,i=t?t.length:0,o=-1,a=A(j(i/e));r<i;)a[++o]=Bt(t,r,r+=e);return a},X.compact=function(t){for(var e=-1,n=t?t.length:0,r=-1,i=[];++e<n;){var o=t[e];o&&(i[++r]=o)}return i},X.constant=function(t){return function(){return t}},X.countBy=kn,X.create=function(t,e,n){var r=$t(t);return n&&Fe(t,e,n)&&(e=pi),e?ht(r,e):r},X.curry=Yn,X.curryRight=Xn,X.debounce=Jn,X.defaults=kr,X.defaultsDeep=Cr,X.defer=Kn,X.delay=Zn,X.difference=tn,X.drop=en,X.dropRight=nn,X.dropRightWhile=function(t,e,n){return t&&t.length?Yt(t,Ae(e,n,3),!0,!0):[]},X.dropWhile=function(t,e,n){return t&&t.length?Yt(t,Ae(e,n,3),!0):[]},X.fill=function(t,e,n,r){var i=t?t.length:0;return i?(n&&"number"!=typeof n&&Fe(t,e,n)&&(n=0,r=i),function(t,e,n,r){var i=t.length;for((n=null==n?0:+n||0)<0&&(n=i<-n?0:i+n),(r=r===pi||i<r?i:+r||0)<0&&(r+=i),i=r<n?0:r>>>0,n>>>=0;n<i;)t[n++]=e;return t}(t,e,n,r)):[]},X.filter=qn,X.flatten=function(t,e,n){var r=t?t.length:0;return n&&Fe(t,e,n)&&(e=!1),r?kt(t,e):[]},X.flattenDeep=function(t){return t&&t.length?kt(t,!0):[]},X.flow=tr,X.flowRight=er,X.forEach=jn,X.forEachRight=Tn,X.forIn=Pr,X.forInRight=jr,X.forOwn=Tr,X.forOwnRight=Mr,X.functions=Or,X.groupBy=Mn,X.indexBy=Dn,X.initial=function(t){return nn(t,1)},X.intersection=un,X.invert=function(t,e,n){n&&Fe(t,e,n)&&(e=pi);for(var r=-1,i=Dr(t),o=i.length,a={};++r<o;){var s=i[r],u=t[s];e?w.call(a,u)?a[u].push(s):a[u]=[s]:a[u]=s}return a},X.invoke=Rn,X.keys=Dr,X.keysIn=Rr,X.map=Nn,X.mapKeys=Nr,X.mapValues=Ir,X.matches=ni,X.matchesProperty=function(t,e){return It(t,gt(e,!0))},X.memoize=nr,X.merge=Sr,X.method=ri,X.methodOf=ii,X.mixin=oi,X.modArgs=rr,X.negate=function(t){if("function"!=typeof t)throw new y(Ti);return function(){return!t.apply(this,arguments)}},X.omit=Fr,X.once=function(t){return Wn(2,t)},X.pairs=Ur,X.partial=ir,X.partialRight=or,X.partition=In,X.pick=Lr,X.pluck=function(t,e){return Nn(t,si(e))},X.property=si,X.propertyOf=function(e){return function(t){return Mt(e,Ke(t),t+"")}},X.pull=function(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var n=0,r=Te(),i=t.length;++n<i;)for(var o=0,a=t[n];-1<(o=r(e,a,o));)C.call(e,o,1);return e},X.pullAt=cn,X.range=function(t,e,n){n&&Fe(t,e,n)&&(e=n=pi),t=+t||0,null==e?(e=t,t=0):e=+e||0;for(var r=-1,i=N(j((e-t)/((n=null==n?1:+n||0)||1)),0),o=A(i);++r<i;)o[r]=t,t+=n;return o},X.rearg=ar,X.reject=function(t,r,e){var n=cr(t)?at:St;return r=Ae(r,e,3),n(t,function(t,e,n){return!r(t,e,n)})},X.remove=function(t,e,n){var r=[];if(!t||!t.length)return r;var i=-1,o=[],a=t.length;for(e=Ae(e,n,3);++i<a;){var s=t[i];e(s,i,t)&&(r.push(s),o.push(i))}return Ut(t,o),r},X.rest=fn,X.restParam=sr,X.set=function(t,e,n){if(null==t)return t;for(var r=e+"",i=-1,o=(e=null!=t[r]||Ue(e,t)?[r]:Ke(e)).length,a=o-1,s=t;null!=s&&++i<o;){var u=e[i];pr(s)&&(i==a?s[u]=n:null==s[u]&&(s[u]=Ie(e[i+1])?[]:{})),s=s[u]}return t},X.shuffle=function(t){return Ln(t,B)},X.slice=function(t,e,n){var r=t?t.length:0;return r?(n&&"number"!=typeof n&&Fe(t,e,n)&&(e=0,n=r),Bt(t,e,n)):[]},X.sortBy=function(t,r,e){if(null==t)return[];e&&Fe(t,r,e)&&(r=pi);var i=-1;return r=Ae(r,e,3),Wt(Rt(t,function(t,e,n){return{criteria:r(t,e,n),index:++i,value:t}}),Fo)},X.sortByAll=Bn,X.sortByOrder=function(t,e,n,r){return null==t?[]:(r&&Fe(e,n,r)&&(n=pi),cr(e)||(e=null==e?[]:[e]),cr(n)||(n=null==n?[]:[n]),Ht(t,e,n))},X.spread=function(e){if("function"!=typeof e)throw new y(Ti);return function(t){return e.apply(this,t)}},X.take=function(t,e,n){return t&&t.length?((n?Fe(t,e,n):null==e)&&(e=1),Bt(t,0,e<0?0:e)):[]},X.takeRight=function(t,e,n){var r=t?t.length:0;return r?((n?Fe(t,e,n):null==e)&&(e=1),Bt(t,(e=r-(+e||0))<0?0:e)):[]},X.takeRightWhile=function(t,e,n){return t&&t.length?Yt(t,Ae(e,n,3),!1,!0):[]},X.takeWhile=function(t,e,n){return t&&t.length?Yt(t,Ae(e,n,3)):[]},X.tap=function(t,e,n){return e.call(n,t),t},X.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new y(Ti);return!1===n?r=!1:pr(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Jn(t,e,{leading:r,maxWait:+e,trailing:i})},X.thru=_n,X.times=function(t,e,n){if((t=M(t))<1||!D(t))return[];var r=-1,i=A(I(t,z));for(e=Zt(e,n,1);++r<t;)r<z?i[r]=e(r):e(r);return i},X.toArray=xr,X.toPlainObject=_r,X.transform=function(t,r,i,e){var n=cr(t)||wr(t);if(r=Ae(r,e,4),null==i)if(n||pr(t)){var o=t.constructor;i=n?cr(t)?new o:[]:$t(hr(o)?o.prototype:pi)}else i={};return(n?it:Pt)(t,function(t,e,n){return r(i,t,e,n)}),i},X.union=pn,X.uniq=vn,X.unzip=mn,X.unzipWith=gn,X.values=Vr,X.valuesIn=function(t){return Qt(t,Rr(t))},X.where=function(t,e){return qn(t,Nt(e))},X.without=$n,X.wrap=function(t,e){return qe(e=null==e?ei:e,bi,pi,[t],[])},X.xor=function(){for(var t=-1,e=arguments.length;++t<e;){var n=arguments[t];if(Ne(n))var r=r?ut(wt(r,n),wt(n,r)):n}return r?Gt(r):[]},X.zip=yn,X.zipObject=wn,X.zipWith=bn,X.backflow=er,X.collect=Nn,X.compose=er,X.each=jn,X.eachRight=Tn,X.extend=Er,X.iteratee=ti,X.methods=Or,X.object=wn,X.select=qn,X.tail=fn,X.unique=vn,oi(X,X),X.add=function(t,e){return(+t||0)+(+e||0)},X.attempt=Zr,X.camelCase=Br,X.capitalize=function(t){return(t=Ro(t))&&t.charAt(0).toUpperCase()+t.slice(1)},X.ceil=li,X.clone=function(t,e,n,r){return e&&"boolean"!=typeof e&&Fe(t,e,n)?e=!1:"function"==typeof e&&(r=n,n=e,e=!1),"function"==typeof n?gt(t,e,Zt(n,r,1)):gt(t,e)},X.cloneDeep=function(t,e,n){return"function"==typeof e?gt(t,!0,Zt(e,n,1)):gt(t,!0)},X.deburr=zr,X.endsWith=function(t,e,n){e+="";var r=(t=Ro(t)).length;return n=n===pi?r:I(n<0?0:+n||0,r),0<=(n-=e.length)&&t.indexOf(e,n)==n},X.escape=function(t){return(t=Ro(t))&&ao.test(t)?t.replace(io,Lo):t},X.escapeRegExp=function(t){return(t=Ro(t))&&vo.test(t)?t.replace(po,Vo):t||"(?:)"},X.every=Cn,X.find=An,X.findIndex=rn,X.findKey=qr,X.findLast=Pn,X.findLastIndex=on,X.findLastKey=Ar,X.findWhere=function(t,e){return An(t,Nt(e))},X.first=an,X.floor=ci,X.get=function(t,e,n){var r=null==t?pi:Mt(t,Ke(e),e+"");return r===pi?n:r},X.gt=ur,X.gte=function(t,e){return e<=t},X.has=function(t,e){if(null==t)return!1;var n=w.call(t,e);if(!n&&!Ue(e)){if(null==(t=1==(e=Ke(e)).length?t:Mt(t,Bt(e,0,-1))))return!1;e=ln(e),n=w.call(t,e)}return n||Ve(t.length)&&Ie(e,t.length)&&(cr(t)||lr(t))},X.identity=ei,X.includes=On,X.indexOf=sn,X.inRange=function(t,e,n){return e=+e||0,n===pi?(n=e,e=0):n=+n||0,t>=I(e,n)&&t<N(e,n)},X.isArguments=lr,X.isArray=cr,X.isBoolean=function(t){return!0===t||!1===t||Wo(t)&&b.call(t)==Ri},X.isDate=function(t){return Wo(t)&&b.call(t)==Ni},X.isElement=function(t){return!!t&&1===t.nodeType&&Wo(t)&&!gr(t)},X.isEmpty=function(t){return null==t||(Ne(t)&&(cr(t)||yr(t)||lr(t)||Wo(t)&&hr(t.splice))?!t.length:!Dr(t).length)},X.isEqual=fr,X.isError=dr,X.isFinite=function(t){return"number"==typeof t&&D(t)},X.isFunction=hr,X.isMatch=function(t,e,n,r){return n="function"==typeof n?Zt(n,r,3):pi,Dt(t,Oe(e),n)},X.isNaN=function(t){return mr(t)&&t!=+t},X.isNative=vr,X.isNull=function(t){return null===t},X.isNumber=mr,X.isObject=pr,X.isPlainObject=gr,X.isRegExp=$r,X.isString=yr,X.isTypedArray=wr,X.isUndefined=function(t){return t===pi},X.kebabCase=Wr,X.last=ln,X.lastIndexOf=function(t,e,n){var r=t?t.length:0;if(!r)return-1;var i=r;if("number"==typeof n)i=(n<0?N(r+n,0):I(n||0,r-1))+1;else if(n){var o=t[i=Jt(t,e,!0)-1];return(e==e?e===o:o!=o)?i:-1}if(e!=e)return zo(t,i,!0);for(;i--;)if(t[i]===e)return i;return-1},X.lt=br,X.lte=function(t,e){return t<=e},X.max=fi,X.min=di,X.noConflict=function(){return jo._=d,this},X.noop=ai,X.now=zn,X.pad=function(t,e,n){e=+e;var r=(t=Ro(t)).length;if(e<=r||!D(e))return t;var i=(e-r)/2,o=M(i);return(n=Ee("",j(i),n)).slice(0,o)+t+n},X.padLeft=Hr,X.padRight=Gr,X.parseInt=function(t,e,n){return(n?Fe(t,e,n):null==e)?e=0:e&&(e=+e),t=Jr(t),U(t,e||(wo.test(t)?16:10))},X.random=function(t,e,n){n&&Fe(t,e,n)&&(e=n=pi);var r=null==t,i=null==e;if(null==n&&(i&&"boolean"==typeof t?(n=t,t=1):"boolean"==typeof e&&(n=e,i=!0)),r&&i&&(i=!(e=1)),t=+t||0,i?(e=t,t=0):e=+e||0,n||t%1||e%1){var o=L();return I(t+o*(e-t+v("1e-"+((o+"").length-1))),e)}return Lt(t,e)},X.reduce=Fn,X.reduceRight=Un,X.repeat=Qr,X.result=function(t,e,n){var r=null==t?pi:t[e];return r===pi&&(null==t||Ue(e,t)||(r=null==(t=1==(e=Ke(e)).length?t:Mt(t,Bt(e,0,-1)))?pi:t[ln(e)]),r=r===pi?n:r),hr(r)?r.call(t):r},X.round=hi,X.runInContext=t,X.size=function(t){var e=t?Me(t):0;return Ve(e)?e:Dr(t).length},X.snakeCase=Yr,X.some=Vn,X.sortedIndex=dn,X.sortedLastIndex=hn,X.startCase=Xr,X.startsWith=function(t,e,n){return t=Ro(t),n=null==n?0:I(n<0?0:+n||0,t.length),t.lastIndexOf(e,n)==n},X.sum=function(t,e,n){return n&&Fe(t,e,n)&&(e=pi),1==(e=Ae(e,n,3)).length?function(t,e){for(var n=t.length,r=0;n--;)r+=+e(t[n])||0;return r}(cr(t)?t:Xe(t),e):(r=e,i=0,bt(t,function(t,e,n){i+=+r(t,e,n)||0}),i);var r,i},X.template=function(a,t,e){var n=X.templateSettings;e&&Fe(a,t,e)&&(t=e=pi),a=Ro(a);var s,u,r=dt(ht({},(t=dt(ht({},e||t),n,ft)).imports),n.imports,ft),i=Dr(r),o=Qt(r,i),l=0,c=t.interpolate||So,f="__p += '",d=$((t.escape||So).source+"|"+c.source+"|"+(c===lo?$o:So).source+"|"+(t.evaluate||So).source+"|$","g"),h="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++qo+"]")+"\n";a.replace(d,function(t,e,n,r,i,o){return n||(n=r),f+=a.slice(l,o).replace(Eo,Bo),e&&(s=!0,f+="' +\n__e("+e+") +\n'"),i&&(u=!0,f+="';\n"+i+";\n__p += '"),n&&(f+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),l=o+t.length,t}),f+="';\n";var p=t.variable;p||(f="with (obj) {\n"+f+"\n}\n"),f=(u?f.replace(to,""):f).replace(eo,"$1").replace(no,"$1;"),f="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=Zr(function(){return m(i,h+"return "+f).apply(pi,o)});if(v.source=f,dr(v))throw v;return v},X.trim=Jr,X.trimLeft=function(t,e,n){var r=t;return(t=Ro(t))?(n?Fe(r,e,n):null==e)?t.slice(Go(t)):t.slice(No(t,e+"")):t},X.trimRight=function(t,e,n){var r=t;return(t=Ro(t))?(n?Fe(r,e,n):null==e)?t.slice(0,Qo(t)+1):t.slice(0,Io(t,e+"")+1):t},X.trunc=function(t,e,n){n&&Fe(t,e,n)&&(e=pi);var r=Ei,i=ki;if(null!=e)if(pr(e)){var o="separator"in e?e.separator:o;r="length"in e?+e.length||0:r,i="omission"in e?Ro(e.omission):i}else r=+e||0;if(r>=(t=Ro(t)).length)return t;var a=r-i.length;if(a<1)return i;var s=t.slice(0,a);if(null==o)return s+i;if($r(o)){if(t.slice(a).search(o)){var u,l,c=t.slice(0,a);for(o.global||(o=$(o.source,(yo.exec(o)||"")+"g")),o.lastIndex=0;u=o.exec(c);)l=u.index;s=s.slice(0,null==l?a:l)}}else if(t.indexOf(o,a)!=a){var f=s.lastIndexOf(o);-1<f&&(s=s.slice(0,f))}return s+i},X.unescape=function(t){return(t=Ro(t))&&oo.test(t)?t.replace(ro,Yo):t},X.uniqueId=function(t){var e=++f;return Ro(t)+e},X.words=Kr,X.all=Cn,X.any=Vn,X.contains=On,X.eq=fr,X.detect=An,X.foldl=Fn,X.foldr=Un,X.head=an,X.include=On,X.inject=Fn,oi(X,(ui={},Pt(X,function(t,e){X.prototype[e]||(ui[e]=t)}),ui),!1),X.sample=Ln,X.prototype.sample=function(e){return this.__chain__||null!=e?this.thru(function(t){return Ln(t,e)}):Ln(this.value())},X.VERSION=vi,it(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){X[t].placeholder=X}),it(["drop","take"],function(r,i){Z.prototype[r]=function(t){var e=this.__filtered__;if(e&&!i)return new Z(this);t=null==t?1:N(M(t)||0,0);var n=this.clone();return e?n.__takeCount__=I(n.__takeCount__,t):n.__views__.push({size:t,type:r+(n.__dir__<0?"Right":"")}),n},Z.prototype[r+"Right"]=function(t){return this.reverse()[r](t).reverse()}}),it(["filter","map","takeWhile"],function(t,e){var r=e+1,i=r!=ji;Z.prototype[t]=function(t,e){var n=this.clone();return n.__iteratees__.push({iteratee:Ae(t,e,1),type:r}),n.__filtered__=n.__filtered__||i,n}}),it(["first","last"],function(t,e){var n="take"+(e?"Right":"");Z.prototype[t]=function(){return this[n](1).value()[0]}}),it(["initial","rest"],function(t,e){var n="drop"+(e?"":"Right");Z.prototype[t]=function(){return this.__filtered__?new Z(this):this[n](1)}}),it(["pluck","where"],function(t,e){var n=e?"filter":"map",r=e?Nt:si;Z.prototype[t]=function(t){return this[n](r(t))}}),Z.prototype.compact=function(){return this.filter(ei)},Z.prototype.reject=function(e,t){return e=Ae(e,t,1),this.filter(function(t){return!e(t)})},Z.prototype.slice=function(t,e){t=null==t?0:+t||0;var n=this;return n.__filtered__&&(0<t||e<0)?new Z(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==pi&&(n=(e=+e||0)<0?n.dropRight(-e):n.take(e-t)),n)},Z.prototype.takeRightWhile=function(t,e){return this.reverse().takeWhile(t,e).reverse()},Z.prototype.toArray=function(){return this.take(B)},Pt(Z.prototype,function(f,t){var d=/^(?:filter|map|reject)|While$/.test(t),h=/^(?:first|last)$/.test(t),p=X[h?"take"+("last"==t?"Right":""):t];p&&(X.prototype[t]=function(){var e=h?[1]:arguments,n=this.__chain__,t=this.__wrapped__,r=!!this.__actions__.length,i=t instanceof Z,o=e[0],a=i||cr(t);a&&d&&"function"==typeof o&&1!=o.length&&(i=a=!1);var s=function(t){return h&&n?p(t,1)[0]:p.apply(pi,ut([t],e))},u={func:_n,args:[s],thisArg:pi},l=i&&!r;if(h&&!n)return l?((t=t.clone()).__actions__.push(u),f.call(t)):p.call(pi,this.value())[0];if(!h&&a){t=l?t:new Z(this);var c=f.apply(t,e);return c.__actions__.push(u),new K(c,n)}return this.thru(s)})}),it(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(t){var n=(/^(?:replace|split)$/.test(t)?l:s)[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:join|pop|replace|shift)$/.test(t);X.prototype[t]=function(){var e=arguments;return i&&!this.__chain__?n.apply(this.value(),e):this[r](function(t){return n.apply(t,e)})}}),Pt(Z.prototype,function(t,e){var n=X[e];if(n){var r=n.name;(Y[r]||(Y[r]=[])).push({name:e,func:n})}}),Y[Se(pi,gi).name]=[{name:"wrapper",func:pi}],Z.prototype.clone=function(){var t=new Z(this.__wrapped__);return t.__actions__=rt(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=rt(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=rt(this.__views__),t},Z.prototype.reverse=function(){if(this.__filtered__){var t=new Z(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Z.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=cr(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=I(e,t+a);break;case"takeRight":t=N(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,l=r?s:a-1,c=this.__iteratees__,f=c.length,d=0,h=I(u,this.__takeCount__);if(!n||i<Ai||i==u&&h==u)return Xt(r&&n?t.reverse():t,this.__actions__);var p=[];t:for(;u--&&d<h;){for(var v=-1,m=t[l+=e];++v<f;){var g=c[v],$=g.iteratee,y=g.type,w=$(m);if(y==ji)m=w;else if(!w){if(y==Pi)continue t;break t}}p[d++]=m}return p},X.prototype.chain=function(){return xn(this)},X.prototype.commit=function(){return new K(this.value(),this.__chain__)},X.prototype.concat=Sn,X.prototype.plant=function(t){for(var e,n=this;n instanceof J;){var r=Ze(n);e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e},X.prototype.reverse=function(){var t=this.__wrapped__,e=function(t){return n&&n.__dir__<0?t:t.reverse()};if(t instanceof Z){var n=t;return this.__actions__.length&&(n=new Z(this)),(n=n.reverse()).__actions__.push({func:_n,args:[e],thisArg:pi}),new K(n,this.__chain__)}return this.thru(e)},X.prototype.toString=function(){return this.value()+""},X.prototype.run=X.prototype.toJSON=X.prototype.valueOf=X.prototype.value=function(){return Xt(this.__wrapped__,this.__actions__)},X.prototype.collect=X.prototype.map,X.prototype.head=X.prototype.first,X.prototype.select=X.prototype.filter,X.prototype.tail=X.prototype.rest,X}();"function"==typeof pi&&"object"==typeof pi.amd&&pi.amd?(jo._=Xo,pi(function(){return Xo})):f&&d?m?(d.exports=Xo)._=Xo:f._=Xo:jo._=Xo}).call(commonjsGlobal)}),glob=window.piGlobal||(window.piGlobal={});function global$3(){return glob}function mixProvider$1(r,a){function i(t){var e=t.mixer;if(!(lodash$1.isPlainObject(t)&&"mixer"in t))return[t];if(lodash$1.isUndefined(i.mixers[e]))throw new Error("Mixer: unknow mixer type = "+e);if(!t.remix&&t.$parsed)return t.$parsed;if(t.$parsed=i.mixers[e].apply(null,arguments),!lodash$1.isArray(t.$parsed))throw new Error("Mixer: mixers must return an array (mixer: "+e+")");return t.$parsed}function s(t,r){return lodash$1.reduce(t,function(t,e){if(lodash$1.isPlainObject(e)&&"mixer"in e&&"wrapper"!=e.mixer&&!e.wrapper){var n=s(i(e,r),r);return t.concat(n)}return t.concat([e])},[])}return i.mixers={wrapper:function(t){return t.data},repeat:function(t){var e,n=t.data||[],r=[];for(e=0;e<t.times;e++)r=r.concat(lodash$1.clone(n,!0));return r},random:function(t,e){var n=t.data?s(t.data,e):[];return r(n)},choose:function(t,e){var n=t.data?s(t.data,e):[];return lodash$1.take(r(n),t.n?t.n:1)},custom:function(t,e){return lodash$1.isFunction(t.fn)?t.fn(t,e):[]},weightedRandom:t,weightedChoose:t},i;function t(r,t){var i=r.data?s(r.data,t):[],e=r.n||1,o=lodash$1.sum(r.weights);if(!lodash$1.isArray(r.weights))throw new Error("Mixer: weightedRandom requires an array of weights");return lodash$1.range(0,e).map(function(){var t,e=a()*o,n=0;for(t=0;t<i.length;t++)if(n=+(n+=r.weights[t]).toFixed(3),e<=n)return r.data[t];throw new Error("Mixer: something went wrong with weightedRandom")}).map(lodash$1.clone)}}function mixerDotNotationProvider$3(n){return function(t,e){return lodash$1.isString(t)?/[^/]\./.test(t)?n(t,e):t.replace("/.","."):t}}function mixerConditionProvider$3(s,u){var l={gt:t(lodash$1.gt),greaterThan:t(lodash$1.gt),gte:t(lodash$1.gte),greaterThanOrEqual:t(lodash$1.gte),equals:lodash$1.eq,in:lodash$1.rearg(lodash$1.contains,1,0),contains:lodash$1.rearg(lodash$1.contains,1,0),exactly:function(t,e){return t===e},isTruthy:c};return function(t,e){var n,r,i=(r=(n=t).operator,lodash$1.isFunction(n)?n:lodash$1.has(n,"operator")?lodash$1.isFunction(r)?r:l[r]:lodash$1.has(n,"to")?lodash$1.eq:c),o=s(t.compare,e),a=s(t.to,e);return t.DEBUG&&u({type:"info",message:"Condition info",rows:[["Left: ",o],["Operator: ",t.operator||"equals"],["Right: ",a]],context:t}),t.negate?!i.apply(e,[o,a,e]):i.apply(e,[o,a,e])};function c(t){return!!t}function t(n){return function(t,e){return!![t,e].every(lodash$1.isNumber)&&n(t,e)}}}function evaluateProvider$1(i){return function e(t,n){function r(t){return e(t,n)}return lodash$1.isArray(t)&&(t={and:t}),t.and?lodash$1.every(t.and,r):t.nand?!lodash$1.every(t.nand,r):t.or?lodash$1.some(t.or,r):t.nor?!lodash$1.some(t.nor,r):i(t,n)}}function mixerBranchingDecorator$3(t,r,i,o){return t.mixers.branch=function(t,e){if(e=lodash$1.extend(e||{},i),lodash$1.isUndefined(t.conditions))throw o({type:"error",message:"Missing conditions in branch mixer.",context:t}),new Error("Missing conditions in branch mixer.");return r(t.conditions,e)?t.data||[]:t.elseData||[]},t.mixers.multiBranch=function(t,e){var n;if(e=lodash$1.extend(e||{},i),n=lodash$1.find(t.branches,function(t){if(lodash$1.isUndefined(t.conditions))throw o({type:"error",message:"Missing conditions in multi branch mixer.",context:t}),new Error("Missing conditions in multi branch mixer.");return r(t.conditions,e)}))return n.data||[];return t.elseData||[]},t}function mixerSequenceProvider$3(o){function t(t){this.sequence=t,this.stack=[],this.add(t),this.pointer=0}return lodash$1.extend(t.prototype,{add:function(t,e){this.stack.push({pointer:e?t.length:-1,sequence:t})},proceed:function(t,e){var n=this.stack[this.stack.length-1],r="next"===t;if(!n)throw new Error("mixerSequence: subSequence not found");n.pointer+=r?1:-1;var i=n.sequence[n.pointer];return lodash$1.isUndefined(i)&&1<this.stack.length?(this.stack.pop(),this.proceed.call(this,t,e)):i&&i.mixer?(this.add(o(i,e),!r),this.proceed.call(this,t,e)):this},next:function(t){return this.pointer++,this.proceed.call(this,"next",t)},prev:function(t){return this.pointer--,this.proceed.call(this,"prev",t)},current:function(){var t=this.stack[this.stack.length-1];if(!t)throw new Error("mixerSequence: subSequence not found");var e=t.sequence[t.pointer];if(e)return e.$meta=this.meta(),e},meta:function(){return{number:this.pointer,outOf:lodash$1.reduce(this.stack,function(t,e){return t+e.sequence.length-1},0)+1}}}),t}function dotNotation$3(t,e){if(!lodash$1.isUndefined(t))return lodash$1.isString(t)&&(t=t.split(".")),t.reduce(function(t,e){if(lodash$1.isPlainObject(t)||lodash$1.isArray(t))return t[e]},e)}function piConsoleFactory$3(r){return window.DEBUG?function t(e){if(lodash$1.get(t,"settings.hideConsole",!1))return window.postMessage({type:"kill-console"},"*");r[e.type]&&r[e.type](e.message);window.postMessage((n=e,lodash$1.cloneDeep(n,function(t){return lodash$1.isFunction(t)?t.toString():lodash$1.isError(t)?{name:t.name,message:t.message,stack:t.stack}:void 0})),"*");var n}:lodash$1.noop}mixProvider$1.$inject=["randomizeShuffle","randomizeRandom"],mixerDotNotationProvider$3.$inject=["dotNotation"],mixerConditionProvider$3.$inject=["mixerDotNotation","piConsole"],evaluateProvider$1.$inject=["mixerCondition"],mixerBranchingDecorator$3.$inject=["$delegate","mixerEvaluate","mixerDefaultContext","piConsole"],mixerSequenceProvider$3.$inject=["mixer"],piConsoleFactory$3.$inject=["$log"];var piConsole$4=piConsoleFactory$3(console),mixer$2=mixProvider$1(lodash$1.shuffle,Math.random),mixerDotNotation$1=mixerDotNotationProvider$3(dotNotation$3),mixerCondition$1=mixerConditionProvider$3(mixerDotNotation$1,piConsole$4),mixerEvaluate$1=evaluateProvider$1(mixerCondition$1),mixerDefaultContext$1={};mixerBranchingDecorator$3(mixer$2,mixerEvaluate$1,mixerDefaultContext$1);var MixerSequence$1=mixerSequenceProvider$3(mixer$2);function templateObjProvider$3(n){return function(r,t,e){var i=lodash$1.get(e,"skip",[]),o=lodash$1.assign({},t,n);return lodash$1.cloneDeep(r,function(t,e,n){return r===n&&lodash$1.includes(i,e)?t:lodash$1.isString(t)&&lodash$1.includes(t,"<%")?lodash$1.template(t)(o):void 0})}}templateObjProvider$3.$inject=["templateDefaultContext"];var templateObj$1=templateObjProvider$3({});function collectionService$1(){function n(t){if(t instanceof n)return t;if(!(lodash$1.isUndefined(t)||lodash$1.isArray(t)||t instanceof n))throw new Error("Collections can only be constructed from arrays");this.collection=t||[],this.length=this.collection.length,this.pointer=-1}lodash$1.extend(n.prototype,{first:function(){return this.pointer=0,this.collection[this.pointer]},last:function(){return this.pointer=this.collection.length-1,this.collection[this.pointer]},end:function(){this.pointer=this.collection.length},current:function(){return this.collection[this.pointer]},next:function(){return this.collection[++this.pointer]},previous:function(){return this.collection[--this.pointer]},add:function(t){return arguments.length&&(t=lodash$1.isArray(t)?t:[t],this.collection=this.collection.concat(t),this.length=this.collection.length),this},at:function(t){return this.collection[t]}});var r=Array.prototype.slice;return lodash$1.each(["where","filter"],function(e){n.prototype[e]=function(){var t=r.call(arguments);return t.unshift(this.collection),new n(lodash$1[e].apply(lodash$1,t))}}),n}function RandomizerProvider$1(i,a,s){function t(){this._cache={random:{},exRandom:{},sequential:{}}}return lodash$1.extend(t.prototype,{random:function(t,e,n){var r=this._cache.random;if(n&&!lodash$1.isUndefined(r[e]))return r[e];return r[e]=i(t),r[e]},exRandom:function(t,e,n){var r,i=this._cache.exRandom,o=i[e];if(lodash$1.isUndefined(o))return(o=i[e]=new s(a(t))).first();if(o.length!==t)throw new Error("This seed  ("+e+") points to a collection with the wrong length, you can only use a seed for sets of the same length");if(n)return o.current();return r=o.next(),lodash$1.isUndefined(r)?(o=i[e]=new s(a(t))).first():r},sequential:function(t,e,n){var r,i=this._cache.sequential,o=i[e];if(lodash$1.isUndefined(o))return(o=i[e]=new s(lodash$1.range(t))).first();if(o.length!==t)throw new Error("This seed  ("+e+") points to a collection with the wrong length, you can only use a seed for sets of the same length");if(n)return o.current();return r=o.next(),lodash$1.isUndefined(r)?o.first():r}}),t}function storeProvider$3(e){function t(){this.store={}}return lodash$1.extend(t.prototype,{create:function(t){if(this.store[t])throw new Error("The name space "+t+" already exists");this.store[t]=new e,this.store[t].namespace=t},read:function(t){if(!this.store[t])throw new Error("The name space "+t+" does not exist");return this.store[t]},update:function(t,e){this.read(t).add(e)},del:function(t){this.store[t]=void 0}}),t}function SequenceProvider$2(r){function t(t,e,n){this.namespace=t,this.mixerSequence=new r(e),this.db=n}return lodash$1.extend(t.prototype,{next:function(t){return this.mixerSequence.next(t),this},prev:function(t){return this.mixerSequence.prev(t),this},current:function(t,e){t||(t={});var n=this.mixerSequence.current(t);return n?this.db.inflate(this.namespace,n,t,e):n},all:function(t,e){for(var n=[],r=this.next().current(t,e);r;)n.push(r),r=this.next().current(t,e);return n}}),t}function DatabaseProvider$1(t,e,a,s,n,u){function r(){this.store=new t,this.randomizer=new e}return lodash$1.extend(r.prototype,{createColl:function(t){this.store.create(t)},getColl:function(t){return this.store.read(t)},add:function(t,e){this.store.read(t).add(e)},inflate:function(t,e,n,r){var i,o=this.getColl(t);try{e.$inflated&&!e.reinflate||(e.$inflated=a(e,o,this.randomizer),e.$templated=null)}catch(t){throw u({type:"error",message:"Failed to inherit",error:t,context:e}),this.onError&&this.onError(t),t}try{e.$templated&&!e.$inflated.regenerateTemplate||(n[t+"Meta"]=e.$meta,n[t+"Data"]=s(e.$inflated.data||{},n,r),e.$templated=s(e.$inflated,n,r))}catch(t){throw u({type:"error",message:"Failed to apply template",error:t,context:e.$inflated}),this.onError&&this.onError(t),t}return i=e.$templated,n.global&&i.addGlobal&&lodash$1.extend(n.global,i.addGlobal),n.current&&i.addCurrent&&lodash$1.extend(n.current,i.addCurrent),i},sequence:function(t,e){if(!lodash$1.isArray(e))throw new Error("Sequence must be an array.");return new n(t,e,this)}}),r}function queryProvider$3(u){return function(e,t,n){var r=new u(t);if(lodash$1.isFunction(e))return e(t);(lodash$1.isString(e)||lodash$1.isNumber(e))&&(e={set:e,type:"random"}),e.set&&(r=r.where({set:e.set})),lodash$1.isString(e.data)&&(r=r.filter(function(t){return t.handle===e.data||t.data&&t.data.handle===e.data})),lodash$1.isPlainObject(e.data)&&(r=r.where({data:e.data})),lodash$1.isFunction(e.data)&&(r=r.filter(e.data));var i,o=e.seed||"$"+t.namespace+e.set,a=r.length,s=e.repeat;switch(e.type){case void 0:case"byData":case"random":i=n.random(a,o,s);break;case"exRandom":i=n.exRandom(a,o,s);break;case"sequential":i=n.sequential(a,o,s);break;case"first":i=0;break;case"last":i=a-1;break;default:throw new Error("Unknow query type: "+e.type)}if(lodash$1.isUndefined(r.at(i)))throw new Error("Query failed, object ("+JSON.stringify(e)+") not found. If you are trying to apply a template, you should know that they are not supported for inheritance.");return r.at(i)}}function inflateProvider$3(l,e){function c(t){return lodash$1.isFunction(t.customize)&&t.customize.apply(t,[t,e.global]),t}return function t(e,n,r,i,o){if(!(o=i?--o:10))throw new Error("Inheritance loop too deep, you can only inherit up to 10 levels down");if(!lodash$1.isPlainObject(e))throw new Error("You are trying to inflate a non object ("+JSON.stringify(e)+")");var a,s=lodash$1.cloneDeep(e),u=s.inherit;if(!s.inherit)return i||c(s),s;if(!(a=l(u,n,r)))throw new Error("Query failed, object ("+JSON.stringify(u)+") not found.");if(a=t(a,n,r,!0,o),u.merge&&!lodash$1.isArray(u.merge))throw new Error("Inheritance error: inherit.merge must be an array.");return lodash$1.each(a,function(t,e){var n,r;if(e in s){if(-1!=lodash$1.indexOf(u.merge,e)){if(n=s[e],r=t,lodash$1.isArray(n)){if(!lodash$1.isArray(r))throw new Error('Inheritance error: You tried merging an array with an non array (for "'+e+'")');s[e]=n.concat(r)}if(lodash$1.isPlainObject(n)){if(!lodash$1.isPlainObject(r))throw new Error('Inheritance error: You tried merging an object with an non object (for "'+e+'")');s[e]=lodash$1.extend({},r,n)}}}else s[e]=lodash$1.isFunction(t)?t:lodash$1.cloneDeep(t)}),a.data&&(s.data=lodash$1.extend(a.data,s.data||{})),!i&&c(s),s}}RandomizerProvider$1.$inject=["randomizeInt","randomizeRange","Collection"],storeProvider$3.$inject=["Collection"],SequenceProvider$2.$inject=["MixerSequence"],DatabaseProvider$1.$inject=["DatabaseStore","DatabaseRandomizer","databaseInflate","templateObj","databaseSequence","piConsole"],queryProvider$3.$inject=["Collection"],inflateProvider$3.$inject=["databaseQuery","$rootScope"];var global$4=window.piGlobal,piConsole$3=piConsoleFactory$3(console),collection$1=collectionService$1(),DatabaseRandomizer$1=RandomizerProvider$1(randomInt$1,randomArr$1,collection$1),databaseQuery$1=queryProvider$3(collection$1,piConsole$3),databaseInflate$1=inflateProvider$3(databaseQuery$1,{global:global$4},piConsole$3),DatabaseStore$1=storeProvider$3(collection$1),databaseSequence$1=SequenceProvider$2(MixerSequence$1),Database$2=DatabaseProvider$1(DatabaseStore$1,DatabaseRandomizer$1,databaseInflate$1,templateObj$1,databaseSequence$1,piConsole$3);function randomArr$1(t){return lodash$1.shuffle(lodash$1.range(t))}function randomInt$1(t){return Math.floor(Math.random()*t)}function go$1(t,e,n){var r=this.mixerSequence;switch(t){case"nextWhere":where("next",e,n,r);break;case"previousWhere":where("prev",e,n,r);break;case"current":break;case"first":for(;r.prev(n),r.current(n););break;case"last":for(;r.next(n),r.current(n););r.prev();break;case"end":for(;r.next(n),r.current(n););break;case"next":r.next(n);break;default:throw new Error('Unknow destination "'+t+'" for goto.')}return this}function where(t,e,n,r){for(var i;r[t](),(i=r.current(n))&&!lodash$1.callback(e)(i.data););}function createDB$1(t){var e=new Database$2;if(e.createColl("trial"),e.createColl("stimulus"),e.createColl("media"),e.add("trial",t.trialSets||[]),e.add("stimulus",t.stimulusSets||[]),e.add("media",t.mediaSets||[]),!lodash$1.isArray(t.sequence))throw new Error("You must set a sequence array.");var n=e.sequence("trial",t.sequence);return n.go=go$1,e.currentSequence=n,e}var fastdom=createCommonjsModule(function(u){!function(t){var i=function(){},e=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.msRequestAnimationFrame||function(t){return setTimeout(t,16)};function n(){this.reads=[],this.writes=[],this.raf=e.bind(t)}function o(t){t.scheduled||(t.scheduled=!0,t.raf(function(t){var e,n=t.writes,r=t.reads;try{i("flushing reads",r.length),a(r),i("flushing writes",n.length),a(n)}catch(t){e=t}t.scheduled=!1,(r.length||n.length)&&o(t);if(e){if(i("task errored",e.message),!t.catch)throw e;t.catch(e)}}.bind(null,t)))}function a(t){for(var e;e=t.shift();)e()}function r(t,e){var n=t.indexOf(e);return!!~n&&!!t.splice(n,1)}n.prototype={constructor:n,measure:function(t,e){var n=e?t.bind(e):t;return this.reads.push(n),o(this),n},mutate:function(t,e){var n=e?t.bind(e):t;return this.writes.push(n),o(this),n},clear:function(t){return r(this.reads,t)||r(this.writes,t)},extend:function(t){if("object"!=typeof t)throw new Error("expected object");var e=Object.create(this);return function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}(e,t),e.fastdom=this,e.initialize&&e.initialize(),e},catch:null};var s=t.fastdom=t.fastdom||new n;u.exports=s}("undefined"!=typeof window?window:commonjsGlobal)});function getSize$1(t){var e=window.getComputedStyle(t);return{height:parse$1(t.offsetHeight)-parse$1(e.borderTopWidth)-parse$1(e.borderBottomWidth),width:parse$1(t.offsetWidth)-parse$1(e.borderLeftWidth)-parse$1(e.borderRightWidth)}}function parse$1(t){return parseFloat(t,10)||0}function adjust_canvas(n,r){return lodash$1.throttle(function(t){"orientationchange"==t.type?setTimeout(e,500):e()},16);function e(){fastdom.measure(function(){var t=getTargetSize(r,n),e=window.getComputedStyle(n);t.height-=parse(e.borderTopWidth)+parse(e.borderBottomWidth)+parse(e.marginTop),t.width-=parse(e.borderLeftWidth)+parse(e.borderRightWidth),fastdom.mutate(function(){n.style.width=t.width+"px",n.style.height=t.height+"px",n.style.fontSize=t.height*(r.textSize||3)/100+"px",window.scrollTo(0,1)})})}}function getProportions(t){if(!lodash$1.isPlainObject(t))return t||.8;if([t.height,t.width].every(lodash$1.isFinite))return t.height/t.width;throw new Error("The canvas proportions object`s height and a width properties must be numeric")}function getTargetSize(t,e){var n=getProportions(t.proportions);if(t.width)return{width:t.width,height:t.width*n};var r=window.document.documentElement,i=r.clientHeight,o=Math.min(t.maxWidth||1/0,r.clientWidth,getSize$1(e.parentNode).width);return n*o<i?{height:o*n,width:o}:{height:i,width:i/n}}function parse(t){return parseFloat(t,10)||0}function canvasContructor(r,t){var e;if(!lodash$1.isPlainObject(r))throw new Error("canvas(map): You must set a rule map for canvas to work properly");if(lodash$1.isUndefined(t))return lodash$1.noop;if(!lodash$1.isPlainObject(t))throw new Error("canvas(settings): canvas settings must be an object");return e=lodash$1.map(t,function(t,e){var n=r[e];if(n)return on(n.element,n.property,t);throw new Error("canvas("+e+"): unknow key in canvas object.")}),function(){lodash$1.forEach(e,function(t){t.call()})}}function on(t,e,n){var r=t.style[e];return t.style[e]=n,function(){t.style[e]=r}}var stream$2=createCommonjsModule(function(t){!function(){var e=0,i={};function a(){function t(){return 0<arguments.length&&arguments[0]!==i&&r(t,arguments[0]),t._state.value}var n;return(n=t).constructor=a,n._state={id:e++,value:void 0,state:0,derive:void 0,recover:void 0,deps:{},parents:[],endStream:void 0,unregister:void 0},n.map=n["fantasy-land/map"]=c,n["fantasy-land/ap"]=f,n["fantasy-land/of"]=a,n.valueOf=d,n.toJSON=h,n.toString=d,Object.defineProperties(n,{end:{get:function(){if(!n._state.endStream){var e=a();e.map(function(t){return!0===t&&(l(n),e._state.unregister=function(){l(e)}),t}),n._state.endStream=e}return n._state.endStream}}}),0<arguments.length&&arguments[0]!==i&&r(t,arguments[0]),t}function r(t,e){for(var n in o(t,e),t._state.deps)s(t._state.deps[n],!1);null!=t._state.unregister&&t._state.unregister(),function(t){for(var e in t._state.changed=!1,t._state.deps)t._state.deps[e]._state.changed=!1}(t)}function o(t,e){t._state.value=e,t._state.changed=!0,2!==t._state.state&&(t._state.state=1)}function s(t,e){var n=t._state.parents;if(0<n.length&&n.every(v)&&(e||n.some(m))){var r=t._state.derive();if(r===i)return!1;o(t,r)}}function u(t,e){if(!e.every(p))throw new Error("Ensure that each item passed to stream.combine/stream.merge is a stream");return n=a(),r=e,i=function(){return t.apply(this,e.concat([e.filter(m)]))},(o=n._state).derive=i,o.parents=r.filter(g),function t(e,n){for(var r=0;r<n.length;r++)n[r]._state.deps[e._state.id]=e,t(e,n[r]._state.parents)}(n,o.parents),s(n,!0),n;var n,r,i,o}function l(t){for(var e=0;e<t._state.parents.length;e++){delete t._state.parents[e]._state.deps[t._state.id]}for(var n in t._state.deps){var r=t._state.deps[n],i=r._state.parents.indexOf(t);-1<i&&r._state.parents.splice(i,1)}t._state.state=2,t._state.deps={}}function c(e){return u(function(t){return e(t())},[this])}function f(t){return u(function(t,e){return t()(e())},[t,this])}function d(){return this._state.value}function h(){return null!=this._state.value&&"function"==typeof this._state.value.toJSON?this._state.value.toJSON():this._state.value}function p(t){return t._state}function v(t){return 1===t._state.state}function m(t){return t._state.changed}function g(t){return 2!==t._state.state}(a["fantasy-land/of"]=a).merge=function(t){return u(function(){return t.map(function(t){return t()})},t)},a.combine=u,a.scan=function(e,n,t){var r=u(function(t){return n=e(n,t._state.value)},[t]);return 0===r._state.state&&r(n),r},a.scanMerge=function(r,i){var t=r.map(function(t){var e=t[0];return 0===e._state.state&&e(void 0),e});return u(function(){var n=arguments[arguments.length-1];return t.forEach(function(t,e){-1<n.indexOf(t)&&(i=r[e][1](i,t._state.value))}),i},t)},a.HALT=i,t.exports=a}()}),css_1=css$2;function css$2(t,e){var n,r=t.style;if(e)for(var i in e)r[(n=i,n.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()}))]=e[i]}function setupCanvas(t,e){e||(e={});var n=stream$2();if(!lodash$1.isElement(t))throw new Error("Minno-time: canvas is not a DOM element");t.classList.add("minno-canvas");var r=canvasContructor({background:{element:document.body,property:"backgroundColor"},canvasBackground:{element:t,property:"backgroundColor"},borderColor:{element:t,property:"borderColor"},borderWidth:{element:t,property:"borderWidth"}},lodash$1.pick(e,["background","canvasBackground","borderColor","borderWidth"]));return e.css&&css_1(t,e.css),n.map(adjust_canvas(t,e)),n({}),window.addEventListener("orientationchange",n),window.addEventListener("resize",n),n.end.map(function(){t.classList.remove("minno-canvas")}).map(function(){window.removeEventListener("orientationchange",n),window.removeEventListener("resize",n)}).map(r),n}function setup$1(t,e){var n=setupCanvas(t,lodash$1.get(e,"settings.canvas",{})),r=createDB$1(e);return setupVars(e),{db:r,$resize:n,canvas:t,script:e,settings:e.settings||{}}}function setupVars(t){var e=global$3(global$3()),n=t.name||"anonymous minno-time",r=t.current?t.current:{};r.logs||(r.logs=[]),e[n]=e.current=r}var srcStack=[],defStack=[],stackDone=0,getText=lodash$1.memoize(getXhr),loader={load:load,all:function(){return Promise.all(defStack)},progress:function(){return defStack.length?stackDone/defStack.length:1}};function load(e,t){if(-1!==srcStack.indexOf(e))return!1;var n="template"==t?getText(e):getImage(e);return n.then(function(){stackDone++}).then(function(){loader.onload&&loader.onload(e)}).catch(function(t){loader.onerror&&loader.onerror(t,e)}),defStack.push(n),srcStack.push(e),n}function getImage(r){return new Promise(function(t,e){var n=document.createElement("img");n.onload=function(){t(n)},n.onerror=function(){e(new Error("Image not found: "+r))},n.src=r})}function getXhr(r){return new Promise(function(t,e){var n=new XMLHttpRequest;n.open("GET",r,!0),n.onreadystatechange=function(){4===this.readyState&&(200<=this.status&&this.status<400?t(this.responseText):e(new Error("Template not found:"+r)))},n.send()})}function buildUrl(t,e,n){return"image"==n&&/^data:image/.test(e)?e:(lodash$1.isObject(t)&&(t=t[n]),t?"/"!=t[t.length-1]&&(t+="/"):t="",t+e)}function preloadScript(t,e){return getScriptMedia(t).forEach(function(t){lodash$1.isUndefined(t.image)||loader.load(buildUrl(e,t.image,"image"),"image");lodash$1.isUndefined(t.template)||loader.load(buildUrl(e,t.template,"template"),"template")}),loader}function getScriptMedia(t){var e=t.mediaSets,n=lodash$1.map(t.stimulusSets,getStimMedia),r=lodash$1.map(t.trialSets,getTrialMedia),i=lodash$1.filter(t.sequence,notMixer).map(getTrialMedia);return lodash$1.flattenDeep([e,n,r,i]).filter(notUndefined)}function getTrialMedia(t){return[lodash$1.map(t.input,function(t){return t.element}),lodash$1.map(t.stimuli,getStimMedia),lodash$1.map(t.layout,getStimMedia)]}function getStimMedia(t){return t.media}function notMixer(t){return!t.mixer}function notUndefined(t){return!lodash$1.isUndefined(t)}function preloadPhase$1(t,e,n){var r=preloadScript(e,e.settings.base_url);if(1==r.progress())return Promise.resolve().then(o);t.innerHTML='<div class="minno-progress"><div class="minno-progress-bar"></div></div>';var i=t.getElementsByClassName("minno-progress-bar")[0].style;return i.width=r.progress()+"%",r.onload=function(){fastdom.mutate(function(){i.width=100*r.progress()+"%"})},r.onerror=function(t,e){n({type:"error",message:"Failed to preload",error:t,context:e})},r.all().then(o).catch(function(t){throw new Error("loading resource failed, do something about it! (you can start by checking the error log, you are probably reffering to the wrong url - "+t+")")});function o(){for(;t.firstChild;)t.removeChild(t.firstChild)}}function mouseEvents$1(t,n,e){var r=stream$2(),i=n.element;return i&&(css_1(i,n.css),fastdom.mutate(function(){e.appendChild(i)})),e.addEventListener(t,function(t){var e=t.target;return i&&e===i?r(t):i||e.getAttribute("data-handle")!==n.stimHandle?void 0:r(t)}),r.end.map(function(){i&&e.removeChild(i);e.removeEventListener(t,r)}),r}var keyDownArr=[];function keypressed$1(t){var e=stream$2(),n=(Array.isArray(t.key)?t.key:[t.key]).map(function(t){return"string"==typeof t?t.toUpperCase().charCodeAt(0):t});return document.addEventListener("keydown",r),e.end.map(function(){document.removeEventListener("keydown",r)}),e;function r(t){keyDownArr[t.which]||-1===n.indexOf(t.which)||(t.preventDefault(),keyDownArr[t.which]=!0,e(t))}}function keyup$1(t){var e=stream$2(),n=(Array.isArray(t.key)?t.key:[t.key]).map(function(t){return"string"==typeof t?t.toUpperCase().charCodeAt(0):t});return document.addEventListener("keyup",function(t){if(-1===n.indexOf(t.which))return;return t.preventDefault(),e(t)}),e.end.map(function(){document.removeEventListener("keyup",e)}),e}function simpleRandomize(t,e){if(lodash$1.isArray(t))return t[Math.floor(Math.random()*t.length)];if(lodash$1.isFunction(t))return t.call(e);if(lodash$1.isPlainObject(t)){if(!lodash$1.isNumber(t.min)||!lodash$1.isNumber(t.max)||t.min>t.max)throw new Error("randomization objects need both a max and a minimum property, also max has to be larger than min");return t.min+(t.max-t.min)*Math.random()}return t}function timeout$1(t){var e=stream$2(),n=simpleRandomize(t.duration)||0;return e.end.map(function(){clearTimeout(void 0)}),n?setTimeout(e.bind(null,{}),n):e({}),e}function inputBinder(t,e){var n=t.on;switch(n){case"keypressed":return keypressed$1(t);case"keyup":return keyup$1(t);case"click":case"mousedown":return mouseEvents$1("mousedown",t,e);case"mouseup":return mouseEvents$1("mouseup",t,e);case"mouseenter":return mouseEvents$1("mouseenter",t,e);case"mouseleave":return mouseEvents$1("mouseleave",t,e);case"timeout":return timeout$1(t);case"enter":return keypressed$1(lodash$1.assign({key:13},t));case"space":return keypressed$1(lodash$1.assign({key:32},t));case"esc":return keypressed$1(lodash$1.assign({key:27},t));case"leftTouch":return t.element=r(t.css,{position:"absolute",left:0,width:"30%",height:"100%",background:"#00FF00",opacity:.3}),mouseEvents$1("mousedown",t,e);case"rightTouch":return t.element=r(t.css,{position:"absolute",right:0,width:"30%",height:"100%",background:"#00FF00",opacity:.3}),mouseEvents$1("mousedown",t,e);case"topTouch":return t.element=r(t.css,{position:"absolute",top:0,width:"100%",height:"30%",background:"#00FF00",opacity:.3}),mouseEvents$1("mousedown",t,e);case"bottomTouch":return t.element=r(t.css,{position:"absolute",bottom:0,width:"100%",height:"30%",background:"#00FF00",opacity:.3}),mouseEvents$1("mousedown",t,e);default:throw new Error('You have an input element with an unrecognized "on" property: '+n)}function r(t,e){var n=document.createElement("div");return css_1(n,e),css_1(n,t),n}}function createListener$1(t,e){var n=getListener(t,e);if(!isStream(n))throw new Error("Input functions must return valid streams: "+logObj(t));return"handle"in t&&(n.handle=t.handle),n}function getListener(t,e){var n;if(lodash$1.isFunction(t))return t(t,e,stream$2);if(lodash$1.isPlainObject(t)){if(lodash$1.isString(t.on))return inputBinder(t,e,stream$2);lodash$1.isFunction(t.on)&&(n=t.on(t,e,stream$2)),lodash$1.isFunction(t.off)&&n.end.map(t.off)}throw new Error("Input must only contain objects and functions, do you have an undefined value?")}function logObj(t){return lodash$1.isFunction(t)?t.toString():JSON.stringify(t)}function isStream(t){return t._state}document.addEventListener("keyup",function(t){keyDownArr[t.which]=!1});var now=window.performance.now?window.performance.now.bind(window.performance):Date.now.bind(Date);function interfaceFn(n,r){var i=[],o=0;return{add:function(t){if(!t)throw new Error("Missing input element. Could not add input listener");var e=createListener$1(t,r);e.map(function(t){return{handle:e.handle,event:t,timestamp:+new Date,latency:now()-o}}).map(n),i.push(e)},remove:function(t){for(var e=i.length-1;0<=e;e--){var n=i[e];n.handle===t&&(n.end(!0),i.splice(e,1))}},removeAll:function(){i.forEach(function(t){t.end(!0)}),i.length=0},resetTimer:function(){o=now()}}}function getMedia$1(n){var r,t=n.html||n.inlineTemplate||n.template;return lodash$1.isFunction(n)?customMedia(n):(isWord(n)&&(n={word:n}),isWord(n.word)?((r=document.createElement("div")).textContent=n.word,Promise.resolve(r)):t?((r=document.createElement("div")).innerHTML=t,Promise.resolve(r)):n.image?new Promise(function(t,e){(r=document.createElement("img")).onload=function(){t(r)},r.onerror=function(){e(new Error("Image not found: "+r.src))},r.src=n.image}):n.jquery?Promise.reject(new Error("Jquery is no longer supported in minno-time")):Promise.reject(new Error("Unrecognized media type")))}function isWord(t){return lodash$1.isString(t)||lodash$1.isNumber(t)}function customMedia(t){var e,n=t();return(e=n)&&lodash$1.isFunction(e.then)?n.then(function(t){return lodash$1.isElement(t)?t:Promise.reject("Custom media must resolve with an element")}):Promise.reject(new Error("Custom media must return a promise"))}function setSize$1(t,e){var n=t.style,r=e.size||{};return r.font_size&&(n.fontSize=r.font_size),isSet("height",r)&&!isWordMedia(e.media)&&(n.height=r.height+"%"),isSet("width",r)&&(n.width=r.width+"%"),t}function isSet(t,e){return t in e}function isWordMedia(t){return lodash$1.isString(t)||lodash$1.isString(t.word)}var YCLASS="minno-stimulus-center-y",XCLASS="minno-stimulus-center-x";function setPlace$1(n,t){var r=t.location||{};("center"==r.top||"center"==r.bottom||void 0===r.top&&void 0===r.bottom)&&n.classList.add(YCLASS),("center"==r.left||"center"==r.right||void 0===r.left&&void 0===r.right)&&n.classList.add(XCLASS),["top","bottom","left","right"].forEach(function(t){e=r[t],isNaN(+e)||(n.style[t]=r[t]+"%");var e})}function fixIE(r,t){var i=r.style,o=r.classList.contains(XCLASS),a=r.classList.contains(YCLASS);if(!o&&!a)return t(r);fastdom.measure(function(){var t=window.getComputedStyle(r),e=parseFloat(t.width),n=parseFloat(t.height);fastdom.mutate(function(){i.transform="none",o&&(i.marginLeft="-"+e/2+"px"),a&&(i.marginTop="-"+n/2+"px")})})}function Stimulus$1(t,e,n){var r={el:null,source:t,trial:e,canvas:n,init:init,show:show,hide:hide,name:name,mediaName:mediaName,destroy:destroy$1};return r.data=t.data||{},r.handle=r.data.handle=r.data.handle||t.handle||t.set,r}function init(){var e=this.source,n=this.trial.$messages;if(!this.source.media)throw new Error("Media object not defined for "+this.name());return getMedia$1(this.source.media).then(setupElement.bind(this,this.canvas),function(t){throw n({type:"error",message:"trial.stimulus error",error:t,context:e}),t})}function setupElement(e,n){var r=this;return this.el=n,new Promise(function(t){fastdom.mutate(function(){n.classList.add("minno-stimulus"),n.setAttribute("data-handle",r.handle),setSize$1(n,r.source),setPlace$1(n,r.source),css_1(n,r.source.css||{}),r.source.isLayout&&n.classList.add("minno-stimulus-visible"),e.appendChild(n),document.documentMode?fixIE(n,t):t(n)})})}function show(){var t=this.el;if(!t)throw new Error("A stimulus can not be shown before init is called");fastdom.mutate(function(){t.classList.add("minno-stimulus-visible")})}function hide(){var t=this.el;if(!t)throw new Error("A stimulus can not be hidden before init is called");fastdom.mutate(function(){t.classList.remove("minno-stimulus-visible")})}function destroy$1(){var t=this.el,e=this.canvas;fastdom.mutate(function(){e.removeChild(t)})}function name(){var t=this.source;return t.alias?t.alias:this.data.alias?this.data.alias:t.inherit&&t.inherit.set?t.inherit.set:this.handle?this.handle:void 0}function mediaName(t){var e=this.source.media,n=t&&t.fullpath;if(e.alias)return e.alias;for(var r in e){if(contains$1(["image","template"],r))return n?e[r]:e[r].replace(/^.*[\\/]/,"");if(contains$1(["word","html","inlineTemplate"],r)&&e[r])return e[r]}}function contains$1(t,e){return-1!=t.indexOf(e)}function stimCollection(e,n){validateStimuli("stimuli",e._source),validateStimuli("layout",e._source);var t=e._source,r=lodash$1.map(t.stimuli,a),i=lodash$1.map(t.layout,function(t){return t.isLayout=!0,t}).map(a),o=Promise.all(r.concat(i).map(function(t){return t.init()}));return{canvas:n,stimuli:r,layout:i,ready:o,getStimlist:getStimlist,getMedialist:getMedialist,destroy:destroy};function a(t){return Stimulus$1(t,e,n)}}function getStimlist(){return this.stimuli.filter(function(t){return!t.source.nolog}).map(function(t,e){return t.name()||"stim"+e})}function getMedialist(n){return this.stimuli.filter(function(t){return!t.source.nolog}).map(function(t,e){return t.mediaName(n)||"media"+e})}function destroy(){this.stimuli.concat(this.layout).forEach(function(t){t.destroy()})}function validateStimuli(t,e){var n=e[t];if(n){if(!Array.isArray(n))throw new Error(t+" must be an array");if(!n.every(function(t){return"media"in t}))throw new Error("Each "+t+" stimulus must have a media property")}}var global$5=global$3(),conditionHash={begin:begin,inputEquals:inputEquals,inputEqualsTrial:inputEqualsTrial,inputEqualsStim:inputEqualsStim,trialEquals:trialEquals,inputEqualsGlobal:inputEqualsGlobal,globalEquals:globalEquals,globalEqualsTrial:globalEqualsTrial,globalEqualsStim:globalEqualsStim,currentEquals:currentEquals,currentEqualsTrial:currentEqualsTrial,currentEqualsStim:currentEqualsStim,inputEqualsCurrent:inputEqualsCurrent,fn:fn,custom:custom};function getConditonFn(t){if(lodash$1.isFunction(t))return t;if(lodash$1.isFunction(conditionHash[t.type]))return conditionHash[t.type];throw new Error("Unknown condition type: "+JSON.stringify(t))}function begin(t){return"begin"===t.type}function inputEquals(t,e){return-1!==(Array.isArray(e.value)?e.value:[e.value]).indexOf(t.handle)}function inputEqualsTrial(t,e,n){return t.handle===n.data[e.property]}function inputEqualsStim(t,e,n){var r={};return e.handle&&(r.handle=e.handle),r[e.property]=t.handle,hasData(r,n)}function trialEquals(t,e,n){if(lodash$1.isUndefined(e.property)||lodash$1.isUndefined(e.value))throw new Error('trialEquals requires both "property" and "value" to be defined');return e.value===n.data[e.property]}function inputEqualsGlobal(t,e){if(lodash$1.isUndefined(e.property))throw new Error('inputEqualsGlobal requires "property" to be defined');return t.handle===global$5[e.property]}function globalEquals(t,e){if(void 0===e.property||void 0===e.value)throw new Error('globalEquals requires both "property" and "value" to be defined');return e.value===global$5[e.property]}function globalEqualsTrial(t,e,n){if(void 0===e.globalProp||void 0===e.trialProp)throw new Error('globalEqualsTrial requires both "globalProp" and "trialProp" to be defined');return global$5[e.globalProp]===n.data[e.trialProp]}function globalEqualsStim(t,e,n){if(void 0===e.globalProp||void 0===e.stimProp)throw new Error('globalEqualsStim requires both "globalProp" and "stimProp" to be defined');var r={};return e.handle&&(r.handle=e.handle),r[e.stimProp]=global$5[e.globalProp],hasData(r,n)}function inputEqualsCurrent(t,e){var n=global$5.current;if(void 0===e.property)throw new Error('inputEqualsCurrent requires "property" to be defined');return t.handle===n[e.property]}function currentEquals(t,e){var n=global$5.current;if(void 0===e.property||void 0===e.value)throw new Error('currentEquals requires both "property" and "value" to be defined');return e.value===n[e.property]}function currentEqualsTrial(t,e,n){var r=global$5.current;if(void 0===e.currentProp||void 0===e.trialProp)throw new Error('currentEqualsTrial requires both "currentProp" and "trialProp" to be defined');return r[e.currentProp]===n.data[e.trialProp]}function currentEqualsStim(t,e,n){var r=global$5.current;if(void 0===e.currentProp||void 0===e.stimProp)throw new Error('currentEqualsStim requires both "currentProp" and "stimProp" to be defined');var i={};return e.handle&&(i.handle=e.handle),i[e.stimProp]=r[e.currentProp],hasData(i,n)}function fn(t,e,n){return e.value.apply(n,[e,t,n])}function custom(t,e,n){return e.fn.apply(null,[e,t,n])}function hasData(r,t){return t.stimulusCollection.stimuli.some(function(t){var e=t.data;for(var n in r)if(r[n]!==e[n])return!1;return!0})}function conditionsEvaluate(t,n,r){return t=Array.isArray(t)?t:[t],("begin"!=n.type||!t.every(function(t){return"begin"!=t.type}))&&t.every(function(t){var e=getConditonFn(t)(n,t,r);return t.negate?!e:e})}var actions={showStim:function(t,e,n){var r=t.handle||t;n.stimulusCollection.stimuli.forEach(function(t){"All"!=r&&t.handle!=r||t.show()})},hideStim:function(t,e,n){var r=t.handle||t;n.stimulusCollection.stimuli.forEach(function(t){"All"!=r&&t.handle!=r||t.hide()})},setStimAttr:function(t,e,n){var r=t.handle,i=t.setter;n.stimulusCollection.stimuli.forEach(function(t){"All"!=r&&t.handle!=r||(lodash$1.isFunction(i)?i.apply(t):lodash$1.extend(t.data,i))})},setTrialAttr:function(t,e,n){var r=t.setter;if(void 0===r)throw new Error("The setTrialAttr action requires a setter property");lodash$1.isFunction(r)?r.apply(n,[n.data,e]):lodash$1.extend(n.data,r)},setInput:function(t,e,n){if(void 0===t.input)throw new Error("The setInput action requires an input property");n.input.add(t.input)},trigger:function(t,e,n){if(void 0===t.handle)throw new Error("The trigger action requires a handle property");n.input.add({handle:t.handle,on:"timeout",duration:+t.duration||0})},removeInput:function(t,e,n){var r=n.input,i=t.handle;if(void 0===i)throw new Error("The removeInput action requires a handle property");"All"==i||lodash$1.include(i,"All")?r.removeAll():r.remove(i)},goto:function(t,e,n){n._next=[t.destination,t.properties]},endTrial:function(){},resetTimer:function(t,e,n){function r(){e.latency=0,n.input.resetTimer()}t.immidiate?r():fastdom.mutate(r)},log:function(t,e,n){n.$logs(arguments)},setGlobalAttr:function(t){switch(typeof t.setter){case"function":t.setter.apply(null,[global$3(),t]);break;case"object":lodash$1.extend(global$3(),t.setter);break;default:throw new Error('setGlobalAttr requires a "setter" property')}},custom:function(t,e,n){if("function"!=typeof t.fn)throw new Error("The custom action requires a fn propery");t.fn(t,e,n)},canvas:function(t,e,n){var r=n.cavnas,i=canvasContructor({background:{element:document.body,property:"backgroundColor"},canvasBackground:{element:r,property:"backgroundColor"},borderColor:{element:r,property:"borderColor"},borderWidth:{element:r,property:"borderWidth"}},lodash$1.pick(t,["background","canvasBackground","borderColor","borderWidth"]));n.$end.map(i)},startMouseTracking:function(e,t,s){if(s.data.listener)return s.$message({type:"warn",message:"Mouse tracking has already been activated."});var u=performance.now(),l=s.canvas,c=e.logAs||"mousetracker",n=getComputedStyle(l),f=parseInt(n.getPropertyValue("border-top-width")),d=parseInt(n.getPropertyValue("border-left-width")),h=s.stimulusCollection.stimuli.filter(function(t){return lodash$1.contains(e.logStimulusLocation,t.handle)}),r=lodash$1.throttle(function(t){var e=l.getBoundingClientRect(),r=e.x+d,i=e.y+f,n={mouseX:t.clientX-r,mouseY:t.clientY-i},o=h.reduce(function(t,e){var n=e.el.getBoundingClientRect();return lodash$1.set(t,e.handle+"X",n.x-r),lodash$1.set(t,e.handle+"Y",n.y-i),lodash$1.set(t,e.handle+"Width",n.width),lodash$1.set(t,e.handle+"Height",n.height),t},n),a=lodash$1.mapValues(lodash$1.set(o,"time",performance.now()-u),Math.round);s.data[c].push(a)},e.logRate||15);s.data[c]||(s.data[c]=[]),s.data.$listener=r,document.addEventListener("mousemove",r),s.$events.end.map(function(){document.removeEventListener("mousemove",r)})},stopMouseTracking:function(t,e,n){lodash$1.isFunction(n.data.$listener)&&(document.removeEventListener("mousemove",n.data.$listener),n.data.$listener=null)}};function applyActions(t,n,r){var i=!1;return t=lodash$1.isArray(t)?t:[t],lodash$1.forEach(t,function(t){var e=lodash$1.isFunction(t)?t:actions[t.type];if(!e)throw new Error("unknown action: "+t.type);"endTrial"===t.type&&(i=!0),e(t,n,r)}),i}var MAX_RECURSION_DEPTH=50;function interactions$1(s){var u=0,l=s._source.interactions;try{validateInteractions(l)}catch(t){throw s.$messages({type:"error",message:"trial.interactions error",error:t,context:s._source}),t}return function(t){var e,n,r,i,o="Event: "+(t.handle||t.type),a=[];if(MAX_RECURSION_DEPTH<u)throw new Error("It seem you have created an infinite loop. Minno has been halted");u++;try{for(e=0;e<l.length&&(n=l[e],r=conditionsEvaluate(n.conditions,t,s),a.push([r,n.conditions]),r&&(i=applyActions(n.actions,t,s)),!i);e++);}catch(t){throw s.$messages({type:"error",message:"trial.interactions error",error:t}),t}u--,s.$messages({type:"debug",message:o,rows:a}),i&&s.end();return t}}function validateInteractions(t){if(!Array.isArray(t))throw new Error("Interactions must be an array");if(!t.length)throw new Error("There are no interactions defined");if(!t.every(lodash$1.isPlainObject))throw new Error("Interactions must be plain objects");if(!t.every(e("conditions")))throw new Error("Conditions must be either an array or a function");if(!t.every(e("actions")))throw new Error("Actions must be either an array or a function");function e(e){return function(t){return Array.isArray(t[e])||lodash$1.isFunction(t[e])}}}var gid=0;function Trial$1(t,e,n){if(!t.interactions)throw new Error("Interactions not defined");this.canvas=e,this.settings=n,this._source=t,this.$logs=stream$2(),this.$messages=stream$2(),this.$events=stream$2(),this.$end=this.$events.end,this.data=t.data||{},this._id=lodash$1.uniqueId("trial_"),this.counter=gid++,this.input=interfaceFn(this.$events,e),this.stimulusCollection=stimCollection(this,e),this._next=["next",{}]}function addTrialDetails(e){return function(t){return lodash$1.assign(t,{trialId:e._id,counter:e.counter})}}function nextTrial$1(i,o,t){var e,n=t[0],r=t[1],a=i.currentSequence,s=global$3(),u={global:s,current:s.current};return a.go(n,r,u),e=a.current(u,{skip:["layout","stimuli"]}),(e=lodash$1.clone(e))?(e.stimuli=lodash$1.map(e.stimuli||[],c,u),e.layout=lodash$1.map(e.layout||[],c,u),u.trialData=null,{value:e}):{done:!0};function l(t,e,n){var r=t[e];if(lodash$1.isUndefined(r))return!1;lodash$1.isString(r)&&(r={word:r}),(r=i.inflate("media",r,n)).image&&(r.image=buildUrl(o.base_url,r.image,"image")),r.template&&(r.inlineTemplate=requirejs("text!"+buildUrl(o.base_url,r.template,"template")),r.inlineTemplate=lodash$1.template(r.inlineTemplate)(n)),t[e]=r,n.mediaData=null,n.mediaMeta=null}function c(t){return t=i.inflate("stimulus",t,this,{skip:["media","touchMedia"]}),l(t=lodash$1.clone(t),"media",this),l(t,"touchMedia",this),this.stimulusData=null,this.stimulusMeta=null,t}}function createLogs$3(t,e,n){var r,i=e.logger||e.logMap||n;return t.map((r=i,function(t){return r.apply(null,t)}))}function transformLogs(t,e,n){var r=window.piGlobal,i=n.data,o=e,a=r.current.logs,s=lodash$1.get(n,"settings.logger.fullpath",!1),u=n.stimulusCollection.getStimlist(),l=n.stimulusCollection.getMedialist({fullpath:s});return{log_serial:a.length,trial_id:n.counter,name:n.name(),responseHandle:o.handle,latency:Math.floor(o.latency),stimuli:u,media:l,data:i}}function playerPhase(t){var r,i=t.canvas,n=t.db,o=t.settings,e=global$3(),a=stream$2(),s=a.map(function(t){var e=r,n=r=new Trial$1(t,i,o);return n.$logs.map(u),n.$messages.map(l),t.DEBUG&&window.DEBUG&&setupDebug(n),n.$end.map(function(){d(n._next)}),n.start(),e&&fastdom.mutate(function(){e.stimulusCollection.destroy()}),n}),u=stream$2(),l=stream$2(),c=createLogs$3(u,composeLoggerSettings(t.script,e),transformLogs),f=lodash$1.get(o,"hooks.endTask",o.onEnd||lodash$1.noop);return c.map(function(t){e.current.logs.push(t)}),a.end.map(s.end).map(u.end).map(function(){var t=s();t&&t.stimulusCollection.destroy()}).map(f),lodash$1.extend({$trial:s,end:a.end.bind(null,!0),$logs:c,$messages:l,start:d.bind(null,["next",{}]),onEnd:function(t){a.end.map(t)}},t);function d(t){var e=nextTrial$1(n,o,t);e.done?a.end(!0):a(e.value)}}function setupDebug(t){var e="Trial :"+t.counter;console.group(e),t.$messages.map(function(t){if("debug"!==t.type)return t;t.rows?(console.groupCollapsed(t.message),t.rows.forEach(function(t){console.log.apply(console,t)}),console.groupEnd(t.message)):console.log(t.message);return t}),t.$events.end.map(function(){console.groupEnd(e)})}function composeLoggerSettings(t,e){var n=lodash$1.assign({},lodash$1.get(t,"settings.logger")),r=lodash$1.assign({taskName:t.name},e.$meta,n.metaData);return n.metaData=r,n}function activate$2(t,e){var n=playerPhase(setup$1(t,e));return n.$trial.end.map(n.$resize.end),preloadPhase$1(t,e,n.$messages).then(n.start),n}function activateTime$1(t,e,n,r,i,o){var a,s,u=createLog(o,r,n);return r.name=n.$name,e.append("<div pi-player></div>"),a=e.contents(),(s=activate$2(a[0],r)).onEnd(t),s.$messages.map(i),s.$logs.map(u),s.$logs.end.map(u.end),function(){u.end(!0),a.remove(),s.end()}}function allowLeaving(t,e){e.deactivate(),t()}lodash$1.extend(Trial$1.prototype,{start:function(){var t=this;return t.stimulusCollection.ready.then(function(){t.$events.map(addTrialDetails(t)).map(interactions$1(t)),lodash$1.forEach(t._source.input,t.input.add),t.input.resetTimer(),t.$events({type:"begin",latency:0})})},end:function(){this.input.removeAll(),this.$end(!0)},name:function(){return this.alias?this.alias:this.data.alias?this.data.alias:lodash$1.isString(this._source.inherit)?this._source.inherit:lodash$1.isPlainObject(this._source.inherit)?this._source.inherit.set:void 0}}),activateTime$1.$inject=["done","$element","task","script","piConsole","logger"],allowLeaving.$inject=["done","managerBeforeUnload"];var template$9='<div class="jumbotron">\n  <h2>{{ heading }}</h2>\n  <p>{{ text }}</p>\n    <div class="row">\n      <div class="col-md-2"></div>\n      <div class="col-md-4">\n        <button class="btn btn-primary btn-lg btn-block" ng-click="choose(true)"> {{ yesText }} </button>\n      </div>\n      <div class="col-md-4">\n        <button class="btn btn-primary btn-lg btn-block" ng-click="choose(false)"> {{ noText }} </button>\n      </div>\n      <div class="col-md-2"></div>\n    </div>\n</div>\n';function activateYesNo$1(t,e,n,r,i,o,a){var s,u=r.global;return"path"in n||a({type:"warn",message:'"path" was not set in the yesNo task',context:n}),"path"in n&&!lodash.isUndefined(u[n.path])&&a({type:"warn",message:'A value was already saved to "global.'+n.path+'". Please make sure that this is intentional.',context:n}),lodash.defaults(i,n,{heading:null,text:"Please choose one of the following",noText:"No",yesText:"Yes"}),i.choose=lodash.flow(function(t){lodash.set(u,n.path,t)},t),e.append(template$9),o(s=e.contents())(i),function(){i.$destroy(),s.remove()}}function activateIsTouch$1(t,e,n,r,i,o,a){var s,u=r.global,l=lodash.isUndefined(n.path)?"$isTouch":n.path;return lodash.isUndefined(u[l])||a({type:"warn",message:'A value was already saved to "global.'+n.path+'". Please make sure that this is intentional.',context:n}),is_touch_device()?(lodash.defaults(i,n,{heading:null,text:"We've detected that you are using a device capable of touch interactions. Would you like to use the touch interface?",noText:"Use keyboard",yesText:"Use touch"}),i.choose=lodash.flow(c,t),e.append(template$9),o(s=e.contents())(i),function(){i.$destroy(),s.remove()}):(c(!1),t());function c(t){lodash.set(u,l,t)}}function is_touch_device(){var t=" -webkit- -moz- -o- -ms- ".split(" ");if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)return!0;var e,n=["(",t.join("touch-enabled),("),"heartz",")"].join("");return e=n,window.matchMedia(e).matches}function activateInjectCss(t,e){injectStyle(e.css),t()}function injectStyle(t){var e=document.head||document.querySelector("head"),n=document.createElement("style");return n.type="text/css",n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),e.appendChild(n),function(){e.removeChild(n)}}activateYesNo$1.$inject=["done","$element","task","$rootScope","$scope","$compile","piConsole"],activateIsTouch$1.$inject=["done","$element","task","$rootScope","$scope","$compile","piConsole"],activateInjectCss.$inject=["done","task"];var module$14=angular.module("pi.task",[]);function canvasContructor$1(r,t){var e;if(!lodash.isPlainObject(r))throw new Error("canvas(map): You must set a rule map for canvas to work properly");if(lodash.isUndefined(t))return lodash.noop;if(!lodash.isPlainObject(t))throw new Error("canvas(settings): canvas settings must be an object");return e=lodash.map(t,function(t,e){var n=r[e];if(n)return on$1(n.element,n.property,t);throw new Error("canvas("+e+"): unknow key in canvas object.")}),function(){lodash.forEach(e,function(t){t.call()})}}function on$1(t,e,n){var r=t.css(e);return t.css(e,n),lodash.bind(t.css,t,e,r)}function managerCanvasService(t,e){var n={background:{element:angular.element(e[0].body),property:"backgroundColor"},canvasBackground:{element:t,property:"backgroundColor"},fontSize:{element:t,property:"fontSize"},fontColor:{element:t,property:"color"}};return lodash.bind(canvasContructor$1,null,n)}module$14.provider("taskActivate",provider),module$14.directive("piTask",directive$10),module$14.config(["taskActivateProvider",function(t){t.set("postCsv",postCsv),t.set("quest",activateQuest$1),t.set("message",activateMessage$1),t.set("post",activatePost$1),t.set("redirect",activateRedirect$1),t.set("pip",activatePIP$1),t.set("time",activateTime$1),t.set("allowLeaving",allowLeaving),t.set("yesNo",activateYesNo$1),t.set("isTouch",activateIsTouch$1),t.set("injectStyle",activateInjectCss)}]),managerCanvasService.$inject=["$rootElement","$document"];var module$15=angular.module("pi.canvas",[]);function swapControler(t){this.$scope=t}function swapDirective(t,c,f){return{transclude:!0,controller:swapControler,controllerAs:"ctrl",compile:function(){return{pre:this.pre,post:function(){}}},pre:function(i,t,e,n,o){i.enter=function(t,e){var n=e||{};if(n.pre&&n.pre(),!t)return l(n);var r=lodash.extend(i.$new(),t);o(r,function(t){!function(t,e){if(!e)return;var n=e.split(" ");lodash.each(n,function(t){if(!f.has("."+t+"-animation"))throw new Error('Unknown animation type: "'+t+'"')}),t.addClass(e)}(t,n.animate),l(n),s=t,a=r,c.enter(s,u,null,function(){n.post&&n.post()})})},i.empty=l,i.refresh=function(t){lodash.extend(a,t)};var a,s,r,u=t;function l(t){var e=t||{};r&&(r.remove(),r=null),a&&(a.$destroy(),a=null),s&&(c.leave(s,function(){r=null,e.postLeave&&e.postLeave()}),r=s,s=null)}}}}module$15.service("managerCanvas",managerCanvasService),swapControler.$inject=["$scope"],lodash.extend(swapControler.prototype,{next:function(t,e){this.$scope.enter(t,e)},prev:function(t,e){this.$scope.enter(t,e)},refresh:function(t){this.$scope.refresh(t)},empty:function(t){this.$scope.empty(t)}}),swapDirective.$inject=["$compile","$animate","$injector"];var template$10='<div>\n\t<img ng-if="spinner" class="pi-logo" src="img/loader.gif" />\n\t<div ng-if="!spinner" ng-transclude></div>\n</div>\n';function directive$11(){return{transclude:!0,replace:!0,template:template$10,require:[],scope:{spinner:"=piSpinner"}}}directive$11.$inject=[];var module$16=angular.module("piHelperDirective",[]);function Logger$1(a){var s={};return{createLog:function(e,t){var n=stream(),r=stream(),i=lodash.defaults({},t,a);if(!lodash.isString(e)&&!lodash.isNumber(e))throw new Error("Log name must be a string");return function(e){if(!["onRow","onEnd","serialize","send"].every(function(t){return lodash.isFunction(e[t])}))throw new Error('The Logger requires all four of the following functions: "onRow","onEnd","serialize","send"')}(i),n.map(o(function(t){return i.onRow(e,t,i,s)})).map(r),n.end.map(o(function(){return i.onEnd(e,i,s)})).map(r),r.map(function(t){return lodash.isUndefined(t)?stream.HALT:t}).map(o(function(t){return i.serialize(e,t,i,s)})).map(o(function(t){return i.send(e,t,i,s)})),n;function o(t){return function(){try{return t.apply(this,arguments)}catch(t){if(i.onError)return i.onError.apply(this,[t].concat(arguments));throw t}}}},ctx:s}}module$16.directive("piSwap",swapDirective),module$16.directive("piSpinner",directive$11);var dfltLogger={onRow:onRow,onEnd:onEnd,serialize:serialize,send:send};function onRow(t,e,n,r){var i=r[t]||(r[t]=[]);if(e.isSave)return[lodash.set(e,"$isManual",!0)];if(n.isManager)return[e];if(i.push(e),n.pulse&&i.length>=n.pulse){var o=[].concat(i);return i.length=0,o}}function onEnd(t,e,n){var r=n[t]||(n[t]=[]);if(r.length)return r}function serialize(e,t,n){var r=lodash.assign({data:t.map(function(t){return lodash.set(t,"taskName",e)})},window.piGlobal.$meta,n.meta);return JSON.stringify(r)}function send(e,n,r,i){r.url&&xhr({url:r.url,method:"PUT",body:n}).catch(function(t){r.onError.apply(null,[t,e,n,r,i])})}var serial=1e3,taskNumber=0,lastTrialId,oldLogger={onRow:onRow$1,onEnd:onEnd$1,serialize:serialize$1,send:send$1};function onRow$1(t,e,n,r){var i,o=r[t]||(r[t]=[]);if(n.isSave)return i=e,lodash.pairs(i).map(function(t){return{name:t[0],response:t[1],serial:serial++}});if(n.isManager)return e;if((n.isPIP||n.isTime)&&(e.trial_id===lastTrialId&&n.onError.apply(null,[new Error("minno-time: PI server does not accept multiple logs per trial"),t,e,n,r]),lastTrialId=e.trial_id),o.push(e),n.pulse&&o.length>=n.pulse){var a=[].concat(o);return o.length=0,a}}function onEnd$1(t,e,n){var r=n[t]||(n[t]=[]);if(taskNumber++,serial=1e3,r.length)return r}function serialize$1(t,e,n){var r,i,o=lodash.assign({taskName:t,taskNumber:taskNumber},window.piGlobal.$meta,n.meta);return n.isManager&&!n.isSave?JSON.stringify(lodash.assign(o,e)):n.isSave||!n.isPIP&&!n.isTime?(r=e.map(function(t){return lodash.assign({},t,o)}),JSON.stringify(r)):(r="json="+encodeURIComponent(JSON.stringify(e)))+((i=function(t){var e,n=[];for(e in t)n.push(encodeURIComponent(e)+"="+encodeURIComponent(t[e]));return n.join("&").replace(/%20/g,"+")}(o))?"&"+i:"")}function send$1(e,n,r,i){var t=!r.isSave&&(r.isPIP||r.isTime)&&"application/x-www-form-urlencoded; charset=UTF-8";xhr({url:r.isSave||r.isQuest?"/implicit/PiQuest":r.isPIP||r.isTime?"/implicit/PiPlayerApplet":"/implicit/PiManager",mehtod:"POST",body:n,contentType:t}).catch(function(t){r.onError.apply(null,[t,e,n,r,i])})}var debugLogger={onRow:onRow$2,onEnd:onEnd$2,serialize:serialize$2,send:send$2};function onRow$2(t,e,n,r){var i=r[t]||(r[t]=[]);if(i.push(e),n.pulse&&i.length>=n.pulse){var o=[].concat(i);return i.length=0,o}}function onEnd$2(t,e,n){var r=n[t]||(n[t]=[]);if(r.length)return r}function serialize$2(t,e){return e}function send$2(e,t,n){n.url||console.warn("Logger("+e+"): You have not set a logger url"),t.map(function(t){console.info("Logger("+e+"):",t)})}function managerLogger(t,e){return Logger$1(lodash.assign({onError:function(){e({type:"error",message:"Logger failed",error:lodash.first(arguments),rows:[["Task Name:",arguments[1]],["Data processed:",5==arguments.length?arguments[2]:"N/A"],["Settings:",arguments[arguments.length-2]]]})}},getSettingsObject(t),t))}function getSettingsObject(t){var e=t.type;return t.postCsv?csvLogger:"csv"==e?csvLogger:"old"==e?oldLogger:"debug"==e?debugLogger:dfltLogger}function getParameters(){var e={},t=window.location.search;return t&&(t=t.substr(1)).split("&").map(function(t){return t.split("=")}).forEach(function(t){e[t[0]]=decodeURIComponent(t[1])}),e}function managerService(t,e,i,o,f,a){function s(t,e){var n=this,r=e.settings||{};if(!(this instanceof s))return new s(t,e);this.$scope=t,this.script=e,this.logger=managerLogger(r.logger||{},a),this.log=createLog(this.logger,this.script,{type:"manager",$name:e.name||"manager"}),t.$on("$destroy",function(){n.log.end(!0)}),this.sequence=new i(e),function(t,e){var n,r,i=f.get("managerCanvas"),o=f.get("$document"),a=f.get("piPreloadImages"),s=f.get("managerBeforeUnload"),u=f.get("$rootElement"),l=e.skin||"default",c=f.get("piConsole");s.activate(),t.$on("$destroy",s.deactivate),n=i(e.canvas),t.$on("$destroy",n),e.injectStyle&&(c({type:"warn",message:"settings.injectStyle is deprecated, please use the injectStyle task instead",context:e.injectStyle}),r=injectStyle(e.injectStyle),t.$on("$destroy",r));a(e.preloadImages||[]),e.title&&(o[0].title=e.title);u.addClass(l+"-skin"),u.attr("dir",e.rtl?"rtl":""),c.settings=e.DEBUG||{},t.global.$url=getParameters()}(t,r),t.$on("manager:next",function(t,e){switch(e||(e={type:"next"}),e.type){case"current":n.load(e);break;case"prev":n.prev(e);break;case"next":default:n.next(e)}}),t.$on("manager:prev",function(){n.prev()})}return lodash.extend(s.prototype,{next:function(t){this.sequence.next(),this.load(t)},prev:function(t){this.sequence.prev(),this.load(t)},current:function(){return this.sequence.current()},load:function(t){var e=this.current(),n=this.$scope,r={baseUrl:this.baseUrl,bustCache:t&&t.bustCache};if(e)return o(e,r).then(function(){a({tags:["manager"],type:"debug",message:"Manager:currentTask",context:e}),n.$emit("manager:loaded")});n.$emit("manager:loaded")},setBaseUrl:function(t){this.baseUrl=t}}),s}function sequenceProvider(r,i,o,a){function s(t){var e,n;if(!(this instanceof s))return new s(t);(e=this.db=new r).createColl("tasks"),e.add("tasks",t.tasksSets||[]),n={global:i.global},lodash.extend(o,n),lodash.extend(a,n),this.sequence=e.sequence("tasks",t.sequence)}return lodash.extend(s.prototype,{next:function(){return this.sequence.next(),this},prev:function(){return this.sequence.prev(),this},current:function(){return this.sequence.current()}}),s}function managerLoadService(n,r){return function(t){var e=lodash.isString(t)?r(t):t;return n.when(e).then(normalizeTasks)}}function normalizeTasks(t){return t.type&&"manager"!=t.type?{type:"manager",settings:{logger:{type:"debug"}},current:{},sequence:[{type:t.type,script:t}]}:t}function getScriptProvider(){var s=lodash.memoize(function(r){return new Promise(function(t,e){var n=new XMLHttpRequest;n.open("GET",r,!0),n.onreadystatechange=function(){4===this.readyState&&(200<=this.status&&this.status<400?t(this.responseText):e(new Error("Failed posting to: "+r)))},n.send()})});return function(t,e){e||(e={});var n,r=(i=t,o=e,a="",o.baseUrl&&!/^\/|:/.test(i)&&(a+=o.baseUrl+"/"),a+=i,o.bustCache&&(a+="?bust="+ +new Date),a);var i,o,a;return e.isText?s(r):(n=r,new Promise(function(t,e){require([n],t,e)}))}}function taskLoadService(i,e,r){return function(e,t){var n,r;return n=e.scriptUrl?o(e.scriptUrl,t):e.script,r=e.templateUrl?o(e.templateUrl,lodash.extend({isText:!0},t)):e.template,i.all({script:i.when(n),template:i.when(r)}).then(function(t){return e.$name=e.name||lodash.get(t.script,"name","unnamedTask"),e.$script=t.script,e.$template=t.template,e})};function o(n,t){return e(n,t).then(function(t){if(!lodash.isUndefined(t))return t;var e=new Error("Could not load task "+n);throw r({tags:"task",type:"error",context:n,message:"Make sure that you returned the script and that your script does not have any errors",error:e}),e})}}managerService.$inject=["$rootScope","$q","managerSequence","managerTaskLoad","$injector","piConsole"],sequenceProvider.$inject=["Database","$rootScope","mixerDefaultContext","templateDefaultContext"],managerLoadService.$inject=["$q","managerGetScript"],taskLoadService.$inject=["$q","managerGetScript","piConsole"];var addEvent$1=window.attachEvent||window.addEventListener,removeEvent$1=window.detachEvent||window.removeEventListener,chkevent=window.attachEvent?"onbeforeunload":"beforeunload",proto={activate:function(){addEvent$1(chkevent,leaveEvent)},deactivate:function(){removeEvent$1(chkevent,leaveEvent)}};function leaveEvent(t){var e="Are you sure you want to leave this page? You may have some unsaved data here.";return(t||window.event).returnValue=e}function beforeunloadFactory(){return lodash.create(proto)}function managerControler(r,i,o,a){this.init=function(t){var e,n=this;if(!t)return;if(lodash.isString(t))try{e=r.$eval(t)}catch(t){}finally{e||(e=t)}else e=t;o(e).then(function(t){r.script=t,r.settings=t&&t.settings||{},r.manager=n.manager=new i(r,t),n.manager.setBaseUrl(function(t){if(!lodash.isString(t))return;return t.substring(0,t.lastIndexOf("/"))}(e)),r.$emit("manager:next")},function(t){a({type:"error",message:"Failed to load "+e,tags:["manager"],error:t})})}}function directive$12(l,c,f){return{priority:1e3,replace:!0,template:["<div pi-swap ng-cloak ng-class=\"{'pi-spinner':loading}\">",'<div ng-bind-html="task.preText"></div>','<div pi-task="task"></div>','<div ng-bind-html="task.postText"></div>',"</div>"].join("\n"),controller:managerControler,require:["piManager","piSwap"],link:function(n,t,e,r){var i,o,a=r[1],s=r[0];function u(t,n){var e=l.when();lodash(t).map(function(e){return function(){var t=lodash.isFunction(e)?c.invoke(e,null,n||{}):e;return l.when(t)}}).reduce(function(t,e){return t.then(e,function(t){f({type:"error",message:"There was an error in the task sequence.",tags:["manager"],error:t})})},e)}s.init(e.piManager),n.$on("manager:loaded",function(){n.loading=!1,o=i,(i=s.manager.current())?(e={prevTask:o,currentTask:i,managerSettings:n.settings},u([function(){var t={taskName:i.name||"namelessTask",taskNumber:lodash.get(i,"$meta.number"),taskURL:i.scriptUrl||i.templateUrl};s.manager.log(t,n.settings)},n.settings.onPreTask,lodash.get(o,"post"),i.pre,lodash.bind(a.next,a,{task:i,settings:n.settings}),i.load,function(){n.loading=!1}],e)):(t={prevTask:o,currentTask:i},u([o&&o.post,lodash.bind(a.empty,a),n.settings.onEnd,function(){n.loading=!1,n.$emit("manager:done"),n.$destroy()}],t));var t;var e}),n.$on("task:done",function(t,e){t.stopPropagation(),n.loading=!0,n.$emit("manager:next",e)}),n.loading=!0}}}function piLinkDirective(n){return{link:function(t,e){e.on("click",function(){n.deactivate()})}}}managerControler.$inject=["$scope","managerService","managerLoad","piConsole"],directive$12.$inject=["$q","$injector","piConsole"],piLinkDirective.$inject=["managerBeforeUnload"];var module$13=angular.module("taskManager",[module$14.name,module$15.name,module$10.name,module$16.name,module$7.name]),P9b,Q9b,R9b;module$13.service("managerService",managerService),module$13.service("managerSequence",sequenceProvider),module$13.service("managerLoad",managerLoadService),module$13.service("managerGetScript",getScriptProvider),module$13.service("managerTaskLoad",taskLoadService),module$13.factory("managerBeforeUnload",beforeunloadFactory),module$13.directive("piManager",directive$12),module$13.directive("piLink",piLinkDirective),
/**
 * @license AngularJS v1.2.27
 * (c) 2010-2014 Google, Inc. http://angularjs.org
 * License: MIT
 */
P9b=window,Q9b=window.angular,Q9b.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){var i="$$ngAnimateChildren";return function(t,e,n){var r=n.ngAnimateChildren;Q9b.isString(r)&&0===r.length?e.data(i,!0):t.$watch(r,function(t){e.data(i,!!t)})}}).factory("$$animateReflow",["$$rAF","$document",function(e,t){var n=t[0].body;return function(t){return e(function(){n.offsetWidth,t()})}}]).config(["$provide","$animateProvider",function(t,n){var L=Q9b.noop,V=Q9b.forEach,b=n.$$selectors,B=1,P="$$ngAnimateState",j="ng-animate",T={running:!0};function z(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.nodeType==B)return n}}function l(t){return t&&Q9b.element(t)}function c(t){return Q9b.element(z(t))}function M(t,e){return z(t)==z(e)}t.decorator("$animate",["$delegate","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document",function(i,$,y,E,k,o,t){var C=0;E.data(P,T),o.$$postDigest(function(){o.$$postDigest(function(){T.running=!1})});var e=n.classNameFilter(),w=e?function(t){return e.test(t)}:function(){return!0};function a(t){var e=t.data(P)||{};e.running=!0,t.data(P,e)}function q(s,e,u){var t=s[0];if(t){var l,c,n="setClass"==e,r=n||"addClass"==e||"removeClass"==e;Q9b.isArray(u)&&(l=u[0],c=u[1],u=l+" "+c);var i=s.attr("class")+" "+u;if(w(i)){var o=L,a=[],f=[],d=L,h=[],p=[],v=(" "+i).replace(/\s+/g,".");return V(function(t){if(t){var e=[],n={},r=t.substr(1).split(".");(y.transitions||y.animations)&&e.push($.get(b[""]));for(var i=0;i<r.length;i++){var o=r[i],a=b[o];a&&!n[o]&&(e.push($.get(a)),n[o]=!0)}return e}}(v),function(t){!m(t,e)&&n&&(m(t,"addClass"),m(t,"removeClass"))}),{node:t,event:e,className:u,isClassBased:r,isSetClassOperation:n,before:function(t){o=t,g(f,a,function(){o=L,t()})},after:function(t){d=t,g(p,h,function(){d=L,t()})},cancel:function(){V(a,function(t){(t||L)(!0)}),o(!0),V(h,function(t){(t||L)(!0)}),d(!0)}}}}function m(t,e){var n=t[e],r=t["before"+e.charAt(0).toUpperCase()+e.substr(1)];if(n||r)return"leave"==e&&(r=n,n=null),p.push({event:e,fn:n}),f.push({event:e,fn:r}),!0}function g(t,r,i){var o=[];V(t,function(t){t.fn&&o.push(t)});var a=0;V(o,function(t,e){var n=function(){!function(t){if(r){if((r[t]||L)(),++a<o.length)return;r=null}i()}(e)};switch(t.event){case"setClass":r.push(t.fn(s,l,c,n));break;case"addClass":r.push(t.fn(s,l||u,n));break;case"removeClass":r.push(t.fn(s,c||u,n));break;default:r.push(t.fn(s,n))}}),r&&0===r.length&&i()}}return{enter:function(t,e,n,r){t=Q9b.element(t),e=l(e),n=l(n),a(t),i.enter(t,e,n),o.$$postDigest(function(){s("enter","ng-enter",t=c(t),e,n,L,r)})},leave:function(t,e){u(t=Q9b.element(t)),a(t),o.$$postDigest(function(){s("leave","ng-leave",c(t),null,null,function(){i.leave(t)},e)})},move:function(t,e,n,r){t=Q9b.element(t),e=l(e),n=l(n),u(t),a(t),i.move(t,e,n),o.$$postDigest(function(){s("move","ng-move",t=c(t),e,n,L,r)})},addClass:function(t,e,n){t=c(t=Q9b.element(t)),s("addClass",e,t,null,null,function(){i.addClass(t,e)},n)},removeClass:function(t,e,n){t=c(t=Q9b.element(t)),s("removeClass",e,t,null,null,function(){i.removeClass(t,e)},n)},setClass:function(t,e,n,r){t=c(t=Q9b.element(t)),s("setClass",[e,n],t,null,null,function(){i.setClass(t,e,n)},r)},enabled:function(t,e){switch(arguments.length){case 2:if(t)A(e);else{var n=e.data(P)||{};n.disabled=!0,e.data(P,n)}break;case 1:T.disabled=!t;break;default:t=!T.disabled}return!!t}};function s(n,r,i,t,e,o,a){var s=q(i,n,r);if(!s)return _(),w(),b(),void S();r=s.className;var u=Q9b.element._data(s.node);u=u&&u.events,t||(t=e?e.parent():i.parent());var l,c=i.data(P)||{},f=c.active||{},d=c.totalActive||0,h=c.last;if(s.isClassBased&&(l=c.running||c.disabled||h&&!h.isClassBased),l||function(t,e){if(T.disabled)return!0;if(M(t,E))return T.running;var n,r,i;do{if(0===e.length)break;var o=M(e,E),a=o?T:e.data(P)||{};if(a.disabled)return!0;if(o&&(i=!0),!1!==n){var s=e.data("$$ngAnimateChildren");Q9b.isDefined(s)&&(n=s)}r=r||a.running||a.last&&!a.last.isClassBased}while(e=e.parent());return!i||!n&&r}(i,t))return _(),w(),b(),void S();var p=!1;if(0<d){var v=[];if(s.isClassBased){if("setClass"==h.event)v.push(h),A(i,r);else if(f[r]){var m=f[r];m.event==n?p=!0:(v.push(m),A(i,r))}}else if("leave"==n&&f["ng-leave"])p=!0;else{for(var g in f)v.push(f[g]),A(i,g);f={},d=0}0<v.length&&V(v,function(t){t.cancel()})}if(!s.isClassBased||s.isSetClassOperation||p||(p="addClass"==n==i.hasClass(r)),p)return _(),w(),b(),void x();"leave"==n&&i.one("$destroy",function(t){var e=Q9b.element(this),n=e.data(P);if(n){var r=n.active["ng-leave"];r&&(r.cancel(),A(e,"ng-leave"))}}),i.addClass(j);var $=C++;function y(t){var e="$animate:"+t;u&&u[e]&&0<u[e].length&&k(function(){i.triggerHandler(e,{event:n,className:r})})}function w(){y("before")}function b(){y("after")}function x(){y("close"),a&&k(function(){a()})}function _(){_.hasBeenRun||(_.hasBeenRun=!0,o())}function S(){if(!S.hasBeenRun){S.hasBeenRun=!0;var t=i.data(P);t&&(s&&s.isClassBased?A(i,r):(k(function(){var t=i.data(P)||{};$==t.index&&A(i,r)}),i.data(P,t))),x()}}d++,f[r]=s,i.data(P,{last:s,active:f,index:$,totalActive:d}),w(),s.before(function(t){var e=i.data(P);t=t||!e||!e.active[r]||s.isClassBased&&e.active[r].event!=n,_(),!0===t?S():(b(),s.after(S))})}function u(t){var e=z(t);if(e){var n=Q9b.isFunction(e.getElementsByClassName)?e.getElementsByClassName(j):e.querySelectorAll("."+j);V(n,function(t){var e=(t=Q9b.element(t)).data(P);e&&e.active&&V(e.active,function(t){t.cancel()})})}}function A(t,e){if(M(t,E))T.disabled||(T.running=!1,T.structural=!1);else if(e){var n=t.data(P)||{},r=!0===e;!r&&n.active&&n.active[e]&&(n.totalActive--,delete n.active[e]),!r&&n.totalActive||(t.removeClass(j),t.removeData(P))}}}]),n.register("",["$window","$sniffer","$timeout","$$animateReflow",function(f,t,i,n){var x,_,S,E,k="";P9b.ontransitionend===R9b&&P9b.onwebkittransitionend!==R9b?(k="-webkit-",x="WebkitTransition",_="webkitTransitionEnd transitionend"):(x="transition",_="transitionend"),P9b.onanimationend===R9b&&P9b.onwebkitanimationend!==R9b?(k="-webkit-",S="WebkitAnimation",E="webkitAnimationEnd animationend"):(S="animation",E="animationend");var r,d="Duration",C="Property",h="Delay",p="IterationCount",q="$$ngAnimateKey",A="$$ngAnimateCSS3Data",P="ng-animate-block-transitions",j=3,T=1.5,M=1e3,O={},D=0,o=[];function a(){r||(r=n(function(){o=[],r=null,O={}}))}function s(t,e){r&&r(),o.push(e),r=n(function(){V(o,function(t){t()}),o=[],r=null,O={}})}var u=null,l=0,c=[];function R(t,e){var n=z(t);t=Q9b.element(n),c.push(t);var r=Date.now()+e;r<=l||(i.cancel(u),l=r,u=i(function(){V(c,function(t){var e=t.data(A);e&&(e.closeAnimationFn||L)()}),c=[]},e,!1))}function N(t,e){var n=e?O[e]:null;if(!n){var r,i,o,a,s=0,u=0,l=0,c=0;V(t,function(t){if(t.nodeType==B){var e=f.getComputedStyle(t)||{};o=e[x+d],s=Math.max(v(o),s),a=e[x+C],r=e[x+h],u=Math.max(v(r),u),i=e[S+h],c=Math.max(v(i),c);var n=v(e[S+d]);0<n&&(n*=parseInt(e[S+p],10)||1),l=Math.max(n,l)}}),n={total:0,transitionPropertyStyle:a,transitionDurationStyle:o,transitionDelayStyle:r,transitionDelay:u,transitionDuration:s,animationDelayStyle:i,animationDelay:c,animationDuration:l},e&&(O[e]=n)}return n}function v(t){var e=0,n=Q9b.isString(t)?t.split(/\s*,\s*/):[];return V(n,function(t){e=Math.max(parseFloat(t)||0,e)}),e}function m(t,e,n,r){var i,o,a,s=(o=(i=e).parent(),(a=o.data(q))||(o.data(q,++D),a=D),a+"-"+z(i).getAttribute("class")),u=s+" "+n,l=O[u]?++O[u].total:0,c={};if(0<l){var f=n+"-stagger",d=s+" "+f,h=!O[d];h&&e.addClass(f),c=N(e,d),h&&e.removeClass(f)}r=r||function(t){return t()},e.addClass(n);var p=e.data(A)||{},v=r(function(){return N(e,u)}),m=v.transitionDuration,g=v.animationDuration;if(0===m&&0===g)return e.removeClass(n),!1;e.data(A,{running:p.running||0,itemIndex:l,stagger:c,timings:v,closeAnimationFn:L});var $,y,w,b=0<p.running||"setClass"==t;return 0<m&&($=e,y=b,"ng-enter"!=(w=n)&&"ng-move"!=w&&"ng-leave"!=w&&y?$.addClass(P):z($).style[x+C]="none"),0<g&&0<c.animationDelay&&0===c.animationDuration&&(z(e).style[S]="none 0s"),!0}function g(t,e){var n=x+C,r=z(t);r.style[n]&&0<r.style[n].length&&(r.style[n]=""),t.removeClass(P)}function $(t){var e=S,n=z(t);n.style[e]&&0<n.style[e].length&&(n.style[e]="")}function I(t,n,r){var i="";return V(t.split(","),function(t,e){i+=(0<e?",":"")+(r*n+parseInt(t,10))+"s"}),i}function y(t,e,n,r){if(m(t,e,n,r))return function(t){t&&F(e,n)}}function w(t,e,n,r){if(e.data(A))return function(t,r,i,o){var e=z(r),n=r.data(A);if(-1!=e.getAttribute("class").indexOf(i)&&n){var a="";V(i.split(" "),function(t,e){a+=(0<e?" ":"")+t+"-active"});var s=n.stagger,u=n.timings,l=n.itemIndex,c=Math.max(u.transitionDuration,u.animationDuration),f=Math.max(u.transitionDelay,u.animationDelay),d=f*M,h=Date.now(),p=E+" "+_,v="",m=[];if(0<u.transitionDuration){var g=u.transitionPropertyStyle;-1==g.indexOf("all")&&(v+=k+"transition-property: "+g+";",v+=k+"transition-duration: "+u.transitionDurationStyle+";",m.push(k+"transition-property"),m.push(k+"transition-duration"))}if(0<l){if(0<s.transitionDelay&&0===s.transitionDuration){var $=u.transitionDelayStyle;v+=k+"transition-delay: "+I($,s.transitionDelay,l)+"; ",m.push(k+"transition-delay")}0<s.animationDelay&&0===s.animationDuration&&(v+=k+"animation-delay: "+I(u.animationDelayStyle,s.animationDelay,l)+"; ",m.push(k+"animation-delay"))}if(0<m.length){var y=e.getAttribute("style")||"";e.setAttribute("style",y+"; "+v)}r.on(p,x),r.addClass(a),n.closeAnimationFn=function(){b(),o()};var w=(l*(Math.max(s.animationDelay,s.transitionDelay)||0)+(f+c)*T)*M;return n.running++,R(r,w),b}function b(t){r.off(p,x),r.removeClass(a),F(r,i);var e=z(r);for(var n in m)e.style.removeProperty(m[n])}function x(t){t.stopPropagation();var e=t.originalEvent||t,n=e.$manualTimeStamp||e.timeStamp||Date.now(),r=parseFloat(e.elapsedTime.toFixed(j));Math.max(n-h,0)>=d&&c<=r&&o()}o()}(0,e,n,r);F(e,n),r()}function b(t,e,n,r){var i=y(t,e,n);if(!i)return a(),void r();var o=i;return s(0,function(){g(e),$(e),o=w(0,e,n,r)}),function(t){(o||L)(t)}}function F(t,e){t.removeClass(e);var n=t.data(A);n&&(n.running&&n.running--,n.running&&0!==n.running||t.removeData(A))}return{enter:function(t,e){return b("enter",t,"ng-enter",e)},leave:function(t,e){return b("leave",t,"ng-leave",e)},move:function(t,e){return b("move",t,"ng-move",e)},beforeSetClass:function(r,i,o,t){var e=U(o,"-remove")+" "+U(i,"-add"),n=y("setClass",r,e,function(t){var e=r.attr("class");r.removeClass(o),r.addClass(i);var n=t();return r.attr("class",e),n});if(n)return s(0,function(){g(r),$(r),t()}),n;a(),t()},beforeAddClass:function(n,r,t){var e=y("addClass",n,U(r,"-add"),function(t){n.addClass(r);var e=t();return n.removeClass(r),e});if(e)return s(0,function(){g(n),$(n),t()}),e;a(),t()},setClass:function(t,e,n,r){return w(0,t,(n=U(n,"-remove"))+" "+(e=U(e,"-add")),r)},addClass:function(t,e,n){return w(0,t,U(e,"-add"),n)},beforeRemoveClass:function(r,i,t){var e=y("removeClass",r,U(i,"-remove"),function(t){var e=r.attr("class");r.removeClass(i);var n=t();return r.attr("class",e),n});if(e)return s(0,function(){g(r),$(r),t()}),e;t()},removeClass:function(t,e,n){return w(0,t,U(e,"-remove"),n)}};function U(t,n){var r="";return t=Q9b.isArray(t)?t:t.split(/\s+/),V(t,function(t,e){t&&0<t.length&&(r+=(0<e?" ":"")+t+n)}),r}}])}]);for(var vendors=["webkit","moz"],i=0;i<vendors.length&&!window.requestAnimationFrame;++i){var vp=vendors[i];window.requestAnimationFrame=window[vp+"RequestAnimationFrame"],window.cancelAnimationFrame=window[vp+"CancelAnimationFrame"]||window[vp+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var lastTime=0;window.requestAnimationFrame=function(t){var e=+new Date,n=Math.max(lastTime+16,e);return setTimeout(function(){t(lastTime=n)},n-e)},window.cancelAnimationFrame=clearTimeout}function animation(t,s){var u=t.requestAnimationFrame,l=t.cancelAnimationFrame;return{enter:function(e,r){var i,o=e[0],a=s();return e.css({top:"-60px"}),i=u(function t(){var e=s()-a;var n=e/300;if(300<e)return o.style.top=0,l(i),void r();o.style.top=60*(n-1)+"px";i=u(t)}),function(t){t&&(l(i),e.css({top:"0px"}))}},leave:function(t,r){var i,o=t[0],a=s();return i=u(function t(){var e=s()-a;var n=1-e/300;if(300<e)return l(i),void r();o.style.top=60*(n-1)+"px";i=u(t)}),function(t){t&&l(i)}}}}var dropInAnimation=["$window","timerNow",animation];function animation$1(t,s){var u=t.requestAnimationFrame,l=t.cancelAnimationFrame;return{enter:function(t,r){var i,o=t[0],a=s();return o.style.opacity=0,i=u(function t(){var e=s()-a;var n=e/300;if(300<e)return o.style.opacity=1,l(i),void r();o.style.opacity=n;i=u(t)}),function(t){t&&(l(i),o.style.opacity=1)}},leave:function(t,r){var i,o=t[0],a=s();return i=u(function t(){var e=s()-a;var n=1-e/300;if(300<e)return o.style.opacity=0,l(i),void r();o.style.opacity=n;i=u(t)}),function(t){t&&(l(i),o.style.opacity=0)}}}}var fadeAnimation=["$window","timerNow",animation$1];function animation$2(t,s){var u=t.requestAnimationFrame,l=t.cancelAnimationFrame;return{enter:function(t,r){var i,o=t[0],a=s();return o.style.left="-100%",i=u(function t(){var e=s()-a;var n=1-e/300;if(300<e)return o.style.left="0%",l(i),void r();o.style.left=100*-n+"%";i=u(t)}),function(t){t&&(l(i),o.style.left="0%")}},leave:function(t,r){var i,o=t[0],a=s();return i=u(function t(){var e=s()-a;var n=e/300;if(300<e)return o.style.left="100%",l(i),void r();o.style.left=100*n+"%";i=u(t)}),function(t){t&&(l(i),o.style.left="100%")}}}}var slideAnimation=["$window","timerNow",animation$2],module$17=angular.module("pi.animate",["ngAnimate"]);module$17.animation(".drop-in",dropInAnimation),module$17.animation(".fade",fadeAnimation),module$17.animation(".slide",slideAnimation),window.require=require,window.requirejs=requirejs$1,window.define=define;var app$1=angular.module("piApp",[module$1.name,module$12.name,module$13.name,module$17.name,module$7.name]);function activate(t){angular.bootstrap(t,[app$1.name])}return app$1.run(["$rootScope","$rootElement","$parse","$window",function(t,e,n,r){var i=n(e.attr("pi-global"))(r);window.piGlobal||(window.piGlobal={}),t.global=window.piGlobal,i&&lodash.extend(t.global,i)}]),app$1.config(["$provide",function(t){"function"!=typeof Object.getPrototypeOf&&(Object.getPrototypeOf="object"==typeof"test".__proto__?function(t){return t.__proto__}:function(t){return t.constructor.prototype});t.decorator("$rootScope",["$delegate",function(n){var r=Object.getPrototypeOf(n);return r.$new=function(t){var e;return t?((e=new r.constructor).$root=this.$root,e.$$asyncQueue=this.$$asyncQueue,e.$$postDigestQueue=this.$$postDigestQueue):(this.$$childScopeClass||(this.$$childScopeClass=function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$id=++n.$id,this.$$childScopeClass=null},this.$$childScopeClass.prototype=this),e=new this.$$childScopeClass),(e.this=e).$parent=this,e.$$prevSibling=this.$$childTail,this.$$childHead?(this.$$childTail.$$nextSibling=e,this.$$childTail=e):this.$$childHead=this.$$childTail=e,e},n.$new=r.$new,n}])}]),define("managerAPI",lodash.constant(API)),define("timeAPI",lodash.constant(api$1)),define("pipAPI",lodash.constant(api$1)),define("questAPI",lodash.constant(quest)),define("minno-sequencer",lodash.constant(Database)),define("lodash",lodash.constant(lodash)),define("underscore",lodash.constant(lodash)),define("angular",lodash.constant(angular)),define("pipScorer",lodash.constant(Scorer)),define("dscore",lodash.constant(Scorer)),app$1.config(["$provide",function(t){t.decorator("$exceptionHandler",["$delegate","$window",function(n,r){return function(t,e){r._errs&&r._errs.push(t),n(t,e)}}])}]),angular.element(document).ready(function(){var t=document.getElementById("minno-app");t&&activate(t)}),activate}();
//# sourceMappingURL=pi-minno.js.map
